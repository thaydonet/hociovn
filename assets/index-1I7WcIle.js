const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BulkImport-BxAyBTOu.js","./router-CAYE_5iO.js","./vendor-CjZsb-BP.js"])))=>i.map(i=>d[i]);
import{r as he,u as Vn,L as jt,R as Na,a as V5,b as Cf,H as bF,c as wF,d as Nr}from"./router-CAYE_5iO.js";import{r as _F,a as NF,g as Df,c as Ro,b as SF}from"./vendor-CjZsb-BP.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();var Hx={exports:{}},Ud={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN;function jF(){if(YN)return Ud;YN=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,s){var o=null;if(s!==void 0&&(o=""+s),a.key!==void 0&&(o=""+a.key),"key"in a){s={};for(var l in a)l!=="key"&&(s[l]=a[l])}else s=a;return a=s.ref,{$$typeof:r,type:n,key:o,ref:a!==void 0?a:null,props:s}}return Ud.Fragment=e,Ud.jsx=t,Ud.jsxs=t,Ud}var ZN;function EF(){return ZN||(ZN=1,Hx.exports=jF()),Hx.exports}var i=EF(),Vx={exports:{}},Hd={},Gx={exports:{}},Qx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JN;function AF(){return JN||(JN=1,function(r){function e(P,G){var ue=P.length;P.push(G);e:for(;0<ue;){var le=ue-1>>>1,pe=P[le];if(0<a(pe,G))P[le]=G,P[ue]=pe,ue=le;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var G=P[0],ue=P.pop();if(ue!==G){P[0]=ue;e:for(var le=0,pe=P.length,de=pe>>>1;le<de;){var L=2*(le+1)-1,X=P[L],V=L+1,se=P[V];if(0>a(X,ue))V<pe&&0>a(se,X)?(P[le]=se,P[V]=ue,le=V):(P[le]=X,P[L]=ue,le=L);else if(V<pe&&0>a(se,ue))P[le]=se,P[V]=ue,le=V;else break e}}return G}function a(P,G){var ue=P.sortIndex-G.sortIndex;return ue!==0?ue:P.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,g=3,m=!1,v=!1,x=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var G=t(c);G!==null;){if(G.callback===null)n(c);else if(G.startTime<=P)n(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=t(c)}}function j(P){if(x=!1,N(P),!v)if(t(u)!==null)v=!0,E||(E=!0,O());else{var G=t(c);G!==null&&H(j,G.startTime-P)}}var E=!1,T=-1,F=5,A=-1;function R(){return b?!0:!(r.unstable_now()-A<F)}function I(){if(b=!1,E){var P=r.unstable_now();A=P;var G=!0;try{e:{v=!1,x&&(x=!1,S(T),T=-1),m=!0;var ue=g;try{t:{for(N(P),h=t(u);h!==null&&!(h.expirationTime>P&&R());){var le=h.callback;if(typeof le=="function"){h.callback=null,g=h.priorityLevel;var pe=le(h.expirationTime<=P);if(P=r.unstable_now(),typeof pe=="function"){h.callback=pe,N(P),G=!0;break t}h===t(u)&&n(u),N(P)}else n(u);h=t(u)}if(h!==null)G=!0;else{var de=t(c);de!==null&&H(j,de.startTime-P),G=!1}}break e}finally{h=null,g=ue,m=!1}G=void 0}}finally{G?O():E=!1}}}var O;if(typeof _=="function")O=function(){_(I)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,D=U.port2;U.port1.onmessage=I,O=function(){D.postMessage(null)}}else O=function(){y(I,0)};function H(P,G){T=y(function(){P(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_next=function(P){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var ue=g;g=G;try{return P()}finally{g=ue}},r.unstable_requestPaint=function(){b=!0},r.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ue=g;g=P;try{return G()}finally{g=ue}},r.unstable_scheduleCallback=function(P,G,ue){var le=r.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?le+ue:le):ue=le,P){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ue+pe,P={id:d++,callback:G,priorityLevel:P,startTime:ue,expirationTime:pe,sortIndex:-1},ue>le?(P.sortIndex=ue,e(c,P),t(u)===null&&P===t(c)&&(x?(S(T),T=-1):x=!0,H(j,ue-le))):(P.sortIndex=pe,e(u,P),v||m||(v=!0,E||(E=!0,O()))),P},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(P){var G=g;return function(){var ue=g;g=G;try{return P.apply(this,arguments)}finally{g=ue}}}}(Qx)),Qx}var eS;function TF(){return eS||(eS=1,Gx.exports=AF()),Gx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function CF(){if(tS)return Hd;tS=1;var r=TF(),e=_F(),t=NF();function n(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function s(f){var p=f,w=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(w=p.return),f=p.return;while(f)}return p.tag===3?w:null}function o(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function l(f){if(s(f)!==f)throw Error(n(188))}function u(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(n(188));return p!==f?null:f}for(var w=f,C=p;;){var q=w.return;if(q===null)break;var Y=q.alternate;if(Y===null){if(C=q.return,C!==null){w=C;continue}break}if(q.child===Y.child){for(Y=q.child;Y;){if(Y===w)return l(q),f;if(Y===C)return l(q),p;Y=Y.sibling}throw Error(n(188))}if(w.return!==C.return)w=q,C=Y;else{for(var ve=!1,Ne=q.child;Ne;){if(Ne===w){ve=!0,w=q,C=Y;break}if(Ne===C){ve=!0,C=q,w=Y;break}Ne=Ne.sibling}if(!ve){for(Ne=Y.child;Ne;){if(Ne===w){ve=!0,w=Y,C=q;break}if(Ne===C){ve=!0,C=Y,w=q;break}Ne=Ne.sibling}if(!ve)throw Error(n(189))}}if(w.alternate!==C)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?f:p}function c(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=c(f),p!==null)return p;f=f.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),_=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=I&&f[I]||f["@@iterator"],typeof f=="function"?f:null)}var U=Symbol.for("react.client.reference");function D(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===U?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case E:return"SuspenseList";case A:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case _:return(f.displayName||"Context")+".Provider";case S:return(f._context.displayName||"Context")+".Consumer";case N:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case T:return p=f.displayName||null,p!==null?p:D(f.type)||"Memo";case F:p=f._payload,f=f._init;try{return D(f(p))}catch{}}return null}var H=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},le=[],pe=-1;function de(f){return{current:f}}function L(f){0>pe||(f.current=le[pe],le[pe]=null,pe--)}function X(f,p){pe++,le[pe]=f.current,f.current=p}var V=de(null),se=de(null),ae=de(null),W=de(null);function z(f,p){switch(X(ae,p),X(se,f),X(V,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?jN(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=jN(p),f=EN(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}L(V),X(V,f)}function re(){L(V),L(se),L(ae)}function ne(f){f.memoizedState!==null&&X(W,f);var p=V.current,w=EN(p,f.type);p!==w&&(X(se,f),X(V,w))}function ie(f){se.current===f&&(L(V),L(se)),W.current===f&&(L(W),Id._currentValue=ue)}var oe=Object.prototype.hasOwnProperty,ye=r.unstable_scheduleCallback,M=r.unstable_cancelCallback,ge=r.unstable_shouldYield,ee=r.unstable_requestPaint,k=r.unstable_now,B=r.unstable_getCurrentPriorityLevel,Q=r.unstable_ImmediatePriority,Z=r.unstable_UserBlockingPriority,J=r.unstable_NormalPriority,K=r.unstable_LowPriority,te=r.unstable_IdlePriority,me=r.log,fe=r.unstable_setDisableYieldValue,xe=null,_e=null;function je(f){if(typeof me=="function"&&fe(f),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(xe,f)}catch{}}var Be=Math.clz32?Math.clz32:Ye,Re=Math.log,ze=Math.LN2;function Ye(f){return f>>>=0,f===0?32:31-(Re(f)/ze|0)|0}var Le=256,it=4194304;function ht(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function ce(f,p,w){var C=f.pendingLanes;if(C===0)return 0;var q=0,Y=f.suspendedLanes,ve=f.pingedLanes;f=f.warmLanes;var Ne=C&134217727;return Ne!==0?(C=Ne&~Y,C!==0?q=ht(C):(ve&=Ne,ve!==0?q=ht(ve):w||(w=Ne&~f,w!==0&&(q=ht(w))))):(Ne=C&~Y,Ne!==0?q=ht(Ne):ve!==0?q=ht(ve):w||(w=C&~f,w!==0&&(q=ht(w)))),q===0?0:p!==0&&p!==q&&(p&Y)===0&&(Y=q&-q,w=p&-p,Y>=w||Y===32&&(w&4194048)!==0)?p:q}function be(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Fe(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $e(){var f=Le;return Le<<=1,(Le&4194048)===0&&(Le=256),f}function vt(){var f=it;return it<<=1,(it&62914560)===0&&(it=4194304),f}function Nt(f){for(var p=[],w=0;31>w;w++)p.push(f);return p}function Qt(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Vr(f,p,w,C,q,Y){var ve=f.pendingLanes;f.pendingLanes=w,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=w,f.entangledLanes&=w,f.errorRecoveryDisabledLanes&=w,f.shellSuspendCounter=0;var Ne=f.entanglements,Oe=f.expirationTimes,He=f.hiddenUpdates;for(w=ve&~w;0<w;){var rt=31-Be(w),ot=1<<rt;Ne[rt]=0,Oe[rt]=-1;var We=He[rt];if(We!==null)for(He[rt]=null,rt=0;rt<We.length;rt++){var Xe=We[rt];Xe!==null&&(Xe.lane&=-536870913)}w&=~ot}C!==0&&io(f,C,0),Y!==0&&q===0&&f.tag!==0&&(f.suspendedLanes|=Y&~(ve&~p))}function io(f,p,w){f.pendingLanes|=p,f.suspendedLanes&=~p;var C=31-Be(p);f.entangledLanes|=p,f.entanglements[C]=f.entanglements[C]|1073741824|w&4194090}function ao(f,p){var w=f.entangledLanes|=p;for(f=f.entanglements;w;){var C=31-Be(w),q=1<<C;q&p|f[C]&p&&(f[C]|=p),w&=~q}}function Da(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function Ns(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function so(){var f=G.p;return f!==0?f:(f=window.event,f===void 0?32:VN(f.type))}function cl(f,p){var w=G.p;try{return G.p=f,p()}finally{G.p=w}}var Te=Math.random().toString(36).slice(2),Qe="__reactFiber$"+Te,At="__reactProps$"+Te,fr="__reactContainer$"+Te,rn="__reactEvents$"+Te,Xu="__reactListeners$"+Te,we="__reactHandles$"+Te,De="__reactResources$"+Te,Ee="__reactMarker$"+Te;function Ae(f){delete f[Qe],delete f[At],delete f[rn],delete f[Xu],delete f[we]}function Ce(f){var p=f[Qe];if(p)return p;for(var w=f.parentNode;w;){if(p=w[fr]||w[Qe]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(f=DN(f);f!==null;){if(w=f[Qe])return w;f=DN(f)}return p}f=w,w=f.parentNode}return null}function ke(f){if(f=f[Qe]||f[fr]){var p=f.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return f}return null}function Ve(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(n(33))}function Ze(f){var p=f[De];return p||(p=f[De]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function qe(f){f[Ee]=!0}var Ge=new Set,Ke={};function dt(f,p){yt(f,p),yt(f+"Capture",p)}function yt(f,p){for(Ke[f]=p,f=0;f<p.length;f++)Ge.add(p[f])}var St=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pt={},ut={};function Mt(f){return oe.call(ut,f)?!0:oe.call(pt,f)?!1:St.test(f)?ut[f]=!0:(pt[f]=!0,!1)}function Er(f,p,w){if(Mt(p))if(w===null)f.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var C=p.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+w)}}function vr(f,p,w){if(w===null)f.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+w)}}function yr(f,p,w,C){if(C===null)f.removeAttribute(w);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(w);return}f.setAttributeNS(p,w,""+C)}}var ka,oo;function aa(f){if(ka===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);ka=p&&p[1]||"",oo=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ka+f+oo}var Ma=!1;function ul(f,p){if(!f||Ma)return"";Ma=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(p){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(Xe){var We=Xe}Reflect.construct(f,[],ot)}else{try{ot.call()}catch(Xe){We=Xe}f.call(ot.prototype)}}else{try{throw Error()}catch(Xe){We=Xe}(ot=f())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(Xe){if(Xe&&We&&typeof Xe.stack=="string")return[Xe.stack,We.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var q=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");q&&q.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=C.DetermineComponentFrameRoot(),ve=Y[0],Ne=Y[1];if(ve&&Ne){var Oe=ve.split(`
`),He=Ne.split(`
`);for(q=C=0;C<Oe.length&&!Oe[C].includes("DetermineComponentFrameRoot");)C++;for(;q<He.length&&!He[q].includes("DetermineComponentFrameRoot");)q++;if(C===Oe.length||q===He.length)for(C=Oe.length-1,q=He.length-1;1<=C&&0<=q&&Oe[C]!==He[q];)q--;for(;1<=C&&0<=q;C--,q--)if(Oe[C]!==He[q]){if(C!==1||q!==1)do if(C--,q--,0>q||Oe[C]!==He[q]){var rt=`
`+Oe[C].replace(" at new "," at ");return f.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",f.displayName)),rt}while(1<=C&&0<=q);break}}}finally{Ma=!1,Error.prepareStackTrace=w}return(w=f?f.displayName||f.name:"")?aa(w):""}function Fa(f){switch(f.tag){case 26:case 27:case 5:return aa(f.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 15:return ul(f.type,!1);case 11:return ul(f.type.render,!1);case 1:return ul(f.type,!0);case 31:return aa("Activity");default:return""}}function yw(f){try{var p="";do p+=Fa(f),f=f.return;while(f);return p}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function sa(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function bw(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function pM(f){var p=bw(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),C=""+f[p];if(!f.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var q=w.get,Y=w.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return q.call(this)},set:function(ve){C=""+ve,Y.call(this,ve)}}),Object.defineProperty(f,p,{enumerable:w.enumerable}),{getValue:function(){return C},setValue:function(ve){C=""+ve},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function eh(f){f._valueTracker||(f._valueTracker=pM(f))}function ww(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var w=p.getValue(),C="";return f&&(C=bw(f)?f.checked?"true":"false":f.value),f=C,f!==w?(p.setValue(f),!0):!1}function th(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var gM=/[\n"\\]/g;function oa(f){return f.replace(gM,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function qp(f,p,w,C,q,Y,ve,Ne){f.name="",ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?f.type=ve:f.removeAttribute("type"),p!=null?ve==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+sa(p)):f.value!==""+sa(p)&&(f.value=""+sa(p)):ve!=="submit"&&ve!=="reset"||f.removeAttribute("value"),p!=null?$p(f,ve,sa(p)):w!=null?$p(f,ve,sa(w)):C!=null&&f.removeAttribute("value"),q==null&&Y!=null&&(f.defaultChecked=!!Y),q!=null&&(f.checked=q&&typeof q!="function"&&typeof q!="symbol"),Ne!=null&&typeof Ne!="function"&&typeof Ne!="symbol"&&typeof Ne!="boolean"?f.name=""+sa(Ne):f.removeAttribute("name")}function _w(f,p,w,C,q,Y,ve,Ne){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(f.type=Y),p!=null||w!=null){if(!(Y!=="submit"&&Y!=="reset"||p!=null))return;w=w!=null?""+sa(w):"",p=p!=null?""+sa(p):w,Ne||p===f.value||(f.value=p),f.defaultValue=p}C=C??q,C=typeof C!="function"&&typeof C!="symbol"&&!!C,f.checked=Ne?f.checked:!!C,f.defaultChecked=!!C,ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"&&(f.name=ve)}function $p(f,p,w){p==="number"&&th(f.ownerDocument)===f||f.defaultValue===""+w||(f.defaultValue=""+w)}function lc(f,p,w,C){if(f=f.options,p){p={};for(var q=0;q<w.length;q++)p["$"+w[q]]=!0;for(w=0;w<f.length;w++)q=p.hasOwnProperty("$"+f[w].value),f[w].selected!==q&&(f[w].selected=q),q&&C&&(f[w].defaultSelected=!0)}else{for(w=""+sa(w),p=null,q=0;q<f.length;q++){if(f[q].value===w){f[q].selected=!0,C&&(f[q].defaultSelected=!0);return}p!==null||f[q].disabled||(p=f[q])}p!==null&&(p.selected=!0)}}function Nw(f,p,w){if(p!=null&&(p=""+sa(p),p!==f.value&&(f.value=p),w==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=w!=null?""+sa(w):""}function Sw(f,p,w,C){if(p==null){if(C!=null){if(w!=null)throw Error(n(92));if(H(C)){if(1<C.length)throw Error(n(93));C=C[0]}w=C}w==null&&(w=""),p=w}w=sa(p),f.defaultValue=w,C=f.textContent,C===w&&C!==""&&C!==null&&(f.value=C)}function cc(f,p){if(p){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=p;return}}f.textContent=p}var xM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jw(f,p,w){var C=p.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?C?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":C?f.setProperty(p,w):typeof w!="number"||w===0||xM.has(p)?p==="float"?f.cssFloat=w:f[p]=(""+w).trim():f[p]=w+"px"}function Ew(f,p,w){if(p!=null&&typeof p!="object")throw Error(n(62));if(f=f.style,w!=null){for(var C in w)!w.hasOwnProperty(C)||p!=null&&p.hasOwnProperty(C)||(C.indexOf("--")===0?f.setProperty(C,""):C==="float"?f.cssFloat="":f[C]="");for(var q in p)C=p[q],p.hasOwnProperty(q)&&w[q]!==C&&jw(f,q,C)}else for(var Y in p)p.hasOwnProperty(Y)&&jw(f,Y,p[Y])}function Up(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rh(f){return yM.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var Hp=null;function Vp(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var uc=null,dc=null;function Aw(f){var p=ke(f);if(p&&(f=p.stateNode)){var w=f[At]||null;e:switch(f=p.stateNode,p.type){case"input":if(qp(f,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),p=w.name,w.type==="radio"&&p!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+oa(""+p)+'"][type="radio"]'),p=0;p<w.length;p++){var C=w[p];if(C!==f&&C.form===f.form){var q=C[At]||null;if(!q)throw Error(n(90));qp(C,q.value,q.defaultValue,q.defaultValue,q.checked,q.defaultChecked,q.type,q.name)}}for(p=0;p<w.length;p++)C=w[p],C.form===f.form&&ww(C)}break e;case"textarea":Nw(f,w.value,w.defaultValue);break e;case"select":p=w.value,p!=null&&lc(f,!!w.multiple,p,!1)}}}var Gp=!1;function Tw(f,p,w){if(Gp)return f(p,w);Gp=!0;try{var C=f(p);return C}finally{if(Gp=!1,(uc!==null||dc!==null)&&(qh(),uc&&(p=uc,f=dc,dc=uc=null,Aw(p),f)))for(p=0;p<f.length;p++)Aw(f[p])}}function Yu(f,p){var w=f.stateNode;if(w===null)return null;var C=w[At]||null;if(C===null)return null;w=C[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(f=f.type,C=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!C;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(n(231,p,typeof w));return w}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qp=!1;if(Ss)try{var Zu={};Object.defineProperty(Zu,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",Zu,Zu),window.removeEventListener("test",Zu,Zu)}catch{Qp=!1}var lo=null,Wp=null,nh=null;function Cw(){if(nh)return nh;var f,p=Wp,w=p.length,C,q="value"in lo?lo.value:lo.textContent,Y=q.length;for(f=0;f<w&&p[f]===q[f];f++);var ve=w-f;for(C=1;C<=ve&&p[w-C]===q[Y-C];C++);return nh=q.slice(f,1<C?1-C:void 0)}function ih(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function ah(){return!0}function Dw(){return!1}function ki(f){function p(w,C,q,Y,ve){this._reactName=w,this._targetInst=q,this.type=C,this.nativeEvent=Y,this.target=ve,this.currentTarget=null;for(var Ne in f)f.hasOwnProperty(Ne)&&(w=f[Ne],this[Ne]=w?w(Y):Y[Ne]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?ah:Dw,this.isPropagationStopped=Dw,this}return d(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ah)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ah)},persist:function(){},isPersistent:ah}),p}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=ki(dl),Ju=d({},dl,{view:0,detail:0}),bM=ki(Ju),Kp,Xp,ed,oh=d({},Ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ed&&(ed&&f.type==="mousemove"?(Kp=f.screenX-ed.screenX,Xp=f.screenY-ed.screenY):Xp=Kp=0,ed=f),Kp)},movementY:function(f){return"movementY"in f?f.movementY:Xp}}),kw=ki(oh),wM=d({},oh,{dataTransfer:0}),_M=ki(wM),NM=d({},Ju,{relatedTarget:0}),Yp=ki(NM),SM=d({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),jM=ki(SM),EM=d({},dl,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),AM=ki(EM),TM=d({},dl,{data:0}),Mw=ki(TM),CM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MM(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=kM[f])?!!p[f]:!1}function Zp(){return MM}var FM=d({},Ju,{key:function(f){if(f.key){var p=CM[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=ih(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?DM[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(f){return f.type==="keypress"?ih(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?ih(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),OM=ki(FM),BM=d({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fw=ki(BM),RM=d({},Ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),LM=ki(RM),IM=d({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),zM=ki(IM),PM=d({},oh,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),qM=ki(PM),$M=d({},dl,{newState:0,oldState:0}),UM=ki($M),HM=[9,13,27,32],Jp=Ss&&"CompositionEvent"in window,td=null;Ss&&"documentMode"in document&&(td=document.documentMode);var VM=Ss&&"TextEvent"in window&&!td,Ow=Ss&&(!Jp||td&&8<td&&11>=td),Bw=" ",Rw=!1;function Lw(f,p){switch(f){case"keyup":return HM.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iw(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var fc=!1;function GM(f,p){switch(f){case"compositionend":return Iw(p);case"keypress":return p.which!==32?null:(Rw=!0,Bw);case"textInput":return f=p.data,f===Bw&&Rw?null:f;default:return null}}function QM(f,p){if(fc)return f==="compositionend"||!Jp&&Lw(f,p)?(f=Cw(),nh=Wp=lo=null,fc=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Ow&&p.locale!=="ko"?null:p.data;default:return null}}var WM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zw(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!WM[f.type]:p==="textarea"}function Pw(f,p,w,C){uc?dc?dc.push(C):dc=[C]:uc=C,p=Qh(p,"onChange"),0<p.length&&(w=new sh("onChange","change",null,w,C),f.push({event:w,listeners:p}))}var rd=null,nd=null;function KM(f){bN(f,0)}function lh(f){var p=Ve(f);if(ww(p))return f}function qw(f,p){if(f==="change")return p}var $w=!1;if(Ss){var eg;if(Ss){var tg="oninput"in document;if(!tg){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),tg=typeof Uw.oninput=="function"}eg=tg}else eg=!1;$w=eg&&(!document.documentMode||9<document.documentMode)}function Hw(){rd&&(rd.detachEvent("onpropertychange",Vw),nd=rd=null)}function Vw(f){if(f.propertyName==="value"&&lh(nd)){var p=[];Pw(p,nd,f,Vp(f)),Tw(KM,p)}}function XM(f,p,w){f==="focusin"?(Hw(),rd=p,nd=w,rd.attachEvent("onpropertychange",Vw)):f==="focusout"&&Hw()}function YM(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return lh(nd)}function ZM(f,p){if(f==="click")return lh(p)}function JM(f,p){if(f==="input"||f==="change")return lh(p)}function e7(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Ui=typeof Object.is=="function"?Object.is:e7;function id(f,p){if(Ui(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var w=Object.keys(f),C=Object.keys(p);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var q=w[C];if(!oe.call(p,q)||!Ui(f[q],p[q]))return!1}return!0}function Gw(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Qw(f,p){var w=Gw(f);f=0;for(var C;w;){if(w.nodeType===3){if(C=f+w.textContent.length,f<=p&&C>=p)return{node:w,offset:p-f};f=C}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Gw(w)}}function Ww(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?Ww(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function Kw(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=th(f.document);p instanceof f.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)f=p.contentWindow;else break;p=th(f.document)}return p}function rg(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var t7=Ss&&"documentMode"in document&&11>=document.documentMode,hc=null,ng=null,ad=null,ig=!1;function Xw(f,p,w){var C=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ig||hc==null||hc!==th(C)||(C=hc,"selectionStart"in C&&rg(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),ad&&id(ad,C)||(ad=C,C=Qh(ng,"onSelect"),0<C.length&&(p=new sh("onSelect","select",null,p,w),f.push({event:p,listeners:C}),p.target=hc)))}function fl(f,p){var w={};return w[f.toLowerCase()]=p.toLowerCase(),w["Webkit"+f]="webkit"+p,w["Moz"+f]="moz"+p,w}var mc={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionrun:fl("Transition","TransitionRun"),transitionstart:fl("Transition","TransitionStart"),transitioncancel:fl("Transition","TransitionCancel"),transitionend:fl("Transition","TransitionEnd")},ag={},Yw={};Ss&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function hl(f){if(ag[f])return ag[f];if(!mc[f])return f;var p=mc[f],w;for(w in p)if(p.hasOwnProperty(w)&&w in Yw)return ag[f]=p[w];return f}var Zw=hl("animationend"),Jw=hl("animationiteration"),e2=hl("animationstart"),r7=hl("transitionrun"),n7=hl("transitionstart"),i7=hl("transitioncancel"),t2=hl("transitionend"),r2=new Map,sg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sg.push("scrollEnd");function Oa(f,p){r2.set(f,p),dt(p,[f])}var n2=new WeakMap;function la(f,p){if(typeof f=="object"&&f!==null){var w=n2.get(f);return w!==void 0?w:(p={value:f,source:p,stack:yw(p)},n2.set(f,p),p)}return{value:f,source:p,stack:yw(p)}}var ca=[],pc=0,og=0;function ch(){for(var f=pc,p=og=pc=0;p<f;){var w=ca[p];ca[p++]=null;var C=ca[p];ca[p++]=null;var q=ca[p];ca[p++]=null;var Y=ca[p];if(ca[p++]=null,C!==null&&q!==null){var ve=C.pending;ve===null?q.next=q:(q.next=ve.next,ve.next=q),C.pending=q}Y!==0&&i2(w,q,Y)}}function uh(f,p,w,C){ca[pc++]=f,ca[pc++]=p,ca[pc++]=w,ca[pc++]=C,og|=C,f.lanes|=C,f=f.alternate,f!==null&&(f.lanes|=C)}function lg(f,p,w,C){return uh(f,p,w,C),dh(f)}function gc(f,p){return uh(f,null,null,p),dh(f)}function i2(f,p,w){f.lanes|=w;var C=f.alternate;C!==null&&(C.lanes|=w);for(var q=!1,Y=f.return;Y!==null;)Y.childLanes|=w,C=Y.alternate,C!==null&&(C.childLanes|=w),Y.tag===22&&(f=Y.stateNode,f===null||f._visibility&1||(q=!0)),f=Y,Y=Y.return;return f.tag===3?(Y=f.stateNode,q&&p!==null&&(q=31-Be(w),f=Y.hiddenUpdates,C=f[q],C===null?f[q]=[p]:C.push(p),p.lane=w|536870912),Y):null}function dh(f){if(50<Dd)throw Dd=0,mx=null,Error(n(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var xc={};function a7(f,p,w,C){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(f,p,w,C){return new a7(f,p,w,C)}function cg(f){return f=f.prototype,!(!f||!f.isReactComponent)}function js(f,p){var w=f.alternate;return w===null?(w=Hi(f.tag,p,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=p,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&65011712,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,p=f.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w.refCleanup=f.refCleanup,w}function a2(f,p){f.flags&=65011714;var w=f.alternate;return w===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,p=w.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function fh(f,p,w,C,q,Y){var ve=0;if(C=f,typeof f=="function")cg(f)&&(ve=1);else if(typeof f=="string")ve=oF(f,w,V.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case A:return f=Hi(31,w,p,q),f.elementType=A,f.lanes=Y,f;case v:return ml(w.children,q,Y,p);case x:ve=8,q|=24;break;case b:return f=Hi(12,w,p,q|2),f.elementType=b,f.lanes=Y,f;case j:return f=Hi(13,w,p,q),f.elementType=j,f.lanes=Y,f;case E:return f=Hi(19,w,p,q),f.elementType=E,f.lanes=Y,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:case _:ve=10;break e;case S:ve=9;break e;case N:ve=11;break e;case T:ve=14;break e;case F:ve=16,C=null;break e}ve=29,w=Error(n(130,f===null?"null":typeof f,"")),C=null}return p=Hi(ve,w,p,q),p.elementType=f,p.type=C,p.lanes=Y,p}function ml(f,p,w,C){return f=Hi(7,f,C,p),f.lanes=w,f}function ug(f,p,w){return f=Hi(6,f,null,p),f.lanes=w,f}function dg(f,p,w){return p=Hi(4,f.children!==null?f.children:[],f.key,p),p.lanes=w,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var vc=[],yc=0,hh=null,mh=0,ua=[],da=0,pl=null,Es=1,As="";function gl(f,p){vc[yc++]=mh,vc[yc++]=hh,hh=f,mh=p}function s2(f,p,w){ua[da++]=Es,ua[da++]=As,ua[da++]=pl,pl=f;var C=Es;f=As;var q=32-Be(C)-1;C&=~(1<<q),w+=1;var Y=32-Be(p)+q;if(30<Y){var ve=q-q%5;Y=(C&(1<<ve)-1).toString(32),C>>=ve,q-=ve,Es=1<<32-Be(p)+q|w<<q|C,As=Y+f}else Es=1<<Y|w<<q|C,As=f}function fg(f){f.return!==null&&(gl(f,1),s2(f,1,0))}function hg(f){for(;f===hh;)hh=vc[--yc],vc[yc]=null,mh=vc[--yc],vc[yc]=null;for(;f===pl;)pl=ua[--da],ua[da]=null,As=ua[--da],ua[da]=null,Es=ua[--da],ua[da]=null}var yi=null,an=null,_r=!1,xl=null,ts=!1,mg=Error(n(519));function vl(f){var p=Error(n(418,""));throw ld(la(p,f)),mg}function o2(f){var p=f.stateNode,w=f.type,C=f.memoizedProps;switch(p[Qe]=f,p[At]=C,w){case"dialog":ur("cancel",p),ur("close",p);break;case"iframe":case"object":case"embed":ur("load",p);break;case"video":case"audio":for(w=0;w<Md.length;w++)ur(Md[w],p);break;case"source":ur("error",p);break;case"img":case"image":case"link":ur("error",p),ur("load",p);break;case"details":ur("toggle",p);break;case"input":ur("invalid",p),_w(p,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),eh(p);break;case"select":ur("invalid",p);break;case"textarea":ur("invalid",p),Sw(p,C.value,C.defaultValue,C.children),eh(p)}w=C.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||p.textContent===""+w||C.suppressHydrationWarning===!0||SN(p.textContent,w)?(C.popover!=null&&(ur("beforetoggle",p),ur("toggle",p)),C.onScroll!=null&&ur("scroll",p),C.onScrollEnd!=null&&ur("scrollend",p),C.onClick!=null&&(p.onclick=Wh),p=!0):p=!1,p||vl(f)}function l2(f){for(yi=f.return;yi;)switch(yi.tag){case 5:case 13:ts=!1;return;case 27:case 3:ts=!0;return;default:yi=yi.return}}function sd(f){if(f!==yi)return!1;if(!_r)return l2(f),_r=!0,!1;var p=f.tag,w;if((w=p!==3&&p!==27)&&((w=p===5)&&(w=f.type,w=!(w!=="form"&&w!=="button")||Dx(f.type,f.memoizedProps)),w=!w),w&&an&&vl(f),l2(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8)if(w=f.data,w==="/$"){if(p===0){an=Ra(f.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++;f=f.nextSibling}an=null}}else p===27?(p=an,jo(f.type)?(f=Ox,Ox=null,an=f):an=p):an=yi?Ra(f.stateNode.nextSibling):null;return!0}function od(){an=yi=null,_r=!1}function c2(){var f=xl;return f!==null&&(Oi===null?Oi=f:Oi.push.apply(Oi,f),xl=null),f}function ld(f){xl===null?xl=[f]:xl.push(f)}var pg=de(null),yl=null,Ts=null;function co(f,p,w){X(pg,p._currentValue),p._currentValue=w}function Cs(f){f._currentValue=pg.current,L(pg)}function gg(f,p,w){for(;f!==null;){var C=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,C!==null&&(C.childLanes|=p)):C!==null&&(C.childLanes&p)!==p&&(C.childLanes|=p),f===w)break;f=f.return}}function xg(f,p,w,C){var q=f.child;for(q!==null&&(q.return=f);q!==null;){var Y=q.dependencies;if(Y!==null){var ve=q.child;Y=Y.firstContext;e:for(;Y!==null;){var Ne=Y;Y=q;for(var Oe=0;Oe<p.length;Oe++)if(Ne.context===p[Oe]){Y.lanes|=w,Ne=Y.alternate,Ne!==null&&(Ne.lanes|=w),gg(Y.return,w,f),C||(ve=null);break e}Y=Ne.next}}else if(q.tag===18){if(ve=q.return,ve===null)throw Error(n(341));ve.lanes|=w,Y=ve.alternate,Y!==null&&(Y.lanes|=w),gg(ve,w,f),ve=null}else ve=q.child;if(ve!==null)ve.return=q;else for(ve=q;ve!==null;){if(ve===f){ve=null;break}if(q=ve.sibling,q!==null){q.return=ve.return,ve=q;break}ve=ve.return}q=ve}}function cd(f,p,w,C){f=null;for(var q=p,Y=!1;q!==null;){if(!Y){if((q.flags&524288)!==0)Y=!0;else if((q.flags&262144)!==0)break}if(q.tag===10){var ve=q.alternate;if(ve===null)throw Error(n(387));if(ve=ve.memoizedProps,ve!==null){var Ne=q.type;Ui(q.pendingProps.value,ve.value)||(f!==null?f.push(Ne):f=[Ne])}}else if(q===W.current){if(ve=q.alternate,ve===null)throw Error(n(387));ve.memoizedState.memoizedState!==q.memoizedState.memoizedState&&(f!==null?f.push(Id):f=[Id])}q=q.return}f!==null&&xg(p,f,w,C),p.flags|=262144}function ph(f){for(f=f.firstContext;f!==null;){if(!Ui(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function bl(f){yl=f,Ts=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ui(f){return u2(yl,f)}function gh(f,p){return yl===null&&bl(f),u2(f,p)}function u2(f,p){var w=p._currentValue;if(p={context:p,memoizedValue:w,next:null},Ts===null){if(f===null)throw Error(n(308));Ts=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else Ts=Ts.next=p;return w}var s7=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(w,C){f.push(C)}};this.abort=function(){p.aborted=!0,f.forEach(function(w){return w()})}},o7=r.unstable_scheduleCallback,l7=r.unstable_NormalPriority,En={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vg(){return{controller:new s7,data:new Map,refCount:0}}function ud(f){f.refCount--,f.refCount===0&&o7(l7,function(){f.controller.abort()})}var dd=null,yg=0,bc=0,wc=null;function c7(f,p){if(dd===null){var w=dd=[];yg=0,bc=wx(),wc={status:"pending",value:void 0,then:function(C){w.push(C)}}}return yg++,p.then(d2,d2),p}function d2(){if(--yg===0&&dd!==null){wc!==null&&(wc.status="fulfilled");var f=dd;dd=null,bc=0,wc=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function u7(f,p){var w=[],C={status:"pending",value:null,reason:null,then:function(q){w.push(q)}};return f.then(function(){C.status="fulfilled",C.value=p;for(var q=0;q<w.length;q++)(0,w[q])(p)},function(q){for(C.status="rejected",C.reason=q,q=0;q<w.length;q++)(0,w[q])(void 0)}),C}var f2=P.S;P.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&c7(f,p),f2!==null&&f2(f,p)};var wl=de(null);function bg(){var f=wl.current;return f!==null?f:Kr.pooledCache}function xh(f,p){p===null?X(wl,wl.current):X(wl,p.pool)}function h2(){var f=bg();return f===null?null:{parent:En._currentValue,pool:f}}var fd=Error(n(460)),m2=Error(n(474)),vh=Error(n(542)),wg={then:function(){}};function p2(f){return f=f.status,f==="fulfilled"||f==="rejected"}function yh(){}function g2(f,p,w){switch(w=f[w],w===void 0?f.push(p):w!==p&&(p.then(yh,yh),p=w),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,v2(f),f;default:if(typeof p.status=="string")p.then(yh,yh);else{if(f=Kr,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=p,f.status="pending",f.then(function(C){if(p.status==="pending"){var q=p;q.status="fulfilled",q.value=C}},function(C){if(p.status==="pending"){var q=p;q.status="rejected",q.reason=C}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,v2(f),f}throw hd=p,fd}}var hd=null;function x2(){if(hd===null)throw Error(n(459));var f=hd;return hd=null,f}function v2(f){if(f===fd||f===vh)throw Error(n(483))}var uo=!1;function _g(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function fo(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function ho(f,p,w){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,(Tr&2)!==0){var q=C.pending;return q===null?p.next=p:(p.next=q.next,q.next=p),C.pending=p,p=dh(f),i2(f,null,w),p}return uh(f,C,p,w),dh(f)}function md(f,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194048)!==0)){var C=p.lanes;C&=f.pendingLanes,w|=C,p.lanes=w,ao(f,w)}}function Sg(f,p){var w=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var q=null,Y=null;if(w=w.firstBaseUpdate,w!==null){do{var ve={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};Y===null?q=Y=ve:Y=Y.next=ve,w=w.next}while(w!==null);Y===null?q=Y=p:Y=Y.next=p}else q=Y=p;w={baseState:C.baseState,firstBaseUpdate:q,lastBaseUpdate:Y,shared:C.shared,callbacks:C.callbacks},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=p:f.next=p,w.lastBaseUpdate=p}var jg=!1;function pd(){if(jg){var f=wc;if(f!==null)throw f}}function gd(f,p,w,C){jg=!1;var q=f.updateQueue;uo=!1;var Y=q.firstBaseUpdate,ve=q.lastBaseUpdate,Ne=q.shared.pending;if(Ne!==null){q.shared.pending=null;var Oe=Ne,He=Oe.next;Oe.next=null,ve===null?Y=He:ve.next=He,ve=Oe;var rt=f.alternate;rt!==null&&(rt=rt.updateQueue,Ne=rt.lastBaseUpdate,Ne!==ve&&(Ne===null?rt.firstBaseUpdate=He:Ne.next=He,rt.lastBaseUpdate=Oe))}if(Y!==null){var ot=q.baseState;ve=0,rt=He=Oe=null,Ne=Y;do{var We=Ne.lane&-536870913,Xe=We!==Ne.lane;if(Xe?(gr&We)===We:(C&We)===We){We!==0&&We===bc&&(jg=!0),rt!==null&&(rt=rt.next={lane:0,tag:Ne.tag,payload:Ne.payload,callback:null,next:null});e:{var $t=f,It=Ne;We=p;var Pr=w;switch(It.tag){case 1:if($t=It.payload,typeof $t=="function"){ot=$t.call(Pr,ot,We);break e}ot=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=It.payload,We=typeof $t=="function"?$t.call(Pr,ot,We):$t,We==null)break e;ot=d({},ot,We);break e;case 2:uo=!0}}We=Ne.callback,We!==null&&(f.flags|=64,Xe&&(f.flags|=8192),Xe=q.callbacks,Xe===null?q.callbacks=[We]:Xe.push(We))}else Xe={lane:We,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},rt===null?(He=rt=Xe,Oe=ot):rt=rt.next=Xe,ve|=We;if(Ne=Ne.next,Ne===null){if(Ne=q.shared.pending,Ne===null)break;Xe=Ne,Ne=Xe.next,Xe.next=null,q.lastBaseUpdate=Xe,q.shared.pending=null}}while(!0);rt===null&&(Oe=ot),q.baseState=Oe,q.firstBaseUpdate=He,q.lastBaseUpdate=rt,Y===null&&(q.shared.lanes=0),wo|=ve,f.lanes=ve,f.memoizedState=ot}}function y2(f,p){if(typeof f!="function")throw Error(n(191,f));f.call(p)}function b2(f,p){var w=f.callbacks;if(w!==null)for(f.callbacks=null,f=0;f<w.length;f++)y2(w[f],p)}var _c=de(null),bh=de(0);function w2(f,p){f=Rs,X(bh,f),X(_c,p),Rs=f|p.baseLanes}function Eg(){X(bh,Rs),X(_c,_c.current)}function Ag(){Rs=bh.current,L(_c),L(bh)}var mo=0,ar=null,Ir=null,yn=null,wh=!1,Nc=!1,_l=!1,_h=0,xd=0,Sc=null,d7=0;function fn(){throw Error(n(321))}function Tg(f,p){if(p===null)return!1;for(var w=0;w<p.length&&w<f.length;w++)if(!Ui(f[w],p[w]))return!1;return!0}function Cg(f,p,w,C,q,Y){return mo=Y,ar=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,P.H=f===null||f.memoizedState===null?i_:a_,_l=!1,Y=w(C,q),_l=!1,Nc&&(Y=N2(p,w,C,q)),_2(f),Y}function _2(f){P.H=Th;var p=Ir!==null&&Ir.next!==null;if(mo=0,yn=Ir=ar=null,wh=!1,xd=0,Sc=null,p)throw Error(n(300));f===null||Bn||(f=f.dependencies,f!==null&&ph(f)&&(Bn=!0))}function N2(f,p,w,C){ar=f;var q=0;do{if(Nc&&(Sc=null),xd=0,Nc=!1,25<=q)throw Error(n(301));if(q+=1,yn=Ir=null,f.updateQueue!=null){var Y=f.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}P.H=v7,Y=p(w,C)}while(Nc);return Y}function f7(){var f=P.H,p=f.useState()[0];return p=typeof p.then=="function"?vd(p):p,f=f.useState()[0],(Ir!==null?Ir.memoizedState:null)!==f&&(ar.flags|=1024),p}function Dg(){var f=_h!==0;return _h=0,f}function kg(f,p,w){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~w}function Mg(f){if(wh){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}wh=!1}mo=0,yn=Ir=ar=null,Nc=!1,xd=_h=0,Sc=null}function Mi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?ar.memoizedState=yn=f:yn=yn.next=f,yn}function bn(){if(Ir===null){var f=ar.alternate;f=f!==null?f.memoizedState:null}else f=Ir.next;var p=yn===null?ar.memoizedState:yn.next;if(p!==null)yn=p,Ir=f;else{if(f===null)throw ar.alternate===null?Error(n(467)):Error(n(310));Ir=f,f={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},yn===null?ar.memoizedState=yn=f:yn=yn.next=f}return yn}function Fg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vd(f){var p=xd;return xd+=1,Sc===null&&(Sc=[]),f=g2(Sc,f,p),p=ar,(yn===null?p.memoizedState:yn.next)===null&&(p=p.alternate,P.H=p===null||p.memoizedState===null?i_:a_),f}function Nh(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return vd(f);if(f.$$typeof===_)return ui(f)}throw Error(n(438,String(f)))}function Og(f){var p=null,w=ar.updateQueue;if(w!==null&&(p=w.memoCache),p==null){var C=ar.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(p={data:C.data.map(function(q){return q.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),w===null&&(w=Fg(),ar.updateQueue=w),w.memoCache=p,w=p.data[p.index],w===void 0)for(w=p.data[p.index]=Array(f),C=0;C<f;C++)w[C]=R;return p.index++,w}function Ds(f,p){return typeof p=="function"?p(f):p}function Sh(f){var p=bn();return Bg(p,Ir,f)}function Bg(f,p,w){var C=f.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=w;var q=f.baseQueue,Y=C.pending;if(Y!==null){if(q!==null){var ve=q.next;q.next=Y.next,Y.next=ve}p.baseQueue=q=Y,C.pending=null}if(Y=f.baseState,q===null)f.memoizedState=Y;else{p=q.next;var Ne=ve=null,Oe=null,He=p,rt=!1;do{var ot=He.lane&-536870913;if(ot!==He.lane?(gr&ot)===ot:(mo&ot)===ot){var We=He.revertLane;if(We===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),ot===bc&&(rt=!0);else if((mo&We)===We){He=He.next,We===bc&&(rt=!0);continue}else ot={lane:0,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},Oe===null?(Ne=Oe=ot,ve=Y):Oe=Oe.next=ot,ar.lanes|=We,wo|=We;ot=He.action,_l&&w(Y,ot),Y=He.hasEagerState?He.eagerState:w(Y,ot)}else We={lane:ot,revertLane:He.revertLane,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null},Oe===null?(Ne=Oe=We,ve=Y):Oe=Oe.next=We,ar.lanes|=ot,wo|=ot;He=He.next}while(He!==null&&He!==p);if(Oe===null?ve=Y:Oe.next=Ne,!Ui(Y,f.memoizedState)&&(Bn=!0,rt&&(w=wc,w!==null)))throw w;f.memoizedState=Y,f.baseState=ve,f.baseQueue=Oe,C.lastRenderedState=Y}return q===null&&(C.lanes=0),[f.memoizedState,C.dispatch]}function Rg(f){var p=bn(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=f;var C=w.dispatch,q=w.pending,Y=p.memoizedState;if(q!==null){w.pending=null;var ve=q=q.next;do Y=f(Y,ve.action),ve=ve.next;while(ve!==q);Ui(Y,p.memoizedState)||(Bn=!0),p.memoizedState=Y,p.baseQueue===null&&(p.baseState=Y),w.lastRenderedState=Y}return[Y,C]}function S2(f,p,w){var C=ar,q=bn(),Y=_r;if(Y){if(w===void 0)throw Error(n(407));w=w()}else w=p();var ve=!Ui((Ir||q).memoizedState,w);ve&&(q.memoizedState=w,Bn=!0),q=q.queue;var Ne=A2.bind(null,C,q,f);if(yd(2048,8,Ne,[f]),q.getSnapshot!==p||ve||yn!==null&&yn.memoizedState.tag&1){if(C.flags|=2048,jc(9,jh(),E2.bind(null,C,q,w,p),null),Kr===null)throw Error(n(349));Y||(mo&124)!==0||j2(C,p,w)}return w}function j2(f,p,w){f.flags|=16384,f={getSnapshot:p,value:w},p=ar.updateQueue,p===null?(p=Fg(),ar.updateQueue=p,p.stores=[f]):(w=p.stores,w===null?p.stores=[f]:w.push(f))}function E2(f,p,w,C){p.value=w,p.getSnapshot=C,T2(p)&&C2(f)}function A2(f,p,w){return w(function(){T2(p)&&C2(f)})}function T2(f){var p=f.getSnapshot;f=f.value;try{var w=p();return!Ui(f,w)}catch{return!0}}function C2(f){var p=gc(f,2);p!==null&&Ki(p,f,2)}function Lg(f){var p=Mi();if(typeof f=="function"){var w=f;if(f=w(),_l){je(!0);try{w()}finally{je(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:f},p}function D2(f,p,w,C){return f.baseState=w,Bg(f,Ir,typeof C=="function"?C:Ds)}function h7(f,p,w,C,q){if(Ah(f))throw Error(n(485));if(f=p.action,f!==null){var Y={payload:q,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ve){Y.listeners.push(ve)}};P.T!==null?w(!0):Y.isTransition=!1,C(Y),w=p.pending,w===null?(Y.next=p.pending=Y,k2(p,Y)):(Y.next=w.next,p.pending=w.next=Y)}}function k2(f,p){var w=p.action,C=p.payload,q=f.state;if(p.isTransition){var Y=P.T,ve={};P.T=ve;try{var Ne=w(q,C),Oe=P.S;Oe!==null&&Oe(ve,Ne),M2(f,p,Ne)}catch(He){Ig(f,p,He)}finally{P.T=Y}}else try{Y=w(q,C),M2(f,p,Y)}catch(He){Ig(f,p,He)}}function M2(f,p,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(C){F2(f,p,C)},function(C){return Ig(f,p,C)}):F2(f,p,w)}function F2(f,p,w){p.status="fulfilled",p.value=w,O2(p),f.state=w,p=f.pending,p!==null&&(w=p.next,w===p?f.pending=null:(w=w.next,p.next=w,k2(f,w)))}function Ig(f,p,w){var C=f.pending;if(f.pending=null,C!==null){C=C.next;do p.status="rejected",p.reason=w,O2(p),p=p.next;while(p!==C)}f.action=null}function O2(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function B2(f,p){return p}function R2(f,p){if(_r){var w=Kr.formState;if(w!==null){e:{var C=ar;if(_r){if(an){t:{for(var q=an,Y=ts;q.nodeType!==8;){if(!Y){q=null;break t}if(q=Ra(q.nextSibling),q===null){q=null;break t}}Y=q.data,q=Y==="F!"||Y==="F"?q:null}if(q){an=Ra(q.nextSibling),C=q.data==="F!";break e}}vl(C)}C=!1}C&&(p=w[0])}}return w=Mi(),w.memoizedState=w.baseState=p,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B2,lastRenderedState:p},w.queue=C,w=t_.bind(null,ar,C),C.dispatch=w,C=Lg(!1),Y=Ug.bind(null,ar,!1,C.queue),C=Mi(),q={state:p,dispatch:null,action:f,pending:null},C.queue=q,w=h7.bind(null,ar,q,Y,w),q.dispatch=w,C.memoizedState=f,[p,w,!1]}function L2(f){var p=bn();return I2(p,Ir,f)}function I2(f,p,w){if(p=Bg(f,p,B2)[0],f=Sh(Ds)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var C=vd(p)}catch(ve){throw ve===fd?vh:ve}else C=p;p=bn();var q=p.queue,Y=q.dispatch;return w!==p.memoizedState&&(ar.flags|=2048,jc(9,jh(),m7.bind(null,q,w),null)),[C,Y,f]}function m7(f,p){f.action=p}function z2(f){var p=bn(),w=Ir;if(w!==null)return I2(p,w,f);bn(),p=p.memoizedState,w=bn();var C=w.queue.dispatch;return w.memoizedState=f,[p,C,!1]}function jc(f,p,w,C){return f={tag:f,create:w,deps:C,inst:p,next:null},p=ar.updateQueue,p===null&&(p=Fg(),ar.updateQueue=p),w=p.lastEffect,w===null?p.lastEffect=f.next=f:(C=w.next,w.next=f,f.next=C,p.lastEffect=f),f}function jh(){return{destroy:void 0,resource:void 0}}function P2(){return bn().memoizedState}function Eh(f,p,w,C){var q=Mi();C=C===void 0?null:C,ar.flags|=f,q.memoizedState=jc(1|p,jh(),w,C)}function yd(f,p,w,C){var q=bn();C=C===void 0?null:C;var Y=q.memoizedState.inst;Ir!==null&&C!==null&&Tg(C,Ir.memoizedState.deps)?q.memoizedState=jc(p,Y,w,C):(ar.flags|=f,q.memoizedState=jc(1|p,Y,w,C))}function q2(f,p){Eh(8390656,8,f,p)}function $2(f,p){yd(2048,8,f,p)}function U2(f,p){return yd(4,2,f,p)}function H2(f,p){return yd(4,4,f,p)}function V2(f,p){if(typeof p=="function"){f=f();var w=p(f);return function(){typeof w=="function"?w():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function G2(f,p,w){w=w!=null?w.concat([f]):null,yd(4,4,V2.bind(null,p,f),w)}function zg(){}function Q2(f,p){var w=bn();p=p===void 0?null:p;var C=w.memoizedState;return p!==null&&Tg(p,C[1])?C[0]:(w.memoizedState=[f,p],f)}function W2(f,p){var w=bn();p=p===void 0?null:p;var C=w.memoizedState;if(p!==null&&Tg(p,C[1]))return C[0];if(C=f(),_l){je(!0);try{f()}finally{je(!1)}}return w.memoizedState=[C,p],C}function Pg(f,p,w){return w===void 0||(mo&1073741824)!==0?f.memoizedState=p:(f.memoizedState=w,f=Y_(),ar.lanes|=f,wo|=f,w)}function K2(f,p,w,C){return Ui(w,p)?w:_c.current!==null?(f=Pg(f,w,C),Ui(f,p)||(Bn=!0),f):(mo&42)===0?(Bn=!0,f.memoizedState=w):(f=Y_(),ar.lanes|=f,wo|=f,p)}function X2(f,p,w,C,q){var Y=G.p;G.p=Y!==0&&8>Y?Y:8;var ve=P.T,Ne={};P.T=Ne,Ug(f,!1,p,w);try{var Oe=q(),He=P.S;if(He!==null&&He(Ne,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var rt=u7(Oe,C);bd(f,p,rt,Wi(f))}else bd(f,p,C,Wi(f))}catch(ot){bd(f,p,{then:function(){},status:"rejected",reason:ot},Wi())}finally{G.p=Y,P.T=ve}}function p7(){}function qg(f,p,w,C){if(f.tag!==5)throw Error(n(476));var q=Y2(f).queue;X2(f,q,p,ue,w===null?p7:function(){return Z2(f),w(C)})}function Y2(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:ue},next:null};var w={};return p.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:w},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function Z2(f){var p=Y2(f).next.queue;bd(f,p,{},Wi())}function $g(){return ui(Id)}function J2(){return bn().memoizedState}function e_(){return bn().memoizedState}function g7(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var w=Wi();f=fo(w);var C=ho(p,f,w);C!==null&&(Ki(C,p,w),md(C,p,w)),p={cache:vg()},f.payload=p;return}p=p.return}}function x7(f,p,w){var C=Wi();w={lane:C,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},Ah(f)?r_(p,w):(w=lg(f,p,w,C),w!==null&&(Ki(w,f,C),n_(w,p,C)))}function t_(f,p,w){var C=Wi();bd(f,p,w,C)}function bd(f,p,w,C){var q={lane:C,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(Ah(f))r_(p,q);else{var Y=f.alternate;if(f.lanes===0&&(Y===null||Y.lanes===0)&&(Y=p.lastRenderedReducer,Y!==null))try{var ve=p.lastRenderedState,Ne=Y(ve,w);if(q.hasEagerState=!0,q.eagerState=Ne,Ui(Ne,ve))return uh(f,p,q,0),Kr===null&&ch(),!1}catch{}finally{}if(w=lg(f,p,q,C),w!==null)return Ki(w,f,C),n_(w,p,C),!0}return!1}function Ug(f,p,w,C){if(C={lane:2,revertLane:wx(),action:C,hasEagerState:!1,eagerState:null,next:null},Ah(f)){if(p)throw Error(n(479))}else p=lg(f,w,C,2),p!==null&&Ki(p,f,2)}function Ah(f){var p=f.alternate;return f===ar||p!==null&&p===ar}function r_(f,p){Nc=wh=!0;var w=f.pending;w===null?p.next=p:(p.next=w.next,w.next=p),f.pending=p}function n_(f,p,w){if((w&4194048)!==0){var C=p.lanes;C&=f.pendingLanes,w|=C,p.lanes=w,ao(f,w)}}var Th={readContext:ui,use:Nh,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn},i_={readContext:ui,use:Nh,useCallback:function(f,p){return Mi().memoizedState=[f,p===void 0?null:p],f},useContext:ui,useEffect:q2,useImperativeHandle:function(f,p,w){w=w!=null?w.concat([f]):null,Eh(4194308,4,V2.bind(null,p,f),w)},useLayoutEffect:function(f,p){return Eh(4194308,4,f,p)},useInsertionEffect:function(f,p){Eh(4,2,f,p)},useMemo:function(f,p){var w=Mi();p=p===void 0?null:p;var C=f();if(_l){je(!0);try{f()}finally{je(!1)}}return w.memoizedState=[C,p],C},useReducer:function(f,p,w){var C=Mi();if(w!==void 0){var q=w(p);if(_l){je(!0);try{w(p)}finally{je(!1)}}}else q=p;return C.memoizedState=C.baseState=q,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:q},C.queue=f,f=f.dispatch=x7.bind(null,ar,f),[C.memoizedState,f]},useRef:function(f){var p=Mi();return f={current:f},p.memoizedState=f},useState:function(f){f=Lg(f);var p=f.queue,w=t_.bind(null,ar,p);return p.dispatch=w,[f.memoizedState,w]},useDebugValue:zg,useDeferredValue:function(f,p){var w=Mi();return Pg(w,f,p)},useTransition:function(){var f=Lg(!1);return f=X2.bind(null,ar,f.queue,!0,!1),Mi().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,w){var C=ar,q=Mi();if(_r){if(w===void 0)throw Error(n(407));w=w()}else{if(w=p(),Kr===null)throw Error(n(349));(gr&124)!==0||j2(C,p,w)}q.memoizedState=w;var Y={value:w,getSnapshot:p};return q.queue=Y,q2(A2.bind(null,C,Y,f),[f]),C.flags|=2048,jc(9,jh(),E2.bind(null,C,Y,w,p),null),w},useId:function(){var f=Mi(),p=Kr.identifierPrefix;if(_r){var w=As,C=Es;w=(C&~(1<<32-Be(C)-1)).toString(32)+w,p=""+p+"R"+w,w=_h++,0<w&&(p+="H"+w.toString(32)),p+=""}else w=d7++,p=""+p+"r"+w.toString(32)+"";return f.memoizedState=p},useHostTransitionStatus:$g,useFormState:R2,useActionState:R2,useOptimistic:function(f){var p=Mi();p.memoizedState=p.baseState=f;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=w,p=Ug.bind(null,ar,!0,w),w.dispatch=p,[f,p]},useMemoCache:Og,useCacheRefresh:function(){return Mi().memoizedState=g7.bind(null,ar)}},a_={readContext:ui,use:Nh,useCallback:Q2,useContext:ui,useEffect:$2,useImperativeHandle:G2,useInsertionEffect:U2,useLayoutEffect:H2,useMemo:W2,useReducer:Sh,useRef:P2,useState:function(){return Sh(Ds)},useDebugValue:zg,useDeferredValue:function(f,p){var w=bn();return K2(w,Ir.memoizedState,f,p)},useTransition:function(){var f=Sh(Ds)[0],p=bn().memoizedState;return[typeof f=="boolean"?f:vd(f),p]},useSyncExternalStore:S2,useId:J2,useHostTransitionStatus:$g,useFormState:L2,useActionState:L2,useOptimistic:function(f,p){var w=bn();return D2(w,Ir,f,p)},useMemoCache:Og,useCacheRefresh:e_},v7={readContext:ui,use:Nh,useCallback:Q2,useContext:ui,useEffect:$2,useImperativeHandle:G2,useInsertionEffect:U2,useLayoutEffect:H2,useMemo:W2,useReducer:Rg,useRef:P2,useState:function(){return Rg(Ds)},useDebugValue:zg,useDeferredValue:function(f,p){var w=bn();return Ir===null?Pg(w,f,p):K2(w,Ir.memoizedState,f,p)},useTransition:function(){var f=Rg(Ds)[0],p=bn().memoizedState;return[typeof f=="boolean"?f:vd(f),p]},useSyncExternalStore:S2,useId:J2,useHostTransitionStatus:$g,useFormState:z2,useActionState:z2,useOptimistic:function(f,p){var w=bn();return Ir!==null?D2(w,Ir,f,p):(w.baseState=f,[f,w.queue.dispatch])},useMemoCache:Og,useCacheRefresh:e_},Ec=null,wd=0;function Ch(f){var p=wd;return wd+=1,Ec===null&&(Ec=[]),g2(Ec,f,p)}function _d(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function Dh(f,p){throw p.$$typeof===h?Error(n(525)):(f=Object.prototype.toString.call(p),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function s_(f){var p=f._init;return p(f._payload)}function o_(f){function p(Pe,Ie){if(f){var Ue=Pe.deletions;Ue===null?(Pe.deletions=[Ie],Pe.flags|=16):Ue.push(Ie)}}function w(Pe,Ie){if(!f)return null;for(;Ie!==null;)p(Pe,Ie),Ie=Ie.sibling;return null}function C(Pe){for(var Ie=new Map;Pe!==null;)Pe.key!==null?Ie.set(Pe.key,Pe):Ie.set(Pe.index,Pe),Pe=Pe.sibling;return Ie}function q(Pe,Ie){return Pe=js(Pe,Ie),Pe.index=0,Pe.sibling=null,Pe}function Y(Pe,Ie,Ue){return Pe.index=Ue,f?(Ue=Pe.alternate,Ue!==null?(Ue=Ue.index,Ue<Ie?(Pe.flags|=67108866,Ie):Ue):(Pe.flags|=67108866,Ie)):(Pe.flags|=1048576,Ie)}function ve(Pe){return f&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function Ne(Pe,Ie,Ue,nt){return Ie===null||Ie.tag!==6?(Ie=ug(Ue,Pe.mode,nt),Ie.return=Pe,Ie):(Ie=q(Ie,Ue),Ie.return=Pe,Ie)}function Oe(Pe,Ie,Ue,nt){var Dt=Ue.type;return Dt===v?rt(Pe,Ie,Ue.props.children,nt,Ue.key):Ie!==null&&(Ie.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===F&&s_(Dt)===Ie.type)?(Ie=q(Ie,Ue.props),_d(Ie,Ue),Ie.return=Pe,Ie):(Ie=fh(Ue.type,Ue.key,Ue.props,null,Pe.mode,nt),_d(Ie,Ue),Ie.return=Pe,Ie)}function He(Pe,Ie,Ue,nt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ue.containerInfo||Ie.stateNode.implementation!==Ue.implementation?(Ie=dg(Ue,Pe.mode,nt),Ie.return=Pe,Ie):(Ie=q(Ie,Ue.children||[]),Ie.return=Pe,Ie)}function rt(Pe,Ie,Ue,nt,Dt){return Ie===null||Ie.tag!==7?(Ie=ml(Ue,Pe.mode,nt,Dt),Ie.return=Pe,Ie):(Ie=q(Ie,Ue),Ie.return=Pe,Ie)}function ot(Pe,Ie,Ue){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=ug(""+Ie,Pe.mode,Ue),Ie.return=Pe,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case g:return Ue=fh(Ie.type,Ie.key,Ie.props,null,Pe.mode,Ue),_d(Ue,Ie),Ue.return=Pe,Ue;case m:return Ie=dg(Ie,Pe.mode,Ue),Ie.return=Pe,Ie;case F:var nt=Ie._init;return Ie=nt(Ie._payload),ot(Pe,Ie,Ue)}if(H(Ie)||O(Ie))return Ie=ml(Ie,Pe.mode,Ue,null),Ie.return=Pe,Ie;if(typeof Ie.then=="function")return ot(Pe,Ch(Ie),Ue);if(Ie.$$typeof===_)return ot(Pe,gh(Pe,Ie),Ue);Dh(Pe,Ie)}return null}function We(Pe,Ie,Ue,nt){var Dt=Ie!==null?Ie.key:null;if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint")return Dt!==null?null:Ne(Pe,Ie,""+Ue,nt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case g:return Ue.key===Dt?Oe(Pe,Ie,Ue,nt):null;case m:return Ue.key===Dt?He(Pe,Ie,Ue,nt):null;case F:return Dt=Ue._init,Ue=Dt(Ue._payload),We(Pe,Ie,Ue,nt)}if(H(Ue)||O(Ue))return Dt!==null?null:rt(Pe,Ie,Ue,nt,null);if(typeof Ue.then=="function")return We(Pe,Ie,Ch(Ue),nt);if(Ue.$$typeof===_)return We(Pe,Ie,gh(Pe,Ue),nt);Dh(Pe,Ue)}return null}function Xe(Pe,Ie,Ue,nt,Dt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return Pe=Pe.get(Ue)||null,Ne(Ie,Pe,""+nt,Dt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case g:return Pe=Pe.get(nt.key===null?Ue:nt.key)||null,Oe(Ie,Pe,nt,Dt);case m:return Pe=Pe.get(nt.key===null?Ue:nt.key)||null,He(Ie,Pe,nt,Dt);case F:var or=nt._init;return nt=or(nt._payload),Xe(Pe,Ie,Ue,nt,Dt)}if(H(nt)||O(nt))return Pe=Pe.get(Ue)||null,rt(Ie,Pe,nt,Dt,null);if(typeof nt.then=="function")return Xe(Pe,Ie,Ue,Ch(nt),Dt);if(nt.$$typeof===_)return Xe(Pe,Ie,Ue,gh(Ie,nt),Dt);Dh(Ie,nt)}return null}function $t(Pe,Ie,Ue,nt){for(var Dt=null,or=null,Ot=Ie,qt=Ie=0,Ln=null;Ot!==null&&qt<Ue.length;qt++){Ot.index>qt?(Ln=Ot,Ot=null):Ln=Ot.sibling;var br=We(Pe,Ot,Ue[qt],nt);if(br===null){Ot===null&&(Ot=Ln);break}f&&Ot&&br.alternate===null&&p(Pe,Ot),Ie=Y(br,Ie,qt),or===null?Dt=br:or.sibling=br,or=br,Ot=Ln}if(qt===Ue.length)return w(Pe,Ot),_r&&gl(Pe,qt),Dt;if(Ot===null){for(;qt<Ue.length;qt++)Ot=ot(Pe,Ue[qt],nt),Ot!==null&&(Ie=Y(Ot,Ie,qt),or===null?Dt=Ot:or.sibling=Ot,or=Ot);return _r&&gl(Pe,qt),Dt}for(Ot=C(Ot);qt<Ue.length;qt++)Ln=Xe(Ot,Pe,qt,Ue[qt],nt),Ln!==null&&(f&&Ln.alternate!==null&&Ot.delete(Ln.key===null?qt:Ln.key),Ie=Y(Ln,Ie,qt),or===null?Dt=Ln:or.sibling=Ln,or=Ln);return f&&Ot.forEach(function(Do){return p(Pe,Do)}),_r&&gl(Pe,qt),Dt}function It(Pe,Ie,Ue,nt){if(Ue==null)throw Error(n(151));for(var Dt=null,or=null,Ot=Ie,qt=Ie=0,Ln=null,br=Ue.next();Ot!==null&&!br.done;qt++,br=Ue.next()){Ot.index>qt?(Ln=Ot,Ot=null):Ln=Ot.sibling;var Do=We(Pe,Ot,br.value,nt);if(Do===null){Ot===null&&(Ot=Ln);break}f&&Ot&&Do.alternate===null&&p(Pe,Ot),Ie=Y(Do,Ie,qt),or===null?Dt=Do:or.sibling=Do,or=Do,Ot=Ln}if(br.done)return w(Pe,Ot),_r&&gl(Pe,qt),Dt;if(Ot===null){for(;!br.done;qt++,br=Ue.next())br=ot(Pe,br.value,nt),br!==null&&(Ie=Y(br,Ie,qt),or===null?Dt=br:or.sibling=br,or=br);return _r&&gl(Pe,qt),Dt}for(Ot=C(Ot);!br.done;qt++,br=Ue.next())br=Xe(Ot,Pe,qt,br.value,nt),br!==null&&(f&&br.alternate!==null&&Ot.delete(br.key===null?qt:br.key),Ie=Y(br,Ie,qt),or===null?Dt=br:or.sibling=br,or=br);return f&&Ot.forEach(function(yF){return p(Pe,yF)}),_r&&gl(Pe,qt),Dt}function Pr(Pe,Ie,Ue,nt){if(typeof Ue=="object"&&Ue!==null&&Ue.type===v&&Ue.key===null&&(Ue=Ue.props.children),typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case g:e:{for(var Dt=Ue.key;Ie!==null;){if(Ie.key===Dt){if(Dt=Ue.type,Dt===v){if(Ie.tag===7){w(Pe,Ie.sibling),nt=q(Ie,Ue.props.children),nt.return=Pe,Pe=nt;break e}}else if(Ie.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===F&&s_(Dt)===Ie.type){w(Pe,Ie.sibling),nt=q(Ie,Ue.props),_d(nt,Ue),nt.return=Pe,Pe=nt;break e}w(Pe,Ie);break}else p(Pe,Ie);Ie=Ie.sibling}Ue.type===v?(nt=ml(Ue.props.children,Pe.mode,nt,Ue.key),nt.return=Pe,Pe=nt):(nt=fh(Ue.type,Ue.key,Ue.props,null,Pe.mode,nt),_d(nt,Ue),nt.return=Pe,Pe=nt)}return ve(Pe);case m:e:{for(Dt=Ue.key;Ie!==null;){if(Ie.key===Dt)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ue.containerInfo&&Ie.stateNode.implementation===Ue.implementation){w(Pe,Ie.sibling),nt=q(Ie,Ue.children||[]),nt.return=Pe,Pe=nt;break e}else{w(Pe,Ie);break}else p(Pe,Ie);Ie=Ie.sibling}nt=dg(Ue,Pe.mode,nt),nt.return=Pe,Pe=nt}return ve(Pe);case F:return Dt=Ue._init,Ue=Dt(Ue._payload),Pr(Pe,Ie,Ue,nt)}if(H(Ue))return $t(Pe,Ie,Ue,nt);if(O(Ue)){if(Dt=O(Ue),typeof Dt!="function")throw Error(n(150));return Ue=Dt.call(Ue),It(Pe,Ie,Ue,nt)}if(typeof Ue.then=="function")return Pr(Pe,Ie,Ch(Ue),nt);if(Ue.$$typeof===_)return Pr(Pe,Ie,gh(Pe,Ue),nt);Dh(Pe,Ue)}return typeof Ue=="string"&&Ue!==""||typeof Ue=="number"||typeof Ue=="bigint"?(Ue=""+Ue,Ie!==null&&Ie.tag===6?(w(Pe,Ie.sibling),nt=q(Ie,Ue),nt.return=Pe,Pe=nt):(w(Pe,Ie),nt=ug(Ue,Pe.mode,nt),nt.return=Pe,Pe=nt),ve(Pe)):w(Pe,Ie)}return function(Pe,Ie,Ue,nt){try{wd=0;var Dt=Pr(Pe,Ie,Ue,nt);return Ec=null,Dt}catch(Ot){if(Ot===fd||Ot===vh)throw Ot;var or=Hi(29,Ot,null,Pe.mode);return or.lanes=nt,or.return=Pe,or}finally{}}}var Ac=o_(!0),l_=o_(!1),fa=de(null),rs=null;function po(f){var p=f.alternate;X(An,An.current&1),X(fa,f),rs===null&&(p===null||_c.current!==null||p.memoizedState!==null)&&(rs=f)}function c_(f){if(f.tag===22){if(X(An,An.current),X(fa,f),rs===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(rs=f)}}else go()}function go(){X(An,An.current),X(fa,fa.current)}function ks(f){L(fa),rs===f&&(rs=null),L(An)}var An=de(0);function kh(f){for(var p=f;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||Fx(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Hg(f,p,w,C){p=f.memoizedState,w=w(C,p),w=w==null?p:d({},p,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var Vg={enqueueSetState:function(f,p,w){f=f._reactInternals;var C=Wi(),q=fo(C);q.payload=p,w!=null&&(q.callback=w),p=ho(f,q,C),p!==null&&(Ki(p,f,C),md(p,f,C))},enqueueReplaceState:function(f,p,w){f=f._reactInternals;var C=Wi(),q=fo(C);q.tag=1,q.payload=p,w!=null&&(q.callback=w),p=ho(f,q,C),p!==null&&(Ki(p,f,C),md(p,f,C))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var w=Wi(),C=fo(w);C.tag=2,p!=null&&(C.callback=p),p=ho(f,C,w),p!==null&&(Ki(p,f,w),md(p,f,w))}};function u_(f,p,w,C,q,Y,ve){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,Y,ve):p.prototype&&p.prototype.isPureReactComponent?!id(w,C)||!id(q,Y):!0}function d_(f,p,w,C){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,C),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,C),p.state!==f&&Vg.enqueueReplaceState(p,p.state,null)}function Nl(f,p){var w=p;if("ref"in p){w={};for(var C in p)C!=="ref"&&(w[C]=p[C])}if(f=f.defaultProps){w===p&&(w=d({},w));for(var q in f)w[q]===void 0&&(w[q]=f[q])}return w}var Mh=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function f_(f){Mh(f)}function h_(f){console.error(f)}function m_(f){Mh(f)}function Fh(f,p){try{var w=f.onUncaughtError;w(p.value,{componentStack:p.stack})}catch(C){setTimeout(function(){throw C})}}function p_(f,p,w){try{var C=f.onCaughtError;C(w.value,{componentStack:w.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(q){setTimeout(function(){throw q})}}function Gg(f,p,w){return w=fo(w),w.tag=3,w.payload={element:null},w.callback=function(){Fh(f,p)},w}function g_(f){return f=fo(f),f.tag=3,f}function x_(f,p,w,C){var q=w.type.getDerivedStateFromError;if(typeof q=="function"){var Y=C.value;f.payload=function(){return q(Y)},f.callback=function(){p_(p,w,C)}}var ve=w.stateNode;ve!==null&&typeof ve.componentDidCatch=="function"&&(f.callback=function(){p_(p,w,C),typeof q!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var Ne=C.stack;this.componentDidCatch(C.value,{componentStack:Ne!==null?Ne:""})})}function y7(f,p,w,C,q){if(w.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(p=w.alternate,p!==null&&cd(p,w,q,!0),w=fa.current,w!==null){switch(w.tag){case 13:return rs===null?gx():w.alternate===null&&sn===0&&(sn=3),w.flags&=-257,w.flags|=65536,w.lanes=q,C===wg?w.flags|=16384:(p=w.updateQueue,p===null?w.updateQueue=new Set([C]):p.add(C),vx(f,C,q)),!1;case 22:return w.flags|=65536,C===wg?w.flags|=16384:(p=w.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([C])},w.updateQueue=p):(w=p.retryQueue,w===null?p.retryQueue=new Set([C]):w.add(C)),vx(f,C,q)),!1}throw Error(n(435,w.tag))}return vx(f,C,q),gx(),!1}if(_r)return p=fa.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=q,C!==mg&&(f=Error(n(422),{cause:C}),ld(la(f,w)))):(C!==mg&&(p=Error(n(423),{cause:C}),ld(la(p,w))),f=f.current.alternate,f.flags|=65536,q&=-q,f.lanes|=q,C=la(C,w),q=Gg(f.stateNode,C,q),Sg(f,q),sn!==4&&(sn=2)),!1;var Y=Error(n(520),{cause:C});if(Y=la(Y,w),Cd===null?Cd=[Y]:Cd.push(Y),sn!==4&&(sn=2),p===null)return!0;C=la(C,w),w=p;do{switch(w.tag){case 3:return w.flags|=65536,f=q&-q,w.lanes|=f,f=Gg(w.stateNode,C,f),Sg(w,f),!1;case 1:if(p=w.type,Y=w.stateNode,(w.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(_o===null||!_o.has(Y))))return w.flags|=65536,q&=-q,w.lanes|=q,q=g_(q),x_(q,f,w,C),Sg(w,q),!1}w=w.return}while(w!==null);return!1}var v_=Error(n(461)),Bn=!1;function Gn(f,p,w,C){p.child=f===null?l_(p,null,w,C):Ac(p,f.child,w,C)}function y_(f,p,w,C,q){w=w.render;var Y=p.ref;if("ref"in C){var ve={};for(var Ne in C)Ne!=="ref"&&(ve[Ne]=C[Ne])}else ve=C;return bl(p),C=Cg(f,p,w,ve,Y,q),Ne=Dg(),f!==null&&!Bn?(kg(f,p,q),Ms(f,p,q)):(_r&&Ne&&fg(p),p.flags|=1,Gn(f,p,C,q),p.child)}function b_(f,p,w,C,q){if(f===null){var Y=w.type;return typeof Y=="function"&&!cg(Y)&&Y.defaultProps===void 0&&w.compare===null?(p.tag=15,p.type=Y,w_(f,p,Y,C,q)):(f=fh(w.type,null,C,p,p.mode,q),f.ref=p.ref,f.return=p,p.child=f)}if(Y=f.child,!ex(f,q)){var ve=Y.memoizedProps;if(w=w.compare,w=w!==null?w:id,w(ve,C)&&f.ref===p.ref)return Ms(f,p,q)}return p.flags|=1,f=js(Y,C),f.ref=p.ref,f.return=p,p.child=f}function w_(f,p,w,C,q){if(f!==null){var Y=f.memoizedProps;if(id(Y,C)&&f.ref===p.ref)if(Bn=!1,p.pendingProps=C=Y,ex(f,q))(f.flags&131072)!==0&&(Bn=!0);else return p.lanes=f.lanes,Ms(f,p,q)}return Qg(f,p,w,C,q)}function __(f,p,w){var C=p.pendingProps,q=C.children,Y=f!==null?f.memoizedState:null;if(C.mode==="hidden"){if((p.flags&128)!==0){if(C=Y!==null?Y.baseLanes|w:w,f!==null){for(q=p.child=f.child,Y=0;q!==null;)Y=Y|q.lanes|q.childLanes,q=q.sibling;p.childLanes=Y&~C}else p.childLanes=0,p.child=null;return N_(f,p,C,w)}if((w&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&xh(p,Y!==null?Y.cachePool:null),Y!==null?w2(p,Y):Eg(),c_(p);else return p.lanes=p.childLanes=536870912,N_(f,p,Y!==null?Y.baseLanes|w:w,w)}else Y!==null?(xh(p,Y.cachePool),w2(p,Y),go(),p.memoizedState=null):(f!==null&&xh(p,null),Eg(),go());return Gn(f,p,q,w),p.child}function N_(f,p,w,C){var q=bg();return q=q===null?null:{parent:En._currentValue,pool:q},p.memoizedState={baseLanes:w,cachePool:q},f!==null&&xh(p,null),Eg(),c_(p),f!==null&&cd(f,p,C,!0),null}function Oh(f,p){var w=p.ref;if(w===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(n(284));(f===null||f.ref!==w)&&(p.flags|=4194816)}}function Qg(f,p,w,C,q){return bl(p),w=Cg(f,p,w,C,void 0,q),C=Dg(),f!==null&&!Bn?(kg(f,p,q),Ms(f,p,q)):(_r&&C&&fg(p),p.flags|=1,Gn(f,p,w,q),p.child)}function S_(f,p,w,C,q,Y){return bl(p),p.updateQueue=null,w=N2(p,C,w,q),_2(f),C=Dg(),f!==null&&!Bn?(kg(f,p,Y),Ms(f,p,Y)):(_r&&C&&fg(p),p.flags|=1,Gn(f,p,w,Y),p.child)}function j_(f,p,w,C,q){if(bl(p),p.stateNode===null){var Y=xc,ve=w.contextType;typeof ve=="object"&&ve!==null&&(Y=ui(ve)),Y=new w(C,Y),p.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=Vg,p.stateNode=Y,Y._reactInternals=p,Y=p.stateNode,Y.props=C,Y.state=p.memoizedState,Y.refs={},_g(p),ve=w.contextType,Y.context=typeof ve=="object"&&ve!==null?ui(ve):xc,Y.state=p.memoizedState,ve=w.getDerivedStateFromProps,typeof ve=="function"&&(Hg(p,w,ve,C),Y.state=p.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ve=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ve!==Y.state&&Vg.enqueueReplaceState(Y,Y.state,null),gd(p,C,Y,q),pd(),Y.state=p.memoizedState),typeof Y.componentDidMount=="function"&&(p.flags|=4194308),C=!0}else if(f===null){Y=p.stateNode;var Ne=p.memoizedProps,Oe=Nl(w,Ne);Y.props=Oe;var He=Y.context,rt=w.contextType;ve=xc,typeof rt=="object"&&rt!==null&&(ve=ui(rt));var ot=w.getDerivedStateFromProps;rt=typeof ot=="function"||typeof Y.getSnapshotBeforeUpdate=="function",Ne=p.pendingProps!==Ne,rt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Ne||He!==ve)&&d_(p,Y,C,ve),uo=!1;var We=p.memoizedState;Y.state=We,gd(p,C,Y,q),pd(),He=p.memoizedState,Ne||We!==He||uo?(typeof ot=="function"&&(Hg(p,w,ot,C),He=p.memoizedState),(Oe=uo||u_(p,w,Oe,C,We,He,ve))?(rt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=C,p.memoizedState=He),Y.props=C,Y.state=He,Y.context=ve,C=Oe):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),C=!1)}else{Y=p.stateNode,Ng(f,p),ve=p.memoizedProps,rt=Nl(w,ve),Y.props=rt,ot=p.pendingProps,We=Y.context,He=w.contextType,Oe=xc,typeof He=="object"&&He!==null&&(Oe=ui(He)),Ne=w.getDerivedStateFromProps,(He=typeof Ne=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ve!==ot||We!==Oe)&&d_(p,Y,C,Oe),uo=!1,We=p.memoizedState,Y.state=We,gd(p,C,Y,q),pd();var Xe=p.memoizedState;ve!==ot||We!==Xe||uo||f!==null&&f.dependencies!==null&&ph(f.dependencies)?(typeof Ne=="function"&&(Hg(p,w,Ne,C),Xe=p.memoizedState),(rt=uo||u_(p,w,rt,C,We,Xe,Oe)||f!==null&&f.dependencies!==null&&ph(f.dependencies))?(He||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(C,Xe,Oe),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(C,Xe,Oe)),typeof Y.componentDidUpdate=="function"&&(p.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ve===f.memoizedProps&&We===f.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&We===f.memoizedState||(p.flags|=1024),p.memoizedProps=C,p.memoizedState=Xe),Y.props=C,Y.state=Xe,Y.context=Oe,C=rt):(typeof Y.componentDidUpdate!="function"||ve===f.memoizedProps&&We===f.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ve===f.memoizedProps&&We===f.memoizedState||(p.flags|=1024),C=!1)}return Y=C,Oh(f,p),C=(p.flags&128)!==0,Y||C?(Y=p.stateNode,w=C&&typeof w.getDerivedStateFromError!="function"?null:Y.render(),p.flags|=1,f!==null&&C?(p.child=Ac(p,f.child,null,q),p.child=Ac(p,null,w,q)):Gn(f,p,w,q),p.memoizedState=Y.state,f=p.child):f=Ms(f,p,q),f}function E_(f,p,w,C){return od(),p.flags|=256,Gn(f,p,w,C),p.child}var Wg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kg(f){return{baseLanes:f,cachePool:h2()}}function Xg(f,p,w){return f=f!==null?f.childLanes&~w:0,p&&(f|=ha),f}function A_(f,p,w){var C=p.pendingProps,q=!1,Y=(p.flags&128)!==0,ve;if((ve=Y)||(ve=f!==null&&f.memoizedState===null?!1:(An.current&2)!==0),ve&&(q=!0,p.flags&=-129),ve=(p.flags&32)!==0,p.flags&=-33,f===null){if(_r){if(q?po(p):go(),_r){var Ne=an,Oe;if(Oe=Ne){e:{for(Oe=Ne,Ne=ts;Oe.nodeType!==8;){if(!Ne){Ne=null;break e}if(Oe=Ra(Oe.nextSibling),Oe===null){Ne=null;break e}}Ne=Oe}Ne!==null?(p.memoizedState={dehydrated:Ne,treeContext:pl!==null?{id:Es,overflow:As}:null,retryLane:536870912,hydrationErrors:null},Oe=Hi(18,null,null,0),Oe.stateNode=Ne,Oe.return=p,p.child=Oe,yi=p,an=null,Oe=!0):Oe=!1}Oe||vl(p)}if(Ne=p.memoizedState,Ne!==null&&(Ne=Ne.dehydrated,Ne!==null))return Fx(Ne)?p.lanes=32:p.lanes=536870912,null;ks(p)}return Ne=C.children,C=C.fallback,q?(go(),q=p.mode,Ne=Bh({mode:"hidden",children:Ne},q),C=ml(C,q,w,null),Ne.return=p,C.return=p,Ne.sibling=C,p.child=Ne,q=p.child,q.memoizedState=Kg(w),q.childLanes=Xg(f,ve,w),p.memoizedState=Wg,C):(po(p),Yg(p,Ne))}if(Oe=f.memoizedState,Oe!==null&&(Ne=Oe.dehydrated,Ne!==null)){if(Y)p.flags&256?(po(p),p.flags&=-257,p=Zg(f,p,w)):p.memoizedState!==null?(go(),p.child=f.child,p.flags|=128,p=null):(go(),q=C.fallback,Ne=p.mode,C=Bh({mode:"visible",children:C.children},Ne),q=ml(q,Ne,w,null),q.flags|=2,C.return=p,q.return=p,C.sibling=q,p.child=C,Ac(p,f.child,null,w),C=p.child,C.memoizedState=Kg(w),C.childLanes=Xg(f,ve,w),p.memoizedState=Wg,p=q);else if(po(p),Fx(Ne)){if(ve=Ne.nextSibling&&Ne.nextSibling.dataset,ve)var He=ve.dgst;ve=He,C=Error(n(419)),C.stack="",C.digest=ve,ld({value:C,source:null,stack:null}),p=Zg(f,p,w)}else if(Bn||cd(f,p,w,!1),ve=(w&f.childLanes)!==0,Bn||ve){if(ve=Kr,ve!==null&&(C=w&-w,C=(C&42)!==0?1:Da(C),C=(C&(ve.suspendedLanes|w))!==0?0:C,C!==0&&C!==Oe.retryLane))throw Oe.retryLane=C,gc(f,C),Ki(ve,f,C),v_;Ne.data==="$?"||gx(),p=Zg(f,p,w)}else Ne.data==="$?"?(p.flags|=192,p.child=f.child,p=null):(f=Oe.treeContext,an=Ra(Ne.nextSibling),yi=p,_r=!0,xl=null,ts=!1,f!==null&&(ua[da++]=Es,ua[da++]=As,ua[da++]=pl,Es=f.id,As=f.overflow,pl=p),p=Yg(p,C.children),p.flags|=4096);return p}return q?(go(),q=C.fallback,Ne=p.mode,Oe=f.child,He=Oe.sibling,C=js(Oe,{mode:"hidden",children:C.children}),C.subtreeFlags=Oe.subtreeFlags&65011712,He!==null?q=js(He,q):(q=ml(q,Ne,w,null),q.flags|=2),q.return=p,C.return=p,C.sibling=q,p.child=C,C=q,q=p.child,Ne=f.child.memoizedState,Ne===null?Ne=Kg(w):(Oe=Ne.cachePool,Oe!==null?(He=En._currentValue,Oe=Oe.parent!==He?{parent:He,pool:He}:Oe):Oe=h2(),Ne={baseLanes:Ne.baseLanes|w,cachePool:Oe}),q.memoizedState=Ne,q.childLanes=Xg(f,ve,w),p.memoizedState=Wg,C):(po(p),w=f.child,f=w.sibling,w=js(w,{mode:"visible",children:C.children}),w.return=p,w.sibling=null,f!==null&&(ve=p.deletions,ve===null?(p.deletions=[f],p.flags|=16):ve.push(f)),p.child=w,p.memoizedState=null,w)}function Yg(f,p){return p=Bh({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function Bh(f,p){return f=Hi(22,f,null,p),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function Zg(f,p,w){return Ac(p,f.child,null,w),f=Yg(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function T_(f,p,w){f.lanes|=p;var C=f.alternate;C!==null&&(C.lanes|=p),gg(f.return,p,w)}function Jg(f,p,w,C,q){var Y=f.memoizedState;Y===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:q}:(Y.isBackwards=p,Y.rendering=null,Y.renderingStartTime=0,Y.last=C,Y.tail=w,Y.tailMode=q)}function C_(f,p,w){var C=p.pendingProps,q=C.revealOrder,Y=C.tail;if(Gn(f,p,C.children,w),C=An.current,(C&2)!==0)C=C&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&T_(f,w,p);else if(f.tag===19)T_(f,w,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}switch(X(An,C),q){case"forwards":for(w=p.child,q=null;w!==null;)f=w.alternate,f!==null&&kh(f)===null&&(q=w),w=w.sibling;w=q,w===null?(q=p.child,p.child=null):(q=w.sibling,w.sibling=null),Jg(p,!1,q,w,Y);break;case"backwards":for(w=null,q=p.child,p.child=null;q!==null;){if(f=q.alternate,f!==null&&kh(f)===null){p.child=q;break}f=q.sibling,q.sibling=w,w=q,q=f}Jg(p,!0,w,null,Y);break;case"together":Jg(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Ms(f,p,w){if(f!==null&&(p.dependencies=f.dependencies),wo|=p.lanes,(w&p.childLanes)===0)if(f!==null){if(cd(f,p,w,!1),(w&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(n(153));if(p.child!==null){for(f=p.child,w=js(f,f.pendingProps),p.child=w,w.return=p;f.sibling!==null;)f=f.sibling,w=w.sibling=js(f,f.pendingProps),w.return=p;w.sibling=null}return p.child}function ex(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&ph(f)))}function b7(f,p,w){switch(p.tag){case 3:z(p,p.stateNode.containerInfo),co(p,En,f.memoizedState.cache),od();break;case 27:case 5:ne(p);break;case 4:z(p,p.stateNode.containerInfo);break;case 10:co(p,p.type,p.memoizedProps.value);break;case 13:var C=p.memoizedState;if(C!==null)return C.dehydrated!==null?(po(p),p.flags|=128,null):(w&p.child.childLanes)!==0?A_(f,p,w):(po(p),f=Ms(f,p,w),f!==null?f.sibling:null);po(p);break;case 19:var q=(f.flags&128)!==0;if(C=(w&p.childLanes)!==0,C||(cd(f,p,w,!1),C=(w&p.childLanes)!==0),q){if(C)return C_(f,p,w);p.flags|=128}if(q=p.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),X(An,An.current),C)break;return null;case 22:case 23:return p.lanes=0,__(f,p,w);case 24:co(p,En,f.memoizedState.cache)}return Ms(f,p,w)}function D_(f,p,w){if(f!==null)if(f.memoizedProps!==p.pendingProps)Bn=!0;else{if(!ex(f,w)&&(p.flags&128)===0)return Bn=!1,b7(f,p,w);Bn=(f.flags&131072)!==0}else Bn=!1,_r&&(p.flags&1048576)!==0&&s2(p,mh,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var C=p.elementType,q=C._init;if(C=q(C._payload),p.type=C,typeof C=="function")cg(C)?(f=Nl(C,f),p.tag=1,p=j_(null,p,C,f,w)):(p.tag=0,p=Qg(null,p,C,f,w));else{if(C!=null){if(q=C.$$typeof,q===N){p.tag=11,p=y_(null,p,C,f,w);break e}else if(q===T){p.tag=14,p=b_(null,p,C,f,w);break e}}throw p=D(C)||C,Error(n(306,p,""))}}return p;case 0:return Qg(f,p,p.type,p.pendingProps,w);case 1:return C=p.type,q=Nl(C,p.pendingProps),j_(f,p,C,q,w);case 3:e:{if(z(p,p.stateNode.containerInfo),f===null)throw Error(n(387));C=p.pendingProps;var Y=p.memoizedState;q=Y.element,Ng(f,p),gd(p,C,null,w);var ve=p.memoizedState;if(C=ve.cache,co(p,En,C),C!==Y.cache&&xg(p,[En],w,!0),pd(),C=ve.element,Y.isDehydrated)if(Y={element:C,isDehydrated:!1,cache:ve.cache},p.updateQueue.baseState=Y,p.memoizedState=Y,p.flags&256){p=E_(f,p,C,w);break e}else if(C!==q){q=la(Error(n(424)),p),ld(q),p=E_(f,p,C,w);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(an=Ra(f.firstChild),yi=p,_r=!0,xl=null,ts=!0,w=l_(p,null,C,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling}else{if(od(),C===q){p=Ms(f,p,w);break e}Gn(f,p,C,w)}p=p.child}return p;case 26:return Oh(f,p),f===null?(w=ON(p.type,null,p.pendingProps,null))?p.memoizedState=w:_r||(w=p.type,f=p.pendingProps,C=Kh(ae.current).createElement(w),C[Qe]=p,C[At]=f,Wn(C,w,f),qe(C),p.stateNode=C):p.memoizedState=ON(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return ne(p),f===null&&_r&&(C=p.stateNode=kN(p.type,p.pendingProps,ae.current),yi=p,ts=!0,q=an,jo(p.type)?(Ox=q,an=Ra(C.firstChild)):an=q),Gn(f,p,p.pendingProps.children,w),Oh(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&_r&&((q=C=an)&&(C=W7(C,p.type,p.pendingProps,ts),C!==null?(p.stateNode=C,yi=p,an=Ra(C.firstChild),ts=!1,q=!0):q=!1),q||vl(p)),ne(p),q=p.type,Y=p.pendingProps,ve=f!==null?f.memoizedProps:null,C=Y.children,Dx(q,Y)?C=null:ve!==null&&Dx(q,ve)&&(p.flags|=32),p.memoizedState!==null&&(q=Cg(f,p,f7,null,null,w),Id._currentValue=q),Oh(f,p),Gn(f,p,C,w),p.child;case 6:return f===null&&_r&&((f=w=an)&&(w=K7(w,p.pendingProps,ts),w!==null?(p.stateNode=w,yi=p,an=null,f=!0):f=!1),f||vl(p)),null;case 13:return A_(f,p,w);case 4:return z(p,p.stateNode.containerInfo),C=p.pendingProps,f===null?p.child=Ac(p,null,C,w):Gn(f,p,C,w),p.child;case 11:return y_(f,p,p.type,p.pendingProps,w);case 7:return Gn(f,p,p.pendingProps,w),p.child;case 8:return Gn(f,p,p.pendingProps.children,w),p.child;case 12:return Gn(f,p,p.pendingProps.children,w),p.child;case 10:return C=p.pendingProps,co(p,p.type,C.value),Gn(f,p,C.children,w),p.child;case 9:return q=p.type._context,C=p.pendingProps.children,bl(p),q=ui(q),C=C(q),p.flags|=1,Gn(f,p,C,w),p.child;case 14:return b_(f,p,p.type,p.pendingProps,w);case 15:return w_(f,p,p.type,p.pendingProps,w);case 19:return C_(f,p,w);case 31:return C=p.pendingProps,w=p.mode,C={mode:C.mode,children:C.children},f===null?(w=Bh(C,w),w.ref=p.ref,p.child=w,w.return=p,p=w):(w=js(f.child,C),w.ref=p.ref,p.child=w,w.return=p,p=w),p;case 22:return __(f,p,w);case 24:return bl(p),C=ui(En),f===null?(q=bg(),q===null&&(q=Kr,Y=vg(),q.pooledCache=Y,Y.refCount++,Y!==null&&(q.pooledCacheLanes|=w),q=Y),p.memoizedState={parent:C,cache:q},_g(p),co(p,En,q)):((f.lanes&w)!==0&&(Ng(f,p),gd(p,null,null,w),pd()),q=f.memoizedState,Y=p.memoizedState,q.parent!==C?(q={parent:C,cache:C},p.memoizedState=q,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=q),co(p,En,C)):(C=Y.cache,co(p,En,C),C!==q.cache&&xg(p,[En],w,!0))),Gn(f,p,p.pendingProps.children,w),p.child;case 29:throw p.pendingProps}throw Error(n(156,p.tag))}function Fs(f){f.flags|=4}function k_(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!zN(p)){if(p=fa.current,p!==null&&((gr&4194048)===gr?rs!==null:(gr&62914560)!==gr&&(gr&536870912)===0||p!==rs))throw hd=wg,m2;f.flags|=8192}}function Rh(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?vt():536870912,f.lanes|=p,kc|=p)}function Nd(f,p){if(!_r)switch(f.tailMode){case"hidden":p=f.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function nn(f){var p=f.alternate!==null&&f.alternate.child===f.child,w=0,C=0;if(p)for(var q=f.child;q!==null;)w|=q.lanes|q.childLanes,C|=q.subtreeFlags&65011712,C|=q.flags&65011712,q.return=f,q=q.sibling;else for(q=f.child;q!==null;)w|=q.lanes|q.childLanes,C|=q.subtreeFlags,C|=q.flags,q.return=f,q=q.sibling;return f.subtreeFlags|=C,f.childLanes=w,p}function w7(f,p,w){var C=p.pendingProps;switch(hg(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(p),null;case 1:return nn(p),null;case 3:return w=p.stateNode,C=null,f!==null&&(C=f.memoizedState.cache),p.memoizedState.cache!==C&&(p.flags|=2048),Cs(En),re(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(f===null||f.child===null)&&(sd(p)?Fs(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,c2())),nn(p),null;case 26:return w=p.memoizedState,f===null?(Fs(p),w!==null?(nn(p),k_(p,w)):(nn(p),p.flags&=-16777217)):w?w!==f.memoizedState?(Fs(p),nn(p),k_(p,w)):(nn(p),p.flags&=-16777217):(f.memoizedProps!==C&&Fs(p),nn(p),p.flags&=-16777217),null;case 27:ie(p),w=ae.current;var q=p.type;if(f!==null&&p.stateNode!=null)f.memoizedProps!==C&&Fs(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return nn(p),null}f=V.current,sd(p)?o2(p):(f=kN(q,C,w),p.stateNode=f,Fs(p))}return nn(p),null;case 5:if(ie(p),w=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==C&&Fs(p);else{if(!C){if(p.stateNode===null)throw Error(n(166));return nn(p),null}if(f=V.current,sd(p))o2(p);else{switch(q=Kh(ae.current),f){case 1:f=q.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:f=q.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":f=q.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":f=q.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":f=q.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof C.is=="string"?q.createElement("select",{is:C.is}):q.createElement("select"),C.multiple?f.multiple=!0:C.size&&(f.size=C.size);break;default:f=typeof C.is=="string"?q.createElement(w,{is:C.is}):q.createElement(w)}}f[Qe]=p,f[At]=C;e:for(q=p.child;q!==null;){if(q.tag===5||q.tag===6)f.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===p)break e;for(;q.sibling===null;){if(q.return===null||q.return===p)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}p.stateNode=f;e:switch(Wn(f,w,C),w){case"button":case"input":case"select":case"textarea":f=!!C.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Fs(p)}}return nn(p),p.flags&=-16777217,null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==C&&Fs(p);else{if(typeof C!="string"&&p.stateNode===null)throw Error(n(166));if(f=ae.current,sd(p)){if(f=p.stateNode,w=p.memoizedProps,C=null,q=yi,q!==null)switch(q.tag){case 27:case 5:C=q.memoizedProps}f[Qe]=p,f=!!(f.nodeValue===w||C!==null&&C.suppressHydrationWarning===!0||SN(f.nodeValue,w)),f||vl(p)}else f=Kh(f).createTextNode(C),f[Qe]=p,p.stateNode=f}return nn(p),null;case 13:if(C=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(q=sd(p),C!==null&&C.dehydrated!==null){if(f===null){if(!q)throw Error(n(318));if(q=p.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(n(317));q[Qe]=p}else od(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;nn(p),q=!1}else q=c2(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=q),q=!0;if(!q)return p.flags&256?(ks(p),p):(ks(p),null)}if(ks(p),(p.flags&128)!==0)return p.lanes=w,p;if(w=C!==null,f=f!==null&&f.memoizedState!==null,w){C=p.child,q=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(q=C.alternate.memoizedState.cachePool.pool);var Y=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(Y=C.memoizedState.cachePool.pool),Y!==q&&(C.flags|=2048)}return w!==f&&w&&(p.child.flags|=8192),Rh(p,p.updateQueue),nn(p),null;case 4:return re(),f===null&&jx(p.stateNode.containerInfo),nn(p),null;case 10:return Cs(p.type),nn(p),null;case 19:if(L(An),q=p.memoizedState,q===null)return nn(p),null;if(C=(p.flags&128)!==0,Y=q.rendering,Y===null)if(C)Nd(q,!1);else{if(sn!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(Y=kh(f),Y!==null){for(p.flags|=128,Nd(q,!1),f=Y.updateQueue,p.updateQueue=f,Rh(p,f),p.subtreeFlags=0,f=w,w=p.child;w!==null;)a2(w,f),w=w.sibling;return X(An,An.current&1|2),p.child}f=f.sibling}q.tail!==null&&k()>zh&&(p.flags|=128,C=!0,Nd(q,!1),p.lanes=4194304)}else{if(!C)if(f=kh(Y),f!==null){if(p.flags|=128,C=!0,f=f.updateQueue,p.updateQueue=f,Rh(p,f),Nd(q,!0),q.tail===null&&q.tailMode==="hidden"&&!Y.alternate&&!_r)return nn(p),null}else 2*k()-q.renderingStartTime>zh&&w!==536870912&&(p.flags|=128,C=!0,Nd(q,!1),p.lanes=4194304);q.isBackwards?(Y.sibling=p.child,p.child=Y):(f=q.last,f!==null?f.sibling=Y:p.child=Y,q.last=Y)}return q.tail!==null?(p=q.tail,q.rendering=p,q.tail=p.sibling,q.renderingStartTime=k(),p.sibling=null,f=An.current,X(An,C?f&1|2:f&1),p):(nn(p),null);case 22:case 23:return ks(p),Ag(),C=p.memoizedState!==null,f!==null?f.memoizedState!==null!==C&&(p.flags|=8192):C&&(p.flags|=8192),C?(w&536870912)!==0&&(p.flags&128)===0&&(nn(p),p.subtreeFlags&6&&(p.flags|=8192)):nn(p),w=p.updateQueue,w!==null&&Rh(p,w.retryQueue),w=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==w&&(p.flags|=2048),f!==null&&L(wl),null;case 24:return w=null,f!==null&&(w=f.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),Cs(En),nn(p),null;case 25:return null;case 30:return null}throw Error(n(156,p.tag))}function _7(f,p){switch(hg(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Cs(En),re(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return ie(p),null;case 13:if(ks(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(n(340));od()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return L(An),null;case 4:return re(),null;case 10:return Cs(p.type),null;case 22:case 23:return ks(p),Ag(),f!==null&&L(wl),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return Cs(En),null;case 25:return null;default:return null}}function M_(f,p){switch(hg(p),p.tag){case 3:Cs(En),re();break;case 26:case 27:case 5:ie(p);break;case 4:re();break;case 13:ks(p);break;case 19:L(An);break;case 10:Cs(p.type);break;case 22:case 23:ks(p),Ag(),f!==null&&L(wl);break;case 24:Cs(En)}}function Sd(f,p){try{var w=p.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var q=C.next;w=q;do{if((w.tag&f)===f){C=void 0;var Y=w.create,ve=w.inst;C=Y(),ve.destroy=C}w=w.next}while(w!==q)}}catch(Ne){Gr(p,p.return,Ne)}}function xo(f,p,w){try{var C=p.updateQueue,q=C!==null?C.lastEffect:null;if(q!==null){var Y=q.next;C=Y;do{if((C.tag&f)===f){var ve=C.inst,Ne=ve.destroy;if(Ne!==void 0){ve.destroy=void 0,q=p;var Oe=w,He=Ne;try{He()}catch(rt){Gr(q,Oe,rt)}}}C=C.next}while(C!==Y)}}catch(rt){Gr(p,p.return,rt)}}function F_(f){var p=f.updateQueue;if(p!==null){var w=f.stateNode;try{b2(p,w)}catch(C){Gr(f,f.return,C)}}}function O_(f,p,w){w.props=Nl(f.type,f.memoizedProps),w.state=f.memoizedState;try{w.componentWillUnmount()}catch(C){Gr(f,p,C)}}function jd(f,p){try{var w=f.ref;if(w!==null){switch(f.tag){case 26:case 27:case 5:var C=f.stateNode;break;case 30:C=f.stateNode;break;default:C=f.stateNode}typeof w=="function"?f.refCleanup=w(C):w.current=C}}catch(q){Gr(f,p,q)}}function ns(f,p){var w=f.ref,C=f.refCleanup;if(w!==null)if(typeof C=="function")try{C()}catch(q){Gr(f,p,q)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(q){Gr(f,p,q)}else w.current=null}function B_(f){var p=f.type,w=f.memoizedProps,C=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":w.autoFocus&&C.focus();break e;case"img":w.src?C.src=w.src:w.srcSet&&(C.srcset=w.srcSet)}}catch(q){Gr(f,f.return,q)}}function tx(f,p,w){try{var C=f.stateNode;U7(C,f.type,w,p),C[At]=p}catch(q){Gr(f,f.return,q)}}function R_(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&jo(f.type)||f.tag===4}function rx(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||R_(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&jo(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function nx(f,p,w){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(f,p):(p=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,p.appendChild(f),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=Wh));else if(C!==4&&(C===27&&jo(f.type)&&(w=f.stateNode,p=null),f=f.child,f!==null))for(nx(f,p,w),f=f.sibling;f!==null;)nx(f,p,w),f=f.sibling}function Lh(f,p,w){var C=f.tag;if(C===5||C===6)f=f.stateNode,p?w.insertBefore(f,p):w.appendChild(f);else if(C!==4&&(C===27&&jo(f.type)&&(w=f.stateNode),f=f.child,f!==null))for(Lh(f,p,w),f=f.sibling;f!==null;)Lh(f,p,w),f=f.sibling}function L_(f){var p=f.stateNode,w=f.memoizedProps;try{for(var C=f.type,q=p.attributes;q.length;)p.removeAttributeNode(q[0]);Wn(p,C,w),p[Qe]=f,p[At]=w}catch(Y){Gr(f,f.return,Y)}}var Os=!1,hn=!1,ix=!1,I_=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function N7(f,p){if(f=f.containerInfo,Tx=t0,f=Kw(f),rg(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var C=w.getSelection&&w.getSelection();if(C&&C.rangeCount!==0){w=C.anchorNode;var q=C.anchorOffset,Y=C.focusNode;C=C.focusOffset;try{w.nodeType,Y.nodeType}catch{w=null;break e}var ve=0,Ne=-1,Oe=-1,He=0,rt=0,ot=f,We=null;t:for(;;){for(var Xe;ot!==w||q!==0&&ot.nodeType!==3||(Ne=ve+q),ot!==Y||C!==0&&ot.nodeType!==3||(Oe=ve+C),ot.nodeType===3&&(ve+=ot.nodeValue.length),(Xe=ot.firstChild)!==null;)We=ot,ot=Xe;for(;;){if(ot===f)break t;if(We===w&&++He===q&&(Ne=ve),We===Y&&++rt===C&&(Oe=ve),(Xe=ot.nextSibling)!==null)break;ot=We,We=ot.parentNode}ot=Xe}w=Ne===-1||Oe===-1?null:{start:Ne,end:Oe}}else w=null}w=w||{start:0,end:0}}else w=null;for(Cx={focusedElem:f,selectionRange:w},t0=!1,Rn=p;Rn!==null;)if(p=Rn,f=p.child,(p.subtreeFlags&1024)!==0&&f!==null)f.return=p,Rn=f;else for(;Rn!==null;){switch(p=Rn,Y=p.alternate,f=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&Y!==null){f=void 0,w=p,q=Y.memoizedProps,Y=Y.memoizedState,C=w.stateNode;try{var $t=Nl(w.type,q,w.elementType===w.type);f=C.getSnapshotBeforeUpdate($t,Y),C.__reactInternalSnapshotBeforeUpdate=f}catch(It){Gr(w,w.return,It)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,w=f.nodeType,w===9)Mx(f);else if(w===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":Mx(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=p.sibling,f!==null){f.return=p.return,Rn=f;break}Rn=p.return}}function z_(f,p,w){var C=w.flags;switch(w.tag){case 0:case 11:case 15:vo(f,w),C&4&&Sd(5,w);break;case 1:if(vo(f,w),C&4)if(f=w.stateNode,p===null)try{f.componentDidMount()}catch(ve){Gr(w,w.return,ve)}else{var q=Nl(w.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(q,p,f.__reactInternalSnapshotBeforeUpdate)}catch(ve){Gr(w,w.return,ve)}}C&64&&F_(w),C&512&&jd(w,w.return);break;case 3:if(vo(f,w),C&64&&(f=w.updateQueue,f!==null)){if(p=null,w.child!==null)switch(w.child.tag){case 27:case 5:p=w.child.stateNode;break;case 1:p=w.child.stateNode}try{b2(f,p)}catch(ve){Gr(w,w.return,ve)}}break;case 27:p===null&&C&4&&L_(w);case 26:case 5:vo(f,w),p===null&&C&4&&B_(w),C&512&&jd(w,w.return);break;case 12:vo(f,w);break;case 13:vo(f,w),C&4&&$_(f,w),C&64&&(f=w.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(w=M7.bind(null,w),X7(f,w))));break;case 22:if(C=w.memoizedState!==null||Os,!C){p=p!==null&&p.memoizedState!==null||hn,q=Os;var Y=hn;Os=C,(hn=p)&&!Y?yo(f,w,(w.subtreeFlags&8772)!==0):vo(f,w),Os=q,hn=Y}break;case 30:break;default:vo(f,w)}}function P_(f){var p=f.alternate;p!==null&&(f.alternate=null,P_(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Ae(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Jr=null,Fi=!1;function Bs(f,p,w){for(w=w.child;w!==null;)q_(f,p,w),w=w.sibling}function q_(f,p,w){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(xe,w)}catch{}switch(w.tag){case 26:hn||ns(w,p),Bs(f,p,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:hn||ns(w,p);var C=Jr,q=Fi;jo(w.type)&&(Jr=w.stateNode,Fi=!1),Bs(f,p,w),Od(w.stateNode),Jr=C,Fi=q;break;case 5:hn||ns(w,p);case 6:if(C=Jr,q=Fi,Jr=null,Bs(f,p,w),Jr=C,Fi=q,Jr!==null)if(Fi)try{(Jr.nodeType===9?Jr.body:Jr.nodeName==="HTML"?Jr.ownerDocument.body:Jr).removeChild(w.stateNode)}catch(Y){Gr(w,p,Y)}else try{Jr.removeChild(w.stateNode)}catch(Y){Gr(w,p,Y)}break;case 18:Jr!==null&&(Fi?(f=Jr,CN(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,w.stateNode),$d(f)):CN(Jr,w.stateNode));break;case 4:C=Jr,q=Fi,Jr=w.stateNode.containerInfo,Fi=!0,Bs(f,p,w),Jr=C,Fi=q;break;case 0:case 11:case 14:case 15:hn||xo(2,w,p),hn||xo(4,w,p),Bs(f,p,w);break;case 1:hn||(ns(w,p),C=w.stateNode,typeof C.componentWillUnmount=="function"&&O_(w,p,C)),Bs(f,p,w);break;case 21:Bs(f,p,w);break;case 22:hn=(C=hn)||w.memoizedState!==null,Bs(f,p,w),hn=C;break;default:Bs(f,p,w)}}function $_(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{$d(f)}catch(w){Gr(p,p.return,w)}}function S7(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new I_),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new I_),p;default:throw Error(n(435,f.tag))}}function ax(f,p){var w=S7(f);p.forEach(function(C){var q=F7.bind(null,f,C);w.has(C)||(w.add(C),C.then(q,q))})}function Vi(f,p){var w=p.deletions;if(w!==null)for(var C=0;C<w.length;C++){var q=w[C],Y=f,ve=p,Ne=ve;e:for(;Ne!==null;){switch(Ne.tag){case 27:if(jo(Ne.type)){Jr=Ne.stateNode,Fi=!1;break e}break;case 5:Jr=Ne.stateNode,Fi=!1;break e;case 3:case 4:Jr=Ne.stateNode.containerInfo,Fi=!0;break e}Ne=Ne.return}if(Jr===null)throw Error(n(160));q_(Y,ve,q),Jr=null,Fi=!1,Y=q.alternate,Y!==null&&(Y.return=null),q.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)U_(p,f),p=p.sibling}var Ba=null;function U_(f,p){var w=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Vi(p,f),Gi(f),C&4&&(xo(3,f,f.return),Sd(3,f),xo(5,f,f.return));break;case 1:Vi(p,f),Gi(f),C&512&&(hn||w===null||ns(w,w.return)),C&64&&Os&&(f=f.updateQueue,f!==null&&(C=f.callbacks,C!==null&&(w=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=w===null?C:w.concat(C))));break;case 26:var q=Ba;if(Vi(p,f),Gi(f),C&512&&(hn||w===null||ns(w,w.return)),C&4){var Y=w!==null?w.memoizedState:null;if(C=f.memoizedState,w===null)if(C===null)if(f.stateNode===null){e:{C=f.type,w=f.memoizedProps,q=q.ownerDocument||q;t:switch(C){case"title":Y=q.getElementsByTagName("title")[0],(!Y||Y[Ee]||Y[Qe]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=q.createElement(C),q.head.insertBefore(Y,q.querySelector("head > title"))),Wn(Y,C,w),Y[Qe]=f,qe(Y),C=Y;break e;case"link":var ve=LN("link","href",q).get(C+(w.href||""));if(ve){for(var Ne=0;Ne<ve.length;Ne++)if(Y=ve[Ne],Y.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&Y.getAttribute("rel")===(w.rel==null?null:w.rel)&&Y.getAttribute("title")===(w.title==null?null:w.title)&&Y.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ve.splice(Ne,1);break t}}Y=q.createElement(C),Wn(Y,C,w),q.head.appendChild(Y);break;case"meta":if(ve=LN("meta","content",q).get(C+(w.content||""))){for(Ne=0;Ne<ve.length;Ne++)if(Y=ve[Ne],Y.getAttribute("content")===(w.content==null?null:""+w.content)&&Y.getAttribute("name")===(w.name==null?null:w.name)&&Y.getAttribute("property")===(w.property==null?null:w.property)&&Y.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&Y.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ve.splice(Ne,1);break t}}Y=q.createElement(C),Wn(Y,C,w),q.head.appendChild(Y);break;default:throw Error(n(468,C))}Y[Qe]=f,qe(Y),C=Y}f.stateNode=C}else IN(q,f.type,f.stateNode);else f.stateNode=RN(q,C,f.memoizedProps);else Y!==C?(Y===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):Y.count--,C===null?IN(q,f.type,f.stateNode):RN(q,C,f.memoizedProps)):C===null&&f.stateNode!==null&&tx(f,f.memoizedProps,w.memoizedProps)}break;case 27:Vi(p,f),Gi(f),C&512&&(hn||w===null||ns(w,w.return)),w!==null&&C&4&&tx(f,f.memoizedProps,w.memoizedProps);break;case 5:if(Vi(p,f),Gi(f),C&512&&(hn||w===null||ns(w,w.return)),f.flags&32){q=f.stateNode;try{cc(q,"")}catch(Xe){Gr(f,f.return,Xe)}}C&4&&f.stateNode!=null&&(q=f.memoizedProps,tx(f,q,w!==null?w.memoizedProps:q)),C&1024&&(ix=!0);break;case 6:if(Vi(p,f),Gi(f),C&4){if(f.stateNode===null)throw Error(n(162));C=f.memoizedProps,w=f.stateNode;try{w.nodeValue=C}catch(Xe){Gr(f,f.return,Xe)}}break;case 3:if(Zh=null,q=Ba,Ba=Xh(p.containerInfo),Vi(p,f),Ba=q,Gi(f),C&4&&w!==null&&w.memoizedState.isDehydrated)try{$d(p.containerInfo)}catch(Xe){Gr(f,f.return,Xe)}ix&&(ix=!1,H_(f));break;case 4:C=Ba,Ba=Xh(f.stateNode.containerInfo),Vi(p,f),Gi(f),Ba=C;break;case 12:Vi(p,f),Gi(f);break;case 13:Vi(p,f),Gi(f),f.child.flags&8192&&f.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(dx=k()),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,ax(f,C)));break;case 22:q=f.memoizedState!==null;var Oe=w!==null&&w.memoizedState!==null,He=Os,rt=hn;if(Os=He||q,hn=rt||Oe,Vi(p,f),hn=rt,Os=He,Gi(f),C&8192)e:for(p=f.stateNode,p._visibility=q?p._visibility&-2:p._visibility|1,q&&(w===null||Oe||Os||hn||Sl(f)),w=null,p=f;;){if(p.tag===5||p.tag===26){if(w===null){Oe=w=p;try{if(Y=Oe.stateNode,q)ve=Y.style,typeof ve.setProperty=="function"?ve.setProperty("display","none","important"):ve.display="none";else{Ne=Oe.stateNode;var ot=Oe.memoizedProps.style,We=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;Ne.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(Xe){Gr(Oe,Oe.return,Xe)}}}else if(p.tag===6){if(w===null){Oe=p;try{Oe.stateNode.nodeValue=q?"":Oe.memoizedProps}catch(Xe){Gr(Oe,Oe.return,Xe)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;w===p&&(w=null),p=p.return}w===p&&(w=null),p.sibling.return=p.return,p=p.sibling}C&4&&(C=f.updateQueue,C!==null&&(w=C.retryQueue,w!==null&&(C.retryQueue=null,ax(f,w))));break;case 19:Vi(p,f),Gi(f),C&4&&(C=f.updateQueue,C!==null&&(f.updateQueue=null,ax(f,C)));break;case 30:break;case 21:break;default:Vi(p,f),Gi(f)}}function Gi(f){var p=f.flags;if(p&2){try{for(var w,C=f.return;C!==null;){if(R_(C)){w=C;break}C=C.return}if(w==null)throw Error(n(160));switch(w.tag){case 27:var q=w.stateNode,Y=rx(f);Lh(f,Y,q);break;case 5:var ve=w.stateNode;w.flags&32&&(cc(ve,""),w.flags&=-33);var Ne=rx(f);Lh(f,Ne,ve);break;case 3:case 4:var Oe=w.stateNode.containerInfo,He=rx(f);nx(f,He,Oe);break;default:throw Error(n(161))}}catch(rt){Gr(f,f.return,rt)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function H_(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;H_(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function vo(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)z_(f,p.alternate,p),p=p.sibling}function Sl(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:xo(4,p,p.return),Sl(p);break;case 1:ns(p,p.return);var w=p.stateNode;typeof w.componentWillUnmount=="function"&&O_(p,p.return,w),Sl(p);break;case 27:Od(p.stateNode);case 26:case 5:ns(p,p.return),Sl(p);break;case 22:p.memoizedState===null&&Sl(p);break;case 30:Sl(p);break;default:Sl(p)}f=f.sibling}}function yo(f,p,w){for(w=w&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var C=p.alternate,q=f,Y=p,ve=Y.flags;switch(Y.tag){case 0:case 11:case 15:yo(q,Y,w),Sd(4,Y);break;case 1:if(yo(q,Y,w),C=Y,q=C.stateNode,typeof q.componentDidMount=="function")try{q.componentDidMount()}catch(He){Gr(C,C.return,He)}if(C=Y,q=C.updateQueue,q!==null){var Ne=C.stateNode;try{var Oe=q.shared.hiddenCallbacks;if(Oe!==null)for(q.shared.hiddenCallbacks=null,q=0;q<Oe.length;q++)y2(Oe[q],Ne)}catch(He){Gr(C,C.return,He)}}w&&ve&64&&F_(Y),jd(Y,Y.return);break;case 27:L_(Y);case 26:case 5:yo(q,Y,w),w&&C===null&&ve&4&&B_(Y),jd(Y,Y.return);break;case 12:yo(q,Y,w);break;case 13:yo(q,Y,w),w&&ve&4&&$_(q,Y);break;case 22:Y.memoizedState===null&&yo(q,Y,w),jd(Y,Y.return);break;case 30:break;default:yo(q,Y,w)}p=p.sibling}}function sx(f,p){var w=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==w&&(f!=null&&f.refCount++,w!=null&&ud(w))}function ox(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&ud(f))}function is(f,p,w,C){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)V_(f,p,w,C),p=p.sibling}function V_(f,p,w,C){var q=p.flags;switch(p.tag){case 0:case 11:case 15:is(f,p,w,C),q&2048&&Sd(9,p);break;case 1:is(f,p,w,C);break;case 3:is(f,p,w,C),q&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&ud(f)));break;case 12:if(q&2048){is(f,p,w,C),f=p.stateNode;try{var Y=p.memoizedProps,ve=Y.id,Ne=Y.onPostCommit;typeof Ne=="function"&&Ne(ve,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Oe){Gr(p,p.return,Oe)}}else is(f,p,w,C);break;case 13:is(f,p,w,C);break;case 23:break;case 22:Y=p.stateNode,ve=p.alternate,p.memoizedState!==null?Y._visibility&2?is(f,p,w,C):Ed(f,p):Y._visibility&2?is(f,p,w,C):(Y._visibility|=2,Tc(f,p,w,C,(p.subtreeFlags&10256)!==0)),q&2048&&sx(ve,p);break;case 24:is(f,p,w,C),q&2048&&ox(p.alternate,p);break;default:is(f,p,w,C)}}function Tc(f,p,w,C,q){for(q=q&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var Y=f,ve=p,Ne=w,Oe=C,He=ve.flags;switch(ve.tag){case 0:case 11:case 15:Tc(Y,ve,Ne,Oe,q),Sd(8,ve);break;case 23:break;case 22:var rt=ve.stateNode;ve.memoizedState!==null?rt._visibility&2?Tc(Y,ve,Ne,Oe,q):Ed(Y,ve):(rt._visibility|=2,Tc(Y,ve,Ne,Oe,q)),q&&He&2048&&sx(ve.alternate,ve);break;case 24:Tc(Y,ve,Ne,Oe,q),q&&He&2048&&ox(ve.alternate,ve);break;default:Tc(Y,ve,Ne,Oe,q)}p=p.sibling}}function Ed(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var w=f,C=p,q=C.flags;switch(C.tag){case 22:Ed(w,C),q&2048&&sx(C.alternate,C);break;case 24:Ed(w,C),q&2048&&ox(C.alternate,C);break;default:Ed(w,C)}p=p.sibling}}var Ad=8192;function Cc(f){if(f.subtreeFlags&Ad)for(f=f.child;f!==null;)G_(f),f=f.sibling}function G_(f){switch(f.tag){case 26:Cc(f),f.flags&Ad&&f.memoizedState!==null&&cF(Ba,f.memoizedState,f.memoizedProps);break;case 5:Cc(f);break;case 3:case 4:var p=Ba;Ba=Xh(f.stateNode.containerInfo),Cc(f),Ba=p;break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=Ad,Ad=16777216,Cc(f),Ad=p):Cc(f));break;default:Cc(f)}}function Q_(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function Td(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var w=0;w<p.length;w++){var C=p[w];Rn=C,K_(C,f)}Q_(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)W_(f),f=f.sibling}function W_(f){switch(f.tag){case 0:case 11:case 15:Td(f),f.flags&2048&&xo(9,f,f.return);break;case 3:Td(f);break;case 12:Td(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,Ih(f)):Td(f);break;default:Td(f)}}function Ih(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var w=0;w<p.length;w++){var C=p[w];Rn=C,K_(C,f)}Q_(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:xo(8,p,p.return),Ih(p);break;case 22:w=p.stateNode,w._visibility&2&&(w._visibility&=-3,Ih(p));break;default:Ih(p)}f=f.sibling}}function K_(f,p){for(;Rn!==null;){var w=Rn;switch(w.tag){case 0:case 11:case 15:xo(8,w,p);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var C=w.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:ud(w.memoizedState.cache)}if(C=w.child,C!==null)C.return=w,Rn=C;else e:for(w=f;Rn!==null;){C=Rn;var q=C.sibling,Y=C.return;if(P_(C),C===w){Rn=null;break e}if(q!==null){q.return=Y,Rn=q;break e}Rn=Y}}}var j7={getCacheForType:function(f){var p=ui(En),w=p.data.get(f);return w===void 0&&(w=f(),p.data.set(f,w)),w}},E7=typeof WeakMap=="function"?WeakMap:Map,Tr=0,Kr=null,cr=null,gr=0,Cr=0,Qi=null,bo=!1,Dc=!1,lx=!1,Rs=0,sn=0,wo=0,jl=0,cx=0,ha=0,kc=0,Cd=null,Oi=null,ux=!1,dx=0,zh=1/0,Ph=null,_o=null,Qn=0,No=null,Mc=null,Fc=0,fx=0,hx=null,X_=null,Dd=0,mx=null;function Wi(){if((Tr&2)!==0&&gr!==0)return gr&-gr;if(P.T!==null){var f=bc;return f!==0?f:wx()}return so()}function Y_(){ha===0&&(ha=(gr&536870912)===0||_r?$e():536870912);var f=fa.current;return f!==null&&(f.flags|=32),ha}function Ki(f,p,w){(f===Kr&&(Cr===2||Cr===9)||f.cancelPendingCommit!==null)&&(Oc(f,0),So(f,gr,ha,!1)),Qt(f,w),((Tr&2)===0||f!==Kr)&&(f===Kr&&((Tr&2)===0&&(jl|=w),sn===4&&So(f,gr,ha,!1)),as(f))}function Z_(f,p,w){if((Tr&6)!==0)throw Error(n(327));var C=!w&&(p&124)===0&&(p&f.expiredLanes)===0||be(f,p),q=C?C7(f,p):xx(f,p,!0),Y=C;do{if(q===0){Dc&&!C&&So(f,p,0,!1);break}else{if(w=f.current.alternate,Y&&!A7(w)){q=xx(f,p,!1),Y=!1;continue}if(q===2){if(Y=p,f.errorRecoveryDisabledLanes&Y)var ve=0;else ve=f.pendingLanes&-536870913,ve=ve!==0?ve:ve&536870912?536870912:0;if(ve!==0){p=ve;e:{var Ne=f;q=Cd;var Oe=Ne.current.memoizedState.isDehydrated;if(Oe&&(Oc(Ne,ve).flags|=256),ve=xx(Ne,ve,!1),ve!==2){if(lx&&!Oe){Ne.errorRecoveryDisabledLanes|=Y,jl|=Y,q=4;break e}Y=Oi,Oi=q,Y!==null&&(Oi===null?Oi=Y:Oi.push.apply(Oi,Y))}q=ve}if(Y=!1,q!==2)continue}}if(q===1){Oc(f,0),So(f,p,0,!0);break}e:{switch(C=f,Y=q,Y){case 0:case 1:throw Error(n(345));case 4:if((p&4194048)!==p)break;case 6:So(C,p,ha,!bo);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((p&62914560)===p&&(q=dx+300-k(),10<q)){if(So(C,p,ha,!bo),ce(C,0,!0)!==0)break e;C.timeoutHandle=AN(J_.bind(null,C,w,Oi,Ph,ux,p,ha,jl,kc,bo,Y,2,-0,0),q);break e}J_(C,w,Oi,Ph,ux,p,ha,jl,kc,bo,Y,0,-0,0)}}break}while(!0);as(f)}function J_(f,p,w,C,q,Y,ve,Ne,Oe,He,rt,ot,We,Xe){if(f.timeoutHandle=-1,ot=p.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(Ld={stylesheets:null,count:0,unsuspend:lF},G_(p),ot=uF(),ot!==null)){f.cancelPendingCommit=ot(sN.bind(null,f,p,Y,w,C,q,ve,Ne,Oe,rt,1,We,Xe)),So(f,Y,ve,!He);return}sN(f,p,Y,w,C,q,ve,Ne,Oe)}function A7(f){for(var p=f;;){var w=p.tag;if((w===0||w===11||w===15)&&p.flags&16384&&(w=p.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var C=0;C<w.length;C++){var q=w[C],Y=q.getSnapshot;q=q.value;try{if(!Ui(Y(),q))return!1}catch{return!1}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function So(f,p,w,C){p&=~cx,p&=~jl,f.suspendedLanes|=p,f.pingedLanes&=~p,C&&(f.warmLanes|=p),C=f.expirationTimes;for(var q=p;0<q;){var Y=31-Be(q),ve=1<<Y;C[Y]=-1,q&=~ve}w!==0&&io(f,w,p)}function qh(){return(Tr&6)===0?(kd(0),!1):!0}function px(){if(cr!==null){if(Cr===0)var f=cr.return;else f=cr,Ts=yl=null,Mg(f),Ec=null,wd=0,f=cr;for(;f!==null;)M_(f.alternate,f),f=f.return;cr=null}}function Oc(f,p){var w=f.timeoutHandle;w!==-1&&(f.timeoutHandle=-1,V7(w)),w=f.cancelPendingCommit,w!==null&&(f.cancelPendingCommit=null,w()),px(),Kr=f,cr=w=js(f.current,null),gr=p,Cr=0,Qi=null,bo=!1,Dc=be(f,p),lx=!1,kc=ha=cx=jl=wo=sn=0,Oi=Cd=null,ux=!1,(p&8)!==0&&(p|=p&32);var C=f.entangledLanes;if(C!==0)for(f=f.entanglements,C&=p;0<C;){var q=31-Be(C),Y=1<<q;p|=f[q],C&=~Y}return Rs=p,ch(),w}function eN(f,p){ar=null,P.H=Th,p===fd||p===vh?(p=x2(),Cr=3):p===m2?(p=x2(),Cr=4):Cr=p===v_?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Qi=p,cr===null&&(sn=1,Fh(f,la(p,f.current)))}function tN(){var f=P.H;return P.H=Th,f===null?Th:f}function rN(){var f=P.A;return P.A=j7,f}function gx(){sn=4,bo||(gr&4194048)!==gr&&fa.current!==null||(Dc=!0),(wo&134217727)===0&&(jl&134217727)===0||Kr===null||So(Kr,gr,ha,!1)}function xx(f,p,w){var C=Tr;Tr|=2;var q=tN(),Y=rN();(Kr!==f||gr!==p)&&(Ph=null,Oc(f,p)),p=!1;var ve=sn;e:do try{if(Cr!==0&&cr!==null){var Ne=cr,Oe=Qi;switch(Cr){case 8:px(),ve=6;break e;case 3:case 2:case 9:case 6:fa.current===null&&(p=!0);var He=Cr;if(Cr=0,Qi=null,Bc(f,Ne,Oe,He),w&&Dc){ve=0;break e}break;default:He=Cr,Cr=0,Qi=null,Bc(f,Ne,Oe,He)}}T7(),ve=sn;break}catch(rt){eN(f,rt)}while(!0);return p&&f.shellSuspendCounter++,Ts=yl=null,Tr=C,P.H=q,P.A=Y,cr===null&&(Kr=null,gr=0,ch()),ve}function T7(){for(;cr!==null;)nN(cr)}function C7(f,p){var w=Tr;Tr|=2;var C=tN(),q=rN();Kr!==f||gr!==p?(Ph=null,zh=k()+500,Oc(f,p)):Dc=be(f,p);e:do try{if(Cr!==0&&cr!==null){p=cr;var Y=Qi;t:switch(Cr){case 1:Cr=0,Qi=null,Bc(f,p,Y,1);break;case 2:case 9:if(p2(Y)){Cr=0,Qi=null,iN(p);break}p=function(){Cr!==2&&Cr!==9||Kr!==f||(Cr=7),as(f)},Y.then(p,p);break e;case 3:Cr=7;break e;case 4:Cr=5;break e;case 7:p2(Y)?(Cr=0,Qi=null,iN(p)):(Cr=0,Qi=null,Bc(f,p,Y,7));break;case 5:var ve=null;switch(cr.tag){case 26:ve=cr.memoizedState;case 5:case 27:var Ne=cr;if(!ve||zN(ve)){Cr=0,Qi=null;var Oe=Ne.sibling;if(Oe!==null)cr=Oe;else{var He=Ne.return;He!==null?(cr=He,$h(He)):cr=null}break t}}Cr=0,Qi=null,Bc(f,p,Y,5);break;case 6:Cr=0,Qi=null,Bc(f,p,Y,6);break;case 8:px(),sn=6;break e;default:throw Error(n(462))}}D7();break}catch(rt){eN(f,rt)}while(!0);return Ts=yl=null,P.H=C,P.A=q,Tr=w,cr!==null?0:(Kr=null,gr=0,ch(),sn)}function D7(){for(;cr!==null&&!ge();)nN(cr)}function nN(f){var p=D_(f.alternate,f,Rs);f.memoizedProps=f.pendingProps,p===null?$h(f):cr=p}function iN(f){var p=f,w=p.alternate;switch(p.tag){case 15:case 0:p=S_(w,p,p.pendingProps,p.type,void 0,gr);break;case 11:p=S_(w,p,p.pendingProps,p.type.render,p.ref,gr);break;case 5:Mg(p);default:M_(w,p),p=cr=a2(p,Rs),p=D_(w,p,Rs)}f.memoizedProps=f.pendingProps,p===null?$h(f):cr=p}function Bc(f,p,w,C){Ts=yl=null,Mg(p),Ec=null,wd=0;var q=p.return;try{if(y7(f,q,p,w,gr)){sn=1,Fh(f,la(w,f.current)),cr=null;return}}catch(Y){if(q!==null)throw cr=q,Y;sn=1,Fh(f,la(w,f.current)),cr=null;return}p.flags&32768?(_r||C===1?f=!0:Dc||(gr&536870912)!==0?f=!1:(bo=f=!0,(C===2||C===9||C===3||C===6)&&(C=fa.current,C!==null&&C.tag===13&&(C.flags|=16384))),aN(p,f)):$h(p)}function $h(f){var p=f;do{if((p.flags&32768)!==0){aN(p,bo);return}f=p.return;var w=w7(p.alternate,p,Rs);if(w!==null){cr=w;return}if(p=p.sibling,p!==null){cr=p;return}cr=p=f}while(p!==null);sn===0&&(sn=5)}function aN(f,p){do{var w=_7(f.alternate,f);if(w!==null){w.flags&=32767,cr=w;return}if(w=f.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!p&&(f=f.sibling,f!==null)){cr=f;return}cr=f=w}while(f!==null);sn=6,cr=null}function sN(f,p,w,C,q,Y,ve,Ne,Oe){f.cancelPendingCommit=null;do Uh();while(Qn!==0);if((Tr&6)!==0)throw Error(n(327));if(p!==null){if(p===f.current)throw Error(n(177));if(Y=p.lanes|p.childLanes,Y|=og,Vr(f,w,Y,ve,Ne,Oe),f===Kr&&(cr=Kr=null,gr=0),Mc=p,No=f,Fc=w,fx=Y,hx=q,X_=C,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,O7(J,function(){return dN(),null})):(f.callbackNode=null,f.callbackPriority=0),C=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||C){C=P.T,P.T=null,q=G.p,G.p=2,ve=Tr,Tr|=4;try{N7(f,p,w)}finally{Tr=ve,G.p=q,P.T=C}}Qn=1,oN(),lN(),cN()}}function oN(){if(Qn===1){Qn=0;var f=No,p=Mc,w=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||w){w=P.T,P.T=null;var C=G.p;G.p=2;var q=Tr;Tr|=4;try{U_(p,f);var Y=Cx,ve=Kw(f.containerInfo),Ne=Y.focusedElem,Oe=Y.selectionRange;if(ve!==Ne&&Ne&&Ne.ownerDocument&&Ww(Ne.ownerDocument.documentElement,Ne)){if(Oe!==null&&rg(Ne)){var He=Oe.start,rt=Oe.end;if(rt===void 0&&(rt=He),"selectionStart"in Ne)Ne.selectionStart=He,Ne.selectionEnd=Math.min(rt,Ne.value.length);else{var ot=Ne.ownerDocument||document,We=ot&&ot.defaultView||window;if(We.getSelection){var Xe=We.getSelection(),$t=Ne.textContent.length,It=Math.min(Oe.start,$t),Pr=Oe.end===void 0?It:Math.min(Oe.end,$t);!Xe.extend&&It>Pr&&(ve=Pr,Pr=It,It=ve);var Pe=Qw(Ne,It),Ie=Qw(Ne,Pr);if(Pe&&Ie&&(Xe.rangeCount!==1||Xe.anchorNode!==Pe.node||Xe.anchorOffset!==Pe.offset||Xe.focusNode!==Ie.node||Xe.focusOffset!==Ie.offset)){var Ue=ot.createRange();Ue.setStart(Pe.node,Pe.offset),Xe.removeAllRanges(),It>Pr?(Xe.addRange(Ue),Xe.extend(Ie.node,Ie.offset)):(Ue.setEnd(Ie.node,Ie.offset),Xe.addRange(Ue))}}}}for(ot=[],Xe=Ne;Xe=Xe.parentNode;)Xe.nodeType===1&&ot.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof Ne.focus=="function"&&Ne.focus(),Ne=0;Ne<ot.length;Ne++){var nt=ot[Ne];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}t0=!!Tx,Cx=Tx=null}finally{Tr=q,G.p=C,P.T=w}}f.current=p,Qn=2}}function lN(){if(Qn===2){Qn=0;var f=No,p=Mc,w=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||w){w=P.T,P.T=null;var C=G.p;G.p=2;var q=Tr;Tr|=4;try{z_(f,p.alternate,p)}finally{Tr=q,G.p=C,P.T=w}}Qn=3}}function cN(){if(Qn===4||Qn===3){Qn=0,ee();var f=No,p=Mc,w=Fc,C=X_;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Qn=5:(Qn=0,Mc=No=null,uN(f,f.pendingLanes));var q=f.pendingLanes;if(q===0&&(_o=null),Ns(w),p=p.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(xe,p,void 0,(p.current.flags&128)===128)}catch{}if(C!==null){p=P.T,q=G.p,G.p=2,P.T=null;try{for(var Y=f.onRecoverableError,ve=0;ve<C.length;ve++){var Ne=C[ve];Y(Ne.value,{componentStack:Ne.stack})}}finally{P.T=p,G.p=q}}(Fc&3)!==0&&Uh(),as(f),q=f.pendingLanes,(w&4194090)!==0&&(q&42)!==0?f===mx?Dd++:(Dd=0,mx=f):Dd=0,kd(0)}}function uN(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,ud(p)))}function Uh(f){return oN(),lN(),cN(),dN()}function dN(){if(Qn!==5)return!1;var f=No,p=fx;fx=0;var w=Ns(Fc),C=P.T,q=G.p;try{G.p=32>w?32:w,P.T=null,w=hx,hx=null;var Y=No,ve=Fc;if(Qn=0,Mc=No=null,Fc=0,(Tr&6)!==0)throw Error(n(331));var Ne=Tr;if(Tr|=4,W_(Y.current),V_(Y,Y.current,ve,w),Tr=Ne,kd(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(xe,Y)}catch{}return!0}finally{G.p=q,P.T=C,uN(f,p)}}function fN(f,p,w){p=la(w,p),p=Gg(f.stateNode,p,2),f=ho(f,p,2),f!==null&&(Qt(f,2),as(f))}function Gr(f,p,w){if(f.tag===3)fN(f,f,w);else for(;p!==null;){if(p.tag===3){fN(p,f,w);break}else if(p.tag===1){var C=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(_o===null||!_o.has(C))){f=la(w,f),w=g_(2),C=ho(p,w,2),C!==null&&(x_(w,C,p,f),Qt(C,2),as(C));break}}p=p.return}}function vx(f,p,w){var C=f.pingCache;if(C===null){C=f.pingCache=new E7;var q=new Set;C.set(p,q)}else q=C.get(p),q===void 0&&(q=new Set,C.set(p,q));q.has(w)||(lx=!0,q.add(w),f=k7.bind(null,f,p,w),p.then(f,f))}function k7(f,p,w){var C=f.pingCache;C!==null&&C.delete(p),f.pingedLanes|=f.suspendedLanes&w,f.warmLanes&=~w,Kr===f&&(gr&w)===w&&(sn===4||sn===3&&(gr&62914560)===gr&&300>k()-dx?(Tr&2)===0&&Oc(f,0):cx|=w,kc===gr&&(kc=0)),as(f)}function hN(f,p){p===0&&(p=vt()),f=gc(f,p),f!==null&&(Qt(f,p),as(f))}function M7(f){var p=f.memoizedState,w=0;p!==null&&(w=p.retryLane),hN(f,w)}function F7(f,p){var w=0;switch(f.tag){case 13:var C=f.stateNode,q=f.memoizedState;q!==null&&(w=q.retryLane);break;case 19:C=f.stateNode;break;case 22:C=f.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(p),hN(f,w)}function O7(f,p){return ye(f,p)}var Hh=null,Rc=null,yx=!1,Vh=!1,bx=!1,El=0;function as(f){f!==Rc&&f.next===null&&(Rc===null?Hh=Rc=f:Rc=Rc.next=f),Vh=!0,yx||(yx=!0,R7())}function kd(f,p){if(!bx&&Vh){bx=!0;do for(var w=!1,C=Hh;C!==null;){if(f!==0){var q=C.pendingLanes;if(q===0)var Y=0;else{var ve=C.suspendedLanes,Ne=C.pingedLanes;Y=(1<<31-Be(42|f)+1)-1,Y&=q&~(ve&~Ne),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(w=!0,xN(C,Y))}else Y=gr,Y=ce(C,C===Kr?Y:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(Y&3)===0||be(C,Y)||(w=!0,xN(C,Y));C=C.next}while(w);bx=!1}}function B7(){mN()}function mN(){Vh=yx=!1;var f=0;El!==0&&(H7()&&(f=El),El=0);for(var p=k(),w=null,C=Hh;C!==null;){var q=C.next,Y=pN(C,p);Y===0?(C.next=null,w===null?Hh=q:w.next=q,q===null&&(Rc=w)):(w=C,(f!==0||(Y&3)!==0)&&(Vh=!0)),C=q}kd(f)}function pN(f,p){for(var w=f.suspendedLanes,C=f.pingedLanes,q=f.expirationTimes,Y=f.pendingLanes&-62914561;0<Y;){var ve=31-Be(Y),Ne=1<<ve,Oe=q[ve];Oe===-1?((Ne&w)===0||(Ne&C)!==0)&&(q[ve]=Fe(Ne,p)):Oe<=p&&(f.expiredLanes|=Ne),Y&=~Ne}if(p=Kr,w=gr,w=ce(f,f===p?w:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),C=f.callbackNode,w===0||f===p&&(Cr===2||Cr===9)||f.cancelPendingCommit!==null)return C!==null&&C!==null&&M(C),f.callbackNode=null,f.callbackPriority=0;if((w&3)===0||be(f,w)){if(p=w&-w,p===f.callbackPriority)return p;switch(C!==null&&M(C),Ns(w)){case 2:case 8:w=Z;break;case 32:w=J;break;case 268435456:w=te;break;default:w=J}return C=gN.bind(null,f),w=ye(w,C),f.callbackPriority=p,f.callbackNode=w,p}return C!==null&&C!==null&&M(C),f.callbackPriority=2,f.callbackNode=null,2}function gN(f,p){if(Qn!==0&&Qn!==5)return f.callbackNode=null,f.callbackPriority=0,null;var w=f.callbackNode;if(Uh()&&f.callbackNode!==w)return null;var C=gr;return C=ce(f,f===Kr?C:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),C===0?null:(Z_(f,C,p),pN(f,k()),f.callbackNode!=null&&f.callbackNode===w?gN.bind(null,f):null)}function xN(f,p){if(Uh())return null;Z_(f,p,!0)}function R7(){G7(function(){(Tr&6)!==0?ye(Q,B7):mN()})}function wx(){return El===0&&(El=$e()),El}function vN(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:rh(""+f)}function yN(f,p){var w=p.ownerDocument.createElement("input");return w.name=p.name,w.value=p.value,f.id&&w.setAttribute("form",f.id),p.parentNode.insertBefore(w,p),f=new FormData(f),w.parentNode.removeChild(w),f}function L7(f,p,w,C,q){if(p==="submit"&&w&&w.stateNode===q){var Y=vN((q[At]||null).action),ve=C.submitter;ve&&(p=(p=ve[At]||null)?vN(p.formAction):ve.getAttribute("formAction"),p!==null&&(Y=p,ve=null));var Ne=new sh("action","action",null,C,q);f.push({event:Ne,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(El!==0){var Oe=ve?yN(q,ve):new FormData(q);qg(w,{pending:!0,data:Oe,method:q.method,action:Y},null,Oe)}}else typeof Y=="function"&&(Ne.preventDefault(),Oe=ve?yN(q,ve):new FormData(q),qg(w,{pending:!0,data:Oe,method:q.method,action:Y},Y,Oe))},currentTarget:q}]})}}for(var _x=0;_x<sg.length;_x++){var Nx=sg[_x],I7=Nx.toLowerCase(),z7=Nx[0].toUpperCase()+Nx.slice(1);Oa(I7,"on"+z7)}Oa(Zw,"onAnimationEnd"),Oa(Jw,"onAnimationIteration"),Oa(e2,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(r7,"onTransitionRun"),Oa(n7,"onTransitionStart"),Oa(i7,"onTransitionCancel"),Oa(t2,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Md="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Md));function bN(f,p){p=(p&4)!==0;for(var w=0;w<f.length;w++){var C=f[w],q=C.event;C=C.listeners;e:{var Y=void 0;if(p)for(var ve=C.length-1;0<=ve;ve--){var Ne=C[ve],Oe=Ne.instance,He=Ne.currentTarget;if(Ne=Ne.listener,Oe!==Y&&q.isPropagationStopped())break e;Y=Ne,q.currentTarget=He;try{Y(q)}catch(rt){Mh(rt)}q.currentTarget=null,Y=Oe}else for(ve=0;ve<C.length;ve++){if(Ne=C[ve],Oe=Ne.instance,He=Ne.currentTarget,Ne=Ne.listener,Oe!==Y&&q.isPropagationStopped())break e;Y=Ne,q.currentTarget=He;try{Y(q)}catch(rt){Mh(rt)}q.currentTarget=null,Y=Oe}}}}function ur(f,p){var w=p[rn];w===void 0&&(w=p[rn]=new Set);var C=f+"__bubble";w.has(C)||(wN(p,f,2,!1),w.add(C))}function Sx(f,p,w){var C=0;p&&(C|=4),wN(w,f,C,p)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function jx(f){if(!f[Gh]){f[Gh]=!0,Ge.forEach(function(w){w!=="selectionchange"&&(P7.has(w)||Sx(w,!1,f),Sx(w,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[Gh]||(p[Gh]=!0,Sx("selectionchange",!1,p))}}function wN(f,p,w,C){switch(VN(p)){case 2:var q=hF;break;case 8:q=mF;break;default:q=zx}w=q.bind(null,p,w,f),q=void 0,!Qp||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(q=!0),C?q!==void 0?f.addEventListener(p,w,{capture:!0,passive:q}):f.addEventListener(p,w,!0):q!==void 0?f.addEventListener(p,w,{passive:q}):f.addEventListener(p,w,!1)}function Ex(f,p,w,C,q){var Y=C;if((p&1)===0&&(p&2)===0&&C!==null)e:for(;;){if(C===null)return;var ve=C.tag;if(ve===3||ve===4){var Ne=C.stateNode.containerInfo;if(Ne===q)break;if(ve===4)for(ve=C.return;ve!==null;){var Oe=ve.tag;if((Oe===3||Oe===4)&&ve.stateNode.containerInfo===q)return;ve=ve.return}for(;Ne!==null;){if(ve=Ce(Ne),ve===null)return;if(Oe=ve.tag,Oe===5||Oe===6||Oe===26||Oe===27){C=Y=ve;continue e}Ne=Ne.parentNode}}C=C.return}Tw(function(){var He=Y,rt=Vp(w),ot=[];e:{var We=r2.get(f);if(We!==void 0){var Xe=sh,$t=f;switch(f){case"keypress":if(ih(w)===0)break e;case"keydown":case"keyup":Xe=OM;break;case"focusin":$t="focus",Xe=Yp;break;case"focusout":$t="blur",Xe=Yp;break;case"beforeblur":case"afterblur":Xe=Yp;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=kw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=_M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=LM;break;case Zw:case Jw:case e2:Xe=jM;break;case t2:Xe=zM;break;case"scroll":case"scrollend":Xe=bM;break;case"wheel":Xe=qM;break;case"copy":case"cut":case"paste":Xe=AM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=Fw;break;case"toggle":case"beforetoggle":Xe=UM}var It=(p&4)!==0,Pr=!It&&(f==="scroll"||f==="scrollend"),Pe=It?We!==null?We+"Capture":null:We;It=[];for(var Ie=He,Ue;Ie!==null;){var nt=Ie;if(Ue=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||Ue===null||Pe===null||(nt=Yu(Ie,Pe),nt!=null&&It.push(Fd(Ie,nt,Ue))),Pr)break;Ie=Ie.return}0<It.length&&(We=new Xe(We,$t,null,w,rt),ot.push({event:We,listeners:It}))}}if((p&7)===0){e:{if(We=f==="mouseover"||f==="pointerover",Xe=f==="mouseout"||f==="pointerout",We&&w!==Hp&&($t=w.relatedTarget||w.fromElement)&&(Ce($t)||$t[fr]))break e;if((Xe||We)&&(We=rt.window===rt?rt:(We=rt.ownerDocument)?We.defaultView||We.parentWindow:window,Xe?($t=w.relatedTarget||w.toElement,Xe=He,$t=$t?Ce($t):null,$t!==null&&(Pr=s($t),It=$t.tag,$t!==Pr||It!==5&&It!==27&&It!==6)&&($t=null)):(Xe=null,$t=He),Xe!==$t)){if(It=kw,nt="onMouseLeave",Pe="onMouseEnter",Ie="mouse",(f==="pointerout"||f==="pointerover")&&(It=Fw,nt="onPointerLeave",Pe="onPointerEnter",Ie="pointer"),Pr=Xe==null?We:Ve(Xe),Ue=$t==null?We:Ve($t),We=new It(nt,Ie+"leave",Xe,w,rt),We.target=Pr,We.relatedTarget=Ue,nt=null,Ce(rt)===He&&(It=new It(Pe,Ie+"enter",$t,w,rt),It.target=Ue,It.relatedTarget=Pr,nt=It),Pr=nt,Xe&&$t)t:{for(It=Xe,Pe=$t,Ie=0,Ue=It;Ue;Ue=Lc(Ue))Ie++;for(Ue=0,nt=Pe;nt;nt=Lc(nt))Ue++;for(;0<Ie-Ue;)It=Lc(It),Ie--;for(;0<Ue-Ie;)Pe=Lc(Pe),Ue--;for(;Ie--;){if(It===Pe||Pe!==null&&It===Pe.alternate)break t;It=Lc(It),Pe=Lc(Pe)}It=null}else It=null;Xe!==null&&_N(ot,We,Xe,It,!1),$t!==null&&Pr!==null&&_N(ot,Pr,$t,It,!0)}}e:{if(We=He?Ve(He):window,Xe=We.nodeName&&We.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&We.type==="file")var Dt=qw;else if(zw(We))if($w)Dt=JM;else{Dt=YM;var or=XM}else Xe=We.nodeName,!Xe||Xe.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?He&&Up(He.elementType)&&(Dt=qw):Dt=ZM;if(Dt&&(Dt=Dt(f,He))){Pw(ot,Dt,w,rt);break e}or&&or(f,We,He),f==="focusout"&&He&&We.type==="number"&&He.memoizedProps.value!=null&&$p(We,"number",We.value)}switch(or=He?Ve(He):window,f){case"focusin":(zw(or)||or.contentEditable==="true")&&(hc=or,ng=He,ad=null);break;case"focusout":ad=ng=hc=null;break;case"mousedown":ig=!0;break;case"contextmenu":case"mouseup":case"dragend":ig=!1,Xw(ot,w,rt);break;case"selectionchange":if(t7)break;case"keydown":case"keyup":Xw(ot,w,rt)}var Ot;if(Jp)e:{switch(f){case"compositionstart":var qt="onCompositionStart";break e;case"compositionend":qt="onCompositionEnd";break e;case"compositionupdate":qt="onCompositionUpdate";break e}qt=void 0}else fc?Lw(f,w)&&(qt="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(qt="onCompositionStart");qt&&(Ow&&w.locale!=="ko"&&(fc||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&fc&&(Ot=Cw()):(lo=rt,Wp="value"in lo?lo.value:lo.textContent,fc=!0)),or=Qh(He,qt),0<or.length&&(qt=new Mw(qt,f,null,w,rt),ot.push({event:qt,listeners:or}),Ot?qt.data=Ot:(Ot=Iw(w),Ot!==null&&(qt.data=Ot)))),(Ot=VM?GM(f,w):QM(f,w))&&(qt=Qh(He,"onBeforeInput"),0<qt.length&&(or=new Mw("onBeforeInput","beforeinput",null,w,rt),ot.push({event:or,listeners:qt}),or.data=Ot)),L7(ot,f,He,w,rt)}bN(ot,p)})}function Fd(f,p,w){return{instance:f,listener:p,currentTarget:w}}function Qh(f,p){for(var w=p+"Capture",C=[];f!==null;){var q=f,Y=q.stateNode;if(q=q.tag,q!==5&&q!==26&&q!==27||Y===null||(q=Yu(f,w),q!=null&&C.unshift(Fd(f,q,Y)),q=Yu(f,p),q!=null&&C.push(Fd(f,q,Y))),f.tag===3)return C;f=f.return}return[]}function Lc(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function _N(f,p,w,C,q){for(var Y=p._reactName,ve=[];w!==null&&w!==C;){var Ne=w,Oe=Ne.alternate,He=Ne.stateNode;if(Ne=Ne.tag,Oe!==null&&Oe===C)break;Ne!==5&&Ne!==26&&Ne!==27||He===null||(Oe=He,q?(He=Yu(w,Y),He!=null&&ve.unshift(Fd(w,He,Oe))):q||(He=Yu(w,Y),He!=null&&ve.push(Fd(w,He,Oe)))),w=w.return}ve.length!==0&&f.push({event:p,listeners:ve})}var q7=/\r\n?/g,$7=/\u0000|\uFFFD/g;function NN(f){return(typeof f=="string"?f:""+f).replace(q7,`
`).replace($7,"")}function SN(f,p){return p=NN(p),NN(f)===p}function Wh(){}function zr(f,p,w,C,q,Y){switch(w){case"children":typeof C=="string"?p==="body"||p==="textarea"&&C===""||cc(f,C):(typeof C=="number"||typeof C=="bigint")&&p!=="body"&&cc(f,""+C);break;case"className":vr(f,"class",C);break;case"tabIndex":vr(f,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":vr(f,w,C);break;case"style":Ew(f,C,Y);break;case"data":if(p!=="object"){vr(f,"data",C);break}case"src":case"href":if(C===""&&(p!=="a"||w!=="href")){f.removeAttribute(w);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){f.removeAttribute(w);break}C=rh(""+C),f.setAttribute(w,C);break;case"action":case"formAction":if(typeof C=="function"){f.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(w==="formAction"?(p!=="input"&&zr(f,p,"name",q.name,q,null),zr(f,p,"formEncType",q.formEncType,q,null),zr(f,p,"formMethod",q.formMethod,q,null),zr(f,p,"formTarget",q.formTarget,q,null)):(zr(f,p,"encType",q.encType,q,null),zr(f,p,"method",q.method,q,null),zr(f,p,"target",q.target,q,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){f.removeAttribute(w);break}C=rh(""+C),f.setAttribute(w,C);break;case"onClick":C!=null&&(f.onclick=Wh);break;case"onScroll":C!=null&&ur("scroll",f);break;case"onScrollEnd":C!=null&&ur("scrollend",f);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(w=C.__html,w!=null){if(q.children!=null)throw Error(n(60));f.innerHTML=w}}break;case"multiple":f.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":f.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){f.removeAttribute("xlink:href");break}w=rh(""+C),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?f.setAttribute(w,""+C):f.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?f.setAttribute(w,""):f.removeAttribute(w);break;case"capture":case"download":C===!0?f.setAttribute(w,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?f.setAttribute(w,C):f.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?f.setAttribute(w,C):f.removeAttribute(w);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?f.removeAttribute(w):f.setAttribute(w,C);break;case"popover":ur("beforetoggle",f),ur("toggle",f),Er(f,"popover",C);break;case"xlinkActuate":yr(f,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":yr(f,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":yr(f,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":yr(f,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":yr(f,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":yr(f,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":yr(f,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":yr(f,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":yr(f,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":Er(f,"is",C);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=vM.get(w)||w,Er(f,w,C))}}function Ax(f,p,w,C,q,Y){switch(w){case"style":Ew(f,C,Y);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(w=C.__html,w!=null){if(q.children!=null)throw Error(n(60));f.innerHTML=w}}break;case"children":typeof C=="string"?cc(f,C):(typeof C=="number"||typeof C=="bigint")&&cc(f,""+C);break;case"onScroll":C!=null&&ur("scroll",f);break;case"onScrollEnd":C!=null&&ur("scrollend",f);break;case"onClick":C!=null&&(f.onclick=Wh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ke.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(q=w.endsWith("Capture"),p=w.slice(2,q?w.length-7:void 0),Y=f[At]||null,Y=Y!=null?Y[w]:null,typeof Y=="function"&&f.removeEventListener(p,Y,q),typeof C=="function")){typeof Y!="function"&&Y!==null&&(w in f?f[w]=null:f.hasAttribute(w)&&f.removeAttribute(w)),f.addEventListener(p,C,q);break e}w in f?f[w]=C:C===!0?f.setAttribute(w,""):Er(f,w,C)}}}function Wn(f,p,w){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ur("error",f),ur("load",f);var C=!1,q=!1,Y;for(Y in w)if(w.hasOwnProperty(Y)){var ve=w[Y];if(ve!=null)switch(Y){case"src":C=!0;break;case"srcSet":q=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:zr(f,p,Y,ve,w,null)}}q&&zr(f,p,"srcSet",w.srcSet,w,null),C&&zr(f,p,"src",w.src,w,null);return;case"input":ur("invalid",f);var Ne=Y=ve=q=null,Oe=null,He=null;for(C in w)if(w.hasOwnProperty(C)){var rt=w[C];if(rt!=null)switch(C){case"name":q=rt;break;case"type":ve=rt;break;case"checked":Oe=rt;break;case"defaultChecked":He=rt;break;case"value":Y=rt;break;case"defaultValue":Ne=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,p));break;default:zr(f,p,C,rt,w,null)}}_w(f,Y,Ne,Oe,He,ve,q,!1),eh(f);return;case"select":ur("invalid",f),C=ve=Y=null;for(q in w)if(w.hasOwnProperty(q)&&(Ne=w[q],Ne!=null))switch(q){case"value":Y=Ne;break;case"defaultValue":ve=Ne;break;case"multiple":C=Ne;default:zr(f,p,q,Ne,w,null)}p=Y,w=ve,f.multiple=!!C,p!=null?lc(f,!!C,p,!1):w!=null&&lc(f,!!C,w,!0);return;case"textarea":ur("invalid",f),Y=q=C=null;for(ve in w)if(w.hasOwnProperty(ve)&&(Ne=w[ve],Ne!=null))switch(ve){case"value":C=Ne;break;case"defaultValue":q=Ne;break;case"children":Y=Ne;break;case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(n(91));break;default:zr(f,p,ve,Ne,w,null)}Sw(f,C,q,Y),eh(f);return;case"option":for(Oe in w)if(w.hasOwnProperty(Oe)&&(C=w[Oe],C!=null))switch(Oe){case"selected":f.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:zr(f,p,Oe,C,w,null)}return;case"dialog":ur("beforetoggle",f),ur("toggle",f),ur("cancel",f),ur("close",f);break;case"iframe":case"object":ur("load",f);break;case"video":case"audio":for(C=0;C<Md.length;C++)ur(Md[C],f);break;case"image":ur("error",f),ur("load",f);break;case"details":ur("toggle",f);break;case"embed":case"source":case"link":ur("error",f),ur("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(He in w)if(w.hasOwnProperty(He)&&(C=w[He],C!=null))switch(He){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,p));default:zr(f,p,He,C,w,null)}return;default:if(Up(p)){for(rt in w)w.hasOwnProperty(rt)&&(C=w[rt],C!==void 0&&Ax(f,p,rt,C,w,void 0));return}}for(Ne in w)w.hasOwnProperty(Ne)&&(C=w[Ne],C!=null&&zr(f,p,Ne,C,w,null))}function U7(f,p,w,C){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var q=null,Y=null,ve=null,Ne=null,Oe=null,He=null,rt=null;for(Xe in w){var ot=w[Xe];if(w.hasOwnProperty(Xe)&&ot!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":Oe=ot;default:C.hasOwnProperty(Xe)||zr(f,p,Xe,null,C,ot)}}for(var We in C){var Xe=C[We];if(ot=w[We],C.hasOwnProperty(We)&&(Xe!=null||ot!=null))switch(We){case"type":Y=Xe;break;case"name":q=Xe;break;case"checked":He=Xe;break;case"defaultChecked":rt=Xe;break;case"value":ve=Xe;break;case"defaultValue":Ne=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(n(137,p));break;default:Xe!==ot&&zr(f,p,We,Xe,C,ot)}}qp(f,ve,Ne,Oe,He,rt,Y,q);return;case"select":Xe=ve=Ne=We=null;for(Y in w)if(Oe=w[Y],w.hasOwnProperty(Y)&&Oe!=null)switch(Y){case"value":break;case"multiple":Xe=Oe;default:C.hasOwnProperty(Y)||zr(f,p,Y,null,C,Oe)}for(q in C)if(Y=C[q],Oe=w[q],C.hasOwnProperty(q)&&(Y!=null||Oe!=null))switch(q){case"value":We=Y;break;case"defaultValue":Ne=Y;break;case"multiple":ve=Y;default:Y!==Oe&&zr(f,p,q,Y,C,Oe)}p=Ne,w=ve,C=Xe,We!=null?lc(f,!!w,We,!1):!!C!=!!w&&(p!=null?lc(f,!!w,p,!0):lc(f,!!w,w?[]:"",!1));return;case"textarea":Xe=We=null;for(Ne in w)if(q=w[Ne],w.hasOwnProperty(Ne)&&q!=null&&!C.hasOwnProperty(Ne))switch(Ne){case"value":break;case"children":break;default:zr(f,p,Ne,null,C,q)}for(ve in C)if(q=C[ve],Y=w[ve],C.hasOwnProperty(ve)&&(q!=null||Y!=null))switch(ve){case"value":We=q;break;case"defaultValue":Xe=q;break;case"children":break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(91));break;default:q!==Y&&zr(f,p,ve,q,C,Y)}Nw(f,We,Xe);return;case"option":for(var $t in w)if(We=w[$t],w.hasOwnProperty($t)&&We!=null&&!C.hasOwnProperty($t))switch($t){case"selected":f.selected=!1;break;default:zr(f,p,$t,null,C,We)}for(Oe in C)if(We=C[Oe],Xe=w[Oe],C.hasOwnProperty(Oe)&&We!==Xe&&(We!=null||Xe!=null))switch(Oe){case"selected":f.selected=We&&typeof We!="function"&&typeof We!="symbol";break;default:zr(f,p,Oe,We,C,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in w)We=w[It],w.hasOwnProperty(It)&&We!=null&&!C.hasOwnProperty(It)&&zr(f,p,It,null,C,We);for(He in C)if(We=C[He],Xe=w[He],C.hasOwnProperty(He)&&We!==Xe&&(We!=null||Xe!=null))switch(He){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(n(137,p));break;default:zr(f,p,He,We,C,Xe)}return;default:if(Up(p)){for(var Pr in w)We=w[Pr],w.hasOwnProperty(Pr)&&We!==void 0&&!C.hasOwnProperty(Pr)&&Ax(f,p,Pr,void 0,C,We);for(rt in C)We=C[rt],Xe=w[rt],!C.hasOwnProperty(rt)||We===Xe||We===void 0&&Xe===void 0||Ax(f,p,rt,We,C,Xe);return}}for(var Pe in w)We=w[Pe],w.hasOwnProperty(Pe)&&We!=null&&!C.hasOwnProperty(Pe)&&zr(f,p,Pe,null,C,We);for(ot in C)We=C[ot],Xe=w[ot],!C.hasOwnProperty(ot)||We===Xe||We==null&&Xe==null||zr(f,p,ot,We,C,Xe)}var Tx=null,Cx=null;function Kh(f){return f.nodeType===9?f:f.ownerDocument}function jN(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function EN(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function Dx(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var kx=null;function H7(){var f=window.event;return f&&f.type==="popstate"?f===kx?!1:(kx=f,!0):(kx=null,!1)}var AN=typeof setTimeout=="function"?setTimeout:void 0,V7=typeof clearTimeout=="function"?clearTimeout:void 0,TN=typeof Promise=="function"?Promise:void 0,G7=typeof queueMicrotask=="function"?queueMicrotask:typeof TN<"u"?function(f){return TN.resolve(null).then(f).catch(Q7)}:AN;function Q7(f){setTimeout(function(){throw f})}function jo(f){return f==="head"}function CN(f,p){var w=p,C=0,q=0;do{var Y=w.nextSibling;if(f.removeChild(w),Y&&Y.nodeType===8)if(w=Y.data,w==="/$"){if(0<C&&8>C){w=C;var ve=f.ownerDocument;if(w&1&&Od(ve.documentElement),w&2&&Od(ve.body),w&4)for(w=ve.head,Od(w),ve=w.firstChild;ve;){var Ne=ve.nextSibling,Oe=ve.nodeName;ve[Ee]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&ve.rel.toLowerCase()==="stylesheet"||w.removeChild(ve),ve=Ne}}if(q===0){f.removeChild(Y),$d(p);return}q--}else w==="$"||w==="$?"||w==="$!"?q++:C=w.charCodeAt(0)-48;else C=0;w=Y}while(w);$d(p)}function Mx(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var w=p;switch(p=p.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":Mx(w),Ae(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}f.removeChild(w)}}function W7(f,p,w,C){for(;f.nodeType===1;){var q=w;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!C&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(C){if(!f[Ee])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(Y=f.getAttribute("rel"),Y==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(Y!==q.rel||f.getAttribute("href")!==(q.href==null||q.href===""?null:q.href)||f.getAttribute("crossorigin")!==(q.crossOrigin==null?null:q.crossOrigin)||f.getAttribute("title")!==(q.title==null?null:q.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(Y=f.getAttribute("src"),(Y!==(q.src==null?null:q.src)||f.getAttribute("type")!==(q.type==null?null:q.type)||f.getAttribute("crossorigin")!==(q.crossOrigin==null?null:q.crossOrigin))&&Y&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var Y=q.name==null?null:""+q.name;if(q.type==="hidden"&&f.getAttribute("name")===Y)return f}else return f;if(f=Ra(f.nextSibling),f===null)break}return null}function K7(f,p,w){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!w||(f=Ra(f.nextSibling),f===null))return null;return f}function Fx(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function X7(f,p){var w=f.ownerDocument;if(f.data!=="$?"||w.readyState==="complete")p();else{var C=function(){p(),w.removeEventListener("DOMContentLoaded",C)};w.addEventListener("DOMContentLoaded",C),f._reactRetry=C}}function Ra(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return f}var Ox=null;function DN(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return f;p--}else w==="/$"&&p++}f=f.previousSibling}return null}function kN(f,p,w){switch(p=Kh(w),f){case"html":if(f=p.documentElement,!f)throw Error(n(452));return f;case"head":if(f=p.head,!f)throw Error(n(453));return f;case"body":if(f=p.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function Od(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);Ae(f)}var ma=new Map,MN=new Set;function Xh(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Ls=G.d;G.d={f:Y7,r:Z7,D:J7,C:eF,L:tF,m:rF,X:iF,S:nF,M:aF};function Y7(){var f=Ls.f(),p=qh();return f||p}function Z7(f){var p=ke(f);p!==null&&p.tag===5&&p.type==="form"?Z2(p):Ls.r(f)}var Ic=typeof document>"u"?null:document;function FN(f,p,w){var C=Ic;if(C&&typeof p=="string"&&p){var q=oa(p);q='link[rel="'+f+'"][href="'+q+'"]',typeof w=="string"&&(q+='[crossorigin="'+w+'"]'),MN.has(q)||(MN.add(q),f={rel:f,crossOrigin:w,href:p},C.querySelector(q)===null&&(p=C.createElement("link"),Wn(p,"link",f),qe(p),C.head.appendChild(p)))}}function J7(f){Ls.D(f),FN("dns-prefetch",f,null)}function eF(f,p){Ls.C(f,p),FN("preconnect",f,p)}function tF(f,p,w){Ls.L(f,p,w);var C=Ic;if(C&&f&&p){var q='link[rel="preload"][as="'+oa(p)+'"]';p==="image"&&w&&w.imageSrcSet?(q+='[imagesrcset="'+oa(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(q+='[imagesizes="'+oa(w.imageSizes)+'"]')):q+='[href="'+oa(f)+'"]';var Y=q;switch(p){case"style":Y=zc(f);break;case"script":Y=Pc(f)}ma.has(Y)||(f=d({rel:"preload",href:p==="image"&&w&&w.imageSrcSet?void 0:f,as:p},w),ma.set(Y,f),C.querySelector(q)!==null||p==="style"&&C.querySelector(Bd(Y))||p==="script"&&C.querySelector(Rd(Y))||(p=C.createElement("link"),Wn(p,"link",f),qe(p),C.head.appendChild(p)))}}function rF(f,p){Ls.m(f,p);var w=Ic;if(w&&f){var C=p&&typeof p.as=="string"?p.as:"script",q='link[rel="modulepreload"][as="'+oa(C)+'"][href="'+oa(f)+'"]',Y=q;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=Pc(f)}if(!ma.has(Y)&&(f=d({rel:"modulepreload",href:f},p),ma.set(Y,f),w.querySelector(q)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(Rd(Y)))return}C=w.createElement("link"),Wn(C,"link",f),qe(C),w.head.appendChild(C)}}}function nF(f,p,w){Ls.S(f,p,w);var C=Ic;if(C&&f){var q=Ze(C).hoistableStyles,Y=zc(f);p=p||"default";var ve=q.get(Y);if(!ve){var Ne={loading:0,preload:null};if(ve=C.querySelector(Bd(Y)))Ne.loading=5;else{f=d({rel:"stylesheet",href:f,"data-precedence":p},w),(w=ma.get(Y))&&Bx(f,w);var Oe=ve=C.createElement("link");qe(Oe),Wn(Oe,"link",f),Oe._p=new Promise(function(He,rt){Oe.onload=He,Oe.onerror=rt}),Oe.addEventListener("load",function(){Ne.loading|=1}),Oe.addEventListener("error",function(){Ne.loading|=2}),Ne.loading|=4,Yh(ve,p,C)}ve={type:"stylesheet",instance:ve,count:1,state:Ne},q.set(Y,ve)}}}function iF(f,p){Ls.X(f,p);var w=Ic;if(w&&f){var C=Ze(w).hoistableScripts,q=Pc(f),Y=C.get(q);Y||(Y=w.querySelector(Rd(q)),Y||(f=d({src:f,async:!0},p),(p=ma.get(q))&&Rx(f,p),Y=w.createElement("script"),qe(Y),Wn(Y,"link",f),w.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},C.set(q,Y))}}function aF(f,p){Ls.M(f,p);var w=Ic;if(w&&f){var C=Ze(w).hoistableScripts,q=Pc(f),Y=C.get(q);Y||(Y=w.querySelector(Rd(q)),Y||(f=d({src:f,async:!0,type:"module"},p),(p=ma.get(q))&&Rx(f,p),Y=w.createElement("script"),qe(Y),Wn(Y,"link",f),w.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},C.set(q,Y))}}function ON(f,p,w,C){var q=(q=ae.current)?Xh(q):null;if(!q)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(p=zc(w.href),w=Ze(q).hoistableStyles,C=w.get(p),C||(C={type:"style",instance:null,count:0,state:null},w.set(p,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){f=zc(w.href);var Y=Ze(q).hoistableStyles,ve=Y.get(f);if(ve||(q=q.ownerDocument||q,ve={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(f,ve),(Y=q.querySelector(Bd(f)))&&!Y._p&&(ve.instance=Y,ve.state.loading=5),ma.has(f)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},ma.set(f,w),Y||sF(q,f,w,ve.state))),p&&C===null)throw Error(n(528,""));return ve}if(p&&C!==null)throw Error(n(529,""));return null;case"script":return p=w.async,w=w.src,typeof w=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Pc(w),w=Ze(q).hoistableScripts,C=w.get(p),C||(C={type:"script",instance:null,count:0,state:null},w.set(p,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function zc(f){return'href="'+oa(f)+'"'}function Bd(f){return'link[rel="stylesheet"]['+f+"]"}function BN(f){return d({},f,{"data-precedence":f.precedence,precedence:null})}function sF(f,p,w,C){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?C.loading=1:(p=f.createElement("link"),C.preload=p,p.addEventListener("load",function(){return C.loading|=1}),p.addEventListener("error",function(){return C.loading|=2}),Wn(p,"link",w),qe(p),f.head.appendChild(p))}function Pc(f){return'[src="'+oa(f)+'"]'}function Rd(f){return"script[async]"+f}function RN(f,p,w){if(p.count++,p.instance===null)switch(p.type){case"style":var C=f.querySelector('style[data-href~="'+oa(w.href)+'"]');if(C)return p.instance=C,qe(C),C;var q=d({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return C=(f.ownerDocument||f).createElement("style"),qe(C),Wn(C,"style",q),Yh(C,w.precedence,f),p.instance=C;case"stylesheet":q=zc(w.href);var Y=f.querySelector(Bd(q));if(Y)return p.state.loading|=4,p.instance=Y,qe(Y),Y;C=BN(w),(q=ma.get(q))&&Bx(C,q),Y=(f.ownerDocument||f).createElement("link"),qe(Y);var ve=Y;return ve._p=new Promise(function(Ne,Oe){ve.onload=Ne,ve.onerror=Oe}),Wn(Y,"link",C),p.state.loading|=4,Yh(Y,w.precedence,f),p.instance=Y;case"script":return Y=Pc(w.src),(q=f.querySelector(Rd(Y)))?(p.instance=q,qe(q),q):(C=w,(q=ma.get(Y))&&(C=d({},w),Rx(C,q)),f=f.ownerDocument||f,q=f.createElement("script"),qe(q),Wn(q,"link",C),f.head.appendChild(q),p.instance=q);case"void":return null;default:throw Error(n(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(C=p.instance,p.state.loading|=4,Yh(C,w.precedence,f));return p.instance}function Yh(f,p,w){for(var C=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),q=C.length?C[C.length-1]:null,Y=q,ve=0;ve<C.length;ve++){var Ne=C[ve];if(Ne.dataset.precedence===p)Y=Ne;else if(Y!==q)break}Y?Y.parentNode.insertBefore(f,Y.nextSibling):(p=w.nodeType===9?w.head:w,p.insertBefore(f,p.firstChild))}function Bx(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function Rx(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var Zh=null;function LN(f,p,w){if(Zh===null){var C=new Map,q=Zh=new Map;q.set(w,C)}else q=Zh,C=q.get(w),C||(C=new Map,q.set(w,C));if(C.has(f))return C;for(C.set(f,null),w=w.getElementsByTagName(f),q=0;q<w.length;q++){var Y=w[q];if(!(Y[Ee]||Y[Qe]||f==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var ve=Y.getAttribute(p)||"";ve=f+ve;var Ne=C.get(ve);Ne?Ne.push(Y):C.set(ve,[Y])}}return C}function IN(f,p,w){f=f.ownerDocument||f,f.head.insertBefore(w,p==="title"?f.querySelector("head > title"):null)}function oF(f,p,w){if(w===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function zN(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Ld=null;function lF(){}function cF(f,p,w){if(Ld===null)throw Error(n(475));var C=Ld;if(p.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var q=zc(w.href),Y=f.querySelector(Bd(q));if(Y){f=Y._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(C.count++,C=Jh.bind(C),f.then(C,C)),p.state.loading|=4,p.instance=Y,qe(Y);return}Y=f.ownerDocument||f,w=BN(w),(q=ma.get(q))&&Bx(w,q),Y=Y.createElement("link"),qe(Y);var ve=Y;ve._p=new Promise(function(Ne,Oe){ve.onload=Ne,ve.onerror=Oe}),Wn(Y,"link",w),p.instance=Y}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(C.count++,p=Jh.bind(C),f.addEventListener("load",p),f.addEventListener("error",p))}}function uF(){if(Ld===null)throw Error(n(475));var f=Ld;return f.stylesheets&&f.count===0&&Lx(f,f.stylesheets),0<f.count?function(p){var w=setTimeout(function(){if(f.stylesheets&&Lx(f,f.stylesheets),f.unsuspend){var C=f.unsuspend;f.unsuspend=null,C()}},6e4);return f.unsuspend=p,function(){f.unsuspend=null,clearTimeout(w)}}:null}function Jh(){if(this.count--,this.count===0){if(this.stylesheets)Lx(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var e0=null;function Lx(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,e0=new Map,p.forEach(dF,f),e0=null,Jh.call(f))}function dF(f,p){if(!(p.state.loading&4)){var w=e0.get(f);if(w)var C=w.get(null);else{w=new Map,e0.set(f,w);for(var q=f.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<q.length;Y++){var ve=q[Y];(ve.nodeName==="LINK"||ve.getAttribute("media")!=="not all")&&(w.set(ve.dataset.precedence,ve),C=ve)}C&&w.set(null,C)}q=p.instance,ve=q.getAttribute("data-precedence"),Y=w.get(ve)||C,Y===C&&w.set(null,q),w.set(ve,q),this.count++,C=Jh.bind(this),q.addEventListener("load",C),q.addEventListener("error",C),Y?Y.parentNode.insertBefore(q,Y.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(q,f.firstChild)),p.state.loading|=4}}var Id={$$typeof:_,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function fF(f,p,w,C,q,Y,ve,Ne){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=C,this.onUncaughtError=q,this.onCaughtError=Y,this.onRecoverableError=ve,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ne,this.incompleteTransitions=new Map}function PN(f,p,w,C,q,Y,ve,Ne,Oe,He,rt,ot){return f=new fF(f,p,w,ve,Ne,Oe,He,ot),p=1,Y===!0&&(p|=24),Y=Hi(3,null,null,p),f.current=Y,Y.stateNode=f,p=vg(),p.refCount++,f.pooledCache=p,p.refCount++,Y.memoizedState={element:C,isDehydrated:w,cache:p},_g(Y),f}function qN(f){return f?(f=xc,f):xc}function $N(f,p,w,C,q,Y){q=qN(q),C.context===null?C.context=q:C.pendingContext=q,C=fo(p),C.payload={element:w},Y=Y===void 0?null:Y,Y!==null&&(C.callback=Y),w=ho(f,C,p),w!==null&&(Ki(w,f,p),md(w,f,p))}function UN(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<p?w:p}}function Ix(f,p){UN(f,p),(f=f.alternate)&&UN(f,p)}function HN(f){if(f.tag===13){var p=gc(f,67108864);p!==null&&Ki(p,f,67108864),Ix(f,67108864)}}var t0=!0;function hF(f,p,w,C){var q=P.T;P.T=null;var Y=G.p;try{G.p=2,zx(f,p,w,C)}finally{G.p=Y,P.T=q}}function mF(f,p,w,C){var q=P.T;P.T=null;var Y=G.p;try{G.p=8,zx(f,p,w,C)}finally{G.p=Y,P.T=q}}function zx(f,p,w,C){if(t0){var q=Px(C);if(q===null)Ex(f,p,C,r0,w),GN(f,C);else if(gF(q,f,p,w,C))C.stopPropagation();else if(GN(f,C),p&4&&-1<pF.indexOf(f)){for(;q!==null;){var Y=ke(q);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var ve=ht(Y.pendingLanes);if(ve!==0){var Ne=Y;for(Ne.pendingLanes|=2,Ne.entangledLanes|=2;ve;){var Oe=1<<31-Be(ve);Ne.entanglements[1]|=Oe,ve&=~Oe}as(Y),(Tr&6)===0&&(zh=k()+500,kd(0))}}break;case 13:Ne=gc(Y,2),Ne!==null&&Ki(Ne,Y,2),qh(),Ix(Y,2)}if(Y=Px(C),Y===null&&Ex(f,p,C,r0,w),Y===q)break;q=Y}q!==null&&C.stopPropagation()}else Ex(f,p,C,null,w)}}function Px(f){return f=Vp(f),qx(f)}var r0=null;function qx(f){if(r0=null,f=Ce(f),f!==null){var p=s(f);if(p===null)f=null;else{var w=p.tag;if(w===13){if(f=o(p),f!==null)return f;f=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return r0=f,null}function VN(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(B()){case Q:return 2;case Z:return 8;case J:case K:return 32;case te:return 268435456;default:return 32}default:return 32}}var $x=!1,Eo=null,Ao=null,To=null,zd=new Map,Pd=new Map,Co=[],pF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function GN(f,p){switch(f){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":zd.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(p.pointerId)}}function qd(f,p,w,C,q,Y){return f===null||f.nativeEvent!==Y?(f={blockedOn:p,domEventName:w,eventSystemFlags:C,nativeEvent:Y,targetContainers:[q]},p!==null&&(p=ke(p),p!==null&&HN(p)),f):(f.eventSystemFlags|=C,p=f.targetContainers,q!==null&&p.indexOf(q)===-1&&p.push(q),f)}function gF(f,p,w,C,q){switch(p){case"focusin":return Eo=qd(Eo,f,p,w,C,q),!0;case"dragenter":return Ao=qd(Ao,f,p,w,C,q),!0;case"mouseover":return To=qd(To,f,p,w,C,q),!0;case"pointerover":var Y=q.pointerId;return zd.set(Y,qd(zd.get(Y)||null,f,p,w,C,q)),!0;case"gotpointercapture":return Y=q.pointerId,Pd.set(Y,qd(Pd.get(Y)||null,f,p,w,C,q)),!0}return!1}function QN(f){var p=Ce(f.target);if(p!==null){var w=s(p);if(w!==null){if(p=w.tag,p===13){if(p=o(w),p!==null){f.blockedOn=p,cl(f.priority,function(){if(w.tag===13){var C=Wi();C=Da(C);var q=gc(w,C);q!==null&&Ki(q,w,C),Ix(w,C)}});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function n0(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var w=Px(f.nativeEvent);if(w===null){w=f.nativeEvent;var C=new w.constructor(w.type,w);Hp=C,w.target.dispatchEvent(C),Hp=null}else return p=ke(w),p!==null&&HN(p),f.blockedOn=w,!1;p.shift()}return!0}function WN(f,p,w){n0(f)&&w.delete(p)}function xF(){$x=!1,Eo!==null&&n0(Eo)&&(Eo=null),Ao!==null&&n0(Ao)&&(Ao=null),To!==null&&n0(To)&&(To=null),zd.forEach(WN),Pd.forEach(WN)}function i0(f,p){f.blockedOn===p&&(f.blockedOn=null,$x||($x=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xF)))}var a0=null;function KN(f){a0!==f&&(a0=f,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){a0===f&&(a0=null);for(var p=0;p<f.length;p+=3){var w=f[p],C=f[p+1],q=f[p+2];if(typeof C!="function"){if(qx(C||w)===null)continue;break}var Y=ke(w);Y!==null&&(f.splice(p,3),p-=3,qg(Y,{pending:!0,data:q,method:w.method,action:C},C,q))}}))}function $d(f){function p(Oe){return i0(Oe,f)}Eo!==null&&i0(Eo,f),Ao!==null&&i0(Ao,f),To!==null&&i0(To,f),zd.forEach(p),Pd.forEach(p);for(var w=0;w<Co.length;w++){var C=Co[w];C.blockedOn===f&&(C.blockedOn=null)}for(;0<Co.length&&(w=Co[0],w.blockedOn===null);)QN(w),w.blockedOn===null&&Co.shift();if(w=(f.ownerDocument||f).$$reactFormReplay,w!=null)for(C=0;C<w.length;C+=3){var q=w[C],Y=w[C+1],ve=q[At]||null;if(typeof Y=="function")ve||KN(w);else if(ve){var Ne=null;if(Y&&Y.hasAttribute("formAction")){if(q=Y,ve=Y[At]||null)Ne=ve.formAction;else if(qx(q)!==null)continue}else Ne=ve.action;typeof Ne=="function"?w[C+1]=Ne:(w.splice(C,3),C-=3),KN(w)}}}function Ux(f){this._internalRoot=f}s0.prototype.render=Ux.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(n(409));var w=p.current,C=Wi();$N(w,C,f,p,null,null)},s0.prototype.unmount=Ux.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;$N(f.current,2,null,f,null,null),qh(),p[fr]=null}};function s0(f){this._internalRoot=f}s0.prototype.unstable_scheduleHydration=function(f){if(f){var p=so();f={blockedOn:null,target:f,priority:p};for(var w=0;w<Co.length&&p!==0&&p<Co[w].priority;w++);Co.splice(w,0,f),w===0&&QN(f)}};var XN=e.version;if(XN!=="19.1.1")throw Error(n(527,XN,"19.1.1"));G.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=u(p),f=f!==null?c(f):null,f=f===null?null:f.stateNode,f};var vF={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{xe=o0.inject(vF),_e=o0}catch{}}return Hd.createRoot=function(f,p){if(!a(f))throw Error(n(299));var w=!1,C="",q=f_,Y=h_,ve=m_,Ne=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(q=p.onUncaughtError),p.onCaughtError!==void 0&&(Y=p.onCaughtError),p.onRecoverableError!==void 0&&(ve=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Ne=p.unstable_transitionCallbacks)),p=PN(f,1,!1,null,null,w,C,q,Y,ve,Ne,null),f[fr]=p.current,jx(f),new Ux(p)},Hd.hydrateRoot=function(f,p,w){if(!a(f))throw Error(n(299));var C=!1,q="",Y=f_,ve=h_,Ne=m_,Oe=null,He=null;return w!=null&&(w.unstable_strictMode===!0&&(C=!0),w.identifierPrefix!==void 0&&(q=w.identifierPrefix),w.onUncaughtError!==void 0&&(Y=w.onUncaughtError),w.onCaughtError!==void 0&&(ve=w.onCaughtError),w.onRecoverableError!==void 0&&(Ne=w.onRecoverableError),w.unstable_transitionCallbacks!==void 0&&(Oe=w.unstable_transitionCallbacks),w.formState!==void 0&&(He=w.formState)),p=PN(f,1,!0,p,w??null,C,q,Y,ve,Ne,Oe,He),p.context=qN(null),w=p.current,C=Wi(),C=Da(C),q=fo(C),q.callback=null,ho(w,q,C),w=C,p.current.lanes=w,Qt(p,w),as(p),f[fr]=p.current,jx(f),new s0(p)},Hd.version="19.1.1",Hd}var rS;function DF(){if(rS)return Vx.exports;rS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vx.exports=CF(),Vx.exports}var kF=DF();const MF=Df(kF),FF="https://hoc.io.vn/api";class Jn extends Error{constructor(e,t,n){super(e),this.name="ApiError",this.status=t,this.errors=n,Object.setPrototypeOf(this,Jn.prototype)}isUnauthorized(){return this.status===401}isForbidden(){return this.status===403}isNotFound(){return this.status===404}isValidationError(){return this.status===422||!!this.errors}}class OF{constructor(){this.requestTimeout=15e3,this.baseURL=FF}async fetchWithTimeout(e,t,n=this.requestTimeout){const a=new AbortController,s=setTimeout(()=>a.abort(),n);try{const o=await fetch(e,{...t,signal:a.signal});return clearTimeout(s),o}catch(o){throw clearTimeout(s),o.name==="AbortError"?new Jn("Yu cu qu thi gian ch. Vui lng th li.",408):o}}getToken(){return localStorage.getItem("auth_token")}setToken(e){localStorage.setItem("auth_token",e)}removeToken(){localStorage.removeItem("auth_token")}getHeaders(e){const t={"Content-Type":"application/json",...e},n=this.getToken();return n?(t.Authorization=`Bearer ${n}`,console.log(" Auth token present (first 20 chars):",n.substring(0,20)+"...")):console.log(" No auth token (public request)"),t}async handleResponse(e){const t=e.headers.get("content-type");let n;if(t?.includes("application/json")?n=await e.json():n=await e.text(),!e.ok)throw e.status===401&&(this.removeToken(),window.location.hash!=="#/login"&&(window.location.hash="#/login")),new Jn(n.message||n.error||"C li xy ra",e.status,n.errors);return n}async request(e,t,n,a){try{const s={method:t,headers:this.getHeaders(a)};n&&(s.body=JSON.stringify(n));const o=await this.fetchWithTimeout(`${this.baseURL}${e}`,s);return await this.handleResponse(o)}catch(s){throw console.error(" API Request Error:",{url:`${this.baseURL}${e}`,method:t,error:s?.message||s,status:s?.status}),s instanceof Jn?s:s.message&&s.status!==void 0?new Jn(s.message,s.status,s.errors):new Jn("Khng th kt ni n server",0)}}async get(e,t){return this.request(e,"GET",void 0,t)}async post(e,t,n){return this.request(e,"POST",t,n)}async put(e,t,n){return this.request(e,"PUT",t,n)}async delete(e,t){return this.request(e,"DELETE",void 0,t)}async upload(e,t){try{const n={},a=this.getToken();a&&(n.Authorization=`Bearer ${a}`);const s=await this.fetchWithTimeout(`${this.baseURL}${e}`,{method:"POST",headers:n,body:t});return await this.handleResponse(s)}catch(n){throw n instanceof Jn?n:n.message&&n.status!==void 0?new Jn(n.message,n.status,n.errors):new Jn("Khng th upload file",0)}}async login(e,t){const n=await this.post("/auth/login",{email:e,password:t});return n.data?.token&&this.setToken(n.data.token),n.data}async register(e){const t=await this.post("/auth/register",e);return t.data?.token&&this.setToken(t.data.token),t.data}logout(){this.removeToken()}async getCurrentUser(){return(await this.get("/auth/me")).data}async refreshToken(){const e=await this.post("/auth/refresh");return e.data?.token&&this.setToken(e.data.token),e.data}async updateProfile(e){return(await this.put("/auth/profile",e)).data}async changePassword(e,t,n){return(await this.post("/auth/change-password",{current_password:e,new_password:t,confirm_password:n})).data}buildQueryString(e){const t=new URLSearchParams;Object.entries(e).forEach(([a,s])=>{s!=null&&s!==""&&(Array.isArray(s)?s.forEach(o=>t.append(a,String(o))):t.append(a,String(s)))});const n=t.toString();return n?`?${n}`:""}getBaseURL(){return this.baseURL}async getMyQuizzes(e){const t=e?this.buildQueryString(e):"",n=await this.get(`/quizzes/my${t}`);if(n.success&&n.data){if(Array.isArray(n.data))return{data:n.data,pagination:n.pagination||{total:n.data.length,per_page:100,current_page:1,last_page:1}};if(n.data.data&&Array.isArray(n.data.data))return n.data}return{data:[],pagination:{total:0,per_page:100,current_page:1,last_page:1}}}async getQuizById(e){return(await this.get(`/quizzes/${e}`)).data}async createQuiz(e){return(await this.post("/quizzes",e)).data}async updateQuiz(e,t){return(await this.put(`/quizzes/${e}`,t)).data}async deleteQuiz(e){await this.put(`/quizzes/${e}`,{is_active:0})}async getQuizResults(e,t){const n=t?this.buildQueryString(t):"",a=await this.get(`/quizzes/${e}/results${n}`);if(a.success&&a.data){if(Array.isArray(a.data))return{data:a.data,pagination:a.pagination||{total:a.data.length,per_page:100,current_page:1,last_page:1}};if(a.data.data&&Array.isArray(a.data.data))return a.data}return{data:[],pagination:{total:0,per_page:100,current_page:1,last_page:1}}}async getMyQuizResults(e){const t=await this.getMyQuizzes({per_page:100});if(console.log(" getMyQuizResults - quizzes response:",t),!t||!t.data||!Array.isArray(t.data))return console.error(" Invalid quizzes response:",t),[];const n=[];for(const a of t.data)try{const s=await this.getQuizResults(a.id,{per_page:500});if(s&&s.data&&Array.isArray(s.data)){const o=s.data.map(l=>({...l,quiz_title:a.title,quiz_id:a.id}));n.push(...o)}}catch(s){console.error(` Error loading results for quiz ${a.id}:`,s)}return console.log(" getMyQuizResults - total results:",n.length),n}async getQuizStats(e){return(await this.get(`/quizzes/${e}/stats`)).data}async submitQuizResult(e){return(await this.post("/quiz-results",e)).data}}const st=new OF,BF=Object.freeze(Object.defineProperty({__proto__:null,ApiError:Jn,apiService:st},Symbol.toStringTag,{value:"Module"})),G5=he.createContext(void 0),Yr=()=>{const r=he.useContext(G5);if(!r)throw new Error("useAuth must be used within AuthProvider");return r},RF=300*1e3,LF=1800*1e3,Q5=({children:r})=>{const[e,t]=he.useState(null),[n,a]=he.useState(!0),s=he.useRef(null),o=he.useRef(null),l=he.useRef(null),u=he.useRef(!1),c=he.useRef(!0),d=T=>({id:String(T.id),email:T.email,role:T.role,full_name:T.full_name,student_name:T.full_name,phone:T.phone,school:T.school,grade:T.grade,avatar_url:T.avatar_url,is_active:T.is_active}),h=async(T=!1)=>{try{const F=Date.now();if(!T&&s.current&&F-s.current.timestamp<RF){console.log(" Using cached user data");return}console.log(" Fetching user profile from PHP API...");const A=await st.getCurrentUser();if(!A.is_active)throw console.error(" User account is not active"),await _(),new Error("Ti khon  b kha");const R=d(A),I=s.current?.data;!I||I.id!==R.id||I.email!==R.email||I.role!==R.role||I.full_name!==R.full_name||I.is_active!==R.is_active?(console.log(" User data changed, updating state"),t(R)):console.log(" User data unchanged, skipping state update"),s.current={data:R,timestamp:F},console.log(" User profile loaded:",R.email)}catch(F){throw console.error(" fetchUserProfile failed:",F),F instanceof Jn&&F.isUnauthorized()&&g(),F}},g=()=>{console.log(" Clearing auth state"),t(null),s.current=null,st.logout(),o.current&&(clearInterval(o.current),o.current=null)},m=()=>{o.current&&clearInterval(o.current),o.current=setInterval(async()=>{if(c.current)try{console.log(" Refreshing token..."),await st.refreshToken(),console.log(" Token refreshed")}catch(T){console.error(" Token refresh failed:",T),T instanceof Jn&&T.isUnauthorized()&&g()}},LF)},v=()=>{try{const T=new BroadcastChannel("quizbank-auth");l.current=T,T.onmessage=F=>{console.log(" BroadcastChannel message:",F.data),F.data.type==="SIGNED_OUT"?g():F.data.type==="SIGNED_IN"&&b()}}catch{console.warn("BroadcastChannel not supported")}},x=async()=>{if(!(!c.current||u.current)&&document.visibilityState==="visible"&&st.getToken()){console.log(" Tab visible, checking session...");try{const T=Date.now();s.current&&T-s.current.timestamp>30*1e3&&await h(!0)}catch(T){console.error(" Visibility change handler error:",T)}}},b=async()=>{if(u.current){console.log(" Init already in progress");return}if(c.current)try{if(u.current=!0,a(!0),console.log(" Initializing auth..."),st.getToken()){console.log(" Found stored token, verifying...");try{await h(),m(),console.log(" Auth initialized successfully")}catch(F){console.error(" Token verification failed:",F),g()}}else console.log(" No stored token"),t(null)}catch(T){console.error(" Auth init error:",T),g()}finally{c.current&&a(!1),u.current=!1}};he.useEffect(()=>(c.current=!0,b(),v(),document.addEventListener("visibilitychange",x),()=>{c.current=!1,o.current&&clearInterval(o.current),l.current&&l.current.close(),document.removeEventListener("visibilitychange",x)}),[]);const y=async(T,F)=>{try{console.log(" Signing in..."),g();const A=await st.login(T,F);if(!A.user.is_active)return st.logout(),{error:new Error("Ti khon  b kha")};const R=d(A.user);return t(R),s.current={data:R,timestamp:Date.now()},m(),l.current&&l.current.postMessage({type:"SIGNED_IN"}),console.log(" Signed in successfully:",R.email),{error:null}}catch(A){return console.error(" Sign in error:",A),A instanceof Jn?{error:new Error(A.message)}:{error:A}}},S=async T=>{try{console.log(" Signing up...");const F=await st.register({email:T.email,password:T.password,full_name:T.fullName,role:T.role,grade:T.grade,phone:T.phone,school:T.school}),A=d(F.user);return t(A),s.current={data:A,timestamp:Date.now()},m(),l.current&&l.current.postMessage({type:"SIGNED_IN"}),console.log(" Signed up successfully:",A.email),{error:null}}catch(F){return console.error(" Sign up error:",F),F instanceof Jn?{error:new Error(F.message)}:{error:F}}},_=async()=>{try{console.log(" Signing out..."),g(),l.current&&l.current.postMessage({type:"SIGNED_OUT"}),console.log(" Signed out")}catch(T){console.error(" Sign out error:",T),g()}},N=async()=>{try{st.getToken()&&await h(!0)}catch(T){console.error(" Refresh user error:",T)}},j=async T=>{try{const F=await st.updateProfile({full_name:T.full_name,phone:T.phone,school:T.school,grade:T.grade,avatar_url:T.avatar_url}),A=d(F);return t(A),s.current={data:A,timestamp:Date.now()},{error:null}}catch(F){return console.error(" Update profile error:",F),F instanceof Jn?{error:new Error(F.message)}:{error:F}}},E=async(T,F)=>{try{return await st.changePassword(T,F,F),{error:null}}catch(A){return console.error(" Change password error:",A),A instanceof Jn?{error:new Error(A.message)}:{error:A}}};return i.jsx(G5.Provider,{value:{user:e,loading:n,signIn:y,signUp:S,signOut:_,refreshUser:N,updateProfile:j,changePassword:E},children:r})},IF=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:Q5,useAuth:Yr},Symbol.toStringTag,{value:"Module"}));function Gy({onSuccess:r,onClose:e}){const{signIn:t,signUp:n}=Yr(),[a,s]=he.useState("login"),[o,l]=he.useState(""),[u,c]=he.useState(""),[d,h]=he.useState(""),[g,m]=he.useState("student"),[v,x]=he.useState(""),[b,y]=he.useState(!1),[S,_]=he.useState(""),[N,j]=he.useState(""),E=()=>{_(""),j("")},T=async F=>{F.preventDefault(),E(),y(!0);try{if(a==="forgot"){_("Tnh nng qun mt khu ang c pht trin. Vui lng lin h admin."),y(!1);return}if(a==="register"){if(!d.trim()){_("Vui lng nhp h tn"),y(!1);return}const R=await n({email:o,password:u,fullName:d.trim(),role:g,grade:g==="student"&&v?v:void 0});R.error?_(R.error.message||"ng k tht bi"):(j(g==="teacher"?"ng k thnh cng! Ti khon gio vin cn admin ph duyt.":"ng k thnh cng!"),setTimeout(()=>{s("login"),E()},2e3)),y(!1);return}const A=await t(o,u);A.error?_(A.error.message||"ng nhp tht bi"):(j("ng nhp thnh cng!"),setTimeout(()=>{r?.(),e?.()},500))}catch(A){_(A.message||"C li xy ra")}finally{y(!1)}};return i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md mx-auto",children:[i.jsxs("h2",{className:"text-xl font-bold text-center mb-4",children:[a==="login"&&"ng nhp",a==="register"&&"ng k",a==="forgot"&&"Qun mt khu"]}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),i.jsx("input",{type:"email",value:o,onChange:F=>l(F.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"email@example.com"})]}),a!=="forgot"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mt khu"}),i.jsx("input",{type:"password",value:u,onChange:F=>c(F.target.value),required:!0,minLength:6,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ti thiu 6 k t"})]}),a==="register"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"H tn"}),i.jsx("input",{type:"text",value:d,onChange:F=>h(F.target.value),required:!0,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Nguyn Vn A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Vai tr"}),i.jsxs("select",{value:g,onChange:F=>m(F.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"student",children:"Hc sinh"}),i.jsx("option",{value:"teacher",children:"Gio vin"})]})]}),g==="student"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lp (khng bt buc)"}),i.jsx("input",{type:"text",value:v,onChange:F=>x(F.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"VD: 12A1, 11B2"})]})]}),S&&i.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:S}),N&&i.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-green-600 text-sm flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),N]}),i.jsx("button",{type:"submit",disabled:b,className:"w-full py-2.5 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:b?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"ang x l..."]}):i.jsxs(i.Fragment,{children:[a==="login"&&"ng nhp",a==="register"&&"ng k",a==="forgot"&&"Gi email"]})})]}),i.jsxs("div",{className:"mt-4 text-center space-y-2",children:[a==="login"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{s("register"),E()},className:"text-indigo-600 text-sm hover:underline",children:"Cha c ti khon? ng k"}),i.jsx("br",{}),i.jsx("button",{onClick:()=>{s("forgot"),E()},className:"text-gray-500 text-sm hover:underline",children:"Qun mt khu?"})]}),a==="register"&&i.jsx("button",{onClick:()=>{s("login"),E()},className:"text-indigo-600 text-sm hover:underline",children:" c ti khon? ng nhp"}),a==="forgot"&&i.jsx("button",{onClick:()=>{s("login"),E()},className:"text-indigo-600 text-sm hover:underline",children:"Quay li ng nhp"}),e&&i.jsx("div",{className:"pt-2 border-t mt-3",children:i.jsx("button",{onClick:e,className:"text-gray-500 text-sm hover:underline",children:"ng"})})]})]})}const Xr=()=>{const{user:r,loading:e,signOut:t,forceLogout:n}=Yr(),[a,s]=he.useState(!1),[o,l]=he.useState(!1),u=Vn(),c=async()=>{await t(),u("/")};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 shadow-lg sticky top-0 z-40",children:i.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs(jt,{to:"/",className:"group flex items-center gap-2",children:[i.jsx("div",{className:"text-3xl font-extrabold bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent drop-shadow-lg transform group-hover:scale-105 transition-transform duration-200",children:"Hc Ton AI"}),i.jsx("svg",{className:"w-6 h-6 text-yellow-300 group-hover:rotate-12 transition-transform duration-200",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]})}),i.jsx("div",{className:"flex items-center space-x-2",children:e?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"})}):r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[i.jsxs(jt,{to:"/hoc-online",className:"px-3 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200 flex items-center gap-1.5 backdrop-blur-sm",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Hc online"]}),(r.role==="teacher"||r.role==="admin")&&i.jsxs(i.Fragment,{children:[i.jsx(jt,{to:"/quiz-bank",className:"px-3 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:"Ngn hng "}),i.jsxs(jt,{to:"/create",className:"px-3 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200 flex items-center gap-1.5 backdrop-blur-sm",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})," AI"]}),i.jsxs(jt,{to:"/teacher-results",className:"px-3 py-2 text-sm font-medium bg-purple-500/90 hover:bg-purple-600 text-white rounded-lg transition-all duration-200 backdrop-blur-sm flex items-center gap-1.5",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Gio vin"]})]}),r.role==="student"&&i.jsx(i.Fragment,{children:i.jsx(jt,{to:"/practice",className:"px-3 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:"Luyn tp"})}),i.jsx(jt,{to:"/online-exam",className:"px-3 py-2 text-sm font-medium text-white/90 hover:text-white hover:bg-white/20 rounded-lg transition-all duration-200 backdrop-blur-sm",children:"Thi online"})]}),i.jsxs("div",{className:"hidden md:block text-sm text-white text-right bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[i.jsx("div",{className:"font-semibold text-white truncate max-w-[150px]",children:r.role==="student"&&r.student_name?r.student_name:r.email?.split("@")[0]||"User"}),i.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full inline-block mt-1 font-medium ${r.role==="admin"?"bg-red-500/90 text-white":r.role==="teacher"?"bg-blue-500/90 text-white":"bg-green-500/90 text-white"}`,children:r.role==="admin"?"Admin":r.role==="teacher"?"Gio vin":"Hc sinh"})]}),r.role==="admin"&&i.jsx(jt,{to:"/admin",className:"hidden md:block px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600 shadow-md hover:shadow-lg transition-all duration-200",children:"Admin"}),i.jsx("button",{onClick:c,className:"hidden md:block p-2.5 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all duration-200",title:"ng xut",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),i.jsx("button",{onClick:()=>l(!o),className:"md:hidden p-2 text-white hover:bg-white/20 rounded-lg transition-colors","aria-label":"Menu",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}):i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("button",{onClick:()=>s(!0),className:"p-2.5 text-white hover:bg-white/20 rounded-lg backdrop-blur-sm transition-all duration-200",title:"ng nhp",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})})})})})]})})}),o&&r&&i.jsx("div",{className:"md:hidden bg-indigo-700 border-t border-indigo-500 shadow-lg",children:i.jsxs("div",{className:"container mx-auto px-4 py-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-indigo-500",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-white font-bold",children:(r.student_name||r.email||"U")[0].toUpperCase()}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-semibold",children:r.role==="student"&&r.student_name?r.student_name:r.email?.split("@")[0]||"User"}),i.jsx("div",{className:`text-xs px-2 py-0.5 rounded-full inline-block font-medium ${r.role==="admin"?"bg-red-500 text-white":r.role==="teacher"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:r.role==="admin"?"Admin":r.role==="teacher"?"Gio vin":"Hc sinh"})]})]}),i.jsx(jt,{to:"/hoc-online",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" Hc online"}),(r.role==="teacher"||r.role==="admin")&&i.jsxs(i.Fragment,{children:[i.jsx(jt,{to:"/teacher-results",onClick:()=>l(!1),className:"block px-3 py-2 text-white bg-purple-500/90 hover:bg-purple-600 rounded-lg font-medium",children:" Gio vin"}),i.jsx(jt,{to:"/quiz-bank",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" Ngn hng "}),i.jsx(jt,{to:"/create",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" AI Generator"})]}),r.role==="student"&&i.jsxs(i.Fragment,{children:[i.jsx(jt,{to:"/practice",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" Luyn tp"}),i.jsx(jt,{to:"/progress",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" Tin "})]}),i.jsx(jt,{to:"/online-exam",onClick:()=>l(!1),className:"block px-3 py-2 text-white hover:bg-white/10 rounded-lg",children:" Thi online"}),r.role==="admin"&&i.jsx(jt,{to:"/admin",onClick:()=>l(!1),className:"block px-3 py-2 text-white bg-red-500/50 hover:bg-red-500 rounded-lg",children:"Admin"}),i.jsxs("button",{onClick:()=>{l(!1),c()},className:"w-full px-3 py-2 text-white bg-white/10 hover:bg-white/20 rounded-lg mt-2 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"ng xut"]})]})}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx(Gy,{onSuccess:()=>s(!1),onClose:()=>s(!1)})})]})},qc=()=>{window.scrollTo({top:0,behavior:"smooth"})},Qr=()=>{const r=new Date().getFullYear();return i.jsx("footer",{className:"bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100 text-gray-800",children:i.jsxs("div",{className:"container mx-auto px-6 py-8",children:[i.jsxs("div",{className:"flex flex-wrap justify-center gap-6 mb-6",children:[i.jsx(jt,{to:"/",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Trang ch"}),i.jsx(jt,{to:"/about",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Gii thiu"}),i.jsx(jt,{to:"/huong-dan",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Hng dn"}),i.jsx(jt,{to:"/sitemap",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Sitemap"}),i.jsx(jt,{to:"/terms",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Quy nh"}),i.jsx(jt,{to:"/contact",onClick:qc,className:"hover:text-indigo-600 font-medium transition-colors",children:"Lin h"}),i.jsx("a",{href:"/rss.xml",target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-600 font-medium transition-colors",children:"RSS Feed"})]}),i.jsxs("div",{className:"text-center text-sm text-gray-600 border-t border-indigo-200 pt-6",children:[i.jsxs("p",{children:[" ",r," Hc Ton AI. Pht trin bi Thy  v AI."]}),i.jsx("p",{className:"mt-1",children:"Version 1.1.5 - Nn tng hc tp ton hc thng minh"})]})]})})};function Xi({children:r,allowedRoles:e=["student","teacher","admin"]}){const{user:t,loading:n,signOut:a}=Yr(),s=Vn(),[o,l]=he.useState(!1),[u,c]=he.useState(!1);he.useEffect(()=>{console.log(" SimpleProtectedRoute - State:",{loading:n,hasUser:!!t,userRole:t?.role,userEmail:t?.email,allowedRoles:e})},[n,t,e]),he.useEffect(()=>{let h;return n?h=setTimeout(()=>l(!0),5e3):l(!1),()=>clearTimeout(h)},[n]),he.useEffect(()=>{let h;return n?h=setTimeout(()=>c(!0),1e4):c(!1),()=>clearTimeout(h)},[n]);const d=async()=>{await a(),s("/"),window.location.reload()};return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md px-4",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"ang ti..."}),u&&i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[i.jsx("p",{className:"text-yellow-800 text-sm mb-2",children:" Qu trnh ti ang mt nhiu thi gian hn bnh thng."}),i.jsx("p",{className:"text-yellow-700 text-xs",children:"C th do kt ni mng chm hoc server ang bn. Vui lng kim tra:"}),i.jsxs("ul",{className:"text-yellow-700 text-xs text-left mt-2 space-y-1",children:[i.jsx("li",{children:" Kt ni internet ca bn"}),i.jsx("li",{children:" Server c ang hot ng khng (m Console  xem logs)"}),i.jsx("li",{children:" Th clear cache v refresh li trang"})]})]}),o&&i.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm transition-colors",children:" B treo? Bm  reset"})]})}):t?e.includes(t.role)?i.jsx(i.Fragment,{children:r}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg mb-4",children:[i.jsx("h2",{className:"font-bold text-lg mb-2",children:"Khng c quyn truy cp"}),i.jsxs("p",{children:["Trang ny yu cu vai tr: ",e.join(", ")]}),i.jsxs("p",{className:"mt-2",children:["Vai tr ca bn: ",t.role]})]}),i.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"V trang ch"})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Yu cu ng nhp"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Vui lng ng nhp  tip tc"})]}),i.jsx(Gy,{onSuccess:()=>{},onClose:()=>s("/")})]})})}function nS({children:r,allowedEmails:e=["lvdoqt@gmail.com"]}){const{user:t,loading:n}=Yr(),a=Vn();return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang kim tra quyn Admin..."})]})}):t?e.includes(t.email)?i.jsx(i.Fragment,{children:r}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-6 py-4 rounded-lg mb-4",children:[i.jsx("h2",{className:"font-bold text-lg mb-2",children:"Khng c quyn Admin"}),i.jsx("p",{children:"Ti khon ca bn khng c quyn truy cp trang Admin."})]}),i.jsx("button",{onClick:()=>a("/"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"V trang ch"})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-6 py-4 rounded-lg mb-4",children:[i.jsx("h2",{className:"font-bold text-lg mb-2",children:"Yu cu ng nhp Admin"}),i.jsx("p",{children:"Vui lng ng nhp vi ti khon Admin"})]}),i.jsx("button",{onClick:()=>a("/"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"V trang ch"})]})})}const zF=()=>{const[r,e]=he.useState([]),[t,n]=he.useState(!0);he.useEffect(()=>{(async()=>{try{const d=(await(await fetch("/thongbao.json")).json()).items||[];d.sort((h,g)=>{const m=new Date(h.date);return new Date(g.date).getTime()-m.getTime()}),e(d)}catch(u){console.error("Error loading data:",u)}finally{n(!1)}})()},[]);const a=l=>new Date(l).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),s=l=>{const u=["bg-blue-50 border-l-blue-500 hover:bg-blue-100","bg-purple-50 border-l-purple-500 hover:bg-purple-100","bg-green-50 border-l-green-500 hover:bg-green-100","bg-orange-50 border-l-orange-500 hover:bg-orange-100","bg-pink-50 border-l-pink-500 hover:bg-pink-100","bg-cyan-50 border-l-cyan-500 hover:bg-cyan-100","bg-indigo-50 border-l-indigo-500 hover:bg-indigo-100","bg-rose-50 border-l-rose-500 hover:bg-rose-100"];return u[l%u.length]},o=l=>{const u=["bg-blue-500","bg-purple-500","bg-green-500","bg-orange-500","bg-pink-500","bg-cyan-500","bg-indigo-500","bg-rose-500"];return u[l%u.length]};return t?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})}):i.jsx("div",{className:"max-w-5xl mx-auto",children:r.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500",children:i.jsx("p",{children:"Cha c tin tc hoc thng bo no."})}):i.jsx("div",{className:"space-y-3",children:r.map((l,u)=>{const c=l.link?"a":"div",d=l.link?{href:l.link,target:"_blank",rel:"noopener noreferrer",className:`flex items-start gap-4 p-4 rounded-lg border-l-4 transition-all ${s(u)} cursor-pointer group`}:{className:`flex items-start gap-4 p-4 rounded-lg border-l-4 transition-all ${s(u)}`};return i.jsxs(c,{...d,children:[i.jsx("div",{className:`flex-shrink-0 w-8 h-8 ${o(u)} rounded-full flex items-center justify-center text-white font-bold text-sm shadow-md`,children:u+1}),l.icon&&i.jsx("div",{className:"flex-shrink-0 text-2xl",children:l.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-1",children:[i.jsx("h4",{className:"font-bold text-gray-900 text-base group-hover:text-indigo-600 transition-colors",children:l.title}),i.jsx("span",{className:"flex-shrink-0 text-xs text-gray-500 font-medium",children:a(l.date)})]}),i.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:l.content}),l.link&&i.jsx("div",{className:"mt-2 text-xs text-indigo-600 font-medium group-hover:underline",children:"Xem chi tit "})]})]},l.id)})})})};class PF{async getQuizzes(e){const t=st.buildQueryString(e||{});return(await st.get(`/quizzes${t}`)).data||{data:[],total:0,page:1,per_page:20,total_pages:0}}async getMyQuizzes(e){const t=st.buildQueryString(e||{});return(await st.get(`/quizzes/my${t}`)).data||{data:[],total:0,page:1,per_page:20,total_pages:0}}async getQuiz(e){return(await st.get(`/quizzes/${e}`)).data}async getQuizBySlug(e){return(await st.get(`/quizzes/slug/${e}`)).data}async createQuiz(e){let t;if(e.questions.length>0){const a=e.questions[0];typeof a=="number"||"question_id"in a?t=e.questions.map((s,o)=>typeof s=="number"?{question_id:s,order_index:o+1,points:1}:{...s,question_id:Number(s.question_id),order_index:s.order_index??o+1,points:s.points??1}):typeof a=="object"&&"question"in a?t=e.questions.map((s,o)=>({type:s.type||"mcq",question:s.question||s.question_text||"",option_a:s.option_a||"",option_b:s.option_b||"",option_c:s.option_c||"",option_d:s.option_d||"",correct_option:s.correct_option||"",explanation:s.explanation||"",order_index:o+1,points:s.points||1})):t=e.questions}else t=[];const n={...e,questions:t};console.log(" QuizApiService.createQuiz - Sending request:",JSON.stringify(n,null,2));try{const a=await st.post("/quizzes",n);return console.log(" QuizApiService.createQuiz - Response:",a),a.data}catch(a){throw console.error(" QuizApiService.createQuiz - Error:",a),a}}async updateQuiz(e,t){return(await st.put(`/quizzes/${e}`,t)).data}async deleteQuiz(e){await st.delete(`/quizzes/${e}`)}async getOverallStats(){return(await st.get("/quizzes/stats")).data||{}}async getQuizQuestions(e){return(await st.get(`/quizzes/${e}/questions`)).data||[]}async verifyPassword(e,t){return(await st.post(`/quizzes/${e}/verify-password`,{password:t})).data}async startQuiz(e,t){return(await st.post(`/quizzes/${e}/start`,t)).data}async getResult(e){return(await st.get(`/results/${e}`)).data}async getMyResults(e){const t=st.buildQueryString(e||{});return(await st.get(`/results/my${t}`)).data||{data:[],total:0,page:1,per_page:20,total_pages:0}}async saveAnswer(e,t,n){await st.post(`/results/${e}/answer`,{question_id:t,answer:n})}async submitQuiz(e,t){return(await st.post(`/results/${e}/submit`,t)).data}async getQuizResults(e,t){const n=st.buildQueryString(t||{});return(await st.get(`/quizzes/${e}/results${n}`)).data||{data:[],total:0,page:1,per_page:20,total_pages:0}}async getQuizStats(e){return(await st.get(`/quizzes/${e}/stats`)).data}generateSlug(e){const t=Date.now().toString(36),n=Math.random().toString(36).substring(2,6);return`${e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(//g,"d").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").substring(0,50)}-${t}${n}`}formatTimeLimit(e){if(!e)return"Khng gii hn";if(e<60)return`${e} pht`;const t=Math.floor(e/60),n=e%60;return n===0?`${t} gi`:`${t} gi ${n} pht`}formatTimeSpent(e){if(!e)return"0 giy";if(e<60)return`${e} giy`;const t=Math.floor(e/60),n=e%60;if(t<60)return n>0?`${t} pht ${n} giy`:`${t} pht`;const a=Math.floor(t/60),s=t%60;return s>0?`${a} gi ${s} pht`:`${a} gi`}calculateScore(e,t){return t===0?0:Math.round(e/t*100)}getScoreBadgeColor(e){return e>=80?"green":e>=60?"blue":e>=40?"yellow":"red"}getStatusBadge(e){switch(e){case"draft":return{label:"Nhp",color:"gray"};case"published":return{label:" xut bn",color:"green"};case"archived":return{label:" lu tr",color:"red"};case"in_progress":return{label:"ang lm",color:"blue"};case"submitted":return{label:" np",color:"green"};default:return{label:"Khng xc nh",color:"gray"}}}isQuizAvailable(e){const t=new Date;return e.status!=="published"?{available:!1,reason:" thi cha c xut bn"}:e.start_time&&new Date(e.start_time)>t?{available:!1,reason:" thi cha n gi m"}:e.end_time&&new Date(e.end_time)<t?{available:!1,reason:" thi  ht hn"}:{available:!0}}validateQuiz(e){const t=[];if((!e.title||e.title.trim().length<3)&&t.push("Tiu  phi c t nht 3 k t"),(!e.questions||e.questions.length===0)&&t.push(" thi phi c t nht 1 cu hi"),e.time_limit_minutes&&e.time_limit_minutes<1&&t.push("Thi gian lm bi phi ln hn 0"),e.max_attempts&&e.max_attempts<1&&t.push("S ln lm bi phi ln hn 0"),e.passing_score&&(e.passing_score<0||e.passing_score>100)&&t.push("im t phi t 0 n 100"),e.start_time&&e.end_time){const n=new Date(e.start_time),a=new Date(e.end_time);n>=a&&t.push("Thi gian kt thc phi sau thi gian bt u")}return{valid:t.length===0,errors:t}}getQuizUrl(e){return`${window.location.origin}/#/online-exam/${e.slug}`}async copyQuizUrl(e){try{const t=this.getQuizUrl(e);return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy URL:",t),!1}}}const Va=new PF,qF=()=>{const[r,e]=he.useState([]),[t,n]=he.useState(!0);he.useEffect(()=>{a()},[]);const a=async()=>{try{console.log(" RecentQuizzes: Fetching quizzes...");const s=await Va.getQuizzes({page:1,per_page:5});console.log(" RecentQuizzes: Raw response:",s);let o=[];Array.isArray(s)?(console.log(" RecentQuizzes: Response is array"),o=s):s&&typeof s=="object"&&(Array.isArray(s.data)?(console.log(" RecentQuizzes: Response.data is array"),o=s.data):s.data&&Array.isArray(s.data.data)?(console.log(" RecentQuizzes: Response.data.data is array (nested)"),o=s.data.data):console.error(" RecentQuizzes: Unknown response structure:",s));const l=o.filter(u=>u.is_active===1||u.is_active===!0);console.log(" RecentQuizzes: Active quizzes:",l.length,"items"),e(l.slice(0,5))}catch(s){console.error(" RecentQuizzes: Error loading quizzes:",s)}finally{n(!1)}};return t?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-3 border-indigo-600 border-t-transparent rounded-full animate-spin"})}):r.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:i.jsx("p",{children:"Cha c  thi no."})}):i.jsxs("div",{className:"space-y-3",children:[r.map((s,o)=>i.jsx(jt,{to:`/online-exam/${s.slug}`,className:"block bg-gradient-to-r from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 rounded-lg p-4 border border-indigo-200 hover:border-indigo-400 transition-all group",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold text-sm",children:o+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:s.title}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-xs text-gray-600",children:[s.question_count&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.question_count," cu"]}),s.time_limit_minutes&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.time_limit_minutes," pht"]}),s.view_count>0&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),s.view_count]})]})]}),i.jsx("svg",{className:"w-5 h-5 text-indigo-600 group-hover:translate-x-1 transition-transform flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},s.id)),i.jsx(jt,{to:"/online-exam",className:"block text-center py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors",children:"Xem tt c  thi "})]})},$F="https://hoc.io.vn/api";class UF{async fetchAPI(e,t={}){const n=`${$F}${e}`,a=await fetch(n,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.message||`HTTP error! status: ${a.status}`)}const s=await a.json();return s.data||s}async getRecentLessons(e=4){return this.fetchAPI(`/lessons/recent?limit=${e}`)}async getPublishedLessonsBySubject(e){return this.fetchAPI(`/lessons/published/subject/${e}`)}async getPublishedLessonsByChapter(e){return this.fetchAPI(`/lessons/published/chapter/${e}`)}async getLessonById(e){try{return await this.fetchAPI(`/lessons/${e}`)}catch(t){if(t instanceof Error&&t.message.includes("404"))return null;throw t}}async getLessonBySlug(e){try{return await this.fetchAPI(`/lessons/slug/${e}`)}catch(t){if(t instanceof Error&&t.message.includes("404"))return null;throw t}}async getAdjacentLessons(e){return this.fetchAPI(`/lessons/${e}/adjacent`)}async getLessonsInSameChapter(e){return this.fetchAPI(`/lessons/${e}/chapter-lessons`)}async getVideos(e){return this.fetchAPI(`/lessons/${e}/videos`)}async getDocuments(e){return this.fetchAPI(`/lessons/${e}/documents`)}async getContent(e){return this.fetchAPI(`/lessons/${e}/content`)}async getExercises(e){return this.fetchAPI(`/lessons/${e}/exercises`)}async incrementDownload(e){await this.fetchAPI(`/documents/${e}/download`,{method:"POST"})}async getOrCreateProgress(e){const t=localStorage.getItem("auth_token");return this.fetchAPI(`/lessons/${e}/progress`,{headers:{Authorization:`Bearer ${t}`}})}async updateProgress(e,t){const n=localStorage.getItem("auth_token");return this.fetchAPI(`/lessons/${e}/progress`,{method:"PUT",headers:{Authorization:`Bearer ${n}`},body:JSON.stringify(t)})}async getStudentProgress(){const e=localStorage.getItem("auth_token");return this.fetchAPI("/progress",{headers:{Authorization:`Bearer ${e}`}})}async getAdminLessons(e={}){const t=localStorage.getItem("auth_token"),n=new URLSearchParams;return e.page&&n.append("page",e.page.toString()),e.limit&&n.append("limit",e.limit.toString()),e.chapter_id&&n.append("chapter_id",e.chapter_id.toString()),e.search&&n.append("search",e.search),this.fetchAPI(`/admin/lessons-api.php?path=list&${n}`,{headers:{Authorization:`Bearer ${t}`}})}async getAdminChapters(){const e=localStorage.getItem("auth_token");return(await this.fetchAPI("/admin/lessons-api.php?path=chapters",{headers:{Authorization:`Bearer ${e}`}})).data}async getAdminLesson(e){const t=localStorage.getItem("auth_token");return(await this.fetchAPI(`/admin/lessons-api.php?path=${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async createLesson(e){const t=localStorage.getItem("auth_token");return(await this.fetchAPI("/admin/lessons-api.php?path=create",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify(e)})).data}async updateLesson(e,t){const n=localStorage.getItem("auth_token");return(await this.fetchAPI(`/admin/lessons-api.php?path=${e}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`},body:JSON.stringify(t)})).data}async deleteLesson(e){const t=localStorage.getItem("auth_token");await this.fetchAPI(`/admin/lessons-api.php?path=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})}parseLessonIdFromSlug(e){const t=e.match(/-(\d+)$/);return t?t[1]:null}generateLessonSlug(e,t){return`${e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${t}`}formatDuration(e){if(!e)return"";if(e<60)return`${e} pht`;const t=Math.floor(e/60),n=e%60;return n===0?`${t} gi`:`${t} gi ${n} pht`}getDifficultyText(e){switch(e){case"easy":return"D";case"medium":return"Trung bnh";case"hard":return"Kh";default:return""}}getDifficultyColor(e){switch(e){case"easy":return"bg-green-500/90 text-white";case"medium":return"bg-yellow-500/90 text-white";case"hard":return"bg-red-500/90 text-white";default:return"bg-gray-500/90 text-white"}}}const _n=new UF,HF=()=>{const[r,e]=he.useState([]),[t,n]=he.useState(!0);he.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await _n.getRecentLessons(5);e(l||[])}catch(l){console.error("Error loading recent lessons:",l)}finally{n(!1)}};if(t)return i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"w-8 h-8 border-3 border-green-600 border-t-transparent rounded-full animate-spin"})});if(r.length===0)return i.jsx("div",{className:"text-center py-8 text-gray-500",children:i.jsx("p",{children:"Cha c bi hc no."})});const s=l=>{switch(l){case"easy":return"bg-green-100 text-green-700 border-green-300";case"medium":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"hard":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},o=l=>{switch(l){case"easy":return"D";case"medium":return"Trung bnh";case"hard":return"Kh";default:return"Cha xc nh"}};return i.jsxs("div",{className:"space-y-3",children:[r.map((l,u)=>i.jsx(jt,{to:`/hoc-online/${l.slug||l.id}`,className:"block bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100 rounded-lg p-4 border border-green-200 hover:border-green-400 transition-all group",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold text-sm",children:u+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-bold text-gray-900 group-hover:text-green-600 transition-colors line-clamp-1",children:l.name}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[l.difficulty_level&&i.jsx("span",{className:`text-xs px-2 py-1 rounded border ${s(l.difficulty_level)}`,children:o(l.difficulty_level)}),l.duration_minutes&&i.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),l.duration_minutes," pht"]}),l.view_count>0&&i.jsxs("span",{className:"text-xs text-gray-600 flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l.view_count]})]}),l.description&&i.jsx("p",{className:"text-xs text-gray-600 mt-2 line-clamp-2",children:l.description})]}),i.jsx("svg",{className:"w-5 h-5 text-green-600 group-hover:translate-x-1 transition-transform flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},l.id)),i.jsx(jt,{to:"/hoc-online",className:"block text-center py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:"Xem tt c bi hc "})]})},VF=()=>{const{user:r,loading:e,signOut:t}=Yr(),[n,a]=he.useState(!1);Vn();const s=async()=>{await t()};return e?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"ang ti..."})]})}):i.jsxs("div",{className:"min-h-screen bg-white",children:[n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx(Gy,{onSuccess:()=>a(!1),onClose:()=>a(!1)})}),r&&i.jsx("section",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-6",children:i.jsx("div",{className:"container mx-auto px-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[i.jsxs("div",{className:"text-center md:text-left flex-1",children:[i.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold",children:["Cho ",r.role==="student"&&r.student_name?r.student_name:r.email.split("@")[0],"!"]}),i.jsx("p",{className:"text-indigo-100 mt-2",children:r.role==="teacher"?"Chc bn c mt ngy lm vic hiu qu!":"Chc bn hc tp vui v v t kt qu cao!"})]}),i.jsx("button",{onClick:s,className:"p-3 bg-white/20 hover:bg-white/30 backdrop-blur-sm border-2 border-white/50 rounded-full transition-all transform hover:scale-105",title:"ng xut",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z",clipRule:"evenodd"})})})]})})}),i.jsxs("section",{className:"relative bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 text-white overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 opacity-20",children:[i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl animate-blob"}),i.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-yellow-500 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"}),i.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000"})]}),i.jsx("div",{className:"relative container mx-auto px-6 py-20 lg:py-32",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{className:"text-center lg:text-left",children:[i.jsxs("h1",{className:"text-5xl lg:text-6xl font-extrabold mb-6 leading-tight",children:["Hc Ton",i.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-400",children:" Ton AI"})]}),i.jsx("p",{className:"text-xl lg:text-2xl text-gray-200 mb-8 leading-relaxed",children:"Nn tng hc tp v thi online Mn Ton hin i dnh cho hc sinh THPT. Vi s h tr nhit tnh ca AI."}),r?r.role==="teacher"||r.role==="admin"?i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsx(jt,{to:"/quiz-bank",className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 rounded-full font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all text-center",children:"Ngn hng cu hi"}),i.jsx(jt,{to:"/create",className:"px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all text-center",children:"To cu hi AI"})]}):r.role==="student"?i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsx(jt,{to:"/online-exam",className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 rounded-full font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all text-center",children:"Thi Online"}),i.jsx(jt,{to:"/hoc-online",className:"px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all text-center",children:"Hc Ton"})]}):null:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[i.jsx("button",{onClick:()=>a("login"),className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 rounded-full font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all text-center",children:"ng nhp"}),i.jsx(jt,{to:"/online-exam",className:"px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all text-center",children:"Thi"}),i.jsx(jt,{to:"/hoc-online",className:"px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all text-center",children:"Hc"})]})]}),i.jsx("div",{className:"hidden lg:block",children:i.jsx("div",{className:"relative",children:i.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl p-8 shadow-2xl border border-white/20",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4 bg-white/20 rounded-xl p-4",children:[i.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Ngn hng cu hi"}),i.jsx("div",{className:"text-sm text-gray-300",children:"5,000+ cu hi"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 bg-white/20 rounded-xl p-4",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-400 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"AI Generator"}),i.jsx("div",{className:"text-sm text-gray-300",children:"To cu hi t ng"})]})]}),i.jsxs("div",{className:"flex items-center gap-4 bg-white/20 rounded-xl p-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-400 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Thi online"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Chm im t ng"})]})]})]})})})})]})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:i.jsx("svg",{viewBox:"0 0 1440 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z",fill:"white"})})})]}),i.jsx("section",{className:"py-16 bg-gradient-to-br from-gray-50 to-blue-50",children:i.jsxs("div",{className:"container mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h3",{className:"text-4xl lg:text-5xl font-bold mb-4",children:i.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Cp nht mi nht"})}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:" thi mi, bi hc mi v thng bo quan trng t h thng"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-2 border-orange-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xl font-bold text-gray-900",children:"Thng bo mi"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Tin tc quan trng"})]})]}),i.jsx(zF,{})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border-2 border-purple-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xl font-bold text-gray-900",children:" thi & Bi hc mi"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Cp nht gn nht"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h5",{className:"text-lg font-semibold text-indigo-600 mb-3 flex items-center gap-2",children:"  thi mi"}),i.jsx(qF,{})]}),i.jsxs("div",{children:[i.jsx("h5",{className:"text-lg font-semibold text-green-600 mb-3 flex items-center gap-2",children:" Bi hc mi"}),i.jsx(HF,{})]})]})]})]})}),i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"container mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:["Tnh nng ",i.jsx("span",{className:"text-indigo-600",children:"ni bt"})]}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"H thng ton din h tr vic hc v ging dy ton hc hiu qu"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"group bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Ngn hng cu hi"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Hng nghn cu hi c phn loi chi tit theo chng trnh hc THPT"}),i.jsx(jt,{to:"/quiz-bank",className:"text-indigo-600 font-semibold hover:underline",children:"Khm ph "})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"AI Generator"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"To cu hi t ng vi cng ngh AI, tit kim thi gian cho gio vin"}),i.jsx(jt,{to:"/create",className:"text-purple-600 font-semibold hover:underline",children:"Th ngay "})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Thi online"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"H thng thi trc tuyn vi chm im t ng v bo co chi tit"}),i.jsx(jt,{to:"/online-exam",className:"text-green-600 font-semibold hover:underline",children:"Thi th "})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-orange-50 to-yellow-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-yellow-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Hc Ton Online"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Hc Ton THPT online y  nht vi video bi ging v ti liu"}),i.jsx(jt,{to:"/hoc-online",className:"text-orange-600 font-semibold hover:underline",children:"Khm ph "})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Luyn tp c nhn"}),i.jsx("p",{className:"text-gray-600 mb-4",children:" xut bi tp ph hp vi trnh  v mc tiu ca tng hc sinh"}),i.jsx(jt,{to:"/practice",className:"text-red-600 font-semibold hover:underline",children:"Luyn ngay "})]}),i.jsxs("div",{className:"group bg-gradient-to-br from-cyan-50 to-blue-50 rounded-2xl p-8 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-2xl flex items-center justify-center text-3xl mb-6 group-hover:scale-110 transition-transform",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Cng ng hc tp"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Kt ni vi gio vin v hc sinh, account ti khon, Nhm Zalo v Facebook."}),i.jsx(jt,{to:"/contact",className:"text-blue-600 font-semibold hover:underline",children:"Lin h "})]})]})]})}),i.jsx(Qr,{})]})},GF=()=>i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[i.jsxs("section",{className:"relative bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white py-20 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-white rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-yellow-300 rounded-full blur-3xl"})]}),i.jsx("div",{className:"container mx-auto px-6 relative z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsxs("h1",{className:"text-5xl lg:text-6xl font-extrabold mb-6",children:["Gii thiu v ",i.jsx("span",{className:"text-yellow-300",children:"Hc Ton AI"})]}),i.jsx("p",{className:"text-xl lg:text-2xl text-indigo-100 leading-relaxed",children:"Nn tng hc tp, thi online v to  thi Ton hc THPT - 2025."})]})})]}),i.jsxs("div",{className:"container mx-auto px-6 py-16",children:[i.jsx("section",{className:"max-w-6xl mx-auto mb-20",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 lg:p-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:" V chng ti"}),i.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-indigo-600 to-purple-600 mx-auto rounded-full"})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed",children:[i.jsx("strong",{className:"text-indigo-600",children:"Hc Ton AI"})," l nn tng hc tp ton hc thng minh c pht trin vi mc tiu h tr gio vin v hc sinh THPT trong vic ging dy v hc tp mn Ton hiu qu hn."]}),i.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed",children:["Chng ti kt hp ",i.jsx("strong",{className:"text-purple-600",children:"cng ngh AI tin tin"})," vi kho cu hi phong ph, c phn loi chi tit theo chng trnh hc, gip ti u ha qu trnh n tp v kim tra."]}),i.jsxs("p",{className:"text-lg text-gray-700 leading-relaxed",children:["Vi hn ",i.jsx("strong",{className:"text-pink-600",children:"5,000+ cu hi"})," v cc tnh nng thng minh, chng ti cam kt mang n tri nghim hc tp tt nht cho cng ng gio dc Vit Nam."]})]}),i.jsx("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl p-8",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xl",children:""}),i.jsx("span",{className:"text-gray-800 font-medium",children:"Min ph 100%"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center text-white text-xl",children:""}),i.jsx("span",{className:"text-gray-800 font-medium",children:"Cp nht lin tc"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-600 rounded-full flex items-center justify-center text-white text-xl",children:""}),i.jsx("span",{className:"text-gray-800 font-medium",children:"H tr 24/7"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center text-white text-xl",children:""}),i.jsx("span",{className:"text-gray-800 font-medium",children:"Cng ngh AI"})]})]})})]})]})}),i.jsxs("section",{className:"max-w-6xl mx-auto mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:" Tnh nng ton din"}),i.jsx("p",{className:"text-xl text-gray-600",children:"H thng y  cc cng c h tr ging dy v hc tp"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ngn hng cu hi"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"5,000+ cu hi c phn loi theo mn hc, chng, bi v dng bi c th. H tr tm kim v lc nhanh chng."}),i.jsx(jt,{to:"/quiz-bank",className:"text-blue-600 font-semibold hover:underline",children:"Khm ph "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"AI Generator"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"To cu hi t ng vi Google Gemini AI. Tit kim thi gian, to  thi a dng v phong ph."}),i.jsx(jt,{to:"/create",className:"text-purple-600 font-semibold hover:underline",children:"Th ngay "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Thi online"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"H thng thi trc tuyn vi chm im t ng, xo trn cu hi, gii hn thi gian v bo v mt khu."}),i.jsx(jt,{to:"/online-exam",className:"text-green-600 font-semibold hover:underline",children:"Thi th "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Qun l kt qu"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"Gio vin xem kt qu chi tit ca hc sinh, xut bo co CSV, phn tch im mnh/yu."}),i.jsx(jt,{to:"/teacher-results",className:"text-orange-600 font-semibold hover:underline",children:"Xem thm "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Hc Ton Online"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"Video bi ging, ti liu hc tp v bi tp thc hnh cho Ton 10, 11, 12."}),i.jsx(jt,{to:"/hoc-online",className:"text-pink-600 font-semibold hover:underline",children:"Hc ngay "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Luyn tp c nhn"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"H thng  xut bi tp ph hp vi trnh , theo di tin  hc tp c nhn."}),i.jsx(jt,{to:"/practice",className:"text-cyan-600 font-semibold hover:underline",children:"Luyn tp "})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Xut  thi"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"Xut  thi ra file DOCX, XLSX, LaTeX vi nhiu  khc nhau. H tr in n chuyn nghip."}),i.jsx("span",{className:"text-red-600 font-semibold",children:"Sp ra mt"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"WordPress Integration"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"To shortcode  nhng cu hi vo website WordPress. D dng tch hp vi blog gio dc."}),i.jsx("span",{className:"text-yellow-600 font-semibold",children:"ang pht trin"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition-all transform hover:-translate-y-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-2xl flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),i.jsx("p",{className:"text-gray-600 mb-3",children:"Qun l cu hi, ngi dng, bi hc. Import hng lot t TXT/JSON."}),i.jsx(jt,{to:"/admin",className:"text-indigo-600 font-semibold hover:underline",children:"Qun tr "})]})]})]}),i.jsxs("section",{className:"max-w-6xl mx-auto mb-20",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:" Dnh cho ai?"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Gii php ton din cho mi i tng trong gio dc"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl p-8 shadow-xl",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Gio vin"}),i.jsxs("ul",{className:"space-y-3 text-blue-50",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"To  thi online/offline nhanh chng"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Qun l ngn hng cu hi c nhn"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Xem kt qu v phn tch hc sinh"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"S dng AI  to cu hi"})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-2xl p-8 shadow-xl",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Hc sinh"}),i.jsxs("ul",{className:"space-y-3 text-green-50",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Lm bi thi online vi chm im t ng"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Luyn tp theo chng trnh hc"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Xem li gii chi tit"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Theo di tin  hc tp"})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-2xl p-8 shadow-xl",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Qun tr vin"}),i.jsxs("ul",{className:"space-y-3 text-purple-50",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Qun l ton b h thng"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Ph duyt cu hi v ngi dng"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Import/Export d liu hng lot"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-300",children:""}),i.jsx("span",{children:"Qun l ni dung hc tp"})]})]})]})]})]}),i.jsx("section",{className:"max-w-6xl mx-auto mb-20",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 lg:p-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:" Cng ngh s dng"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Xy dng trn nn tng cng ngh hin i"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"React 19"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Frontend framework"})]}),i.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"PHP - Mysql"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Backend & Database"})]}),i.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Google Gemini"}),i.jsx("p",{className:"text-sm text-gray-600",children:"AI Generator"})]}),i.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-pink-50 to-pink-100 rounded-xl",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"KaTeX"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Math Rendering"})]})]})]})}),i.jsx("section",{className:"max-w-6xl mx-auto mb-20",children:i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white rounded-3xl shadow-2xl p-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-4xl font-bold mb-6",children:" S mnh & Tm nhn"}),i.jsx("p",{className:"text-xl leading-relaxed mb-8 max-w-4xl mx-auto",children:"Chng ti cam kt mang n gii php hc tp ton hc hin i, gip nng cao cht lng gio dc v to iu kin tt nht cho s pht trin ca th h hc sinh Vit Nam."}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mt-12",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Mc tiu"}),i.jsx("p",{className:"text-indigo-100",children:"Tr thnh nn tng hc Ton m cc Thy, C v hc sinh tin dng."})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Gi tr"}),i.jsx("p",{className:"text-indigo-100",children:"Min ph, cht lng, d s dng"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Cam kt"}),i.jsx("p",{className:"text-indigo-100",children:"Cp nht v ci tin lin tc"})]})]})]})})}),i.jsx("section",{className:"max-w-4xl mx-auto text-center",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-12",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Sn sng bt u?"}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Tham gia cng hng nghn gio vin v hc sinh ang s dng Hc Ton AI"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(jt,{to:"/",className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full font-bold text-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"Bt u ngay"}),i.jsx(jt,{to:"/contact",className:"px-8 py-4 border-2 border-indigo-600 text-indigo-600 rounded-full font-bold text-lg hover:bg-indigo-50 transition-all",children:"Lin h h tr"})]})]})})]})]}),QF=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:i.jsx("div",{className:"container mx-auto px-6 py-12",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-4 text-center",children:[i.jsx("span",{className:"text-indigo-600",children:"Lin h"})," vi chng ti"]}),i.jsx("p",{className:"text-gray-600 text-center mb-10",children:"Chng ti lun sn sng lng nghe v h tr bn"}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6 text-center",children:"Thng tin lin h"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-indigo-100 p-3 rounded-lg mr-4",children:i.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Admin"}),i.jsx("p",{className:"text-gray-600",children:"Thy "})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-red-100 p-3 rounded-lg mr-4",children:i.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Email"}),i.jsx("a",{href:"mailto:lvdoqt@gmail.com",className:"text-indigo-600 hover:text-indigo-700 hover:underline",children:"lvdoqt@gmail.com"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:i.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2.546 20.2c-.156.468.282.906.75.75l3.032-.892A9.957 9.957 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2zm0 18c-1.84 0-3.54-.62-4.898-1.66l-.348-.27-2.826.831.831-2.826-.27-.348A7.955 7.955 0 014 12c0-4.411 3.589-8 8-8s8 3.589 8 8-3.589 8-8 8z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Zalo"}),i.jsxs("a",{href:"https://zalo.me/g/fsqoki758",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:["Nhm Zalo",i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:i.jsx("svg",{className:"w-6 h-6 text-blue-700",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Facebook"}),i.jsxs("a",{href:"https://www.facebook.com/groups/1173214068210138",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:["Hc Ton AI",i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"bg-purple-100 p-3 rounded-lg mr-4",children:i.jsxs("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"a ch"}),i.jsx("p",{className:"text-gray-600",children:"THPT Quc Thi - An Giang"})]})]})]}),i.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" H tr nhanh"}),i.jsx("p",{className:"text-gray-700 text-sm",children:" c h tr nhanh nht, vui lng lin h qua Zalo hoc Facebook. Chng ti s phn hi trong vng 24 gi."})]})]})})]})})}),WF=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:i.jsx("div",{className:"container mx-auto px-6 py-12",children:i.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-8 lg:p-12",children:[i.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-6 text-center",children:[i.jsx("span",{className:"text-indigo-600",children:"Quy nh"})," s dng"]}),i.jsxs("div",{className:"prose prose-lg max-w-none",children:[i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" iu khon chung"}),i.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:"Khi s dng Hc Ton AI, bn ng  tun th cc iu khon v quy nh sau y. Vui lng c k trc khi s dng dch v."})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Ti khon ngi dng"}),i.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Mi ngi dng ch c to mt ti khon duy nht"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Bn c trch nhim bo mt thng tin ng nhp ca mnh"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Khng chia s ti khon cho ngi khc s dng"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-blue-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Gio vin cn c m mi hp l  ng k ti khon"})]})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" S dng ni dung"}),i.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-purple-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Ni dung cu hi v bi thi ch c s dng cho mc ch hc tp"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-purple-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Khng sao chp, phn phi hoc s dng thng mi m khng c s cho php"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-purple-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Gio vin c quyn to v qun l cu hi ca ring mnh"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-purple-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Ni dung c to bi AI cn c kim tra trc khi s dng"})]})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Hnh vi b cm"}),i.jsxs("div",{className:"bg-red-50 p-6 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-red-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"S dng h thng  gian ln trong thi c"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-red-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Tn cng, ph hoi hoc lm gin on hot ng ca h thng"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-red-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"ng ti ni dung vi phm php lut, phn cm hoc khng ph hp"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-red-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Thu thp thng tin ngi dng khc tri php"})]})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Bo mt thng tin"}),i.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:"Chng ti cam kt bo v thng tin c nhn ca ngi dng:"}),i.jsxs("div",{className:"bg-green-50 p-6 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Thng tin c nhn c m ha v bo mt"})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Khng chia s thng tin cho bn th ba m khng c s ng "})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-600 mr-2",children:""}),i.jsx("p",{className:"text-gray-700",children:"Kt qu thi v d liu hc tp c lu tr an ton"})]})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Trch nhim"}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Hc Ton AI khng chu trch nhim v:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mt-3 ml-4",children:[i.jsx("li",{children:"S gin on dch v do li k thut hoc bo tr"}),i.jsx("li",{children:" chnh xc tuyt i ca ni dung c to bi AI"}),i.jsx("li",{children:"Thit hi pht sinh t vic s dng sai mc ch"}),i.jsx("li",{children:"Mt mt d liu do li ngi dng"})]})]}),i.jsxs("section",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-8 rounded-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:" Lin h"}),i.jsxs("p",{className:"text-gray-700 leading-relaxed",children:["Nu c thc mc v quy nh s dng, vui lng lin h vi chng ti qua trang ",i.jsx(jt,{to:"/contact",className:"text-indigo-600 font-semibold hover:underline",children:"Lin h"}),"."]})]}),i.jsx("div",{className:"mt-8 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("strong",{children:"Lu :"})," Chng ti c quyn cp nht quy nh ny bt k lc no. Vic tip tc s dng dch v sau khi c thay i ng ngha vi vic bn chp nhn cc iu khon mi."]})})]})]})})}),KF=()=>{const r=[{category:" Trang chung",description:"Dnh cho tt c ngi dng",borderColor:"border-indigo-500",bgGradient:"from-indigo-50 to-blue-50",iconColor:"text-indigo-600",links:[{path:"/",label:"Trang ch",icon:"",description:"Trang ch ca h thng"},{path:"/about",label:"Gii thiu",icon:"",description:"Thng tin v Hc Ton AI"},{path:"/contact",label:"Lin h",icon:"",description:"Thng tin lin h v h tr"},{path:"/terms",label:"iu khon",icon:"",description:"iu khon s dng v chnh sch"},{path:"/sitemap",label:"S  trang",icon:"",description:"Tng quan cu trc website"}]},{category:" Dnh cho Hc sinh",description:"Cc tnh nng hc tp v luyn tp",borderColor:"border-green-500",bgGradient:"from-green-50 to-emerald-50",iconColor:"text-green-600",links:[{path:"/online-exam",label:"Thi online",icon:"",description:"Lm bi thi trc tuyn vi chm im t ng"},{path:"/hoc-online",label:"Hc Ton Online",icon:"",description:"Video bi ging v ti liu hc tp THPT"},{path:"/practice",label:"Luyn tp c nhn",icon:"",description:" xut bi tp ph hp vi trnh "},{path:"/practice/learn",label:"Luyn tp theo chng trnh",icon:"",description:"Hc tun t theo lp, chng, bi, dng ton"},{path:"/practice/custom",label:"Luyn tp ty chnh",icon:"",description:"T to bi luyn tp theo  mun"},{path:"/practice/mistakes",label:"n li cu sai",icon:"",description:"Xem li v luyn tp cc cu  lm sai"},{path:"/progress",label:"Tin  hc tp",icon:"",description:"Theo di kt qu v phn tch im mnh/yu"}]},{category:" Dnh cho Gio vin",description:"Cng c ging dy v qun l",borderColor:"border-purple-500",bgGradient:"from-purple-50 to-pink-50",iconColor:"text-purple-600",links:[{path:"/teacher-results",label:"Qun l kt qu",icon:"",description:"Xem kt qu thi ca hc sinh, xut bo co"},{path:"/quiz-bank",label:"Ngn hng cu hi",icon:"",description:"Chn cu hi t kho 5,000+ cu"},{path:"/create",label:"To cu hi AI",icon:"",description:"S dng AI  to cu hi t ng"}]},{category:" Dnh cho Admin",description:"Qun tr h thng",borderColor:"border-red-500",bgGradient:"from-red-50 to-orange-50",iconColor:"text-red-600",links:[{path:"/admin",label:"Admin Panel",icon:"",description:"Qun l ton b h thng"},{path:"/admin/practice-settings",label:"Ci t luyn tp",icon:"",description:"Cu hnh h thng luyn tp cho hc sinh"}]},{category:" Tnh nng nng cao",description:"Cc cng c b sung",borderColor:"border-cyan-500",bgGradient:"from-cyan-50 to-blue-50",iconColor:"text-cyan-600",links:[{path:"/exam/:slug",label:"Lm bi thi",icon:"",description:"Trang lm bi thi vi m  c th"},{path:"/practice/session/:sessionId",label:"Phin luyn tp",icon:"",description:"Trang lm bi luyn tp"},{path:"/practice/schedule/:scheduleId",label:"Lch luyn tp",icon:"",description:"Lm bi theo lch gio vin giao"},{path:"/hoc-online/:lessonId",label:"Chi tit bi hc",icon:"",description:"Xem ni dung bi hc c th"}]}],e=[{title:"Thi online",icon:"",color:"text-blue-600",bgColor:"bg-blue-50",items:["Chm im t ng","Xo trn cu hi v p n","Gii hn thi gian","Bo v mt khu","Xem li gii chi tit","Nhiu ln thi"]},{title:"Qun l  thi",icon:"",color:"text-purple-600",bgColor:"bg-purple-50",items:["To  tng cu","Import JSON","Chn t ngn hng","Chnh sa  thi","Xa  thi","Xut bo co CSV"]},{title:"Hc tp",icon:"",color:"text-green-600",bgColor:"bg-green-50",items:["Video bi ging","Ti liu PDF","Bi tp thc hnh","Luyn tp c nhn","Theo di tin ","Phn tch kt qu"]},{title:"AI & Cng ngh",icon:"",color:"text-orange-600",bgColor:"bg-orange-50",items:["Google Gemini AI","To cu hi t ng","KaTeX rendering","Cu hi ng","WordPress shortcode","Export DOCX/XLSX"]}];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:i.jsxs("div",{className:"container mx-auto px-6 py-12",children:[i.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white rounded-3xl shadow-2xl p-12 text-center",children:[i.jsx("h1",{className:"text-5xl font-extrabold mb-4",children:" S  trang web"}),i.jsx("p",{className:"text-xl text-indigo-100",children:"Tng quan v cu trc v cc tnh nng ca Hc Ton AI"})]})}),i.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:" Cu trc theo vai tr"}),i.jsx("div",{className:"space-y-8",children:r.map((t,n)=>i.jsxs("div",{className:`border-l-4 ${t.borderColor} pl-6 py-4`,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.category}),i.jsx("p",{className:"text-gray-600",children:t.description})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.links.map((a,s)=>i.jsx(jt,{to:a.path,className:`block p-4 bg-gradient-to-br ${t.bgGradient} rounded-xl hover:shadow-lg transition-all group border border-gray-200`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-3xl group-hover:scale-110 transition-transform",children:a.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:`font-bold ${t.iconColor} mb-1 group-hover:underline`,children:a.label}),i.jsx("p",{className:"text-sm text-gray-600 leading-snug",children:a.description})]})]})},s))})]},n))})]})}),i.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:" Tnh nng chi tit"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((t,n)=>i.jsxs("div",{className:`${t.bgColor} rounded-xl p-6 border-2 border-gray-200`,children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("span",{className:"text-5xl",children:t.icon}),i.jsx("h3",{className:`text-xl font-bold ${t.color} mt-3`,children:t.title})]}),i.jsx("ul",{className:"space-y-2",children:t.items.map((a,s)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:`${t.color} mt-0.5`,children:""}),i.jsx("span",{children:a})]},s))})]},n))})]})}),i.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:" Hnh trnh ngi dng"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h3",{className:"text-xl font-bold text-green-700 mt-3",children:"Hc sinh"})]}),i.jsxs("ol",{className:"space-y-3 text-sm text-gray-700",children:[i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-green-600",children:"1."}),i.jsx("span",{children:"ng k ti khon hc sinh"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-green-600",children:"2."}),i.jsxs("span",{children:["Xem video bi ging ti ",i.jsx("strong",{children:"Hc Online"})]})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-green-600",children:"3."}),i.jsxs("span",{children:["Luyn tp vi ",i.jsx("strong",{children:"Practice"})]})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-green-600",children:"4."}),i.jsxs("span",{children:["Lm bi thi ti ",i.jsx("strong",{children:"Thi Online"})]})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-green-600",children:"5."}),i.jsx("span",{children:"Xem kt qu v tin "})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h3",{className:"text-xl font-bold text-purple-700 mt-3",children:"Gio vin"})]}),i.jsxs("ol",{className:"space-y-3 text-sm text-gray-700",children:[i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-purple-600",children:"1."}),i.jsx("span",{children:"ng k ti khon gio vin"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-purple-600",children:"2."}),i.jsxs("span",{children:["Chn cu hi t ",i.jsx("strong",{children:"Ngn hng"})]})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-purple-600",children:"3."}),i.jsxs("span",{children:["To  thi ti ",i.jsx("strong",{children:"Gio vin"})]})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-purple-600",children:"4."}),i.jsx("span",{children:"Chia s link  thi cho hc sinh"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-purple-600",children:"5."}),i.jsx("span",{children:"Xem kt qu v xut bo co"})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 rounded-xl p-6 border-2 border-red-200",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("span",{className:"text-5xl",children:""}),i.jsx("h3",{className:"text-xl font-bold text-red-700 mt-3",children:"Admin"})]}),i.jsxs("ol",{className:"space-y-3 text-sm text-gray-700",children:[i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-red-600",children:"1."}),i.jsx("span",{children:"ng nhp vi quyn Admin"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-red-600",children:"2."}),i.jsx("span",{children:"Qun l ngi dng"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-red-600",children:"3."}),i.jsx("span",{children:"Thm/sa cu hi"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-red-600",children:"4."}),i.jsx("span",{children:"Import cu hi hng lot"})]}),i.jsxs("li",{className:"flex gap-2",children:[i.jsx("span",{className:"font-bold text-red-600",children:"5."}),i.jsx("span",{children:"Qun l ni dung hc tp"})]})]})]})]})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-900 mb-2",children:"Lu  quan trng"}),i.jsxs("ul",{className:"space-y-2 text-yellow-800",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["Mt s tnh nng yu cu ",i.jsx("strong",{children:"ng nhp"})," v phn quyn ph hp (Gio vin/Hc sinh/Admin)"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["Ti khon ",i.jsx("strong",{children:"Gio vin"})," cn c Admin ph duyt trc khi s dng"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["Ti khon ",i.jsx("strong",{children:"Hc sinh"})," c th s dng ngay sau khi ng k"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{children:""}),i.jsxs("span",{children:["H thng hon ton ",i.jsx("strong",{children:"min ph"})," cho mi ngi dng"]})]})]})]})]})}),i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white rounded-2xl p-8 text-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Sn sng khm ph?"}),i.jsx("p",{className:"text-indigo-100 mb-6",children:"Tham gia cng hng nghn gio vin v hc sinh ang s dng Hc Ton AI"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(jt,{to:"/",className:"px-8 py-3 bg-white text-indigo-600 rounded-full font-bold hover:bg-indigo-50 transition-all transform hover:scale-105",children:"V trang ch"}),i.jsx(jt,{to:"/about",className:"px-8 py-3 bg-white/20 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold hover:bg-white/30 transition-all",children:"Tm hiu thm"})]})]})]})]})})};class XF{constructor(){this.SITE_URL="https://hoc.io.vn",this.SITE_TITLE="Hc Ton AI - Tin tc v Thng bo",this.SITE_DESCRIPTION="Ngn hng cu hi Ton AI - H thng thi online v hc tp Ton THPT (Lp 10, 11, 12)"}async getRecentQuizzes(e=10){try{console.log(" Fetching recent quizzes from API...");let t;try{t=await Va.getQuizzes({page:1,per_page:e}),console.log(" Raw response from quizApiService:",t)}catch(s){return console.warn(" Failed to fetch quizzes:",s.message),[]}let n=[];if(Array.isArray(t))console.log(" Response is array"),n=t;else if(t&&typeof t=="object")if(Array.isArray(t.data))console.log(" Response.data is array"),n=t.data;else if(t.data&&Array.isArray(t.data.data))console.log(" Response.data.data is array (nested)"),n=t.data.data;else return console.error(" Unknown response structure:",t),[];if(!n||n.length===0)return console.warn(" No quizzes found in API response"),[];console.log(" Quizzes array:",n.length,"items");const a=n.filter(s=>"is_active"in s?s.is_active===!0||s.is_active===1:!0);return console.log(" Active quizzes after filter:",a.length,"items"),a.map(s=>({title:` ${s.title}`,link:`${this.SITE_URL}/#/online-exam/${s.slug}`,guid:`${this.SITE_URL}/quiz/${s.id}`,description:s.description||` thi ${s.title}. ${s.question_count||0} cu hi. ${s.time_limit_minutes?`Thi gian: ${s.time_limit_minutes} pht.`:""}`,pubDate:this.formatDate(s.created_at),category:[" thi","Online Exam","Quiz"],icon:""}))}catch(t){return console.error(" Error fetching recent quizzes:",t),[]}}async getRecentLessons(e=10){try{console.log(" Fetching recent lessons from API...");const t=await _n.getRecentLessons(e);return console.log(" Lessons fetched:",t?.length||0,"items"),!t||t.length===0?(console.warn(" No lessons found in API response"),[]):t.map(n=>({title:` ${n.name}`,link:`${this.SITE_URL}/#/hoc-online/${n.slug||n.id}`,guid:`${this.SITE_URL}/lesson/${n.id}`,description:n.description||`Bi hc: ${n.name}. ${n.chapter_name?`Chng: ${n.chapter_name}.`:""} ${n.duration_minutes?`Thi lng: ${n.duration_minutes} pht.`:""}`,pubDate:this.formatDate(n.created_at),category:["Bi hc","Learning","Video"],icon:""}))}catch(t){return console.error(" Error fetching recent lessons:",t.message||t),[]}}async getStaticAnnouncements(){try{return((await(await fetch("/thongbao.json")).json()).items||[]).map(n=>({title:`${n.icon||""} ${n.title}`,link:n.link||this.SITE_URL,guid:`${this.SITE_URL}/announcement/${n.id}`,description:n.content,pubDate:this.formatDate(n.date),category:["Thng bo","Announcement"],icon:n.icon}))}catch(e){return console.error("Error fetching static announcements:",e),[]}}async generateRSSXML(e){const{includeQuizzes:t=!0,includeLessons:n=!0,includeAnnouncements:a=!0,maxItems:s=50}=e||{},[o,l,u]=await Promise.all([t?this.getRecentQuizzes(15):Promise.resolve([]),n?this.getRecentLessons(15):Promise.resolve([]),a?this.getStaticAnnouncements():Promise.resolve([])]);let c=[...o,...l,...u];return c.sort((d,h)=>new Date(h.pubDate).getTime()-new Date(d.pubDate).getTime()),c=c.slice(0,s),this.buildRSSXML(c)}async generateAtomXML(e){const{includeQuizzes:t=!0,includeLessons:n=!0,includeAnnouncements:a=!0,maxItems:s=50}=e||{},[o,l,u]=await Promise.all([t?this.getRecentQuizzes(15):Promise.resolve([]),n?this.getRecentLessons(15):Promise.resolve([]),a?this.getStaticAnnouncements():Promise.resolve([])]);let c=[...o,...l,...u];return c.sort((d,h)=>new Date(h.pubDate).getTime()-new Date(d.pubDate).getTime()),c=c.slice(0,s),this.buildAtomXML(c)}buildRSSXML(e){const t=new Date().toUTCString(),n=e.map(a=>`
    <item>
      <title>${this.escapeXML(a.title)}</title>
      <link>${this.escapeXML(a.link)}</link>
      <guid isPermaLink="false">${this.escapeXML(a.guid)}</guid>
      <description>${this.escapeXML(a.description)}</description>
      <pubDate>${a.pubDate}</pubDate>
      <dc:creator>Hc Ton AI</dc:creator>
      ${a.category.map(s=>`<category>${this.escapeXML(s)}</category>`).join(`
      `)}
    </item>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
     xmlns:atom="http://www.w3.org/2005/Atom"
     xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>${this.SITE_TITLE}</title>
    <link>${this.SITE_URL}</link>
    <description>${this.SITE_DESCRIPTION}</description>
    <language>vi</language>
    <copyright>Copyright ${new Date().getFullYear()} Hc Ton AI. All rights reserved.</copyright>
    <managingEditor>admin@hoc.io.vn (Hc Ton AI)</managingEditor>
    <webMaster>admin@hoc.io.vn (Hc Ton AI)</webMaster>
    <lastBuildDate>${t}</lastBuildDate>
    <category>Education</category>
    <category>Mathematics</category>
    <category>Online Learning</category>
    <ttl>1440</ttl>
    <image>
      <url>${this.SITE_URL}/logo.png</url>
      <title>Hc Ton AI</title>
      <link>${this.SITE_URL}</link>
    </image>
    <atom:link href="${this.SITE_URL}/rss.xml" rel="self" type="application/rss+xml" />
${n}
  </channel>
</rss>`}buildAtomXML(e){const t=new Date().toISOString(),n=e.map(a=>`
  <entry>
    <title>${this.escapeXML(a.title)}</title>
    <link href="${this.escapeXML(a.link)}" rel="alternate" type="text/html"/>
    <id>${this.escapeXML(a.guid)}</id>
    <published>${this.formatDateISO(a.pubDate)}</published>
    <updated>${this.formatDateISO(a.pubDate)}</updated>
    <summary type="text">${this.escapeXML(a.description)}</summary>
    <content type="html"><![CDATA[
      <p>${a.description}</p>
      <p><a href="${a.link}">Xem chi tit </a></p>
    ]]></content>
    <author>
      <name>Hc Ton AI</name>
    </author>
    ${a.category.map(s=>`<category term="${this.escapeXML(s)}"/>`).join(`
    `)}
  </entry>`).join(`
`);return`<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>${this.SITE_TITLE}</title>
  <subtitle>${this.SITE_DESCRIPTION}</subtitle>
  <link href="${this.SITE_URL}/feed.xml" rel="self" type="application/atom+xml"/>
  <link href="${this.SITE_URL}" rel="alternate" type="text/html"/>
  <id>${this.SITE_URL}/</id>
  <updated>${t}</updated>
  <rights>Copyright ${new Date().getFullYear()} Hc Ton AI. All rights reserved.</rights>
  <author>
    <name>Hc Ton AI</name>
    <email>admin@hoc.io.vn</email>
    <uri>${this.SITE_URL}</uri>
  </author>
  <category term="Education"/>
  <category term="Mathematics"/>
  <category term="Online Learning"/>
  <icon>${this.SITE_URL}/favicon.ico</icon>
  <logo>${this.SITE_URL}/logo.png</logo>
${n}
</feed>`}formatDate(e){return new Date(e).toUTCString()}formatDateISO(e){return new Date(e).toISOString()}escapeXML(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}const iS=new XF,YF=()=>{const[r,e]=he.useState(""),[t,n]=he.useState(""),[a,s]=he.useState(!0),[o,l]=he.useState(""),[u,c]=he.useState({totalItems:0,quizCount:0,lessonCount:0,announcementCount:0});he.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0),l(""),console.log(" Starting RSS feed generation...");const[h,g]=await Promise.all([iS.generateRSSXML(),iS.generateAtomXML()]);e(h),n(g);const m=(h.match(/<item>/g)||[]).length,v=(h.match(//g)||[]).length,x=(h.match(//g)||[]).length,b=m-v-x;c({totalItems:m,quizCount:v,lessonCount:x,announcementCount:b}),console.log(" RSS feed generated successfully!",{totalItems:m,quizzes:v,lessons:x,announcements:b})}catch(h){console.error(" Error generating feeds:",h),l(h.message||"Khng th to RSS feed")}finally{s(!1)}};return a?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang to RSS feeds..."})]})}):o?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"max-w-md bg-red-50 border-2 border-red-200 rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-red-800 mb-2",children:"Li"}),i.jsx("p",{className:"text-red-700",children:o}),i.jsx("button",{onClick:d,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Th li"})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 py-12",children:i.jsx("div",{className:"container mx-auto px-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white rounded-3xl shadow-2xl p-8 mb-8",children:[i.jsx("h1",{className:"text-4xl font-extrabold mb-4",children:" RSS Feed Generator"}),i.jsx("p",{className:"text-indigo-100 text-lg mb-4",children:"T ng to RSS feed t  thi mi, bi hc mi v thng bo"}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[i.jsx("div",{className:"text-3xl font-bold",children:u.totalItems}),i.jsx("div",{className:"text-sm text-indigo-100",children:"Tng items"})]}),i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[i.jsx("div",{className:"text-3xl font-bold",children:u.quizCount}),i.jsx("div",{className:"text-sm text-indigo-100",children:"  thi"})]}),i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[i.jsx("div",{className:"text-3xl font-bold",children:u.lessonCount}),i.jsx("div",{className:"text-sm text-indigo-100",children:" Bi hc"})]}),i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[i.jsx("div",{className:"text-3xl font-bold",children:u.announcementCount}),i.jsx("div",{className:"text-sm text-indigo-100",children:" Thng bo"})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-orange-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"RSS 2.0 Feed"}),i.jsx("p",{className:"text-sm text-gray-600",children:"nh dng RSS chun"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("a",{href:`data:application/xml;charset=utf-8,${encodeURIComponent(r)}`,download:"rss.xml",className:"block w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 text-center font-medium",children:" Ti RSS.xml"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText("https://hoc.io.vn/rss.xml"),alert(" copy URL!")},className:"block w-full px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 text-center font-medium",children:" Copy URL"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-blue-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Atom Feed"}),i.jsx("p",{className:"text-sm text-gray-600",children:"nh dng Atom hin i"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("a",{href:`data:application/xml;charset=utf-8,${encodeURIComponent(t)}`,download:"feed.xml",className:"block w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-center font-medium",children:" Ti feed.xml"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText("https://hoc.io.vn/feed.xml"),alert(" copy URL!")},className:"block w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-center font-medium",children:" Copy URL"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 p-4 border-b-2 border-gray-300",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Preview XML"})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"RSS 2.0"}),i.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto max-h-96 font-mono text-sm",children:i.jsx("pre",{children:r})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-3",children:"Atom Feed"}),i.jsx("div",{className:"bg-gray-900 text-blue-400 p-4 rounded-lg overflow-x-auto max-h-96 font-mono text-sm",children:i.jsx("pre",{children:t})})]})]})]}),i.jsx("div",{className:"mt-8 bg-yellow-50 border-2 border-yellow-300 rounded-2xl p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("span",{className:"text-4xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-yellow-900 mb-2",children:"Cch s dng"}),i.jsxs("ol",{className:"space-y-2 text-yellow-800",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold",children:"1."}),i.jsx("span",{children:"Ti file RSS.xml v feed.xml v"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold",children:"2."}),i.jsxs("span",{children:["Upload ln th mc ",i.jsx("code",{className:"bg-yellow-200 px-1 rounded",children:"public/"})," ca website"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold",children:"3."}),i.jsx("span",{children:"Thit lp cron job t ng regenerate mi 1 gi"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-bold",children:"4."}),i.jsxs("span",{children:["Ngi dng c th subscribe qua URL: ",i.jsx("code",{className:"bg-yellow-200 px-1 rounded",children:"https://hoc.io.vn/rss.xml"})]})]})]})]})]})})]})})})},ZF=()=>{const[r,e]=he.useState(!1),[t,n]=he.useState(null),[a,s]=he.useState(null),[o,l]=he.useState(""),u=async()=>{e(!0),l("");try{console.log(" Testing Quiz API..."),console.log("Test 1: Get all quizzes (no params)");const h=await Va.getQuizzes({});console.log("Result 1:",h),console.log("Test 2: Get quizzes (page=1, per_page=20)");const g=await Va.getQuizzes({page:1,per_page:20});console.log("Result 2:",g),console.log("Test 3: Get my quizzes");try{const m=await Va.getMyQuizzes({});console.log("Result 3 (My Quizzes):",m)}catch(m){console.log("My quizzes failed (expected if not logged in):",m.message)}n({all:h,paginated:g,summary:{totalFromAll:h?.total||0,dataLength:h?.data?.length||0,firstQuiz:h?.data?.[0]||null,allQuizzes:h?.data||[]}})}catch(h){console.error(" Quiz API Error:",h),l(`Quiz API Error: ${h.message}`),n({error:h.message,stack:h.stack})}finally{e(!1)}},c=async()=>{e(!0),l("");try{console.log(" Testing Lesson API...");const h=await _n.getRecentLessons(10);console.log("Lessons Result:",h),s({lessons:h,count:h?.length||0})}catch(h){console.error(" Lesson API Error:",h),l(`Lesson API Error: ${h.message}`),s({error:h.message})}finally{e(!1)}},d=async()=>{e(!0),l("");try{const h="https://hoc.io.vn/api";console.log(" Testing Direct Fetch to:",h);const g=await fetch(`${h}/quizzes?page=1&per_page=20`,{headers:{"Content-Type":"application/json"}});console.log("Response status:",g.status),console.log("Response headers:",g.headers);const m=await g.json();console.log("Response data:",m),n({direct:m,status:g.status,url:`${h}/quizzes`})}catch(h){console.error(" Direct Fetch Error:",h),l(`Direct Fetch Error: ${h.message}`),n({error:h.message})}finally{e(!1)}};return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:" Debug RSS API Calls"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Test cc API endpoints  debug vn  RSS khng ly c quizzes"}),i.jsxs("div",{className:"flex gap-4 mb-6",children:[i.jsx("button",{onClick:u,disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium",children:"Test Quiz API (via Service)"}),i.jsx("button",{onClick:d,disabled:r,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:"Test Direct Fetch"}),i.jsx("button",{onClick:c,disabled:r,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 font-medium",children:"Test Lesson API"})]}),r&&i.jsxs("div",{className:"flex items-center gap-3 text-blue-600 mb-4",children:[i.jsx("div",{className:"w-6 h-6 border-3 border-blue-600 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Testing API..."})]}),o&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-red-800 font-medium",children:o})})]}),t&&i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Quiz API Response"}),t.summary&&i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-600",children:t.summary.totalFromAll}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Quizzes"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.summary.dataLength}),i.jsx("div",{className:"text-sm text-gray-600",children:"Data Length"})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold text-purple-600",children:t.summary.firstQuiz?"":""}),i.jsx("div",{className:"text-sm text-gray-600",children:"Has Data"})]})]}),t.summary?.allQuizzes?.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold text-lg mb-3",children:"All Quizzes:"}),i.jsx("div",{className:"space-y-2",children:t.summary.allQuizzes.map((h,g)=>i.jsxs("div",{className:"bg-gray-50 rounded p-3 border border-gray-200",children:[i.jsxs("div",{className:"font-bold text-gray-900",children:[g+1,". ",h.title]}),i.jsxs("div",{className:"text-sm text-gray-600 mt-1 grid grid-cols-2 gap-2",children:[i.jsxs("span",{children:["ID: ",h.id]}),i.jsxs("span",{children:["Slug: ",h.slug]}),i.jsxs("span",{children:["is_active: ",String(h.is_active)]}),i.jsxs("span",{children:["is_public: ",String(h.is_public)]}),i.jsxs("span",{children:["status: ",h.status]}),i.jsxs("span",{children:["created: ",h.created_at]})]})]},g))})]}),i.jsx("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto",children:i.jsx("pre",{className:"text-xs",children:JSON.stringify(t,null,2)})})]}),a&&i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Lesson API Response"}),a.count!==void 0&&i.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-4",children:[i.jsx("div",{className:"text-3xl font-bold text-purple-600",children:a.count}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Lessons"})]}),i.jsx("div",{className:"bg-gray-900 text-blue-400 p-4 rounded-lg overflow-x-auto",children:i.jsx("pre",{className:"text-xs",children:JSON.stringify(a,null,2)})})]}),i.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-lg p-6 mt-6",children:[i.jsx("h3",{className:"font-bold text-yellow-900 mb-2",children:" Hng dn"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-yellow-800",children:[i.jsx("li",{children:"M Developer Console (F12)"}),i.jsx("li",{children:"Click cc nt test pha trn"}),i.jsx("li",{children:"Xem kt qu trong Console v trn trang"}),i.jsx("li",{children:"Kim tra response c cha quizzes khng"}),i.jsx("li",{children:"Kim tra cc field is_active, is_public, status"})]})]})]})})},JF=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 flex items-center justify-center px-6",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-9xl font-extrabold text-white opacity-20 select-none",children:"404"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"text-6xl animate-bounce",children:""})})]}),i.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-lg rounded-3xl p-8 lg:p-12 border border-white/20 shadow-2xl max-w-2xl mx-auto",children:[i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-white mb-4",children:"Oops! Trang khng tn ti"}),i.jsx("p",{className:"text-xl text-gray-200 mb-8",children:"Trang bn ang tm kim c th  b xa, i tn hoc tm thi khng kh dng."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(jt,{to:"/",className:"px-8 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-gray-900 rounded-full font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all",children:" V trang ch"}),i.jsx("button",{onClick:()=>window.history.back(),className:"px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white/20 transition-all",children:" Quay li"})]}),i.jsxs("div",{className:"mt-12 pt-8 border-t border-white/20",children:[i.jsx("p",{className:"text-gray-300 mb-4",children:"Hoc bn c th truy cp:"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsx(jt,{to:"/quiz-bank",className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all text-sm",children:" Quiz Bank"}),i.jsx(jt,{to:"/online-exam",className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all text-sm",children:" Thi Online"}),i.jsx(jt,{to:"/create",className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all text-sm",children:" AI Generator"}),i.jsx(jt,{to:"/contact",className:"px-4 py-2 bg-white/10 text-white rounded-lg hover:bg-white/20 transition-all text-sm",children:" Lin h"})]})]})]}),i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),i.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-yellow-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),i.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})]})});class eO{parseTags(e){if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const t=JSON.parse(e);return Array.isArray(t)?t:[t.toString()]}catch{return e.split(",").map(t=>t.trim()).filter(t=>t.length>0)}return[]}mapQuestionFromAPI(e){let t=e.type||"mcq";return e.type||(!e.option_a&&!e.option_b?t="sa":e.correct_option&&e.correct_option.length>1?t="msq":t="mcq"),{id:e.id,question_type_id:e.question_type_id,type:t,question_text:e.question_text,option_a:e.option_a,option_b:e.option_b,option_c:e.option_c,option_d:e.option_d,correct_option:e.correct_option,explanation:e.explanation,difficulty:e.difficulty,is_dynamic:e.is_dynamic,dynamic_variables:e.dynamic_config,tags:this.parseTags(e.tags),approval_status:"approved",is_active:e.is_active,created_at:e.created_at,updated_at:e.updated_at}}async getSubjects(){return(await st.get("/subjects")).data||[]}async getSubject(e){return(await st.get(`/subjects/${e}`)).data}async getChaptersBySubject(e){return(await st.get(`/subjects/${e}/chapters`)).data||[]}async getChapter(e){return(await st.get(`/chapters/${e}`)).data}async getLessonsByChapter(e){return(await st.get(`/chapters/${e}/lessons`)).data||[]}async getLesson(e){return(await st.get(`/lessons/${e}`)).data}async getQuestionTypesByLesson(e){return(await st.get(`/lessons/${e}/question-types`)).data||[]}async getQuestionType(e){return(await st.get(`/question-types/${e}`)).data}async getFullHierarchy(){try{const e=await this.getSubjects(),t=e.map(h=>this.getChaptersBySubject(h.id)),a=(await Promise.all(t)).flat(),s=a.map(h=>this.getLessonsByChapter(h.id)),l=(await Promise.all(s)).flat(),u=l.map(h=>this.getQuestionTypesByLesson(h.id)),d=(await Promise.all(u)).flat();return{subjects:e,chapters:a,lessons:l,questionTypes:d}}catch(e){throw console.error("Error loading full hierarchy:",e),e}}async getQuestionsByType(e,t={}){const n={};t.limit&&(n.per_page=t.limit),t.offset&&(n.page=Math.floor(t.offset/(t.limit||20))+1);const a=st.buildQueryString(n);return((await st.get(`/question-types/${e}/questions${a}`)).data||[]).map(l=>this.mapQuestionFromAPI(l))}async getQuestion(e){const t=await st.get(`/questions/${e}`);return this.mapQuestionFromAPI(t.data)}async searchQuestions(e,t={}){const n={q:e,...t},a=st.buildQueryString(n);return((await st.get(`/questions/search${a}`)).data||[]).map(l=>this.mapQuestionFromAPI(l))}async createQuestion(e){const t={question_type_id:e.question_type_id,type:e.type||"mcq",question_text:e.question_text,option_a:e.option_a,option_b:e.option_b,option_c:e.option_c,option_d:e.option_d,correct_option:e.correct_option,explanation:e.explanation,difficulty:e.difficulty||"medium",is_dynamic:e.is_dynamic||!1,dynamic_config:e.dynamic_variables,tags:e.tags},n=await st.post("/questions",t);return this.mapQuestionFromAPI(n.data)}async updateQuestion(e,t){const n={};t.question_type_id!==void 0&&(n.question_type_id=t.question_type_id),t.type!==void 0&&(n.type=t.type),t.question_text!==void 0&&(n.question_text=t.question_text),t.option_a!==void 0&&(n.option_a=t.option_a),t.option_b!==void 0&&(n.option_b=t.option_b),t.option_c!==void 0&&(n.option_c=t.option_c),t.option_d!==void 0&&(n.option_d=t.option_d),t.correct_option!==void 0&&(n.correct_option=t.correct_option),t.explanation!==void 0&&(n.explanation=t.explanation),t.difficulty!==void 0&&(n.difficulty=t.difficulty),t.is_dynamic!==void 0&&(n.is_dynamic=t.is_dynamic),t.dynamic_variables!==void 0&&(n.dynamic_config=t.dynamic_variables),t.tags!==void 0&&(n.tags=t.tags),t.is_active!==void 0&&(n.is_active=t.is_active);const a=await st.put(`/questions/${e}`,n);return this.mapQuestionFromAPI(a.data)}async deleteQuestion(e){await st.delete(`/questions/${e}`)}async bulkCreateQuestions(e){return(await st.post("/questions/bulk",{questions:e})).data}}const Bt=new eO,Wx=r=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:i.jsx("path",{d:"m6 9 6 6 6-6"})}),aS=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),i.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),sS=({onSelectQuestionType:r,onQuestionTypeSelect:e,activeQuestionTypePath:t,activeQuestionTypeId:n,onClose:a})=>{const[s,o]=he.useState({subjects:[]}),[l,u]=he.useState(!0),[c,d]=he.useState([]),[h,g]=he.useState([]),[m,v]=he.useState([]);he.useEffect(()=>{x()},[]);const x=async()=>{try{u(!0);const N=await Bt.getSubjects(),E=(await Promise.all(N.map(async T=>{try{const F=await Bt.getChaptersBySubject(T.id),A=await Promise.all(F.map(async R=>{try{const I=await Bt.getLessonsByChapter(R.id),O=await Promise.all(I.map(async U=>{try{const D=await Bt.getQuestionTypesByLesson(U.id);return{...U,questionTypes:D}}catch(D){return console.error(`Error loading question types for lesson ${U.name}:`,D),{...U,questionTypes:[]}}}));return{...R,lessons:O}}catch(I){return console.error(`Error loading lessons for chapter ${R.name}:`,I),{...R,lessons:[]}}}));return{...T,chapters:A}}catch(F){return console.error(`Error loading chapters for subject ${T.name}:`,F),{...T,chapters:[]}}}))).sort((T,F)=>{const A=O=>{const U=O.match(/(\d+)/);return U?parseInt(U[1]):0},R=A(T.name);return A(F.name)-R});o({subjects:E}),E.length>0&&d([E[0].id])}catch(N){console.error("Error loading hierarchy data:",N)}finally{u(!1)}},b=N=>{d(j=>j.includes(N)?j.filter(E=>E!==N):[...j,N])},y=N=>{g(j=>j.includes(N)?j.filter(E=>E!==N):[...j,N])},S=N=>{v(j=>j.includes(N)?j.filter(E=>E!==N):[...j,N])},_=(N,j,E,T)=>{const F=`${j.slug}-${E.slug}-${T.slug}-${N.slug}`,A=`${j.name} > ${E.name} > ${T.name} > ${N.name}`;r?r(N.id,F,A):e&&e(N.id,F,A),a&&a()};return l?i.jsx("div",{className:"w-64 bg-white border-r border-gray-200 p-4 h-full overflow-y-auto",children:i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-gray-300 rounded w-2/3"})]})}):i.jsxs("div",{className:"w-[300px] bg-white border-r border-gray-200 p-0 h-full overflow-y-auto pt-4",children:[i.jsxs("div",{className:"p-4 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-indigo-900 flex items-center gap-2",children:[i.jsx(aS,{className:"w-5 h-5"}),"Ngn hng cu hi"]}),i.jsx("p",{className:"font-medium text-green-800 bg-yellow-200 px-2 py-1 rounded",children:"Ngn hng Ton"})]}),i.jsx("div",{className:"p-2 pt-0",children:s.subjects.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"Cha c d liu"}),i.jsx("p",{className:"text-xs",children:"Hy thm mn hc trong Admin Panel"})]}):s.subjects.map(N=>i.jsxs("div",{className:"mb-2",children:[i.jsxs("button",{onClick:()=>b(N.id),className:"w-full flex items-center justify-between p-2 text-left hover:bg-red-50 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(aS,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"font-medium text-red-700",children:N.name})]}),i.jsx(Wx,{className:`w-4 h-4 text-red-500 transition-transform ${c.includes(N.id)?"rotate-180":""}`})]}),c.includes(N.id)&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:N.chapters.map(j=>{const E=`${N.id}-${j.id}`;return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>y(E),className:"w-full flex items-center justify-between p-2 text-left hover:bg-blue-50 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-700 rounded-full"}),i.jsx("span",{className:"text-sm font-medium text-blue-800",children:j.name})]}),i.jsx(Wx,{className:`w-3 h-3 text-blue-600 transition-transform ${h.includes(E)?"rotate-180":""}`})]}),h.includes(E)&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:j.lessons.map(T=>{const F=`${E}-${T.id}`;return i.jsxs("div",{children:[i.jsxs("button",{onClick:()=>S(F),className:"w-full flex items-center justify-between p-2 text-left hover:bg-green-50 rounded-md transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full"}),i.jsx("span",{className:"text-sm text-green-700",children:T.name})]}),i.jsx(Wx,{className:`w-3 h-3 text-green-600 transition-transform ${m.includes(F)?"rotate-180":""}`})]}),m.includes(F)&&i.jsx("div",{className:"ml-4 mt-1 space-y-1",children:T.questionTypes.map(A=>{const R=`${N.slug}-${j.slug}-${T.slug}-${A.slug}`,I=t===R;return i.jsxs("button",{onClick:()=>_(A,N,j,T),className:`w-full flex items-center gap-2 p-2 text-left rounded-md transition-colors ${I?"bg-indigo-100 text-indigo-900 border-l-2 border-indigo-500":"hover:bg-gray-50 text-gray-600"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${A.difficulty_level==="easy"?"bg-blue-400":A.difficulty_level==="medium"?"bg-yellow-400":"bg-red-400"}`}),i.jsx("span",{className:"text-xs",children:A.name})]},A.id)})})]},T.id)})})]},j.id)})})]},N.id))})]})},tO=({isOpen:r,onClose:e,onConfirm:t,questionCount:n})=>{const{user:a}=Yr(),[s,o]=he.useState(""),[l,u]=he.useState(1),[c,d]=he.useState(0),[h,g]=he.useState(!1),[m,v]=he.useState(!1),[x,b]=he.useState("immediate"),[y,S]=he.useState(!0),[_,N]=he.useState(!1),[j,E]=he.useState(""),[T,F]=he.useState(!1),[A,R]=he.useState("");he.useEffect(()=>{if(r){const U=new Date,D=U.toLocaleDateString("vi-VN"),H=U.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"});o(` thi ${n} cu - ${D} ${H}`),u(1),d(0),g(!1),v(!1),b("immediate"),S(!0),N(!1),E(""),R("")}},[r,n]);const I=async()=>{if(!s.trim()){R("Vui lng nhp tiu   thi.");return}if(l<1||l>10){R("S ln thi phi t 1 n 10.");return}if(a){F(!0);try{if((await Va.getQuizzesByTeacher(Number(a.id))).some(H=>H.title.toLowerCase()===s.trim().toLowerCase()&&H.is_active)){R("Tiu  ny  tn ti. Vui lng chn tiu  khc."),F(!1);return}}catch(U){console.error("Error checking title:",U)}F(!1)}if(_&&!j.trim()){R("Vui lng nhp mt khu hoc tt bo v mt khu.");return}t(s.trim(),l,c,h,m,x,y,_?j.trim():"")},O=U=>{U.key==="Enter"&&I()};return r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"To  thi mi"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"font-semibold",children:"Thng tin  thi"})]}),i.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:["S cu hi  chn: ",i.jsx("strong",{children:n})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tiu   thi ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),onKeyPress:O,className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Nhp tiu  cho  thi",maxLength:100}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ti a 100 k t"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["S ln thi cho php ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("select",{value:l,onChange:U=>u(parseInt(U.target.value)),className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[1,2,3,4,5,6,7,8,9,10].map(U=>i.jsxs("option",{value:U,children:[U," ln ",U===1?"(mc nh)":""]},U))}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Hc sinh c th lm bi thi ny ti a ",l," ln"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Thi gian lm bi"}),i.jsxs("select",{value:c,onChange:U=>d(parseInt(U.target.value)),className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[i.jsx("option",{value:0,children:"Khng gii hn"}),i.jsx("option",{value:15,children:"15 pht"}),i.jsx("option",{value:30,children:"30 pht"}),i.jsx("option",{value:45,children:"45 pht"}),i.jsx("option",{value:60,children:"60 pht"}),i.jsx("option",{value:90,children:"90 pht"}),i.jsx("option",{value:120,children:"120 pht"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c===0?"Hc sinh c th lm bi khng gii hn thi gian":`Hc sinh c ${c} pht  hon thnh bi thi`})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h,onChange:U=>g(U.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{children:" Xo trn th t cu hi"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Mi hc sinh s nhn c cu hi theo th t khc nhau"})]})}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:m,onChange:U=>v(U.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{children:" Xo trn p n TN"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Th t cc p n A, B, C, D s c xo trn"})]})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Hin th kt qu"}),i.jsxs("select",{value:x,onChange:U=>b(U.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[i.jsx("option",{value:"immediate",children:"Hin th ngay sau khi np bi"}),i.jsx("option",{value:"after_deadline",children:"Hin th sau khi ht hn"}),i.jsx("option",{value:"never",children:"Khng hin th (ch GV xem)"})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x==="immediate"&&"Hc sinh s thy im ngay sau khi np bi",x==="after_deadline"&&"Hc sinh ch thy kt qu sau khi ht hn",x==="never"&&"Ch gio vin c th xem kt qu"]})]}),i.jsx("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:y,onChange:U=>S(U.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{children:" Hin th p n ng"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Cho php hc sinh xem p n ng sau khi np bi"})]})}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:_,onChange:U=>N(U.target.checked),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("span",{children:" Bo v bng mt khu"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Hc sinh cn nhp mt khu  truy cp  thi"})]})}),_&&i.jsxs("div",{className:"ml-6",children:[i.jsx("input",{type:"text",value:j,onChange:U=>E(U.target.value),onKeyPress:O,className:"w-full p-2 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 text-sm",placeholder:"Nhp mt khu (v d: toan12a1)",maxLength:50}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mt khu s c yu cu khi hc sinh truy cp  thi"})]})]})]})]}),i.jsx("div",{className:"space-y-4 mt-4",children:A&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"text-sm",children:A})]})})}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Hy"}),i.jsxs("button",{onClick:I,disabled:T,className:"flex-1 px-4 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[T&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),T?"ang to...":"To  thi"]})]})]})}):null},rO=({onClose:r,generateShortcodes:e})=>{const[t,n]=he.useState(""),[a,s]=he.useState(!1),[o,l]=he.useState(!1);he.useEffect(()=>{u()},[]);const u=async()=>{s(!0);try{const h=await e();n(h)}catch(h){console.error("Error generating shortcodes:",h),alert("C li xy ra khi to shortcode.")}finally{s(!1)}},c=async()=>{try{await navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)}catch(h){console.error("Error copying to clipboard:",h),alert("Khng th copy vo clipboard. Vui lng copy th cng.")}},d=()=>{const h=new Blob([t],{type:"text/plain;charset=utf-8"}),g=URL.createObjectURL(h),m=document.createElement("a");m.href=g,m.download="wordpress-quiz-shortcodes.txt",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g)};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"WordPress Quiz Shortcodes"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Shortcodes cho plugin quiz WordPress"})]}),i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:a?i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang to shortcodes..."})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"p-6 bg-orange-50 border-b",children:[i.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:" Hng dn s dng"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-orange-800",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Trc nghim (MCQ):"}),i.jsx("code",{className:"block text-xs bg-orange-100 p-1 rounded mt-1",children:'[quiz_question question="..." option_a="..." correct="A" explanation="..."]'})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"ng/Sai (MSQ):"}),i.jsx("code",{className:"block text-xs bg-orange-100 p-1 rounded mt-1",children:'[quiz_question_T_F question="..." correct="A,B" explanation="..."]'})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Tr li ngn (SA):"}),i.jsx("code",{className:"block text-xs bg-orange-100 p-1 rounded mt-1",children:'[quiz_question_TLN question="..." correct="1234" explanation="..."]'})]})]})]}),i.jsxs("div",{className:"flex-1 p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Generated Shortcodes"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:c,className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${o?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800 hover:bg-orange-200"}`,children:o?"  copy":" Copy"}),i.jsx("button",{onClick:d,className:"px-3 py-1.5 text-sm font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 rounded-md transition-colors",children:" Ti file"})]})]}),i.jsx("textarea",{value:t,onChange:h=>n(h.target.value),className:"w-full h-96 p-4 border border-gray-300 rounded-lg font-mono text-sm resize-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Shortcodes s hin th  y..."})]})]})}),i.jsxs("div",{className:"flex justify-between items-center p-6 border-t bg-gray-50",children:[i.jsx("div",{className:"text-sm text-gray-600",children:t&&i.jsxs("span",{children:["  to ",(t.match(/\[quiz_question\s/g)||[]).length+(t.match(/\[quiz_question_T_F\s/g)||[]).length+(t.match(/\[quiz_question_TLN\s/g)||[]).length," cu hi"]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:u,disabled:a,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:a?"ang to...":" To li"}),i.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"ng"})]})]})]})})};var nO=Object.defineProperty,iO=Object.defineProperties,aO=Object.getOwnPropertyDescriptors,oS=Object.getOwnPropertySymbols,sO=Object.prototype.hasOwnProperty,oO=Object.prototype.propertyIsEnumerable,cy=(r,e,t)=>e in r?nO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xr=(r,e)=>{for(var t in e||(e={}))sO.call(e,t)&&cy(r,t,e[t]);if(oS)for(var t of oS(e))oO.call(e,t)&&cy(r,t,e[t]);return r},vu=(r,e)=>iO(r,aO(e)),at=(r,e,t)=>cy(r,typeof e!="symbol"?e+"":e,t),lO=(r,e,t)=>new Promise((n,a)=>{var s=u=>{try{l(t.next(u))}catch(c){a(c)}},o=u=>{try{l(t.throw(u))}catch(c){a(c)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,o);l((t=t.apply(r,e)).next())});class fm{constructor(e){at(this,"rootKey"),this.rootKey=e}}const cO=Object.seal({});class ft extends fm{constructor(e){super(e),at(this,"root"),this.root=new Array}prepForXml(e){var t;e.stack.push(this);const n=this.root.map(a=>a instanceof fm?a.prepForXml(e):a).filter(a=>a!==void 0);return e.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((t=n[0])!=null&&t._attr)?n[0]:n:cO}}addChildElement(e){return this.root.push(e),this}}class rp extends ft{prepForXml(e){const t=super.prepForXml(e);if(t&&(typeof t[this.rootKey]!="object"||Object.keys(t[this.rootKey]).length))return t}}class Vt extends fm{constructor(e){super("_attr"),at(this,"xmlKeys"),this.root=e}prepForXml(e){const t={};return Object.entries(this.root).forEach(([n,a])=>{if(a!==void 0){const s=this.xmlKeys&&this.xmlKeys[n]||n;t[s]=a}}),{_attr:t}}}class np extends fm{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:a,value:s})=>vu(xr({},n),{[a]:s}),{})}}}class xn extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W5(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kx={},l0={exports:{}},lS;function Qy(){if(lS)return l0.exports;lS=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(j,E,T){return Function.prototype.apply.call(j,E,T)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:t=function(j){return Object.getOwnPropertyNames(j)};function n(N){console&&console.warn&&console.warn(N)}var a=Number.isNaN||function(j){return j!==j};function s(){s.init.call(this)}l0.exports=s,l0.exports.once=y,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function l(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(N){if(typeof N!="number"||N<0||a(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");o=N}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||a(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function u(N){return N._maxListeners===void 0?s.defaultMaxListeners:N._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(j){for(var E=[],T=1;T<arguments.length;T++)E.push(arguments[T]);var F=j==="error",A=this._events;if(A!==void 0)F=F&&A.error===void 0;else if(!F)return!1;if(F){var R;if(E.length>0&&(R=E[0]),R instanceof Error)throw R;var I=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw I.context=R,I}var O=A[j];if(O===void 0)return!1;if(typeof O=="function")e(O,this,E);else for(var U=O.length,D=v(O,U),T=0;T<U;++T)e(D[T],this,E);return!0};function c(N,j,E,T){var F,A,R;if(l(E),A=N._events,A===void 0?(A=N._events=Object.create(null),N._eventsCount=0):(A.newListener!==void 0&&(N.emit("newListener",j,E.listener?E.listener:E),A=N._events),R=A[j]),R===void 0)R=A[j]=E,++N._eventsCount;else if(typeof R=="function"?R=A[j]=T?[E,R]:[R,E]:T?R.unshift(E):R.push(E),F=u(N),F>0&&R.length>F&&!R.warned){R.warned=!0;var I=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");I.name="MaxListenersExceededWarning",I.emitter=N,I.type=j,I.count=R.length,n(I)}return N}s.prototype.addListener=function(j,E){return c(this,j,E,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(j,E){return c(this,j,E,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(N,j,E){var T={fired:!1,wrapFn:void 0,target:N,type:j,listener:E},F=d.bind(T);return F.listener=E,T.wrapFn=F,F}s.prototype.once=function(j,E){return l(E),this.on(j,h(this,j,E)),this},s.prototype.prependOnceListener=function(j,E){return l(E),this.prependListener(j,h(this,j,E)),this},s.prototype.removeListener=function(j,E){var T,F,A,R,I;if(l(E),F=this._events,F===void 0)return this;if(T=F[j],T===void 0)return this;if(T===E||T.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete F[j],F.removeListener&&this.emit("removeListener",j,T.listener||E));else if(typeof T!="function"){for(A=-1,R=T.length-1;R>=0;R--)if(T[R]===E||T[R].listener===E){I=T[R].listener,A=R;break}if(A<0)return this;A===0?T.shift():x(T,A),T.length===1&&(F[j]=T[0]),F.removeListener!==void 0&&this.emit("removeListener",j,I||E)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(j){var E,T,F;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[j]),this;if(arguments.length===0){var A=Object.keys(T),R;for(F=0;F<A.length;++F)R=A[F],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=T[j],typeof E=="function")this.removeListener(j,E);else if(E!==void 0)for(F=E.length-1;F>=0;F--)this.removeListener(j,E[F]);return this};function g(N,j,E){var T=N._events;if(T===void 0)return[];var F=T[j];return F===void 0?[]:typeof F=="function"?E?[F.listener||F]:[F]:E?b(F):v(F,F.length)}s.prototype.listeners=function(j){return g(this,j,!0)},s.prototype.rawListeners=function(j){return g(this,j,!1)},s.listenerCount=function(N,j){return typeof N.listenerCount=="function"?N.listenerCount(j):m.call(N,j)},s.prototype.listenerCount=m;function m(N){var j=this._events;if(j!==void 0){var E=j[N];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(N,j){for(var E=new Array(j),T=0;T<j;++T)E[T]=N[T];return E}function x(N,j){for(;j+1<N.length;j++)N[j]=N[j+1];N.pop()}function b(N){for(var j=new Array(N.length),E=0;E<j.length;++E)j[E]=N[E].listener||N[E];return j}function y(N,j){return new Promise(function(E,T){function F(R){N.removeListener(j,A),T(R)}function A(){typeof N.removeListener=="function"&&N.removeListener("error",F),E([].slice.call(arguments))}_(N,j,A,{once:!0}),j!=="error"&&S(N,F,{once:!0})})}function S(N,j,E){typeof N.on=="function"&&_(N,"error",j,E)}function _(N,j,E,T){if(typeof N.on=="function")T.once?N.once(j,E):N.on(j,E);else if(typeof N.addEventListener=="function")N.addEventListener(j,function F(A){T.once&&N.removeEventListener(j,F),E(A)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N)}return l0.exports}var c0={exports:{}},cS;function Yo(){return cS||(cS=1,typeof Object.create=="function"?c0.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:c0.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),c0.exports}function uO(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var K5={exports:{}},vn=K5.exports={},us,ds;function uy(){throw new Error("setTimeout has not been defined")}function dy(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?us=setTimeout:us=uy}catch{us=uy}try{typeof clearTimeout=="function"?ds=clearTimeout:ds=dy}catch{ds=dy}})();function X5(r){if(us===setTimeout)return setTimeout(r,0);if((us===uy||!us)&&setTimeout)return us=setTimeout,setTimeout(r,0);try{return us(r,0)}catch{try{return us.call(null,r,0)}catch{return us.call(this,r,0)}}}function dO(r){if(ds===clearTimeout)return clearTimeout(r);if((ds===dy||!ds)&&clearTimeout)return ds=clearTimeout,clearTimeout(r);try{return ds(r)}catch{try{return ds.call(null,r)}catch{return ds.call(this,r)}}}var $s=[],ou=!1,Fl,em=-1;function fO(){!ou||!Fl||(ou=!1,Fl.length?$s=Fl.concat($s):em=-1,$s.length&&Y5())}function Y5(){if(!ou){var r=X5(fO);ou=!0;for(var e=$s.length;e;){for(Fl=$s,$s=[];++em<e;)Fl&&Fl[em].run();em=-1,e=$s.length}Fl=null,ou=!1,dO(r)}}vn.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];$s.push(new Z5(r,e)),$s.length===1&&!ou&&X5(Y5)};function Z5(r,e){this.fun=r,this.array=e}Z5.prototype.run=function(){this.fun.apply(null,this.array)};vn.title="browser";vn.browser=!0;vn.env={};vn.argv=[];vn.version="";vn.versions={};function eo(){}vn.on=eo;vn.addListener=eo;vn.once=eo;vn.off=eo;vn.removeListener=eo;vn.removeAllListeners=eo;vn.emit=eo;vn.prependListener=eo;vn.prependOnceListener=eo;vn.listeners=function(r){return[]};vn.binding=function(r){throw new Error("process.binding is not supported")};vn.cwd=function(){return"/"};vn.chdir=function(r){throw new Error("process.chdir is not supported")};vn.umask=function(){return 0};var hO=K5.exports;const sr=uO(hO);var Xx,uS;function J5(){return uS||(uS=1,Xx=Qy().EventEmitter),Xx}var Yx={},Vd={},dS;function mO(){if(dS)return Vd;dS=1,Vd.byteLength=l,Vd.toByteArray=c,Vd.fromByteArray=g;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=n.length;a<s;++a)r[a]=n[a],e[n.charCodeAt(a)]=a;e[45]=62,e[95]=63;function o(m){var v=m.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=m.indexOf("=");x===-1&&(x=v);var b=x===v?0:4-x%4;return[x,b]}function l(m){var v=o(m),x=v[0],b=v[1];return(x+b)*3/4-b}function u(m,v,x){return(v+x)*3/4-x}function c(m){var v,x=o(m),b=x[0],y=x[1],S=new t(u(m,b,y)),_=0,N=y>0?b-4:b,j;for(j=0;j<N;j+=4)v=e[m.charCodeAt(j)]<<18|e[m.charCodeAt(j+1)]<<12|e[m.charCodeAt(j+2)]<<6|e[m.charCodeAt(j+3)],S[_++]=v>>16&255,S[_++]=v>>8&255,S[_++]=v&255;return y===2&&(v=e[m.charCodeAt(j)]<<2|e[m.charCodeAt(j+1)]>>4,S[_++]=v&255),y===1&&(v=e[m.charCodeAt(j)]<<10|e[m.charCodeAt(j+1)]<<4|e[m.charCodeAt(j+2)]>>2,S[_++]=v>>8&255,S[_++]=v&255),S}function d(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,v,x){for(var b,y=[],S=v;S<x;S+=3)b=(m[S]<<16&16711680)+(m[S+1]<<8&65280)+(m[S+2]&255),y.push(d(b));return y.join("")}function g(m){for(var v,x=m.length,b=x%3,y=[],S=16383,_=0,N=x-b;_<N;_+=S)y.push(h(m,_,_+S>N?N:_+S));return b===1?(v=m[x-1],y.push(r[v>>2]+r[v<<4&63]+"==")):b===2&&(v=(m[x-2]<<8)+m[x-1],y.push(r[v>>10]+r[v>>4&63]+r[v<<2&63]+"=")),y.join("")}return Vd}var u0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var fS;function pO(){return fS||(fS=1,u0.read=function(r,e,t,n,a){var s,o,l=a*8-n-1,u=(1<<l)-1,c=u>>1,d=-7,h=t?a-1:0,g=t?-1:1,m=r[e+h];for(h+=g,s=m&(1<<-d)-1,m>>=-d,d+=l;d>0;s=s*256+r[e+h],h+=g,d-=8);for(o=s&(1<<-d)-1,s>>=-d,d+=n;d>0;o=o*256+r[e+h],h+=g,d-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(m?-1:1)*o*Math.pow(2,s-n)},u0.write=function(r,e,t,n,a,s){var o,l,u,c=s*8-a-1,d=(1<<c)-1,h=d>>1,g=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,v=n?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?e+=g/u:e+=g*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=d?(l=0,o=d):o+h>=1?(l=(e*u-1)*Math.pow(2,a),o=o+h):(l=e*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;r[t+m]=l&255,m+=v,l/=256,a-=8);for(o=o<<a|l,c+=a;c>0;r[t+m]=o&255,m+=v,o/=256,c-=8);r[t+m-v]|=x*128}),u0}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hS;function ip(){return hS||(hS=1,function(r){var e=mO(),t=pO(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=l,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;var a=2147483647;r.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var ee=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(ee,k),ee.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(ee){if(ee>a)throw new RangeError('The value "'+ee+'" is invalid for option "size"');var k=new Uint8Array(ee);return Object.setPrototypeOf(k,l.prototype),k}function l(ee,k,B){if(typeof ee=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(ee)}return u(ee,k,B)}l.poolSize=8192;function u(ee,k,B){if(typeof ee=="string")return g(ee,k);if(ArrayBuffer.isView(ee))return v(ee);if(ee==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ee);if(ye(ee,ArrayBuffer)||ee&&ye(ee.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(ee,SharedArrayBuffer)||ee&&ye(ee.buffer,SharedArrayBuffer)))return x(ee,k,B);if(typeof ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=ee.valueOf&&ee.valueOf();if(Q!=null&&Q!==ee)return l.from(Q,k,B);var Z=b(ee);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ee[Symbol.toPrimitive]=="function")return l.from(ee[Symbol.toPrimitive]("string"),k,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ee)}l.from=function(ee,k,B){return u(ee,k,B)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function c(ee){if(typeof ee!="number")throw new TypeError('"size" argument must be of type number');if(ee<0)throw new RangeError('The value "'+ee+'" is invalid for option "size"')}function d(ee,k,B){return c(ee),ee<=0?o(ee):k!==void 0?typeof B=="string"?o(ee).fill(k,B):o(ee).fill(k):o(ee)}l.alloc=function(ee,k,B){return d(ee,k,B)};function h(ee){return c(ee),o(ee<0?0:y(ee)|0)}l.allocUnsafe=function(ee){return h(ee)},l.allocUnsafeSlow=function(ee){return h(ee)};function g(ee,k){if((typeof k!="string"||k==="")&&(k="utf8"),!l.isEncoding(k))throw new TypeError("Unknown encoding: "+k);var B=_(ee,k)|0,Q=o(B),Z=Q.write(ee,k);return Z!==B&&(Q=Q.slice(0,Z)),Q}function m(ee){for(var k=ee.length<0?0:y(ee.length)|0,B=o(k),Q=0;Q<k;Q+=1)B[Q]=ee[Q]&255;return B}function v(ee){if(ye(ee,Uint8Array)){var k=new Uint8Array(ee);return x(k.buffer,k.byteOffset,k.byteLength)}return m(ee)}function x(ee,k,B){if(k<0||ee.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<k+(B||0))throw new RangeError('"length" is outside of buffer bounds');var Q;return k===void 0&&B===void 0?Q=new Uint8Array(ee):B===void 0?Q=new Uint8Array(ee,k):Q=new Uint8Array(ee,k,B),Object.setPrototypeOf(Q,l.prototype),Q}function b(ee){if(l.isBuffer(ee)){var k=y(ee.length)|0,B=o(k);return B.length===0||ee.copy(B,0,0,k),B}if(ee.length!==void 0)return typeof ee.length!="number"||M(ee.length)?o(0):m(ee);if(ee.type==="Buffer"&&Array.isArray(ee.data))return m(ee.data)}function y(ee){if(ee>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ee|0}function S(ee){return+ee!=ee&&(ee=0),l.alloc(+ee)}l.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==l.prototype},l.compare=function(k,B){if(ye(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),ye(B,Uint8Array)&&(B=l.from(B,B.offset,B.byteLength)),!l.isBuffer(k)||!l.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===B)return 0;for(var Q=k.length,Z=B.length,J=0,K=Math.min(Q,Z);J<K;++J)if(k[J]!==B[J]){Q=k[J],Z=B[J];break}return Q<Z?-1:Z<Q?1:0},l.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(k,B){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return l.alloc(0);var Q;if(B===void 0)for(B=0,Q=0;Q<k.length;++Q)B+=k[Q].length;var Z=l.allocUnsafe(B),J=0;for(Q=0;Q<k.length;++Q){var K=k[Q];if(ye(K,Uint8Array))J+K.length>Z.length?l.from(K).copy(Z,J):Uint8Array.prototype.set.call(Z,K,J);else if(l.isBuffer(K))K.copy(Z,J);else throw new TypeError('"list" argument must be an Array of Buffers');J+=K.length}return Z};function _(ee,k){if(l.isBuffer(ee))return ee.length;if(ArrayBuffer.isView(ee)||ye(ee,ArrayBuffer))return ee.byteLength;if(typeof ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ee);var B=ee.length,Q=arguments.length>2&&arguments[2]===!0;if(!Q&&B===0)return 0;for(var Z=!1;;)switch(k){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return z(ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return ie(ee).length;default:if(Z)return Q?-1:z(ee).length;k=(""+k).toLowerCase(),Z=!0}}l.byteLength=_;function N(ee,k,B){var Q=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,k>>>=0,B<=k))return"";for(ee||(ee="utf8");;)switch(ee){case"hex":return le(this,k,B);case"utf8":case"utf-8":return D(this,k,B);case"ascii":return G(this,k,B);case"latin1":case"binary":return ue(this,k,B);case"base64":return U(this,k,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,k,B);default:if(Q)throw new TypeError("Unknown encoding: "+ee);ee=(ee+"").toLowerCase(),Q=!0}}l.prototype._isBuffer=!0;function j(ee,k,B){var Q=ee[k];ee[k]=ee[B],ee[B]=Q}l.prototype.swap16=function(){var k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<k;B+=2)j(this,B,B+1);return this},l.prototype.swap32=function(){var k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<k;B+=4)j(this,B,B+3),j(this,B+1,B+2);return this},l.prototype.swap64=function(){var k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<k;B+=8)j(this,B,B+7),j(this,B+1,B+6),j(this,B+2,B+5),j(this,B+3,B+4);return this},l.prototype.toString=function(){var k=this.length;return k===0?"":arguments.length===0?D(this,0,k):N.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(k){if(!l.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:l.compare(this,k)===0},l.prototype.inspect=function(){var k="",B=r.INSPECT_MAX_BYTES;return k=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(k+=" ... "),"<Buffer "+k+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(k,B,Q,Z,J){if(ye(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(B===void 0&&(B=0),Q===void 0&&(Q=k?k.length:0),Z===void 0&&(Z=0),J===void 0&&(J=this.length),B<0||Q>k.length||Z<0||J>this.length)throw new RangeError("out of range index");if(Z>=J&&B>=Q)return 0;if(Z>=J)return-1;if(B>=Q)return 1;if(B>>>=0,Q>>>=0,Z>>>=0,J>>>=0,this===k)return 0;for(var K=J-Z,te=Q-B,me=Math.min(K,te),fe=this.slice(Z,J),xe=k.slice(B,Q),_e=0;_e<me;++_e)if(fe[_e]!==xe[_e]){K=fe[_e],te=xe[_e];break}return K<te?-1:te<K?1:0};function E(ee,k,B,Q,Z){if(ee.length===0)return-1;if(typeof B=="string"?(Q=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,M(B)&&(B=Z?0:ee.length-1),B<0&&(B=ee.length+B),B>=ee.length){if(Z)return-1;B=ee.length-1}else if(B<0)if(Z)B=0;else return-1;if(typeof k=="string"&&(k=l.from(k,Q)),l.isBuffer(k))return k.length===0?-1:T(ee,k,B,Q,Z);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(ee,k,B):Uint8Array.prototype.lastIndexOf.call(ee,k,B):T(ee,[k],B,Q,Z);throw new TypeError("val must be string, number or Buffer")}function T(ee,k,B,Q,Z){var J=1,K=ee.length,te=k.length;if(Q!==void 0&&(Q=String(Q).toLowerCase(),Q==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(ee.length<2||k.length<2)return-1;J=2,K/=2,te/=2,B/=2}function me(Be,Re){return J===1?Be[Re]:Be.readUInt16BE(Re*J)}var fe;if(Z){var xe=-1;for(fe=B;fe<K;fe++)if(me(ee,fe)===me(k,xe===-1?0:fe-xe)){if(xe===-1&&(xe=fe),fe-xe+1===te)return xe*J}else xe!==-1&&(fe-=fe-xe),xe=-1}else for(B+te>K&&(B=K-te),fe=B;fe>=0;fe--){for(var _e=!0,je=0;je<te;je++)if(me(ee,fe+je)!==me(k,je)){_e=!1;break}if(_e)return fe}return-1}l.prototype.includes=function(k,B,Q){return this.indexOf(k,B,Q)!==-1},l.prototype.indexOf=function(k,B,Q){return E(this,k,B,Q,!0)},l.prototype.lastIndexOf=function(k,B,Q){return E(this,k,B,Q,!1)};function F(ee,k,B,Q){B=Number(B)||0;var Z=ee.length-B;Q?(Q=Number(Q),Q>Z&&(Q=Z)):Q=Z;var J=k.length;Q>J/2&&(Q=J/2);for(var K=0;K<Q;++K){var te=parseInt(k.substr(K*2,2),16);if(M(te))return K;ee[B+K]=te}return K}function A(ee,k,B,Q){return oe(z(k,ee.length-B),ee,B,Q)}function R(ee,k,B,Q){return oe(re(k),ee,B,Q)}function I(ee,k,B,Q){return oe(ie(k),ee,B,Q)}function O(ee,k,B,Q){return oe(ne(k,ee.length-B),ee,B,Q)}l.prototype.write=function(k,B,Q,Z){if(B===void 0)Z="utf8",Q=this.length,B=0;else if(Q===void 0&&typeof B=="string")Z=B,Q=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(Q)?(Q=Q>>>0,Z===void 0&&(Z="utf8")):(Z=Q,Q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-B;if((Q===void 0||Q>J)&&(Q=J),k.length>0&&(Q<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(var K=!1;;)switch(Z){case"hex":return F(this,k,B,Q);case"utf8":case"utf-8":return A(this,k,B,Q);case"ascii":case"latin1":case"binary":return R(this,k,B,Q);case"base64":return I(this,k,B,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,k,B,Q);default:if(K)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),K=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(ee,k,B){return k===0&&B===ee.length?e.fromByteArray(ee):e.fromByteArray(ee.slice(k,B))}function D(ee,k,B){B=Math.min(ee.length,B);for(var Q=[],Z=k;Z<B;){var J=ee[Z],K=null,te=J>239?4:J>223?3:J>191?2:1;if(Z+te<=B){var me,fe,xe,_e;switch(te){case 1:J<128&&(K=J);break;case 2:me=ee[Z+1],(me&192)===128&&(_e=(J&31)<<6|me&63,_e>127&&(K=_e));break;case 3:me=ee[Z+1],fe=ee[Z+2],(me&192)===128&&(fe&192)===128&&(_e=(J&15)<<12|(me&63)<<6|fe&63,_e>2047&&(_e<55296||_e>57343)&&(K=_e));break;case 4:me=ee[Z+1],fe=ee[Z+2],xe=ee[Z+3],(me&192)===128&&(fe&192)===128&&(xe&192)===128&&(_e=(J&15)<<18|(me&63)<<12|(fe&63)<<6|xe&63,_e>65535&&_e<1114112&&(K=_e))}}K===null?(K=65533,te=1):K>65535&&(K-=65536,Q.push(K>>>10&1023|55296),K=56320|K&1023),Q.push(K),Z+=te}return P(Q)}var H=4096;function P(ee){var k=ee.length;if(k<=H)return String.fromCharCode.apply(String,ee);for(var B="",Q=0;Q<k;)B+=String.fromCharCode.apply(String,ee.slice(Q,Q+=H));return B}function G(ee,k,B){var Q="";B=Math.min(ee.length,B);for(var Z=k;Z<B;++Z)Q+=String.fromCharCode(ee[Z]&127);return Q}function ue(ee,k,B){var Q="";B=Math.min(ee.length,B);for(var Z=k;Z<B;++Z)Q+=String.fromCharCode(ee[Z]);return Q}function le(ee,k,B){var Q=ee.length;(!k||k<0)&&(k=0),(!B||B<0||B>Q)&&(B=Q);for(var Z="",J=k;J<B;++J)Z+=ge[ee[J]];return Z}function pe(ee,k,B){for(var Q=ee.slice(k,B),Z="",J=0;J<Q.length-1;J+=2)Z+=String.fromCharCode(Q[J]+Q[J+1]*256);return Z}l.prototype.slice=function(k,B){var Q=this.length;k=~~k,B=B===void 0?Q:~~B,k<0?(k+=Q,k<0&&(k=0)):k>Q&&(k=Q),B<0?(B+=Q,B<0&&(B=0)):B>Q&&(B=Q),B<k&&(B=k);var Z=this.subarray(k,B);return Object.setPrototypeOf(Z,l.prototype),Z};function de(ee,k,B){if(ee%1!==0||ee<0)throw new RangeError("offset is not uint");if(ee+k>B)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(k,B,Q){k=k>>>0,B=B>>>0,Q||de(k,B,this.length);for(var Z=this[k],J=1,K=0;++K<B&&(J*=256);)Z+=this[k+K]*J;return Z},l.prototype.readUintBE=l.prototype.readUIntBE=function(k,B,Q){k=k>>>0,B=B>>>0,Q||de(k,B,this.length);for(var Z=this[k+--B],J=1;B>0&&(J*=256);)Z+=this[k+--B]*J;return Z},l.prototype.readUint8=l.prototype.readUInt8=function(k,B){return k=k>>>0,B||de(k,1,this.length),this[k]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(k,B){return k=k>>>0,B||de(k,2,this.length),this[k]|this[k+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(k,B){return k=k>>>0,B||de(k,2,this.length),this[k]<<8|this[k+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(k,B){return k=k>>>0,B||de(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(k,B){return k=k>>>0,B||de(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},l.prototype.readIntLE=function(k,B,Q){k=k>>>0,B=B>>>0,Q||de(k,B,this.length);for(var Z=this[k],J=1,K=0;++K<B&&(J*=256);)Z+=this[k+K]*J;return J*=128,Z>=J&&(Z-=Math.pow(2,8*B)),Z},l.prototype.readIntBE=function(k,B,Q){k=k>>>0,B=B>>>0,Q||de(k,B,this.length);for(var Z=B,J=1,K=this[k+--Z];Z>0&&(J*=256);)K+=this[k+--Z]*J;return J*=128,K>=J&&(K-=Math.pow(2,8*B)),K},l.prototype.readInt8=function(k,B){return k=k>>>0,B||de(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},l.prototype.readInt16LE=function(k,B){k=k>>>0,B||de(k,2,this.length);var Q=this[k]|this[k+1]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt16BE=function(k,B){k=k>>>0,B||de(k,2,this.length);var Q=this[k+1]|this[k]<<8;return Q&32768?Q|4294901760:Q},l.prototype.readInt32LE=function(k,B){return k=k>>>0,B||de(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},l.prototype.readInt32BE=function(k,B){return k=k>>>0,B||de(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},l.prototype.readFloatLE=function(k,B){return k=k>>>0,B||de(k,4,this.length),t.read(this,k,!0,23,4)},l.prototype.readFloatBE=function(k,B){return k=k>>>0,B||de(k,4,this.length),t.read(this,k,!1,23,4)},l.prototype.readDoubleLE=function(k,B){return k=k>>>0,B||de(k,8,this.length),t.read(this,k,!0,52,8)},l.prototype.readDoubleBE=function(k,B){return k=k>>>0,B||de(k,8,this.length),t.read(this,k,!1,52,8)};function L(ee,k,B,Q,Z,J){if(!l.isBuffer(ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Z||k<J)throw new RangeError('"value" argument is out of bounds');if(B+Q>ee.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(k,B,Q,Z){if(k=+k,B=B>>>0,Q=Q>>>0,!Z){var J=Math.pow(2,8*Q)-1;L(this,k,B,Q,J,0)}var K=1,te=0;for(this[B]=k&255;++te<Q&&(K*=256);)this[B+te]=k/K&255;return B+Q},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(k,B,Q,Z){if(k=+k,B=B>>>0,Q=Q>>>0,!Z){var J=Math.pow(2,8*Q)-1;L(this,k,B,Q,J,0)}var K=Q-1,te=1;for(this[B+K]=k&255;--K>=0&&(te*=256);)this[B+K]=k/te&255;return B+Q},l.prototype.writeUint8=l.prototype.writeUInt8=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,1,255,0),this[B]=k&255,B+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,2,65535,0),this[B]=k&255,this[B+1]=k>>>8,B+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,2,65535,0),this[B]=k>>>8,this[B+1]=k&255,B+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,4,4294967295,0),this[B+3]=k>>>24,this[B+2]=k>>>16,this[B+1]=k>>>8,this[B]=k&255,B+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,4,4294967295,0),this[B]=k>>>24,this[B+1]=k>>>16,this[B+2]=k>>>8,this[B+3]=k&255,B+4},l.prototype.writeIntLE=function(k,B,Q,Z){if(k=+k,B=B>>>0,!Z){var J=Math.pow(2,8*Q-1);L(this,k,B,Q,J-1,-J)}var K=0,te=1,me=0;for(this[B]=k&255;++K<Q&&(te*=256);)k<0&&me===0&&this[B+K-1]!==0&&(me=1),this[B+K]=(k/te>>0)-me&255;return B+Q},l.prototype.writeIntBE=function(k,B,Q,Z){if(k=+k,B=B>>>0,!Z){var J=Math.pow(2,8*Q-1);L(this,k,B,Q,J-1,-J)}var K=Q-1,te=1,me=0;for(this[B+K]=k&255;--K>=0&&(te*=256);)k<0&&me===0&&this[B+K+1]!==0&&(me=1),this[B+K]=(k/te>>0)-me&255;return B+Q},l.prototype.writeInt8=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,1,127,-128),k<0&&(k=255+k+1),this[B]=k&255,B+1},l.prototype.writeInt16LE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,2,32767,-32768),this[B]=k&255,this[B+1]=k>>>8,B+2},l.prototype.writeInt16BE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,2,32767,-32768),this[B]=k>>>8,this[B+1]=k&255,B+2},l.prototype.writeInt32LE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,4,2147483647,-2147483648),this[B]=k&255,this[B+1]=k>>>8,this[B+2]=k>>>16,this[B+3]=k>>>24,B+4},l.prototype.writeInt32BE=function(k,B,Q){return k=+k,B=B>>>0,Q||L(this,k,B,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[B]=k>>>24,this[B+1]=k>>>16,this[B+2]=k>>>8,this[B+3]=k&255,B+4};function X(ee,k,B,Q,Z,J){if(B+Q>ee.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function V(ee,k,B,Q,Z){return k=+k,B=B>>>0,Z||X(ee,k,B,4),t.write(ee,k,B,Q,23,4),B+4}l.prototype.writeFloatLE=function(k,B,Q){return V(this,k,B,!0,Q)},l.prototype.writeFloatBE=function(k,B,Q){return V(this,k,B,!1,Q)};function se(ee,k,B,Q,Z){return k=+k,B=B>>>0,Z||X(ee,k,B,8),t.write(ee,k,B,Q,52,8),B+8}l.prototype.writeDoubleLE=function(k,B,Q){return se(this,k,B,!0,Q)},l.prototype.writeDoubleBE=function(k,B,Q){return se(this,k,B,!1,Q)},l.prototype.copy=function(k,B,Q,Z){if(!l.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),!Z&&Z!==0&&(Z=this.length),B>=k.length&&(B=k.length),B||(B=0),Z>0&&Z<Q&&(Z=Q),Z===Q||k.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),k.length-B<Z-Q&&(Z=k.length-B+Q);var J=Z-Q;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,Q,Z):Uint8Array.prototype.set.call(k,this.subarray(Q,Z),B),J},l.prototype.fill=function(k,B,Q,Z){if(typeof k=="string"){if(typeof B=="string"?(Z=B,B=0,Q=this.length):typeof Q=="string"&&(Z=Q,Q=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!l.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(k.length===1){var J=k.charCodeAt(0);(Z==="utf8"&&J<128||Z==="latin1")&&(k=J)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(B<0||this.length<B||this.length<Q)throw new RangeError("Out of range index");if(Q<=B)return this;B=B>>>0,Q=Q===void 0?this.length:Q>>>0,k||(k=0);var K;if(typeof k=="number")for(K=B;K<Q;++K)this[K]=k;else{var te=l.isBuffer(k)?k:l.from(k,Z),me=te.length;if(me===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(K=0;K<Q-B;++K)this[K+B]=te[K%me]}return this};var ae=/[^+/0-9A-Za-z-_]/g;function W(ee){if(ee=ee.split("=")[0],ee=ee.trim().replace(ae,""),ee.length<2)return"";for(;ee.length%4!==0;)ee=ee+"=";return ee}function z(ee,k){k=k||1/0;for(var B,Q=ee.length,Z=null,J=[],K=0;K<Q;++K){if(B=ee.charCodeAt(K),B>55295&&B<57344){if(!Z){if(B>56319){(k-=3)>-1&&J.push(239,191,189);continue}else if(K+1===Q){(k-=3)>-1&&J.push(239,191,189);continue}Z=B;continue}if(B<56320){(k-=3)>-1&&J.push(239,191,189),Z=B;continue}B=(Z-55296<<10|B-56320)+65536}else Z&&(k-=3)>-1&&J.push(239,191,189);if(Z=null,B<128){if((k-=1)<0)break;J.push(B)}else if(B<2048){if((k-=2)<0)break;J.push(B>>6|192,B&63|128)}else if(B<65536){if((k-=3)<0)break;J.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((k-=4)<0)break;J.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return J}function re(ee){for(var k=[],B=0;B<ee.length;++B)k.push(ee.charCodeAt(B)&255);return k}function ne(ee,k){for(var B,Q,Z,J=[],K=0;K<ee.length&&!((k-=2)<0);++K)B=ee.charCodeAt(K),Q=B>>8,Z=B%256,J.push(Z),J.push(Q);return J}function ie(ee){return e.toByteArray(W(ee))}function oe(ee,k,B,Q){for(var Z=0;Z<Q&&!(Z+B>=k.length||Z>=ee.length);++Z)k[Z+B]=ee[Z];return Z}function ye(ee,k){return ee instanceof k||ee!=null&&ee.constructor!=null&&ee.constructor.name!=null&&ee.constructor.name===k.name}function M(ee){return ee!==ee}var ge=function(){for(var ee="0123456789abcdef",k=new Array(256),B=0;B<16;++B)for(var Q=B*16,Z=0;Z<16;++Z)k[Q+Z]=ee[B]+ee[Z];return k}()}(Yx)),Yx}var Zx={},Jx={},ev,mS;function eT(){return mS||(mS=1,ev=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;e[t]=a;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==a||l.enumerable!==!0)return!1}return!0}),ev}var tv,pS;function Wy(){if(pS)return tv;pS=1;var r=eT();return tv=function(){return r()&&!!Symbol.toStringTag},tv}var rv,gS;function tT(){return gS||(gS=1,rv=Object),rv}var nv,xS;function gO(){return xS||(xS=1,nv=Error),nv}var iv,vS;function xO(){return vS||(vS=1,iv=EvalError),iv}var av,yS;function vO(){return yS||(yS=1,av=RangeError),av}var sv,bS;function yO(){return bS||(bS=1,sv=ReferenceError),sv}var ov,wS;function rT(){return wS||(wS=1,ov=SyntaxError),ov}var lv,_S;function kf(){return _S||(_S=1,lv=TypeError),lv}var cv,NS;function bO(){return NS||(NS=1,cv=URIError),cv}var uv,SS;function wO(){return SS||(SS=1,uv=Math.abs),uv}var dv,jS;function _O(){return jS||(jS=1,dv=Math.floor),dv}var fv,ES;function NO(){return ES||(ES=1,fv=Math.max),fv}var hv,AS;function SO(){return AS||(AS=1,hv=Math.min),hv}var mv,TS;function jO(){return TS||(TS=1,mv=Math.pow),mv}var pv,CS;function EO(){return CS||(CS=1,pv=Math.round),pv}var gv,DS;function AO(){return DS||(DS=1,gv=Number.isNaN||function(e){return e!==e}),gv}var xv,kS;function TO(){if(kS)return xv;kS=1;var r=AO();return xv=function(t){return r(t)||t===0?t:t<0?-1:1},xv}var vv,MS;function CO(){return MS||(MS=1,vv=Object.getOwnPropertyDescriptor),vv}var yv,FS;function Mf(){if(FS)return yv;FS=1;var r=CO();if(r)try{r([],"length")}catch{r=null}return yv=r,yv}var bv,OS;function ap(){if(OS)return bv;OS=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return bv=r,bv}var wv,BS;function DO(){if(BS)return wv;BS=1;var r=typeof Symbol<"u"&&Symbol,e=eT();return wv=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},wv}var _v,RS;function nT(){return RS||(RS=1,_v=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_v}var Nv,LS;function iT(){if(LS)return Nv;LS=1;var r=tT();return Nv=r.getPrototypeOf||null,Nv}var Sv,IS;function kO(){if(IS)return Sv;IS=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",a=function(u,c){for(var d=[],h=0;h<u.length;h+=1)d[h]=u[h];for(var g=0;g<c.length;g+=1)d[g+u.length]=c[g];return d},s=function(u,c){for(var d=[],h=c,g=0;h<u.length;h+=1,g+=1)d[g]=u[h];return d},o=function(l,u){for(var c="",d=0;d<l.length;d+=1)c+=l[d],d+1<l.length&&(c+=u);return c};return Sv=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var d=s(arguments,1),h,g=function(){if(this instanceof h){var y=c.apply(this,a(d,arguments));return Object(y)===y?y:this}return c.apply(u,a(d,arguments))},m=t(0,c.length-d.length),v=[],x=0;x<m;x++)v[x]="$"+x;if(h=Function("binder","return function ("+o(v,",")+"){ return binder.apply(this,arguments); }")(g),c.prototype){var b=function(){};b.prototype=c.prototype,h.prototype=new b,b.prototype=null}return h},Sv}var jv,zS;function Ff(){if(zS)return jv;zS=1;var r=kO();return jv=Function.prototype.bind||r,jv}var Ev,PS;function Ky(){return PS||(PS=1,Ev=Function.prototype.call),Ev}var Av,qS;function aT(){return qS||(qS=1,Av=Function.prototype.apply),Av}var Tv,$S;function MO(){return $S||($S=1,Tv=typeof Reflect<"u"&&Reflect&&Reflect.apply),Tv}var Cv,US;function FO(){if(US)return Cv;US=1;var r=Ff(),e=aT(),t=Ky(),n=MO();return Cv=n||r.call(t,e),Cv}var Dv,HS;function OO(){if(HS)return Dv;HS=1;var r=Ff(),e=kf(),t=Ky(),n=FO();return Dv=function(s){if(s.length<1||typeof s[0]!="function")throw new e("a function is required");return n(r,t,s)},Dv}var kv,VS;function BO(){if(VS)return kv;VS=1;var r=OO(),e=Mf(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!t&&e&&e(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return kv=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(l){return s(l==null?l:a(l))}:!1,kv}var Mv,GS;function RO(){if(GS)return Mv;GS=1;var r=nT(),e=iT(),t=BO();return Mv=r?function(a){return r(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:t?function(a){return t(a)}:null,Mv}var Fv,QS;function LO(){if(QS)return Fv;QS=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Ff();return Fv=t.call(r,e),Fv}var Ov,WS;function Xy(){if(WS)return Ov;WS=1;var r,e=tT(),t=gO(),n=xO(),a=vO(),s=yO(),o=rT(),l=kf(),u=bO(),c=wO(),d=_O(),h=NO(),g=SO(),m=jO(),v=EO(),x=TO(),b=Function,y=function(re){try{return b('"use strict"; return ('+re+").constructor;")()}catch{}},S=Mf(),_=ap(),N=function(){throw new l},j=S?function(){try{return arguments.callee,N}catch{try{return S(arguments,"callee").get}catch{return N}}}():N,E=DO()(),T=RO(),F=iT(),A=nT(),R=aT(),I=Ky(),O={},U=typeof Uint8Array>"u"||!T?r:T(Uint8Array),D={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":E&&T?T([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&T?T(T([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!E||!T?r:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":S,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!E||!T?r:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&T?T(""[Symbol.iterator]()):r,"%Symbol%":E?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":j,"%TypedArray%":U,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":I,"%Function.prototype.apply%":R,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":F,"%Math.abs%":c,"%Math.floor%":d,"%Math.max%":h,"%Math.min%":g,"%Math.pow%":m,"%Math.round%":v,"%Math.sign%":x,"%Reflect.getPrototypeOf%":A};if(T)try{null.error}catch(re){var H=T(T(re));D["%Error.prototype%"]=H}var P=function re(ne){var ie;if(ne==="%AsyncFunction%")ie=y("async function () {}");else if(ne==="%GeneratorFunction%")ie=y("function* () {}");else if(ne==="%AsyncGeneratorFunction%")ie=y("async function* () {}");else if(ne==="%AsyncGenerator%"){var oe=re("%AsyncGeneratorFunction%");oe&&(ie=oe.prototype)}else if(ne==="%AsyncIteratorPrototype%"){var ye=re("%AsyncGenerator%");ye&&T&&(ie=T(ye.prototype))}return D[ne]=ie,ie},G={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ue=Ff(),le=LO(),pe=ue.call(I,Array.prototype.concat),de=ue.call(R,Array.prototype.splice),L=ue.call(I,String.prototype.replace),X=ue.call(I,String.prototype.slice),V=ue.call(I,RegExp.prototype.exec),se=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ae=/\\(\\)?/g,W=function(ne){var ie=X(ne,0,1),oe=X(ne,-1);if(ie==="%"&&oe!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(oe==="%"&&ie!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var ye=[];return L(ne,se,function(M,ge,ee,k){ye[ye.length]=ee?L(k,ae,"$1"):ge||M}),ye},z=function(ne,ie){var oe=ne,ye;if(le(G,oe)&&(ye=G[oe],oe="%"+ye[0]+"%"),le(D,oe)){var M=D[oe];if(M===O&&(M=P(oe)),typeof M>"u"&&!ie)throw new l("intrinsic "+ne+" exists, but is not available. Please file an issue!");return{alias:ye,name:oe,value:M}}throw new o("intrinsic "+ne+" does not exist!")};return Ov=function(ne,ie){if(typeof ne!="string"||ne.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ie!="boolean")throw new l('"allowMissing" argument must be a boolean');if(V(/^%?[^%]*%?$/,ne)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var oe=W(ne),ye=oe.length>0?oe[0]:"",M=z("%"+ye+"%",ie),ge=M.name,ee=M.value,k=!1,B=M.alias;B&&(ye=B[0],de(oe,pe([0,1],B)));for(var Q=1,Z=!0;Q<oe.length;Q+=1){var J=oe[Q],K=X(J,0,1),te=X(J,-1);if((K==='"'||K==="'"||K==="`"||te==='"'||te==="'"||te==="`")&&K!==te)throw new o("property names with quotes must have matching quotes");if((J==="constructor"||!Z)&&(k=!0),ye+="."+J,ge="%"+ye+"%",le(D,ge))ee=D[ge];else if(ee!=null){if(!(J in ee)){if(!ie)throw new l("base intrinsic for "+ne+" exists, but the property is not available.");return}if(S&&Q+1>=oe.length){var me=S(ee,J);Z=!!me,Z&&"get"in me&&!("originalValue"in me.get)?ee=me.get:ee=ee[J]}else Z=le(ee,J),ee=ee[J];Z&&!k&&(D[ge]=ee)}}return ee},Ov}var Bv={exports:{}},Rv,KS;function IO(){if(KS)return Rv;KS=1;var r=ap(),e=rT(),t=kf(),n=Mf();return Rv=function(s,o,l){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,g=!!n&&n(s,o);if(r)r(s,o,{configurable:d===null&&g?g.configurable:!d,enumerable:u===null&&g?g.enumerable:!u,value:l,writable:c===null&&g?g.writable:!c});else if(h||!u&&!c&&!d)s[o]=l;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Rv}var Lv,XS;function zO(){if(XS)return Lv;XS=1;var r=ap(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},Lv=e,Lv}var Iv,YS;function PO(){if(YS)return Iv;YS=1;var r=Xy(),e=IO(),t=zO()(),n=Mf(),a=kf(),s=r("%Math.floor%");return Iv=function(l,u){if(typeof l!="function")throw new a("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||s(u)!==u)throw new a("`length` must be a positive 32-bit integer");var c=arguments.length>2&&!!arguments[2],d=!0,h=!0;if("length"in l&&n){var g=n(l,"length");g&&!g.configurable&&(d=!1),g&&!g.writable&&(h=!1)}return(d||h||!c)&&(t?e(l,"length",u,!0,!0):e(l,"length",u)),l},Iv}var ZS;function sT(){return ZS||(ZS=1,function(r){var e=Ff(),t=Xy(),n=PO(),a=kf(),s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),l=t("%Reflect.apply%",!0)||e.call(o,s),u=ap(),c=t("%Math.max%");r.exports=function(g){if(typeof g!="function")throw new a("a function is required");var m=l(e,o,arguments);return n(m,1+c(0,g.length-(arguments.length-1)),!0)};var d=function(){return l(e,s,arguments)};u?u(r.exports,"apply",{value:d}):r.exports.apply=d}(Bv)),Bv.exports}var zv,JS;function oT(){if(JS)return zv;JS=1;var r=Xy(),e=sT(),t=e(r("String.prototype.indexOf"));return zv=function(a,s){var o=r(a,!!s);return typeof o=="function"&&t(a,".prototype.")>-1?e(o):o},zv}var Pv,e4;function qO(){if(e4)return Pv;e4=1;var r=Wy()(),e=oT(),t=e("Object.prototype.toString"),n=function(l){return r&&l&&typeof l=="object"&&Symbol.toStringTag in l?!1:t(l)==="[object Arguments]"},a=function(l){return n(l)?!0:l!==null&&typeof l=="object"&&typeof l.length=="number"&&l.length>=0&&t(l)!=="[object Array]"&&t(l.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=a,Pv=s?n:a,Pv}var qv,t4;function $O(){if(t4)return qv;t4=1;var r=Object.prototype.toString,e=Function.prototype.toString,t=/^\s*(?:function)?\*/,n=Wy()(),a=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},o;return qv=function(u){if(typeof u!="function")return!1;if(t.test(e.call(u)))return!0;if(!n){var c=r.call(u);return c==="[object GeneratorFunction]"}if(!a)return!1;if(typeof o>"u"){var d=s();o=d?a(d):!1}return a(u)===o},qv}var $v,r4;function UO(){if(r4)return $v;r4=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(S){S!==n&&(e=null)}else e=null;var a=/^\s*class\b/,s=function(_){try{var N=r.call(_);return a.test(N)}catch{return!1}},o=function(_){try{return s(_)?!1:(r.call(_),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",c="[object Function]",d="[object GeneratorFunction]",h="[object HTMLAllCollection]",g="[object HTML document.all class]",m="[object HTMLCollection]",v=typeof Symbol=="function"&&!!Symbol.toStringTag,x=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var y=document.all;l.call(y)===l.call(document.all)&&(b=function(_){if((x||!_)&&(typeof _>"u"||typeof _=="object"))try{var N=l.call(_);return(N===h||N===g||N===m||N===u)&&_("")==null}catch{}return!1})}return $v=e?function(_){if(b(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;try{e(_,null,t)}catch(N){if(N!==n)return!1}return!s(_)&&o(_)}:function(_){if(b(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;if(v)return o(_);if(s(_))return!1;var N=l.call(_);return N!==c&&N!==d&&!/^\[object HTML/.test(N)?!1:o(_)},$v}var Uv,n4;function HO(){if(n4)return Uv;n4=1;var r=UO(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(u,c,d){for(var h=0,g=u.length;h<g;h++)t.call(u,h)&&(d==null?c(u[h],h,u):c.call(d,u[h],h,u))},a=function(u,c,d){for(var h=0,g=u.length;h<g;h++)d==null?c(u.charAt(h),h,u):c.call(d,u.charAt(h),h,u)},s=function(u,c,d){for(var h in u)t.call(u,h)&&(d==null?c(u[h],h,u):c.call(d,u[h],h,u))},o=function(u,c,d){if(!r(c))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=d),e.call(u)==="[object Array]"?n(u,c,h):typeof u=="string"?a(u,c,h):s(u,c,h)};return Uv=o,Uv}var Hv,i4;function VO(){return i4||(i4=1,Hv=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Hv}var Vv,a4;function GO(){if(a4)return Vv;a4=1;var r=VO(),e=typeof globalThis>"u"?hs:globalThis;return Vv=function(){for(var n=[],a=0;a<r.length;a++)typeof e[r[a]]=="function"&&(n[n.length]=r[a]);return n},Vv}var Gv,s4;function lT(){if(s4)return Gv;s4=1;var r=HO(),e=GO(),t=sT(),n=oT(),a=Mf(),s=n("Object.prototype.toString"),o=Wy()(),l=typeof globalThis>"u"?hs:globalThis,u=e(),c=n("String.prototype.slice"),d=Object.getPrototypeOf,h=n("Array.prototype.indexOf",!0)||function(b,y){for(var S=0;S<b.length;S+=1)if(b[S]===y)return S;return-1},g={__proto__:null};o&&a&&d?r(u,function(x){var b=new l[x];if(Symbol.toStringTag in b){var y=d(b),S=a(y,Symbol.toStringTag);if(!S){var _=d(y);S=a(_,Symbol.toStringTag)}g["$"+x]=t(S.get)}}):r(u,function(x){var b=new l[x],y=b.slice||b.set;y&&(g["$"+x]=t(y))});var m=function(b){var y=!1;return r(g,function(S,_){if(!y)try{"$"+S(b)===_&&(y=c(_,1))}catch{}}),y},v=function(b){var y=!1;return r(g,function(S,_){if(!y)try{S(b),y=c(_,1)}catch{}}),y};return Gv=function(b){if(!b||typeof b!="object")return!1;if(!o){var y=c(s(b),8,-1);return h(u,y)>-1?y:y!=="Object"?!1:v(b)}return a?m(b):null},Gv}var Qv,o4;function QO(){if(o4)return Qv;o4=1;var r=lT();return Qv=function(t){return!!r(t)},Qv}var l4;function WO(){return l4||(l4=1,function(r){var e=qO(),t=$O(),n=lT(),a=QO();function s(Q){return Q.call.bind(Q)}var o=typeof BigInt<"u",l=typeof Symbol<"u",u=s(Object.prototype.toString),c=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(o)var g=s(BigInt.prototype.valueOf);if(l)var m=s(Symbol.prototype.valueOf);function v(Q,Z){if(typeof Q!="object")return!1;try{return Z(Q),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=a;function x(Q){return typeof Promise<"u"&&Q instanceof Promise||Q!==null&&typeof Q=="object"&&typeof Q.then=="function"&&typeof Q.catch=="function"}r.isPromise=x;function b(Q){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Q):a(Q)||X(Q)}r.isArrayBufferView=b;function y(Q){return n(Q)==="Uint8Array"}r.isUint8Array=y;function S(Q){return n(Q)==="Uint8ClampedArray"}r.isUint8ClampedArray=S;function _(Q){return n(Q)==="Uint16Array"}r.isUint16Array=_;function N(Q){return n(Q)==="Uint32Array"}r.isUint32Array=N;function j(Q){return n(Q)==="Int8Array"}r.isInt8Array=j;function E(Q){return n(Q)==="Int16Array"}r.isInt16Array=E;function T(Q){return n(Q)==="Int32Array"}r.isInt32Array=T;function F(Q){return n(Q)==="Float32Array"}r.isFloat32Array=F;function A(Q){return n(Q)==="Float64Array"}r.isFloat64Array=A;function R(Q){return n(Q)==="BigInt64Array"}r.isBigInt64Array=R;function I(Q){return n(Q)==="BigUint64Array"}r.isBigUint64Array=I;function O(Q){return u(Q)==="[object Map]"}O.working=typeof Map<"u"&&O(new Map);function U(Q){return typeof Map>"u"?!1:O.working?O(Q):Q instanceof Map}r.isMap=U;function D(Q){return u(Q)==="[object Set]"}D.working=typeof Set<"u"&&D(new Set);function H(Q){return typeof Set>"u"?!1:D.working?D(Q):Q instanceof Set}r.isSet=H;function P(Q){return u(Q)==="[object WeakMap]"}P.working=typeof WeakMap<"u"&&P(new WeakMap);function G(Q){return typeof WeakMap>"u"?!1:P.working?P(Q):Q instanceof WeakMap}r.isWeakMap=G;function ue(Q){return u(Q)==="[object WeakSet]"}ue.working=typeof WeakSet<"u"&&ue(new WeakSet);function le(Q){return ue(Q)}r.isWeakSet=le;function pe(Q){return u(Q)==="[object ArrayBuffer]"}pe.working=typeof ArrayBuffer<"u"&&pe(new ArrayBuffer);function de(Q){return typeof ArrayBuffer>"u"?!1:pe.working?pe(Q):Q instanceof ArrayBuffer}r.isArrayBuffer=de;function L(Q){return u(Q)==="[object DataView]"}L.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&L(new DataView(new ArrayBuffer(1),0,1));function X(Q){return typeof DataView>"u"?!1:L.working?L(Q):Q instanceof DataView}r.isDataView=X;var V=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function se(Q){return u(Q)==="[object SharedArrayBuffer]"}function ae(Q){return typeof V>"u"?!1:(typeof se.working>"u"&&(se.working=se(new V)),se.working?se(Q):Q instanceof V)}r.isSharedArrayBuffer=ae;function W(Q){return u(Q)==="[object AsyncFunction]"}r.isAsyncFunction=W;function z(Q){return u(Q)==="[object Map Iterator]"}r.isMapIterator=z;function re(Q){return u(Q)==="[object Set Iterator]"}r.isSetIterator=re;function ne(Q){return u(Q)==="[object Generator]"}r.isGeneratorObject=ne;function ie(Q){return u(Q)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=ie;function oe(Q){return v(Q,c)}r.isNumberObject=oe;function ye(Q){return v(Q,d)}r.isStringObject=ye;function M(Q){return v(Q,h)}r.isBooleanObject=M;function ge(Q){return o&&v(Q,g)}r.isBigIntObject=ge;function ee(Q){return l&&v(Q,m)}r.isSymbolObject=ee;function k(Q){return oe(Q)||ye(Q)||M(Q)||ge(Q)||ee(Q)}r.isBoxedPrimitive=k;function B(Q){return typeof Uint8Array<"u"&&(de(Q)||ae(Q))}r.isAnyArrayBuffer=B,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Q){Object.defineProperty(r,Q,{enumerable:!1,value:function(){throw new Error(Q+" is not supported in userland")}})})}(Jx)),Jx}var Wv,c4;function KO(){return c4||(c4=1,Wv=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),Wv}var u4;function cT(){return u4||(u4=1,function(r){var e=Object.getOwnPropertyDescriptors||function(X){for(var V=Object.keys(X),se={},ae=0;ae<V.length;ae++)se[V[ae]]=Object.getOwnPropertyDescriptor(X,V[ae]);return se},t=/%[sdj%]/g;r.format=function(L){if(!j(L)){for(var X=[],V=0;V<arguments.length;V++)X.push(o(arguments[V]));return X.join(" ")}for(var V=1,se=arguments,ae=se.length,W=String(L).replace(t,function(re){if(re==="%%")return"%";if(V>=ae)return re;switch(re){case"%s":return String(se[V++]);case"%d":return Number(se[V++]);case"%j":try{return JSON.stringify(se[V++])}catch{return"[Circular]"}default:return re}}),z=se[V];V<ae;z=se[++V])S(z)||!A(z)?W+=" "+z:W+=" "+o(z);return W},r.deprecate=function(L,X){if(typeof sr<"u"&&sr.noDeprecation===!0)return L;if(typeof sr>"u")return function(){return r.deprecate(L,X).apply(this,arguments)};var V=!1;function se(){if(!V){if(sr.throwDeprecation)throw new Error(X);sr.traceDeprecation?console.trace(X):console.error(X),V=!0}return L.apply(this,arguments)}return se};var n={},a=/^$/;if(sr.env.NODE_DEBUG){var s=sr.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}r.debuglog=function(L){if(L=L.toUpperCase(),!n[L])if(a.test(L)){var X=sr.pid;n[L]=function(){var V=r.format.apply(r,arguments);console.error("%s %d: %s",L,X,V)}}else n[L]=function(){};return n[L]};function o(L,X){var V={seen:[],stylize:u};return arguments.length>=3&&(V.depth=arguments[2]),arguments.length>=4&&(V.colors=arguments[3]),y(X)?V.showHidden=X:X&&r._extend(V,X),T(V.showHidden)&&(V.showHidden=!1),T(V.depth)&&(V.depth=2),T(V.colors)&&(V.colors=!1),T(V.customInspect)&&(V.customInspect=!0),V.colors&&(V.stylize=l),d(V,L,V.depth)}r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(L,X){var V=o.styles[X];return V?"\x1B["+o.colors[V][0]+"m"+L+"\x1B["+o.colors[V][1]+"m":L}function u(L,X){return L}function c(L){var X={};return L.forEach(function(V,se){X[V]=!0}),X}function d(L,X,V){if(L.customInspect&&X&&O(X.inspect)&&X.inspect!==r.inspect&&!(X.constructor&&X.constructor.prototype===X)){var se=X.inspect(V,L);return j(se)||(se=d(L,se,V)),se}var ae=h(L,X);if(ae)return ae;var W=Object.keys(X),z=c(W);if(L.showHidden&&(W=Object.getOwnPropertyNames(X)),I(X)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return g(X);if(W.length===0){if(O(X)){var re=X.name?": "+X.name:"";return L.stylize("[Function"+re+"]","special")}if(F(X))return L.stylize(RegExp.prototype.toString.call(X),"regexp");if(R(X))return L.stylize(Date.prototype.toString.call(X),"date");if(I(X))return g(X)}var ne="",ie=!1,oe=["{","}"];if(b(X)&&(ie=!0,oe=["[","]"]),O(X)){var ye=X.name?": "+X.name:"";ne=" [Function"+ye+"]"}if(F(X)&&(ne=" "+RegExp.prototype.toString.call(X)),R(X)&&(ne=" "+Date.prototype.toUTCString.call(X)),I(X)&&(ne=" "+g(X)),W.length===0&&(!ie||X.length==0))return oe[0]+ne+oe[1];if(V<0)return F(X)?L.stylize(RegExp.prototype.toString.call(X),"regexp"):L.stylize("[Object]","special");L.seen.push(X);var M;return ie?M=m(L,X,V,z,W):M=W.map(function(ge){return v(L,X,V,z,ge,ie)}),L.seen.pop(),x(M,ne,oe)}function h(L,X){if(T(X))return L.stylize("undefined","undefined");if(j(X)){var V="'"+JSON.stringify(X).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(V,"string")}if(N(X))return L.stylize(""+X,"number");if(y(X))return L.stylize(""+X,"boolean");if(S(X))return L.stylize("null","null")}function g(L){return"["+Error.prototype.toString.call(L)+"]"}function m(L,X,V,se,ae){for(var W=[],z=0,re=X.length;z<re;++z)ue(X,String(z))?W.push(v(L,X,V,se,String(z),!0)):W.push("");return ae.forEach(function(ne){ne.match(/^\d+$/)||W.push(v(L,X,V,se,ne,!0))}),W}function v(L,X,V,se,ae,W){var z,re,ne;if(ne=Object.getOwnPropertyDescriptor(X,ae)||{value:X[ae]},ne.get?ne.set?re=L.stylize("[Getter/Setter]","special"):re=L.stylize("[Getter]","special"):ne.set&&(re=L.stylize("[Setter]","special")),ue(se,ae)||(z="["+ae+"]"),re||(L.seen.indexOf(ne.value)<0?(S(V)?re=d(L,ne.value,null):re=d(L,ne.value,V-1),re.indexOf(`
`)>-1&&(W?re=re.split(`
`).map(function(ie){return"  "+ie}).join(`
`).slice(2):re=`
`+re.split(`
`).map(function(ie){return"   "+ie}).join(`
`))):re=L.stylize("[Circular]","special")),T(z)){if(W&&ae.match(/^\d+$/))return re;z=JSON.stringify(""+ae),z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(z=z.slice(1,-1),z=L.stylize(z,"name")):(z=z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),z=L.stylize(z,"string"))}return z+": "+re}function x(L,X,V){var se=L.reduce(function(ae,W){return W.indexOf(`
`)>=0,ae+W.replace(/\u001b\[\d\d?m/g,"").length+1},0);return se>60?V[0]+(X===""?"":X+`
 `)+" "+L.join(`,
  `)+" "+V[1]:V[0]+X+" "+L.join(", ")+" "+V[1]}r.types=WO();function b(L){return Array.isArray(L)}r.isArray=b;function y(L){return typeof L=="boolean"}r.isBoolean=y;function S(L){return L===null}r.isNull=S;function _(L){return L==null}r.isNullOrUndefined=_;function N(L){return typeof L=="number"}r.isNumber=N;function j(L){return typeof L=="string"}r.isString=j;function E(L){return typeof L=="symbol"}r.isSymbol=E;function T(L){return L===void 0}r.isUndefined=T;function F(L){return A(L)&&D(L)==="[object RegExp]"}r.isRegExp=F,r.types.isRegExp=F;function A(L){return typeof L=="object"&&L!==null}r.isObject=A;function R(L){return A(L)&&D(L)==="[object Date]"}r.isDate=R,r.types.isDate=R;function I(L){return A(L)&&(D(L)==="[object Error]"||L instanceof Error)}r.isError=I,r.types.isNativeError=I;function O(L){return typeof L=="function"}r.isFunction=O;function U(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}r.isPrimitive=U,r.isBuffer=KO();function D(L){return Object.prototype.toString.call(L)}function H(L){return L<10?"0"+L.toString(10):L.toString(10)}var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function G(){var L=new Date,X=[H(L.getHours()),H(L.getMinutes()),H(L.getSeconds())].join(":");return[L.getDate(),P[L.getMonth()],X].join(" ")}r.log=function(){console.log("%s - %s",G(),r.format.apply(r,arguments))},r.inherits=Yo(),r._extend=function(L,X){if(!X||!A(X))return L;for(var V=Object.keys(X),se=V.length;se--;)L[V[se]]=X[V[se]];return L};function ue(L,X){return Object.prototype.hasOwnProperty.call(L,X)}var le=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');if(le&&X[le]){var V=X[le];if(typeof V!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(V,le,{value:V,enumerable:!1,writable:!1,configurable:!0}),V}function V(){for(var se,ae,W=new Promise(function(ne,ie){se=ne,ae=ie}),z=[],re=0;re<arguments.length;re++)z.push(arguments[re]);z.push(function(ne,ie){ne?ae(ne):se(ie)});try{X.apply(this,z)}catch(ne){ae(ne)}return W}return Object.setPrototypeOf(V,Object.getPrototypeOf(X)),le&&Object.defineProperty(V,le,{value:V,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(V,e(X))},r.promisify.custom=le;function pe(L,X){if(!L){var V=new Error("Promise was rejected with a falsy value");V.reason=L,L=V}return X(L)}function de(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function X(){for(var V=[],se=0;se<arguments.length;se++)V.push(arguments[se]);var ae=V.pop();if(typeof ae!="function")throw new TypeError("The last argument must be of type Function");var W=this,z=function(){return ae.apply(W,arguments)};L.apply(this,V).then(function(re){sr.nextTick(z.bind(null,null,re))},function(re){sr.nextTick(pe.bind(null,re,z))})}return Object.setPrototypeOf(X,Object.getPrototypeOf(L)),Object.defineProperties(X,e(L)),X}r.callbackify=de}(Zx)),Zx}var Kv,d4;function XO(){if(d4)return Kv;d4=1;function r(g,m){var v=Object.keys(g);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(g);m&&(x=x.filter(function(b){return Object.getOwnPropertyDescriptor(g,b).enumerable})),v.push.apply(v,x)}return v}function e(g){for(var m=1;m<arguments.length;m++){var v=arguments[m]!=null?arguments[m]:{};m%2?r(Object(v),!0).forEach(function(x){t(g,x,v[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):r(Object(v)).forEach(function(x){Object.defineProperty(g,x,Object.getOwnPropertyDescriptor(v,x))})}return g}function t(g,m,v){return m in g?Object.defineProperty(g,m,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[m]=v,g}function n(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function a(g,m){for(var v=0;v<m.length;v++){var x=m[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(g,x.key,x)}}function s(g,m,v){return m&&a(g.prototype,m),g}var o=ip(),l=o.Buffer,u=cT(),c=u.inspect,d=c&&c.custom||"inspect";function h(g,m,v){l.prototype.copy.call(g,m,v)}return Kv=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return s(g,[{key:"push",value:function(v){var x={data:v,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(v){var x={data:v,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var x=this.head,b=""+x.data;x=x.next;)b+=v+x.data;return b}},{key:"concat",value:function(v){if(this.length===0)return l.alloc(0);for(var x=l.allocUnsafe(v>>>0),b=this.head,y=0;b;)h(b.data,x,y),y+=b.data.length,b=b.next;return x}},{key:"consume",value:function(v,x){var b;return v<this.head.data.length?(b=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?b=this.shift():b=x?this._getString(v):this._getBuffer(v),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var x=this.head,b=1,y=x.data;for(v-=y.length;x=x.next;){var S=x.data,_=v>S.length?S.length:v;if(_===S.length?y+=S:y+=S.slice(0,v),v-=_,v===0){_===S.length?(++b,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=S.slice(_));break}++b}return this.length-=b,y}},{key:"_getBuffer",value:function(v){var x=l.allocUnsafe(v),b=this.head,y=1;for(b.data.copy(x),v-=b.data.length;b=b.next;){var S=b.data,_=v>S.length?S.length:v;if(S.copy(x,x.length-v,0,_),v-=_,v===0){_===S.length?(++y,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=S.slice(_));break}++y}return this.length-=y,x}},{key:d,value:function(v,x){return c(this,e({},x,{depth:0,customInspect:!1}))}}]),g}(),Kv}var Xv,f4;function uT(){if(f4)return Xv;f4=1;function r(o,l){var u=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(l?l(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,sr.nextTick(a,this,o)):sr.nextTick(a,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(h){!l&&h?u._writableState?u._writableState.errorEmitted?sr.nextTick(t,u):(u._writableState.errorEmitted=!0,sr.nextTick(e,u,h)):sr.nextTick(e,u,h):l?(sr.nextTick(t,u),l(h)):sr.nextTick(t,u)}),this)}function e(o,l){a(o,l),t(o)}function t(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(o,l){o.emit("error",l)}function s(o,l){var u=o._readableState,c=o._writableState;u&&u.autoDestroy||c&&c.autoDestroy?o.destroy(l):o.emit("error",l)}return Xv={destroy:r,undestroy:n,errorOrDestroy:s},Xv}var Yv={},h4;function Fu(){if(h4)return Yv;h4=1;function r(l,u){l.prototype=Object.create(u.prototype),l.prototype.constructor=l,l.__proto__=u}var e={};function t(l,u,c){c||(c=Error);function d(g,m,v){return typeof u=="string"?u:u(g,m,v)}var h=function(g){r(m,g);function m(v,x,b){return g.call(this,d(v,x,b))||this}return m}(c);h.prototype.name=c.name,h.prototype.code=l,e[l]=h}function n(l,u){if(Array.isArray(l)){var c=l.length;return l=l.map(function(d){return String(d)}),c>2?"one of ".concat(u," ").concat(l.slice(0,c-1).join(", "),", or ")+l[c-1]:c===2?"one of ".concat(u," ").concat(l[0]," or ").concat(l[1]):"of ".concat(u," ").concat(l[0])}else return"of ".concat(u," ").concat(String(l))}function a(l,u,c){return l.substr(0,u.length)===u}function s(l,u,c){return(c===void 0||c>l.length)&&(c=l.length),l.substring(c-u.length,c)===u}function o(l,u,c){return typeof c!="number"&&(c=0),c+u.length>l.length?!1:l.indexOf(u,c)!==-1}return t("ERR_INVALID_OPT_VALUE",function(l,u){return'The value "'+u+'" is invalid for option "'+l+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(l,u,c){var d;typeof u=="string"&&a(u,"not ")?(d="must not be",u=u.replace(/^not /,"")):d="must be";var h;if(s(l," argument"))h="The ".concat(l," ").concat(d," ").concat(n(u,"type"));else{var g=o(l,".")?"property":"argument";h='The "'.concat(l,'" ').concat(g," ").concat(d," ").concat(n(u,"type"))}return h+=". Received type ".concat(typeof c),h},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Yv.codes=e,Yv}var Zv,m4;function dT(){if(m4)return Zv;m4=1;var r=Fu().codes.ERR_INVALID_OPT_VALUE;function e(n,a,s){return n.highWaterMark!=null?n.highWaterMark:a?n[s]:null}function t(n,a,s,o){var l=e(a,o,s);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var u=o?s:"highWaterMark";throw new r(u,l)}return Math.floor(l)}return n.objectMode?16:16*1024}return Zv={getHighWaterMark:t},Zv}var Jv,p4;function YO(){if(p4)return Jv;p4=1,Jv=r;function r(t,n){if(e("noDeprecation"))return t;var a=!1;function s(){if(!a){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),a=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!hs.localStorage)return!1}catch{return!1}var n=hs.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return Jv}var e1,g4;function fT(){if(g4)return e1;g4=1,e1=F;function r(ae){var W=this;this.next=null,this.entry=null,this.finish=function(){se(W,ae)}}var e;F.WritableState=E;var t={deprecate:YO()},n=J5(),a=ip().Buffer,s=hs.Uint8Array||function(){};function o(ae){return a.from(ae)}function l(ae){return a.isBuffer(ae)||ae instanceof s}var u=uT(),c=dT(),d=c.getHighWaterMark,h=Fu().codes,g=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,v=h.ERR_MULTIPLE_CALLBACK,x=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,S=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,N=u.errorOrDestroy;Yo()(F,n);function j(){}function E(ae,W,z){e=e||yu(),ae=ae||{},typeof z!="boolean"&&(z=W instanceof e),this.objectMode=!!ae.objectMode,z&&(this.objectMode=this.objectMode||!!ae.writableObjectMode),this.highWaterMark=d(this,ae,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=ae.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=ae.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){P(W,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ae.emitClose!==!1,this.autoDestroy=!!ae.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var W=this.bufferedRequest,z=[];W;)z.push(W),W=W.next;return z},function(){try{Object.defineProperty(E.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var T;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(W){return T.call(this,W)?!0:this!==F?!1:W&&W._writableState instanceof E}})):T=function(W){return W instanceof this};function F(ae){e=e||yu();var W=this instanceof e;if(!W&&!T.call(F,this))return new F(ae);this._writableState=new E(ae,this,W),this.writable=!0,ae&&(typeof ae.write=="function"&&(this._write=ae.write),typeof ae.writev=="function"&&(this._writev=ae.writev),typeof ae.destroy=="function"&&(this._destroy=ae.destroy),typeof ae.final=="function"&&(this._final=ae.final)),n.call(this)}F.prototype.pipe=function(){N(this,new x)};function A(ae,W){var z=new S;N(ae,z),sr.nextTick(W,z)}function R(ae,W,z,re){var ne;return z===null?ne=new y:typeof z!="string"&&!W.objectMode&&(ne=new g("chunk",["string","Buffer"],z)),ne?(N(ae,ne),sr.nextTick(re,ne),!1):!0}F.prototype.write=function(ae,W,z){var re=this._writableState,ne=!1,ie=!re.objectMode&&l(ae);return ie&&!a.isBuffer(ae)&&(ae=o(ae)),typeof W=="function"&&(z=W,W=null),ie?W="buffer":W||(W=re.defaultEncoding),typeof z!="function"&&(z=j),re.ending?A(this,z):(ie||R(this,re,ae,z))&&(re.pendingcb++,ne=O(this,re,ie,ae,W,z)),ne},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var ae=this._writableState;ae.corked&&(ae.corked--,!ae.writing&&!ae.corked&&!ae.bufferProcessing&&ae.bufferedRequest&&le(this,ae))},F.prototype.setDefaultEncoding=function(W){if(typeof W=="string"&&(W=W.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((W+"").toLowerCase())>-1))throw new _(W);return this._writableState.defaultEncoding=W,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function I(ae,W,z){return!ae.objectMode&&ae.decodeStrings!==!1&&typeof W=="string"&&(W=a.from(W,z)),W}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(ae,W,z,re,ne,ie){if(!z){var oe=I(W,re,ne);re!==oe&&(z=!0,ne="buffer",re=oe)}var ye=W.objectMode?1:re.length;W.length+=ye;var M=W.length<W.highWaterMark;if(M||(W.needDrain=!0),W.writing||W.corked){var ge=W.lastBufferedRequest;W.lastBufferedRequest={chunk:re,encoding:ne,isBuf:z,callback:ie,next:null},ge?ge.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else U(ae,W,!1,ye,re,ne,ie);return M}function U(ae,W,z,re,ne,ie,oe){W.writelen=re,W.writecb=oe,W.writing=!0,W.sync=!0,W.destroyed?W.onwrite(new b("write")):z?ae._writev(ne,W.onwrite):ae._write(ne,ie,W.onwrite),W.sync=!1}function D(ae,W,z,re,ne){--W.pendingcb,z?(sr.nextTick(ne,re),sr.nextTick(X,ae,W),ae._writableState.errorEmitted=!0,N(ae,re)):(ne(re),ae._writableState.errorEmitted=!0,N(ae,re),X(ae,W))}function H(ae){ae.writing=!1,ae.writecb=null,ae.length-=ae.writelen,ae.writelen=0}function P(ae,W){var z=ae._writableState,re=z.sync,ne=z.writecb;if(typeof ne!="function")throw new v;if(H(z),W)D(ae,z,re,W,ne);else{var ie=pe(z)||ae.destroyed;!ie&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&le(ae,z),re?sr.nextTick(G,ae,z,ie,ne):G(ae,z,ie,ne)}}function G(ae,W,z,re){z||ue(ae,W),W.pendingcb--,re(),X(ae,W)}function ue(ae,W){W.length===0&&W.needDrain&&(W.needDrain=!1,ae.emit("drain"))}function le(ae,W){W.bufferProcessing=!0;var z=W.bufferedRequest;if(ae._writev&&z&&z.next){var re=W.bufferedRequestCount,ne=new Array(re),ie=W.corkedRequestsFree;ie.entry=z;for(var oe=0,ye=!0;z;)ne[oe]=z,z.isBuf||(ye=!1),z=z.next,oe+=1;ne.allBuffers=ye,U(ae,W,!0,W.length,ne,"",ie.finish),W.pendingcb++,W.lastBufferedRequest=null,ie.next?(W.corkedRequestsFree=ie.next,ie.next=null):W.corkedRequestsFree=new r(W),W.bufferedRequestCount=0}else{for(;z;){var M=z.chunk,ge=z.encoding,ee=z.callback,k=W.objectMode?1:M.length;if(U(ae,W,!1,k,M,ge,ee),z=z.next,W.bufferedRequestCount--,W.writing)break}z===null&&(W.lastBufferedRequest=null)}W.bufferedRequest=z,W.bufferProcessing=!1}F.prototype._write=function(ae,W,z){z(new m("_write()"))},F.prototype._writev=null,F.prototype.end=function(ae,W,z){var re=this._writableState;return typeof ae=="function"?(z=ae,ae=null,W=null):typeof W=="function"&&(z=W,W=null),ae!=null&&this.write(ae,W),re.corked&&(re.corked=1,this.uncork()),re.ending||V(this,re,z),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function pe(ae){return ae.ending&&ae.length===0&&ae.bufferedRequest===null&&!ae.finished&&!ae.writing}function de(ae,W){ae._final(function(z){W.pendingcb--,z&&N(ae,z),W.prefinished=!0,ae.emit("prefinish"),X(ae,W)})}function L(ae,W){!W.prefinished&&!W.finalCalled&&(typeof ae._final=="function"&&!W.destroyed?(W.pendingcb++,W.finalCalled=!0,sr.nextTick(de,ae,W)):(W.prefinished=!0,ae.emit("prefinish")))}function X(ae,W){var z=pe(W);if(z&&(L(ae,W),W.pendingcb===0&&(W.finished=!0,ae.emit("finish"),W.autoDestroy))){var re=ae._readableState;(!re||re.autoDestroy&&re.endEmitted)&&ae.destroy()}return z}function V(ae,W,z){W.ending=!0,X(ae,W),z&&(W.finished?sr.nextTick(z):ae.once("finish",z)),W.ended=!0,ae.writable=!1}function se(ae,W,z){var re=ae.entry;for(ae.entry=null;re;){var ne=re.callback;W.pendingcb--,ne(z),re=re.next}W.corkedRequestsFree.next=ae}return Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(W){this._writableState&&(this._writableState.destroyed=W)}}),F.prototype.destroy=u.destroy,F.prototype._undestroy=u.undestroy,F.prototype._destroy=function(ae,W){W(ae)},e1}var t1,x4;function yu(){if(x4)return t1;x4=1;var r=Object.keys||function(c){var d=[];for(var h in c)d.push(h);return d};t1=o;var e=hT(),t=fT();Yo()(o,e);for(var n=r(t.prototype),a=0;a<n.length;a++){var s=n[a];o.prototype[s]||(o.prototype[s]=t.prototype[s])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),t.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||sr.nextTick(u,this)}function u(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),t1}var r1={},d0={exports:{}},v4;function ZO(){return v4||(v4=1,function(r,e){var t=ip(),n=t.Buffer;function a(o,l){for(var u in o)l[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(a(t,e),e.Buffer=s);function s(o,l,u){return n(o,l,u)}a(n,s),s.from=function(o,l,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,l,u)},s.alloc=function(o,l,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return l!==void 0?typeof u=="string"?c.fill(l,u):c.fill(l):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(d0,d0.exports)),d0.exports}var y4;function fy(){if(y4)return r1;y4=1;var r=ZO().Buffer,e=r.isEncoding||function(y){switch(y=""+y,y&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(y){if(!y)return"utf8";for(var S;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(S)return;y=(""+y).toLowerCase(),S=!0}}function n(y){var S=t(y);if(typeof S!="string"&&(r.isEncoding===e||!e(y)))throw new Error("Unknown encoding: "+y);return S||y}r1.StringDecoder=a;function a(y){this.encoding=n(y);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=g,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=m,this.end=v,S=3;break;default:this.write=x,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(S)}a.prototype.write=function(y){if(y.length===0)return"";var S,_;if(this.lastNeed){if(S=this.fillLast(y),S===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<y.length?S?S+this.text(y,_):this.text(y,_):S||""},a.prototype.end=d,a.prototype.text=c,a.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length};function s(y){return y<=127?0:y>>5===6?2:y>>4===14?3:y>>3===30?4:y>>6===2?-1:-2}function o(y,S,_){var N=S.length-1;if(N<_)return 0;var j=s(S[N]);return j>=0?(j>0&&(y.lastNeed=j-1),j):--N<_||j===-2?0:(j=s(S[N]),j>=0?(j>0&&(y.lastNeed=j-2),j):--N<_||j===-2?0:(j=s(S[N]),j>=0?(j>0&&(j===2?j=0:y.lastNeed=j-3),j):0))}function l(y,S,_){if((S[0]&192)!==128)return y.lastNeed=0,"";if(y.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return y.lastNeed=1,"";if(y.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return y.lastNeed=2,""}}function u(y){var S=this.lastTotal-this.lastNeed,_=l(this,y);if(_!==void 0)return _;if(this.lastNeed<=y.length)return y.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,S,0,y.length),this.lastNeed-=y.length}function c(y,S){var _=o(this,y,S);if(!this.lastNeed)return y.toString("utf8",S);this.lastTotal=_;var N=y.length-(_-this.lastNeed);return y.copy(this.lastChar,0,N),y.toString("utf8",S,N)}function d(y){var S=y&&y.length?this.write(y):"";return this.lastNeed?S+"":S}function h(y,S){if((y.length-S)%2===0){var _=y.toString("utf16le",S);if(_){var N=_.charCodeAt(_.length-1);if(N>=55296&&N<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",S,y.length-1)}function g(y){var S=y&&y.length?this.write(y):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,_)}return S}function m(y,S){var _=(y.length-S)%3;return _===0?y.toString("base64",S):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",S,y.length-_))}function v(y){var S=y&&y.length?this.write(y):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function x(y){return y.toString(this.encoding)}function b(y){return y&&y.length?this.write(y):""}return r1}var n1,b4;function Yy(){if(b4)return n1;b4=1;var r=Fu().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var o=!1;return function(){if(!o){o=!0;for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];s.apply(this,u)}}}function t(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function a(s,o,l){if(typeof o=="function")return a(s,null,o);o||(o={}),l=e(l||t);var u=o.readable||o.readable!==!1&&s.readable,c=o.writable||o.writable!==!1&&s.writable,d=function(){s.writable||g()},h=s._writableState&&s._writableState.finished,g=function(){c=!1,h=!0,u||l.call(s)},m=s._readableState&&s._readableState.endEmitted,v=function(){u=!1,m=!0,c||l.call(s)},x=function(_){l.call(s,_)},b=function(){var _;if(u&&!m)return(!s._readableState||!s._readableState.ended)&&(_=new r),l.call(s,_);if(c&&!h)return(!s._writableState||!s._writableState.ended)&&(_=new r),l.call(s,_)},y=function(){s.req.on("finish",g)};return n(s)?(s.on("complete",g),s.on("abort",b),s.req?y():s.on("request",y)):c&&!s._writableState&&(s.on("end",d),s.on("close",d)),s.on("end",v),s.on("finish",g),o.error!==!1&&s.on("error",x),s.on("close",b),function(){s.removeListener("complete",g),s.removeListener("abort",b),s.removeListener("request",y),s.req&&s.req.removeListener("finish",g),s.removeListener("end",d),s.removeListener("close",d),s.removeListener("finish",g),s.removeListener("end",v),s.removeListener("error",x),s.removeListener("close",b)}}return n1=a,n1}var i1,w4;function JO(){if(w4)return i1;w4=1;var r;function e(y,S,_){return S in y?Object.defineProperty(y,S,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[S]=_,y}var t=Yy(),n=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),l=Symbol("lastPromise"),u=Symbol("handlePromise"),c=Symbol("stream");function d(y,S){return{value:y,done:S}}function h(y){var S=y[n];if(S!==null){var _=y[c].read();_!==null&&(y[l]=null,y[n]=null,y[a]=null,S(d(_,!1)))}}function g(y){sr.nextTick(h,y)}function m(y,S){return function(_,N){y.then(function(){if(S[o]){_(d(void 0,!0));return}S[u](_,N)},N)}}var v=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((r={get stream(){return this[c]},next:function(){var S=this,_=this[s];if(_!==null)return Promise.reject(_);if(this[o])return Promise.resolve(d(void 0,!0));if(this[c].destroyed)return new Promise(function(T,F){sr.nextTick(function(){S[s]?F(S[s]):T(d(void 0,!0))})});var N=this[l],j;if(N)j=new Promise(m(N,this));else{var E=this[c].read();if(E!==null)return Promise.resolve(d(E,!1));j=new Promise(this[u])}return this[l]=j,j}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var S=this;return new Promise(function(_,N){S[c].destroy(null,function(j){if(j){N(j);return}_(d(void 0,!0))})})}),r),v),b=function(S){var _,N=Object.create(x,(_={},e(_,c,{value:S,writable:!0}),e(_,n,{value:null,writable:!0}),e(_,a,{value:null,writable:!0}),e(_,s,{value:null,writable:!0}),e(_,o,{value:S._readableState.endEmitted,writable:!0}),e(_,u,{value:function(E,T){var F=N[c].read();F?(N[l]=null,N[n]=null,N[a]=null,E(d(F,!1))):(N[n]=E,N[a]=T)},writable:!0}),_));return N[l]=null,t(S,function(j){if(j&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"){var E=N[a];E!==null&&(N[l]=null,N[n]=null,N[a]=null,E(j)),N[s]=j;return}var T=N[n];T!==null&&(N[l]=null,N[n]=null,N[a]=null,T(d(void 0,!0))),N[o]=!0}),S.on("readable",g.bind(null,N)),N};return i1=b,i1}var a1,_4;function eB(){return _4||(_4=1,a1=function(){throw new Error("Readable.from is not available in the browser")}),a1}var s1,N4;function hT(){if(N4)return s1;N4=1,s1=A;var r;A.ReadableState=F,Qy().EventEmitter;var e=function(oe,ye){return oe.listeners(ye).length},t=J5(),n=ip().Buffer,a=hs.Uint8Array||function(){};function s(ie){return n.from(ie)}function o(ie){return n.isBuffer(ie)||ie instanceof a}var l=cT(),u;l&&l.debuglog?u=l.debuglog("stream"):u=function(){};var c=XO(),d=uT(),h=dT(),g=h.getHighWaterMark,m=Fu().codes,v=m.ERR_INVALID_ARG_TYPE,x=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,y=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,_,N;Yo()(A,t);var j=d.errorOrDestroy,E=["error","close","destroy","pause","resume"];function T(ie,oe,ye){if(typeof ie.prependListener=="function")return ie.prependListener(oe,ye);!ie._events||!ie._events[oe]?ie.on(oe,ye):Array.isArray(ie._events[oe])?ie._events[oe].unshift(ye):ie._events[oe]=[ye,ie._events[oe]]}function F(ie,oe,ye){r=r||yu(),ie=ie||{},typeof ye!="boolean"&&(ye=oe instanceof r),this.objectMode=!!ie.objectMode,ye&&(this.objectMode=this.objectMode||!!ie.readableObjectMode),this.highWaterMark=g(this,ie,"readableHighWaterMark",ye),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ie.emitClose!==!1,this.autoDestroy=!!ie.autoDestroy,this.destroyed=!1,this.defaultEncoding=ie.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ie.encoding&&(S||(S=fy().StringDecoder),this.decoder=new S(ie.encoding),this.encoding=ie.encoding)}function A(ie){if(r=r||yu(),!(this instanceof A))return new A(ie);var oe=this instanceof r;this._readableState=new F(ie,this,oe),this.readable=!0,ie&&(typeof ie.read=="function"&&(this._read=ie.read),typeof ie.destroy=="function"&&(this._destroy=ie.destroy)),t.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(oe){this._readableState&&(this._readableState.destroyed=oe)}}),A.prototype.destroy=d.destroy,A.prototype._undestroy=d.undestroy,A.prototype._destroy=function(ie,oe){oe(ie)},A.prototype.push=function(ie,oe){var ye=this._readableState,M;return ye.objectMode?M=!0:typeof ie=="string"&&(oe=oe||ye.defaultEncoding,oe!==ye.encoding&&(ie=n.from(ie,oe),oe=""),M=!0),R(this,ie,oe,!1,M)},A.prototype.unshift=function(ie){return R(this,ie,null,!0,!1)};function R(ie,oe,ye,M,ge){u("readableAddChunk",oe);var ee=ie._readableState;if(oe===null)ee.reading=!1,P(ie,ee);else{var k;if(ge||(k=O(ee,oe)),k)j(ie,k);else if(ee.objectMode||oe&&oe.length>0)if(typeof oe!="string"&&!ee.objectMode&&Object.getPrototypeOf(oe)!==n.prototype&&(oe=s(oe)),M)ee.endEmitted?j(ie,new y):I(ie,ee,oe,!0);else if(ee.ended)j(ie,new x);else{if(ee.destroyed)return!1;ee.reading=!1,ee.decoder&&!ye?(oe=ee.decoder.write(oe),ee.objectMode||oe.length!==0?I(ie,ee,oe,!1):le(ie,ee)):I(ie,ee,oe,!1)}else M||(ee.reading=!1,le(ie,ee))}return!ee.ended&&(ee.length<ee.highWaterMark||ee.length===0)}function I(ie,oe,ye,M){oe.flowing&&oe.length===0&&!oe.sync?(oe.awaitDrain=0,ie.emit("data",ye)):(oe.length+=oe.objectMode?1:ye.length,M?oe.buffer.unshift(ye):oe.buffer.push(ye),oe.needReadable&&G(ie)),le(ie,oe)}function O(ie,oe){var ye;return!o(oe)&&typeof oe!="string"&&oe!==void 0&&!ie.objectMode&&(ye=new v("chunk",["string","Buffer","Uint8Array"],oe)),ye}A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(ie){S||(S=fy().StringDecoder);var oe=new S(ie);this._readableState.decoder=oe,this._readableState.encoding=this._readableState.decoder.encoding;for(var ye=this._readableState.buffer.head,M="";ye!==null;)M+=oe.write(ye.data),ye=ye.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var U=1073741824;function D(ie){return ie>=U?ie=U:(ie--,ie|=ie>>>1,ie|=ie>>>2,ie|=ie>>>4,ie|=ie>>>8,ie|=ie>>>16,ie++),ie}function H(ie,oe){return ie<=0||oe.length===0&&oe.ended?0:oe.objectMode?1:ie!==ie?oe.flowing&&oe.length?oe.buffer.head.data.length:oe.length:(ie>oe.highWaterMark&&(oe.highWaterMark=D(ie)),ie<=oe.length?ie:oe.ended?oe.length:(oe.needReadable=!0,0))}A.prototype.read=function(ie){u("read",ie),ie=parseInt(ie,10);var oe=this._readableState,ye=ie;if(ie!==0&&(oe.emittedReadable=!1),ie===0&&oe.needReadable&&((oe.highWaterMark!==0?oe.length>=oe.highWaterMark:oe.length>0)||oe.ended))return u("read: emitReadable",oe.length,oe.ended),oe.length===0&&oe.ended?z(this):G(this),null;if(ie=H(ie,oe),ie===0&&oe.ended)return oe.length===0&&z(this),null;var M=oe.needReadable;u("need readable",M),(oe.length===0||oe.length-ie<oe.highWaterMark)&&(M=!0,u("length less than watermark",M)),oe.ended||oe.reading?(M=!1,u("reading or ended",M)):M&&(u("do read"),oe.reading=!0,oe.sync=!0,oe.length===0&&(oe.needReadable=!0),this._read(oe.highWaterMark),oe.sync=!1,oe.reading||(ie=H(ye,oe)));var ge;return ie>0?ge=W(ie,oe):ge=null,ge===null?(oe.needReadable=oe.length<=oe.highWaterMark,ie=0):(oe.length-=ie,oe.awaitDrain=0),oe.length===0&&(oe.ended||(oe.needReadable=!0),ye!==ie&&oe.ended&&z(this)),ge!==null&&this.emit("data",ge),ge};function P(ie,oe){if(u("onEofChunk"),!oe.ended){if(oe.decoder){var ye=oe.decoder.end();ye&&ye.length&&(oe.buffer.push(ye),oe.length+=oe.objectMode?1:ye.length)}oe.ended=!0,oe.sync?G(ie):(oe.needReadable=!1,oe.emittedReadable||(oe.emittedReadable=!0,ue(ie)))}}function G(ie){var oe=ie._readableState;u("emitReadable",oe.needReadable,oe.emittedReadable),oe.needReadable=!1,oe.emittedReadable||(u("emitReadable",oe.flowing),oe.emittedReadable=!0,sr.nextTick(ue,ie))}function ue(ie){var oe=ie._readableState;u("emitReadable_",oe.destroyed,oe.length,oe.ended),!oe.destroyed&&(oe.length||oe.ended)&&(ie.emit("readable"),oe.emittedReadable=!1),oe.needReadable=!oe.flowing&&!oe.ended&&oe.length<=oe.highWaterMark,ae(ie)}function le(ie,oe){oe.readingMore||(oe.readingMore=!0,sr.nextTick(pe,ie,oe))}function pe(ie,oe){for(;!oe.reading&&!oe.ended&&(oe.length<oe.highWaterMark||oe.flowing&&oe.length===0);){var ye=oe.length;if(u("maybeReadMore read 0"),ie.read(0),ye===oe.length)break}oe.readingMore=!1}A.prototype._read=function(ie){j(this,new b("_read()"))},A.prototype.pipe=function(ie,oe){var ye=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=ie;break;case 1:M.pipes=[M.pipes,ie];break;default:M.pipes.push(ie);break}M.pipesCount+=1,u("pipe count=%d opts=%j",M.pipesCount,oe);var ge=(!oe||oe.end!==!1)&&ie!==sr.stdout&&ie!==sr.stderr,ee=ge?B:xe;M.endEmitted?sr.nextTick(ee):ye.once("end",ee),ie.on("unpipe",k);function k(_e,je){u("onunpipe"),_e===ye&&je&&je.hasUnpiped===!1&&(je.hasUnpiped=!0,J())}function B(){u("onend"),ie.end()}var Q=de(ye);ie.on("drain",Q);var Z=!1;function J(){u("cleanup"),ie.removeListener("close",me),ie.removeListener("finish",fe),ie.removeListener("drain",Q),ie.removeListener("error",te),ie.removeListener("unpipe",k),ye.removeListener("end",B),ye.removeListener("end",xe),ye.removeListener("data",K),Z=!0,M.awaitDrain&&(!ie._writableState||ie._writableState.needDrain)&&Q()}ye.on("data",K);function K(_e){u("ondata");var je=ie.write(_e);u("dest.write",je),je===!1&&((M.pipesCount===1&&M.pipes===ie||M.pipesCount>1&&ne(M.pipes,ie)!==-1)&&!Z&&(u("false write response, pause",M.awaitDrain),M.awaitDrain++),ye.pause())}function te(_e){u("onerror",_e),xe(),ie.removeListener("error",te),e(ie,"error")===0&&j(ie,_e)}T(ie,"error",te);function me(){ie.removeListener("finish",fe),xe()}ie.once("close",me);function fe(){u("onfinish"),ie.removeListener("close",me),xe()}ie.once("finish",fe);function xe(){u("unpipe"),ye.unpipe(ie)}return ie.emit("pipe",ye),M.flowing||(u("pipe resume"),ye.resume()),ie};function de(ie){return function(){var ye=ie._readableState;u("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,ye.awaitDrain===0&&e(ie,"data")&&(ye.flowing=!0,ae(ie))}}A.prototype.unpipe=function(ie){var oe=this._readableState,ye={hasUnpiped:!1};if(oe.pipesCount===0)return this;if(oe.pipesCount===1)return ie&&ie!==oe.pipes?this:(ie||(ie=oe.pipes),oe.pipes=null,oe.pipesCount=0,oe.flowing=!1,ie&&ie.emit("unpipe",this,ye),this);if(!ie){var M=oe.pipes,ge=oe.pipesCount;oe.pipes=null,oe.pipesCount=0,oe.flowing=!1;for(var ee=0;ee<ge;ee++)M[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var k=ne(oe.pipes,ie);return k===-1?this:(oe.pipes.splice(k,1),oe.pipesCount-=1,oe.pipesCount===1&&(oe.pipes=oe.pipes[0]),ie.emit("unpipe",this,ye),this)},A.prototype.on=function(ie,oe){var ye=t.prototype.on.call(this,ie,oe),M=this._readableState;return ie==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):ie==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,u("on readable",M.length,M.reading),M.length?G(this):M.reading||sr.nextTick(X,this)),ye},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(ie,oe){var ye=t.prototype.removeListener.call(this,ie,oe);return ie==="readable"&&sr.nextTick(L,this),ye},A.prototype.removeAllListeners=function(ie){var oe=t.prototype.removeAllListeners.apply(this,arguments);return(ie==="readable"||ie===void 0)&&sr.nextTick(L,this),oe};function L(ie){var oe=ie._readableState;oe.readableListening=ie.listenerCount("readable")>0,oe.resumeScheduled&&!oe.paused?oe.flowing=!0:ie.listenerCount("data")>0&&ie.resume()}function X(ie){u("readable nexttick read 0"),ie.read(0)}A.prototype.resume=function(){var ie=this._readableState;return ie.flowing||(u("resume"),ie.flowing=!ie.readableListening,V(this,ie)),ie.paused=!1,this};function V(ie,oe){oe.resumeScheduled||(oe.resumeScheduled=!0,sr.nextTick(se,ie,oe))}function se(ie,oe){u("resume",oe.reading),oe.reading||ie.read(0),oe.resumeScheduled=!1,ie.emit("resume"),ae(ie),oe.flowing&&!oe.reading&&ie.read(0)}A.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ae(ie){var oe=ie._readableState;for(u("flow",oe.flowing);oe.flowing&&ie.read()!==null;);}A.prototype.wrap=function(ie){var oe=this,ye=this._readableState,M=!1;ie.on("end",function(){if(u("wrapped end"),ye.decoder&&!ye.ended){var k=ye.decoder.end();k&&k.length&&oe.push(k)}oe.push(null)}),ie.on("data",function(k){if(u("wrapped data"),ye.decoder&&(k=ye.decoder.write(k)),!(ye.objectMode&&k==null)&&!(!ye.objectMode&&(!k||!k.length))){var B=oe.push(k);B||(M=!0,ie.pause())}});for(var ge in ie)this[ge]===void 0&&typeof ie[ge]=="function"&&(this[ge]=function(B){return function(){return ie[B].apply(ie,arguments)}}(ge));for(var ee=0;ee<E.length;ee++)ie.on(E[ee],this.emit.bind(this,E[ee]));return this._read=function(k){u("wrapped _read",k),M&&(M=!1,ie.resume())},this},typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=JO()),_(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(oe){this._readableState&&(this._readableState.flowing=oe)}}),A._fromList=W,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function W(ie,oe){if(oe.length===0)return null;var ye;return oe.objectMode?ye=oe.buffer.shift():!ie||ie>=oe.length?(oe.decoder?ye=oe.buffer.join(""):oe.buffer.length===1?ye=oe.buffer.first():ye=oe.buffer.concat(oe.length),oe.buffer.clear()):ye=oe.buffer.consume(ie,oe.decoder),ye}function z(ie){var oe=ie._readableState;u("endReadable",oe.endEmitted),oe.endEmitted||(oe.ended=!0,sr.nextTick(re,oe,ie))}function re(ie,oe){if(u("endReadableNT",ie.endEmitted,ie.length),!ie.endEmitted&&ie.length===0&&(ie.endEmitted=!0,oe.readable=!1,oe.emit("end"),ie.autoDestroy)){var ye=oe._writableState;(!ye||ye.autoDestroy&&ye.finished)&&oe.destroy()}}typeof Symbol=="function"&&(A.from=function(ie,oe){return N===void 0&&(N=eB()),N(A,ie,oe)});function ne(ie,oe){for(var ye=0,M=ie.length;ye<M;ye++)if(ie[ye]===oe)return ye;return-1}return s1}var o1,S4;function mT(){if(S4)return o1;S4=1,o1=l;var r=Fu().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,s=yu();Yo()(l,s);function o(d,h){var g=this._transformState;g.transforming=!1;var m=g.writecb;if(m===null)return this.emit("error",new t);g.writechunk=null,g.writecb=null,h!=null&&this.push(h),m(d);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function l(d){if(!(this instanceof l))return new l(d);s.call(this,d),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function u(){var d=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,g){c(d,h,g)}):c(this,null,null)}l.prototype.push=function(d,h){return this._transformState.needTransform=!1,s.prototype.push.call(this,d,h)},l.prototype._transform=function(d,h,g){g(new e("_transform()"))},l.prototype._write=function(d,h,g){var m=this._transformState;if(m.writecb=g,m.writechunk=d,m.writeencoding=h,!m.transforming){var v=this._readableState;(m.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},l.prototype._read=function(d){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},l.prototype._destroy=function(d,h){s.prototype._destroy.call(this,d,function(g){h(g)})};function c(d,h,g){if(h)return d.emit("error",h);if(g!=null&&d.push(g),d._writableState.length)throw new a;if(d._transformState.transforming)throw new n;return d.push(null)}return o1}var l1,j4;function tB(){if(j4)return l1;j4=1,l1=e;var r=mT();Yo()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,a){a(null,t)},l1}var c1,E4;function rB(){if(E4)return c1;E4=1;var r;function e(g){var m=!1;return function(){m||(m=!0,g.apply(void 0,arguments))}}var t=Fu().codes,n=t.ERR_MISSING_ARGS,a=t.ERR_STREAM_DESTROYED;function s(g){if(g)throw g}function o(g){return g.setHeader&&typeof g.abort=="function"}function l(g,m,v,x){x=e(x);var b=!1;g.on("close",function(){b=!0}),r===void 0&&(r=Yy()),r(g,{readable:m,writable:v},function(S){if(S)return x(S);b=!0,x()});var y=!1;return function(S){if(!b&&!y){if(y=!0,o(g))return g.abort();if(typeof g.destroy=="function")return g.destroy();x(S||new a("pipe"))}}}function u(g){g()}function c(g,m){return g.pipe(m)}function d(g){return!g.length||typeof g[g.length-1]!="function"?s:g.pop()}function h(){for(var g=arguments.length,m=new Array(g),v=0;v<g;v++)m[v]=arguments[v];var x=d(m);if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new n("streams");var b,y=m.map(function(S,_){var N=_<m.length-1,j=_>0;return l(S,N,j,function(E){b||(b=E),E&&y.forEach(u),!N&&(y.forEach(u),x(b))})});return m.reduce(c)}return c1=h,c1}var u1,A4;function Zy(){if(A4)return u1;A4=1,u1=t;var r=Qy().EventEmitter,e=Yo();e(t,r),t.Readable=hT(),t.Writable=fT(),t.Duplex=yu(),t.Transform=mT(),t.PassThrough=tB(),t.finished=Yy(),t.pipeline=rB(),t.Stream=t;function t(){r.call(this)}return t.prototype.pipe=function(n,a){var s=this;function o(m){n.writable&&n.write(m)===!1&&s.pause&&s.pause()}s.on("data",o);function l(){s.readable&&s.resume&&s.resume()}n.on("drain",l),!n._isStdio&&(!a||a.end!==!1)&&(s.on("end",c),s.on("close",d));var u=!1;function c(){u||(u=!0,n.end())}function d(){u||(u=!0,typeof n.destroy=="function"&&n.destroy())}function h(m){if(g(),r.listenerCount(this,"error")===0)throw m}s.on("error",h),n.on("error",h);function g(){s.removeListener("data",o),n.removeListener("drain",l),s.removeListener("end",c),s.removeListener("close",d),s.removeListener("error",h),n.removeListener("error",h),s.removeListener("end",g),s.removeListener("close",g),n.removeListener("close",g)}return s.on("end",g),s.on("close",g),n.on("close",g),n.emit("pipe",s),n},u1}var T4;function nB(){return T4||(T4=1,function(r){(function(e){e.parser=function(W,z){return new n(W,z)},e.SAXParser=n,e.SAXStream=d,e.createStream=c,e.MAX_BUFFER_LENGTH=64*1024;var t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(W,z){if(!(this instanceof n))return new n(W,z);var re=this;s(re),re.q=re.c="",re.bufferCheckPosition=e.MAX_BUFFER_LENGTH,re.opt=z||{},re.opt.lowercase=re.opt.lowercase||re.opt.lowercasetags,re.looseCase=re.opt.lowercase?"toLowerCase":"toUpperCase",re.tags=[],re.closed=re.closedRoot=re.sawRoot=!1,re.tag=re.error=null,re.strict=!!W,re.noscript=!!(W||re.opt.noscript),re.state=A.BEGIN,re.strictEntities=re.opt.strictEntities,re.ENTITIES=re.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),re.attribList=[],re.opt.xmlns&&(re.ns=Object.create(x)),re.trackPosition=re.opt.position!==!1,re.trackPosition&&(re.position=re.line=re.column=0),I(re,"onready")}Object.create||(Object.create=function(W){function z(){}z.prototype=W;var re=new z;return re}),Object.keys||(Object.keys=function(W){var z=[];for(var re in W)W.hasOwnProperty(re)&&z.push(re);return z});function a(W){for(var z=Math.max(e.MAX_BUFFER_LENGTH,10),re=0,ne=0,ie=t.length;ne<ie;ne++){var oe=W[t[ne]].length;if(oe>z)switch(t[ne]){case"textNode":U(W);break;case"cdata":O(W,"oncdata",W.cdata),W.cdata="";break;case"script":O(W,"onscript",W.script),W.script="";break;default:H(W,"Max buffer length exceeded: "+t[ne])}re=Math.max(re,oe)}var ye=e.MAX_BUFFER_LENGTH-re;W.bufferCheckPosition=ye+W.position}function s(W){for(var z=0,re=t.length;z<re;z++)W[t[z]]=""}function o(W){U(W),W.cdata!==""&&(O(W,"oncdata",W.cdata),W.cdata=""),W.script!==""&&(O(W,"onscript",W.script),W.script="")}n.prototype={end:function(){P(this)},write:ae,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var l;try{l=Zy().Stream}catch{l=function(){}}var u=e.EVENTS.filter(function(W){return W!=="error"&&W!=="end"});function c(W,z){return new d(W,z)}function d(W,z){if(!(this instanceof d))return new d(W,z);l.apply(this),this._parser=new n(W,z),this.writable=!0,this.readable=!0;var re=this;this._parser.onend=function(){re.emit("end")},this._parser.onerror=function(ne){re.emit("error",ne),re._parser.error=null},this._decoder=null,u.forEach(function(ne){Object.defineProperty(re,"on"+ne,{get:function(){return re._parser["on"+ne]},set:function(ie){if(!ie)return re.removeAllListeners(ne),re._parser["on"+ne]=ie,ie;re.on(ne,ie)},enumerable:!0,configurable:!1})})}d.prototype=Object.create(l.prototype,{constructor:{value:d}}),d.prototype.write=function(W){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(W)){if(!this._decoder){var z=fy().StringDecoder;this._decoder=new z("utf8")}W=this._decoder.write(W)}return this._parser.write(W.toString()),this.emit("data",W),!0},d.prototype.end=function(W){return W&&W.length&&this.write(W),this._parser.end(),!0},d.prototype.on=function(W,z){var re=this;return!re._parser["on"+W]&&u.indexOf(W)!==-1&&(re._parser["on"+W]=function(){var ne=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);ne.splice(0,0,W),re.emit.apply(re,ne)}),l.prototype.on.call(re,W,z)};var h="[CDATA[",g="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",x={xml:m,xmlns:v},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N(W){return W===" "||W===`
`||W==="\r"||W==="	"}function j(W){return W==='"'||W==="'"}function E(W){return W===">"||N(W)}function T(W,z){return W.test(z)}function F(W,z){return!T(W,z)}var A=0;e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(W){var z=e.ENTITIES[W],re=typeof z=="number"?String.fromCharCode(z):z;e.ENTITIES[W]=re});for(var R in e.STATE)e.STATE[e.STATE[R]]=R;A=e.STATE;function I(W,z,re){W[z]&&W[z](re)}function O(W,z,re){W.textNode&&U(W),I(W,z,re)}function U(W){W.textNode=D(W.opt,W.textNode),W.textNode&&I(W,"ontext",W.textNode),W.textNode=""}function D(W,z){return W.trim&&(z=z.trim()),W.normalize&&(z=z.replace(/\s+/g," ")),z}function H(W,z){return U(W),W.trackPosition&&(z+=`
Line: `+W.line+`
Column: `+W.column+`
Char: `+W.c),z=new Error(z),W.error=z,I(W,"onerror",z),W}function P(W){return W.sawRoot&&!W.closedRoot&&G(W,"Unclosed root tag"),W.state!==A.BEGIN&&W.state!==A.BEGIN_WHITESPACE&&W.state!==A.TEXT&&H(W,"Unexpected end"),U(W),W.c="",W.closed=!0,I(W,"onend"),n.call(W,W.strict,W.opt),W}function G(W,z){if(typeof W!="object"||!(W instanceof n))throw new Error("bad call to strictFail");W.strict&&H(W,z)}function ue(W){W.strict||(W.tagName=W.tagName[W.looseCase]());var z=W.tags[W.tags.length-1]||W,re=W.tag={name:W.tagName,attributes:{}};W.opt.xmlns&&(re.ns=z.ns),W.attribList.length=0,O(W,"onopentagstart",re)}function le(W,z){var re=W.indexOf(":"),ne=re<0?["",W]:W.split(":"),ie=ne[0],oe=ne[1];return z&&W==="xmlns"&&(ie="xmlns",oe=""),{prefix:ie,local:oe}}function pe(W){if(W.strict||(W.attribName=W.attribName[W.looseCase]()),W.attribList.indexOf(W.attribName)!==-1||W.tag.attributes.hasOwnProperty(W.attribName)){W.attribName=W.attribValue="";return}if(W.opt.xmlns){var z=le(W.attribName,!0),re=z.prefix,ne=z.local;if(re==="xmlns")if(ne==="xml"&&W.attribValue!==m)G(W,"xml: prefix must be bound to "+m+`
Actual: `+W.attribValue);else if(ne==="xmlns"&&W.attribValue!==v)G(W,"xmlns: prefix must be bound to "+v+`
Actual: `+W.attribValue);else{var ie=W.tag,oe=W.tags[W.tags.length-1]||W;ie.ns===oe.ns&&(ie.ns=Object.create(oe.ns)),ie.ns[ne]=W.attribValue}W.attribList.push([W.attribName,W.attribValue])}else W.tag.attributes[W.attribName]=W.attribValue,O(W,"onattribute",{name:W.attribName,value:W.attribValue});W.attribName=W.attribValue=""}function de(W,z){if(W.opt.xmlns){var re=W.tag,ne=le(W.tagName);re.prefix=ne.prefix,re.local=ne.local,re.uri=re.ns[ne.prefix]||"",re.prefix&&!re.uri&&(G(W,"Unbound namespace prefix: "+JSON.stringify(W.tagName)),re.uri=ne.prefix);var ie=W.tags[W.tags.length-1]||W;re.ns&&ie.ns!==re.ns&&Object.keys(re.ns).forEach(function(K){O(W,"onopennamespace",{prefix:K,uri:re.ns[K]})});for(var oe=0,ye=W.attribList.length;oe<ye;oe++){var M=W.attribList[oe],ge=M[0],ee=M[1],k=le(ge,!0),B=k.prefix,Q=k.local,Z=B===""?"":re.ns[B]||"",J={name:ge,value:ee,prefix:B,local:Q,uri:Z};B&&B!=="xmlns"&&!Z&&(G(W,"Unbound namespace prefix: "+JSON.stringify(B)),J.uri=B),W.tag.attributes[ge]=J,O(W,"onattribute",J)}W.attribList.length=0}W.tag.isSelfClosing=!!z,W.sawRoot=!0,W.tags.push(W.tag),O(W,"onopentag",W.tag),z||(!W.noscript&&W.tagName.toLowerCase()==="script"?W.state=A.SCRIPT:W.state=A.TEXT,W.tag=null,W.tagName=""),W.attribName=W.attribValue="",W.attribList.length=0}function L(W){if(!W.tagName){G(W,"Weird empty close tag."),W.textNode+="</>",W.state=A.TEXT;return}if(W.script){if(W.tagName!=="script"){W.script+="</"+W.tagName+">",W.tagName="",W.state=A.SCRIPT;return}O(W,"onscript",W.script),W.script=""}var z=W.tags.length,re=W.tagName;W.strict||(re=re[W.looseCase]());for(var ne=re;z--;){var ie=W.tags[z];if(ie.name!==ne)G(W,"Unexpected close tag");else break}if(z<0){G(W,"Unmatched closing tag: "+W.tagName),W.textNode+="</"+W.tagName+">",W.state=A.TEXT;return}W.tagName=re;for(var oe=W.tags.length;oe-- >z;){var ye=W.tag=W.tags.pop();W.tagName=W.tag.name,O(W,"onclosetag",W.tagName);var M={};for(var ge in ye.ns)M[ge]=ye.ns[ge];var ee=W.tags[W.tags.length-1]||W;W.opt.xmlns&&ye.ns!==ee.ns&&Object.keys(ye.ns).forEach(function(k){var B=ye.ns[k];O(W,"onclosenamespace",{prefix:k,uri:B})})}z===0&&(W.closedRoot=!0),W.tagName=W.attribValue=W.attribName="",W.attribList.length=0,W.state=A.TEXT}function X(W){var z=W.entity,re=z.toLowerCase(),ne,ie="";return W.ENTITIES[z]?W.ENTITIES[z]:W.ENTITIES[re]?W.ENTITIES[re]:(z=re,z.charAt(0)==="#"&&(z.charAt(1)==="x"?(z=z.slice(2),ne=parseInt(z,16),ie=ne.toString(16)):(z=z.slice(1),ne=parseInt(z,10),ie=ne.toString(10))),z=z.replace(/^0+/,""),isNaN(ne)||ie.toLowerCase()!==z?(G(W,"Invalid character entity"),"&"+W.entity+";"):String.fromCodePoint(ne))}function V(W,z){z==="<"?(W.state=A.OPEN_WAKA,W.startTagPosition=W.position):N(z)||(G(W,"Non-whitespace before first tag."),W.textNode=z,W.state=A.TEXT)}function se(W,z){var re="";return z<W.length&&(re=W.charAt(z)),re}function ae(W){var z=this;if(this.error)throw this.error;if(z.closed)return H(z,"Cannot write after close. Assign an onready handler.");if(W===null)return P(z);typeof W=="object"&&(W=W.toString());for(var re=0,ne="";ne=se(W,re++),z.c=ne,!!ne;)switch(z.trackPosition&&(z.position++,ne===`
`?(z.line++,z.column=0):z.column++),z.state){case A.BEGIN:if(z.state=A.BEGIN_WHITESPACE,ne==="\uFEFF")continue;V(z,ne);continue;case A.BEGIN_WHITESPACE:V(z,ne);continue;case A.TEXT:if(z.sawRoot&&!z.closedRoot){for(var ie=re-1;ne&&ne!=="<"&&ne!=="&";)ne=se(W,re++),ne&&z.trackPosition&&(z.position++,ne===`
`?(z.line++,z.column=0):z.column++);z.textNode+=W.substring(ie,re-1)}ne==="<"&&!(z.sawRoot&&z.closedRoot&&!z.strict)?(z.state=A.OPEN_WAKA,z.startTagPosition=z.position):(!N(ne)&&(!z.sawRoot||z.closedRoot)&&G(z,"Text data outside of root node."),ne==="&"?z.state=A.TEXT_ENTITY:z.textNode+=ne);continue;case A.SCRIPT:ne==="<"?z.state=A.SCRIPT_ENDING:z.script+=ne;continue;case A.SCRIPT_ENDING:ne==="/"?z.state=A.CLOSE_TAG:(z.script+="<"+ne,z.state=A.SCRIPT);continue;case A.OPEN_WAKA:if(ne==="!")z.state=A.SGML_DECL,z.sgmlDecl="";else if(!N(ne))if(T(b,ne))z.state=A.OPEN_TAG,z.tagName=ne;else if(ne==="/")z.state=A.CLOSE_TAG,z.tagName="";else if(ne==="?")z.state=A.PROC_INST,z.procInstName=z.procInstBody="";else{if(G(z,"Unencoded <"),z.startTagPosition+1<z.position){var oe=z.position-z.startTagPosition;ne=new Array(oe).join(" ")+ne}z.textNode+="<"+ne,z.state=A.TEXT}continue;case A.SGML_DECL:(z.sgmlDecl+ne).toUpperCase()===h?(O(z,"onopencdata"),z.state=A.CDATA,z.sgmlDecl="",z.cdata=""):z.sgmlDecl+ne==="--"?(z.state=A.COMMENT,z.comment="",z.sgmlDecl=""):(z.sgmlDecl+ne).toUpperCase()===g?(z.state=A.DOCTYPE,(z.doctype||z.sawRoot)&&G(z,"Inappropriately located doctype declaration"),z.doctype="",z.sgmlDecl=""):ne===">"?(O(z,"onsgmldeclaration",z.sgmlDecl),z.sgmlDecl="",z.state=A.TEXT):(j(ne)&&(z.state=A.SGML_DECL_QUOTED),z.sgmlDecl+=ne);continue;case A.SGML_DECL_QUOTED:ne===z.q&&(z.state=A.SGML_DECL,z.q=""),z.sgmlDecl+=ne;continue;case A.DOCTYPE:ne===">"?(z.state=A.TEXT,O(z,"ondoctype",z.doctype),z.doctype=!0):(z.doctype+=ne,ne==="["?z.state=A.DOCTYPE_DTD:j(ne)&&(z.state=A.DOCTYPE_QUOTED,z.q=ne));continue;case A.DOCTYPE_QUOTED:z.doctype+=ne,ne===z.q&&(z.q="",z.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:z.doctype+=ne,ne==="]"?z.state=A.DOCTYPE:j(ne)&&(z.state=A.DOCTYPE_DTD_QUOTED,z.q=ne);continue;case A.DOCTYPE_DTD_QUOTED:z.doctype+=ne,ne===z.q&&(z.state=A.DOCTYPE_DTD,z.q="");continue;case A.COMMENT:ne==="-"?z.state=A.COMMENT_ENDING:z.comment+=ne;continue;case A.COMMENT_ENDING:ne==="-"?(z.state=A.COMMENT_ENDED,z.comment=D(z.opt,z.comment),z.comment&&O(z,"oncomment",z.comment),z.comment=""):(z.comment+="-"+ne,z.state=A.COMMENT);continue;case A.COMMENT_ENDED:ne!==">"?(G(z,"Malformed comment"),z.comment+="--"+ne,z.state=A.COMMENT):z.state=A.TEXT;continue;case A.CDATA:ne==="]"?z.state=A.CDATA_ENDING:z.cdata+=ne;continue;case A.CDATA_ENDING:ne==="]"?z.state=A.CDATA_ENDING_2:(z.cdata+="]"+ne,z.state=A.CDATA);continue;case A.CDATA_ENDING_2:ne===">"?(z.cdata&&O(z,"oncdata",z.cdata),O(z,"onclosecdata"),z.cdata="",z.state=A.TEXT):ne==="]"?z.cdata+="]":(z.cdata+="]]"+ne,z.state=A.CDATA);continue;case A.PROC_INST:ne==="?"?z.state=A.PROC_INST_ENDING:N(ne)?z.state=A.PROC_INST_BODY:z.procInstName+=ne;continue;case A.PROC_INST_BODY:if(!z.procInstBody&&N(ne))continue;ne==="?"?z.state=A.PROC_INST_ENDING:z.procInstBody+=ne;continue;case A.PROC_INST_ENDING:ne===">"?(O(z,"onprocessinginstruction",{name:z.procInstName,body:z.procInstBody}),z.procInstName=z.procInstBody="",z.state=A.TEXT):(z.procInstBody+="?"+ne,z.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:T(y,ne)?z.tagName+=ne:(ue(z),ne===">"?de(z):ne==="/"?z.state=A.OPEN_TAG_SLASH:(N(ne)||G(z,"Invalid character in tag name"),z.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:ne===">"?(de(z,!0),L(z)):(G(z,"Forward-slash in opening tag not followed by >"),z.state=A.ATTRIB);continue;case A.ATTRIB:if(N(ne))continue;ne===">"?de(z):ne==="/"?z.state=A.OPEN_TAG_SLASH:T(b,ne)?(z.attribName=ne,z.attribValue="",z.state=A.ATTRIB_NAME):G(z,"Invalid attribute name");continue;case A.ATTRIB_NAME:ne==="="?z.state=A.ATTRIB_VALUE:ne===">"?(G(z,"Attribute without value"),z.attribValue=z.attribName,pe(z),de(z)):N(ne)?z.state=A.ATTRIB_NAME_SAW_WHITE:T(y,ne)?z.attribName+=ne:G(z,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if(ne==="=")z.state=A.ATTRIB_VALUE;else{if(N(ne))continue;G(z,"Attribute without value"),z.tag.attributes[z.attribName]="",z.attribValue="",O(z,"onattribute",{name:z.attribName,value:""}),z.attribName="",ne===">"?de(z):T(b,ne)?(z.attribName=ne,z.state=A.ATTRIB_NAME):(G(z,"Invalid attribute name"),z.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(N(ne))continue;j(ne)?(z.q=ne,z.state=A.ATTRIB_VALUE_QUOTED):(G(z,"Unquoted attribute value"),z.state=A.ATTRIB_VALUE_UNQUOTED,z.attribValue=ne);continue;case A.ATTRIB_VALUE_QUOTED:if(ne!==z.q){ne==="&"?z.state=A.ATTRIB_VALUE_ENTITY_Q:z.attribValue+=ne;continue}pe(z),z.q="",z.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:N(ne)?z.state=A.ATTRIB:ne===">"?de(z):ne==="/"?z.state=A.OPEN_TAG_SLASH:T(b,ne)?(G(z,"No whitespace between attributes"),z.attribName=ne,z.attribValue="",z.state=A.ATTRIB_NAME):G(z,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(!E(ne)){ne==="&"?z.state=A.ATTRIB_VALUE_ENTITY_U:z.attribValue+=ne;continue}pe(z),ne===">"?de(z):z.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(z.tagName)ne===">"?L(z):T(y,ne)?z.tagName+=ne:z.script?(z.script+="</"+z.tagName,z.tagName="",z.state=A.SCRIPT):(N(ne)||G(z,"Invalid tagname in closing tag"),z.state=A.CLOSE_TAG_SAW_WHITE);else{if(N(ne))continue;F(b,ne)?z.script?(z.script+="</"+ne,z.state=A.SCRIPT):G(z,"Invalid tagname in closing tag."):z.tagName=ne}continue;case A.CLOSE_TAG_SAW_WHITE:if(N(ne))continue;ne===">"?L(z):G(z,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var ye,M;switch(z.state){case A.TEXT_ENTITY:ye=A.TEXT,M="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:ye=A.ATTRIB_VALUE_QUOTED,M="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:ye=A.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}ne===";"?(z[M]+=X(z),z.entity="",z.state=ye):T(z.entity.length?_:S,ne)?z.entity+=ne:(G(z,"Invalid character in entity name"),z[M]+="&"+z.entity+ne,z.entity="",z.state=ye);continue;default:throw new Error(z,"Unknown state: "+z.state)}return z.position>=z.bufferCheckPosition&&a(z),z}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var W=String.fromCharCode,z=Math.floor,re=function(){var ne=16384,ie=[],oe,ye,M=-1,ge=arguments.length;if(!ge)return"";for(var ee="";++M<ge;){var k=Number(arguments[M]);if(!isFinite(k)||k<0||k>1114111||z(k)!==k)throw RangeError("Invalid code point: "+k);k<=65535?ie.push(k):(k-=65536,oe=(k>>10)+55296,ye=k%1024+56320,ie.push(oe,ye)),(M+1===ge||ie.length>ne)&&(ee+=W.apply(null,ie),ie.length=0)}return ee};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:re,configurable:!0,writable:!0}):String.fromCodePoint=re}()})(r)}(Kx)),Kx}var d1,C4;function Jy(){return C4||(C4=1,d1={isArray:function(r){return Array.isArray?Array.isArray(r):Object.prototype.toString.call(r)==="[object Array]"}}),d1}var f1,D4;function eb(){if(D4)return f1;D4=1;var r=Jy().isArray;return f1={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!r(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},f1}var h1,k4;function pT(){if(k4)return h1;k4=1;var r=nB(),e=eb(),t=Jy().isArray,n,a;function s(y){return n=e.copyOptions(y),e.ensureFlagExists("ignoreDeclaration",n),e.ensureFlagExists("ignoreInstruction",n),e.ensureFlagExists("ignoreAttributes",n),e.ensureFlagExists("ignoreText",n),e.ensureFlagExists("ignoreComment",n),e.ensureFlagExists("ignoreCdata",n),e.ensureFlagExists("ignoreDoctype",n),e.ensureFlagExists("compact",n),e.ensureFlagExists("alwaysChildren",n),e.ensureFlagExists("addParent",n),e.ensureFlagExists("trim",n),e.ensureFlagExists("nativeType",n),e.ensureFlagExists("nativeTypeAttributes",n),e.ensureFlagExists("sanitize",n),e.ensureFlagExists("instructionHasAttributes",n),e.ensureFlagExists("captureSpacesBetweenElements",n),e.ensureAlwaysArrayExists(n),e.ensureKeyExists("declaration",n),e.ensureKeyExists("instruction",n),e.ensureKeyExists("attributes",n),e.ensureKeyExists("text",n),e.ensureKeyExists("comment",n),e.ensureKeyExists("cdata",n),e.ensureKeyExists("doctype",n),e.ensureKeyExists("type",n),e.ensureKeyExists("name",n),e.ensureKeyExists("elements",n),e.ensureKeyExists("parent",n),e.checkFnExists("doctype",n),e.checkFnExists("instruction",n),e.checkFnExists("cdata",n),e.checkFnExists("comment",n),e.checkFnExists("text",n),e.checkFnExists("instructionName",n),e.checkFnExists("elementName",n),e.checkFnExists("attributeName",n),e.checkFnExists("attributeValue",n),e.checkFnExists("attributes",n),n}function o(y){var S=Number(y);if(!isNaN(S))return S;var _=y.toLowerCase();return _==="true"?!0:_==="false"?!1:y}function l(y,S){var _;if(n.compact){if(!a[n[y+"Key"]]&&(t(n.alwaysArray)?n.alwaysArray.indexOf(n[y+"Key"])!==-1:n.alwaysArray)&&(a[n[y+"Key"]]=[]),a[n[y+"Key"]]&&!t(a[n[y+"Key"]])&&(a[n[y+"Key"]]=[a[n[y+"Key"]]]),y+"Fn"in n&&typeof S=="string"&&(S=n[y+"Fn"](S,a)),y==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(_ in S)if(S.hasOwnProperty(_))if("instructionFn"in n)S[_]=n.instructionFn(S[_],_,a);else{var N=S[_];delete S[_],S[n.instructionNameFn(_,N,a)]=N}}t(a[n[y+"Key"]])?a[n[y+"Key"]].push(S):a[n[y+"Key"]]=S}else{a[n.elementsKey]||(a[n.elementsKey]=[]);var j={};if(j[n.typeKey]=y,y==="instruction"){for(_ in S)if(S.hasOwnProperty(_))break;j[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(_,S,a):_,n.instructionHasAttributes?(j[n.attributesKey]=S[_][n.attributesKey],"instructionFn"in n&&(j[n.attributesKey]=n.instructionFn(j[n.attributesKey],_,a))):("instructionFn"in n&&(S[_]=n.instructionFn(S[_],_,a)),j[n.instructionKey]=S[_])}else y+"Fn"in n&&(S=n[y+"Fn"](S,a)),j[n[y+"Key"]]=S;n.addParent&&(j[n.parentKey]=a),a[n.elementsKey].push(j)}}function u(y){if("attributesFn"in n&&y&&(y=n.attributesFn(y,a)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&y){var S;for(S in y)if(y.hasOwnProperty(S)&&(n.trim&&(y[S]=y[S].trim()),n.nativeTypeAttributes&&(y[S]=o(y[S])),"attributeValueFn"in n&&(y[S]=n.attributeValueFn(y[S],S,a)),"attributeNameFn"in n)){var _=y[S];delete y[S],y[n.attributeNameFn(S,y[S],a)]=_}}return y}function c(y){var S={};if(y.body&&(y.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var _=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,N;(N=_.exec(y.body))!==null;)S[N[1]]=N[2]||N[3]||N[4];S=u(S)}if(y.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;a[n.declarationKey]={},Object.keys(S).length&&(a[n.declarationKey][n.attributesKey]=S),n.addParent&&(a[n.declarationKey][n.parentKey]=a)}else{if(n.ignoreInstruction)return;n.trim&&(y.body=y.body.trim());var j={};n.instructionHasAttributes&&Object.keys(S).length?(j[y.name]={},j[y.name][n.attributesKey]=S):j[y.name]=y.body,l("instruction",j)}}function d(y,S){var _;if(typeof y=="object"&&(S=y.attributes,y=y.name),S=u(S),"elementNameFn"in n&&(y=n.elementNameFn(y,a)),n.compact){if(_={},!n.ignoreAttributes&&S&&Object.keys(S).length){_[n.attributesKey]={};var N;for(N in S)S.hasOwnProperty(N)&&(_[n.attributesKey][N]=S[N])}!(y in a)&&(t(n.alwaysArray)?n.alwaysArray.indexOf(y)!==-1:n.alwaysArray)&&(a[y]=[]),a[y]&&!t(a[y])&&(a[y]=[a[y]]),t(a[y])?a[y].push(_):a[y]=_}else a[n.elementsKey]||(a[n.elementsKey]=[]),_={},_[n.typeKey]="element",_[n.nameKey]=y,!n.ignoreAttributes&&S&&Object.keys(S).length&&(_[n.attributesKey]=S),n.alwaysChildren&&(_[n.elementsKey]=[]),a[n.elementsKey].push(_);_[n.parentKey]=a,a=_}function h(y){n.ignoreText||!y.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(y=y.trim()),n.nativeType&&(y=o(y)),n.sanitize&&(y=y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l("text",y))}function g(y){n.ignoreComment||(n.trim&&(y=y.trim()),l("comment",y))}function m(y){var S=a[n.parentKey];n.addParent||delete a[n.parentKey],a=S}function v(y){n.ignoreCdata||(n.trim&&(y=y.trim()),l("cdata",y))}function x(y){n.ignoreDoctype||(y=y.replace(/^ /,""),n.trim&&(y=y.trim()),l("doctype",y))}function b(y){y.note=y}return h1=function(y,S){var _=r.parser(!0,{}),N={};if(a=N,n=s(S),_.opt={strictEntities:!0},_.onopentag=d,_.ontext=h,_.oncomment=g,_.onclosetag=m,_.onerror=b,_.oncdata=v,_.ondoctype=x,_.onprocessinginstruction=c,_.write(y).close(),N[n.elementsKey]){var j=N[n.elementsKey];delete N[n.elementsKey],N[n.elementsKey]=j,delete N.text}return N},h1}var m1,M4;function iB(){if(M4)return m1;M4=1;var r=eb(),e=pT();function t(n){var a=r.copyOptions(n);return r.ensureSpacesExists(a),a}return m1=function(n,a){var s,o,l,u;return s=t(a),o=e(n,s),u="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?l=JSON.stringify(o,function(c,d){return c===u?"_":d},s.spaces):l=JSON.stringify(o,null,s.spaces),l.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},m1}var p1,F4;function gT(){if(F4)return p1;F4=1;var r=eb(),e=Jy().isArray,t,n;function a(_){var N=r.copyOptions(_);return r.ensureFlagExists("ignoreDeclaration",N),r.ensureFlagExists("ignoreInstruction",N),r.ensureFlagExists("ignoreAttributes",N),r.ensureFlagExists("ignoreText",N),r.ensureFlagExists("ignoreComment",N),r.ensureFlagExists("ignoreCdata",N),r.ensureFlagExists("ignoreDoctype",N),r.ensureFlagExists("compact",N),r.ensureFlagExists("indentText",N),r.ensureFlagExists("indentCdata",N),r.ensureFlagExists("indentAttributes",N),r.ensureFlagExists("indentInstruction",N),r.ensureFlagExists("fullTagEmptyElement",N),r.ensureFlagExists("noQuotesForNativeAttributes",N),r.ensureSpacesExists(N),typeof N.spaces=="number"&&(N.spaces=Array(N.spaces+1).join(" ")),r.ensureKeyExists("declaration",N),r.ensureKeyExists("instruction",N),r.ensureKeyExists("attributes",N),r.ensureKeyExists("text",N),r.ensureKeyExists("comment",N),r.ensureKeyExists("cdata",N),r.ensureKeyExists("doctype",N),r.ensureKeyExists("type",N),r.ensureKeyExists("name",N),r.ensureKeyExists("elements",N),r.checkFnExists("doctype",N),r.checkFnExists("instruction",N),r.checkFnExists("cdata",N),r.checkFnExists("comment",N),r.checkFnExists("text",N),r.checkFnExists("instructionName",N),r.checkFnExists("elementName",N),r.checkFnExists("attributeName",N),r.checkFnExists("attributeValue",N),r.checkFnExists("attributes",N),r.checkFnExists("fullTagEmptyElement",N),N}function s(_,N,j){return(!j&&_.spaces?`
`:"")+Array(N+1).join(_.spaces)}function o(_,N,j){if(N.ignoreAttributes)return"";"attributesFn"in N&&(_=N.attributesFn(_,n,t));var E,T,F,A,R=[];for(E in _)_.hasOwnProperty(E)&&_[E]!==null&&_[E]!==void 0&&(A=N.noQuotesForNativeAttributes&&typeof _[E]!="string"?"":'"',T=""+_[E],T=T.replace(/"/g,"&quot;"),F="attributeNameFn"in N?N.attributeNameFn(E,T,n,t):E,R.push(N.spaces&&N.indentAttributes?s(N,j+1,!1):" "),R.push(F+"="+A+("attributeValueFn"in N?N.attributeValueFn(T,E,n,t):T)+A));return _&&Object.keys(_).length&&N.spaces&&N.indentAttributes&&R.push(s(N,j,!1)),R.join("")}function l(_,N,j){return t=_,n="xml",N.ignoreDeclaration?"":"<?xml"+o(_[N.attributesKey],N,j)+"?>"}function u(_,N,j){if(N.ignoreInstruction)return"";var E;for(E in _)if(_.hasOwnProperty(E))break;var T="instructionNameFn"in N?N.instructionNameFn(E,_[E],n,t):E;if(typeof _[E]=="object")return t=_,n=T,"<?"+T+o(_[E][N.attributesKey],N,j)+"?>";var F=_[E]?_[E]:"";return"instructionFn"in N&&(F=N.instructionFn(F,E,n,t)),"<?"+T+(F?" "+F:"")+"?>"}function c(_,N){return N.ignoreComment?"":"<!--"+("commentFn"in N?N.commentFn(_,n,t):_)+"-->"}function d(_,N){return N.ignoreCdata?"":"<![CDATA["+("cdataFn"in N?N.cdataFn(_,n,t):_.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function h(_,N){return N.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in N?N.doctypeFn(_,n,t):_)+">"}function g(_,N){return N.ignoreText?"":(_=""+_,_=_.replace(/&amp;/g,"&"),_=_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in N?N.textFn(_,n,t):_)}function m(_,N){var j;if(_.elements&&_.elements.length)for(j=0;j<_.elements.length;++j)switch(_.elements[j][N.typeKey]){case"text":if(N.indentText)return!0;break;case"cdata":if(N.indentCdata)return!0;break;case"instruction":if(N.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function v(_,N,j){t=_,n=_.name;var E=[],T="elementNameFn"in N?N.elementNameFn(_.name,_):_.name;E.push("<"+T),_[N.attributesKey]&&E.push(o(_[N.attributesKey],N,j));var F=_[N.elementsKey]&&_[N.elementsKey].length||_[N.attributesKey]&&_[N.attributesKey]["xml:space"]==="preserve";return F||("fullTagEmptyElementFn"in N?F=N.fullTagEmptyElementFn(_.name,_):F=N.fullTagEmptyElement),F?(E.push(">"),_[N.elementsKey]&&_[N.elementsKey].length&&(E.push(x(_[N.elementsKey],N,j+1)),t=_,n=_.name),E.push(N.spaces&&m(_,N)?`
`+Array(j+1).join(N.spaces):""),E.push("</"+T+">")):E.push("/>"),E.join("")}function x(_,N,j,E){return _.reduce(function(T,F){var A=s(N,j,E&&!T);switch(F.type){case"element":return T+A+v(F,N,j);case"comment":return T+A+c(F[N.commentKey],N);case"doctype":return T+A+h(F[N.doctypeKey],N);case"cdata":return T+(N.indentCdata?A:"")+d(F[N.cdataKey],N);case"text":return T+(N.indentText?A:"")+g(F[N.textKey],N);case"instruction":var R={};return R[F[N.nameKey]]=F[N.attributesKey]?F:F[N.instructionKey],T+(N.indentInstruction?A:"")+u(R,N,j)}},"")}function b(_,N,j){var E;for(E in _)if(_.hasOwnProperty(E))switch(E){case N.parentKey:case N.attributesKey:break;case N.textKey:if(N.indentText||j)return!0;break;case N.cdataKey:if(N.indentCdata||j)return!0;break;case N.instructionKey:if(N.indentInstruction||j)return!0;break;case N.doctypeKey:case N.commentKey:return!0;default:return!0}return!1}function y(_,N,j,E,T){t=_,n=N;var F="elementNameFn"in j?j.elementNameFn(N,_):N;if(typeof _>"u"||_===null||_==="")return"fullTagEmptyElementFn"in j&&j.fullTagEmptyElementFn(N,_)||j.fullTagEmptyElement?"<"+F+"></"+F+">":"<"+F+"/>";var A=[];if(N){if(A.push("<"+F),typeof _!="object")return A.push(">"+g(_,j)+"</"+F+">"),A.join("");_[j.attributesKey]&&A.push(o(_[j.attributesKey],j,E));var R=b(_,j,!0)||_[j.attributesKey]&&_[j.attributesKey]["xml:space"]==="preserve";if(R||("fullTagEmptyElementFn"in j?R=j.fullTagEmptyElementFn(N,_):R=j.fullTagEmptyElement),R)A.push(">");else return A.push("/>"),A.join("")}return A.push(S(_,j,E+1,!1)),t=_,n=N,N&&A.push((T?s(j,E,!1):"")+"</"+F+">"),A.join("")}function S(_,N,j,E){var T,F,A,R=[];for(F in _)if(_.hasOwnProperty(F))for(A=e(_[F])?_[F]:[_[F]],T=0;T<A.length;++T){switch(F){case N.declarationKey:R.push(l(A[T],N,j));break;case N.instructionKey:R.push((N.indentInstruction?s(N,j,E):"")+u(A[T],N,j));break;case N.attributesKey:case N.parentKey:break;case N.textKey:R.push((N.indentText?s(N,j,E):"")+g(A[T],N));break;case N.cdataKey:R.push((N.indentCdata?s(N,j,E):"")+d(A[T],N));break;case N.doctypeKey:R.push(s(N,j,E)+h(A[T],N));break;case N.commentKey:R.push(s(N,j,E)+c(A[T],N));break;default:R.push(s(N,j,E)+y(A[T],F,N,j,b(A[T],N)))}E=E&&!R.length}return R.join("")}return p1=function(_,N){N=a(N);var j=[];return t=_,n="_root_",N.compact?j.push(S(_,N,0,!0)):(_[N.declarationKey]&&j.push(l(_[N.declarationKey],N,0)),_[N.elementsKey]&&_[N.elementsKey].length&&j.push(x(_[N.elementsKey],N,0,!j.length))),j.join("")},p1}var g1,O4;function aB(){if(O4)return g1;O4=1;var r=gT();return g1=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return r(n,t)},g1}var x1,B4;function sB(){if(B4)return x1;B4=1;var r=pT(),e=iB(),t=gT(),n=aB();return x1={xml2js:r,xml2json:e,js2xml:t,json2xml:n},x1}var xT=sB();const tb=r=>{switch(r.type){case void 0:case"element":const e=new lB(r.name,r.attributes),t=r.elements||[];for(const n of t){const a=tb(n);a!==void 0&&e.push(a)}return e;case"text":return r.text;default:return}};class oB extends Vt{}class lB extends ft{static fromXmlString(e){const t=xT.xml2js(e,{compact:!1});return tb(t)}constructor(e,t){super(e),t&&this.root.push(new oB(t))}push(e){this.root.push(e)}}class cB extends ft{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class vT extends ft{constructor(e,t){super(e),t&&(this.root=t.root)}}const zi=r=>{if(isNaN(r))throw new Error(`Invalid value '${r}' specified. Must be an integer.`);return Math.floor(r)},sp=r=>{const e=zi(r);if(e<0)throw new Error(`Invalid value '${r}' specified. Must be a positive integer.`);return e},yT=(r,e)=>{const t=e*2;if(r.length!==t||isNaN(+`0x${r}`))throw new Error(`Invalid hex value '${r}'. Expected ${t} digit hex value`);return r},R4=r=>yT(r,1),bT=r=>{const e=r.slice(-2),t=r.substring(0,r.length-2);return`${Number(t)}${e}`},wT=r=>{const e=bT(r);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},bu=r=>{if(r==="auto")return r;const e=r.charAt(0)==="#"?r.substring(1):r;return yT(e,3)},Ol=r=>typeof r=="string"?bT(r):zi(r),uB=r=>typeof r=="string"?wT(r):sp(r),$a=r=>typeof r=="string"?wT(r):sp(r),dB=sp,fB=sp,hB=r=>r.toISOString();class mt extends ft{constructor(e,t=!0){super(e),t!==!0&&this.root.push(new xn({val:t}))}}class v1 extends ft{constructor(e,t){super(e),this.root.push(new xn({val:uB(t)}))}}class lu extends ft{constructor(e,t){super(e),this.root.push(new xn({val:t}))}}const Gd=(r,e)=>new ps({name:r,attributes:{value:{key:"w:val",value:e}}});class of extends ft{constructor(e,t){super(e),this.root.push(new xn({val:t}))}}class Al extends ft{constructor(e,t){super(e),this.root.push(t)}}class ps extends ft{constructor({name:e,attributes:t,children:n}){super(e),t&&this.root.push(new np(t)),n&&this.root.push(...n)}}const Yn={START:"start",CENTER:"center",LEFT:"left"};class mB extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class pB extends ft{constructor(e){super("w:jc"),this.root.push(new mB({val:e}))}}class ln extends ft{constructor(e,{color:t,size:n,space:a,style:s}){super(e),this.root.push(new gB({style:s,color:t===void 0?void 0:bu(t),size:n===void 0?void 0:dB(n),space:a===void 0?void 0:fB(a)}))}}class gB extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const rb={SINGLE:"single",NONE:"none"};class xB extends rp{constructor(e){super("w:pBdr"),e.top&&this.root.push(new ln("w:top",e.top)),e.bottom&&this.root.push(new ln("w:bottom",e.bottom)),e.left&&this.root.push(new ln("w:left",e.left)),e.right&&this.root.push(new ln("w:right",e.right))}}class vB extends ft{constructor(){super("w:pBdr");const e=new ln("w:bottom",{color:"auto",space:1,style:rb.SINGLE,size:6});this.root.push(e)}}class yB extends ft{constructor({start:e,end:t,left:n,right:a,hanging:s,firstLine:o}){super("w:ind"),this.root.push(new np({start:{key:"w:start",value:e===void 0?void 0:Ol(e)},end:{key:"w:end",value:t===void 0?void 0:Ol(t)},left:{key:"w:left",value:n===void 0?void 0:Ol(n)},right:{key:"w:right",value:a===void 0?void 0:Ol(a)},hanging:{key:"w:hanging",value:s===void 0?void 0:$a(s)},firstLine:{key:"w:firstLine",value:o===void 0?void 0:$a(o)}}))}}let bB=class extends ft{constructor(){super("w:br")}};const nb={BEGIN:"begin",END:"end",SEPARATE:"separate"};class ib extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class f0 extends ft{constructor(e){super("w:fldChar"),this.root.push(new ib({type:nb.BEGIN,dirty:e}))}}class h0 extends ft{constructor(e){super("w:fldChar"),this.root.push(new ib({type:nb.SEPARATE,dirty:e}))}}class m0 extends ft{constructor(e){super("w:fldChar"),this.root.push(new ib({type:nb.END,dirty:e}))}}const wu={DEFAULT:"default",PRESERVE:"preserve"};class _u extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{space:"xml:space"})}}class wB extends ft{constructor(){super("w:instrText"),this.root.push(new _u({space:wu.PRESERVE})),this.root.push("PAGE")}}class _B extends ft{constructor(){super("w:instrText"),this.root.push(new _u({space:wu.PRESERVE})),this.root.push("NUMPAGES")}}class NB extends ft{constructor(){super("w:instrText"),this.root.push(new _u({space:wu.PRESERVE})),this.root.push("SECTIONPAGES")}}class SB extends ft{constructor(){super("w:instrText"),this.root.push(new _u({space:wu.PRESERVE})),this.root.push("SECTION")}}class jB extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class _T extends ft{constructor({fill:e,color:t,type:n}){super("w:shd"),this.root.push(new jB({fill:e===void 0?void 0:bu(e),color:t===void 0?void 0:bu(t),type:n}))}}class EB extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const AB={DOT:"dot"};class TB extends ft{constructor(e){super("w:em"),this.root.push(new xn({val:e}))}}class CB extends TB{constructor(e=AB.DOT){super(e)}}class DB extends ft{constructor(e){super("w:spacing"),this.root.push(new xn({val:Ol(e)}))}}class kB extends ft{constructor(e){super("w:color"),this.root.push(new xn({val:bu(e)}))}}class MB extends ft{constructor(e){super("w:highlight"),this.root.push(new xn({val:e}))}}class FB extends ft{constructor(e){super("w:highlightCs"),this.root.push(new xn({val:e}))}}const OB=r=>new ps({name:"w:lang",attributes:{value:{key:"w:val",value:r.value},eastAsia:{key:"w:eastAsia",value:r.eastAsia},bidirectional:{key:"w:bidi",value:r.bidirectional}}});class L4 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class y1 extends ft{constructor(e,t){if(super("w:rFonts"),typeof e=="string"){const n=e;this.root.push(new L4({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:t}))}else{const n=e;this.root.push(new L4(n))}}}let NT=class extends ft{constructor(e){super("w:vertAlign"),this.root.push(new xn({val:e}))}};class BB extends NT{constructor(){super("superscript")}}class RB extends NT{constructor(){super("subscript")}}const ST={SINGLE:"single"};class LB extends ft{constructor(e=ST.SINGLE,t){super("w:u"),this.root.push(new xn({val:e,color:t===void 0?void 0:bu(t)}))}}class Vl extends rp{constructor(e){var t,n;if(super("w:rPr"),!e)return;e.style&&this.push(new lu("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new y1(e.font)):"name"in e.font?this.push(new y1(e.font.name,e.font.hint)):this.push(new y1(e.font))),e.bold!==void 0&&this.push(new mt("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new mt("w:bCs",(t=e.boldComplexScript)!=null?t:e.bold)),e.italics!==void 0&&this.push(new mt("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new mt("w:iCs",(n=e.italicsComplexScript)!=null?n:e.italics)),e.smallCaps!==void 0?this.push(new mt("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new mt("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new mt("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new mt("w:dstrike",e.doubleStrike)),e.emboss!==void 0&&this.push(new mt("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new mt("w:imprint",e.imprint)),e.noProof!==void 0&&this.push(new mt("w:noProof",e.noProof)),e.snapToGrid!==void 0&&this.push(new mt("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new mt("w:vanish",e.vanish)),e.color&&this.push(new kB(e.color)),e.characterSpacing&&this.push(new DB(e.characterSpacing)),e.scale!==void 0&&this.push(new of("w:w",e.scale)),e.kern&&this.push(new v1("w:kern",e.kern)),e.position&&this.push(new lu("w:position",e.position)),e.size!==void 0&&this.push(new v1("w:sz",e.size));const a=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;a&&this.push(new v1("w:szCs",a)),e.highlight&&this.push(new MB(e.highlight));const s=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;s&&this.push(new FB(s)),e.underline&&this.push(new LB(e.underline.type,e.underline.color)),e.effect&&this.push(new lu("w:effect",e.effect)),e.border&&this.push(new ln("w:bdr",e.border)),e.shading&&this.push(new _T(e.shading)),e.subScript&&this.push(new RB),e.superScript&&this.push(new BB),e.rightToLeft!==void 0&&this.push(new mt("w:rtl",e.rightToLeft)),e.emphasisMark&&this.push(new CB(e.emphasisMark.type)),e.language&&this.push(OB(e.language)),e.specVanish&&this.push(new mt("w:specVanish",e.vanish)),e.math&&this.push(new mt("w:oMath",e.math)),e.revision&&this.push(new IB(e.revision))}push(e){this.root.push(e)}}class IB extends ft{constructor(e){super("w:rPrChange"),this.root.push(new EB({id:e.id,author:e.author,date:e.date})),this.addChildElement(new Vl(e))}}class I4 extends ft{constructor(e){var t;super("w:t"),typeof e=="string"?(this.root.push(new _u({space:wu.PRESERVE})),this.root.push(e)):(this.root.push(new _u({space:(t=e.space)!=null?t:wu.DEFAULT})),this.root.push(e.text))}}const p0={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class op extends ft{constructor(e){if(super("w:r"),at(this,"properties"),this.properties=new Vl(e),this.root.push(this.properties),e.break)for(let t=0;t<e.break;t++)this.root.push(new bB);if(e.children)for(const t of e.children){if(typeof t=="string"){switch(t){case p0.CURRENT:this.root.push(new f0),this.root.push(new wB),this.root.push(new h0),this.root.push(new m0);break;case p0.TOTAL_PAGES:this.root.push(new f0),this.root.push(new _B),this.root.push(new h0),this.root.push(new m0);break;case p0.TOTAL_PAGES_IN_SECTION:this.root.push(new f0),this.root.push(new NB),this.root.push(new h0),this.root.push(new m0);break;case p0.CURRENT_SECTION:this.root.push(new f0),this.root.push(new SB),this.root.push(new h0),this.root.push(new m0);break;default:this.root.push(new I4(t));break}continue}this.root.push(t)}else e.text!==void 0&&this.root.push(new I4(e.text))}}class Tt extends op{constructor(e){super(typeof e=="string"?{text:e}:e)}}var b1={},qr={},w1,z4;function Of(){if(z4)return w1;z4=1,w1=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,a){if(t!=n)throw new Error(a||"Assertion failed: "+t+" != "+n)},w1}var P4;function vs(){if(P4)return qr;P4=1;var r=Of(),e=Yo();qr.inherits=e;function t(O,U){return(O.charCodeAt(U)&64512)!==55296||U<0||U+1>=O.length?!1:(O.charCodeAt(U+1)&64512)===56320}function n(O,U){if(Array.isArray(O))return O.slice();if(!O)return[];var D=[];if(typeof O=="string")if(U){if(U==="hex")for(O=O.replace(/[^a-z0-9]+/ig,""),O.length%2!==0&&(O="0"+O),P=0;P<O.length;P+=2)D.push(parseInt(O[P]+O[P+1],16))}else for(var H=0,P=0;P<O.length;P++){var G=O.charCodeAt(P);G<128?D[H++]=G:G<2048?(D[H++]=G>>6|192,D[H++]=G&63|128):t(O,P)?(G=65536+((G&1023)<<10)+(O.charCodeAt(++P)&1023),D[H++]=G>>18|240,D[H++]=G>>12&63|128,D[H++]=G>>6&63|128,D[H++]=G&63|128):(D[H++]=G>>12|224,D[H++]=G>>6&63|128,D[H++]=G&63|128)}else for(P=0;P<O.length;P++)D[P]=O[P]|0;return D}qr.toArray=n;function a(O){for(var U="",D=0;D<O.length;D++)U+=l(O[D].toString(16));return U}qr.toHex=a;function s(O){var U=O>>>24|O>>>8&65280|O<<8&16711680|(O&255)<<24;return U>>>0}qr.htonl=s;function o(O,U){for(var D="",H=0;H<O.length;H++){var P=O[H];U==="little"&&(P=s(P)),D+=u(P.toString(16))}return D}qr.toHex32=o;function l(O){return O.length===1?"0"+O:O}qr.zero2=l;function u(O){return O.length===7?"0"+O:O.length===6?"00"+O:O.length===5?"000"+O:O.length===4?"0000"+O:O.length===3?"00000"+O:O.length===2?"000000"+O:O.length===1?"0000000"+O:O}qr.zero8=u;function c(O,U,D,H){var P=D-U;r(P%4===0);for(var G=new Array(P/4),ue=0,le=U;ue<G.length;ue++,le+=4){var pe;H==="big"?pe=O[le]<<24|O[le+1]<<16|O[le+2]<<8|O[le+3]:pe=O[le+3]<<24|O[le+2]<<16|O[le+1]<<8|O[le],G[ue]=pe>>>0}return G}qr.join32=c;function d(O,U){for(var D=new Array(O.length*4),H=0,P=0;H<O.length;H++,P+=4){var G=O[H];U==="big"?(D[P]=G>>>24,D[P+1]=G>>>16&255,D[P+2]=G>>>8&255,D[P+3]=G&255):(D[P+3]=G>>>24,D[P+2]=G>>>16&255,D[P+1]=G>>>8&255,D[P]=G&255)}return D}qr.split32=d;function h(O,U){return O>>>U|O<<32-U}qr.rotr32=h;function g(O,U){return O<<U|O>>>32-U}qr.rotl32=g;function m(O,U){return O+U>>>0}qr.sum32=m;function v(O,U,D){return O+U+D>>>0}qr.sum32_3=v;function x(O,U,D,H){return O+U+D+H>>>0}qr.sum32_4=x;function b(O,U,D,H,P){return O+U+D+H+P>>>0}qr.sum32_5=b;function y(O,U,D,H){var P=O[U],G=O[U+1],ue=H+G>>>0,le=(ue<H?1:0)+D+P;O[U]=le>>>0,O[U+1]=ue}qr.sum64=y;function S(O,U,D,H){var P=U+H>>>0,G=(P<U?1:0)+O+D;return G>>>0}qr.sum64_hi=S;function _(O,U,D,H){var P=U+H;return P>>>0}qr.sum64_lo=_;function N(O,U,D,H,P,G,ue,le){var pe=0,de=U;de=de+H>>>0,pe+=de<U?1:0,de=de+G>>>0,pe+=de<G?1:0,de=de+le>>>0,pe+=de<le?1:0;var L=O+D+P+ue+pe;return L>>>0}qr.sum64_4_hi=N;function j(O,U,D,H,P,G,ue,le){var pe=U+H+G+le;return pe>>>0}qr.sum64_4_lo=j;function E(O,U,D,H,P,G,ue,le,pe,de){var L=0,X=U;X=X+H>>>0,L+=X<U?1:0,X=X+G>>>0,L+=X<G?1:0,X=X+le>>>0,L+=X<le?1:0,X=X+de>>>0,L+=X<de?1:0;var V=O+D+P+ue+pe+L;return V>>>0}qr.sum64_5_hi=E;function T(O,U,D,H,P,G,ue,le,pe,de){var L=U+H+G+le+de;return L>>>0}qr.sum64_5_lo=T;function F(O,U,D){var H=U<<32-D|O>>>D;return H>>>0}qr.rotr64_hi=F;function A(O,U,D){var H=O<<32-D|U>>>D;return H>>>0}qr.rotr64_lo=A;function R(O,U,D){return O>>>D}qr.shr64_hi=R;function I(O,U,D){var H=O<<32-D|U>>>D;return H>>>0}return qr.shr64_lo=I,qr}var _1={},q4;function Bf(){if(q4)return _1;q4=1;var r=vs(),e=Of();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return _1.BlockHash=t,t.prototype.update=function(a,s){if(a=r.toArray(a,s),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var o=a.length%this._delta8;this.pending=a.slice(a.length-o,a.length),this.pending.length===0&&(this.pending=null),a=r.join32(a,0,a.length-o,this.endian);for(var l=0;l<a.length;l+=this._delta32)this._update(a,l,l+this._delta32)}return this},t.prototype.digest=function(a){return this.update(this._pad()),e(this.pending===null),this._digest(a)},t.prototype._pad=function(){var a=this.pendingTotal,s=this._delta8,o=s-(a+this.padLength)%s,l=new Array(o+this.padLength);l[0]=128;for(var u=1;u<o;u++)l[u]=0;if(a<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)l[u++]=0;l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=a>>>24&255,l[u++]=a>>>16&255,l[u++]=a>>>8&255,l[u++]=a&255}else for(l[u++]=a&255,l[u++]=a>>>8&255,l[u++]=a>>>16&255,l[u++]=a>>>24&255,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,c=8;c<this.padLength;c++)l[u++]=0;return l},_1}var Tl={},ss={},$4;function jT(){if($4)return ss;$4=1;var r=vs(),e=r.rotr32;function t(d,h,g,m){if(d===0)return n(h,g,m);if(d===1||d===3)return s(h,g,m);if(d===2)return a(h,g,m)}ss.ft_1=t;function n(d,h,g){return d&h^~d&g}ss.ch32=n;function a(d,h,g){return d&h^d&g^h&g}ss.maj32=a;function s(d,h,g){return d^h^g}ss.p32=s;function o(d){return e(d,2)^e(d,13)^e(d,22)}ss.s0_256=o;function l(d){return e(d,6)^e(d,11)^e(d,25)}ss.s1_256=l;function u(d){return e(d,7)^e(d,18)^d>>>3}ss.g0_256=u;function c(d){return e(d,17)^e(d,19)^d>>>10}return ss.g1_256=c,ss}var N1,U4;function zB(){if(U4)return N1;U4=1;var r=vs(),e=Bf(),t=jT(),n=r.rotl32,a=r.sum32,s=r.sum32_5,o=t.ft_1,l=e.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(c,l),N1=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(h,g){for(var m=this.W,v=0;v<16;v++)m[v]=h[g+v];for(;v<m.length;v++)m[v]=n(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);var x=this.h[0],b=this.h[1],y=this.h[2],S=this.h[3],_=this.h[4];for(v=0;v<m.length;v++){var N=~~(v/20),j=s(n(x,5),o(N,b,y,S),_,m[v],u[N]);_=S,S=y,y=n(b,30),b=x,x=j}this.h[0]=a(this.h[0],x),this.h[1]=a(this.h[1],b),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],S),this.h[4]=a(this.h[4],_)},c.prototype._digest=function(h){return h==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},N1}var S1,H4;function ET(){if(H4)return S1;H4=1;var r=vs(),e=Bf(),t=jT(),n=Of(),a=r.sum32,s=r.sum32_4,o=r.sum32_5,l=t.ch32,u=t.maj32,c=t.s0_256,d=t.s1_256,h=t.g0_256,g=t.g1_256,m=e.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function x(){if(!(this instanceof x))return new x;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}return r.inherits(x,m),S1=x,x.blockSize=512,x.outSize=256,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(y,S){for(var _=this.W,N=0;N<16;N++)_[N]=y[S+N];for(;N<_.length;N++)_[N]=s(g(_[N-2]),_[N-7],h(_[N-15]),_[N-16]);var j=this.h[0],E=this.h[1],T=this.h[2],F=this.h[3],A=this.h[4],R=this.h[5],I=this.h[6],O=this.h[7];for(n(this.k.length===_.length),N=0;N<_.length;N++){var U=o(O,d(A),l(A,R,I),this.k[N],_[N]),D=a(c(j),u(j,E,T));O=I,I=R,R=A,A=a(F,U),F=T,T=E,E=j,j=a(U,D)}this.h[0]=a(this.h[0],j),this.h[1]=a(this.h[1],E),this.h[2]=a(this.h[2],T),this.h[3]=a(this.h[3],F),this.h[4]=a(this.h[4],A),this.h[5]=a(this.h[5],R),this.h[6]=a(this.h[6],I),this.h[7]=a(this.h[7],O)},x.prototype._digest=function(y){return y==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},S1}var j1,V4;function PB(){if(V4)return j1;V4=1;var r=vs(),e=ET();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),j1=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(a){return a==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},j1}var E1,G4;function AT(){if(G4)return E1;G4=1;var r=vs(),e=Bf(),t=Of(),n=r.rotr64_hi,a=r.rotr64_lo,s=r.shr64_hi,o=r.shr64_lo,l=r.sum64,u=r.sum64_hi,c=r.sum64_lo,d=r.sum64_4_hi,h=r.sum64_4_lo,g=r.sum64_5_hi,m=r.sum64_5_lo,v=e.BlockHash,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=x,this.W=new Array(160)}r.inherits(b,v),E1=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(D,H){for(var P=this.W,G=0;G<32;G++)P[G]=D[H+G];for(;G<P.length;G+=2){var ue=I(P[G-4],P[G-3]),le=O(P[G-4],P[G-3]),pe=P[G-14],de=P[G-13],L=A(P[G-30],P[G-29]),X=R(P[G-30],P[G-29]),V=P[G-32],se=P[G-31];P[G]=d(ue,le,pe,de,L,X,V,se),P[G+1]=h(ue,le,pe,de,L,X,V,se)}},b.prototype._update=function(D,H){this._prepareBlock(D,H);var P=this.W,G=this.h[0],ue=this.h[1],le=this.h[2],pe=this.h[3],de=this.h[4],L=this.h[5],X=this.h[6],V=this.h[7],se=this.h[8],ae=this.h[9],W=this.h[10],z=this.h[11],re=this.h[12],ne=this.h[13],ie=this.h[14],oe=this.h[15];t(this.k.length===P.length);for(var ye=0;ye<P.length;ye+=2){var M=ie,ge=oe,ee=T(se,ae),k=F(se,ae),B=y(se,ae,W,z,re),Q=S(se,ae,W,z,re,ne),Z=this.k[ye],J=this.k[ye+1],K=P[ye],te=P[ye+1],me=g(M,ge,ee,k,B,Q,Z,J,K,te),fe=m(M,ge,ee,k,B,Q,Z,J,K,te);M=j(G,ue),ge=E(G,ue),ee=_(G,ue,le,pe,de),k=N(G,ue,le,pe,de,L);var xe=u(M,ge,ee,k),_e=c(M,ge,ee,k);ie=re,oe=ne,re=W,ne=z,W=se,z=ae,se=u(X,V,me,fe),ae=c(V,V,me,fe),X=de,V=L,de=le,L=pe,le=G,pe=ue,G=u(me,fe,xe,_e),ue=c(me,fe,xe,_e)}l(this.h,0,G,ue),l(this.h,2,le,pe),l(this.h,4,de,L),l(this.h,6,X,V),l(this.h,8,se,ae),l(this.h,10,W,z),l(this.h,12,re,ne),l(this.h,14,ie,oe)},b.prototype._digest=function(D){return D==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function y(U,D,H,P,G){var ue=U&H^~U&G;return ue<0&&(ue+=4294967296),ue}function S(U,D,H,P,G,ue){var le=D&P^~D&ue;return le<0&&(le+=4294967296),le}function _(U,D,H,P,G){var ue=U&H^U&G^H&G;return ue<0&&(ue+=4294967296),ue}function N(U,D,H,P,G,ue){var le=D&P^D&ue^P&ue;return le<0&&(le+=4294967296),le}function j(U,D){var H=n(U,D,28),P=n(D,U,2),G=n(D,U,7),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function E(U,D){var H=a(U,D,28),P=a(D,U,2),G=a(D,U,7),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function T(U,D){var H=n(U,D,14),P=n(U,D,18),G=n(D,U,9),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function F(U,D){var H=a(U,D,14),P=a(U,D,18),G=a(D,U,9),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function A(U,D){var H=n(U,D,1),P=n(U,D,8),G=s(U,D,7),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function R(U,D){var H=a(U,D,1),P=a(U,D,8),G=o(U,D,7),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function I(U,D){var H=n(U,D,19),P=n(D,U,29),G=s(U,D,6),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}function O(U,D){var H=a(U,D,19),P=a(D,U,29),G=o(U,D,6),ue=H^P^G;return ue<0&&(ue+=4294967296),ue}return E1}var A1,Q4;function qB(){if(Q4)return A1;Q4=1;var r=vs(),e=AT();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),A1=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(a){return a==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},A1}var W4;function $B(){return W4||(W4=1,Tl.sha1=zB(),Tl.sha224=PB(),Tl.sha256=ET(),Tl.sha384=qB(),Tl.sha512=AT()),Tl}var T1={},K4;function UB(){if(K4)return T1;K4=1;var r=vs(),e=Bf(),t=r.rotl32,n=r.sum32,a=r.sum32_3,s=r.sum32_4,o=e.BlockHash;function l(){if(!(this instanceof l))return new l;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(l,o),T1.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(b,y){for(var S=this.h[0],_=this.h[1],N=this.h[2],j=this.h[3],E=this.h[4],T=S,F=_,A=N,R=j,I=E,O=0;O<80;O++){var U=n(t(s(S,u(O,_,N,j),b[h[O]+y],c(O)),m[O]),E);S=E,E=j,j=t(N,10),N=_,_=U,U=n(t(s(T,u(79-O,F,A,R),b[g[O]+y],d(O)),v[O]),I),T=I,I=R,R=t(A,10),A=F,F=U}U=a(this.h[1],N,R),this.h[1]=a(this.h[2],j,I),this.h[2]=a(this.h[3],E,T),this.h[3]=a(this.h[4],S,F),this.h[4]=a(this.h[0],_,A),this.h[0]=U},l.prototype._digest=function(b){return b==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function u(x,b,y,S){return x<=15?b^y^S:x<=31?b&y|~b&S:x<=47?(b|~y)^S:x<=63?b&S|y&~S:b^(y|~S)}function c(x){return x<=15?0:x<=31?1518500249:x<=47?1859775393:x<=63?2400959708:2840853838}function d(x){return x<=15?1352829926:x<=31?1548603684:x<=47?1836072691:x<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return T1}var C1,X4;function HB(){if(X4)return C1;X4=1;var r=vs(),e=Of();function t(n,a,s){if(!(this instanceof t))return new t(n,a,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(a,s))}return C1=t,t.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),e(a.length<=this.blockSize);for(var s=a.length;s<this.blockSize;s++)a.push(0);for(s=0;s<a.length;s++)a[s]^=54;for(this.inner=new this.Hash().update(a),s=0;s<a.length;s++)a[s]^=106;this.outer=new this.Hash().update(a)},t.prototype.update=function(a,s){return this.inner.update(a,s),this},t.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)},C1}var Y4;function VB(){return Y4||(Y4=1,function(r){var e=r;e.utils=vs(),e.common=Bf(),e.sha=$B(),e.ripemd=UB(),e.hmac=HB(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(b1)),b1}VB();let GB="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",QB=(r,e=21)=>(t=e)=>{let n="",a=t|0;for(;a--;)n+=r[Math.random()*r.length|0];return n},WB=(r=21)=>{let e="",t=r|0;for(;t--;)e+=GB[Math.random()*64|0];return e};const La=r=>Math.floor(r*72*20),ab=(r=0)=>{let e=r;return()=>++e},KB=()=>ab(),XB=()=>ab(1),YB=()=>ab(),ZB=()=>WB().toLowerCase(),Qd=r=>QB("1234567890abcdef",r)(),JB=()=>`${Qd(8)}-${Qd(4)}-${Qd(4)}-${Qd(4)}-${Qd(12)}`;class e9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{xmlns:"xmlns"})}}class t9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const r9={EXTERNAL:"External"};class n9 extends ft{constructor(e,t,n,a){super("Relationship"),this.root.push(new t9({id:e,type:t,target:n,targetMode:a}))}}class Gl extends ft{constructor(){super("Relationships"),this.root.push(new e9({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,t,n,a){const s=new n9(`rId${e}`,t,n,a);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class i9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class a9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class s9 extends ft{constructor({id:e,initials:t,author:n,date:a=new Date,children:s}){super("w:comment"),this.root.push(new i9({id:e,initials:t,author:n,date:a.toISOString()}));for(const o of s)this.root.push(o)}}class o9 extends ft{constructor({children:e}){super("w:comments"),at(this,"relationships"),this.root.push(new a9({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const t of e)this.root.push(new s9(t));this.relationships=new Gl}get Relationships(){return this.relationships}}class l9 extends ft{constructor(){super("w:pageBreakBefore")}}const hy={AUTO:"auto"};class c9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class u9 extends ft{constructor(e){super("w:spacing"),this.root.push(new c9(e))}}const d9={HEADING_1:"Heading1"};let g0=class extends ft{constructor(e){super("w:pStyle"),this.root.push(new xn({val:e}))}};class f9 extends ft{constructor(e){super("w:tabs");for(const t of e)this.root.push(new m9(t))}}const Z4={LEFT:"left",RIGHT:"right"};class h9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class m9 extends ft{constructor({type:e,position:t,leader:n}){super("w:tab"),this.root.push(new h9({val:e,pos:t,leader:n}))}}class D1 extends ft{constructor(e,t){super("w:numPr"),this.root.push(new p9(t)),this.root.push(new g9(e))}}class p9 extends ft{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new xn({val:e}))}}class g9 extends ft{constructor(e){super("w:numId"),this.root.push(new xn({val:typeof e=="string"?`{${e}}`:e}))}}class x9 extends ft{constructor(){super(...arguments),at(this,"fileChild",Symbol())}}class v9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class y9 extends ft{constructor(e,t,n){super("w:hyperlink"),at(this,"linkId"),this.linkId=t;const a={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},s=new v9(a);this.root.push(s),e.forEach(o=>{this.root.push(o)})}}class b9 extends ft{constructor(e){super("w:externalHyperlink"),this.options=e}}class w9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class _9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{id:"w:id"})}}class N9{constructor(e){at(this,"bookmarkUniqueNumericId",YB()),at(this,"start"),at(this,"children"),at(this,"end");const t=this.bookmarkUniqueNumericId();this.start=new S9(e.id,t),this.children=e.children,this.end=new j9(t)}}class S9 extends ft{constructor(e,t){super("w:bookmarkStart");const n=new w9({name:e,id:t});this.root.push(n)}}class j9 extends ft{constructor(e){super("w:bookmarkEnd");const t=new _9({id:e});this.root.push(t)}}class E9 extends ft{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new xn({val:e}))}}const A9={TOP:"top",CENTER:"center",BOTTOM:"bottom"};vu(xr({},A9),{BOTH:"both"});class T9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{verticalAlign:"w:val"})}}class C9 extends ft{constructor(e){super("w:vAlign"),this.root.push(new T9({verticalAlign:e}))}}class D9 extends ft{constructor({space:e,count:t,separate:n,equalWidth:a,children:s}){super("w:cols"),this.root.push(new np({space:{key:"w:space",value:e===void 0?void 0:$a(e)},count:{key:"w:num",value:t===void 0?void 0:zi(t)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:a}})),!a&&s&&s.forEach(o=>this.addChildElement(o))}}const k9=({type:r,linePitch:e,charSpace:t})=>new ps({name:"w:docGrid",attributes:{type:{key:"w:type",value:r},linePitch:{key:"w:linePitch",value:zi(e)},charSpace:{key:"w:charSpace",value:t?zi(t):void 0}}}),cu={DEFAULT:"default",FIRST:"first",EVEN:"even"};class M9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const J4={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class k1 extends ft{constructor(e,t){super(e),this.root.push(new M9({type:t.type||cu.DEFAULT,id:`rId${t.id}`}))}}const F9=({countBy:r,start:e,restart:t,distance:n})=>new ps({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:r===void 0?void 0:zi(r)},start:{key:"w:start",value:e===void 0?void 0:zi(e)},restart:{key:"w:restart",value:t},distance:{key:"w:distance",value:n===void 0?void 0:$a(n)}}});class e3 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class O9 extends rp{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new e3({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new e3({})),e.pageBorderTop&&this.root.push(new ln("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new ln("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new ln("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new ln("w:right",e.pageBorderRight))}}class B9 extends ft{constructor(e,t,n,a,s,o,l){super("w:pgMar"),this.root.push(new np({top:{key:"w:top",value:Ol(e)},right:{key:"w:right",value:$a(t)},bottom:{key:"w:bottom",value:Ol(n)},left:{key:"w:left",value:$a(a)},header:{key:"w:header",value:$a(s)},footer:{key:"w:footer",value:$a(o)},gutter:{key:"w:gutter",value:$a(l)}}))}}class R9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class L9 extends ft{constructor({start:e,formatType:t,separator:n}){super("w:pgNumType"),this.root.push(new R9({start:e===void 0?void 0:zi(e),formatType:t,separator:n}))}}const my={PORTRAIT:"portrait",LANDSCAPE:"landscape"},I9=({width:r,height:e,orientation:t,code:n})=>{const a=$a(r),s=$a(e);return new ps({name:"w:pgSz",attributes:{width:{key:"w:w",value:t===my.LANDSCAPE?s:a},height:{key:"w:h",value:t===my.LANDSCAPE?a:s},orientation:{key:"w:orient",value:t},code:{key:"w:code",value:n}}})};class z9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class P9 extends ft{constructor(e){super("w:textDirection"),this.root.push(new z9({val:e}))}}class q9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class $9 extends ft{constructor(e){super("w:type"),this.root.push(new q9({val:e}))}}const Cl={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},M1={WIDTH:11906,HEIGHT:16838,ORIENTATION:my.PORTRAIT};class U9 extends ft{constructor({page:{size:{width:e=M1.WIDTH,height:t=M1.HEIGHT,orientation:n=M1.ORIENTATION}={},margin:{top:a=Cl.TOP,right:s=Cl.RIGHT,bottom:o=Cl.BOTTOM,left:l=Cl.LEFT,header:u=Cl.HEADER,footer:c=Cl.FOOTER,gutter:d=Cl.GUTTER}={},pageNumbers:h={},borders:g,textDirection:m}={},grid:{linePitch:v=360,charSpace:x,type:b}={},headerWrapperGroup:y={},footerWrapperGroup:S={},lineNumbers:_,titlePage:N,verticalAlign:j,column:E,type:T}={}){super("w:sectPr"),this.addHeaderFooterGroup(J4.HEADER,y),this.addHeaderFooterGroup(J4.FOOTER,S),T&&this.root.push(new $9(T)),this.root.push(I9({width:e,height:t,orientation:n})),this.root.push(new B9(a,s,o,l,u,c,d)),g&&this.root.push(new O9(g)),_&&this.root.push(F9(_)),this.root.push(new L9(h)),E&&this.root.push(new D9(E)),j&&this.root.push(new C9(j)),N!==void 0&&this.root.push(new mt("w:titlePg",N)),m&&this.root.push(new P9(m)),this.root.push(k9({linePitch:v,charSpace:x,type:b}))}addHeaderFooterGroup(e,t){t.default&&this.root.push(new k1(e,{type:cu.DEFAULT,id:t.default.View.ReferenceId})),t.first&&this.root.push(new k1(e,{type:cu.FIRST,id:t.first.View.ReferenceId})),t.even&&this.root.push(new k1(e,{type:cu.EVEN,id:t.even.View.ReferenceId}))}}class H9 extends ft{constructor(){super("w:body"),at(this,"sections",[])}addSection(e){const t=this.sections.pop();this.root.push(this.createSectionParagraph(t)),this.sections.push(new U9(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const t=new Et({}),n=new Nu({});return n.push(e),t.addChildElement(n),t}}const t3={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class lp extends Vt{constructor(e,t){super(xr({Ignorable:t},Object.fromEntries(e.map(n=>[n,t3[n]])))),at(this,"xmlKeys",xr({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(t3).map(n=>[n,`xmlns:${n}`]))))}}class V9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class G9 extends ft{constructor(e){super("w:background"),this.root.push(new V9({color:e.color===void 0?void 0:bu(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:R4(e.themeShade),themeTint:e.themeTint===void 0?void 0:R4(e.themeTint)}))}}class Q9 extends ft{constructor(e){super("w:document"),at(this,"body"),this.root.push(new lp(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new H9,e.background&&this.root.push(new G9(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class TT{constructor(e){at(this,"document"),at(this,"relationships"),this.document=new Q9(e),this.relationships=new Gl}get View(){return this.document}get Relationships(){return this.relationships}}class W9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class K9 extends ft{constructor(){super("w:wordWrap"),this.root.push(new W9({val:0}))}}const X9=r=>{var e,t;return new ps({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:r.anchorLock},dropCap:{key:"w:dropCap",value:r.dropCap},width:{key:"w:w",value:r.width},height:{key:"w:h",value:r.height},x:{key:"w:x",value:r.position?r.position.x:void 0},y:{key:"w:y",value:r.position?r.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:r.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:r.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=r.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(t=r.space)==null?void 0:t.vertical},rule:{key:"w:hRule",value:r.rule},alignmentX:{key:"w:xAlign",value:r.alignment?r.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:r.alignment?r.alignment.y:void 0},lines:{key:"w:lines",value:r.lines},wrap:{key:"w:wrap",value:r.wrap}}})};class Nu extends rp{constructor(e){var t,n;if(super("w:pPr"),at(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new g0(e.heading)),e.bullet&&this.push(new g0("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new g0("ListParagraph"))),e.style&&this.push(new g0(e.style)),e.keepNext!==void 0&&this.push(new mt("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new mt("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new l9),e.frame&&this.push(X9(e.frame)),e.widowControl!==void 0&&this.push(new mt("w:widowControl",e.widowControl)),e.bullet&&this.push(new D1(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(t=e.numbering.instance)!=null?t:0}),this.push(new D1(`${e.numbering.reference}-${(n=e.numbering.instance)!=null?n:0}`,e.numbering.level))):e.numbering===!1&&this.push(new D1(0,0)),e.border&&this.push(new xB(e.border)),e.thematicBreak&&this.push(new vB),e.shading&&this.push(new _T(e.shading)),e.wordWrap&&this.push(new K9),e.overflowPunctuation&&this.push(new mt("w:overflowPunct",e.overflowPunctuation));const a=[...e.rightTabStop!==void 0?[{type:Z4.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:Z4.LEFT,position:e.leftTabStop}]:[]];a.length>0&&this.push(new f9(a)),e.bidirectional!==void 0&&this.push(new mt("w:bidi",e.bidirectional)),e.spacing&&this.push(new u9(e.spacing)),e.indent&&this.push(new yB(e.indent)),e.contextualSpacing!==void 0&&this.push(new mt("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new pB(e.alignment)),e.outlineLevel!==void 0&&this.push(new E9(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new mt("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new mt("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new Vl(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof TT)for(const t of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(t.reference,t.instance);return super.prepForXml(e)}}class Et extends x9{constructor(e){if(super("w:p"),at(this,"properties"),typeof e=="string")return this.properties=new Nu({}),this.root.push(this.properties),this.root.push(new Tt(e)),this;if(this.properties=new Nu(e),this.root.push(this.properties),e.text&&this.root.push(new Tt(e.text)),e.children)for(const t of e.children){if(t instanceof N9){this.root.push(t.start);for(const n of t.children)this.root.push(n);this.root.push(t.end);continue}this.root.push(t)}}prepForXml(e){for(const t of this.root)if(t instanceof b9){const n=this.root.indexOf(t),a=new y9(t.options.children,ZB());e.viewWrapper.Relationships.createRelationship(a.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",t.options.link,r9.EXTERNAL),this.root[n]=a}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}const $c={style:rb.NONE,size:0,color:"auto"},Uc={style:rb.SINGLE,size:4,color:"auto"};class Y9 extends ft{constructor(e){super("w:tblBorders"),e.top?this.root.push(new ln("w:top",e.top)):this.root.push(new ln("w:top",Uc)),e.left?this.root.push(new ln("w:left",e.left)):this.root.push(new ln("w:left",Uc)),e.bottom?this.root.push(new ln("w:bottom",e.bottom)):this.root.push(new ln("w:bottom",Uc)),e.right?this.root.push(new ln("w:right",e.right)):this.root.push(new ln("w:right",Uc)),e.insideHorizontal?this.root.push(new ln("w:insideH",e.insideHorizontal)):this.root.push(new ln("w:insideH",Uc)),e.insideVertical?this.root.push(new ln("w:insideV",e.insideVertical)):this.root.push(new ln("w:insideV",Uc))}}at(Y9,"NONE",{top:$c,bottom:$c,left:$c,right:$c,insideHorizontal:$c,insideVertical:$c});class Z9 extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class J9 extends ft{constructor(){super("Properties"),this.root.push(new Z9({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class eR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{xmlns:"xmlns"})}}class tR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Is extends ft{constructor(e,t){super("Default"),this.root.push(new tR({contentType:e,extension:t}))}}class rR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class pa extends ft{constructor(e,t){super("Override"),this.root.push(new rR({contentType:e,partName:t}))}}class nR extends ft{constructor(){super("Types"),this.root.push(new eR({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Is("image/png","png")),this.root.push(new Is("image/jpeg","jpeg")),this.root.push(new Is("image/jpeg","jpg")),this.root.push(new Is("image/bmp","bmp")),this.root.push(new Is("image/gif","gif")),this.root.push(new Is("image/svg+xml","svg")),this.root.push(new Is("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Is("application/xml","xml")),this.root.push(new Is("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new pa("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new pa("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class iR extends ft{constructor(e){super("cp:coreProperties"),this.root.push(new lp(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new Al("dc:title",e.title)),e.subject&&this.root.push(new Al("dc:subject",e.subject)),e.creator&&this.root.push(new Al("dc:creator",e.creator)),e.keywords&&this.root.push(new Al("cp:keywords",e.keywords)),e.description&&this.root.push(new Al("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new Al("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new Al("cp:revision",String(e.revision))),this.root.push(new r3("dcterms:created")),this.root.push(new r3("dcterms:modified"))}}class aR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{type:"xsi:type"})}}class r3 extends ft{constructor(e){super(e),this.root.push(new aR({type:"dcterms:W3CDTF"})),this.root.push(hB(new Date))}}class sR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class oR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class lR extends ft{constructor(e,t){super("property"),this.root.push(new oR({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:t.name})),this.root.push(new cR(t.value))}}class cR extends ft{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class uR extends ft{constructor(e){super("Properties"),at(this,"nextId"),at(this,"properties",[]),this.root.push(new sR({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const t of e)this.addCustomProperty(t)}prepForXml(e){return this.properties.forEach(t=>this.root.push(t)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new lR(this.nextId++,e))}}const x0=({id:r,fontKey:e,subsetted:t},n)=>new ps({name:n,attributes:xr({id:{key:"r:id",value:r}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...t?[new mt("w:subsetted",t)]:[]]}),dR=({name:r,altName:e,panose1:t,charset:n,family:a,notTrueType:s,pitch:o,sig:l,embedRegular:u,embedBold:c,embedItalic:d,embedBoldItalic:h})=>new ps({name:"w:font",attributes:{name:{key:"w:name",value:r}},children:[...e?[Gd("w:altName",e)]:[],...t?[Gd("w:panose1",t)]:[],...n?[Gd("w:charset",n)]:[],Gd("w:family",a),...s?[new mt("w:notTrueType",s)]:[],Gd("w:pitch",o),...l?[new ps({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:l.usb0},usb1:{key:"w:usb1",value:l.usb1},usb2:{key:"w:usb2",value:l.usb2},usb3:{key:"w:usb3",value:l.usb3},csb0:{key:"w:csb0",value:l.csb0},csb1:{key:"w:csb1",value:l.csb1}}})]:[],...u?[x0(u,"w:embedRegular")]:[],...c?[x0(c,"w:embedBold")]:[],...d?[x0(d,"w:embedItalic")]:[],...h?[x0(h,"w:embedBoldItalic")]:[]]}),fR=({name:r,index:e,fontKey:t,characterSet:n})=>dR({name:r,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:t,id:`rId${e}`}}),hR=r=>new ps({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:r.map((e,t)=>fR({name:e.name,index:t+1,fontKey:e.fontKey}))});class mR{constructor(e){at(this,"fontTable"),at(this,"relationships"),at(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(t=>vu(xr({},t),{fontKey:JB()})),this.fontTable=hR(this.fontOptionsWithKey),this.relationships=new Gl;for(let t=0;t<e.length;t++)this.relationships.createRelationship(t+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[t].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class pR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let gR=class extends vT{constructor(e,t){super("w:ftr",t),at(this,"refId"),this.refId=e,t||this.root.push(new pR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class xR{constructor(e,t,n){at(this,"footer"),at(this,"relationships"),this.media=e,this.footer=new gR(t,n),this.relationships=new Gl}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class vR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class yR extends ft{constructor(){super("w:footnoteRef")}}class bR extends op{constructor(){super({style:"FootnoteReference"}),this.root.push(new yR)}}const n3={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class F1 extends ft{constructor(e){super("w:footnote"),this.root.push(new vR({type:e.type,id:e.id}));for(let t=0;t<e.children.length;t++){const n=e.children[t];t===0&&n.addRunToFront(new bR),this.root.push(n)}}}class wR extends ft{constructor(){super("w:continuationSeparator")}}class _R extends op{constructor(){super({}),this.root.push(new wR)}}class NR extends ft{constructor(){super("w:separator")}}class SR extends op{constructor(){super({}),this.root.push(new NR)}}class jR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class ER extends ft{constructor(){super("w:footnotes"),this.root.push(new jR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new F1({id:-1,type:n3.SEPERATOR,children:[new Et({spacing:{after:0,line:240,lineRule:hy.AUTO},children:[new SR]})]});this.root.push(e);const t=new F1({id:0,type:n3.CONTINUATION_SEPERATOR,children:[new Et({spacing:{after:0,line:240,lineRule:hy.AUTO},children:[new _R]})]});this.root.push(t)}createFootNote(e,t){const n=new F1({id:e,children:t});this.root.push(n)}}class AR{constructor(){at(this,"footnotess"),at(this,"relationships"),this.footnotess=new ER,this.relationships=new Gl}get View(){return this.footnotess}get Relationships(){return this.relationships}}class TR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let CR=class extends vT{constructor(e,t){super("w:hdr",t),at(this,"refId"),this.refId=e,t||this.root.push(new TR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class DR{constructor(e,t,n){at(this,"header"),at(this,"relationships"),this.media=e,this.header=new CR(t,n),this.relationships=new Gl}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class kR{constructor(){at(this,"map"),this.map=new Map}addImage(e,t){this.map.set(e,t)}get Array(){return Array.from(this.map.values())}}const zs={BULLET:"bullet"};class MR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class FR extends ft{constructor(e){super("w:numFmt"),this.root.push(new xn({val:e}))}}class OR extends ft{constructor(e){super("w:lvlText"),this.root.push(new xn({val:e}))}}class BR extends ft{constructor(e){super("w:lvlJc"),this.root.push(new xn({val:e}))}}class RR extends ft{constructor(e){super("w:suff"),this.root.push(new xn({val:e}))}}class LR extends ft{constructor(){super("w:isLgl")}}class IR extends ft{constructor({level:e,format:t,text:n,alignment:a=Yn.START,start:s=1,style:o,suffix:l,isLegalNumberingStyle:u}){if(super("w:lvl"),at(this,"paragraphProperties"),at(this,"runProperties"),this.root.push(new of("w:start",zi(s))),t&&this.root.push(new FR(t)),l&&this.root.push(new RR(l)),u&&this.root.push(new LR),n&&this.root.push(new OR(n)),this.root.push(new BR(a)),this.paragraphProperties=new Nu(o&&o.paragraph),this.runProperties=new Vl(o&&o.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new MR({ilvl:zi(e),tentative:1}))}}class zR extends IR{}class PR extends ft{constructor(e){super("w:multiLevelType"),this.root.push(new xn({val:e}))}}class qR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class i3 extends ft{constructor(e,t){super("w:abstractNum"),at(this,"id"),this.root.push(new qR({abstractNumId:zi(e),restartNumberingAfterBreak:0})),this.root.push(new PR("hybridMultilevel")),this.id=e;for(const n of t)this.root.push(new zR(n))}}class $R extends ft{constructor(e){super("w:abstractNumId"),this.root.push(new xn({val:e}))}}class UR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{numId:"w:numId"})}}class a3 extends ft{constructor(e){if(super("w:num"),at(this,"numId"),at(this,"reference"),at(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new UR({numId:zi(e.numId)})),this.root.push(new $R(zi(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const t of e.overrideLevels)this.root.push(new VR(t.num,t.start))}}class HR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{ilvl:"w:ilvl"})}}class VR extends ft{constructor(e,t){super("w:lvlOverride"),this.root.push(new HR({ilvl:e})),t!==void 0&&this.root.push(new QR(t))}}class GR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class QR extends ft{constructor(e){super("w:startOverride"),this.root.push(new GR({val:e}))}}class WR extends ft{constructor(e){super("w:numbering"),at(this,"abstractNumberingMap",new Map),at(this,"concreteNumberingMap",new Map),at(this,"referenceConfigMap",new Map),at(this,"abstractNumUniqueNumericId",KB()),at(this,"concreteNumUniqueNumericId",XB()),this.root.push(new lp(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const t=new i3(this.abstractNumUniqueNumericId(),[{level:0,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:La(.5),hanging:La(.25)}}}},{level:1,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:La(1),hanging:La(.25)}}}},{level:2,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:2160,hanging:La(.25)}}}},{level:3,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:2880,hanging:La(.25)}}}},{level:4,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:3600,hanging:La(.25)}}}},{level:5,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:4320,hanging:La(.25)}}}},{level:6,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:5040,hanging:La(.25)}}}},{level:7,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:5760,hanging:La(.25)}}}},{level:8,format:zs.BULLET,text:"",alignment:Yn.LEFT,style:{paragraph:{indent:{left:6480,hanging:La(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new a3({numId:1,abstractNumId:t.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",t);for(const n of e.config)this.abstractNumberingMap.set(n.reference,new i3(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(e){for(const t of this.abstractNumberingMap.values())this.root.push(t);for(const t of this.concreteNumberingMap.values())this.root.push(t);return super.prepForXml(e)}createConcreteNumberingInstance(e,t){const n=this.abstractNumberingMap.get(e);if(!n)return;const a=`${e}-${t}`;if(this.concreteNumberingMap.has(a))return;const s=this.referenceConfigMap.get(e),o=s&&s[0].start,l={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:e,instance:t,overrideLevels:[o&&Number.isInteger(o)?{num:0,start:o}:{num:0,start:1}]};this.concreteNumberingMap.set(a,new a3(l))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class KR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class XR extends ft{constructor(e){super("w:compatSetting"),this.root.push(new KR({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class YR extends ft{constructor(e){super("w:compat"),e.version&&this.root.push(new XR(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new mt("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new mt("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new mt("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new mt("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new mt("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new mt("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new mt("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new mt("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new mt("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new mt("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new mt("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new mt("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new mt("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new mt("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new mt("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new mt("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new mt("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new mt("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new mt("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new mt("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new mt("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new mt("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new mt("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new mt("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new mt("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new mt("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new mt("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new mt("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new mt("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new mt("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new mt("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new mt("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new mt("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new mt("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new mt("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new mt("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new mt("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new mt("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new mt("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new mt("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new mt("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new mt("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new mt("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new mt("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new mt("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new mt("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new mt("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new mt("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new mt("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new mt("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new mt("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new mt("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new mt("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new mt("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new mt("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new mt("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new mt("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new mt("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new mt("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new mt("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new mt("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new mt("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new mt("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new mt("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new mt("w:cachedColBalance",e.cachedColumnBalance))}}class ZR extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class JR extends ft{constructor(e){var t,n,a,s,o,l,u,c;super("w:settings"),this.root.push(new ZR({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new mt("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new mt("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new mt("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new mt("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new of("w:defaultTabStop",e.defaultTabStop)),((t=e.hyphenation)==null?void 0:t.autoHyphenation)!==void 0&&this.root.push(new mt("w:autoHyphenation",e.hyphenation.autoHyphenation)),((n=e.hyphenation)==null?void 0:n.hyphenationZone)!==void 0&&this.root.push(new of("w:hyphenationZone",e.hyphenation.hyphenationZone)),((a=e.hyphenation)==null?void 0:a.consecutiveHyphenLimit)!==void 0&&this.root.push(new of("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((s=e.hyphenation)==null?void 0:s.doNotHyphenateCaps)!==void 0&&this.root.push(new mt("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new YR(vu(xr({},(o=e.compatibility)!=null?o:{}),{version:(c=(u=(l=e.compatibility)==null?void 0:l.version)!=null?u:e.compatibilityModeVersion)!=null?c:15})))}}class CT extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{val:"w:val"})}}class eL extends ft{constructor(e){super("w:name"),this.root.push(new CT({val:e}))}}class tL extends ft{constructor(e){super("w:uiPriority"),this.root.push(new CT({val:zi(e)}))}}class rL extends Vt{constructor(){super(...arguments),at(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class DT extends ft{constructor(e,t){super("w:style"),this.root.push(new rL(e)),t.name&&this.root.push(new eL(t.name)),t.basedOn&&this.root.push(new lu("w:basedOn",t.basedOn)),t.next&&this.root.push(new lu("w:next",t.next)),t.link&&this.root.push(new lu("w:link",t.link)),t.uiPriority!==void 0&&this.root.push(new tL(t.uiPriority)),t.semiHidden!==void 0&&this.root.push(new mt("w:semiHidden",t.semiHidden)),t.unhideWhenUsed!==void 0&&this.root.push(new mt("w:unhideWhenUsed",t.unhideWhenUsed)),t.quickFormat!==void 0&&this.root.push(new mt("w:qFormat",t.quickFormat))}}class cp extends DT{constructor(e){super({type:"paragraph",styleId:e.id},e),at(this,"paragraphProperties"),at(this,"runProperties"),this.paragraphProperties=new Nu(e.paragraph),this.runProperties=new Vl(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class up extends DT{constructor(e){super({type:"character",styleId:e.id},xr({uiPriority:99,unhideWhenUsed:!0},e)),at(this,"runProperties"),this.runProperties=new Vl(e.run),this.root.push(this.runProperties)}}class Zo extends cp{constructor(e){super(xr({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class nL extends Zo{constructor(e){super(xr({id:"Title",name:"Title"},e))}}class iL extends Zo{constructor(e){super(xr({id:"Heading1",name:"Heading 1"},e))}}class aL extends Zo{constructor(e){super(xr({id:"Heading2",name:"Heading 2"},e))}}class sL extends Zo{constructor(e){super(xr({id:"Heading3",name:"Heading 3"},e))}}class oL extends Zo{constructor(e){super(xr({id:"Heading4",name:"Heading 4"},e))}}class lL extends Zo{constructor(e){super(xr({id:"Heading5",name:"Heading 5"},e))}}class cL extends Zo{constructor(e){super(xr({id:"Heading6",name:"Heading 6"},e))}}class uL extends Zo{constructor(e){super(xr({id:"Strong",name:"Strong"},e))}}class dL extends cp{constructor(e){super(xr({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class fL extends cp{constructor(e){super(xr({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:hy.AUTO}},run:{size:20}},e))}}class hL extends up{constructor(e){super(xr({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class mL extends up{constructor(e){super(xr({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class pL extends up{constructor(e){super(xr({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:ST.SINGLE}}},e))}}class py extends ft{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const t of e.importedStyles)this.root.push(t);if(e.paragraphStyles)for(const t of e.paragraphStyles)this.root.push(new cp(t));if(e.characterStyles)for(const t of e.characterStyles)this.root.push(new up(t))}}class gL extends ft{constructor(e){super("w:pPrDefault"),this.root.push(new Nu(e))}}class xL extends ft{constructor(e){super("w:rPrDefault"),this.root.push(new Vl(e))}}class vL extends ft{constructor(e){super("w:docDefaults"),at(this,"runPropertiesDefaults"),at(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new xL(e.run),this.paragraphPropertiesDefaults=new gL(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class yL{newInstance(e){const t=xT.xml2js(e,{compact:!1});let n;for(const o of t.elements||[])o.name==="w:styles"&&(n=o);if(n===void 0)throw new Error("can not find styles element");const a=n.elements||[];return new py({initialStyles:new cB(n.attributes),importedStyles:a.map(o=>tb(o))})}}class s3{newInstance(e={}){var t;return{initialStyles:new lp(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new vL((t=e.document)!=null?t:{}),new nL(xr({run:{size:56}},e.title)),new iL(xr({run:{color:"2E74B5",size:32}},e.heading1)),new aL(xr({run:{color:"2E74B5",size:26}},e.heading2)),new sL(xr({run:{color:"1F4D78",size:24}},e.heading3)),new oL(xr({run:{color:"2E74B5",italics:!0}},e.heading4)),new lL(xr({run:{color:"2E74B5"}},e.heading5)),new cL(xr({run:{color:"1F4D78"}},e.heading6)),new uL(xr({run:{bold:!0}},e.strong)),new dL(e.listParagraph||{}),new pL(e.hyperlink||{}),new hL(e.footnoteReference||{}),new fL(e.footnoteText||{}),new mL(e.footnoteTextChar||{})]}}}let bL=class{constructor(e){at(this,"currentRelationshipId",1),at(this,"documentWrapper"),at(this,"headers",[]),at(this,"footers",[]),at(this,"coreProperties"),at(this,"numbering"),at(this,"media"),at(this,"fileRelationships"),at(this,"footnotesWrapper"),at(this,"settings"),at(this,"contentTypes"),at(this,"customProperties"),at(this,"appProperties"),at(this,"styles"),at(this,"comments"),at(this,"fontWrapper");var t,n,a,s,o,l,u,c,d,h,g,m;if(this.coreProperties=new iR(vu(xr({},e),{creator:(t=e.creator)!=null?t:"Un-named",revision:(n=e.revision)!=null?n:1,lastModifiedBy:(a=e.lastModifiedBy)!=null?a:"Un-named"})),this.numbering=new WR(e.numbering?e.numbering:{config:[]}),this.comments=new o9((s=e.comments)!=null?s:{children:[]}),this.fileRelationships=new Gl,this.customProperties=new uR((o=e.customProperties)!=null?o:[]),this.appProperties=new J9,this.footnotesWrapper=new AR,this.contentTypes=new nR,this.documentWrapper=new TT({background:e.background}),this.settings=new JR({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(l=e.features)==null?void 0:l.trackRevisions,updateFields:(u=e.features)==null?void 0:u.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(c=e.hyphenation)==null?void 0:c.autoHyphenation,hyphenationZone:(d=e.hyphenation)==null?void 0:d.hyphenationZone,consecutiveHyphenLimit:(h=e.hyphenation)==null?void 0:h.consecutiveHyphenLimit,doNotHyphenateCaps:(g=e.hyphenation)==null?void 0:g.doNotHyphenateCaps}}),this.media=new kR,e.externalStyles!==void 0){const v=new yL;this.styles=v.newInstance(e.externalStyles)}else if(e.styles){const x=new s3().newInstance(e.styles.default);this.styles=new py(xr(xr({},x),e.styles))}else{const v=new s3;this.styles=new py(v.newInstance())}this.addDefaultRelationships();for(const v of e.sections)this.addSection(v);if(e.footnotes)for(const v in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(v),e.footnotes[v].children);this.fontWrapper=new mR((m=e.fonts)!=null?m:[])}addSection({headers:e={},footers:t={},children:n,properties:a}){this.documentWrapper.View.Body.addSection(vu(xr({},a),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:t.default?this.createFooter(t.default):void 0,first:t.first?this.createFooter(t.first):void 0,even:t.even?this.createFooter(t.even):void 0}}));for(const s of n)this.documentWrapper.View.add(s)}createHeader(e){const t=new DR(this.media,this.currentRelationshipId++);for(const n of e.options.children)t.add(n);return this.addHeaderToDocument(t),t}createFooter(e){const t=new xR(this.media,this.currentRelationshipId++);for(const n of e.options.children)t.add(n);return this.addFooterToDocument(t),t}addHeaderToDocument(e,t=cu.DEFAULT){this.headers.push({header:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,t=cu.DEFAULT){this.footers.push({footer:e,type:t}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var wL=Zy();function v0(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var O1={exports:{}},o3;function _L(){return o3||(o3=1,function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,s){function o(c,d){if(!a[c]){if(!n[c]){var h=typeof v0=="function"&&v0;if(!d&&h)return h(c,!0);if(l)return l(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var m=a[c]={exports:{}};n[c][0].call(m.exports,function(v){var x=n[c][1][v];return o(x||v)},m,m.exports,t,n,a,s)}return a[c].exports}for(var l=typeof v0=="function"&&v0,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(t,n,a){var s=t("./utils"),o=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,d,h,g,m,v,x,b=[],y=0,S=u.length,_=S,N=s.getTypeOf(u)!=="string";y<u.length;)_=S-y,h=N?(c=u[y++],d=y<S?u[y++]:0,y<S?u[y++]:0):(c=u.charCodeAt(y++),d=y<S?u.charCodeAt(y++):0,y<S?u.charCodeAt(y++):0),g=c>>2,m=(3&c)<<4|d>>4,v=1<_?(15&d)<<2|h>>6:64,x=2<_?63&h:64,b.push(l.charAt(g)+l.charAt(m)+l.charAt(v)+l.charAt(x));return b.join("")},a.decode=function(u){var c,d,h,g,m,v,x=0,b=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var S,_=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&_--,u.charAt(u.length-2)===l.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|_):new Array(0|_);x<u.length;)c=l.indexOf(u.charAt(x++))<<2|(g=l.indexOf(u.charAt(x++)))>>4,d=(15&g)<<4|(m=l.indexOf(u.charAt(x++)))>>2,h=(3&m)<<6|(v=l.indexOf(u.charAt(x++))),S[b++]=c,m!==64&&(S[b++]=d),v!==64&&(S[b++]=h);return S}},{"./support":30,"./utils":32}],2:[function(t,n,a){var s=t("./external"),o=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function c(d,h,g,m,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=g,this.compression=m,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,g){return d.pipe(new l).pipe(new u("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var s=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var s=t("./utils"),o=function(){for(var l,u=[],c=0;c<256;c++){l=c;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;u[c]=l}return u}();n.exports=function(l,u){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?function(c,d,h,g){var m=o,v=g+h;c^=-1;for(var x=g;x<v;x++)c=c>>>8^m[255&(c^d[x])];return-1^c}(0|u,l,l.length,0):function(c,d,h,g){var m=o,v=g+h;c^=-1;for(var x=g;x<v;x++)c=c>>>8^m[255&(c^d.charCodeAt(x))];return-1^c}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),c=s?"uint8array":"array";function d(h,g){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}a.magic="\b\0",l.inherits(d,u),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(c,h.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function s(m,v){var x,b="";for(x=0;x<v;x++)b+=String.fromCharCode(255&m),m>>>=8;return b}function o(m,v,x,b,y,S){var _,N,j=m.file,E=m.compression,T=S!==c.utf8encode,F=l.transformTo("string",S(j.name)),A=l.transformTo("string",c.utf8encode(j.name)),R=j.comment,I=l.transformTo("string",S(R)),O=l.transformTo("string",c.utf8encode(R)),U=A.length!==j.name.length,D=O.length!==R.length,H="",P="",G="",ue=j.dir,le=j.date,pe={crc32:0,compressedSize:0,uncompressedSize:0};v&&!x||(pe.crc32=m.crc32,pe.compressedSize=m.compressedSize,pe.uncompressedSize=m.uncompressedSize);var de=0;v&&(de|=8),T||!U&&!D||(de|=2048);var L=0,X=0;ue&&(L|=16),y==="UNIX"?(X=798,L|=function(se,ae){var W=se;return se||(W=ae?16893:33204),(65535&W)<<16}(j.unixPermissions,ue)):(X=20,L|=function(se){return 63&(se||0)}(j.dosPermissions)),_=le.getUTCHours(),_<<=6,_|=le.getUTCMinutes(),_<<=5,_|=le.getUTCSeconds()/2,N=le.getUTCFullYear()-1980,N<<=4,N|=le.getUTCMonth()+1,N<<=5,N|=le.getUTCDate(),U&&(P=s(1,1)+s(d(F),4)+A,H+="up"+s(P.length,2)+P),D&&(G=s(1,1)+s(d(I),4)+O,H+="uc"+s(G.length,2)+G);var V="";return V+=`
\0`,V+=s(de,2),V+=E.magic,V+=s(_,2),V+=s(N,2),V+=s(pe.crc32,4),V+=s(pe.compressedSize,4),V+=s(pe.uncompressedSize,4),V+=s(F.length,2),V+=s(H.length,2),{fileRecord:h.LOCAL_FILE_HEADER+V+F+H,dirRecord:h.CENTRAL_FILE_HEADER+s(X,2)+V+s(I.length,2)+"\0\0\0\0"+s(L,4)+s(b,4)+F+H+I}}var l=t("../utils"),u=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),h=t("../signature");function g(m,v,x,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=x,this.encodeFileName=b,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,u),g.prototype.push=function(m){var v=m.meta.percent||0,x=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,u.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:x?(v+100*(x-b-1))/x:100}}))},g.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var v=this.streamFiles&&!m.file.dir;if(v){var x=o(m,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(m){this.accumulate=!1;var v=this.streamFiles&&!m.file.dir,x=o(m,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),v)this.push({data:function(b){return h.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var m=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var x=this.bytesWritten-m,b=function(y,S,_,N,j){var E=l.transformTo("string",j(N));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(S,4)+s(_,4)+s(E.length,2)+E}(this.dirRecords.length,x,m,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(m){this._sources.push(m);var v=this;return m.on("data",function(x){v.processChunk(x)}),m.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),m.on("error",function(x){v.error(x)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(m){var v=this._sources;if(!u.prototype.error.call(this,m))return!1;for(var x=0;x<v.length;x++)try{v[x].error(m)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var m=this._sources,v=0;v<m.length;v++)m[v].lock()},n.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var s=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(l,u,c){var d=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{l.forEach(function(g,m){h++;var v=function(S,_){var N=S||_,j=s[N];if(!j)throw new Error(N+" is not a valid compression method !");return j}(m.options.compression,u.compression),x=m.options.compressionOptions||u.compressionOptions||{},b=m.dir,y=m.date;m._compressWorker(v,x).withStreamInfo("file",{name:g,dir:b,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,l){return new s().loadAsync(o,l)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var s=t("./utils"),o=t("./external"),l=t("./utf8"),u=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(g){return new o.Promise(function(m,v){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(b){v(b)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(g,m){var v=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,m.optimizedBinaryString,m.base64).then(function(x){var b=new u(m);return b.load(x),b}).then(function(x){var b=[o.Promise.resolve(x)],y=x.files;if(m.checkCRC32)for(var S=0;S<y.length;S++)b.push(h(y[S]));return o.Promise.all(b)}).then(function(x){for(var b=x.shift(),y=b.files,S=0;S<y.length;S++){var _=y[S],N=_.fileNameStr,j=s.resolve(_.fileNameStr);v.file(j,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(v.file(j).unsafeOriginalName=N)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var s=t("../utils"),o=t("../stream/GenericWorker");function l(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(l,o),l.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var s=t("readable-stream").Readable;function o(l,u,c){s.call(this,u),this._helper=l;var d=this;l.on("data",function(h,g){d.push(h)||d._helper.pause(),c&&c(g)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,a){function s(j,E,T){var F,A=l.getTypeOf(E),R=l.extend(T||{},d);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(j=y(j)),R.createFolders&&(F=b(j))&&S.call(this,F,!0);var I=A==="string"&&R.binary===!1&&R.base64===!1;T&&T.binary!==void 0||(R.binary=!I),(E instanceof h&&E.uncompressedSize===0||R.dir||!E||E.length===0)&&(R.base64=!1,R.binary=!0,E="",R.compression="STORE",A="string");var O=null;O=E instanceof h||E instanceof u?E:v.isNode&&v.isStream(E)?new x(j,E):l.prepareContent(j,E,R.binary,R.optimizedBinaryString,R.base64);var U=new g(j,O,R);this.files[j]=U}var o=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),g=t("./zipObject"),m=t("./generate"),v=t("./nodejsUtils"),x=t("./nodejs/NodejsStreamInputAdapter"),b=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var E=j.lastIndexOf("/");return 0<E?j.substring(0,E):""},y=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},S=function(j,E){return E=E!==void 0?E:d.createFolders,j=y(j),this.files[j]||s.call(this,j,null,{dir:!0,createFolders:E}),this.files[j]};function _(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var E,T,F;for(E in this.files)F=this.files[E],(T=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&j(T,F)},filter:function(j){var E=[];return this.forEach(function(T,F){j(T,F)&&E.push(F)}),E},file:function(j,E,T){if(arguments.length!==1)return j=this.root+j,s.call(this,j,E,T),this;if(_(j)){var F=j;return this.filter(function(R,I){return!I.dir&&F.test(R)})}var A=this.files[this.root+j];return A&&!A.dir?A:null},folder:function(j){if(!j)return this;if(_(j))return this.filter(function(A,R){return R.dir&&j.test(A)});var E=this.root+j,T=S.call(this,E),F=this.clone();return F.root=T.name,F},remove:function(j){j=this.root+j;var E=this.files[j];if(E||(j.slice(-1)!=="/"&&(j+="/"),E=this.files[j]),E&&!E.dir)delete this.files[j];else for(var T=this.filter(function(A,R){return R.name.slice(0,j.length)===j}),F=0;F<T.length;F++)delete this.files[T[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var E,T={};try{if((T=l.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");l.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var F=T.comment||this.comment||"";E=m.generateWorker(this,T,F)}catch(A){(E=new u("error")).error(A)}return new c(E,T.type||"string",T.mimeType)},generateAsync:function(j,E){return this.generateInternalStream(j).accumulate(E)},generateNodeStream:function(j,E){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(E)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var s=t("./DataReader");function o(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),c=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===h)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),c=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),g=this.readData(4);return u===g[0]&&c===g[1]&&d===g[2]&&h===g[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var s=t("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,c=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=l,c},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,a){var s=t("./Uint8ArrayReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var s=t("./DataReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var s=t("./ArrayReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var s=t("../utils"),o=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");n.exports=function(h){var g=s.getTypeOf(h);return s.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(h):o.uint8array?new d(s.transformTo("uint8array",h)):new l(s.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var s=t("./GenericWorker"),o=t("../utils");function l(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(l,s),l.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var s=t("./GenericWorker"),o=t("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var s=t("../utils"),o=t("./GenericWorker");function l(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(l,o),l.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var s=t("../utils"),o=t("./GenericWorker");function l(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=s.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}s.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(u){l.processChunk(u)}),o.on("end",function(){l.end()}),o.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(t,n,a){var s=t("../utils"),o=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),c=t("../support"),d=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,x){return new d.Promise(function(b,y){var S=[],_=v._internalType,N=v._outputType,j=v._mimeType;v.on("data",function(E,T){S.push(E),x&&x(T)}).on("error",function(E){S=[],y(E)}).on("end",function(){try{var E=function(T,F,A){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",F),A);case"base64":return u.encode(F);default:return s.transformTo(T,F)}}(N,function(T,F){var A,R=0,I=null,O=0;for(A=0;A<F.length;A++)O+=F[A].length;switch(T){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(I=new Uint8Array(O),A=0;A<F.length;A++)I.set(F[A],R),R+=F[A].length;return I;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+T+"'")}}(_,S),j);b(E)}catch(T){y(T)}S=[]}).resume()})}function m(v,x,b){var y=x;switch(x){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=x,this._mimeType=b,s.checkSupport(y),this._worker=v.pipe(new o(y)),v.lock()}catch(S){this._worker=new l("error"),this._worker.error(S)}}m.prototype={accumulate:function(v){return g(this,v)},on:function(v,x){var b=this;return v==="data"?this._worker.on(v,function(y){x.call(b,y.data,y.meta)}):this._worker.on(v,function(){s.delay(x,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var s=t("./utils"),o=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}a.utf8encode=function(m){return o.nodebuffer?l.newBufferFrom(m,"utf-8"):function(v){var x,b,y,S,_,N=v.length,j=0;for(S=0;S<N;S++)(64512&(b=v.charCodeAt(S)))==55296&&S+1<N&&(64512&(y=v.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),S++),j+=b<128?1:b<2048?2:b<65536?3:4;for(x=o.uint8array?new Uint8Array(j):new Array(j),S=_=0;_<j;S++)(64512&(b=v.charCodeAt(S)))==55296&&S+1<N&&(64512&(y=v.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),S++),b<128?x[_++]=b:(b<2048?x[_++]=192|b>>>6:(b<65536?x[_++]=224|b>>>12:(x[_++]=240|b>>>18,x[_++]=128|b>>>12&63),x[_++]=128|b>>>6&63),x[_++]=128|63&b);return x}(m)},a.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(v){var x,b,y,S,_=v.length,N=new Array(2*_);for(x=b=0;x<_;)if((y=v[x++])<128)N[b++]=y;else if(4<(S=c[y]))N[b++]=65533,x+=S-1;else{for(y&=S===2?31:S===3?15:7;1<S&&x<_;)y=y<<6|63&v[x++],S--;1<S?N[b++]=65533:y<65536?N[b++]=y:(y-=65536,N[b++]=55296|y>>10&1023,N[b++]=56320|1023&y)}return N.length!==b&&(N.subarray?N=N.subarray(0,b):N.length=b),s.applyFromCharCode(N)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(h,u),h.prototype.processChunk=function(m){var v=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=v;(v=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),v.set(x,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(S,_){var N;for((_=_||S.length)>S.length&&(_=S.length),N=_-1;0<=N&&(192&S[N])==128;)N--;return N<0||N===0?_:N+c[S[N]]>_?N:_}(v),y=v;b!==v.length&&(o.uint8array?(y=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(y=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:a.utf8decode(y),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,s.inherits(g,u),g.prototype.processChunk=function(m){this.push({data:a.utf8encode(m.data),meta:m.meta})},a.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var s=t("./support"),o=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function c(x){return x}function d(x,b){for(var y=0;y<x.length;++y)b[y]=255&x.charCodeAt(y);return b}t("setimmediate"),a.newBlob=function(x,b){a.checkSupport("blob");try{return new Blob([x],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(x),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(x,b,y){var S=[],_=0,N=x.length;if(N<=y)return String.fromCharCode.apply(null,x);for(;_<N;)b==="array"||b==="nodebuffer"?S.push(String.fromCharCode.apply(null,x.slice(_,Math.min(_+y,N)))):S.push(String.fromCharCode.apply(null,x.subarray(_,Math.min(_+y,N)))),_+=y;return S.join("")},stringifyByChar:function(x){for(var b="",y=0;y<x.length;y++)b+=String.fromCharCode(x[y]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var b=65536,y=a.getTypeOf(x),S=!0;if(y==="uint8array"?S=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<b;)try{return h.stringifyByChunk(x,y,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(x)}function m(x,b){for(var y=0;y<x.length;y++)b[y]=x[y];return b}a.applyFromCharCode=g;var v={};v.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return v.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,l.allocBuffer(x.length))}},v.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(x)}},v.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return m(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(new Uint8Array(x))}},v.uint8array={string:g,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return l.newBufferFrom(x)}},v.nodebuffer={string:g,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return v.nodebuffer.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:c},a.transformTo=function(x,b){if(b=b||"",!x)return b;a.checkSupport(x);var y=a.getTypeOf(b);return v[y][x](b)},a.resolve=function(x){for(var b=x.split("/"),y=[],S=0;S<b.length;S++){var _=b[S];_==="."||_===""&&S!==0&&S!==b.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},a.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(x)?"nodebuffer":s.uint8array&&x instanceof Uint8Array?"uint8array":s.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(x){if(!s[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(x){var b,y,S="";for(y=0;y<(x||"").length;y++)S+="\\x"+((b=x.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return S},a.delay=function(x,b,y){setImmediate(function(){x.apply(y||null,b||[])})},a.inherits=function(x,b){function y(){}y.prototype=b.prototype,x.prototype=new y},a.extend=function(){var x,b,y={};for(x=0;x<arguments.length;x++)for(b in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],b)&&y[b]===void 0&&(y[b]=arguments[x][b]);return y},a.prepareContent=function(x,b,y,S,_){return u.Promise.resolve(b).then(function(N){return s.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new u.Promise(function(j,E){var T=new FileReader;T.onload=function(F){j(F.target.result)},T.onerror=function(F){E(F.target.error)},T.readAsArrayBuffer(N)}):N}).then(function(N){var j=a.getTypeOf(N);return j?(j==="arraybuffer"?N=a.transformTo("uint8array",N):j==="string"&&(_?N=o.decode(N):y&&S!==!0&&(N=function(E){return d(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(N))),N):u.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var s=t("./reader/readerFor"),o=t("./utils"),l=t("./signature"),u=t("./zipEntry"),c=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(h)+")")}},isSignature:function(h,g){var m=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===g;return this.reader.setIndex(m),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",m=o.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,m,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),g=this.reader.readInt(4),m=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var v=g-m;if(0<v)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var s=t("./reader/readerFor"),o=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),c=t("./utf8"),d=t("./compressions"),h=t("./support");function g(m,v){this.options=m,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var v,x;if(m.skip(22),this.fileNameLength=m.readInt(2),x=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===b)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var v=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(v),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var v,x,b,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)v=m.readInt(2),x=m.readInt(2),b=m.readData(x),this.extraFields[v]={id:v,length:x,value:b};m.setIndex(y)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var x=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var v=s(m.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var v=s(m.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(m.length-5))}return null}},n.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function s(v,x,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=x,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");s.prototype={internalStream:function(v){var x=null,b="string";try{if(!v)throw new Error("No output type specified.");var y=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),x=this._decompressWorker();var S=!this._dataBinary;S&&!y&&(x=x.pipe(new u.Utf8EncodeWorker)),!S&&y&&(x=x.pipe(new u.Utf8DecodeWorker))}catch(_){(x=new d("error")).error(_)}return new o(x,b,"")},async:function(v,x){return this.internalStream(v).accumulate(x)},nodeStream:function(v,x){return this.internalStream(v||"nodebuffer").toNodejsStream(x)},_compressWorker:function(v,x){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(b,v,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)s.prototype[h[m]]=g;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(s){var o,l,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var c=0,d=new u(v),h=s.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var x=s.document.createElement("script");x.onreadystatechange=function(){v(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:function(){setTimeout(v,0)};else{var g=new s.MessageChannel;g.port1.onmessage=v,o=function(){g.port2.postMessage(0)}}var m=[];function v(){var x,b;l=!0;for(var y=m.length;y;){for(b=m,m=[],x=-1;++x<y;)b[x]();y=m.length}l=!1}n.exports=function(x){m.push(x)!==1||l||o()}}).call(this,typeof hs<"u"?hs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var s=t("immediate");function o(){}var l={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==o&&x(this,y)}function g(y,S,_){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(y,S,_){s(function(){var N;try{N=S(_)}catch(j){return l.reject(y,j)}N===y?l.reject(y,new TypeError("Cannot resolve promise with itself")):l.resolve(y,N)})}function v(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function x(y,S){var _=!1;function N(T){_||(_=!0,l.reject(y,T))}function j(T){_||(_=!0,l.resolve(y,T))}var E=b(function(){S(j,N)});E.status==="error"&&N(E.value)}function b(y,S){var _={};try{_.value=y(S),_.status="success"}catch(N){_.status="error",_.value=N}return _}(n.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var S=this.constructor;return this.then(function(_){return S.resolve(y()).then(function(){return _})},function(_){return S.resolve(y()).then(function(){throw _})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,S){if(typeof y!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var _=new this.constructor(o);return this.state!==d?m(_,this.state===c?y:S,this.outcome):this.queue.push(new g(_,y,S)),_},g.prototype.callFulfilled=function(y){l.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){l.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},l.resolve=function(y,S){var _=b(v,S);if(_.status==="error")return l.reject(y,_.value);var N=_.value;if(N)x(y,N);else{y.state=c,y.outcome=S;for(var j=-1,E=y.queue.length;++j<E;)y.queue[j].callFulfilled(S)}return y},l.reject=function(y,S){y.state=u,y.outcome=S;for(var _=-1,N=y.queue.length;++_<N;)y.queue[_].callRejected(S);return y},h.resolve=function(y){return y instanceof this?y:l.resolve(new this(o),y)},h.reject=function(y){var S=new this(o);return l.reject(S,y)},h.all=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,N=!1;if(!_)return this.resolve([]);for(var j=new Array(_),E=0,T=-1,F=new this(o);++T<_;)A(y[T],T);return F;function A(R,I){S.resolve(R).then(function(O){j[I]=O,++E!==_||N||(N=!0,l.resolve(F,j))},function(O){N||(N=!0,l.reject(F,O))})}},h.race=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,N=!1;if(!_)return this.resolve([]);for(var j=-1,E=new this(o);++j<_;)T=y[j],S.resolve(T).then(function(F){N||(N=!0,l.resolve(E,F))},function(F){N||(N=!0,l.reject(E,F))});var T;return E}},{immediate:36}],38:[function(t,n,a){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var s=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,h=0,g=-1,m=0,v=8;function x(y){if(!(this instanceof x))return new x(y);this.options=o.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(_!==h)throw new Error(u[_]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var N;if(N=typeof S.dictionary=="string"?l.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(_=s.deflateSetDictionary(this.strm,N))!==h)throw new Error(u[_]);this._dict_set=!0}}function b(y,S){var _=new x(S);if(_.push(y,!0),_.err)throw _.msg||u[_.err];return _.result}x.prototype.push=function(y,S){var _,N,j=this.strm,E=this.options.chunkSize;if(this.ended)return!1;N=S===~~S?S:S===!0?4:0,typeof y=="string"?j.input=l.string2buf(y):d.call(y)==="[object ArrayBuffer]"?j.input=new Uint8Array(y):j.input=y,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(E),j.next_out=0,j.avail_out=E),(_=s.deflate(j,N))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(j.output,j.next_out))):this.onData(o.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&_!==1);return N===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):N!==2||(this.onEnd(h),!(j.avail_out=0))},x.prototype.onData=function(y){this.chunks.push(y)},x.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Deflate=x,a.deflate=b,a.deflateRaw=function(y,S){return(S=S||{}).raw=!0,b(y,S)},a.gzip=function(y,S){return(S=S||{}).gzip=!0,b(y,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var s=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),g=Object.prototype.toString;function m(x){if(!(this instanceof m))return new m(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||x&&x.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==u.Z_OK)throw new Error(c[y]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function v(x,b){var y=new m(b);if(y.push(x,!0),y.err)throw y.msg||c[y.err];return y.result}m.prototype.push=function(x,b){var y,S,_,N,j,E,T=this.strm,F=this.options.chunkSize,A=this.options.dictionary,R=!1;if(this.ended)return!1;S=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof x=="string"?T.input=l.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?T.input=new Uint8Array(x):T.input=x,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(F),T.next_out=0,T.avail_out=F),(y=s.inflate(T,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&A&&(E=typeof A=="string"?l.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,y=s.inflateSetDictionary(this.strm,E)),y===u.Z_BUF_ERROR&&R===!0&&(y=u.Z_OK,R=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&y!==u.Z_STREAM_END&&(T.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=l.utf8border(T.output,T.next_out),N=T.next_out-_,j=l.buf2string(T.output,_),T.next_out=N,T.avail_out=F-N,N&&o.arraySet(T.output,T.output,_,N,0),this.onData(j)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(R=!0)}while((0<T.avail_in||T.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(T.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Inflate=m,a.inflate=v,a.inflateRaw=function(x,b){return(b=b||{}).raw=!0,v(x,b)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(u[h]=d[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,d,h,g){if(c.subarray&&u.subarray)u.set(c.subarray(d,d+h),g);else for(var m=0;m<h;m++)u[g+m]=c[d+m]},flattenChunks:function(u){var c,d,h,g,m,v;for(c=h=0,d=u.length;c<d;c++)h+=u[c].length;for(v=new Uint8Array(h),c=g=0,d=u.length;c<d;c++)m=u[c],v.set(m,g),g+=m.length;return v}},l={arraySet:function(u,c,d,h,g){for(var m=0;m<h;m++)u[g+m]=c[d+m]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(s)},{}],42:[function(t,n,a){var s=t("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new s.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,g){if(g<65537&&(h.subarray&&l||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,g));for(var m="",v=0;v<g;v++)m+=String.fromCharCode(h[v]);return m}u[254]=u[254]=1,a.string2buf=function(h){var g,m,v,x,b,y=h.length,S=0;for(x=0;x<y;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<y&&(64512&(v=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),S+=m<128?1:m<2048?2:m<65536?3:4;for(g=new s.Buf8(S),x=b=0;b<S;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<y&&(64512&(v=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),m<128?g[b++]=m:(m<2048?g[b++]=192|m>>>6:(m<65536?g[b++]=224|m>>>12:(g[b++]=240|m>>>18,g[b++]=128|m>>>12&63),g[b++]=128|m>>>6&63),g[b++]=128|63&m);return g},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var g=new s.Buf8(h.length),m=0,v=g.length;m<v;m++)g[m]=h.charCodeAt(m);return g},a.buf2string=function(h,g){var m,v,x,b,y=g||h.length,S=new Array(2*y);for(m=v=0;m<y;)if((x=h[m++])<128)S[v++]=x;else if(4<(b=u[x]))S[v++]=65533,m+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&m<y;)x=x<<6|63&h[m++],b--;1<b?S[v++]=65533:x<65536?S[v++]=x:(x-=65536,S[v++]=55296|x>>10&1023,S[v++]=56320|1023&x)}return d(S,v)},a.utf8border=function(h,g){var m;for((g=g||h.length)>h.length&&(g=h.length),m=g-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?g:m+u[h[m]]>g?m:g}},{"./common":41}],43:[function(t,n,a){n.exports=function(s,o,l,u){for(var c=65535&s|0,d=s>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;d=d+(c=c+o[u++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();n.exports=function(o,l,u,c){var d=s,h=c+u;o^=-1;for(var g=c;g<h;g++)o=o>>>8^d[255&(o^l[g])];return-1^o}},{}],46:[function(t,n,a){var s,o=t("../utils/common"),l=t("./trees"),u=t("./adler32"),c=t("./crc32"),d=t("./messages"),h=0,g=4,m=0,v=-2,x=-1,b=4,y=2,S=8,_=9,N=286,j=30,E=19,T=2*N+1,F=15,A=3,R=258,I=R+A+1,O=42,U=113,D=1,H=2,P=3,G=4;function ue(M,ge){return M.msg=d[ge],ge}function le(M){return(M<<1)-(4<M?9:0)}function pe(M){for(var ge=M.length;0<=--ge;)M[ge]=0}function de(M){var ge=M.state,ee=ge.pending;ee>M.avail_out&&(ee=M.avail_out),ee!==0&&(o.arraySet(M.output,ge.pending_buf,ge.pending_out,ee,M.next_out),M.next_out+=ee,ge.pending_out+=ee,M.total_out+=ee,M.avail_out-=ee,ge.pending-=ee,ge.pending===0&&(ge.pending_out=0))}function L(M,ge){l._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ge),M.block_start=M.strstart,de(M.strm)}function X(M,ge){M.pending_buf[M.pending++]=ge}function V(M,ge){M.pending_buf[M.pending++]=ge>>>8&255,M.pending_buf[M.pending++]=255&ge}function se(M,ge){var ee,k,B=M.max_chain_length,Q=M.strstart,Z=M.prev_length,J=M.nice_match,K=M.strstart>M.w_size-I?M.strstart-(M.w_size-I):0,te=M.window,me=M.w_mask,fe=M.prev,xe=M.strstart+R,_e=te[Q+Z-1],je=te[Q+Z];M.prev_length>=M.good_match&&(B>>=2),J>M.lookahead&&(J=M.lookahead);do if(te[(ee=ge)+Z]===je&&te[ee+Z-1]===_e&&te[ee]===te[Q]&&te[++ee]===te[Q+1]){Q+=2,ee++;do;while(te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&Q<xe);if(k=R-(xe-Q),Q=xe-R,Z<k){if(M.match_start=ge,J<=(Z=k))break;_e=te[Q+Z-1],je=te[Q+Z]}}while((ge=fe[ge&me])>K&&--B!=0);return Z<=M.lookahead?Z:M.lookahead}function ae(M){var ge,ee,k,B,Q,Z,J,K,te,me,fe=M.w_size;do{if(B=M.window_size-M.lookahead-M.strstart,M.strstart>=fe+(fe-I)){for(o.arraySet(M.window,M.window,fe,fe,0),M.match_start-=fe,M.strstart-=fe,M.block_start-=fe,ge=ee=M.hash_size;k=M.head[--ge],M.head[ge]=fe<=k?k-fe:0,--ee;);for(ge=ee=fe;k=M.prev[--ge],M.prev[ge]=fe<=k?k-fe:0,--ee;);B+=fe}if(M.strm.avail_in===0)break;if(Z=M.strm,J=M.window,K=M.strstart+M.lookahead,te=B,me=void 0,me=Z.avail_in,te<me&&(me=te),ee=me===0?0:(Z.avail_in-=me,o.arraySet(J,Z.input,Z.next_in,me,K),Z.state.wrap===1?Z.adler=u(Z.adler,J,me,K):Z.state.wrap===2&&(Z.adler=c(Z.adler,J,me,K)),Z.next_in+=me,Z.total_in+=me,me),M.lookahead+=ee,M.lookahead+M.insert>=A)for(Q=M.strstart-M.insert,M.ins_h=M.window[Q],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+A-1])&M.hash_mask,M.prev[Q&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Q,Q++,M.insert--,!(M.lookahead+M.insert<A)););}while(M.lookahead<I&&M.strm.avail_in!==0)}function W(M,ge){for(var ee,k;;){if(M.lookahead<I){if(ae(M),M.lookahead<I&&ge===h)return D;if(M.lookahead===0)break}if(ee=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),ee!==0&&M.strstart-ee<=M.w_size-I&&(M.match_length=se(M,ee)),M.match_length>=A)if(k=l._tr_tally(M,M.strstart-M.match_start,M.match_length-A),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=A){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else k=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(k&&(L(M,!1),M.strm.avail_out===0))return D}return M.insert=M.strstart<A-1?M.strstart:A-1,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):M.last_lit&&(L(M,!1),M.strm.avail_out===0)?D:H}function z(M,ge){for(var ee,k,B;;){if(M.lookahead<I){if(ae(M),M.lookahead<I&&ge===h)return D;if(M.lookahead===0)break}if(ee=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=A-1,ee!==0&&M.prev_length<M.max_lazy_match&&M.strstart-ee<=M.w_size-I&&(M.match_length=se(M,ee),M.match_length<=5&&(M.strategy===1||M.match_length===A&&4096<M.strstart-M.match_start)&&(M.match_length=A-1)),M.prev_length>=A&&M.match_length<=M.prev_length){for(B=M.strstart+M.lookahead-A,k=l._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-A),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=B&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=A-1,M.strstart++,k&&(L(M,!1),M.strm.avail_out===0))return D}else if(M.match_available){if((k=l._tr_tally(M,0,M.window[M.strstart-1]))&&L(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return D}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(k=l._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<A-1?M.strstart:A-1,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):M.last_lit&&(L(M,!1),M.strm.avail_out===0)?D:H}function re(M,ge,ee,k,B){this.good_length=M,this.max_lazy=ge,this.nice_length=ee,this.max_chain=k,this.func=B}function ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*j+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),pe(this.dyn_ltree),pe(this.dyn_dtree),pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(F+1),this.heap=new o.Buf16(2*N+1),pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(M){var ge;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=y,(ge=M.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?O:U,M.adler=ge.wrap===2?0:1,ge.last_flush=h,l._tr_init(ge),m):ue(M,v)}function oe(M){var ge=ie(M);return ge===m&&function(ee){ee.window_size=2*ee.w_size,pe(ee.head),ee.max_lazy_match=s[ee.level].max_lazy,ee.good_match=s[ee.level].good_length,ee.nice_match=s[ee.level].nice_length,ee.max_chain_length=s[ee.level].max_chain,ee.strstart=0,ee.block_start=0,ee.lookahead=0,ee.insert=0,ee.match_length=ee.prev_length=A-1,ee.match_available=0,ee.ins_h=0}(M.state),ge}function ye(M,ge,ee,k,B,Q){if(!M)return v;var Z=1;if(ge===x&&(ge=6),k<0?(Z=0,k=-k):15<k&&(Z=2,k-=16),B<1||_<B||ee!==S||k<8||15<k||ge<0||9<ge||Q<0||b<Q)return ue(M,v);k===8&&(k=9);var J=new ne;return(M.state=J).strm=M,J.wrap=Z,J.gzhead=null,J.w_bits=k,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=B+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+A-1)/A),J.window=new o.Buf8(2*J.w_size),J.head=new o.Buf16(J.hash_size),J.prev=new o.Buf16(J.w_size),J.lit_bufsize=1<<B+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new o.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=ge,J.strategy=Q,J.method=ee,oe(M)}s=[new re(0,0,0,0,function(M,ge){var ee=65535;for(ee>M.pending_buf_size-5&&(ee=M.pending_buf_size-5);;){if(M.lookahead<=1){if(ae(M),M.lookahead===0&&ge===h)return D;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var k=M.block_start+ee;if((M.strstart===0||M.strstart>=k)&&(M.lookahead=M.strstart-k,M.strstart=k,L(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-I&&(L(M,!1),M.strm.avail_out===0))return D}return M.insert=0,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):(M.strstart>M.block_start&&(L(M,!1),M.strm.avail_out),D)}),new re(4,4,8,4,W),new re(4,5,16,8,W),new re(4,6,32,32,W),new re(4,4,16,16,z),new re(8,16,32,32,z),new re(8,16,128,128,z),new re(8,32,128,256,z),new re(32,128,258,1024,z),new re(32,258,258,4096,z)],a.deflateInit=function(M,ge){return ye(M,ge,S,15,8,0)},a.deflateInit2=ye,a.deflateReset=oe,a.deflateResetKeep=ie,a.deflateSetHeader=function(M,ge){return M&&M.state?M.state.wrap!==2?v:(M.state.gzhead=ge,m):v},a.deflate=function(M,ge){var ee,k,B,Q;if(!M||!M.state||5<ge||ge<0)return M?ue(M,v):v;if(k=M.state,!M.output||!M.input&&M.avail_in!==0||k.status===666&&ge!==g)return ue(M,M.avail_out===0?-5:v);if(k.strm=M,ee=k.last_flush,k.last_flush=ge,k.status===O)if(k.wrap===2)M.adler=0,X(k,31),X(k,139),X(k,8),k.gzhead?(X(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),X(k,255&k.gzhead.time),X(k,k.gzhead.time>>8&255),X(k,k.gzhead.time>>16&255),X(k,k.gzhead.time>>24&255),X(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),X(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(X(k,255&k.gzhead.extra.length),X(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(M.adler=c(M.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(X(k,0),X(k,0),X(k,0),X(k,0),X(k,0),X(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),X(k,3),k.status=U);else{var Z=S+(k.w_bits-8<<4)<<8;Z|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(Z|=32),Z+=31-Z%31,k.status=U,V(k,Z),k.strstart!==0&&(V(k,M.adler>>>16),V(k,65535&M.adler)),M.adler=1}if(k.status===69)if(k.gzhead.extra){for(B=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending!==k.pending_buf_size));)X(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){B=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending===k.pending_buf_size)){Q=1;break}Q=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,X(k,Q)}while(Q!==0);k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),Q===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){B=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending===k.pending_buf_size)){Q=1;break}Q=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,X(k,Q)}while(Q!==0);k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),Q===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&de(M),k.pending+2<=k.pending_buf_size&&(X(k,255&M.adler),X(k,M.adler>>8&255),M.adler=0,k.status=U)):k.status=U),k.pending!==0){if(de(M),M.avail_out===0)return k.last_flush=-1,m}else if(M.avail_in===0&&le(ge)<=le(ee)&&ge!==g)return ue(M,-5);if(k.status===666&&M.avail_in!==0)return ue(M,-5);if(M.avail_in!==0||k.lookahead!==0||ge!==h&&k.status!==666){var J=k.strategy===2?function(K,te){for(var me;;){if(K.lookahead===0&&(ae(K),K.lookahead===0)){if(te===h)return D;break}if(K.match_length=0,me=l._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,me&&(L(K,!1),K.strm.avail_out===0))return D}return K.insert=0,te===g?(L(K,!0),K.strm.avail_out===0?P:G):K.last_lit&&(L(K,!1),K.strm.avail_out===0)?D:H}(k,ge):k.strategy===3?function(K,te){for(var me,fe,xe,_e,je=K.window;;){if(K.lookahead<=R){if(ae(K),K.lookahead<=R&&te===h)return D;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=A&&0<K.strstart&&(fe=je[xe=K.strstart-1])===je[++xe]&&fe===je[++xe]&&fe===je[++xe]){_e=K.strstart+R;do;while(fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&xe<_e);K.match_length=R-(_e-xe),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=A?(me=l._tr_tally(K,1,K.match_length-A),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(me=l._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),me&&(L(K,!1),K.strm.avail_out===0))return D}return K.insert=0,te===g?(L(K,!0),K.strm.avail_out===0?P:G):K.last_lit&&(L(K,!1),K.strm.avail_out===0)?D:H}(k,ge):s[k.level].func(k,ge);if(J!==P&&J!==G||(k.status=666),J===D||J===P)return M.avail_out===0&&(k.last_flush=-1),m;if(J===H&&(ge===1?l._tr_align(k):ge!==5&&(l._tr_stored_block(k,0,0,!1),ge===3&&(pe(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),de(M),M.avail_out===0))return k.last_flush=-1,m}return ge!==g?m:k.wrap<=0?1:(k.wrap===2?(X(k,255&M.adler),X(k,M.adler>>8&255),X(k,M.adler>>16&255),X(k,M.adler>>24&255),X(k,255&M.total_in),X(k,M.total_in>>8&255),X(k,M.total_in>>16&255),X(k,M.total_in>>24&255)):(V(k,M.adler>>>16),V(k,65535&M.adler)),de(M),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?m:1)},a.deflateEnd=function(M){var ge;return M&&M.state?(ge=M.state.status)!==O&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==U&&ge!==666?ue(M,v):(M.state=null,ge===U?ue(M,-3):m):v},a.deflateSetDictionary=function(M,ge){var ee,k,B,Q,Z,J,K,te,me=ge.length;if(!M||!M.state||(Q=(ee=M.state).wrap)===2||Q===1&&ee.status!==O||ee.lookahead)return v;for(Q===1&&(M.adler=u(M.adler,ge,me,0)),ee.wrap=0,me>=ee.w_size&&(Q===0&&(pe(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),te=new o.Buf8(ee.w_size),o.arraySet(te,ge,me-ee.w_size,ee.w_size,0),ge=te,me=ee.w_size),Z=M.avail_in,J=M.next_in,K=M.input,M.avail_in=me,M.next_in=0,M.input=ge,ae(ee);ee.lookahead>=A;){for(k=ee.strstart,B=ee.lookahead-(A-1);ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[k+A-1])&ee.hash_mask,ee.prev[k&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=k,k++,--B;);ee.strstart=k,ee.lookahead=A-1,ae(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=A-1,ee.match_available=0,M.next_in=J,M.input=K,M.avail_in=Z,ee.wrap=Q,m},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(s,o){var l,u,c,d,h,g,m,v,x,b,y,S,_,N,j,E,T,F,A,R,I,O,U,D,H;l=s.state,u=s.next_in,D=s.input,c=u+(s.avail_in-5),d=s.next_out,H=s.output,h=d-(o-s.avail_out),g=d+(s.avail_out-257),m=l.dmax,v=l.wsize,x=l.whave,b=l.wnext,y=l.window,S=l.hold,_=l.bits,N=l.lencode,j=l.distcode,E=(1<<l.lenbits)-1,T=(1<<l.distbits)-1;e:do{_<15&&(S+=D[u++]<<_,_+=8,S+=D[u++]<<_,_+=8),F=N[S&E];t:for(;;){if(S>>>=A=F>>>24,_-=A,(A=F>>>16&255)===0)H[d++]=65535&F;else{if(!(16&A)){if((64&A)==0){F=N[(65535&F)+(S&(1<<A)-1)];continue t}if(32&A){l.mode=12;break e}s.msg="invalid literal/length code",l.mode=30;break e}R=65535&F,(A&=15)&&(_<A&&(S+=D[u++]<<_,_+=8),R+=S&(1<<A)-1,S>>>=A,_-=A),_<15&&(S+=D[u++]<<_,_+=8,S+=D[u++]<<_,_+=8),F=j[S&T];r:for(;;){if(S>>>=A=F>>>24,_-=A,!(16&(A=F>>>16&255))){if((64&A)==0){F=j[(65535&F)+(S&(1<<A)-1)];continue r}s.msg="invalid distance code",l.mode=30;break e}if(I=65535&F,_<(A&=15)&&(S+=D[u++]<<_,(_+=8)<A&&(S+=D[u++]<<_,_+=8)),m<(I+=S&(1<<A)-1)){s.msg="invalid distance too far back",l.mode=30;break e}if(S>>>=A,_-=A,(A=d-h)<I){if(x<(A=I-A)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break e}if(U=y,(O=0)===b){if(O+=v-A,A<R){for(R-=A;H[d++]=y[O++],--A;);O=d-I,U=H}}else if(b<A){if(O+=v+b-A,(A-=b)<R){for(R-=A;H[d++]=y[O++],--A;);if(O=0,b<R){for(R-=A=b;H[d++]=y[O++],--A;);O=d-I,U=H}}}else if(O+=b-A,A<R){for(R-=A;H[d++]=y[O++],--A;);O=d-I,U=H}for(;2<R;)H[d++]=U[O++],H[d++]=U[O++],H[d++]=U[O++],R-=3;R&&(H[d++]=U[O++],1<R&&(H[d++]=U[O++]))}else{for(O=d-I;H[d++]=H[O++],H[d++]=H[O++],H[d++]=H[O++],2<(R-=3););R&&(H[d++]=H[O++],1<R&&(H[d++]=H[O++]))}break}}break}}while(u<c&&d<g);u-=R=_>>3,S&=(1<<(_-=R<<3))-1,s.next_in=u,s.next_out=d,s.avail_in=u<c?c-u+5:5-(u-c),s.avail_out=d<g?g-d+257:257-(d-g),l.hold=S,l.bits=_}},{}],49:[function(t,n,a){var s=t("../utils/common"),o=t("./adler32"),l=t("./crc32"),u=t("./inffast"),c=t("./inftrees"),d=1,h=2,g=0,m=-2,v=1,x=852,b=592;function y(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(O){var U;return O&&O.state?(U=O.state,O.total_in=O.total_out=U.total=0,O.msg="",U.wrap&&(O.adler=1&U.wrap),U.mode=v,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new s.Buf32(x),U.distcode=U.distdyn=new s.Buf32(b),U.sane=1,U.back=-1,g):m}function N(O){var U;return O&&O.state?((U=O.state).wsize=0,U.whave=0,U.wnext=0,_(O)):m}function j(O,U){var D,H;return O&&O.state?(H=O.state,U<0?(D=0,U=-U):(D=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?m:(H.window!==null&&H.wbits!==U&&(H.window=null),H.wrap=D,H.wbits=U,N(O))):m}function E(O,U){var D,H;return O?(H=new S,(O.state=H).window=null,(D=j(O,U))!==g&&(O.state=null),D):m}var T,F,A=!0;function R(O){if(A){var U;for(T=new s.Buf32(512),F=new s.Buf32(32),U=0;U<144;)O.lens[U++]=8;for(;U<256;)O.lens[U++]=9;for(;U<280;)O.lens[U++]=7;for(;U<288;)O.lens[U++]=8;for(c(d,O.lens,0,288,T,0,O.work,{bits:9}),U=0;U<32;)O.lens[U++]=5;c(h,O.lens,0,32,F,0,O.work,{bits:5}),A=!1}O.lencode=T,O.lenbits=9,O.distcode=F,O.distbits=5}function I(O,U,D,H){var P,G=O.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),H>=G.wsize?(s.arraySet(G.window,U,D-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(H<(P=G.wsize-G.wnext)&&(P=H),s.arraySet(G.window,U,D-H,P,G.wnext),(H-=P)?(s.arraySet(G.window,U,D-H,H,0),G.wnext=H,G.whave=G.wsize):(G.wnext+=P,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=P))),0}a.inflateReset=N,a.inflateReset2=j,a.inflateResetKeep=_,a.inflateInit=function(O){return E(O,15)},a.inflateInit2=E,a.inflate=function(O,U){var D,H,P,G,ue,le,pe,de,L,X,V,se,ae,W,z,re,ne,ie,oe,ye,M,ge,ee,k,B=0,Q=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return m;(D=O.state).mode===12&&(D.mode=13),ue=O.next_out,P=O.output,pe=O.avail_out,G=O.next_in,H=O.input,le=O.avail_in,de=D.hold,L=D.bits,X=le,V=pe,ge=g;e:for(;;)switch(D.mode){case v:if(D.wrap===0){D.mode=13;break}for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(2&D.wrap&&de===35615){Q[D.check=0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0),L=de=0,D.mode=2;break}if(D.flags=0,D.head&&(D.head.done=!1),!(1&D.wrap)||(((255&de)<<8)+(de>>8))%31){O.msg="incorrect header check",D.mode=30;break}if((15&de)!=8){O.msg="unknown compression method",D.mode=30;break}if(L-=4,M=8+(15&(de>>>=4)),D.wbits===0)D.wbits=M;else if(M>D.wbits){O.msg="invalid window size",D.mode=30;break}D.dmax=1<<M,O.adler=D.check=1,D.mode=512&de?10:12,L=de=0;break;case 2:for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(D.flags=de,(255&D.flags)!=8){O.msg="unknown compression method",D.mode=30;break}if(57344&D.flags){O.msg="unknown header flags set",D.mode=30;break}D.head&&(D.head.text=de>>8&1),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0,D.mode=3;case 3:for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.head&&(D.head.time=de),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,Q[2]=de>>>16&255,Q[3]=de>>>24&255,D.check=l(D.check,Q,4,0)),L=de=0,D.mode=4;case 4:for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.head&&(D.head.xflags=255&de,D.head.os=de>>8),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0,D.mode=5;case 5:if(1024&D.flags){for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.length=de,D.head&&(D.head.extra_len=de),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0}else D.head&&(D.head.extra=null);D.mode=6;case 6:if(1024&D.flags&&(le<(se=D.length)&&(se=le),se&&(D.head&&(M=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),s.arraySet(D.head.extra,H,G,se,M)),512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,D.length-=se),D.length))break e;D.length=0,D.mode=7;case 7:if(2048&D.flags){if(le===0)break e;for(se=0;M=H[G+se++],D.head&&M&&D.length<65536&&(D.head.name+=String.fromCharCode(M)),M&&se<le;);if(512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,M)break e}else D.head&&(D.head.name=null);D.length=0,D.mode=8;case 8:if(4096&D.flags){if(le===0)break e;for(se=0;M=H[G+se++],D.head&&M&&D.length<65536&&(D.head.comment+=String.fromCharCode(M)),M&&se<le;);if(512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,M)break e}else D.head&&(D.head.comment=null);D.mode=9;case 9:if(512&D.flags){for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de!==(65535&D.check)){O.msg="header crc mismatch",D.mode=30;break}L=de=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),O.adler=D.check=0,D.mode=12;break;case 10:for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}O.adler=D.check=y(de),L=de=0,D.mode=11;case 11:if(D.havedict===0)return O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,2;O.adler=D.check=1,D.mode=12;case 12:if(U===5||U===6)break e;case 13:if(D.last){de>>>=7&L,L-=7&L,D.mode=27;break}for(;L<3;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}switch(D.last=1&de,L-=1,3&(de>>>=1)){case 0:D.mode=14;break;case 1:if(R(D),D.mode=20,U!==6)break;de>>>=2,L-=2;break e;case 2:D.mode=17;break;case 3:O.msg="invalid block type",D.mode=30}de>>>=2,L-=2;break;case 14:for(de>>>=7&L,L-=7&L;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if((65535&de)!=(de>>>16^65535)){O.msg="invalid stored block lengths",D.mode=30;break}if(D.length=65535&de,L=de=0,D.mode=15,U===6)break e;case 15:D.mode=16;case 16:if(se=D.length){if(le<se&&(se=le),pe<se&&(se=pe),se===0)break e;s.arraySet(P,H,G,se,ue),le-=se,G+=se,pe-=se,ue+=se,D.length-=se;break}D.mode=12;break;case 17:for(;L<14;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(D.nlen=257+(31&de),de>>>=5,L-=5,D.ndist=1+(31&de),de>>>=5,L-=5,D.ncode=4+(15&de),de>>>=4,L-=4,286<D.nlen||30<D.ndist){O.msg="too many length or distance symbols",D.mode=30;break}D.have=0,D.mode=18;case 18:for(;D.have<D.ncode;){for(;L<3;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.lens[Z[D.have++]]=7&de,de>>>=3,L-=3}for(;D.have<19;)D.lens[Z[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,ee={bits:D.lenbits},ge=c(0,D.lens,0,19,D.lencode,0,D.work,ee),D.lenbits=ee.bits,ge){O.msg="invalid code lengths set",D.mode=30;break}D.have=0,D.mode=19;case 19:for(;D.have<D.nlen+D.ndist;){for(;re=(B=D.lencode[de&(1<<D.lenbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(ne<16)de>>>=z,L-=z,D.lens[D.have++]=ne;else{if(ne===16){for(k=z+2;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de>>>=z,L-=z,D.have===0){O.msg="invalid bit length repeat",D.mode=30;break}M=D.lens[D.have-1],se=3+(3&de),de>>>=2,L-=2}else if(ne===17){for(k=z+3;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}L-=z,M=0,se=3+(7&(de>>>=z)),de>>>=3,L-=3}else{for(k=z+7;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}L-=z,M=0,se=11+(127&(de>>>=z)),de>>>=7,L-=7}if(D.have+se>D.nlen+D.ndist){O.msg="invalid bit length repeat",D.mode=30;break}for(;se--;)D.lens[D.have++]=M}}if(D.mode===30)break;if(D.lens[256]===0){O.msg="invalid code -- missing end-of-block",D.mode=30;break}if(D.lenbits=9,ee={bits:D.lenbits},ge=c(d,D.lens,0,D.nlen,D.lencode,0,D.work,ee),D.lenbits=ee.bits,ge){O.msg="invalid literal/lengths set",D.mode=30;break}if(D.distbits=6,D.distcode=D.distdyn,ee={bits:D.distbits},ge=c(h,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,ee),D.distbits=ee.bits,ge){O.msg="invalid distances set",D.mode=30;break}if(D.mode=20,U===6)break e;case 20:D.mode=21;case 21:if(6<=le&&258<=pe){O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,u(O,V),ue=O.next_out,P=O.output,pe=O.avail_out,G=O.next_in,H=O.input,le=O.avail_in,de=D.hold,L=D.bits,D.mode===12&&(D.back=-1);break}for(D.back=0;re=(B=D.lencode[de&(1<<D.lenbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(re&&(240&re)==0){for(ie=z,oe=re,ye=ne;re=(B=D.lencode[ye+((de&(1<<ie+oe)-1)>>ie)])>>>16&255,ne=65535&B,!(ie+(z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}de>>>=ie,L-=ie,D.back+=ie}if(de>>>=z,L-=z,D.back+=z,D.length=ne,re===0){D.mode=26;break}if(32&re){D.back=-1,D.mode=12;break}if(64&re){O.msg="invalid literal/length code",D.mode=30;break}D.extra=15&re,D.mode=22;case 22:if(D.extra){for(k=D.extra;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.length+=de&(1<<D.extra)-1,de>>>=D.extra,L-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=23;case 23:for(;re=(B=D.distcode[de&(1<<D.distbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if((240&re)==0){for(ie=z,oe=re,ye=ne;re=(B=D.distcode[ye+((de&(1<<ie+oe)-1)>>ie)])>>>16&255,ne=65535&B,!(ie+(z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}de>>>=ie,L-=ie,D.back+=ie}if(de>>>=z,L-=z,D.back+=z,64&re){O.msg="invalid distance code",D.mode=30;break}D.offset=ne,D.extra=15&re,D.mode=24;case 24:if(D.extra){for(k=D.extra;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.offset+=de&(1<<D.extra)-1,de>>>=D.extra,L-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){O.msg="invalid distance too far back",D.mode=30;break}D.mode=25;case 25:if(pe===0)break e;if(se=V-pe,D.offset>se){if((se=D.offset-se)>D.whave&&D.sane){O.msg="invalid distance too far back",D.mode=30;break}ae=se>D.wnext?(se-=D.wnext,D.wsize-se):D.wnext-se,se>D.length&&(se=D.length),W=D.window}else W=P,ae=ue-D.offset,se=D.length;for(pe<se&&(se=pe),pe-=se,D.length-=se;P[ue++]=W[ae++],--se;);D.length===0&&(D.mode=21);break;case 26:if(pe===0)break e;P[ue++]=D.length,pe--,D.mode=21;break;case 27:if(D.wrap){for(;L<32;){if(le===0)break e;le--,de|=H[G++]<<L,L+=8}if(V-=pe,O.total_out+=V,D.total+=V,V&&(O.adler=D.check=D.flags?l(D.check,P,V,ue-V):o(D.check,P,V,ue-V)),V=pe,(D.flags?de:y(de))!==D.check){O.msg="incorrect data check",D.mode=30;break}L=de=0}D.mode=28;case 28:if(D.wrap&&D.flags){for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de!==(4294967295&D.total)){O.msg="incorrect length check",D.mode=30;break}L=de=0}D.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,(D.wsize||V!==O.avail_out&&D.mode<30&&(D.mode<27||U!==4))&&I(O,O.output,O.next_out,V-O.avail_out)?(D.mode=31,-4):(X-=O.avail_in,V-=O.avail_out,O.total_in+=X,O.total_out+=V,D.total+=V,D.wrap&&V&&(O.adler=D.check=D.flags?l(D.check,P,V,O.next_out-V):o(D.check,P,V,O.next_out-V)),O.data_type=D.bits+(D.last?64:0)+(D.mode===12?128:0)+(D.mode===20||D.mode===15?256:0),(X==0&&V===0||U===4)&&ge===g&&(ge=-5),ge)},a.inflateEnd=function(O){if(!O||!O.state)return m;var U=O.state;return U.window&&(U.window=null),O.state=null,g},a.inflateGetHeader=function(O,U){var D;return O&&O.state?(2&(D=O.state).wrap)==0?m:((D.head=U).done=!1,g):m},a.inflateSetDictionary=function(O,U){var D,H=U.length;return O&&O.state?(D=O.state).wrap!==0&&D.mode!==11?m:D.mode===11&&o(1,U,H,0)!==D.check?-3:I(O,U,H,H)?(D.mode=31,-4):(D.havedict=1,g):m},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,h,g,m,v,x,b,y){var S,_,N,j,E,T,F,A,R,I=y.bits,O=0,U=0,D=0,H=0,P=0,G=0,ue=0,le=0,pe=0,de=0,L=null,X=0,V=new s.Buf16(16),se=new s.Buf16(16),ae=null,W=0;for(O=0;O<=15;O++)V[O]=0;for(U=0;U<m;U++)V[h[g+U]]++;for(P=I,H=15;1<=H&&V[H]===0;H--);if(H<P&&(P=H),H===0)return v[x++]=20971520,v[x++]=20971520,y.bits=1,0;for(D=1;D<H&&V[D]===0;D++);for(P<D&&(P=D),O=le=1;O<=15;O++)if(le<<=1,(le-=V[O])<0)return-1;if(0<le&&(d===0||H!==1))return-1;for(se[1]=0,O=1;O<15;O++)se[O+1]=se[O]+V[O];for(U=0;U<m;U++)h[g+U]!==0&&(b[se[h[g+U]]++]=U);if(T=d===0?(L=ae=b,19):d===1?(L=o,X-=257,ae=l,W-=257,256):(L=u,ae=c,-1),O=D,E=x,ue=U=de=0,N=-1,j=(pe=1<<(G=P))-1,d===1&&852<pe||d===2&&592<pe)return 1;for(;;){for(F=O-ue,R=b[U]<T?(A=0,b[U]):b[U]>T?(A=ae[W+b[U]],L[X+b[U]]):(A=96,0),S=1<<O-ue,D=_=1<<G;v[E+(de>>ue)+(_-=S)]=F<<24|A<<16|R|0,_!==0;);for(S=1<<O-1;de&S;)S>>=1;if(S!==0?(de&=S-1,de+=S):de=0,U++,--V[O]==0){if(O===H)break;O=h[g+b[U]]}if(P<O&&(de&j)!==N){for(ue===0&&(ue=P),E+=D,le=1<<(G=O-ue);G+ue<H&&!((le-=V[G+ue])<=0);)G++,le<<=1;if(pe+=1<<G,d===1&&852<pe||d===2&&592<pe)return 1;v[N=de&j]=P<<24|G<<16|E-x|0}}return de!==0&&(v[E+de]=O-ue<<24|64<<16|0),y.bits=P,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var s=t("../utils/common"),o=0,l=1;function u(B){for(var Q=B.length;0<=--Q;)B[Q]=0}var c=0,d=29,h=256,g=h+1+d,m=30,v=19,x=2*g+1,b=15,y=16,S=7,_=256,N=16,j=17,E=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(g+2));u(I);var O=new Array(2*m);u(O);var U=new Array(512);u(U);var D=new Array(256);u(D);var H=new Array(d);u(H);var P,G,ue,le=new Array(m);function pe(B,Q,Z,J,K){this.static_tree=B,this.extra_bits=Q,this.extra_base=Z,this.elems=J,this.max_length=K,this.has_stree=B&&B.length}function de(B,Q){this.dyn_tree=B,this.max_code=0,this.stat_desc=Q}function L(B){return B<256?U[B]:U[256+(B>>>7)]}function X(B,Q){B.pending_buf[B.pending++]=255&Q,B.pending_buf[B.pending++]=Q>>>8&255}function V(B,Q,Z){B.bi_valid>y-Z?(B.bi_buf|=Q<<B.bi_valid&65535,X(B,B.bi_buf),B.bi_buf=Q>>y-B.bi_valid,B.bi_valid+=Z-y):(B.bi_buf|=Q<<B.bi_valid&65535,B.bi_valid+=Z)}function se(B,Q,Z){V(B,Z[2*Q],Z[2*Q+1])}function ae(B,Q){for(var Z=0;Z|=1&B,B>>>=1,Z<<=1,0<--Q;);return Z>>>1}function W(B,Q,Z){var J,K,te=new Array(b+1),me=0;for(J=1;J<=b;J++)te[J]=me=me+Z[J-1]<<1;for(K=0;K<=Q;K++){var fe=B[2*K+1];fe!==0&&(B[2*K]=ae(te[fe]++,fe))}}function z(B){var Q;for(Q=0;Q<g;Q++)B.dyn_ltree[2*Q]=0;for(Q=0;Q<m;Q++)B.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)B.bl_tree[2*Q]=0;B.dyn_ltree[2*_]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function re(B){8<B.bi_valid?X(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function ne(B,Q,Z,J){var K=2*Q,te=2*Z;return B[K]<B[te]||B[K]===B[te]&&J[Q]<=J[Z]}function ie(B,Q,Z){for(var J=B.heap[Z],K=Z<<1;K<=B.heap_len&&(K<B.heap_len&&ne(Q,B.heap[K+1],B.heap[K],B.depth)&&K++,!ne(Q,J,B.heap[K],B.depth));)B.heap[Z]=B.heap[K],Z=K,K<<=1;B.heap[Z]=J}function oe(B,Q,Z){var J,K,te,me,fe=0;if(B.last_lit!==0)for(;J=B.pending_buf[B.d_buf+2*fe]<<8|B.pending_buf[B.d_buf+2*fe+1],K=B.pending_buf[B.l_buf+fe],fe++,J===0?se(B,K,Q):(se(B,(te=D[K])+h+1,Q),(me=T[te])!==0&&V(B,K-=H[te],me),se(B,te=L(--J),Z),(me=F[te])!==0&&V(B,J-=le[te],me)),fe<B.last_lit;);se(B,_,Q)}function ye(B,Q){var Z,J,K,te=Q.dyn_tree,me=Q.stat_desc.static_tree,fe=Q.stat_desc.has_stree,xe=Q.stat_desc.elems,_e=-1;for(B.heap_len=0,B.heap_max=x,Z=0;Z<xe;Z++)te[2*Z]!==0?(B.heap[++B.heap_len]=_e=Z,B.depth[Z]=0):te[2*Z+1]=0;for(;B.heap_len<2;)te[2*(K=B.heap[++B.heap_len]=_e<2?++_e:0)]=1,B.depth[K]=0,B.opt_len--,fe&&(B.static_len-=me[2*K+1]);for(Q.max_code=_e,Z=B.heap_len>>1;1<=Z;Z--)ie(B,te,Z);for(K=xe;Z=B.heap[1],B.heap[1]=B.heap[B.heap_len--],ie(B,te,1),J=B.heap[1],B.heap[--B.heap_max]=Z,B.heap[--B.heap_max]=J,te[2*K]=te[2*Z]+te[2*J],B.depth[K]=(B.depth[Z]>=B.depth[J]?B.depth[Z]:B.depth[J])+1,te[2*Z+1]=te[2*J+1]=K,B.heap[1]=K++,ie(B,te,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(je,Be){var Re,ze,Ye,Le,it,ht,ce=Be.dyn_tree,be=Be.max_code,Fe=Be.stat_desc.static_tree,$e=Be.stat_desc.has_stree,vt=Be.stat_desc.extra_bits,Nt=Be.stat_desc.extra_base,Qt=Be.stat_desc.max_length,Vr=0;for(Le=0;Le<=b;Le++)je.bl_count[Le]=0;for(ce[2*je.heap[je.heap_max]+1]=0,Re=je.heap_max+1;Re<x;Re++)Qt<(Le=ce[2*ce[2*(ze=je.heap[Re])+1]+1]+1)&&(Le=Qt,Vr++),ce[2*ze+1]=Le,be<ze||(je.bl_count[Le]++,it=0,Nt<=ze&&(it=vt[ze-Nt]),ht=ce[2*ze],je.opt_len+=ht*(Le+it),$e&&(je.static_len+=ht*(Fe[2*ze+1]+it)));if(Vr!==0){do{for(Le=Qt-1;je.bl_count[Le]===0;)Le--;je.bl_count[Le]--,je.bl_count[Le+1]+=2,je.bl_count[Qt]--,Vr-=2}while(0<Vr);for(Le=Qt;Le!==0;Le--)for(ze=je.bl_count[Le];ze!==0;)be<(Ye=je.heap[--Re])||(ce[2*Ye+1]!==Le&&(je.opt_len+=(Le-ce[2*Ye+1])*ce[2*Ye],ce[2*Ye+1]=Le),ze--)}}(B,Q),W(te,_e,B.bl_count)}function M(B,Q,Z){var J,K,te=-1,me=Q[1],fe=0,xe=7,_e=4;for(me===0&&(xe=138,_e=3),Q[2*(Z+1)+1]=65535,J=0;J<=Z;J++)K=me,me=Q[2*(J+1)+1],++fe<xe&&K===me||(fe<_e?B.bl_tree[2*K]+=fe:K!==0?(K!==te&&B.bl_tree[2*K]++,B.bl_tree[2*N]++):fe<=10?B.bl_tree[2*j]++:B.bl_tree[2*E]++,te=K,_e=(fe=0)===me?(xe=138,3):K===me?(xe=6,3):(xe=7,4))}function ge(B,Q,Z){var J,K,te=-1,me=Q[1],fe=0,xe=7,_e=4;for(me===0&&(xe=138,_e=3),J=0;J<=Z;J++)if(K=me,me=Q[2*(J+1)+1],!(++fe<xe&&K===me)){if(fe<_e)for(;se(B,K,B.bl_tree),--fe!=0;);else K!==0?(K!==te&&(se(B,K,B.bl_tree),fe--),se(B,N,B.bl_tree),V(B,fe-3,2)):fe<=10?(se(B,j,B.bl_tree),V(B,fe-3,3)):(se(B,E,B.bl_tree),V(B,fe-11,7));te=K,_e=(fe=0)===me?(xe=138,3):K===me?(xe=6,3):(xe=7,4)}}u(le);var ee=!1;function k(B,Q,Z,J){V(B,(c<<1)+(J?1:0),3),function(K,te,me,fe){re(K),X(K,me),X(K,~me),s.arraySet(K.pending_buf,K.window,te,me,K.pending),K.pending+=me}(B,Q,Z)}a._tr_init=function(B){ee||(function(){var Q,Z,J,K,te,me=new Array(b+1);for(K=J=0;K<d-1;K++)for(H[K]=J,Q=0;Q<1<<T[K];Q++)D[J++]=K;for(D[J-1]=K,K=te=0;K<16;K++)for(le[K]=te,Q=0;Q<1<<F[K];Q++)U[te++]=K;for(te>>=7;K<m;K++)for(le[K]=te<<7,Q=0;Q<1<<F[K]-7;Q++)U[256+te++]=K;for(Z=0;Z<=b;Z++)me[Z]=0;for(Q=0;Q<=143;)I[2*Q+1]=8,Q++,me[8]++;for(;Q<=255;)I[2*Q+1]=9,Q++,me[9]++;for(;Q<=279;)I[2*Q+1]=7,Q++,me[7]++;for(;Q<=287;)I[2*Q+1]=8,Q++,me[8]++;for(W(I,g+1,me),Q=0;Q<m;Q++)O[2*Q+1]=5,O[2*Q]=ae(Q,5);P=new pe(I,T,h+1,g,b),G=new pe(O,F,0,m,b),ue=new pe(new Array(0),A,0,v,S)}(),ee=!0),B.l_desc=new de(B.dyn_ltree,P),B.d_desc=new de(B.dyn_dtree,G),B.bl_desc=new de(B.bl_tree,ue),B.bi_buf=0,B.bi_valid=0,z(B)},a._tr_stored_block=k,a._tr_flush_block=function(B,Q,Z,J){var K,te,me=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(fe){var xe,_e=4093624447;for(xe=0;xe<=31;xe++,_e>>>=1)if(1&_e&&fe.dyn_ltree[2*xe]!==0)return o;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return l;for(xe=32;xe<h;xe++)if(fe.dyn_ltree[2*xe]!==0)return l;return o}(B)),ye(B,B.l_desc),ye(B,B.d_desc),me=function(fe){var xe;for(M(fe,fe.dyn_ltree,fe.l_desc.max_code),M(fe,fe.dyn_dtree,fe.d_desc.max_code),ye(fe,fe.bl_desc),xe=v-1;3<=xe&&fe.bl_tree[2*R[xe]+1]===0;xe--);return fe.opt_len+=3*(xe+1)+5+5+4,xe}(B),K=B.opt_len+3+7>>>3,(te=B.static_len+3+7>>>3)<=K&&(K=te)):K=te=Z+5,Z+4<=K&&Q!==-1?k(B,Q,Z,J):B.strategy===4||te===K?(V(B,2+(J?1:0),3),oe(B,I,O)):(V(B,4+(J?1:0),3),function(fe,xe,_e,je){var Be;for(V(fe,xe-257,5),V(fe,_e-1,5),V(fe,je-4,4),Be=0;Be<je;Be++)V(fe,fe.bl_tree[2*R[Be]+1],3);ge(fe,fe.dyn_ltree,xe-1),ge(fe,fe.dyn_dtree,_e-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,me+1),oe(B,B.dyn_ltree,B.dyn_dtree)),z(B),J&&re(B)},a._tr_tally=function(B,Q,Z){return B.pending_buf[B.d_buf+2*B.last_lit]=Q>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&Q,B.pending_buf[B.l_buf+B.last_lit]=255&Z,B.last_lit++,Q===0?B.dyn_ltree[2*Z]++:(B.matches++,Q--,B.dyn_ltree[2*(D[Z]+h+1)]++,B.dyn_dtree[2*L(Q)]++),B.last_lit===B.lit_bufsize-1},a._tr_align=function(B){V(B,2,3),se(B,_,I),function(Q){Q.bi_valid===16?(X(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(s){(function(o,l){if(!o.setImmediate){var u,c,d,h,g=1,m={},v=!1,x=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,u={}.toString.call(o.process)==="[object process]"?function(N){sr.nextTick(function(){S(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,j=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=j,N}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(N){o.postMessage(h+N,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(N){S(N.data)},function(N){d.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(N){var j=x.createElement("script");j.onreadystatechange=function(){S(N),j.onreadystatechange=null,c.removeChild(j),j=null},c.appendChild(j)}):function(N){setTimeout(S,0,N)},b.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var j=new Array(arguments.length-1),E=0;E<j.length;E++)j[E]=arguments[E+1];var T={callback:N,args:j};return m[g]=T,u(g),g++},b.clearImmediate=y}function y(N){delete m[N]}function S(N){if(v)setTimeout(S,0,N);else{var j=m[N];if(j){v=!0;try{(function(E){var T=E.callback,F=E.args;switch(F.length){case 0:T();break;case 1:T(F[0]);break;case 2:T(F[0],F[1]);break;case 3:T(F[0],F[1],F[2]);break;default:T.apply(l,F)}})(j)}finally{y(N),v=!1}}}}function _(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(h)===0&&S(+N.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof hs<"u"?hs:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(O1)),O1.exports}var NL=_L();const SL=W5(NL);var Wd={exports:{}},B1,l3;function jL(){if(l3)return B1;l3=1;var r={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(t){return t&&t.replace?t.replace(/([&"<>'])/g,function(n,a){return r[a]}):t}return B1=e,B1}var c3;function EL(){if(c3)return Wd.exports;c3=1;var r=jL(),e=Zy().Stream,t="    ";function n(c,d){typeof d!="object"&&(d={indent:d});var h=d.stream?new e:null,g="",m=!1,v=d.indent?d.indent===!0?t:d.indent:"",x=!0;function b(j){x?sr.nextTick(j):j()}function y(j,E){if(E!==void 0&&(g+=E),j&&!m&&(h=h||new e,m=!0),j&&m){var T=g;b(function(){h.emit("data",T)}),g=""}}function S(j,E){l(y,o(j,v,v?1:0),E)}function _(){if(h){var j=g;b(function(){h.emit("data",j),h.emit("end"),h.readable=!1,h.emit("close")})}}function N(j){var E=j.encoding||"UTF-8",T={version:"1.0",encoding:E};j.standalone&&(T.standalone=j.standalone),S({"?xml":{_attr:T}}),g=g.replace("/>","?>")}return b(function(){x=!1}),d.declaration&&N(d.declaration),c&&c.forEach?c.forEach(function(j,E){var T;E+1===c.length&&(T=_),S(j,T)}):S(c,_),h?(h.readable=!0,h):g}function a(){var c=Array.prototype.slice.call(arguments),d={_elem:o(c)};return d.push=function(h){if(!this.append)throw new Error("not assigned to a parent!");var g=this,m=this._elem.indent;l(this.append,o(h,m,this._elem.icount+(m?1:0)),function(){g.append(!0)})},d.close=function(h){h!==void 0&&this.push(h),this.end&&this.end()},d}function s(c,d){return new Array(d||0).join(c||"")}function o(c,d,h){h=h||0;var g=s(d,h),m,v=c,x=!1;if(typeof c=="object"){var b=Object.keys(c);if(m=b[0],v=c[m],v&&v._elem)return v._elem.name=m,v._elem.icount=h,v._elem.indent=d,v._elem.indents=g,v._elem.interrupt=v,v._elem}var y=[],S=[],_;function N(j){var E=Object.keys(j);E.forEach(function(T){y.push(u(T,j[T]))})}switch(typeof v){case"object":if(v===null)break;v._attr&&N(v._attr),v._cdata&&S.push(("<![CDATA["+v._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),v.forEach&&(_=!1,S.push(""),v.forEach(function(j){if(typeof j=="object"){var E=Object.keys(j)[0];E=="_attr"?N(j._attr):S.push(o(j,d,h+1))}else S.pop(),_=!0,S.push(r(j))}),_||S.push(""));break;default:S.push(r(v))}return{name:m,interrupt:x,attributes:y,content:S,icount:h,indents:g,indent:d}}function l(c,d,h){if(typeof d!="object")return c(!1,d);var g=d.interrupt?1:d.content.length;function m(){for(;d.content.length;){var x=d.content.shift();if(x!==void 0){if(v(x))return;l(c,x)}}c(!1,(g>1?d.indents:"")+(d.name?"</"+d.name+">":"")+(d.indent&&!h?`
`:"")),h&&h()}function v(x){return x.interrupt?(x.interrupt.append=c,x.interrupt.end=m,x.interrupt=!1,c(!0),!0):!1}if(c(!1,d.indents+(d.name?"<"+d.name:"")+(d.attributes.length?" "+d.attributes.join(" "):"")+(g?d.name?">":"":d.name?"/>":"")+(d.indent&&g>1?`
`:"")),!g)return c(!1,d.indent?`
`:"");v(d)||m()}function u(c,d){return c+'="'+r(d)+'"'}return Wd.exports=n,Wd.exports.element=Wd.exports.Element=a,Wd.exports}var AL=EL();const on=W5(AL),Kd=0,R1=32,TL=32,CL=(r,e)=>{const t=e.replace(/-/g,"");if(t.length!==TL)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const a=t.replace(/(..)/g,"$1 ").trim().split(" ").map(u=>parseInt(u,16));a.reverse();const o=r.slice(Kd,R1).map((u,c)=>u^a[c%a.length]),l=new Uint8Array(Kd+o.length+Math.max(0,r.length-R1));return l.set(r.slice(0,Kd)),l.set(o,Kd),l.set(r.slice(R1),Kd+o.length),l};class DL{format(e,t={stack:[]}){const n=e.prepForXml(t);if(n)return n;throw Error("XMLComponent did not format correctly")}}class kL{replace(e,t,n){let a=e;return t.forEach((s,o)=>{a=a.replace(new RegExp(`{${s.fileName}}`,"g"),(n+o).toString())}),a}getMediaData(e,t){return t.Array.filter(n=>e.search(`{${n.fileName}}`)>0)}}class ML{replace(e,t){let n=e;for(const a of t)n=n.replace(new RegExp(`{${a.reference}-${a.instance}}`,"g"),a.numId.toString());return n}}class FL{constructor(){at(this,"formatter"),at(this,"imageReplacer"),at(this,"numberingReplacer"),this.formatter=new DL,this.imageReplacer=new kL,this.numberingReplacer=new ML}compile(e,t,n=[]){const a=new SL,s=this.xmlifyFile(e,t),o=new Map(Object.entries(s));for(const[,l]of o)if(Array.isArray(l))for(const u of l)a.file(u.path,u.data);else a.file(l.path,l.data);for(const l of n)a.file(l.path,l.data);for(const l of e.Media.Array)l.type!=="svg"?a.file(`word/media/${l.fileName}`,l.data):(a.file(`word/media/${l.fileName}`,l.data),a.file(`word/media/${l.fallback.fileName}`,l.fallback.data));for(const{data:l,name:u,fontKey:c}of e.FontTable.fontOptionsWithKey){const[d]=u.split(".");a.file(`word/fonts/${d}.odttf`,CL(l,c))}return a}xmlifyFile(e,t){const n=e.Document.Relationships.RelationshipCount+1,a=on(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=e.Comments.Relationships.RelationshipCount+1,o=on(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),l=this.imageReplacer.getMediaData(a,e.Media),u=this.imageReplacer.getMediaData(o,e.Media);return{Relationships:{data:(l.forEach((c,d)=>{e.Document.Relationships.createRelationship(n+d,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),on(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const c=this.imageReplacer.replace(a,l,n);return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const c=on(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:on(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:on(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:on(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((c,d)=>{const h=on(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(h,e.Media).forEach((m,v)=>{c.Relationships.createRelationship(v,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:on(this.formatter.format(c.Relationships,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${d+1}.xml.rels`}}),FooterRelationships:e.Footers.map((c,d)=>{const h=on(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(h,e.Media).forEach((m,v)=>{c.Relationships.createRelationship(v,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${m.fileName}`)}),{data:on(this.formatter.format(c.Relationships,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${d+1}.xml.rels`}}),Headers:e.Headers.map((c,d)=>{const h=on(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),g=this.imageReplacer.getMediaData(h,e.Media),m=this.imageReplacer.replace(h,g,0);return{data:this.numberingReplacer.replace(m,e.Numbering.ConcreteNumbering),path:`word/header${d+1}.xml`}}),Footers:e.Footers.map((c,d)=>{const h=on(this.formatter.format(c.View,{viewWrapper:c,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),g=this.imageReplacer.getMediaData(h,e.Media),m=this.imageReplacer.replace(h,g,0);return{data:this.numberingReplacer.replace(m,e.Numbering.ConcreteNumbering),path:`word/footer${d+1}.xml`}}),ContentTypes:{data:on(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:on(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:on(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:on(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:on(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:on(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const c=this.imageReplacer.replace(o,u,s);return this.numberingReplacer.replace(c,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(u.forEach((c,d)=>{e.Comments.Relationships.createRelationship(s+d,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${c.fileName}`)}),on(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:on(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:on(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:t,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const OL={WITH_2_BLANKS:"  "},u3=r=>r===!0?OL.WITH_2_BLANKS:r===!1?void 0:r,kT=class tu{static pack(e,t,n){return lO(this,arguments,function*(a,s,o,l=[]){return this.compiler.compile(a,u3(o),l).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,t,n=[]){return tu.pack(e,"string",t,n)}static toBuffer(e,t,n=[]){return tu.pack(e,"nodebuffer",t,n)}static toBase64String(e,t,n=[]){return tu.pack(e,"base64",t,n)}static toBlob(e,t,n=[]){return tu.pack(e,"blob",t,n)}static toArrayBuffer(e,t,n=[]){return tu.pack(e,"arraybuffer",t,n)}static toStream(e,t,n=[]){const a=new wL.Stream;return this.compiler.compile(e,u3(t),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(o=>{a.emit("data",o),a.emit("end")}),a}};at(kT,"compiler",new FL);let BL=kT;var tm={exports:{}},RL=tm.exports,d3;function LL(){return d3||(d3=1,function(r,e){(function(t,n){n()})(RL,function(){function t(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,d,h){var g=new XMLHttpRequest;g.open("GET",c),g.responseType="blob",g.onload=function(){u(g.response,d,h)},g.onerror=function(){console.error("could not download file")},g.send()}function a(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ro=="object"&&Ro.global===Ro?Ro:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,d,h){var g=o.URL||o.webkitURL,m=document.createElement("a");d=d||c.name||"download",m.download=d,m.rel="noopener",typeof c=="string"?(m.href=c,m.origin===location.origin?s(m):a(m.href)?n(c,d,h):s(m,m.target="_blank")):(m.href=g.createObjectURL(c),setTimeout(function(){g.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,h){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(t(c,h),d);else if(a(c))n(c,d,h);else{var g=document.createElement("a");g.href=c,g.target="_blank",setTimeout(function(){s(g)})}}:function(c,d,h,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof c=="string")return n(c,d,h);var m=c.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||m&&v||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var _=b.result;_=x?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=_:location=_,g=null},b.readAsDataURL(c)}else{var y=o.URL||o.webkitURL,S=y.createObjectURL(c);g?g.location=S:location.href=S,g=null,setTimeout(function(){y.revokeObjectURL(S)},4e4)}});o.saveAs=u.saveAs=u,r.exports=u})}(tm)),tm.exports}var y0=LL();/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var hm={};hm.version="0.18.5";var MT=1252,IL=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],FT=function(r){IL.indexOf(r)!=-1&&(MT=r)};function zL(){FT(1252)}var xf=function(r){FT(r)};function PL(){xf(1200),zL()}var b0=function(e){return String.fromCharCode(e)},f3=function(e){return String.fromCharCode(e)},mm,Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vf(r){for(var e="",t=0,n=0,a=0,s=0,o=0,l=0,u=0,c=0;c<r.length;)t=r.charCodeAt(c++),s=t>>2,n=r.charCodeAt(c++),o=(t&3)<<4|n>>4,a=r.charCodeAt(c++),l=(n&15)<<2|a>>6,u=a&63,isNaN(n)?l=u=64:isNaN(a)&&(u=64),e+=Lo.charAt(s)+Lo.charAt(o)+Lo.charAt(l)+Lo.charAt(u);return e}function Xs(r){var e="",t=0,n=0,a=0,s=0,o=0,l=0,u=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<r.length;)s=Lo.indexOf(r.charAt(c++)),o=Lo.indexOf(r.charAt(c++)),t=s<<2|o>>4,e+=String.fromCharCode(t),l=Lo.indexOf(r.charAt(c++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),u=Lo.indexOf(r.charAt(c++)),a=(l&3)<<6|u,u!==64&&(e+=String.fromCharCode(a));return e}var Sr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),to=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Pl(r){return Sr?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function h3(r){return Sr?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Ua=function(e){return Sr?to(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function dp(r){if(typeof ArrayBuffer>"u")return Ua(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function Rf(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function qL(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var ei=Sr?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:to(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),a=0;for(e=0,t=0;e<r.length;t+=a,++e)if(a=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function $L(r){for(var e=[],t=0,n=r.length+250,a=Pl(r.length+255),s=0;s<r.length;++s){var o=r.charCodeAt(s);if(o<128)a[t++]=o;else if(o<2048)a[t++]=192|o>>6&31,a[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=r.charCodeAt(++s)&1023;a[t++]=240|o>>8&7,a[t++]=128|o>>2&63,a[t++]=128|l>>6&15|(o&3)<<4,a[t++]=128|l&63}else a[t++]=224|o>>12&15,a[t++]=128|o>>6&63,a[t++]=128|o&63;t>n&&(e.push(a.slice(0,t)),t=0,a=Pl(65535),n=65530)}return e.push(a.slice(0,t)),ei(e)}var lf=/\u0000/g,w0=/[\u0001-\u0006]/g;function uu(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function Ha(r,e){var t=""+r;return t.length>=e?t:cn("0",e-t.length)+t}function sb(r,e){var t=""+r;return t.length>=e?t:cn(" ",e-t.length)+t}function pm(r,e){var t=""+r;return t.length>=e?t:t+cn(" ",e-t.length)}function UL(r,e){var t=""+Math.round(r);return t.length>=e?t:cn("0",e-t.length)+t}function HL(r,e){var t=""+r;return t.length>=e?t:cn("0",e-t.length)+t}var m3=Math.pow(2,32);function Hc(r,e){if(r>m3||r<-m3)return UL(r,e);var t=Math.round(r);return HL(t,e)}function gm(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var p3=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],L1=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function VL(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var un={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},g3={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},GL={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xm(r,e,t){for(var n=r<0?-1:1,a=r*n,s=0,o=1,l=0,u=1,c=0,d=0,h=Math.floor(a);c<e&&(h=Math.floor(a),l=h*o+s,d=h*c+u,!(a-h<5e-8));)a=1/(a-h),s=o,o=l,u=c,c=d;if(d>e&&(c>e?(d=u,l=s):(d=c,l=o)),!t)return[0,n*l,d];var g=Math.floor(n*l/d);return[g,n*l-g*d,d]}function _0(r,e,t){if(r>2958465||r<0)return null;var n=r|0,a=Math.floor(86400*(r-n)),s=0,o=[],l={D:n,T:a,u:86400*(r-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=t?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=t?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var u=new Date(1900,0,1);u.setDate(u.getDate()+n-1),o=[u.getFullYear(),u.getMonth()+1,u.getDate()],s=u.getDay(),n<60&&(s=(s+6)%7),t&&(s=JL(u,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var OT=new Date(1899,11,31,0,0,0),QL=OT.getTime(),WL=new Date(1900,2,1,0,0,0);function BT(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=WL&&(t+=1440*60*1e3),(t-(QL+(r.getTimezoneOffset()-OT.getTimezoneOffset())*6e4))/(1440*60*1e3)}function ob(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function KL(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function XL(r){var e=r<0?12:11,t=ob(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function YL(r){var e=ob(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function ZL(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=XL(r):e===10?t=r.toFixed(10).substr(0,12):t=YL(r),ob(KL(t.toUpperCase()))}function gy(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):ZL(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return Ho(14,BT(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function JL(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function eI(r,e,t,n){var a="",s=0,o=0,l=t.y,u,c=0;switch(r){case 98:l=t.y+543;case 121:switch(e.length){case 1:case 2:u=l%100,c=2;break;default:u=l%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:u=t.m,c=e.length;break;case 3:return L1[t.m-1][1];case 5:return L1[t.m-1][0];default:return L1[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:u=t.d,c=e.length;break;case 3:return p3[t.q][0];default:return p3[t.q][1]}break;case 104:switch(e.length){case 1:case 2:u=1+(t.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:u=t.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:u=t.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ha(t.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(t.S+t.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=Ha(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":u=t.D*24+t.H;break;case"[m]":case"[mm]":u=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":u=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:u=l,c=1;break}var d=c>0?Ha(u,c):"";return d}function Io(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var RT=/%/g;function tI(r,e,t){var n=e.replace(RT,""),a=e.length-n.length;return Vs(r,n,t*Math.pow(10,2*a))+cn("%",a)}function rI(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vs(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function LT(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+LT(r,-e);var a=r.indexOf(".");a===-1&&(a=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),t=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),t.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,a)+"."+t.substr(2+a),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,c,d){return u+c+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var IT=/# (\?+)( ?)\/( ?)(\d+)/;function nI(r,e,t){var n=parseInt(r[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return t+(s===0?"":""+s)+" "+(o===0?cn(" ",r[1].length+1+r[4].length):sb(o,r[1].length)+r[2]+"/"+r[3]+Ha(l,r[4].length))}function iI(r,e,t){return t+(e===0?"":""+e)+cn(" ",r[1].length+2+r[4].length)}var zT=/^#*0*\.([0#]+)/,PT=/\).*[0#]/,qT=/\(###\) ###\\?-####/;function bi(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function x3(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function v3(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function aI(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function sI(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function va(r,e,t){if(r.charCodeAt(0)===40&&!e.match(PT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?va("n",n,t):"("+va("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return rI(r,e,t);if(e.indexOf("%")!==-1)return tI(r,e,t);if(e.indexOf("E")!==-1)return LT(e,t);if(e.charCodeAt(0)===36)return"$"+va(r,e.substr(e.charAt(1)==" "?2:1),t);var a,s,o,l,u=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+Hc(u,e.length);if(e.match(/^[#?]+$/))return a=Hc(t,0),a==="0"&&(a=""),a.length>e.length?a:bi(e.substr(0,e.length-a.length))+a;if(s=e.match(IT))return nI(s,u,c);if(e.match(/^#+0+$/))return c+Hc(u,e.length-e.indexOf("0"));if(s=e.match(zT))return a=x3(t,s[1].length).replace(/^([^\.]+)$/,"$1."+bi(s[1])).replace(/\.$/,"."+bi(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+cn("0",bi(s[1]).length-x.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+x3(u,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Io(Hc(u,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+va(r,e,-t):Io(""+(Math.floor(t)+aI(t,s[1].length)))+"."+Ha(v3(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return va(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=uu(va(r,e.replace(/[\\-]/g,""),t)),o=0,uu(uu(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<a.length?a.charAt(o++):v==="0"?"0":""}));if(e.match(qT))return a=va(r,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=xm(u,Math.pow(10,o)-1,!1),a=""+c,d=Vs("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=pm(l[2],o),d.length<s[4].length&&(d=bi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=xm(u,Math.pow(10,o)-1,!0),c+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sb(l[1],o)+s[2]+"/"+s[3]+pm(l[2],o):cn(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Hc(t,0),e.length<=a.length?a:bi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,g=e.length-a.length-h;return bi(e.substr(0,h)+a+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=v3(t,s[1].length),t<0?"-"+va(r,e,-t):Io(sI(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ha(0,3-v.length):"")+v})+"."+Ha(o,s[1].length);switch(e){case"###,##0.00":return va(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var m=Io(Hc(u,0));return m!=="0"?c+m:"";case"###,###.00":return va(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return va(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function oI(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Vs(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function lI(r,e,t){var n=e.replace(RT,""),a=e.length-n.length;return Vs(r,n,t*Math.pow(10,2*a))+cn("%",a)}function $T(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+$T(r,-e);var a=r.indexOf(".");a===-1&&(a=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),t=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!t.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,u,c,d){return u+c+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function os(r,e,t){if(r.charCodeAt(0)===40&&!e.match(PT)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?os("n",n,t):"("+os("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return oI(r,e,t);if(e.indexOf("%")!==-1)return lI(r,e,t);if(e.indexOf("E")!==-1)return $T(e,t);if(e.charCodeAt(0)===36)return"$"+os(r,e.substr(e.charAt(1)==" "?2:1),t);var a,s,o,l,u=Math.abs(t),c=t<0?"-":"";if(e.match(/^00+$/))return c+Ha(u,e.length);if(e.match(/^[#?]+$/))return a=""+t,t===0&&(a=""),a.length>e.length?a:bi(e.substr(0,e.length-a.length))+a;if(s=e.match(IT))return iI(s,u,c);if(e.match(/^#+0+$/))return c+Ha(u,e.length-e.indexOf("0"));if(s=e.match(zT))return a=(""+t).replace(/^([^\.]+)$/,"$1."+bi(s[1])).replace(/\.$/,"."+bi(s[1])),a=a.replace(/\.(\d*)$/,function(v,x){return"."+x+cn("0",bi(s[1]).length-x.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+u).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Io(""+u);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+os(r,e,-t):Io(""+t)+"."+cn("0",s[1].length);if(s=e.match(/^#,#*,#0/))return os(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=uu(os(r,e.replace(/[\\-]/g,""),t)),o=0,uu(uu(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<a.length?a.charAt(o++):v==="0"?"0":""}));if(e.match(qT))return a=os(r,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=xm(u,Math.pow(10,o)-1,!1),a=""+c,d=Vs("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=pm(l[2],o),d.length<s[4].length&&(d=bi(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=xm(u,Math.pow(10,o)-1,!0),c+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sb(l[1],o)+s[2]+"/"+s[3]+pm(l[2],o):cn(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+t,e.length<=a.length?a:bi(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,g=e.length-a.length-h;return bi(e.substr(0,h)+a+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+os(r,e,-t):Io(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ha(0,3-v.length):"")+v})+"."+Ha(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=Io(""+u);return m!=="0"?c+m:"";default:if(e.match(/\.[0#?]*$/))return os(r,e.slice(0,e.lastIndexOf(".")),t)+bi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Vs(r,e,t){return(t|0)===t?os(r,e,t):va(r,e,t)}function cI(r){for(var e=[],t=!1,n=0,a=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(a,n-a),a=n+1}if(e[e.length]=r.substr(a),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var UT=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function HT(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":gm(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(UT))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function uI(r,e,t,n){for(var a=[],s="",o=0,l="",u="t",c,d,h,g="H";o<r.length;)switch(l=r.charAt(o)){case"G":if(!gm(r,o))throw new Error("unrecognized character "+l+" in "+r);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=r.charCodeAt(++o))!==34&&o<r.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++o;break;case"\\":var m=r.charAt(++o),v=m==="("||m===")"?m:"t";a[a.length]={t:v,v:m},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(r.charAt(o+1)==="1"||r.charAt(o+1)==="2"){if(c==null&&(c=_0(e,t,r.charAt(o+1)==="2"),c==null))return"";a[a.length]={t:"X",v:r.substr(o,2)},u=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=_0(e,t),c==null))return"";for(s=l;++o<r.length&&r.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&u.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=g),a[a.length]={t:l,v:s},u=l;break;case"A":case"a":case"":var x={t:l,v:l};if(c==null&&(c=_0(e,t)),r.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",g="h",o+=3):r.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",o+=5,g="h"):r.substr(o,5).toUpperCase()==="/"?(c!=null&&(x.v=c.H>=12?"":""),x.t="T",o+=5,g="h"):(x.t="t",++o),c==null&&x.t==="T")return"";a[a.length]=x,u=l;break;case"[":for(s=l;r.charAt(o++)!=="]"&&o<r.length;)s+=r.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(UT)){if(c==null&&(c=_0(e,t),c==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},u=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",HT(r)||(a[a.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=l;++o<r.length&&(l=r.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<r.length&&"0#?.,E+-%".indexOf(l=r.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;r.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},u=l;break;case"*":++o,(r.charAt(o)==" "||r.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<r.length&&"0123456789".indexOf(r.charAt(++o))>-1;)s+=r.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+r);a[a.length]={t:"t",v:l},++o;break}var b=0,y=0,S;for(o=a.length-1,u="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=g,u="h",b<1&&(b=1);break;case"s":(S=a[o].v.match(/\.0+$/))&&(y=Math.max(y,S[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=a[o].t;break;case"m":u==="s"&&(a[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[o].v.match(/[Hh]/)&&(b=1),b<2&&a[o].v.match(/[Mm]/)&&(b=2),b<3&&a[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var _="",N;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=eI(a[o].t.charCodeAt(0),a[o].v,c,y),a[o].t="t";break;case"n":case"?":for(N=o+1;a[N]!=null&&((l=a[N].t)==="?"||l==="D"||(l===" "||l==="t")&&a[N+1]!=null&&(a[N+1].t==="?"||a[N+1].t==="t"&&a[N+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[N].v==="/"||a[N].v===" "&&a[N+1]!=null&&a[N+1].t=="?"));)a[o].v+=a[N].v,a[N]={v:"",t:";"},++N;_+=a[o].v,o=N-1;break;case"G":a[o].t="t",a[o].v=gy(e,t);break}var j="",E,T;if(_.length>0){_.charCodeAt(0)==40?(E=e<0&&_.charCodeAt(0)===45?-e:e,T=Vs("n",_,E)):(E=e<0&&n>1?-e:e,T=Vs("n",_,E),E<0&&a[0]&&a[0].t=="t"&&(T=T.substr(1),a[0].v="-"+a[0].v)),N=T.length-1;var F=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){F=o;break}var A=a.length;if(F===a.length&&T.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(N>=a[o].v.length-1?(N-=a[o].v.length,a[o].v=T.substr(N+1,a[o].v.length)):N<0?a[o].v="":(a[o].v=T.substr(0,N+1),N=-1),a[o].t="t",A=o);N>=0&&A<a.length&&(a[A].v=T.substr(0,N+1)+a[A].v)}else if(F!==a.length&&T.indexOf("E")===-1){for(N=T.indexOf(".")-1,o=F;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===F?a[o].v.indexOf(".")-1:a[o].v.length-1,j=a[o].v.substr(d+1);d>=0;--d)N>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(j=T.charAt(N--)+j);a[o].v=j,a[o].t="t",A=o}for(N>=0&&A<a.length&&(a[A].v=T.substr(0,N+1)+a[A].v),N=T.indexOf(".")+1,o=F;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==F)){for(d=a[o].v.indexOf(".")>-1&&o===F?a[o].v.indexOf(".")+1:0,j=a[o].v.substr(0,d);d<a[o].v.length;++d)N<T.length&&(j+=T.charAt(N++));a[o].v=j,a[o].t="t",A=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(E=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=Vs(a[o].t,a[o].v,E),a[o].t="t");var R="";for(o=0;o!==a.length;++o)a[o]!=null&&(R+=a[o].v);return R}var y3=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function b3(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function dI(r,e){var t=cI(r),n=t.length,a=t[n-1].indexOf("@");if(n<4&&a>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||a>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=a>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=a>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=a>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match(y3),l=t[1].match(y3);return b3(e,o)?[n,t[0]]:b3(e,l)?[n,t[1]]:[n,t[o!=null&&l!=null?2:1]]}return[n,s]}function Ho(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:un)[r],n==null&&(n=t.table&&t.table[g3[r]]||un[g3[r]]),n==null&&(n=GL[r]||"General");break}if(gm(n,0))return gy(e,t);e instanceof Date&&(e=BT(e,t.date1904));var a=dI(n,e);if(gm(a[1]))return gy(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return uI(a[1],e,t,a[0])}function VT(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(un[t]==null){e<0&&(e=t);continue}if(un[t]==r){e=t;break}}e<0&&(e=391)}return un[e]=r,e}function fp(r){for(var e=0;e!=392;++e)r[e]!==void 0&&VT(r[e],e)}function hp(){un=VL()}var GT=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function fI(r){var e=typeof r=="number"?un[r]:r;return e=e.replace(GT,"(\\d+)"),new RegExp("^"+e+"$")}function hI(r,e,t){var n=-1,a=-1,s=-1,o=-1,l=-1,u=-1;(e.match(GT)||[]).forEach(function(h,g){var m=parseInt(t[g+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=m;break;case"d":s=m;break;case"h":o=m;break;case"s":u=m;break;case"m":o>=0?l=m:a=m;break}}),u>=0&&l==-1&&a>=0&&(l=a,a=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2);return o==-1&&l==-1&&u==-1?c:n==-1&&a==-1&&s==-1?d:c+"T"+d}var mI=function(){var r={};r.version="1.2.0";function e(){for(var T=0,F=new Array(256),A=0;A!=256;++A)T=A,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,T=T&1?-306674912^T>>>1:T>>>1,F[A]=T;return typeof Int32Array<"u"?new Int32Array(F):F}var t=e();function n(T){var F=0,A=0,R=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)I[R]=T[R];for(R=0;R!=256;++R)for(A=T[R],F=256+R;F<4096;F+=256)A=I[F]=A>>>8^T[A&255];var O=[];for(R=1;R!=16;++R)O[R-1]=typeof Int32Array<"u"?I.subarray(R*256,R*256+256):I.slice(R*256,R*256+256);return O}var a=n(t),s=a[0],o=a[1],l=a[2],u=a[3],c=a[4],d=a[5],h=a[6],g=a[7],m=a[8],v=a[9],x=a[10],b=a[11],y=a[12],S=a[13],_=a[14];function N(T,F){for(var A=F^-1,R=0,I=T.length;R<I;)A=A>>>8^t[(A^T.charCodeAt(R++))&255];return~A}function j(T,F){for(var A=F^-1,R=T.length-15,I=0;I<R;)A=_[T[I++]^A&255]^S[T[I++]^A>>8&255]^y[T[I++]^A>>16&255]^b[T[I++]^A>>>24]^x[T[I++]]^v[T[I++]]^m[T[I++]]^g[T[I++]]^h[T[I++]]^d[T[I++]]^c[T[I++]]^u[T[I++]]^l[T[I++]]^o[T[I++]]^s[T[I++]]^t[T[I++]];for(R+=15;I<R;)A=A>>>8^t[(A^T[I++])&255];return~A}function E(T,F){for(var A=F^-1,R=0,I=T.length,O=0,U=0;R<I;)O=T.charCodeAt(R++),O<128?A=A>>>8^t[(A^O)&255]:O<2048?(A=A>>>8^t[(A^(192|O>>6&31))&255],A=A>>>8^t[(A^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,U=T.charCodeAt(R++)&1023,A=A>>>8^t[(A^(240|O>>8&7))&255],A=A>>>8^t[(A^(128|O>>2&63))&255],A=A>>>8^t[(A^(128|U>>6&15|(O&3)<<4))&255],A=A>>>8^t[(A^(128|U&63))&255]):(A=A>>>8^t[(A^(224|O>>12&15))&255],A=A>>>8^t[(A^(128|O>>6&63))&255],A=A>>>8^t[(A^(128|O&63))&255]);return~A}return r.table=t,r.bstr=N,r.buf=j,r.str=E,r}(),Ur=function(){var e={};e.version="1.2.1";function t(we,De){for(var Ee=we.split("/"),Ae=De.split("/"),Ce=0,ke=0,Ve=Math.min(Ee.length,Ae.length);Ce<Ve;++Ce){if(ke=Ee[Ce].length-Ae[Ce].length)return ke;if(Ee[Ce]!=Ae[Ce])return Ee[Ce]<Ae[Ce]?-1:1}return Ee.length-Ae.length}function n(we){if(we.charAt(we.length-1)=="/")return we.slice(0,-1).indexOf("/")===-1?we:n(we.slice(0,-1));var De=we.lastIndexOf("/");return De===-1?we:we.slice(0,De+1)}function a(we){if(we.charAt(we.length-1)=="/")return a(we.slice(0,-1));var De=we.lastIndexOf("/");return De===-1?we:we.slice(De+1)}function s(we,De){typeof De=="string"&&(De=new Date(De));var Ee=De.getHours();Ee=Ee<<6|De.getMinutes(),Ee=Ee<<5|De.getSeconds()>>>1,we.write_shift(2,Ee);var Ae=De.getFullYear()-1980;Ae=Ae<<4|De.getMonth()+1,Ae=Ae<<5|De.getDate(),we.write_shift(2,Ae)}function o(we){var De=we.read_shift(2)&65535,Ee=we.read_shift(2)&65535,Ae=new Date,Ce=Ee&31;Ee>>>=5;var ke=Ee&15;Ee>>>=4,Ae.setMilliseconds(0),Ae.setFullYear(Ee+1980),Ae.setMonth(ke-1),Ae.setDate(Ce);var Ve=De&31;De>>>=5;var Ze=De&63;return De>>>=6,Ae.setHours(De),Ae.setMinutes(Ze),Ae.setSeconds(Ve<<1),Ae}function l(we){Zi(we,0);for(var De={},Ee=0;we.l<=we.length-4;){var Ae=we.read_shift(2),Ce=we.read_shift(2),ke=we.l+Ce,Ve={};switch(Ae){case 21589:Ee=we.read_shift(1),Ee&1&&(Ve.mtime=we.read_shift(4)),Ce>5&&(Ee&2&&(Ve.atime=we.read_shift(4)),Ee&4&&(Ve.ctime=we.read_shift(4))),Ve.mtime&&(Ve.mt=new Date(Ve.mtime*1e3));break}we.l=ke,De[Ae]=Ve}return De}var u;function c(){return u||(u={})}function d(we,De){if(we[0]==80&&we[1]==75)return vt(we,De);if((we[0]|32)==109&&(we[1]|32)==105)return cl(we,De);if(we.length<512)throw new Error("CFB file size "+we.length+" < 512");var Ee=3,Ae=512,Ce=0,ke=0,Ve=0,Ze=0,qe=0,Ge=[],Ke=we.slice(0,512);Zi(Ke,0);var dt=h(Ke);switch(Ee=dt[0],Ee){case 3:Ae=512;break;case 4:Ae=4096;break;case 0:if(dt[1]==0)return vt(we,De);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}Ae!==512&&(Ke=we.slice(0,Ae),Zi(Ke,28));var yt=we.slice(0,Ae);g(Ke,Ee);var St=Ke.read_shift(4,"i");if(Ee===3&&St!==0)throw new Error("# Directory Sectors: Expected 0 saw "+St);Ke.l+=4,Ve=Ke.read_shift(4,"i"),Ke.l+=4,Ke.chk("00100000","Mini Stream Cutoff Size: "),Ze=Ke.read_shift(4,"i"),Ce=Ke.read_shift(4,"i"),qe=Ke.read_shift(4,"i"),ke=Ke.read_shift(4,"i");for(var pt=-1,ut=0;ut<109&&(pt=Ke.read_shift(4,"i"),!(pt<0));++ut)Ge[ut]=pt;var Mt=m(we,Ae);b(qe,ke,Mt,Ae,Ge);var Er=S(Mt,Ve,Ge,Ae);Er[Ve].name="!Directory",Ce>0&&Ze!==U&&(Er[Ze].name="!MiniFAT"),Er[Ge[0]].name="!FAT",Er.fat_addrs=Ge,Er.ssz=Ae;var vr={},yr=[],ka=[],oo=[];_(Ve,Er,Mt,yr,Ce,vr,ka,Ze),v(ka,oo,yr),yr.shift();var aa={FileIndex:ka,FullPaths:oo};return De&&De.raw&&(aa.raw={header:yt,sectors:Mt}),aa}function h(we){if(we[we.l]==80&&we[we.l+1]==75)return[0,0];we.chk(D,"Header Signature: "),we.l+=16;var De=we.read_shift(2,"u");return[we.read_shift(2,"u"),De]}function g(we,De){var Ee=9;switch(we.l+=2,Ee=we.read_shift(2)){case 9:if(De!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(De!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}we.chk("0600","Mini Sector Shift: "),we.chk("000000000000","Reserved: ")}function m(we,De){for(var Ee=Math.ceil(we.length/De)-1,Ae=[],Ce=1;Ce<Ee;++Ce)Ae[Ce-1]=we.slice(Ce*De,(Ce+1)*De);return Ae[Ee-1]=we.slice(Ee*De),Ae}function v(we,De,Ee){for(var Ae=0,Ce=0,ke=0,Ve=0,Ze=0,qe=Ee.length,Ge=[],Ke=[];Ae<qe;++Ae)Ge[Ae]=Ke[Ae]=Ae,De[Ae]=Ee[Ae];for(;Ze<Ke.length;++Ze)Ae=Ke[Ze],Ce=we[Ae].L,ke=we[Ae].R,Ve=we[Ae].C,Ge[Ae]===Ae&&(Ce!==-1&&Ge[Ce]!==Ce&&(Ge[Ae]=Ge[Ce]),ke!==-1&&Ge[ke]!==ke&&(Ge[Ae]=Ge[ke])),Ve!==-1&&(Ge[Ve]=Ae),Ce!==-1&&Ae!=Ge[Ae]&&(Ge[Ce]=Ge[Ae],Ke.lastIndexOf(Ce)<Ze&&Ke.push(Ce)),ke!==-1&&Ae!=Ge[Ae]&&(Ge[ke]=Ge[Ae],Ke.lastIndexOf(ke)<Ze&&Ke.push(ke));for(Ae=1;Ae<qe;++Ae)Ge[Ae]===Ae&&(ke!==-1&&Ge[ke]!==ke?Ge[Ae]=Ge[ke]:Ce!==-1&&Ge[Ce]!==Ce&&(Ge[Ae]=Ge[Ce]));for(Ae=1;Ae<qe;++Ae)if(we[Ae].type!==0){if(Ze=Ae,Ze!=Ge[Ze])do Ze=Ge[Ze],De[Ae]=De[Ze]+"/"+De[Ae];while(Ze!==0&&Ge[Ze]!==-1&&Ze!=Ge[Ze]);Ge[Ae]=-1}for(De[0]+="/",Ae=1;Ae<qe;++Ae)we[Ae].type!==2&&(De[Ae]+="/")}function x(we,De,Ee){for(var Ae=we.start,Ce=we.size,ke=[],Ve=Ae;Ee&&Ce>0&&Ve>=0;)ke.push(De.slice(Ve*O,Ve*O+O)),Ce-=O,Ve=kl(Ee,Ve*4);return ke.length===0?Je(0):ei(ke).slice(0,we.size)}function b(we,De,Ee,Ae,Ce){var ke=U;if(we===U){if(De!==0)throw new Error("DIFAT chain shorter than expected")}else if(we!==-1){var Ve=Ee[we],Ze=(Ae>>>2)-1;if(!Ve)return;for(var qe=0;qe<Ze&&(ke=kl(Ve,qe*4))!==U;++qe)Ce.push(ke);b(kl(Ve,Ae-4),De-1,Ee,Ae,Ce)}}function y(we,De,Ee,Ae,Ce){var ke=[],Ve=[];Ce||(Ce=[]);var Ze=Ae-1,qe=0,Ge=0;for(qe=De;qe>=0;){Ce[qe]=!0,ke[ke.length]=qe,Ve.push(we[qe]);var Ke=Ee[Math.floor(qe*4/Ae)];if(Ge=qe*4&Ze,Ae<4+Ge)throw new Error("FAT boundary crossed: "+qe+" 4 "+Ae);if(!we[Ke])break;qe=kl(we[Ke],Ge)}return{nodes:ke,data:T3([Ve])}}function S(we,De,Ee,Ae){var Ce=we.length,ke=[],Ve=[],Ze=[],qe=[],Ge=Ae-1,Ke=0,dt=0,yt=0,St=0;for(Ke=0;Ke<Ce;++Ke)if(Ze=[],yt=Ke+De,yt>=Ce&&(yt-=Ce),!Ve[yt]){qe=[];var pt=[];for(dt=yt;dt>=0;){pt[dt]=!0,Ve[dt]=!0,Ze[Ze.length]=dt,qe.push(we[dt]);var ut=Ee[Math.floor(dt*4/Ae)];if(St=dt*4&Ge,Ae<4+St)throw new Error("FAT boundary crossed: "+dt+" 4 "+Ae);if(!we[ut]||(dt=kl(we[ut],St),pt[dt]))break}ke[yt]={nodes:Ze,data:T3([qe])}}return ke}function _(we,De,Ee,Ae,Ce,ke,Ve,Ze){for(var qe=0,Ge=Ae.length?2:0,Ke=De[we].data,dt=0,yt=0,St;dt<Ke.length;dt+=128){var pt=Ke.slice(dt,dt+128);Zi(pt,64),yt=pt.read_shift(2),St=fb(pt,0,yt-Ge),Ae.push(St);var ut={name:St,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},Mt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Mt!==0&&(ut.ct=N(pt,pt.l-8));var Er=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Er!==0&&(ut.mt=N(pt,pt.l-8)),ut.start=pt.read_shift(4,"i"),ut.size=pt.read_shift(4,"i"),ut.size<0&&ut.start<0&&(ut.size=ut.type=0,ut.start=U,ut.name=""),ut.type===5?(qe=ut.start,Ce>0&&qe!==U&&(De[qe].name="!StreamData")):ut.size>=4096?(ut.storage="fat",De[ut.start]===void 0&&(De[ut.start]=y(Ee,ut.start,De.fat_addrs,De.ssz)),De[ut.start].name=ut.name,ut.content=De[ut.start].data.slice(0,ut.size)):(ut.storage="minifat",ut.size<0?ut.size=0:qe!==U&&ut.start!==U&&De[qe]&&(ut.content=x(ut,De[qe].data,(De[Ze]||{}).data))),ut.content&&Zi(ut.content,0),ke[St]=ut,Ve.push(ut)}}function N(we,De){return new Date((ta(we,De+4)/1e7*Math.pow(2,32)+ta(we,De)/1e7-11644473600)*1e3)}function j(we,De){return c(),d(u.readFileSync(we),De)}function E(we,De){var Ee=De&&De.type;switch(Ee||Sr&&Buffer.isBuffer(we)&&(Ee="buffer"),Ee||"base64"){case"file":return j(we,De);case"base64":return d(Ua(Xs(we)),De);case"binary":return d(Ua(we),De)}return d(we,De)}function T(we,De){var Ee=De||{},Ae=Ee.root||"Root Entry";if(we.FullPaths||(we.FullPaths=[]),we.FileIndex||(we.FileIndex=[]),we.FullPaths.length!==we.FileIndex.length)throw new Error("inconsistent CFB structure");we.FullPaths.length===0&&(we.FullPaths[0]=Ae+"/",we.FileIndex[0]={name:Ae,type:5}),Ee.CLSID&&(we.FileIndex[0].clsid=Ee.CLSID),F(we)}function F(we){var De="Sh33tJ5";if(!Ur.find(we,"/"+De)){var Ee=Je(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,we.FileIndex.push({name:De,type:2,content:Ee,size:4,L:69,R:69,C:69}),we.FullPaths.push(we.FullPaths[0]+De),A(we)}}function A(we,De){T(we);for(var Ee=!1,Ae=!1,Ce=we.FullPaths.length-1;Ce>=0;--Ce){var ke=we.FileIndex[Ce];switch(ke.type){case 0:Ae?Ee=!0:(we.FileIndex.pop(),we.FullPaths.pop());break;case 1:case 2:case 5:Ae=!0,isNaN(ke.R*ke.L*ke.C)&&(Ee=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!De)){var Ve=new Date(1987,1,19),Ze=0,qe=Object.create?Object.create(null):{},Ge=[];for(Ce=0;Ce<we.FullPaths.length;++Ce)qe[we.FullPaths[Ce]]=!0,we.FileIndex[Ce].type!==0&&Ge.push([we.FullPaths[Ce],we.FileIndex[Ce]]);for(Ce=0;Ce<Ge.length;++Ce){var Ke=n(Ge[Ce][0]);Ae=qe[Ke],Ae||(Ge.push([Ke,{name:a(Ke).replace("/",""),type:1,clsid:P,ct:Ve,mt:Ve,content:null}]),qe[Ke]=!0)}for(Ge.sort(function(St,pt){return t(St[0],pt[0])}),we.FullPaths=[],we.FileIndex=[],Ce=0;Ce<Ge.length;++Ce)we.FullPaths[Ce]=Ge[Ce][0],we.FileIndex[Ce]=Ge[Ce][1];for(Ce=0;Ce<Ge.length;++Ce){var dt=we.FileIndex[Ce],yt=we.FullPaths[Ce];if(dt.name=a(yt).replace("/",""),dt.L=dt.R=dt.C=-(dt.color=1),dt.size=dt.content?dt.content.length:0,dt.start=0,dt.clsid=dt.clsid||P,Ce===0)dt.C=Ge.length>1?1:-1,dt.size=0,dt.type=5;else if(yt.slice(-1)=="/"){for(Ze=Ce+1;Ze<Ge.length&&n(we.FullPaths[Ze])!=yt;++Ze);for(dt.C=Ze>=Ge.length?-1:Ze,Ze=Ce+1;Ze<Ge.length&&n(we.FullPaths[Ze])!=n(yt);++Ze);dt.R=Ze>=Ge.length?-1:Ze,dt.type=1}else n(we.FullPaths[Ce+1]||"")==n(yt)&&(dt.R=Ce+1),dt.type=2}}}function R(we,De){var Ee=De||{};if(Ee.fileType=="mad")return Te(we,Ee);switch(A(we),Ee.fileType){case"zip":return Qt(we,Ee)}var Ae=function(St){for(var pt=0,ut=0,Mt=0;Mt<St.FileIndex.length;++Mt){var Er=St.FileIndex[Mt];if(Er.content){var vr=Er.content.length;vr>0&&(vr<4096?pt+=vr+63>>6:ut+=vr+511>>9)}}for(var yr=St.FullPaths.length+3>>2,ka=pt+7>>3,oo=pt+127>>7,aa=ka+ut+yr+oo,Ma=aa+127>>7,ul=Ma<=109?0:Math.ceil((Ma-109)/127);aa+Ma+ul+127>>7>Ma;)ul=++Ma<=109?0:Math.ceil((Ma-109)/127);var Fa=[1,ul,Ma,oo,yr,ut,pt,0];return St.FileIndex[0].size=pt<<6,Fa[7]=(St.FileIndex[0].start=Fa[0]+Fa[1]+Fa[2]+Fa[3]+Fa[4]+Fa[5])+(Fa[6]+7>>3),Fa}(we),Ce=Je(Ae[7]<<9),ke=0,Ve=0;{for(ke=0;ke<8;++ke)Ce.write_shift(1,H[ke]);for(ke=0;ke<8;++ke)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),ke=0;ke<3;++ke)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,Ae[2]),Ce.write_shift(4,Ae[0]+Ae[1]+Ae[2]+Ae[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,Ae[3]?Ae[0]+Ae[1]+Ae[2]-1:U),Ce.write_shift(4,Ae[3]),Ce.write_shift(-4,Ae[1]?Ae[0]-1:U),Ce.write_shift(4,Ae[1]),ke=0;ke<109;++ke)Ce.write_shift(-4,ke<Ae[2]?Ae[1]+ke:-1)}if(Ae[1])for(Ve=0;Ve<Ae[1];++Ve){for(;ke<236+Ve*127;++ke)Ce.write_shift(-4,ke<Ae[2]?Ae[1]+ke:-1);Ce.write_shift(-4,Ve===Ae[1]-1?U:Ve+1)}var Ze=function(St){for(Ve+=St;ke<Ve-1;++ke)Ce.write_shift(-4,ke+1);St&&(++ke,Ce.write_shift(-4,U))};for(Ve=ke=0,Ve+=Ae[1];ke<Ve;++ke)Ce.write_shift(-4,G.DIFSECT);for(Ve+=Ae[2];ke<Ve;++ke)Ce.write_shift(-4,G.FATSECT);Ze(Ae[3]),Ze(Ae[4]);for(var qe=0,Ge=0,Ke=we.FileIndex[0];qe<we.FileIndex.length;++qe)Ke=we.FileIndex[qe],Ke.content&&(Ge=Ke.content.length,!(Ge<4096)&&(Ke.start=Ve,Ze(Ge+511>>9)));for(Ze(Ae[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,G.ENDOFCHAIN);for(Ve=ke=0,qe=0;qe<we.FileIndex.length;++qe)Ke=we.FileIndex[qe],Ke.content&&(Ge=Ke.content.length,!(!Ge||Ge>=4096)&&(Ke.start=Ve,Ze(Ge+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,G.ENDOFCHAIN);for(ke=0;ke<Ae[4]<<2;++ke){var dt=we.FullPaths[ke];if(!dt||dt.length===0){for(qe=0;qe<17;++qe)Ce.write_shift(4,0);for(qe=0;qe<3;++qe)Ce.write_shift(4,-1);for(qe=0;qe<12;++qe)Ce.write_shift(4,0);continue}Ke=we.FileIndex[ke],ke===0&&(Ke.start=Ke.size?Ke.start-1:U);var yt=ke===0&&Ee.root||Ke.name;if(Ge=2*(yt.length+1),Ce.write_shift(64,yt,"utf16le"),Ce.write_shift(2,Ge),Ce.write_shift(1,Ke.type),Ce.write_shift(1,Ke.color),Ce.write_shift(-4,Ke.L),Ce.write_shift(-4,Ke.R),Ce.write_shift(-4,Ke.C),Ke.clsid)Ce.write_shift(16,Ke.clsid,"hex");else for(qe=0;qe<4;++qe)Ce.write_shift(4,0);Ce.write_shift(4,Ke.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,Ke.start),Ce.write_shift(4,Ke.size),Ce.write_shift(4,0)}for(ke=1;ke<we.FileIndex.length;++ke)if(Ke=we.FileIndex[ke],Ke.size>=4096)if(Ce.l=Ke.start+1<<9,Sr&&Buffer.isBuffer(Ke.content))Ke.content.copy(Ce,Ce.l,0,Ke.size),Ce.l+=Ke.size+511&-512;else{for(qe=0;qe<Ke.size;++qe)Ce.write_shift(1,Ke.content[qe]);for(;qe&511;++qe)Ce.write_shift(1,0)}for(ke=1;ke<we.FileIndex.length;++ke)if(Ke=we.FileIndex[ke],Ke.size>0&&Ke.size<4096)if(Sr&&Buffer.isBuffer(Ke.content))Ke.content.copy(Ce,Ce.l,0,Ke.size),Ce.l+=Ke.size+63&-64;else{for(qe=0;qe<Ke.size;++qe)Ce.write_shift(1,Ke.content[qe]);for(;qe&63;++qe)Ce.write_shift(1,0)}if(Sr)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function I(we,De){var Ee=we.FullPaths.map(function(qe){return qe.toUpperCase()}),Ae=Ee.map(function(qe){var Ge=qe.split("/");return Ge[Ge.length-(qe.slice(-1)=="/"?2:1)]}),Ce=!1;De.charCodeAt(0)===47?(Ce=!0,De=Ee[0].slice(0,-1)+De):Ce=De.indexOf("/")!==-1;var ke=De.toUpperCase(),Ve=Ce===!0?Ee.indexOf(ke):Ae.indexOf(ke);if(Ve!==-1)return we.FileIndex[Ve];var Ze=!ke.match(w0);for(ke=ke.replace(lf,""),Ze&&(ke=ke.replace(w0,"!")),Ve=0;Ve<Ee.length;++Ve)if((Ze?Ee[Ve].replace(w0,"!"):Ee[Ve]).replace(lf,"")==ke||(Ze?Ae[Ve].replace(w0,"!"):Ae[Ve]).replace(lf,"")==ke)return we.FileIndex[Ve];return null}var O=64,U=-2,D="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],P="00000000000000000000000000000000",G={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:D,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:P,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ue(we,De,Ee){c();var Ae=R(we,Ee);u.writeFileSync(De,Ae)}function le(we){for(var De=new Array(we.length),Ee=0;Ee<we.length;++Ee)De[Ee]=String.fromCharCode(we[Ee]);return De.join("")}function pe(we,De){var Ee=R(we,De);switch(De&&De.type||"buffer"){case"file":return c(),u.writeFileSync(De.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:le(Ee);case"base64":return vf(typeof Ee=="string"?Ee:le(Ee));case"buffer":if(Sr)return Buffer.isBuffer(Ee)?Ee:to(Ee);case"array":return typeof Ee=="string"?Ua(Ee):Ee}return Ee}var de;function L(we){try{var De=we.InflateRaw,Ee=new De;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)de=we;else throw new Error("zlib does not expose bytesRead")}catch(Ae){console.error("cannot use native zlib: "+(Ae.message||Ae))}}function X(we,De){if(!de)return Fe(we,De);var Ee=de.InflateRaw,Ae=new Ee,Ce=Ae._processChunk(we.slice(we.l),Ae._finishFlushFlag);return we.l+=Ae.bytesRead,Ce}function V(we){return de?de.deflateRawSync(we):Re(we)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],W=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function z(we){var De=(we<<1|we<<11)&139536|(we<<5|we<<15)&558144;return(De>>16|De>>8|De)&255}for(var re=typeof Uint8Array<"u",ne=re?new Uint8Array(256):[],ie=0;ie<256;++ie)ne[ie]=z(ie);function oe(we,De){var Ee=ne[we&255];return De<=8?Ee>>>8-De:(Ee=Ee<<8|ne[we>>8&255],De<=16?Ee>>>16-De:(Ee=Ee<<8|ne[we>>16&255],Ee>>>24-De))}function ye(we,De){var Ee=De&7,Ae=De>>>3;return(we[Ae]|(Ee<=6?0:we[Ae+1]<<8))>>>Ee&3}function M(we,De){var Ee=De&7,Ae=De>>>3;return(we[Ae]|(Ee<=5?0:we[Ae+1]<<8))>>>Ee&7}function ge(we,De){var Ee=De&7,Ae=De>>>3;return(we[Ae]|(Ee<=4?0:we[Ae+1]<<8))>>>Ee&15}function ee(we,De){var Ee=De&7,Ae=De>>>3;return(we[Ae]|(Ee<=3?0:we[Ae+1]<<8))>>>Ee&31}function k(we,De){var Ee=De&7,Ae=De>>>3;return(we[Ae]|(Ee<=1?0:we[Ae+1]<<8))>>>Ee&127}function B(we,De,Ee){var Ae=De&7,Ce=De>>>3,ke=(1<<Ee)-1,Ve=we[Ce]>>>Ae;return Ee<8-Ae||(Ve|=we[Ce+1]<<8-Ae,Ee<16-Ae)||(Ve|=we[Ce+2]<<16-Ae,Ee<24-Ae)||(Ve|=we[Ce+3]<<24-Ae),Ve&ke}function Q(we,De,Ee){var Ae=De&7,Ce=De>>>3;return Ae<=5?we[Ce]|=(Ee&7)<<Ae:(we[Ce]|=Ee<<Ae&255,we[Ce+1]=(Ee&7)>>8-Ae),De+3}function Z(we,De,Ee){var Ae=De&7,Ce=De>>>3;return Ee=(Ee&1)<<Ae,we[Ce]|=Ee,De+1}function J(we,De,Ee){var Ae=De&7,Ce=De>>>3;return Ee<<=Ae,we[Ce]|=Ee&255,Ee>>>=8,we[Ce+1]=Ee,De+8}function K(we,De,Ee){var Ae=De&7,Ce=De>>>3;return Ee<<=Ae,we[Ce]|=Ee&255,Ee>>>=8,we[Ce+1]=Ee&255,we[Ce+2]=Ee>>>8,De+16}function te(we,De){var Ee=we.length,Ae=2*Ee>De?2*Ee:De+5,Ce=0;if(Ee>=De)return we;if(Sr){var ke=h3(Ae);if(we.copy)we.copy(ke);else for(;Ce<we.length;++Ce)ke[Ce]=we[Ce];return ke}else if(re){var Ve=new Uint8Array(Ae);if(Ve.set)Ve.set(we);else for(;Ce<Ee;++Ce)Ve[Ce]=we[Ce];return Ve}return we.length=Ae,we}function me(we){for(var De=new Array(we),Ee=0;Ee<we;++Ee)De[Ee]=0;return De}function fe(we,De,Ee){var Ae=1,Ce=0,ke=0,Ve=0,Ze=0,qe=we.length,Ge=re?new Uint16Array(32):me(32);for(ke=0;ke<32;++ke)Ge[ke]=0;for(ke=qe;ke<Ee;++ke)we[ke]=0;qe=we.length;var Ke=re?new Uint16Array(qe):me(qe);for(ke=0;ke<qe;++ke)Ge[Ce=we[ke]]++,Ae<Ce&&(Ae=Ce),Ke[ke]=0;for(Ge[0]=0,ke=1;ke<=Ae;++ke)Ge[ke+16]=Ze=Ze+Ge[ke-1]<<1;for(ke=0;ke<qe;++ke)Ze=we[ke],Ze!=0&&(Ke[ke]=Ge[Ze+16]++);var dt=0;for(ke=0;ke<qe;++ke)if(dt=we[ke],dt!=0)for(Ze=oe(Ke[ke],Ae)>>Ae-dt,Ve=(1<<Ae+4-dt)-1;Ve>=0;--Ve)De[Ze|Ve<<dt]=dt&15|ke<<4;return Ae}var xe=re?new Uint16Array(512):me(512),_e=re?new Uint16Array(32):me(32);if(!re){for(var je=0;je<512;++je)xe[je]=0;for(je=0;je<32;++je)_e[je]=0}(function(){for(var we=[],De=0;De<32;De++)we.push(5);fe(we,_e,32);var Ee=[];for(De=0;De<=143;De++)Ee.push(8);for(;De<=255;De++)Ee.push(9);for(;De<=279;De++)Ee.push(7);for(;De<=287;De++)Ee.push(8);fe(Ee,xe,288)})();var Be=function(){for(var De=re?new Uint8Array(32768):[],Ee=0,Ae=0;Ee<W.length-1;++Ee)for(;Ae<W[Ee+1];++Ae)De[Ae]=Ee;for(;Ae<32768;++Ae)De[Ae]=29;var Ce=re?new Uint8Array(259):[];for(Ee=0,Ae=0;Ee<ae.length-1;++Ee)for(;Ae<ae[Ee+1];++Ae)Ce[Ae]=Ee;function ke(Ze,qe){for(var Ge=0;Ge<Ze.length;){var Ke=Math.min(65535,Ze.length-Ge),dt=Ge+Ke==Ze.length;for(qe.write_shift(1,+dt),qe.write_shift(2,Ke),qe.write_shift(2,~Ke&65535);Ke-- >0;)qe[qe.l++]=Ze[Ge++]}return qe.l}function Ve(Ze,qe){for(var Ge=0,Ke=0,dt=re?new Uint16Array(32768):[];Ke<Ze.length;){var yt=Math.min(65535,Ze.length-Ke);if(yt<10){for(Ge=Q(qe,Ge,+(Ke+yt==Ze.length)),Ge&7&&(Ge+=8-(Ge&7)),qe.l=Ge/8|0,qe.write_shift(2,yt),qe.write_shift(2,~yt&65535);yt-- >0;)qe[qe.l++]=Ze[Ke++];Ge=qe.l*8;continue}Ge=Q(qe,Ge,+(Ke+yt==Ze.length)+2);for(var St=0;yt-- >0;){var pt=Ze[Ke];St=(St<<5^pt)&32767;var ut=-1,Mt=0;if((ut=dt[St])&&(ut|=Ke&-32768,ut>Ke&&(ut-=32768),ut<Ke))for(;Ze[ut+Mt]==Ze[Ke+Mt]&&Mt<250;)++Mt;if(Mt>2){pt=Ce[Mt],pt<=22?Ge=J(qe,Ge,ne[pt+1]>>1)-1:(J(qe,Ge,3),Ge+=5,J(qe,Ge,ne[pt-23]>>5),Ge+=3);var Er=pt<8?0:pt-4>>2;Er>0&&(K(qe,Ge,Mt-ae[pt]),Ge+=Er),pt=De[Ke-ut],Ge=J(qe,Ge,ne[pt]>>3),Ge-=3;var vr=pt<4?0:pt-2>>1;vr>0&&(K(qe,Ge,Ke-ut-W[pt]),Ge+=vr);for(var yr=0;yr<Mt;++yr)dt[St]=Ke&32767,St=(St<<5^Ze[Ke])&32767,++Ke;yt-=Mt-1}else pt<=143?pt=pt+48:Ge=Z(qe,Ge,1),Ge=J(qe,Ge,ne[pt]),dt[St]=Ke&32767,++Ke}Ge=J(qe,Ge,0)-1}return qe.l=(Ge+7)/8|0,qe.l}return function(qe,Ge){return qe.length<8?ke(qe,Ge):Ve(qe,Ge)}}();function Re(we){var De=Je(50+Math.floor(we.length*1.1)),Ee=Be(we,De);return De.slice(0,Ee)}var ze=re?new Uint16Array(32768):me(32768),Ye=re?new Uint16Array(32768):me(32768),Le=re?new Uint16Array(128):me(128),it=1,ht=1;function ce(we,De){var Ee=ee(we,De)+257;De+=5;var Ae=ee(we,De)+1;De+=5;var Ce=ge(we,De)+4;De+=4;for(var ke=0,Ve=re?new Uint8Array(19):me(19),Ze=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qe=1,Ge=re?new Uint8Array(8):me(8),Ke=re?new Uint8Array(8):me(8),dt=Ve.length,yt=0;yt<Ce;++yt)Ve[se[yt]]=ke=M(we,De),qe<ke&&(qe=ke),Ge[ke]++,De+=3;var St=0;for(Ge[0]=0,yt=1;yt<=qe;++yt)Ke[yt]=St=St+Ge[yt-1]<<1;for(yt=0;yt<dt;++yt)(St=Ve[yt])!=0&&(Ze[yt]=Ke[St]++);var pt=0;for(yt=0;yt<dt;++yt)if(pt=Ve[yt],pt!=0){St=ne[Ze[yt]]>>8-pt;for(var ut=(1<<7-pt)-1;ut>=0;--ut)Le[St|ut<<pt]=pt&7|yt<<3}var Mt=[];for(qe=1;Mt.length<Ee+Ae;)switch(St=Le[k(we,De)],De+=St&7,St>>>=3){case 16:for(ke=3+ye(we,De),De+=2,St=Mt[Mt.length-1];ke-- >0;)Mt.push(St);break;case 17:for(ke=3+M(we,De),De+=3;ke-- >0;)Mt.push(0);break;case 18:for(ke=11+k(we,De),De+=7;ke-- >0;)Mt.push(0);break;default:Mt.push(St),qe<St&&(qe=St);break}var Er=Mt.slice(0,Ee),vr=Mt.slice(Ee);for(yt=Ee;yt<286;++yt)Er[yt]=0;for(yt=Ae;yt<30;++yt)vr[yt]=0;return it=fe(Er,ze,286),ht=fe(vr,Ye,30),De}function be(we,De){if(we[0]==3&&!(we[1]&3))return[Pl(De),2];for(var Ee=0,Ae=0,Ce=h3(De||1<<18),ke=0,Ve=Ce.length>>>0,Ze=0,qe=0;(Ae&1)==0;){if(Ae=M(we,Ee),Ee+=3,Ae>>>1)Ae>>1==1?(Ze=9,qe=5):(Ee=ce(we,Ee),Ze=it,qe=ht);else{Ee&7&&(Ee+=8-(Ee&7));var Ge=we[Ee>>>3]|we[(Ee>>>3)+1]<<8;if(Ee+=32,Ge>0)for(!De&&Ve<ke+Ge&&(Ce=te(Ce,ke+Ge),Ve=Ce.length);Ge-- >0;)Ce[ke++]=we[Ee>>>3],Ee+=8;continue}for(;;){!De&&Ve<ke+32767&&(Ce=te(Ce,ke+32767),Ve=Ce.length);var Ke=B(we,Ee,Ze),dt=Ae>>>1==1?xe[Ke]:ze[Ke];if(Ee+=dt&15,dt>>>=4,(dt>>>8&255)===0)Ce[ke++]=dt;else{if(dt==256)break;dt-=257;var yt=dt<8?0:dt-4>>2;yt>5&&(yt=0);var St=ke+ae[dt];yt>0&&(St+=B(we,Ee,yt),Ee+=yt),Ke=B(we,Ee,qe),dt=Ae>>>1==1?_e[Ke]:Ye[Ke],Ee+=dt&15,dt>>>=4;var pt=dt<4?0:dt-2>>1,ut=W[dt];for(pt>0&&(ut+=B(we,Ee,pt),Ee+=pt),!De&&Ve<St&&(Ce=te(Ce,St+100),Ve=Ce.length);ke<St;)Ce[ke]=Ce[ke-ut],++ke}}}return De?[Ce,Ee+7>>>3]:[Ce.slice(0,ke),Ee+7>>>3]}function Fe(we,De){var Ee=we.slice(we.l||0),Ae=be(Ee,De);return we.l+=Ae[1],Ae[0]}function $e(we,De){if(we)typeof console<"u"&&console.error(De);else throw new Error(De)}function vt(we,De){var Ee=we;Zi(Ee,0);var Ae=[],Ce=[],ke={FileIndex:Ae,FullPaths:Ce};T(ke,{root:De.root});for(var Ve=Ee.length-4;(Ee[Ve]!=80||Ee[Ve+1]!=75||Ee[Ve+2]!=5||Ee[Ve+3]!=6)&&Ve>=0;)--Ve;Ee.l=Ve+4,Ee.l+=4;var Ze=Ee.read_shift(2);Ee.l+=6;var qe=Ee.read_shift(4);for(Ee.l=qe,Ve=0;Ve<Ze;++Ve){Ee.l+=20;var Ge=Ee.read_shift(4),Ke=Ee.read_shift(4),dt=Ee.read_shift(2),yt=Ee.read_shift(2),St=Ee.read_shift(2);Ee.l+=8;var pt=Ee.read_shift(4),ut=l(Ee.slice(Ee.l+dt,Ee.l+dt+yt));Ee.l+=dt+yt+St;var Mt=Ee.l;Ee.l=pt+4,Nt(Ee,Ge,Ke,ke,ut),Ee.l=Mt}return ke}function Nt(we,De,Ee,Ae,Ce){we.l+=2;var ke=we.read_shift(2),Ve=we.read_shift(2),Ze=o(we);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var qe=we.read_shift(4),Ge=we.read_shift(4),Ke=we.read_shift(4),dt=we.read_shift(2),yt=we.read_shift(2),St="",pt=0;pt<dt;++pt)St+=String.fromCharCode(we[we.l++]);if(yt){var ut=l(we.slice(we.l,we.l+yt));(ut[21589]||{}).mt&&(Ze=ut[21589].mt),((Ce||{})[21589]||{}).mt&&(Ze=Ce[21589].mt)}we.l+=yt;var Mt=we.slice(we.l,we.l+Ge);switch(Ve){case 8:Mt=X(we,Ke);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ve)}var Er=!1;ke&8&&(qe=we.read_shift(4),qe==134695760&&(qe=we.read_shift(4),Er=!0),Ge=we.read_shift(4),Ke=we.read_shift(4)),Ge!=De&&$e(Er,"Bad compressed size: "+De+" != "+Ge),Ke!=Ee&&$e(Er,"Bad uncompressed size: "+Ee+" != "+Ke),At(Ae,St,Mt,{unsafe:!0,mt:Ze})}function Qt(we,De){var Ee=De||{},Ae=[],Ce=[],ke=Je(1),Ve=Ee.compression?8:0,Ze=0,qe=0,Ge=0,Ke=0,dt=0,yt=we.FullPaths[0],St=yt,pt=we.FileIndex[0],ut=[],Mt=0;for(qe=1;qe<we.FullPaths.length;++qe)if(St=we.FullPaths[qe].slice(yt.length),pt=we.FileIndex[qe],!(!pt.size||!pt.content||St=="Sh33tJ5")){var Er=Ke,vr=Je(St.length);for(Ge=0;Ge<St.length;++Ge)vr.write_shift(1,St.charCodeAt(Ge)&127);vr=vr.slice(0,vr.l),ut[dt]=mI.buf(pt.content,0);var yr=pt.content;Ve==8&&(yr=V(yr)),ke=Je(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,Ze),ke.write_shift(2,Ve),pt.mt?s(ke,pt.mt):ke.write_shift(4,0),ke.write_shift(-4,ut[dt]),ke.write_shift(4,yr.length),ke.write_shift(4,pt.content.length),ke.write_shift(2,vr.length),ke.write_shift(2,0),Ke+=ke.length,Ae.push(ke),Ke+=vr.length,Ae.push(vr),Ke+=yr.length,Ae.push(yr),ke=Je(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,Ze),ke.write_shift(2,Ve),ke.write_shift(4,0),ke.write_shift(-4,ut[dt]),ke.write_shift(4,yr.length),ke.write_shift(4,pt.content.length),ke.write_shift(2,vr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Er),Mt+=ke.l,Ce.push(ke),Mt+=vr.length,Ce.push(vr),++dt}return ke=Je(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,dt),ke.write_shift(2,dt),ke.write_shift(4,Mt),ke.write_shift(4,Ke),ke.write_shift(2,0),ei([ei(Ae),ei(Ce),ke])}var Vr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function io(we,De){if(we.ctype)return we.ctype;var Ee=we.name||"",Ae=Ee.match(/\.([^\.]+)$/);return Ae&&Vr[Ae[1]]||De&&(Ae=(Ee=De).match(/[\.\\]([^\.\\])+$/),Ae&&Vr[Ae[1]])?Vr[Ae[1]]:"application/octet-stream"}function ao(we){for(var De=vf(we),Ee=[],Ae=0;Ae<De.length;Ae+=76)Ee.push(De.slice(Ae,Ae+76));return Ee.join(`\r
`)+`\r
`}function Da(we){var De=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ge){var Ke=Ge.charCodeAt(0).toString(16).toUpperCase();return"="+(Ke.length==1?"0"+Ke:Ke)});De=De.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),De.charAt(0)==`
`&&(De="=0D"+De.slice(1)),De=De.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],Ae=De.split(`\r
`),Ce=0;Ce<Ae.length;++Ce){var ke=Ae[Ce];if(ke.length==0){Ee.push("");continue}for(var Ve=0;Ve<ke.length;){var Ze=76,qe=ke.slice(Ve,Ve+Ze);qe.charAt(Ze-1)=="="?Ze--:qe.charAt(Ze-2)=="="?Ze-=2:qe.charAt(Ze-3)=="="&&(Ze-=3),qe=ke.slice(Ve,Ve+Ze),Ve+=Ze,Ve<ke.length&&(qe+="="),Ee.push(qe)}}return Ee.join(`\r
`)}function Ns(we){for(var De=[],Ee=0;Ee<we.length;++Ee){for(var Ae=we[Ee];Ee<=we.length&&Ae.charAt(Ae.length-1)=="=";)Ae=Ae.slice(0,Ae.length-1)+we[++Ee];De.push(Ae)}for(var Ce=0;Ce<De.length;++Ce)De[Ce]=De[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Ua(De.join(`\r
`))}function so(we,De,Ee){for(var Ae="",Ce="",ke="",Ve,Ze=0;Ze<10;++Ze){var qe=De[Ze];if(!qe||qe.match(/^\s*$/))break;var Ge=qe.match(/^(.*?):\s*([^\s].*)$/);if(Ge)switch(Ge[1].toLowerCase()){case"content-location":Ae=Ge[2].trim();break;case"content-type":ke=Ge[2].trim();break;case"content-transfer-encoding":Ce=Ge[2].trim();break}}switch(++Ze,Ce.toLowerCase()){case"base64":Ve=Ua(Xs(De.slice(Ze).join("")));break;case"quoted-printable":Ve=Ns(De.slice(Ze));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var Ke=At(we,Ae.slice(Ee.length),Ve,{unsafe:!0});ke&&(Ke.ctype=ke)}function cl(we,De){if(le(we.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=De&&De.root||"",Ae=(Sr&&Buffer.isBuffer(we)?we.toString("binary"):le(we)).split(`\r
`),Ce=0,ke="";for(Ce=0;Ce<Ae.length;++Ce)if(ke=Ae[Ce],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),Ee||(Ee=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),ke.slice(0,Ee.length)!=Ee););var Ve=(Ae[1]||"").match(/boundary="(.*?)"/);if(!Ve)throw new Error("MAD cannot find boundary");var Ze="--"+(Ve[1]||""),qe=[],Ge=[],Ke={FileIndex:qe,FullPaths:Ge};T(Ke);var dt,yt=0;for(Ce=0;Ce<Ae.length;++Ce){var St=Ae[Ce];St!==Ze&&St!==Ze+"--"||(yt++&&so(Ke,Ae.slice(dt,Ce),Ee),dt=Ce)}return Ke}function Te(we,De){var Ee=De||{},Ae=Ee.boundary||"SheetJS";Ae="------="+Ae;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ae.slice(2)+'"',"","",""],ke=we.FullPaths[0],Ve=ke,Ze=we.FileIndex[0],qe=1;qe<we.FullPaths.length;++qe)if(Ve=we.FullPaths[qe].slice(ke.length),Ze=we.FileIndex[qe],!(!Ze.size||!Ze.content||Ve=="Sh33tJ5")){Ve=Ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Mt){return"_x"+Mt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Mt){return"_u"+Mt.charCodeAt(0).toString(16)+"_"});for(var Ge=Ze.content,Ke=Sr&&Buffer.isBuffer(Ge)?Ge.toString("binary"):le(Ge),dt=0,yt=Math.min(1024,Ke.length),St=0,pt=0;pt<=yt;++pt)(St=Ke.charCodeAt(pt))>=32&&St<128&&++dt;var ut=dt>=yt*4/5;Ce.push(Ae),Ce.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ve),Ce.push("Content-Transfer-Encoding: "+(ut?"quoted-printable":"base64")),Ce.push("Content-Type: "+io(Ze,Ve)),Ce.push(""),Ce.push(ut?Da(Ke):ao(Ke))}return Ce.push(Ae+`--\r
`),Ce.join(`\r
`)}function Qe(we){var De={};return T(De,we),De}function At(we,De,Ee,Ae){var Ce=Ae&&Ae.unsafe;Ce||T(we);var ke=!Ce&&Ur.find(we,De);if(!ke){var Ve=we.FullPaths[0];De.slice(0,Ve.length)==Ve?Ve=De:(Ve.slice(-1)!="/"&&(Ve+="/"),Ve=(Ve+De).replace("//","/")),ke={name:a(De),type:2},we.FileIndex.push(ke),we.FullPaths.push(Ve),Ce||Ur.utils.cfb_gc(we)}return ke.content=Ee,ke.size=Ee?Ee.length:0,Ae&&(Ae.CLSID&&(ke.clsid=Ae.CLSID),Ae.mt&&(ke.mt=Ae.mt),Ae.ct&&(ke.ct=Ae.ct)),ke}function fr(we,De){T(we);var Ee=Ur.find(we,De);if(Ee){for(var Ae=0;Ae<we.FileIndex.length;++Ae)if(we.FileIndex[Ae]==Ee)return we.FileIndex.splice(Ae,1),we.FullPaths.splice(Ae,1),!0}return!1}function rn(we,De,Ee){T(we);var Ae=Ur.find(we,De);if(Ae){for(var Ce=0;Ce<we.FileIndex.length;++Ce)if(we.FileIndex[Ce]==Ae)return we.FileIndex[Ce].name=a(Ee),we.FullPaths[Ce]=Ee,!0}return!1}function Xu(we){A(we,!0)}return e.find=I,e.read=E,e.parse=d,e.write=pe,e.writeFile=ue,e.utils={cfb_new:Qe,cfb_add:At,cfb_del:fr,cfb_mov:rn,cfb_gc:Xu,ReadShift:uf,CheckField:uC,prep_blob:Zi,bconcat:ei,use_zlib:L,_deflateRaw:Re,_inflateRaw:Fe,consts:G},e}();function pI(r){return typeof r=="string"?dp(r):Array.isArray(r)?qL(r):r}function Lf(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=dp(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?bf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var a=new Blob([pI(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,r);if(typeof saveAs<"u")return saveAs(a,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:r,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=r,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(r);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Rf(e)),l.write(e),l.close(),e}catch(u){if(!u.message||!u.message.match(/onstruct/))throw u}throw new Error("cannot save file "+r)}function si(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function w3(r,e){for(var t=[],n=si(r),a=0;a!==n.length;++a)t[r[n[a]][e]]==null&&(t[r[n[a]][e]]=n[a]);return t}function lb(r){for(var e=[],t=si(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function mp(r){for(var e=[],t=si(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function gI(r){for(var e=[],t=si(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var vm=new Date(1899,11,30,0,0,0);function Pi(r,e){var t=r.getTime(),n=vm.getTime()+(r.getTimezoneOffset()-vm.getTimezoneOffset())*6e4;return(t-n)/(1440*60*1e3)}var QT=new Date,xI=vm.getTime()+(QT.getTimezoneOffset()-vm.getTimezoneOffset())*6e4,_3=QT.getTimezoneOffset();function WT(r){var e=new Date;return e.setTime(r*24*60*60*1e3+xI),e.getTimezoneOffset()!==_3&&e.setTime(e.getTime()+(e.getTimezoneOffset()-_3)*6e4),e}var N3=new Date("2017-02-19T19:06:09.000Z"),KT=isNaN(N3.getFullYear())?new Date("2/19/17"):N3,vI=KT.getFullYear()==2017;function _i(r,e){var t=new Date(r);if(vI)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(KT.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var a=r.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return r.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function pp(r,e){if(Sr&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var n=[],a=0;a!=r.length;++a)n.push(String.fromCharCode(r[a]));return n.join("")}function qi(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=qi(r[t]));return e}function cn(r,e){for(var t="";t.length<e;)t+=r;return t}function Gs(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return t=-t,s}),!isNaN(e=Number(n)))?e/t:e}var yI=["january","february","march","april","may","june","july","august","september","october","november","december"];function yf(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var o=r.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&yI.indexOf(o)==-1)return t}else if(o.match(/[a-z]/))return t;return n<0||n>8099?t:(a>0||s>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function rr(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return Sr?n=to(t):n=$L(t),Ur.utils.cfb_add(r,e,n)}Ur.utils.cfb_add(r,e,t)}else r.file(e,t)}function cb(){return Ur.utils.cfb_new()}var jn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,bI={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ub=lb(bI),db=/[&<>'"]/g,wI=/[\u0000-\u0008\u000b-\u001f]/g;function Br(r){var e=r+"";return e.replace(db,function(t){return ub[t]}).replace(wI,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function S3(r){return Br(r).replace(/ /g,"_x0020_")}var XT=/[\u0000-\u001f]/g;function _I(r){var e=r+"";return e.replace(db,function(t){return ub[t]}).replace(/\n/g,"<br/>").replace(XT,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function NI(r){var e=r+"";return e.replace(db,function(t){return ub[t]}).replace(XT,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function SI(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function jI(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function I1(r){for(var e="",t=0,n=0,a=0,s=0,o=0,l=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(a=r.charCodeAt(t++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=r.charCodeAt(t++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function j3(r){var e=Pl(2*r.length),t,n,a=1,s=0,o=0,l;for(n=0;n<r.length;n+=a)a=1,(l=r.charCodeAt(n))<128?t=l:l<224?(t=(l&31)*64+(r.charCodeAt(n+1)&63),a=2):l<240?(t=(l&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),a=3):(a=4,t=(l&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function E3(r){return to(r,"binary").toString("utf8")}var N0="foo bar baz",cf=Sr&&(E3(N0)==I1(N0)&&E3||j3(N0)==I1(N0)&&j3)||I1,bf=Sr?function(r){return to(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,a=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},EI=function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<r.length;++a)n=n.replace(r[a][0],r[a][1]);return n}}(),YT=/(^\s|\s$|\n)/;function ti(r,e){return"<"+r+(e.match(YT)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function wf(r){return si(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function bt(r,e,t){return"<"+r+(t!=null?wf(t):"")+(e!=null?(e.match(YT)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function xy(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function AI(r,e){switch(typeof r){case"string":var t=bt("vt:lpwstr",Br(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return bt((r|0)==r?"vt:i4":"vt:r8",Br(String(r)));case"boolean":return bt("vt:bool",r?"true":"false")}if(r instanceof Date)return bt("vt:filetime",xy(r));throw new Error("Unable to serialize "+r)}var qn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ou=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ea={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function TI(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),a=r[e+6]&15,s=5;s>=0;--s)a=a*256+r[e+s];return n==2047?a==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),t*Math.pow(2,n-52)*a)}function CI(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)r[t+l]=s&255;r[t+6]=(a&15)<<4|s&15,r[t+7]=a>>4|n}var A3=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var a=0,s=r[0][n].length;a<s;a+=t)e.push.apply(e,r[0][n].slice(a,a+t));return e},T3=Sr?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:to(e)})):A3(r)}:A3,C3=function(r,e,t){for(var n=[],a=e;a<t;a+=2)n.push(String.fromCharCode(nf(r,a)));return n.join("").replace(lf,"")},fb=Sr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(lf,""):C3(r,e,t)}:C3,D3=function(r,e,t){for(var n=[],a=e;a<e+t;++a)n.push(("0"+r[a].toString(16)).slice(-2));return n.join("")},ZT=Sr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):D3(r,e,t)}:D3,k3=function(r,e,t){for(var n=[],a=e;a<t;a++)n.push(String.fromCharCode(ru(r,a)));return n.join("")},If=Sr?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):k3(e,t,n)}:k3,JT=function(r,e){var t=ta(r,e);return t>0?If(r,e+4,e+4+t-1):""},eC=JT,tC=function(r,e){var t=ta(r,e);return t>0?If(r,e+4,e+4+t-1):""},rC=tC,nC=function(r,e){var t=2*ta(r,e);return t>0?If(r,e+4,e+4+t-1):""},iC=nC,aC=function(e,t){var n=ta(e,t);return n>0?fb(e,t+4,t+4+n):""},sC=aC,oC=function(r,e){var t=ta(r,e);return t>0?If(r,e+4,e+4+t):""},lC=oC,cC=function(r,e){return TI(r,e)},ym=cC,hb=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Sr&&(eC=function(e,t){if(!Buffer.isBuffer(e))return JT(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},rC=function(e,t){if(!Buffer.isBuffer(e))return tC(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},iC=function(e,t){if(!Buffer.isBuffer(e))return nC(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},sC=function(e,t){if(!Buffer.isBuffer(e))return aC(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},lC=function(e,t){if(!Buffer.isBuffer(e))return oC(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},ym=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):cC(e,t)},hb=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var ru=function(r,e){return r[e]},nf=function(r,e){return r[e+1]*256+r[e]},DI=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},ta=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},kl=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},kI=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function uf(r,e){var t="",n,a,s=[],o,l,u,c;switch(e){case"dbcs":if(c=this.l,Sr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(u=0;u<r;++u)t+=String.fromCharCode(nf(this,c)),c+=2;r*=2;break;case"utf8":t=If(this,this.l,this.l+r);break;case"utf16le":r*=2,t=fb(this,this.l,this.l+r);break;case"wstr":return uf.call(this,r,"dbcs");case"lpstr-ansi":t=eC(this,this.l),r=4+ta(this,this.l);break;case"lpstr-cp":t=rC(this,this.l),r=4+ta(this,this.l);break;case"lpwstr":t=iC(this,this.l),r=4+2*ta(this,this.l);break;case"lpp4":r=4+ta(this,this.l),t=sC(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+ta(this,this.l),t=lC(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(o=ru(this,this.l+r++))!==0;)s.push(b0(o));t=s.join("");break;case"_wstr":for(r=0,t="";(o=nf(this,this.l+r))!==0;)s.push(b0(o)),r+=2;r+=2,t=s.join("");break;case"dbcs-cont":for(t="",c=this.l,u=0;u<r;++u){if(this.lens&&this.lens.indexOf(c)!==-1)return o=ru(this,c),this.l=c+1,l=uf.call(this,r-u,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(b0(nf(this,c))),c+=2}t=s.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",c=this.l,u=0;u!=r;++u){if(this.lens&&this.lens.indexOf(c)!==-1)return o=ru(this,c),this.l=c+1,l=uf.call(this,r-u,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(b0(ru(this,c))),c+=1}t=s.join("");break;default:switch(r){case 1:return n=ru(this,this.l),this.l++,n;case 2:return n=(e==="i"?DI:nf)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(r>0?kl:kI)(this,this.l),this.l+=4,n):(a=ta(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return r==8?a=ym(this,this.l):a=ym([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;r=8;case 16:t=ZT(this,this.l,r);break}}return this.l+=r,t}var MI=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},FI=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},OI=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function BI(r,e,t){var n=0,a=0;if(t==="dbcs"){for(a=0;a!=e.length;++a)OI(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(t==="hex"){for(;a<r;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+r,this.length);for(a=0;a<Math.min(e.length,r);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,MI(this,e,this.l);break;case 8:if(n=8,t==="f"){CI(this,e,this.l);break}case 16:break;case-4:n=4,FI(this,e,this.l);break}return this.l+=n,this}function uC(r,e){var t=ZT(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function Zi(r,e){r.l=e,r.read_shift=uf,r.chk=uC,r.write_shift=BI}function gs(r,e){r.l+=e}function Je(r){var e=Pl(r);return Zi(e,0),e}function Ri(){var r=[],e=Sr?256:2048,t=function(c){var d=Je(c);return Zi(d,0),d},n=t(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},s=function(c){return n&&c<n.length-n.l?n:(a(),n=t(Math.max(c+1,e)))},o=function(){return a(),ei(r)},l=function(c){a(),n=c,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:r}}function lt(r,e,t,n){var a=+e,s;if(!isNaN(a)){n||(n=TH[a].p||(t||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=r.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&hb(t)&&r.push(t)}}function df(r,e,t){var n=qi(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function M3(r,e,t){var n=qi(r);return n.s=df(n.s,e.s,t),n.e=df(n.e,e.s,t),n}function ff(r,e){if(r.cRel&&r.c<0)for(r=qi(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=qi(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=Rr(r);return!r.cRel&&r.cRel!=null&&(t=II(t)),!r.rRel&&r.rRel!=null&&(t=RI(t)),t}function z1(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+hi(r.s.c)+":"+(r.e.cRel?"":"$")+hi(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+ii(r.s.r)+":"+(r.e.rRel?"":"$")+ii(r.e.r):ff(r.s,e.biff)+":"+ff(r.e,e.biff)}function mb(r){return parseInt(LI(r),10)-1}function ii(r){return""+(r+1)}function RI(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function LI(r){return r.replace(/\$(\d+)$/,"$1")}function pb(r){for(var e=zI(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function hi(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function II(r){return r.replace(/^([A-Z])/,"$$$1")}function zI(r){return r.replace(/^\$([A-Z])/,"$1")}function PI(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function $n(r){for(var e=0,t=0,n=0;n<r.length;++n){var a=r.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(t=26*t+(a-64))}return{c:t-1,r:e-1}}function Rr(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function ra(r){var e=r.indexOf(":");return e==-1?{s:$n(r),e:$n(r)}:{s:$n(r.slice(0,e)),e:$n(r.slice(e+1))}}function Nn(r,e){return typeof e>"u"||typeof e=="number"?Nn(r.s,r.e):(typeof r!="string"&&(r=Rr(r)),typeof e!="string"&&(e=Rr(e)),r==e?r:r+":"+e)}function Zr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,a=0,s=r.length;for(t=0;n<s&&!((a=r.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(e.s.c=--t,t=0;n<s&&!((a=r.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;if(e.s.r=--t,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=s&&!((a=r.charCodeAt(n)-64)<1||a>26);++n)t=26*t+a;for(e.e.c=--t,t=0;n!=s&&!((a=r.charCodeAt(n)-48)<0||a>9);++n)t=10*t+a;return e.e.r=--t,e}function F3(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=Ho(r.z,t?Pi(e):e)}catch{}try{return r.w=Ho((r.XF||{}).numFmtId||(t?14:0),t?Pi(e):e)}catch{return""+e}}function Ys(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?zf[r.v]||r.v:e==null?F3(r,r.v):F3(r,e))}function Ql(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function dC(r,e,t){var n=t||{},a=r?Array.isArray(r):n.dense,s=r||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?$n(n.origin):n.origin;o=u.r,l=u.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Zr(s["!ref"]);c.s.c=d.s.c,c.s.r=d.s.r,c.e.c=Math.max(c.e.c,d.e.c),c.e.r=Math.max(c.e.r,d.e.r),o==-1&&(c.e.r=o=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[h].length;++g)if(!(typeof e[h][g]>"u")){var m={v:e[h][g]},v=o+h,x=l+g;if(c.s.r>v&&(c.s.r=v),c.s.c>x&&(c.s.c=x),c.e.r<v&&(c.e.r=v),c.e.c<x&&(c.e.c=x),e[h][g]&&typeof e[h][g]=="object"&&!Array.isArray(e[h][g])&&!(e[h][g]instanceof Date))m=e[h][g];else if(Array.isArray(m.v)&&(m.f=e[h][g][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(n.nullError)m.t="e",m.v=0;else if(n.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=n.dateNF||un[14],n.cellDates?(m.t="d",m.w=Ho(m.z,Pi(m.v))):(m.t="n",m.v=Pi(m.v),m.w=Ho(m.z,m.v))):m.t="s";if(a)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(m.z=s[v][x].z),s[v][x]=m;else{var b=Rr({c:x,r:v});s[b]&&s[b].z&&(m.z=s[b].z),s[b]=m}}}return c.s.c<1e7&&(s["!ref"]=Nn(c)),s}function Bu(r,e){return dC(null,r,e)}function qI(r){return r.read_shift(4,"i")}function Ga(r,e){return e||(e=Je(4)),e.write_shift(4,r),e}function mi(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Un(r,e){var t=!1;return e==null&&(t=!0,e=Je(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function $I(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function UI(r,e){return e||(e=Je(4)),e.write_shift(2,0),e.write_shift(2,0),e}function gb(r,e){var t=r.l,n=r.read_shift(1),a=mi(r),s=[],o={t:a,h:a};if((n&1)!==0){for(var l=r.read_shift(4),u=0;u!=l;++u)s.push($I(r));o.r=s}else o.r=[{ich:0,ifnt:0}];return r.l=t+e,o}function HI(r,e){var t=!1;return e==null&&(t=!0,e=Je(15+4*r.t.length)),e.write_shift(1,0),Un(r.t,e),t?e.slice(0,e.l):e}var VI=gb;function GI(r,e){var t=!1;return e==null&&(t=!0,e=Je(23+4*r.t.length)),e.write_shift(1,1),Un(r.t,e),e.write_shift(4,1),UI({},e),t?e.slice(0,e.l):e}function Aa(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Wl(r,e){return e==null&&(e=Je(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Kl(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function Xl(r,e){return e==null&&(e=Je(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var QI=mi,fC=Un;function xb(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function bm(r,e){var t=!1;return e==null&&(t=!0,e=Je(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var WI=mi,vy=xb,vb=bm;function hC(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var a=n===0?ym([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):kl(e,0)>>2;return t?a/100:a}function mC(r,e){e==null&&(e=Je(4));var t=0,n=0,a=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?a:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function pC(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function KI(r,e){return e||(e=Je(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var Yl=pC,Ru=KI;function Lu(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function ql(r,e){return(e||Je(8)).write_shift(8,r,"f")}function XI(r){var e={},t=r.read_shift(1),n=t>>>1,a=r.read_shift(1),s=r.read_shift(2,"i"),o=r.read_shift(1),l=r.read_shift(1),u=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var c=az[a];c&&(e.rgb=H3(c));break;case 2:e.rgb=H3([o,l,u]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function wm(r,e){if(e||(e=Je(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function YI(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function ZI(r,e){e||(e=Je(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var gC=2,Yi=3,S0=11,_m=19,j0=64,JI=65,ez=71,tz=4108,rz=4126,Zn=80,O3={1:{n:"CodePage",t:gC},2:{n:"Category",t:Zn},3:{n:"PresentationFormat",t:Zn},4:{n:"ByteCount",t:Yi},5:{n:"LineCount",t:Yi},6:{n:"ParagraphCount",t:Yi},7:{n:"SlideCount",t:Yi},8:{n:"NoteCount",t:Yi},9:{n:"HiddenCount",t:Yi},10:{n:"MultimediaClipCount",t:Yi},11:{n:"ScaleCrop",t:S0},12:{n:"HeadingPairs",t:tz},13:{n:"TitlesOfParts",t:rz},14:{n:"Manager",t:Zn},15:{n:"Company",t:Zn},16:{n:"LinksUpToDate",t:S0},17:{n:"CharacterCount",t:Yi},19:{n:"SharedDoc",t:S0},22:{n:"HyperlinksChanged",t:S0},23:{n:"AppVersion",t:Yi,p:"version"},24:{n:"DigSig",t:JI},26:{n:"ContentType",t:Zn},27:{n:"ContentStatus",t:Zn},28:{n:"Language",t:Zn},29:{n:"Version",t:Zn},255:{},2147483648:{n:"Locale",t:_m},2147483651:{n:"Behavior",t:_m},1919054434:{}},B3={1:{n:"CodePage",t:gC},2:{n:"Title",t:Zn},3:{n:"Subject",t:Zn},4:{n:"Author",t:Zn},5:{n:"Keywords",t:Zn},6:{n:"Comments",t:Zn},7:{n:"Template",t:Zn},8:{n:"LastAuthor",t:Zn},9:{n:"RevNumber",t:Zn},10:{n:"EditTime",t:j0},11:{n:"LastPrinted",t:j0},12:{n:"CreatedDate",t:j0},13:{n:"ModifiedDate",t:j0},14:{n:"PageCount",t:Yi},15:{n:"WordCount",t:Yi},16:{n:"CharCount",t:Yi},17:{n:"Thumbnail",t:ez},18:{n:"Application",t:Zn},19:{n:"DocSecurity",t:Yi},255:{},2147483648:{n:"Locale",t:_m},2147483651:{n:"Behavior",t:_m},1919054434:{}};function nz(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var iz=nz([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),az=qi(iz),zf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sz={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},E0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function xC(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function vC(r,e){var t=gI(sz),n=[],a;n[n.length]=jn,n[n.length]=bt("Types",null,{xmlns:qn.CT,"xmlns:xsd":qn.xsd,"xmlns:xsi":qn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(u){return bt("Default",null,{Extension:u[0],ContentType:u[1]})}));var s=function(u){r[u]&&r[u].length>0&&(a=r[u][0],n[n.length]=bt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:E0[u][e.bookType]||E0[u].xlsx}))},o=function(u){(r[u]||[]).forEach(function(c){n[n.length]=bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:E0[u][e.bookType]||E0[u].xlsx})})},l=function(u){(r[u]||[]).forEach(function(c){n[n.length]=bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:t[u][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var wr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yC(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function du(r){var e=[jn,bt("Relationships",null,{xmlns:qn.RELS})];return si(r["!id"]).forEach(function(t){e[e.length]=bt("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function kr(r,e,t,n,a,s){if(a||(a={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=t,[wr.HLINK,wr.XPATH,wr.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),r["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][a.Id]=a,r[("/"+a.Target).replace("//","/")]=a,e}function oz(r){var e=[jn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function R3(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function lz(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function cz(r){var e=[jn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(R3(r[t][0],r[t][1])),e.push(lz("",r[t][0]));return e.push(R3("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function bC(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hm.version+"</meta:generator></office:meta></office:document-meta>"}var Ll=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function P1(r,e,t,n,a){a[r]!=null||e==null||e===""||(a[r]=e,e=Br(e),n[n.length]=t?bt(r,e,t):ti(r,e))}function wC(r,e){var t=e||{},n=[jn,bt("cp:coreProperties",null,{"xmlns:cp":qn.CORE_PROPS,"xmlns:dc":qn.dc,"xmlns:dcterms":qn.dcterms,"xmlns:dcmitype":qn.dcmitype,"xmlns:xsi":qn.xsi})],a={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&P1("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:xy(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),r.ModifiedDate!=null&&P1("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:xy(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Ll.length;++s){var o=Ll[s],l=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:r?r[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&P1(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var fu=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],_C=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function NC(r){var e=[],t=bt;return r||(r={}),r.Application="SheetJS",e[e.length]=jn,e[e.length]=bt("Properties",null,{xmlns:qn.EXT_PROPS,"xmlns:vt":qn.vt}),fu.forEach(function(n){if(r[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Br(String(r[n[1]]));break;case"bool":a=r[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=t(n[0],a))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+Br(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function SC(r){var e=[jn,bt("Properties",null,{xmlns:qn.CUST_PROPS,"xmlns:vt":qn.vt})];if(!r)return e.join("");var t=1;return si(r).forEach(function(a){++t,e[e.length]=bt("property",AI(r[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Br(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var L3={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function uz(r,e){var t=[];return si(L3).map(function(n){for(var a=0;a<Ll.length;++a)if(Ll[a][1]==n)return Ll[a];for(a=0;a<fu.length;++a)if(fu[a][1]==n)return fu[a];throw n}).forEach(function(n){if(r[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),t.push(ti(L3[n[1]]||n[1],a))}}),bt("DocumentProperties",t.join(""),{xmlns:ea.o})}function dz(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return r&&si(r).forEach(function(s){if(Object.prototype.hasOwnProperty.call(r,s)){for(var o=0;o<Ll.length;++o)if(s==Ll[o][1])return;for(o=0;o<fu.length;++o)if(s==fu[o][1])return;for(o=0;o<t.length;++o)if(s==t[o])return;var l=r[s],u="string";typeof l=="number"?(u="float",l=String(l)):l===!0||l===!1?(u="boolean",l=l?"1":"0"):l=String(l),a.push(bt(S3(s),l,{"dt:dt":u}))}}),e&&si(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(r&&Object.prototype.hasOwnProperty.call(r,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(bt(S3(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+ea.o+'">'+a.join("")+"</"+n+">"}function fz(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),a=(t-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Je(8);return o.write_shift(4,n),o.write_shift(4,a),o}function I3(r,e){var t=Je(4),n=Je(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Je(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=fz(e);break;case 31:case 80:for(n=Je(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return ei([t,n])}var jC=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hz(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function z3(r,e,t){var n=Je(8),a=[],s=[],o=8,l=0,u=Je(8),c=Je(8);if(u.write_shift(4,2),u.write_shift(4,1200),c.write_shift(4,1),s.push(u),a.push(c),o+=8+u.length,!e){c=Je(8),c.write_shift(4,0),a.unshift(c);var d=[Je(4)];for(d[0].write_shift(4,r.length),l=0;l<r.length;++l){var h=r[l][0];for(u=Je(8+2*(h.length+1)+(h.length%2?0:2)),u.write_shift(4,l+2),u.write_shift(4,h.length+1),u.write_shift(0,h,"dbcs");u.l!=u.length;)u.write_shift(1,0);d.push(u)}u=ei(d),s.unshift(u),o+=8+u.length}for(l=0;l<r.length;++l)if(!(e&&!e[r[l][0]])&&!(jC.indexOf(r[l][0])>-1||_C.indexOf(r[l][0])>-1)&&r[l][1]!=null){var g=r[l][1],m=0;if(e){m=+e[r[l][0]];var v=t[m];if(v.p=="version"&&typeof g=="string"){var x=g.split(".");g=(+x[0]<<16)+(+x[1]||0)}u=I3(v.t,g)}else{var b=hz(g);b==-1&&(b=31,g=String(g)),u=I3(b,g)}s.push(u),c=Je(8),c.write_shift(4,e?m:2+l),a.push(c),o+=8+u.length}var y=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,y),y+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),ei([n].concat(a).concat(s))}function P3(r,e,t,n,a,s){var o=Je(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Ur.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var u=z3(r,t,n);if(l.push(u),a){var c=z3(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+u.length),l.push(c)}return ei(l)}function mz(r,e){e||(e=Je(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function pz(r,e){return r.read_shift(e)===1}function wi(r,e){return e||(e=Je(2)),e.write_shift(2,+!!r),e}function EC(r){return r.read_shift(2,"u")}function ba(r,e){return e||(e=Je(2)),e.write_shift(2,r),e}function AC(r,e,t){return t||(t=Je(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function TC(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),a="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=r.read_shift(1);s&&(a="dbcs-cont")}else t.biff==12&&(a="wstr");t.biff>=2&&t.biff<=5&&(a="cpstr");var o=n?r.read_shift(n,a):"";return o}function gz(r){var e=r.t||"",t=Je(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Je(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[t,n];return ei(a)}function xz(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var a=r.read_shift(1);return a===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function vz(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):xz(r,n,t)}function yz(r,e,t){if(t.biff>5)return vz(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function CC(r,e,t){return t||(t=Je(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function q3(r,e){e||(e=Je(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function bz(r){var e=Je(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(t=0;t<o.length;++t)e.write_shift(4,o[t]);if(s==28)n=n.slice(1),q3(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),t=0;t<l.length;++t)e.write_shift(2,l.charCodeAt(t));e.write_shift(2,0),s&8&&q3(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));for(var u=0;n.slice(u*3,u*3+3)=="../"||n.slice(u*3,u*3+3)=="..\\";)++u;for(e.write_shift(2,u),e.write_shift(4,n.length-3*u+1),t=0;t<n.length-3*u;++t)e.write_shift(1,n.charCodeAt(t+3*u)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function $l(r,e,t,n){return n||(n=Je(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function wz(r,e,t){var n=t.biff>8?4:2,a=r.read_shift(n),s=r.read_shift(n,"i"),o=r.read_shift(n,"i");return[a,s,o]}function _z(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),a=r.read_shift(2);return{s:{c:n,r:e},e:{c:a,r:t}}}function DC(r,e){return e||(e=Je(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function yb(r,e,t){var n=1536,a=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Je(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Nz(r,e){var t=!e||e.biff==8,n=Je(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function Sz(r,e){var t=!e||e.biff>=8?2:1,n=Je(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function jz(r,e){var t=Je(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],a=0;a<r.length;++a)n[a]=gz(r[a]);var s=ei([t].concat(n));return s.parts=[t.length].concat(n.map(function(o){return o.length})),s}function Ez(){var r=Je(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function Az(r){var e=Je(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Tz(r,e){var t=r.name||"Arial",n=e&&e.biff==5,a=n?15+t.length:16+2*t.length,s=Je(a);return s.write_shift(2,r.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),s}function Cz(r,e,t,n){var a=Je(10);return $l(r,e,n,a),a.write_shift(4,t),a}function Dz(r,e,t,n,a){var s=!a||a.biff==8,o=Je(8+ +s+(1+s)*t.length);return $l(r,e,n,o),o.write_shift(2,t.length),s&&o.write_shift(1,1),o.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),o}function kz(r,e,t,n){var a=t&&t.biff==5;n||(n=Je(a?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function Mz(r,e){var t=e.biff==8||!e.biff?4:2,n=Je(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function $3(r,e,t,n){var a=t&&t.biff==5;n||(n=Je(a?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var s=0;return r.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function Fz(r){var e=Je(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Oz(r,e,t,n,a,s){var o=Je(8);return $l(r,e,n,o),AC(t,s,o),o}function Bz(r,e,t,n){var a=Je(14);return $l(r,e,n,a),ql(t,a),a}function Rz(r,e,t){if(t.biff<8)return Lz(r,e,t);for(var n=[],a=r.l+e,s=r.read_shift(t.biff>8?4:2);s--!==0;)n.push(wz(r,t.biff>8?12:6,t));if(r.l!=a)throw new Error("Bad ExternSheet: "+r.l+" != "+a);return n}function Lz(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=TC(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function Iz(r){var e=Je(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)DC(r[t],e);return e}function zz(r){var e=Je(24),t=$n(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return ei([e,bz(r[1])])}function Pz(r){var e=r[1].Tooltip,t=Je(10+2*(e.length+1));t.write_shift(2,2048);var n=$n(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var a=0;a<e.length;++a)t.write_shift(2,e.charCodeAt(a));return t.write_shift(2,0),t}function qz(r){return r||(r=Je(4)),r.write_shift(2,1),r.write_shift(2,1),r}function $z(r,e,t){if(!t.cellStyles)return gs(r,e);var n=t&&t.biff>=12?4:2,a=r.read_shift(n),s=r.read_shift(n),o=r.read_shift(n),l=r.read_shift(n),u=r.read_shift(2);n==2&&(r.l+=2);var c={s:a,e:s,w:o,ixfe:l,flags:u};return(t.biff>=5||!t.biff)&&(c.level=u>>8&7),c}function Uz(r,e){var t=Je(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function Hz(r){for(var e=Je(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function Vz(r,e,t){var n=Je(15);return qf(n,r,e),n.write_shift(8,t,"f"),n}function Gz(r,e,t){var n=Je(9);return qf(n,r,e),n.write_shift(2,t),n}var Qz=function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=lb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(l,u){var c=[],d=Pl(1);switch(u.type){case"base64":d=Ua(Xs(l));break;case"binary":d=Ua(l);break;case"buffer":case"array":d=l;break}Zi(d,0);var h=d.read_shift(1),g=!!(h&136),m=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:m=!0,g=!0;break;case 49:m=!0,g=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,b=521;h==2&&(x=d.read_shift(2)),d.l+=3,h!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(b=d.read_shift(2));var y=d.read_shift(2),S=u.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=r[d[d.l]]),d.l+=1,d.l+=2),v&&(d.l+=36);for(var _=[],N={},j=Math.min(d.length,h==2?521:b-10-(m?264:0)),E=v?32:11;d.l<j&&d[d.l]!=13;)switch(N={},N.name=mm.utils.decode(S,d.slice(d.l,d.l+E)).replace(/[\u0000\r\n].*$/g,""),d.l+=E,N.type=String.fromCharCode(d.read_shift(1)),h!=2&&!v&&(N.offset=d.read_shift(4)),N.len=d.read_shift(1),h==2&&(N.offset=d.read_shift(2)),N.dec=d.read_shift(1),N.name.length&&_.push(N),h!=2&&(d.l+=v?13:14),N.type){case"B":(!m||N.len!=8)&&u.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":u.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var T=0,F=0;for(c[0]=[],F=0;F!=_.length;++F)c[0][F]=_[F].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,c[++T]=[],F=0,F=0;F!=_.length;++F){var A=d.slice(d.l,d.l+_[F].len);d.l+=_[F].len,Zi(A,0);var R=mm.utils.decode(S,A);switch(_[F].type){case"C":R.trim().length&&(c[T][F]=R.replace(/\s+$/,""));break;case"D":R.length===8?c[T][F]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):c[T][F]=R;break;case"F":c[T][F]=parseFloat(R.trim());break;case"+":case"I":c[T][F]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":c[T][F]=!0;break;case"N":case"F":c[T][F]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[T][F]="##MEMO##"+(v?parseInt(R.trim(),10):A.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(c[T][F]=+R||0);break;case"@":c[T][F]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":c[T][F]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":c[T][F]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[T][F]=-A.read_shift(-8,"f");break;case"B":if(m&&_[F].len==8){c[T][F]=A.read_shift(8,"f");break}case"G":case"P":A.l+=_[F].len;break;case"0":if(_[F].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[F].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return u&&u.sheetRows&&(c=c.slice(0,u.sheetRows)),u.DBF=_,c}function n(l,u){var c=u||{};c.dateNF||(c.dateNF="yyyymmdd");var d=Bu(t(l,c),c);return d["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,d}function a(l,u){try{return Ql(n(l,u),u)}catch(c){if(u&&u.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,u){var c=u||{};if(+c.codepage>=0&&xf(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var d=Ri(),h=Am(l,{header:1,raw:!0,cellDates:!0}),g=h[0],m=h.slice(1),v=l["!cols"]||[],x=0,b=0,y=0,S=1;for(x=0;x<g.length;++x){if(((v[x]||{}).DBF||{}).name){g[x]=v[x].DBF.name,++y;continue}if(g[x]!=null){if(++y,typeof g[x]=="number"&&(g[x]=g[x].toString(10)),typeof g[x]!="string")throw new Error("DBF Invalid column name "+g[x]+" |"+typeof g[x]+"|");if(g.indexOf(g[x])!==x){for(b=0;b<1024;++b)if(g.indexOf(g[x]+"_"+b)==-1){g[x]+="_"+b;break}}}}var _=Zr(l["!ref"]),N=[],j=[],E=[];for(x=0;x<=_.e.c-_.s.c;++x){var T="",F="",A=0,R=[];for(b=0;b<m.length;++b)m[b][x]!=null&&R.push(m[b][x]);if(R.length==0||g[x]==null){N[x]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":F="B";break;case"string":F="C";break;case"boolean":F="L";break;case"object":F=R[b]instanceof Date?"D":"C";break;default:F="C"}A=Math.max(A,String(R[b]).length),T=T&&T!=F?"C":F}A>250&&(A=250),F=((v[x]||{}).DBF||{}).type,F=="C"&&v[x].DBF.len>A&&(A=v[x].DBF.len),T=="B"&&F=="N"&&(T="N",E[x]=v[x].DBF.dec,A=v[x].DBF.len),j[x]=T=="C"||F=="N"?A:s[T]||0,S+=j[x],N[x]=T}var I=d.next(32);for(I.write_shift(4,318902576),I.write_shift(4,m.length),I.write_shift(2,296+32*y),I.write_shift(2,S),x=0;x<4;++x)I.write_shift(4,0);for(I.write_shift(4,0|(+e[MT]||3)<<8),x=0,b=0;x<g.length;++x)if(g[x]!=null){var O=d.next(32),U=(g[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,U,"sbcs"),O.write_shift(1,N[x]=="?"?"C":N[x],"sbcs"),O.write_shift(4,b),O.write_shift(1,j[x]||s[N[x]]||0),O.write_shift(1,E[x]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=j[x]||s[N[x]]||0}var D=d.next(264);for(D.write_shift(4,13),x=0;x<65;++x)D.write_shift(4,0);for(x=0;x<m.length;++x){var H=d.next(S);for(H.write_shift(1,0),b=0;b<g.length;++b)if(g[b]!=null)switch(N[b]){case"L":H.write_shift(1,m[x][b]==null?63:m[x][b]?84:70);break;case"B":H.write_shift(8,m[x][b]||0,"f");break;case"N":var P="0";for(typeof m[x][b]=="number"&&(P=m[x][b].toFixed(E[b]||0)),y=0;y<j[b]-P.length;++y)H.write_shift(1,32);H.write_shift(1,P,"sbcs");break;case"D":m[x][b]?(H.write_shift(4,("0000"+m[x][b].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(m[x][b].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+m[x][b].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var G=String(m[x][b]!=null?m[x][b]:"").slice(0,j[b]);for(H.write_shift(1,G,"sbcs"),y=0;y<j[b]-G.length;++y)H.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),Wz=function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+si(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,m){var v=r[m];return typeof v=="number"?f3(v):v},n=function(g,m,v){var x=m.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?g:f3(x)};r["|"]=254;function a(g,m){switch(m.type){case"base64":return s(Xs(g),m);case"binary":return s(g,m);case"buffer":return s(Sr&&Buffer.isBuffer(g)?g.toString("binary"):Rf(g),m);case"array":return s(pp(g),m)}throw new Error("Unrecognized type "+m.type)}function s(g,m){var v=g.split(/[\n\r]+/),x=-1,b=-1,y=0,S=0,_=[],N=[],j=null,E={},T=[],F=[],A=[],R=0,I;for(+m.codepage>=0&&xf(+m.codepage);y!==v.length;++y){R=0;var O=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),U=O.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),D=U[0],H;if(O.length>0)switch(D){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&N.push(O.slice(3).replace(/;;/g,";"));break;case"C":var P=!1,G=!1,ue=!1,le=!1,pe=-1,de=-1;for(S=1;S<U.length;++S)switch(U[S].charAt(0)){case"A":break;case"X":b=parseInt(U[S].slice(1))-1,G=!0;break;case"Y":for(x=parseInt(U[S].slice(1))-1,G||(b=0),I=_.length;I<=x;++I)_[I]=[];break;case"K":H=U[S].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(Gs(H))?isNaN(yf(H).getDate())||(H=_i(H)):(H=Gs(H),j!==null&&HT(j)&&(H=WT(H))),P=!0;break;case"E":le=!0;var L=GP(U[S].slice(1),{r:x,c:b});_[x][b]=[_[x][b],L];break;case"S":ue=!0,_[x][b]=[_[x][b],"S5S"];break;case"G":break;case"R":pe=parseInt(U[S].slice(1))-1;break;case"C":de=parseInt(U[S].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}if(P&&(_[x][b]&&_[x][b].length==2?_[x][b][0]=H:_[x][b]=H,j=null),ue){if(le)throw new Error("SYLK shared formula cannot have own formula");var X=pe>-1&&_[pe][de];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");_[x][b][1]=QP(X[1],{r:x-pe,c:b-de})}break;case"F":var V=0;for(S=1;S<U.length;++S)switch(U[S].charAt(0)){case"X":b=parseInt(U[S].slice(1))-1,++V;break;case"Y":for(x=parseInt(U[S].slice(1))-1,I=_.length;I<=x;++I)_[I]=[];break;case"M":R=parseInt(U[S].slice(1))/20;break;case"F":break;case"G":break;case"P":j=N[parseInt(U[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=U[S].slice(1).split(" "),I=parseInt(A[0],10);I<=parseInt(A[1],10);++I)R=parseInt(A[2],10),F[I-1]=R===0?{hidden:!0}:{wch:R},bb(F[I-1]);break;case"C":b=parseInt(U[S].slice(1))-1,F[b]||(F[b]={});break;case"R":x=parseInt(U[S].slice(1))-1,T[x]||(T[x]={}),R>0?(T[x].hpt=R,T[x].hpx=BC(R)):R===0&&(T[x].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}V<1&&(j=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+O)}}return T.length>0&&(E["!rows"]=T),F.length>0&&(E["!cols"]=F),m&&m.sheetRows&&(_=_.slice(0,m.sheetRows)),[_,E]}function o(g,m){var v=a(g,m),x=v[0],b=v[1],y=Bu(x,m);return si(b).forEach(function(S){y[S]=b[S]}),y}function l(g,m){return Ql(o(g,m),m)}function u(g,m,v,x){var b="C;Y"+(v+1)+";X"+(x+1)+";K";switch(g.t){case"n":b+=g.v||0,g.f&&!g.F&&(b+=";E"+_b(g.f,{r:v,c:x}));break;case"b":b+=g.v?"TRUE":"FALSE";break;case"e":b+=g.w||g.v;break;case"d":b+='"'+(g.w||g.v)+'"';break;case"s":b+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(g,m){m.forEach(function(v,x){var b="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=Nm(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=Sm(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&g.push(b)})}function d(g,m){m.forEach(function(v,x){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*jm(v.hpx)+";"),b.length>2&&g.push(b+"R"+(x+1))})}function h(g,m){var v=["ID;PWXL;N;E"],x=[],b=Zr(g["!ref"]),y,S=Array.isArray(g),_=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),g["!cols"]&&c(v,g["!cols"]),g["!rows"]&&d(v,g["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var N=b.s.r;N<=b.e.r;++N)for(var j=b.s.c;j<=b.e.c;++j){var E=Rr({r:N,c:j});y=S?(g[N]||[])[j]:g[E],!(!y||y.v==null&&(!y.f||y.F))&&x.push(u(y,g,N,j))}return v.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),Kz=function(){function r(s,o){switch(o.type){case"base64":return e(Xs(s),o);case"binary":return e(s,o);case"buffer":return e(Sr&&Buffer.isBuffer(s)?s.toString("binary"):Rf(s),o);case"array":return e(pp(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),u=-1,c=-1,d=0,h=[];d!==l.length;++d){if(l[d].trim()==="BOT"){h[++u]=[],c=0;continue}if(!(u<0)){var g=l[d].trim().split(","),m=g[0],v=g[1];++d;for(var x=l[d]||"";(x.match(/["]/g)||[]).length&1&&d<l.length-1;)x+=`
`+l[++d];switch(x=x.trim(),+m){case-1:if(x==="BOT"){h[++u]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[u][c]=!0:x==="FALSE"?h[u][c]=!1:isNaN(Gs(v))?isNaN(yf(v).getDate())?h[u][c]=v:h[u][c]=_i(v):h[u][c]=Gs(v),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[u][c++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function t(s,o){return Bu(r(s,o),o)}function n(s,o){return Ql(t(s,o),o)}var a=function(){var s=function(u,c,d,h,g){u.push(c),u.push(d+","+h),u.push('"'+g.replace(/"/g,'""')+'"')},o=function(u,c,d,h){u.push(c+","+d),u.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(u){var c=[],d=Zr(u["!ref"]),h,g=Array.isArray(u);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,d.e.r-d.s.r+1,""),s(c,"TUPLES",0,d.e.c-d.s.c+1,""),s(c,"DATA",0,0,"");for(var m=d.s.r;m<=d.e.r;++m){o(c,-1,0,"BOT");for(var v=d.s.c;v<=d.e.c;++v){var x=Rr({r:m,c:v});if(h=g?(u[m]||[])[v]:u[x],!h){o(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(c,1,0,"="+h.f):o(c,1,0,""):o(c,0,b,"V");break;case"b":o(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Ho(h.z||un[14],Pi(_i(h.v)))),o(c,0,h.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var y=`\r
`,S=c.join(y);return S}}();return{to_workbook:n,to_sheet:t,from_sheet:a}}(),kC=function(){function r(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(h,g){for(var m=h.split(`
`),v=-1,x=-1,b=0,y=[];b!==m.length;++b){var S=m[b].trim().split(":");if(S[0]==="cell"){var _=$n(S[1]);if(y.length<=_.r)for(v=y.length;v<=_.r;++v)y[v]||(y[v]=[]);switch(v=_.r,x=_.c,S[2]){case"t":y[v][x]=r(S[3]);break;case"v":y[v][x]=+S[3];break;case"vtf":var N=S[S.length-1];case"vtc":switch(S[3]){case"nl":y[v][x]=!!+S[4];break;default:y[v][x]=+S[4];break}S[2]=="vtf"&&(y[v][x]=[y[v][x],N])}}}return g&&g.sheetRows&&(y=y.slice(0,g.sheetRows)),y}function n(h,g){return Bu(t(h,g),g)}function a(h,g){return Ql(n(h,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),u="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var g=[],m=[],v,x="",b=ra(h["!ref"]),y=Array.isArray(h),S=b.s.r;S<=b.e.r;++S)for(var _=b.s.c;_<=b.e.c;++_)if(x=Rr({r:S,c:_}),v=y?(h[S]||[])[_]:h[x],!(!v||v.v==null||v.t==="z")){switch(m=["cell",x,"t"],v.t){case"s":case"str":m.push(e(v.v));break;case"n":v.f?(m[2]="vtf",m[3]="n",m[4]=v.v,m[5]=e(v.f)):(m[2]="v",m[3]=v.v);break;case"b":m[2]="vt"+(v.f?"f":"c"),m[3]="nl",m[4]=v.v?"1":"0",m[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var N=Pi(_i(v.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=v.w||Ho(v.z||un[14],N);break;case"e":continue}g.push(m.join(":"))}return g.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function d(h){return[s,o,l,o,c(h),u].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Xz=function(){function r(d,h,g,m,v){v.raw?h[g][m]=d:d===""||(d==="TRUE"?h[g][m]=!0:d==="FALSE"?h[g][m]=!1:isNaN(Gs(d))?isNaN(yf(d).getDate())?h[g][m]=d:h[g][m]=_i(d):h[g][m]=Gs(d))}function e(d,h){var g=h||{},m=[];if(!d||d.length===0)return m;for(var v=d.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var b=10,y=0,S=0;S<=x;++S)y=v[S].indexOf(" "),y==-1?y=v[S].length:y++,b=Math.max(b,y);for(S=0;S<=x;++S){m[S]=[];var _=0;for(r(v[S].slice(0,b).trim(),m,S,_,g),_=1;_<=(v[S].length-b)/10+1;++_)r(v[S].slice(b+(_-1)*10,b+_*10).trim(),m,S,_,g)}return g.sheetRows&&(m=m.slice(0,g.sheetRows)),m}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},g=!1,m=0,v=0;m<d.length;++m)(v=d.charCodeAt(m))==34?g=!g:!g&&v in t&&(h[v]=(h[v]||0)+1);v=[];for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&v.push([h[m],m]);if(!v.length){h=n;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&v.push([h[m],m])}return v.sort(function(x,b){return x[0]-b[0]||n[x[1]]-n[b[1]]}),t[v.pop()[1]]||44}function s(d,h){var g=h||{},m="",v=g.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(m=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(m=d.charAt(4),d=d.slice(6)):m=a(d.slice(0,1024)):g&&g.FS?m=g.FS:m=a(d.slice(0,1024));var b=0,y=0,S=0,_=0,N=0,j=m.charCodeAt(0),E=!1,T=0,F=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var A=g.dateNF!=null?fI(g.dateNF):null;function R(){var I=d.slice(_,N),O={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)O.t="z";else if(g.raw)O.t="s",O.v=I;else if(I.trim().length===0)O.t="s",O.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(O.t="s",O.v=I.slice(2,-1).replace(/""/g,'"')):WP(I)?(O.t="n",O.f=I.slice(1)):(O.t="s",O.v=I);else if(I=="TRUE")O.t="b",O.v=!0;else if(I=="FALSE")O.t="b",O.v=!1;else if(!isNaN(S=Gs(I)))O.t="n",g.cellText!==!1&&(O.w=I),O.v=S;else if(!isNaN(yf(I).getDate())||A&&I.match(A)){O.z=g.dateNF||un[14];var U=0;A&&I.match(A)&&(I=hI(I,g.dateNF,I.match(A)||[]),U=1),g.cellDates?(O.t="d",O.v=_i(I,U)):(O.t="n",O.v=Pi(_i(I,U))),g.cellText!==!1&&(O.w=Ho(O.z,O.v instanceof Date?Pi(O.v):O.v)),g.cellNF||delete O.z}else O.t="s",O.v=I;if(O.t=="z"||(g.dense?(v[b]||(v[b]=[]),v[b][y]=O):v[Rr({c:y,r:b})]=O),_=N+1,F=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<b&&(x.e.r=b),T==j)++y;else if(y=0,++b,g.sheetRows&&g.sheetRows<=b)return!0}e:for(;N<d.length;++N)switch(T=d.charCodeAt(N)){case 34:F===34&&(E=!E);break;case j:case 10:case 13:if(!E&&R())break e;break}return N-_>0&&R(),v["!ref"]=Nn(x),v}function o(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):Bu(e(d,h),h)}function l(d,h){var g="",m=h.type=="string"?[0,0,0,0]:lV(d,h);switch(h.type){case"base64":g=Xs(d);break;case"binary":g=d;break;case"buffer":h.codepage==65001?g=d.toString("utf8"):h.codepage&&typeof mm<"u"||(g=Sr&&Buffer.isBuffer(d)?d.toString("binary"):Rf(d));break;case"array":g=pp(d);break;case"string":g=d;break;default:throw new Error("Unrecognized type "+h.type)}return m[0]==239&&m[1]==187&&m[2]==191?g=cf(g.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?g=cf(g):h.type=="binary"&&typeof mm<"u",g.slice(0,19)=="socialcalc:version:"?kC.to_sheet(h.type=="string"?g:cf(g),h):o(g,h)}function u(d,h){return Ql(l(d,h),h)}function c(d){for(var h=[],g=Zr(d["!ref"]),m,v=Array.isArray(d),x=g.s.r;x<=g.e.r;++x){for(var b=[],y=g.s.c;y<=g.e.c;++y){var S=Rr({r:x,c:y});if(m=v?(d[x]||[])[y]:d[S],!m||m.v==null){b.push("          ");continue}for(var _=(m.w||(Ys(m),m.w)||"").slice(0,10);_.length<10;)_+=" ";b.push(_+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:u,to_sheet:l,from_sheet:c}}(),U3=function(){function r(L,X,V){if(L){Zi(L,L.l||0);for(var se=V.Enum||pe;L.l<L.length;){var ae=L.read_shift(2),W=se[ae]||se[65535],z=L.read_shift(2),re=L.l+z,ne=W.f&&W.f(L,z,V);if(L.l=re,X(ne,W,ae))return}}}function e(L,X){switch(X.type){case"base64":return t(Ua(Xs(L)),X);case"binary":return t(Ua(L),X);case"buffer":case"array":return t(L,X)}throw"Unsupported type "+X.type}function t(L,X){if(!L)return L;var V=X||{},se=V.dense?[]:{},ae="Sheet1",W="",z=0,re={},ne=[],ie=[],oe={s:{r:0,c:0},e:{r:0,c:0}},ye=V.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)V.Enum=pe,r(L,function(k,B,Q){switch(Q){case 0:V.vers=k,k>=4096&&(V.qpro=!0);break;case 6:oe=k;break;case 204:k&&(W=k);break;case 222:W=k;break;case 15:case 51:V.qpro||(k[1].v=k[1].v.slice(1));case 13:case 14:case 16:Q==14&&(k[2]&112)==112&&(k[2]&15)>1&&(k[2]&15)<15&&(k[1].z=V.dateNF||un[14],V.cellDates&&(k[1].t="d",k[1].v=WT(k[1].v))),V.qpro&&k[3]>z&&(se["!ref"]=Nn(oe),re[ae]=se,ne.push(ae),se=V.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},z=k[3],ae=W||"Sheet"+(z+1),W="");var Z=V.dense?(se[k[0].r]||[])[k[0].c]:se[Rr(k[0])];if(Z){Z.t=k[1].t,Z.v=k[1].v,k[1].z!=null&&(Z.z=k[1].z),k[1].f!=null&&(Z.f=k[1].f);break}V.dense?(se[k[0].r]||(se[k[0].r]=[]),se[k[0].r][k[0].c]=k[1]):se[Rr(k[0])]=k[1];break}},V);else if(L[2]==26||L[2]==14)V.Enum=de,L[2]==14&&(V.qpro=!0,L.l=0),r(L,function(k,B,Q){switch(Q){case 204:ae=k;break;case 22:k[1].v=k[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(k[3]>z&&(se["!ref"]=Nn(oe),re[ae]=se,ne.push(ae),se=V.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},z=k[3],ae="Sheet"+(z+1)),ye>0&&k[0].r>=ye)break;V.dense?(se[k[0].r]||(se[k[0].r]=[]),se[k[0].r][k[0].c]=k[1]):se[Rr(k[0])]=k[1],oe.e.c<k[0].c&&(oe.e.c=k[0].c),oe.e.r<k[0].r&&(oe.e.r=k[0].r);break;case 27:k[14e3]&&(ie[k[14e3][0]]=k[14e3][1]);break;case 1537:ie[k[0]]=k[1],k[0]==z&&(ae=k[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(se["!ref"]=Nn(oe),re[W||ae]=se,ne.push(W||ae),!ie.length)return{SheetNames:ne,Sheets:re};for(var M={},ge=[],ee=0;ee<ie.length;++ee)re[ne[ee]]?(ge.push(ie[ee]||ne[ee]),M[ie[ee]]=re[ie[ee]]||re[ne[ee]]):(ge.push(ie[ee]),M[ie[ee]]={"!ref":"A1"});return{SheetNames:ge,Sheets:M}}function n(L,X){var V=X||{};if(+V.codepage>=0&&xf(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var se=Ri(),ae=Zr(L["!ref"]),W=Array.isArray(L),z=[];wt(se,0,s(1030)),wt(se,6,u(ae));for(var re=Math.min(ae.e.r,8191),ne=ae.s.r;ne<=re;++ne)for(var ie=ii(ne),oe=ae.s.c;oe<=ae.e.c;++oe){ne===ae.s.r&&(z[oe]=hi(oe));var ye=z[oe]+ie,M=W?(L[ne]||[])[oe]:L[ye];if(!(!M||M.t=="z"))if(M.t=="n")(M.v|0)==M.v&&M.v>=-32768&&M.v<=32767?wt(se,13,m(ne,oe,M.v)):wt(se,14,x(ne,oe,M.v));else{var ge=Ys(M);wt(se,15,h(ne,oe,ge.slice(0,239)))}}return wt(se,1),se.end()}function a(L,X){var V=X||{};if(+V.codepage>=0&&xf(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var se=Ri();wt(se,0,o(L));for(var ae=0,W=0;ae<L.SheetNames.length;++ae)(L.Sheets[L.SheetNames[ae]]||{})["!ref"]&&wt(se,27,le(L.SheetNames[ae],W++));var z=0;for(ae=0;ae<L.SheetNames.length;++ae){var re=L.Sheets[L.SheetNames[ae]];if(!(!re||!re["!ref"])){for(var ne=Zr(re["!ref"]),ie=Array.isArray(re),oe=[],ye=Math.min(ne.e.r,8191),M=ne.s.r;M<=ye;++M)for(var ge=ii(M),ee=ne.s.c;ee<=ne.e.c;++ee){M===ne.s.r&&(oe[ee]=hi(ee));var k=oe[ee]+ge,B=ie?(re[M]||[])[ee]:re[k];if(!(!B||B.t=="z"))if(B.t=="n")wt(se,23,R(M,ee,z,B.v));else{var Q=Ys(B);wt(se,22,T(M,ee,z,Q.slice(0,239)))}}++z}}return wt(se,1),se.end()}function s(L){var X=Je(2);return X.write_shift(2,L),X}function o(L){var X=Je(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var V=0,se=0,ae=0,W=0;W<L.SheetNames.length;++W){var z=L.SheetNames[W],re=L.Sheets[z];if(!(!re||!re["!ref"])){++ae;var ne=ra(re["!ref"]);V<ne.e.r&&(V=ne.e.r),se<ne.e.c&&(se=ne.e.c)}}return V>8191&&(V=8191),X.write_shift(2,V),X.write_shift(1,ae),X.write_shift(1,se),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function l(L,X,V){var se={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&V.qpro?(se.s.c=L.read_shift(1),L.l++,se.s.r=L.read_shift(2),se.e.c=L.read_shift(1),L.l++,se.e.r=L.read_shift(2),se):(se.s.c=L.read_shift(2),se.s.r=L.read_shift(2),X==12&&V.qpro&&(L.l+=2),se.e.c=L.read_shift(2),se.e.r=L.read_shift(2),X==12&&V.qpro&&(L.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function u(L){var X=Je(8);return X.write_shift(2,L.s.c),X.write_shift(2,L.s.r),X.write_shift(2,L.e.c),X.write_shift(2,L.e.r),X}function c(L,X,V){var se=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(se[0].c=L.read_shift(1),se[3]=L.read_shift(1),se[0].r=L.read_shift(2),L.l+=2):(se[2]=L.read_shift(1),se[0].c=L.read_shift(2),se[0].r=L.read_shift(2)),se}function d(L,X,V){var se=L.l+X,ae=c(L,X,V);if(ae[1].t="s",V.vers==20768){L.l++;var W=L.read_shift(1);return ae[1].v=L.read_shift(W,"utf8"),ae}return V.qpro&&L.l++,ae[1].v=L.read_shift(se-L.l,"cstr"),ae}function h(L,X,V){var se=Je(7+V.length);se.write_shift(1,255),se.write_shift(2,X),se.write_shift(2,L),se.write_shift(1,39);for(var ae=0;ae<se.length;++ae){var W=V.charCodeAt(ae);se.write_shift(1,W>=128?95:W)}return se.write_shift(1,0),se}function g(L,X,V){var se=c(L,X,V);return se[1].v=L.read_shift(2,"i"),se}function m(L,X,V){var se=Je(7);return se.write_shift(1,255),se.write_shift(2,X),se.write_shift(2,L),se.write_shift(2,V,"i"),se}function v(L,X,V){var se=c(L,X,V);return se[1].v=L.read_shift(8,"f"),se}function x(L,X,V){var se=Je(13);return se.write_shift(1,255),se.write_shift(2,X),se.write_shift(2,L),se.write_shift(8,V,"f"),se}function b(L,X,V){var se=L.l+X,ae=c(L,X,V);if(ae[1].v=L.read_shift(8,"f"),V.qpro)L.l=se;else{var W=L.read_shift(2);N(L.slice(L.l,L.l+W),ae),L.l+=W}return ae}function y(L,X,V){var se=X&32768;return X&=-32769,X=(se?L:0)+(X>=8192?X-16384:X),(se?"":"$")+(V?hi(X):ii(X))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(L,X){Zi(L,0);for(var V=[],se=0,ae="",W="",z="",re="";L.l<L.length;){var ne=L[L.l++];switch(ne){case 0:V.push(L.read_shift(8,"f"));break;case 1:W=y(X[0].c,L.read_shift(2),!0),ae=y(X[0].r,L.read_shift(2),!1),V.push(W+ae);break;case 2:{var ie=y(X[0].c,L.read_shift(2),!0),oe=y(X[0].r,L.read_shift(2),!1);W=y(X[0].c,L.read_shift(2),!0),ae=y(X[0].r,L.read_shift(2),!1),V.push(ie+oe+":"+W+ae)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(L.read_shift(2));break;case 6:{for(var ye="";ne=L[L.l++];)ye+=String.fromCharCode(ne);V.push('"'+ye.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:re=V.pop(),z=V.pop(),V.push(["AND","OR"][ne-20]+"("+z+","+re+")");break;default:if(ne<32&&_[ne])re=V.pop(),z=V.pop(),V.push(z+_[ne]+re);else if(S[ne]){if(se=S[ne][1],se==69&&(se=L[L.l++]),se>V.length){console.error("WK1 bad formula parse 0x"+ne.toString(16)+":|"+V.join("|")+"|");return}var M=V.slice(-se);V.length-=se,V.push(S[ne][0]+"("+M.join(",")+")")}else return ne<=7?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=24?console.error("WK1 unsupported op "+ne.toString(16)):ne<=30?console.error("WK1 invalid opcode "+ne.toString(16)):ne<=115?console.error("WK1 unsupported function opcode "+ne.toString(16)):console.error("WK1 unrecognized opcode "+ne.toString(16))}}V.length==1?X[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function j(L){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=L.read_shift(2),X[3]=L[L.l++],X[0].c=L[L.l++],X}function E(L,X){var V=j(L);return V[1].t="s",V[1].v=L.read_shift(X-4,"cstr"),V}function T(L,X,V,se){var ae=Je(6+se.length);ae.write_shift(2,L),ae.write_shift(1,V),ae.write_shift(1,X),ae.write_shift(1,39);for(var W=0;W<se.length;++W){var z=se.charCodeAt(W);ae.write_shift(1,z>=128?95:z)}return ae.write_shift(1,0),ae}function F(L,X){var V=j(L);V[1].v=L.read_shift(2);var se=V[1].v>>1;if(V[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return V[1].v=se,V}function A(L,X){var V=j(L),se=L.read_shift(4),ae=L.read_shift(4),W=L.read_shift(2);if(W==65535)return se===0&&ae===3221225472?(V[1].t="e",V[1].v=15):se===0&&ae===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var z=W&32768;return W=(W&32767)-16446,V[1].v=(1-z*2)*(ae*Math.pow(2,W+32)+se*Math.pow(2,W)),V}function R(L,X,V,se){var ae=Je(14);if(ae.write_shift(2,L),ae.write_shift(1,V),ae.write_shift(1,X),se==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var W=0,z=0,re=0,ne=0;return se<0&&(W=1,se=-se),z=Math.log2(se)|0,se/=Math.pow(2,z-31),ne=se>>>0,(ne&2147483648)==0&&(se/=2,++z,ne=se>>>0),se-=ne,ne|=2147483648,ne>>>=0,se*=Math.pow(2,32),re=se>>>0,ae.write_shift(4,re),ae.write_shift(4,ne),z+=16383+(W?32768:0),ae.write_shift(2,z),ae}function I(L,X){var V=A(L);return L.l+=X-14,V}function O(L,X){var V=j(L),se=L.read_shift(4);return V[1].v=se>>6,V}function U(L,X){var V=j(L),se=L.read_shift(8,"f");return V[1].v=se,V}function D(L,X){var V=U(L);return L.l+=X-10,V}function H(L,X){return L[L.l+X-1]==0?L.read_shift(X,"cstr"):""}function P(L,X){var V=L[L.l++];V>X-1&&(V=X-1);for(var se="";se.length<V;)se+=String.fromCharCode(L[L.l++]);return se}function G(L,X,V){if(!(!V.qpro||X<21)){var se=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ae=L.read_shift(X-21,"cstr");return[se,ae]}}function ue(L,X){for(var V={},se=L.l+X;L.l<se;){var ae=L.read_shift(2);if(ae==14e3){for(V[ae]=[0,""],V[ae][0]=L.read_shift(2);L[L.l];)V[ae][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return V}function le(L,X){var V=Je(5+L.length);V.write_shift(2,14e3),V.write_shift(2,X);for(var se=0;se<L.length;++se){var ae=L.charCodeAt(se);V[V.l++]=ae>127?95:ae}return V[V.l++]=0,V}var pe={0:{n:"BOF",f:EC},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:P},65535:{n:""}},de={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:F},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ue},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:D},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:G},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}(),Yz=/^\s|\s$|[\t\n\r]/;function MC(r,e){if(!e.bookSST)return"";var t=[jn];t[t.length]=bt("sst",null,{xmlns:Ou[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var a=r[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(Yz)&&(s+=' xml:space="preserve"'),s+=">"+Br(a.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function Zz(r){return[r.read_shift(4),r.read_shift(4)]}function Jz(r,e){return e||(e=Je(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var eP=HI;function tP(r){var e=Ri();lt(e,159,Jz(r));for(var t=0;t<r.length;++t)lt(e,19,eP(r[t]));return lt(e,160),e.end()}function rP(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function FC(r){var e=0,t,n=rP(r),a=n.length+1,s,o,l,u,c;for(t=Pl(a),t[0]=n.length,s=1;s!=a;++s)t[s]=n[s-1];for(s=a-1;s>=0;--s)o=t[s],l=(e&16384)===0?0:1,u=e<<1&32767,c=l|u,e=c^o;return e^52811}var nP=function(){function r(a,s){switch(s.type){case"base64":return e(Xs(a),s);case"binary":return e(a,s);case"buffer":return e(Sr&&Buffer.isBuffer(a)?a.toString("binary"):Rf(a),s);case"array":return e(pp(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},u=a.match(/\\trowd.*?\\row\b/g);if(!u.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:u.length-1}};return u.forEach(function(d,h){Array.isArray(l)&&(l[h]=[]);for(var g=/\\\w+\b/g,m=0,v,x=-1;v=g.exec(d);){switch(v[0]){case"\\cell":var b=d.slice(m,g.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][x]=y:l[Rr({r:h,c:x})]=y}break}m=g.lastIndex}x>c.e.c&&(c.e.c=x)}),l["!ref"]=Nn(c),l}function t(a,s){return Ql(r(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=Zr(a["!ref"]),l,u=Array.isArray(a),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var h=Rr({r:c,c:d});l=u?(a[c]||[])[d]:a[h],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(Ys(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}}();function H3(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var iP=6,Qs=iP;function Nm(r){return Math.floor((r+Math.round(128/Qs)/256)*Qs)}function Sm(r){return Math.floor((r-5)/Qs*100+.5)/100}function yy(r){return Math.round((r*Qs+5)/Qs*256)/256}function bb(r){r.width?(r.wpx=Nm(r.width),r.wch=Sm(r.wpx),r.MDW=Qs):r.wpx?(r.wch=Sm(r.wpx),r.width=yy(r.wch),r.MDW=Qs):typeof r.wch=="number"&&(r.width=yy(r.wch),r.wpx=Nm(r.width),r.MDW=Qs),r.customWidth&&delete r.customWidth}var aP=96,OC=aP;function jm(r){return r*96/OC}function BC(r){return r*OC/96}function sP(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=bt("numFmt",null,{numFmtId:n,formatCode:Br(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=bt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function oP(r){var e=[];return e[e.length]=bt("cellXfs",null),r.forEach(function(t){e[e.length]=bt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=bt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function RC(r,e){var t=[jn,bt("styleSheet",null,{xmlns:Ou[0],"xmlns:vt":qn.vt})],n;return r.SSF&&(n=sP(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=oP(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function lP(r,e){var t=r.read_shift(2),n=mi(r);return[t,n]}function cP(r,e,t){t||(t=Je(6+4*e.length)),t.write_shift(2,r),Un(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function uP(r,e,t){var n={};n.sz=r.read_shift(2)/20;var a=YI(r);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=r.read_shift(2);switch(s===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=r.read_shift(1);o!=0&&(n.underline=o);var l=r.read_shift(1);l>0&&(n.family=l);var u=r.read_shift(1);switch(u>0&&(n.charset=u),r.l++,n.color=XI(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=mi(r),n}function dP(r,e){e||(e=Je(153)),e.write_shift(2,r.sz*20),ZI(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),wm(r.color,e);var n=0;return n=2,e.write_shift(1,n),Un(r.name,e),e.length>e.l?e.slice(0,e.l):e}var fP=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],q1,hP=gs;function V3(r,e){e||(e=Je(84)),q1||(q1=lb(fP));var t=q1[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(wm({auto:1},e),wm({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function mP(r,e){var t=r.l+e,n=r.read_shift(2),a=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:a}}function LC(r,e,t){t||(t=Je(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Xd(r,e){return e||(e=Je(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var pP=gs;function gP(r,e){return e||(e=Je(51)),e.write_shift(1,0),Xd(null,e),Xd(null,e),Xd(null,e),Xd(null,e),Xd(null,e),e.length>e.l?e.slice(0,e.l):e}function xP(r,e){return e||(e=Je(52)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),bm(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function vP(r,e,t){var n=Je(2052);return n.write_shift(4,r),bm(e,n),bm(t,n),n.length>n.l?n.slice(0,n.l):n}function yP(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++t}),t!=0&&(lt(r,615,Ga(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&lt(r,44,cP(a,e[a]))}),lt(r,616))}}function bP(r){var e=1;lt(r,611,Ga(e)),lt(r,43,dP({sz:12,color:{theme:1},name:"Calibri",family:2})),lt(r,612)}function wP(r){var e=2;lt(r,603,Ga(e)),lt(r,45,V3({patternType:"none"})),lt(r,45,V3({patternType:"gray125"})),lt(r,604)}function _P(r){var e=1;lt(r,613,Ga(e)),lt(r,46,gP()),lt(r,614)}function NP(r){var e=1;lt(r,626,Ga(e)),lt(r,47,LC({numFmtId:0},65535)),lt(r,627)}function SP(r,e){lt(r,617,Ga(e.length)),e.forEach(function(t){lt(r,47,LC(t,0))}),lt(r,618)}function jP(r){var e=1;lt(r,619,Ga(e)),lt(r,48,xP({xfId:0,name:"Normal"})),lt(r,620)}function EP(r){var e=0;lt(r,505,Ga(e)),lt(r,506)}function AP(r){var e=0;lt(r,508,vP(e,"TableStyleMedium9","PivotStyleMedium4")),lt(r,509)}function TP(r,e){var t=Ri();return lt(t,278),yP(t,r.SSF),bP(t),wP(t),_P(t),NP(t),SP(t,e.cellXfs),jP(t),EP(t),AP(t),lt(t,279),t.end()}function IC(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[jn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function CP(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:mi(r)}}function DP(r){var e=Je(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Un(r.name,e),e.slice(0,e.l)}function kP(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function MP(r){var e=Je(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function FP(r,e){var t=Je(8+2*e.length);return t.write_shift(4,r),Un(e,t),t.slice(0,t.l)}function OP(r){return r.l+=4,r.read_shift(4)!=0}function BP(r,e){var t=Je(8);return t.write_shift(4,r),t.write_shift(4,1),t}function RP(){var r=Ri();return lt(r,332),lt(r,334,Ga(1)),lt(r,335,DP({name:"XLDAPR",version:12e4,flags:3496657072})),lt(r,336),lt(r,339,FP(1,"XLDAPR")),lt(r,52),lt(r,35,Ga(514)),lt(r,4096,Ga(0)),lt(r,4097,ba(1)),lt(r,36),lt(r,53),lt(r,340),lt(r,337,BP(1)),lt(r,51,MP([[1,0]])),lt(r,338),lt(r,333),r.end()}function zC(){var r=[jn];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function LP(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=Rr(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var nu=1024;function PC(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),a=[bt("xml",null,{"xmlns:v":ea.v,"xmlns:o":ea.o,"xmlns:x":ea.x,"xmlns:mv":ea.mv}).replace(/\/>/,">"),bt("o:shapelayout",bt("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),bt("v:shapetype",[bt("v:stroke",null,{joinstyle:"miter"}),bt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];nu<r*1e3;)nu+=1e3;return e.forEach(function(s){var o=$n(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var u=l.type=="gradient"?bt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=bt("v:fill",u,l),d={on:"t",obscured:"t"};++nu,a=a.concat(["<v:shape"+wf({id:"_x0000_s"+nu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,bt("v:shadow",null,d),bt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ti("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),ti("x:AutoFill","False"),ti("x:Row",String(o.r)),ti("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function qC(r){var e=[jn,bt("comments",null,{xmlns:Ou[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(a){var s=Br(a.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&t.indexOf("tc="+a.ID)==-1&&(t.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(u){u.a&&(a=t.indexOf(Br(u.a))),s.push(u.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(ti("t",Br(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(ti("t",Br(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function IP(r,e,t){var n=[jn,bt("ThreadedComments",null,{xmlns:qn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var u={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};l==0?s=u.id:u.parentId=s,o.ID=u.id,o.a&&(u.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(bt("threadedComment",ti("text",o.t||""),u))})}),n.push("</ThreadedComments>"),n.join("")}function zP(r){var e=[jn,bt("personList",null,{xmlns:qn.TCMNT,"xmlns:x":Ou[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(bt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function PP(r){var e={};e.iauthor=r.read_shift(4);var t=Yl(r);return e.rfx=t.s,e.ref=Rr(t.s),r.l+=16,e}function qP(r,e){return e==null&&(e=Je(36)),e.write_shift(4,r[1].iauthor),Ru(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var $P=mi;function UP(r){return Un(r.slice(0,54))}function HP(r){var e=Ri(),t=[];return lt(e,628),lt(e,630),r.forEach(function(n){n[1].forEach(function(a){t.indexOf(a.a)>-1||(t.push(a.a.slice(0,54)),lt(e,632,UP(a.a)))})}),lt(e,631),lt(e,633),r.forEach(function(n){n[1].forEach(function(a){a.iauthor=t.indexOf(a.a);var s={s:$n(n[0]),e:$n(n[0])};lt(e,635,qP([s,a])),a.t&&a.t.length>0&&lt(e,637,GI(a)),lt(e,636),delete a.iauthor})}),lt(e,634),lt(e,629),e.end()}function VP(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var a=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Ur.utils.cfb_add(r,a,e.FileIndex[n].content)}})}var $C=["xlsb","xlsm","xlam","biff8","xla"],GP=function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,a,s,o){var l=!1,u=!1;s.length==0?u=!0:s.charAt(0)=="["&&(u=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,u?c+=e.r:--c,a+(l?"":"$")+hi(d)+(u?"":"$")+ii(c)}return function(a,s){return e=s,a.replace(r,t)}}(),wb=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_b=function(){return function(e,t){return e.replace(wb,function(n,a,s,o,l,u){var c=pb(o)-(s?0:t.c),d=mb(u)-(l?0:t.r),h=d==0?"":l?d+1:"["+d+"]",g=c==0?"":s?c+1:"["+c+"]";return a+"R"+h+"C"+g})}}();function QP(r,e){return r.replace(wb,function(t,n,a,s,o,l){return n+(a=="$"?a+s:hi(pb(s)+e.c))+(o=="$"?o+l:ii(mb(l)+e.r))})}function WP(r){return r.length!=1}function wn(r){r.l+=1}function Vo(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function UC(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return HC(r);t.biff==12&&(n=4)}var a=r.read_shift(n),s=r.read_shift(n),o=Vo(r),l=Vo(r);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function HC(r){var e=Vo(r),t=Vo(r),n=r.read_shift(1),a=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:a,cRel:t[1],rRel:t[2]}}}function KP(r,e,t){if(t.biff<8)return HC(r);var n=r.read_shift(t.biff==12?4:2),a=r.read_shift(t.biff==12?4:2),s=Vo(r),o=Vo(r);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function VC(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return XP(r);var n=r.read_shift(t&&t.biff==12?4:2),a=Vo(r);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function XP(r){var e=Vo(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function YP(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function ZP(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return JP(r);var a=r.read_shift(n>=12?4:2),s=r.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function JP(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:a,rRel:n}}function eq(r,e,t){var n=(r[r.l++]&96)>>5,a=UC(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,a]}function tq(r,e,t){var n=(r[r.l++]&96)>>5,a=r.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}var o=UC(r,s,t);return[n,a,o]}function rq(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function nq(r,e,t){var n=(r[r.l++]&96)>>5,a=r.read_shift(2),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}return r.l+=s,[n,a]}function iq(r,e,t){var n=(r[r.l++]&96)>>5,a=KP(r,e-1,t);return[n,a]}function aq(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function G3(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function sq(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(r.read_shift(t&&t.biff==2?1:2));return a}function oq(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function lq(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function cq(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function uq(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function GC(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function dq(r){return r.read_shift(2),GC(r)}function fq(r){return r.read_shift(2),GC(r)}function hq(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var a=VC(r,0,t);return[n,a]}function mq(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var a=ZP(r,0,t);return[n,a]}function pq(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var a=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var s=VC(r,0,t);return[n,a,s]}function gq(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var a=r.read_shift(t&&t.biff<=3?1:2);return[g$[a],KC[a],n]}function xq(r,e,t){var n=r[r.l++],a=r.read_shift(1),s=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:vq(r);return[a,(s[0]===0?KC:p$)[s[1]]]}function vq(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function yq(r,e,t){r.l+=t&&t.biff==2?3:4}function bq(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),a=r.read_shift(t&&t.biff==2?1:2);return[n,a]}function wq(r){return r.l++,zf[r.read_shift(1)]}function _q(r){return r.l++,r.read_shift(2)}function Nq(r){return r.l++,r.read_shift(1)!==0}function Sq(r){return r.l++,Lu(r)}function jq(r,e,t){return r.l++,TC(r,e-1,t)}function Eq(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=pz(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=zf[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Lu(r);break;case 2:t[1]=yz(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Aq(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((t.biff==12?Yl:_z)(r));return a}function Tq(r,e,t){var n=0,a=0;t.biff==12?(n=r.read_shift(4),a=r.read_shift(4)):(a=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=Eq(r,t.biff);return o}function Cq(r,e,t){var n=r.read_shift(1)>>>5&3,a=!t||t.biff>=8?4:2,s=r.read_shift(a);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,s]}function Dq(r,e,t){if(t.biff==5)return kq(r);var n=r.read_shift(1)>>>5&3,a=r.read_shift(2),s=r.read_shift(4);return[n,a,s]}function kq(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function Mq(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var a=r.read_shift(t&&t.biff==2?1:2);return[n,a]}function Fq(r,e,t){var n=r.read_shift(1)>>>5&3,a=r.read_shift(t&&t.biff==2?1:2);return[n,a]}function Oq(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function Bq(r,e,t){var n=(r[r.l++]&96)>>5,a=r.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return r.l+=s,[n,a]}var Rq=gs,Lq=gs,Iq=gs;function Pf(r,e,t){return r.l+=2,[YP(r)]}function Nb(r){return r.l+=6,[]}var zq=Pf,Pq=Nb,qq=Nb,$q=Pf;function QC(r){return r.l+=2,[EC(r),r.read_shift(2)&1]}var Uq=Pf,Hq=QC,Vq=Nb,Gq=Pf,Qq=Pf,Wq=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Kq(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),a=r.read_shift(2),s=r.read_shift(2),o=Wq[t>>2&31];return{ixti:e,coltype:t&3,rt:o,idx:n,c:a,C:s}}function Xq(r){return r.l+=2,[r.read_shift(4)]}function Yq(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function Zq(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Jq(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function e$(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function t$(r){return r.l+=4,[0,0]}var Q3={1:{n:"PtgExp",f:bq},2:{n:"PtgTbl",f:Iq},3:{n:"PtgAdd",f:wn},4:{n:"PtgSub",f:wn},5:{n:"PtgMul",f:wn},6:{n:"PtgDiv",f:wn},7:{n:"PtgPower",f:wn},8:{n:"PtgConcat",f:wn},9:{n:"PtgLt",f:wn},10:{n:"PtgLe",f:wn},11:{n:"PtgEq",f:wn},12:{n:"PtgGe",f:wn},13:{n:"PtgGt",f:wn},14:{n:"PtgNe",f:wn},15:{n:"PtgIsect",f:wn},16:{n:"PtgUnion",f:wn},17:{n:"PtgRange",f:wn},18:{n:"PtgUplus",f:wn},19:{n:"PtgUminus",f:wn},20:{n:"PtgPercent",f:wn},21:{n:"PtgParen",f:wn},22:{n:"PtgMissArg",f:wn},23:{n:"PtgStr",f:jq},26:{n:"PtgSheet",f:Yq},27:{n:"PtgEndSheet",f:Zq},28:{n:"PtgErr",f:wq},29:{n:"PtgBool",f:Nq},30:{n:"PtgInt",f:_q},31:{n:"PtgNum",f:Sq},32:{n:"PtgArray",f:aq},33:{n:"PtgFunc",f:gq},34:{n:"PtgFuncVar",f:xq},35:{n:"PtgName",f:Cq},36:{n:"PtgRef",f:hq},37:{n:"PtgArea",f:eq},38:{n:"PtgMemArea",f:Mq},39:{n:"PtgMemErr",f:Rq},40:{n:"PtgMemNoMem",f:Lq},41:{n:"PtgMemFunc",f:Fq},42:{n:"PtgRefErr",f:Oq},43:{n:"PtgAreaErr",f:rq},44:{n:"PtgRefN",f:mq},45:{n:"PtgAreaN",f:iq},46:{n:"PtgMemAreaN",f:Jq},47:{n:"PtgMemNoMemN",f:e$},57:{n:"PtgNameX",f:Dq},58:{n:"PtgRef3d",f:pq},59:{n:"PtgArea3d",f:tq},60:{n:"PtgRefErr3d",f:Bq},61:{n:"PtgAreaErr3d",f:nq},255:{}},r$={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},n$={1:{n:"PtgElfLel",f:QC},2:{n:"PtgElfRw",f:Gq},3:{n:"PtgElfCol",f:zq},6:{n:"PtgElfRwV",f:Qq},7:{n:"PtgElfColV",f:$q},10:{n:"PtgElfRadical",f:Uq},11:{n:"PtgElfRadicalS",f:Vq},13:{n:"PtgElfColS",f:Pq},15:{n:"PtgElfColSV",f:qq},16:{n:"PtgElfRadicalLel",f:Hq},25:{n:"PtgList",f:Kq},29:{n:"PtgSxName",f:Xq},255:{}},i$={0:{n:"PtgAttrNoop",f:t$},1:{n:"PtgAttrSemi",f:uq},2:{n:"PtgAttrIf",f:lq},4:{n:"PtgAttrChoose",f:sq},8:{n:"PtgAttrGoto",f:oq},16:{n:"PtgAttrSum",f:yq},32:{n:"PtgAttrBaxcel",f:G3},33:{n:"PtgAttrBaxcel",f:G3},64:{n:"PtgAttrSpace",f:dq},65:{n:"PtgAttrSpaceSemi",f:fq},128:{n:"PtgAttrIfError",f:cq},255:{}};function a$(r,e,t,n){if(n.biff<8)return gs(r,e);for(var a=r.l+e,s=[],o=0;o!==t.length;++o)switch(t[o][0]){case"PtgArray":t[o][1]=Tq(r,0,n),s.push(t[o][1]);break;case"PtgMemArea":t[o][2]=Aq(r,t[o][1],n),s.push(t[o][2]);break;case"PtgExp":n&&n.biff==12&&(t[o][1][1]=r.read_shift(4),s.push(t[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[o][0]}return e=a-r.l,e!==0&&s.push(gs(r,e)),s}function s$(r,e,t){for(var n=r.l+e,a,s,o=[];n!=r.l;)e=n-r.l,s=r[r.l],a=Q3[s]||Q3[r$[s]],(s===24||s===25)&&(a=(s===24?n$:i$)[r[r.l+1]]),!a||!a.f?gs(r,e):o.push([a.n,a.f(r,e,t)]);return o}function o$(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var l$={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function c$(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function WC(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(t.biff>8)switch(r[n[0]][0]){case 357:return a=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?a:a+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return r[n[0]][0][3]?(a=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function W3(r,e,t){var n=WC(r,e,t);return n=="#REF"?n:c$(n,t)}function Su(r,e,t,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],u,c,d,h=0,g=0,m,v="";if(!r[0]||!r[0][0])return"";for(var x=-1,b="",y=0,S=r[0].length;y<S;++y){var _=r[0][y];switch(_[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(u=l.pop(),c=l.pop(),x>=0){switch(r[0][x][1][0]){case 0:b=cn(" ",r[0][x][1][1]);break;case 1:b=cn("\r",r[0][x][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][x][1][0])}c=c+b,x=-1}l.push(c+l$[_[0]]+u);break;case"PtgIsect":u=l.pop(),c=l.pop(),l.push(c+" "+u);break;case"PtgUnion":u=l.pop(),c=l.pop(),l.push(c+","+u);break;case"PtgRange":u=l.pop(),c=l.pop(),l.push(c+":"+u);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=df(_[1][1],o,a),l.push(ff(d,s));break;case"PtgRefN":d=t?df(_[1][1],t,a):_[1][1],l.push(ff(d,s));break;case"PtgRef3d":h=_[1][1],d=df(_[1][2],o,a),v=W3(n,h,a),l.push(v+"!"+ff(d,s));break;case"PtgFunc":case"PtgFuncVar":var N=_[1][0],j=_[1][1];N||(N=0),N&=127;var E=N==0?[]:l.slice(-N);l.length-=N,j==="User"&&(j=E.shift()),l.push(j+"("+E.join(",")+")");break;case"PtgBool":l.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(_[1]);break;case"PtgNum":l.push(String(_[1]));break;case"PtgStr":l.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(_[1]);break;case"PtgAreaN":m=M3(_[1][1],t?{s:t}:o,a),l.push(z1(m,a));break;case"PtgArea":m=M3(_[1][1],o,a),l.push(z1(m,a));break;case"PtgArea3d":h=_[1][1],m=_[1][2],v=W3(n,h,a),l.push(v+"!"+z1(m,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=_[1][2];var T=(n.names||[])[g-1]||(n[0]||[])[g],F=T?T.Name:"SH33TJSNAME"+String(g);F&&F.slice(0,6)=="_xlfn."&&!a.xlfn&&(F=F.slice(6)),l.push(F);break;case"PtgNameX":var A=_[1][1];g=_[1][2];var R;if(a.biff<=5)A<0&&(A=-A),n[A]&&(R=n[A][g]);else{var I="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][g]&&n[A][g].itab>0&&(I=n.SheetNames[n[A][g].itab-1]+"!"):I=n.SheetNames[g-1]+"!"),n[A]&&n[A][g])I+=n[A][g].Name;else if(n[0]&&n[0][g])I+=n[0][g].Name;else{var O=(WC(n,A,a)||"").split(";;");O[g-1]?I=O[g-1]:I+="SH33TJSERRX"}l.push(I);break}R||(R={Name:"SH33TJSERRY"}),l.push(R.Name);break;case"PtgParen":var U="(",D=")";if(x>=0){switch(b="",r[0][x][1][0]){case 2:U=cn(" ",r[0][x][1][1])+U;break;case 3:U=cn("\r",r[0][x][1][1])+U;break;case 4:D=cn(" ",r[0][x][1][1])+D;break;case 5:D=cn("\r",r[0][x][1][1])+D;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][x][1][0])}x=-1}l.push(U+l.pop()+D);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var H={c:t.c,r:t.r};if(n.sharedf[Rr(d)]){var P=n.sharedf[Rr(d)];l.push(Su(P,o,H,n,a))}else{var G=!1;for(u=0;u!=n.arrayf.length;++u)if(c=n.arrayf[u],!(d.c<c[0].s.c||d.c>c[0].e.c)&&!(d.r<c[0].s.r||d.r>c[0].e.r)){l.push(Su(c[1],o,H,n,a)),G=!0;break}G||l.push(_[1])}break;case"PtgArray":l.push("{"+o$(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var ue=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&ue.indexOf(r[0][y][0])==-1){_=r[0][x];var le=!0;switch(_[1][0]){case 4:le=!1;case 0:b=cn(" ",_[1][1]);break;case 5:le=!1;case 1:b=cn("\r",_[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}l.push((le?b:"")+l.pop()+(le?"":b)),x=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function u$(r){if(r==null){var e=Je(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return ql(r);return ql(0)}function d$(r,e,t,n,a){var s=$l(e,t,a),o=u$(r.v),l=Je(6),u=33;l.write_shift(2,u),l.write_shift(4,0);for(var c=Je(r.bf.length),d=0;d<r.bf.length;++d)c[d]=r.bf[d];var h=ei([s,o,l,c]);return h}function gp(r,e,t){var n=r.read_shift(4),a=s$(r,n,t),s=r.read_shift(4),o=s>0?a$(r,s,a,t):null;return[a,o]}var f$=gp,xp=gp,h$=gp,m$=gp,p$={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},KC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},g$={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function x$(r){var e="of:="+r.replace(wb,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function v$(r){return r.replace(/\./,"!")}var hf=typeof Map<"u";function Sb(r,e,t){var n=0,a=r.length;if(t){if(hf?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=hf?t.get(e):t[e];n<s.length;++n)if(r[s[n]].t===e)return r.Count++,s[n]}}else for(;n<a;++n)if(r[n].t===e)return r.Count++,n;return r[a]={t:e},r.Count++,r.Unique++,t&&(hf?(t.has(e)||t.set(e,[]),t.get(e).push(a)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(a))),a}function vp(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(Qs=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=Sm(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=yy(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function XC(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function Jo(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],a=60,s=r.length;if(n==null&&t.ssf){for(;a<392;++a)if(t.ssf[a]==null){VT(e.z,a),t.ssf[a]=e.z,t.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(r[a].numFmtId===n)return a;return r[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function y$(r,e,t){if(r&&r["!ref"]){var n=Zr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function b$(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+Nn(r[t])+'"/>';return e+"</mergeCells>"}function w$(r,e,t,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var u=e.SheetNames[t];try{e.Workbook&&(u=e.Workbook.Sheets[t].CodeName||u)}catch{}s=!0,o.codeName=bf(Br(u))}if(r&&r["!outline"]){var c={summaryBelow:1,summaryRight:1};r["!outline"].above&&(c.summaryBelow=0),r["!outline"].left&&(c.summaryRight=0),l=(l||"")+bt("outlinePr",null,c)}!s&&!l||(a[a.length]=bt("sheetPr",l,o))}var _$=["objects","scenarios","selectLockedCells","selectUnlockedCells"],N$=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function S$(r){var e={sheet:1};return _$.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),N$.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=FC(r.password).toString(16).toUpperCase()),bt("sheetProtection",null,e)}function j$(r){return XC(r),bt("pageMargins",null,r)}function E$(r,e){for(var t=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(t[t.length]=bt("col",null,vp(a,n)));return t[t.length]="</cols>",t.join("")}function A$(r,e,t,n){var a=typeof r.ref=="string"?r.ref:Nn(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,o=ra(a);o.s.r==o.e.r&&(o.e.r=ra(e["!ref"]).e.r,a=Nn(o));for(var l=0;l<s.length;++l){var u=s[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+t.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+a}),bt("autoFilter",null,{ref:a})}function T$(r,e,t,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),bt("sheetViews",bt("sheetView",null,a),{})}function C$(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var a="",s=r.t,o=r.v;if(r.t!=="z")switch(r.t){case"b":a=r.v?"1":"0";break;case"n":a=""+r.v;break;case"e":a=zf[r.v];break;case"d":n&&n.cellDates?a=_i(r.v,-1).toISOString():(r=qi(r),r.t="n",a=""+(r.v=Pi(_i(r.v)))),typeof r.z>"u"&&(r.z=un[14]);break;default:a=r.v;break}var l=ti("v",Br(a)),u={r:e},c=Jo(n.cellXfs,r,n);switch(c!==0&&(u.s=c),r.t){case"n":break;case"d":u.t="d";break;case"b":u.t="b";break;case"e":u.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=ti("v",""+Sb(n.Strings,r.v,n.revStrings)),u.t="s";break}u.t="str";break}if(r.t!=s&&(r.t=s,r.v=o),typeof r.f=="string"&&r.f){var d=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;l=bt("f",Br(r.f),d)+(r.v!=null?l:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(u.cm=1),bt("c",l,u)}function D$(r,e,t,n){var a=[],s=[],o=Zr(r["!ref"]),l="",u,c="",d=[],h=0,g=0,m=r["!rows"],v=Array.isArray(r),x={r:c},b,y=-1;for(g=o.s.c;g<=o.e.c;++g)d[g]=hi(g);for(h=o.s.r;h<=o.e.r;++h){for(s=[],c=ii(h),g=o.s.c;g<=o.e.c;++g){u=d[g]+c;var S=v?(r[h]||[])[g]:r[u];S!==void 0&&(l=C$(S,u,r,e))!=null&&s.push(l)}(s.length>0||m&&m[h])&&(x={r:c},m&&m[h]&&(b=m[h],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=jm(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),a[a.length]=bt("row",s.join(""),x))}if(m)for(;h<m.length;++h)m&&m[h]&&(x={r:h+1},b=m[h],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=jm(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level),a[a.length]=bt("row","",x));return a.join("")}function YC(r,e,t,n){var a=[jn,bt("worksheet",null,{xmlns:Ou[0],"xmlns:r":qn.r})],s=t.SheetNames[r],o=0,l="",u=t.Sheets[s];u==null&&(u={});var c=u["!ref"]||"A1",d=Zr(c);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),c=Nn(d)}n||(n={}),u["!comments"]=[];var h=[];w$(u,t,r,e,a),a[a.length]=bt("dimension",null,{ref:c}),a[a.length]=T$(u,e,r,t),e.sheetFormat&&(a[a.length]=bt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),u["!cols"]!=null&&u["!cols"].length>0&&(a[a.length]=E$(u,u["!cols"])),a[o=a.length]="<sheetData/>",u["!links"]=[],u["!ref"]!=null&&(l=D$(u,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),u["!protect"]&&(a[a.length]=S$(u["!protect"])),u["!autofilter"]!=null&&(a[a.length]=A$(u["!autofilter"],u,t,r)),u["!merges"]!=null&&u["!merges"].length>0&&(a[a.length]=b$(u["!merges"]));var g=-1,m,v=-1;return u["!links"].length>0&&(a[a.length]="<hyperlinks>",u["!links"].forEach(function(x){x[1].Target&&(m={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=kr(n,-1,Br(x[1].Target).replace(/#.*$/,""),wr.HLINK),m["r:id"]="rId"+v),(g=x[1].Target.indexOf("#"))>-1&&(m.location=Br(x[1].Target.slice(g+1))),x[1].Tooltip&&(m.tooltip=Br(x[1].Tooltip)),a[a.length]=bt("hyperlink",null,m))}),a[a.length]="</hyperlinks>"),delete u["!links"],u["!margins"]!=null&&(a[a.length]=j$(u["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=ti("ignoredErrors",bt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(v=kr(n,-1,"../drawings/drawing"+(r+1)+".xml",wr.DRAW),a[a.length]=bt("drawing",null,{"r:id":"rId"+v}),u["!drawing"]=h),u["!comments"].length>0&&(v=kr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",wr.VML),a[a.length]=bt("legacyDrawing",null,{"r:id":"rId"+v}),u["!legacy"]=v),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function k$(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var a=r.read_shift(2);r.l+=1;var s=r.read_shift(1);return r.l=n,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=a/20),t}function M$(r,e,t){var n=Je(145),a=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var s=320;a.hpx?s=jm(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,u=n.l;n.l+=4;for(var c={r,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,g=-1,m=d<<10;m<d+1<<10;++m){c.c=m;var v=Array.isArray(t)?(t[c.r]||[])[c.c]:t[Rr(c)];v&&(h<0&&(h=m),g=m)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,g))}var x=n.l;return n.l=u,n.write_shift(4,l),n.l=x,n.length>n.l?n.slice(0,n.l):n}function F$(r,e,t,n){var a=M$(n,t,e);(a.length>17||(e["!rows"]||[])[n])&&lt(r,0,a)}var O$=Yl,B$=Ru;function R$(){}function L$(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=QI(r),t}function I$(r,e,t){t==null&&(t=Je(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var a=1;a<3;++a)t.write_shift(1,0);return wm({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),fC(r,t),t.slice(0,t.l)}function z$(r){var e=Aa(r);return[e]}function P$(r,e,t){return t==null&&(t=Je(8)),Wl(e,t)}function q$(r){var e=Kl(r);return[e]}function $$(r,e,t){return t==null&&(t=Je(4)),Xl(e,t)}function U$(r){var e=Aa(r),t=r.read_shift(1);return[e,t,"b"]}function H$(r,e,t){return t==null&&(t=Je(9)),Wl(e,t),t.write_shift(1,r.v?1:0),t}function V$(r){var e=Kl(r),t=r.read_shift(1);return[e,t,"b"]}function G$(r,e,t){return t==null&&(t=Je(5)),Xl(e,t),t.write_shift(1,r.v?1:0),t}function Q$(r){var e=Aa(r),t=r.read_shift(1);return[e,t,"e"]}function W$(r,e,t){return t==null&&(t=Je(9)),Wl(e,t),t.write_shift(1,r.v),t}function K$(r){var e=Kl(r),t=r.read_shift(1);return[e,t,"e"]}function X$(r,e,t){return t==null&&(t=Je(8)),Xl(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function Y$(r){var e=Aa(r),t=r.read_shift(4);return[e,t,"s"]}function Z$(r,e,t){return t==null&&(t=Je(12)),Wl(e,t),t.write_shift(4,e.v),t}function J$(r){var e=Kl(r),t=r.read_shift(4);return[e,t,"s"]}function eU(r,e,t){return t==null&&(t=Je(8)),Xl(e,t),t.write_shift(4,e.v),t}function tU(r){var e=Aa(r),t=Lu(r);return[e,t,"n"]}function rU(r,e,t){return t==null&&(t=Je(16)),Wl(e,t),ql(r.v,t),t}function nU(r){var e=Kl(r),t=Lu(r);return[e,t,"n"]}function iU(r,e,t){return t==null&&(t=Je(12)),Xl(e,t),ql(r.v,t),t}function aU(r){var e=Aa(r),t=hC(r);return[e,t,"n"]}function sU(r,e,t){return t==null&&(t=Je(12)),Wl(e,t),mC(r.v,t),t}function oU(r){var e=Kl(r),t=hC(r);return[e,t,"n"]}function lU(r,e,t){return t==null&&(t=Je(8)),Xl(e,t),mC(r.v,t),t}function cU(r){var e=Aa(r),t=gb(r);return[e,t,"is"]}function uU(r){var e=Aa(r),t=mi(r);return[e,t,"str"]}function dU(r,e,t){return t==null&&(t=Je(12+4*r.v.length)),Wl(e,t),Un(r.v,t),t.length>t.l?t.slice(0,t.l):t}function fU(r){var e=Kl(r),t=mi(r);return[e,t,"str"]}function hU(r,e,t){return t==null&&(t=Je(8+4*r.v.length)),Xl(e,t),Un(r.v,t),t.length>t.l?t.slice(0,t.l):t}function mU(r,e,t){var n=r.l+e,a=Aa(r);a.r=t["!row"];var s=r.read_shift(1),o=[a,s,"b"];if(t.cellFormula){r.l+=2;var l=xp(r,n-r.l,t);o[3]=Su(l,null,a,t.supbooks,t)}else r.l=n;return o}function pU(r,e,t){var n=r.l+e,a=Aa(r);a.r=t["!row"];var s=r.read_shift(1),o=[a,s,"e"];if(t.cellFormula){r.l+=2;var l=xp(r,n-r.l,t);o[3]=Su(l,null,a,t.supbooks,t)}else r.l=n;return o}function gU(r,e,t){var n=r.l+e,a=Aa(r);a.r=t["!row"];var s=Lu(r),o=[a,s,"n"];if(t.cellFormula){r.l+=2;var l=xp(r,n-r.l,t);o[3]=Su(l,null,a,t.supbooks,t)}else r.l=n;return o}function xU(r,e,t){var n=r.l+e,a=Aa(r);a.r=t["!row"];var s=mi(r),o=[a,s,"str"];if(t.cellFormula){r.l+=2;var l=xp(r,n-r.l,t);o[3]=Su(l,null,a,t.supbooks,t)}else r.l=n;return o}var vU=Yl,yU=Ru;function bU(r,e){return e==null&&(e=Je(4)),e.write_shift(4,r),e}function wU(r,e){var t=r.l+e,n=Yl(r),a=xb(r),s=mi(r),o=mi(r),l=mi(r);r.l=t;var u={rfx:n,relId:a,loc:s,display:l};return o&&(u.Tooltip=o),u}function _U(r,e){var t=Je(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));Ru({s:$n(r[0]),e:$n(r[0])},t),vb("rId"+e,t);var n=r[1].Target.indexOf("#"),a=n==-1?"":r[1].Target.slice(n+1);return Un(a||"",t),Un(r[1].Tooltip||"",t),Un("",t),t.slice(0,t.l)}function NU(){}function SU(r,e,t){var n=r.l+e,a=pC(r),s=r.read_shift(1),o=[a];if(o[2]=s,t.cellFormula){var l=f$(r,n-r.l,t);o[1]=l}else r.l=n;return o}function jU(r,e,t){var n=r.l+e,a=Yl(r),s=[a];if(t.cellFormula){var o=m$(r,n-r.l,t);s[1]=o,r.l=n}else r.l=n;return s}function EU(r,e,t){t==null&&(t=Je(18));var n=vp(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),t.write_shift(2,a),t}var ZC=["left","right","top","bottom","header","footer"];function AU(r){var e={};return ZC.forEach(function(t){e[t]=Lu(r)}),e}function TU(r,e){return e==null&&(e=Je(48)),XC(r),ZC.forEach(function(t){ql(r[t],e)}),e}function CU(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function DU(r,e,t){t==null&&(t=Je(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function kU(r){var e=Je(24);return e.write_shift(4,4),e.write_shift(4,1),Ru(r,e),e}function MU(r,e){return e==null&&(e=Je(66)),e.write_shift(2,r.password?FC(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function FU(){}function OU(){}function BU(r,e,t,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=qi(e),e.z=e.z||un[14],e.v=Pi(_i(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var u={r:t,c:n};switch(u.s=Jo(a.cellXfs,e,a),e.l&&s["!links"].push([Rr(u),e.l]),e.c&&s["!comments"].push([Rr(u),e.c]),e.t){case"s":case"str":return a.bookSST?(l=Sb(a.Strings,e.v,a.revStrings),u.t="s",u.v=l,o?lt(r,18,eU(e,u)):lt(r,7,Z$(e,u))):(u.t="str",o?lt(r,17,hU(e,u)):lt(r,6,dU(e,u))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?lt(r,13,lU(e,u)):lt(r,2,sU(e,u)):o?lt(r,16,iU(e,u)):lt(r,5,rU(e,u)),!0;case"b":return u.t="b",o?lt(r,15,G$(e,u)):lt(r,4,H$(e,u)),!0;case"e":return u.t="e",o?lt(r,14,X$(e,u)):lt(r,3,W$(e,u)),!0}return o?lt(r,12,$$(e,u)):lt(r,1,P$(e,u)),!0}function RU(r,e,t,n){var a=Zr(e["!ref"]||"A1"),s,o="",l=[];lt(r,145);var u=Array.isArray(e),c=a.e.r;e["!rows"]&&(c=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=c;++d){o=ii(d),F$(r,e,a,d);var h=!1;if(d<=a.e.r)for(var g=a.s.c;g<=a.e.c;++g){d===a.s.r&&(l[g]=hi(g)),s=l[g]+o;var m=u?(e[d]||[])[g]:e[s];if(!m){h=!1;continue}h=BU(r,m,d,g,n,e,h)}}lt(r,146)}function LU(r,e){!e||!e["!merges"]||(lt(r,177,bU(e["!merges"].length)),e["!merges"].forEach(function(t){lt(r,176,yU(t))}),lt(r,178))}function IU(r,e){!e||!e["!cols"]||(lt(r,390),e["!cols"].forEach(function(t,n){t&&lt(r,60,EU(n,t))}),lt(r,391))}function zU(r,e){!e||!e["!ref"]||(lt(r,648),lt(r,649,kU(Zr(e["!ref"]))),lt(r,650))}function PU(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var a=kr(t,-1,n[1].Target.replace(/#.*$/,""),wr.HLINK);lt(r,494,_U(n,a))}}),delete e["!links"]}function qU(r,e,t,n){if(e["!comments"].length>0){var a=kr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",wr.VML);lt(r,551,vb("rId"+a)),e["!legacy"]=a}}function $U(r,e,t,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:Nn(a.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,l=ra(s);l.s.r==l.e.r&&(l.e.r=ra(e["!ref"]).e.r,s=Nn(l));for(var u=0;u<o.length;++u){var c=o[u];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+t.SheetNames[n]+"'!"+s;break}}u==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),lt(r,161,Ru(Zr(s))),lt(r,162)}}function UU(r,e,t){lt(r,133),lt(r,137,DU(e,t)),lt(r,138),lt(r,134)}function HU(r,e){e["!protect"]&&lt(r,535,MU(e["!protect"]))}function VU(r,e,t,n){var a=Ri(),s=t.SheetNames[r],o=t.Sheets[s]||{},l=s;try{t&&t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}var u=Zr(o["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],lt(a,129),(t.vbaraw||o["!outline"])&&lt(a,147,I$(l,o["!outline"])),lt(a,148,B$(u)),UU(a,o,t.Workbook),IU(a,o),RU(a,o,r,e),HU(a,o),$U(a,o,t,r),LU(a,o),PU(a,o,n),o["!margins"]&&lt(a,476,TU(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&zU(a,o),qU(a,o,r,n),lt(a,130),a.end()}function GU(r,e){r.l+=10;var t=mi(r);return{name:t}}var QU=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function WU(r){return!r.Workbook||!r.Workbook.WBProps?"false":jI(r.Workbook.WBProps.date1904)?"true":"false"}var KU="][*?/\\".split("");function JC(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return KU.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function XU(r,e,t){r.forEach(function(n,a){JC(n);for(var s=0;s<a;++s)if(n==r[s])throw new Error("Duplicate Sheet Name: "+n);if(t){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function YU(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];XU(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)y$(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function eD(r){var e=[jn];e[e.length]=bt("workbook",null,{xmlns:Ou[0],"xmlns:r":qn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(QU.forEach(function(l){r.Workbook.WBProps[l[0]]!=null&&r.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=r.Workbook.WBProps[l[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=bt("workbookPr",null,n);var a=r.Workbook&&r.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=r.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==r.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=r.SheetNames.length;++s){var o={name:Br(r.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=bt("sheet",null,o)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(l){var u={name:l.Name};l.Comment&&(u.comment=l.Comment),l.Sheet!=null&&(u.localSheetId=""+l.Sheet),l.Hidden&&(u.hidden="1"),l.Ref&&(e[e.length]=bt("definedName",Br(l.Ref),u))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function ZU(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=vy(r),t.name=mi(r),t}function JU(r,e){return e||(e=Je(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),vb(r.strRelID,e),Un(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function eH(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var a=e>8?mi(r):"";return a.length>0&&(t.CodeName=a),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function tH(r,e){e||(e=Je(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),fC(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function rH(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var a=r.read_shift(4),s=WI(r),o=h$(r,0,t),l=xb(r);r.l=n;var u={Name:s,Ptg:o};return a<268435455&&(u.Sheet=a),l&&(u.Comment=l),u}function nH(r,e){lt(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,a={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};lt(r,156,JU(a))}lt(r,144)}function iH(r,e){e||(e=Je(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Un("SheetJS",e),Un(hm.version,e),Un(hm.version,e),Un("7262",e),e.length>e.l?e.slice(0,e.l):e}function aH(r,e){e||(e=Je(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function sH(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,a=-1,s=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&a==-1?a=n:t[n].Hidden==1&&s==-1&&(s=n);s>a||(lt(r,135),lt(r,158,aH(a)),lt(r,136))}}function oH(r,e){var t=Ri();return lt(t,131),lt(t,128,iH()),lt(t,153,tH(r.Workbook&&r.Workbook.WBProps||null)),sH(t,r),nH(t,r),lt(t,132),t.end()}function lH(r,e,t){return(e.slice(-4)===".bin"?oH:eD)(r)}function cH(r,e,t,n,a){return(e.slice(-4)===".bin"?VU:YC)(r,t,n,a)}function uH(r,e,t){return(e.slice(-4)===".bin"?TP:RC)(r,t)}function dH(r,e,t){return(e.slice(-4)===".bin"?tP:MC)(r,t)}function fH(r,e,t){return(e.slice(-4)===".bin"?HP:qC)(r)}function hH(r){return(r.slice(-4)===".bin"?RP:zC)()}function mH(r,e){var t=[];return r.Props&&t.push(uz(r.Props,e)),r.Custprops&&t.push(dz(r.Props,r.Custprops)),t.join("")}function pH(){return""}function gH(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(bt("NumberFormat",null,{"ss:Format":Br(un[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};t.push(bt("Style",s.join(""),o))}),bt("Styles",t.join(""))}function tD(r){return bt("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+_b(r.Ref,{r:0,c:0})})}function xH(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||t.push(tD(a)))}return bt("Names",t.join(""))}function vH(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==t&&(l.Name.match(/^_xlfn\./)||s.push(tD(l)))}return s.join("")}function yH(r,e,t,n){if(!r)return"";var a=[];if(r["!margins"]&&(a.push("<PageSetup>"),r["!margins"].header&&a.push(bt("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&a.push(bt("Footer",null,{"x:Margin":r["!margins"].footer})),a.push(bt("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)a.push(bt("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==t&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),r["!protect"]&&(a.push(ti("ProtectContents","True")),r["!protect"].objects&&a.push(ti("ProtectObjects","True")),r["!protect"].scenarios&&a.push(ti("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?a.push(ti("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&a.push(ti("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){r["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":bt("WorksheetOptions",a.join(""),{xmlns:ea.x})}function bH(r){return r.map(function(e){var t=SI(e.t||""),n=bt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return bt("Comment",n,{"ss:Author":e.a})}).join("")}function wH(r,e,t,n,a,s,o){if(!r||r.v==null&&r.f==null)return"";var l={};if(r.f&&(l["ss:Formula"]="="+Br(_b(r.f,o))),r.F&&r.F.slice(0,e.length)==e){var u=$n(r.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(u.r==o.r?"":"["+(u.r-o.r)+"]")+"C"+(u.c==o.c?"":"["+(u.c-o.c)+"]")}if(r.l&&r.l.Target&&(l["ss:HRef"]=Br(r.l.Target),r.l.Tooltip&&(l["x:HRefScreenTip"]=Br(r.l.Tooltip))),t["!merges"])for(var c=t["!merges"],d=0;d!=c.length;++d)c[d].s.c!=o.c||c[d].s.r!=o.r||(c[d].e.c>c[d].s.c&&(l["ss:MergeAcross"]=c[d].e.c-c[d].s.c),c[d].e.r>c[d].s.r&&(l["ss:MergeDown"]=c[d].e.r-c[d].s.r));var h="",g="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",g=String(r.v);break;case"b":h="Boolean",g=r.v?"1":"0";break;case"e":h="Error",g=zf[r.v];break;case"d":h="DateTime",g=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||un[14]);break;case"s":h="String",g=NI(r.v||"");break}var m=Jo(n.cellXfs,r,n);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var v=r.v!=null?g:"",x=r.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(r.c||[]).length>0&&(x+=bH(r.c)),bt("Cell",x,l)}function _H(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=BC(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function NH(r,e,t,n){if(!r["!ref"])return"";var a=Zr(r["!ref"]),s=r["!merges"]||[],o=0,l=[];r["!cols"]&&r["!cols"].forEach(function(b,y){bb(b);var S=!!b.width,_=vp(y,b),N={"ss:Index":y+1};S&&(N["ss:Width"]=Nm(_.width)),b.hidden&&(N["ss:Hidden"]="1"),l.push(bt("Column",null,N))});for(var u=Array.isArray(r),c=a.s.r;c<=a.e.r;++c){for(var d=[_H(c,(r["!rows"]||[])[c])],h=a.s.c;h<=a.e.c;++h){var g=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(g=!0);break}if(!g){var m={r:c,c:h},v=Rr(m),x=u?(r[c]||[])[h]:r[v];d.push(wH(x,v,r,e,t,n,m))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function SH(r,e,t){var n=[],a=t.SheetNames[r],s=t.Sheets[a],o=s?vH(s,e,r,t):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?NH(s,e,r,t):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(yH(s,e,r,t)),n.join("")}function jH(r,e){e||(e={}),r.SSF||(r.SSF=qi(un)),r.SSF&&(hp(),fp(r.SSF),e.revssf=mp(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],Jo(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(mH(r,e)),t.push(pH()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(bt("Worksheet",SH(n,e,r),{"ss:Name":Br(r.SheetNames[n])}));return t[2]=gH(r,e),t[3]=xH(r),jn+bt("Workbook",t.join(""),{xmlns:ea.ss,"xmlns:o":ea.o,"xmlns:x":ea.x,"xmlns:ss":ea.ss,"xmlns:dt":ea.dt,"xmlns:html":ea.html})}var $1={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function EH(r,e){var t=[],n=[],a=[],s=0,o,l=w3(O3,"n"),u=w3(B3,"n");if(r.Props)for(o=si(r.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?t:Object.prototype.hasOwnProperty.call(u,o[s])?n:a).push([o[s],r.Props[o[s]]]);if(r.Custprops)for(o=si(r.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(r.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?t:Object.prototype.hasOwnProperty.call(u,o[s])?n:a).push([o[s],r.Custprops[o[s]]]);var c=[];for(s=0;s<a.length;++s)jC.indexOf(a[s][0])>-1||_C.indexOf(a[s][0])>-1||a[s][1]!=null&&c.push(a[s]);n.length&&Ur.utils.cfb_add(e,"/SummaryInformation",P3(n,$1.SI,u,B3)),(t.length||c.length)&&Ur.utils.cfb_add(e,"/DocumentSummaryInformation",P3(t,$1.DSI,l,O3,c.length?c:null,$1.UDI))}function AH(r,e){var t=e||{},n=Ur.utils.cfb_new({root:"R"}),a="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":a="/Workbook",t.biff=8;break;case"biff5":a="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Ur.utils.cfb_add(n,a,rD(r,t)),t.biff==8&&(r.Props||r.Custprops)&&EH(r,n),t.biff==8&&r.vbaraw&&VP(n,Ur.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var TH={0:{f:k$},1:{f:z$},2:{f:aU},3:{f:Q$},4:{f:U$},5:{f:tU},6:{f:uU},7:{f:Y$},8:{f:xU},9:{f:gU},10:{f:mU},11:{f:pU},12:{f:q$},13:{f:oU},14:{f:K$},15:{f:V$},16:{f:nU},17:{f:fU},18:{f:J$},19:{f:gb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:rH},40:{},42:{},43:{f:uP},44:{f:lP},45:{f:hP},46:{f:pP},47:{f:mP},48:{},49:{f:qI},50:{},51:{f:kP},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$z},62:{f:cU},63:{f:LP},64:{f:FU},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:gs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:CU},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:L$},148:{f:O$,p:16},151:{f:NU},152:{},153:{f:eH},154:{},155:{},156:{f:ZU},157:{},158:{},159:{T:1,f:Zz},160:{T:-1},161:{T:1,f:Yl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:vU},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:CP},336:{T:-1},337:{f:OP,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:vy},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Rz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:SU},427:{f:jU},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:AU},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:R$},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:wU},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:vy},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$P},633:{T:1},634:{T:-1},635:{T:1,f:PP},636:{T:-1},637:{f:VI},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:GU},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:OU},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function wt(r,e,t,n){var a=e;if(!isNaN(a)){var s=n||(t||[]).length||0,o=r.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&hb(t)&&r.push(t)}}function CH(r,e,t,n){var a=(t||[]).length||0;if(a<=8224)return wt(r,e,t,a);var s=e;if(!isNaN(s)){for(var o=t.parts||[],l=0,u=0,c=0;c+(o[l]||8224)<=8224;)c+=o[l]||8224,l++;var d=r.next(4);for(d.write_shift(2,s),d.write_shift(2,c),r.push(t.slice(u,u+c)),u+=c;u<a;){for(d=r.next(4),d.write_shift(2,60),c=0;c+(o[l]||8224)<=8224;)c+=o[l]||8224,l++;d.write_shift(2,c),r.push(t.slice(u,u+c)),u+=c}}}function qf(r,e,t){return r||(r=Je(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function DH(r,e,t,n){var a=Je(9);return qf(a,r,e),AC(t,n||"b",a),a}function kH(r,e,t){var n=Je(8+2*t.length);return qf(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function MH(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Pi(_i(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?wt(r,2,Gz(t,n,a)):wt(r,3,Vz(t,n,a));return;case"b":case"e":wt(r,5,DH(t,n,e.v,e.t));return;case"s":case"str":wt(r,4,kH(t,n,(e.v||"").slice(0,255)));return}wt(r,1,qf(null,t,n))}function FH(r,e,t,n){var a=Array.isArray(e),s=Zr(e["!ref"]||"A1"),o,l="",u=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Nn(s)}for(var c=s.s.r;c<=s.e.r;++c){l=ii(c);for(var d=s.s.c;d<=s.e.c;++d){c===s.s.r&&(u[d]=hi(d)),o=u[d]+l;var h=a?(e[c]||[])[d]:e[o];h&&MH(r,h,c,d)}}}function OH(r,e){for(var t=e||{},n=Ri(),a=0,s=0;s<r.SheetNames.length;++s)r.SheetNames[s]==t.sheet&&(a=s);if(a==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return wt(n,t.biff==4?1033:t.biff==3?521:9,yb(r,16,t)),FH(n,r.Sheets[r.SheetNames[a]],a,t),wt(n,10),n.end()}function BH(r,e,t){wt(r,49,Tz({sz:12,name:"Arial"},t))}function RH(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&wt(r,1054,kz(a,e[a],t))})}function LH(r,e){var t=Je(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),wt(r,2151,t),t=Je(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),DC(Zr(e["!ref"]||"A1"),t),t.write_shift(4,4),wt(r,2152,t)}function IH(r,e){for(var t=0;t<16;++t)wt(r,224,$3({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){wt(r,224,$3(n,0,e))})}function zH(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];wt(r,440,zz(n)),n[1].Tooltip&&wt(r,2048,Pz(n))}delete e["!links"]}function PH(r,e){if(e){var t=0;e.forEach(function(n,a){++t<=256&&n&&wt(r,125,Uz(vp(a,n),a))})}}function qH(r,e,t,n,a){var s=16+Jo(a.cellXfs,e,a);if(e.v==null&&!e.bf){wt(r,513,$l(t,n,s));return}if(e.bf)wt(r,6,d$(e,t,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Pi(_i(e.v)):e.v;wt(r,515,Bz(t,n,o,s));break;case"b":case"e":wt(r,517,Oz(t,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=Sb(a.Strings,e.v,a.revStrings);wt(r,253,Cz(t,n,l,s))}else wt(r,516,Dz(t,n,(e.v||"").slice(0,255),s,a));break;default:wt(r,513,$l(t,n,s))}}function $H(r,e,t){var n=Ri(),a=t.SheetNames[r],s=t.Sheets[a]||{},o=(t||{}).Workbook||{},l=(o.Sheets||[])[r]||{},u=Array.isArray(s),c=e.biff==8,d,h="",g=[],m=Zr(s["!ref"]||"A1"),v=c?65536:16384;if(m.e.c>255||m.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,v-1)}wt(n,2057,yb(t,16,e)),wt(n,13,ba(1)),wt(n,12,ba(100)),wt(n,15,wi(!0)),wt(n,17,wi(!1)),wt(n,16,ql(.001)),wt(n,95,wi(!0)),wt(n,42,wi(!1)),wt(n,43,wi(!1)),wt(n,130,ba(1)),wt(n,128,Fz()),wt(n,131,wi(!1)),wt(n,132,wi(!1)),c&&PH(n,s["!cols"]),wt(n,512,Mz(m,e)),c&&(s["!links"]=[]);for(var x=m.s.r;x<=m.e.r;++x){h=ii(x);for(var b=m.s.c;b<=m.e.c;++b){x===m.s.r&&(g[b]=hi(b)),d=g[b]+h;var y=u?(s[x]||[])[b]:s[d];y&&(qH(n,y,x,b,e),c&&y.l&&s["!links"].push([d,y.l]))}}var S=l.CodeName||l.name||a;return c&&wt(n,574,Az((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&wt(n,229,Iz(s["!merges"])),c&&zH(n,s),wt(n,442,CC(S)),c&&LH(n,s),wt(n,10),n.end()}function UH(r,e,t){var n=Ri(),a=(r||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=t.biff==8,u=t.biff==5;if(wt(n,2057,yb(r,5,t)),t.bookType=="xla"&&wt(n,135),wt(n,225,l?ba(1200):null),wt(n,193,mz(2)),u&&wt(n,191),u&&wt(n,192),wt(n,226),wt(n,92,Nz("SheetJS",t)),wt(n,66,ba(l?1200:1252)),l&&wt(n,353,ba(0)),l&&wt(n,448),wt(n,317,Hz(r.SheetNames.length)),l&&r.vbaraw&&wt(n,211),l&&r.vbaraw){var c=o.CodeName||"ThisWorkbook";wt(n,442,CC(c))}wt(n,156,ba(17)),wt(n,25,wi(!1)),wt(n,18,wi(!1)),wt(n,19,ba(0)),l&&wt(n,431,wi(!1)),l&&wt(n,444,ba(0)),wt(n,61,Ez()),wt(n,64,wi(!1)),wt(n,141,ba(0)),wt(n,34,wi(WU(r)=="true")),wt(n,14,wi(!0)),l&&wt(n,439,wi(!1)),wt(n,218,ba(0)),BH(n,r,t),RH(n,r.SSF,t),IH(n,t),l&&wt(n,352,wi(!1));var d=n.end(),h=Ri();l&&wt(h,140,qz()),l&&t.Strings&&CH(h,252,jz(t.Strings)),wt(h,10);var g=h.end(),m=Ri(),v=0,x=0;for(x=0;x<r.SheetNames.length;++x)v+=(l?12:11)+(l?2:1)*r.SheetNames[x].length;var b=d.length+v+g.length;for(x=0;x<r.SheetNames.length;++x){var y=s[x]||{};wt(m,133,Sz({pos:b,hs:y.Hidden||0,dt:0,name:r.SheetNames[x]},t)),b+=e[x].length}var S=m.end();if(v!=S.length)throw new Error("BS8 "+v+" != "+S.length);var _=[];return d.length&&_.push(d),S.length&&_.push(S),g.length&&_.push(g),ei(_)}function HH(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=qi(un)),r&&r.SSF&&(hp(),fp(r.SSF),t.revssf=mp(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,jb(t),t.cellXfs=[],Jo(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var a=0;a<r.SheetNames.length;++a)n[n.length]=$H(a,t,r);return n.unshift(UH(r,n,t)),ei(n)}function rD(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var a=ra(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return HH(r,e);case 4:case 3:case 2:return OH(r,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function VH(r,e,t,n){for(var a=r["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,u=0,c=0;c<a.length;++c)if(!(a[c].s.r>t||a[c].s.c>o)&&!(a[c].e.r<t||a[c].e.c<o)){if(a[c].s.r<t||a[c].s.c<o){l=-1;break}l=a[c].e.r-a[c].s.r+1,u=a[c].e.c-a[c].s.c+1;break}if(!(l<0)){var d=Rr({r:t,c:o}),h=n.dense?(r[t]||[])[o]:r[d],g=h&&h.v!=null&&(h.h||_I(h.w||(Ys(h),h.w)||""))||"",m={};l>1&&(m.rowspan=l),u>1&&(m.colspan=u),n.editable?g='<span contenteditable="true">'+g+"</span>":h&&(m["data-t"]=h&&h.t||"z",h.v!=null&&(m["data-v"]=h.v),h.z!=null&&(m["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+h.l.Target+'">'+g+"</a>")),m.id=(n.id||"sjs")+"-"+d,s.push(bt("td",g,m))}}var v="<tr>";return v+s.join("")+"</tr>"}var GH='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',QH="</body></html>";function WH(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function nD(r,e){var t=e||{},n=t.header!=null?t.header:GH,a=t.footer!=null?t.footer:QH,s=[n],o=ra(r["!ref"]);t.dense=Array.isArray(r),s.push(WH(r,o,t));for(var l=o.s.r;l<=o.e.r;++l)s.push(VH(r,o,l,t));return s.push("</table>"+a),s.join("")}function iD(r,e,t){var n=t||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?$n(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),u=Math.min(n.sheetRows||1e7,l.length),c={s:{r:0,c:0},e:{r:a,c:s}};if(r["!ref"]){var d=ra(r["!ref"]);c.s.r=Math.min(c.s.r,d.s.r),c.s.c=Math.min(c.s.c,d.s.c),c.e.r=Math.max(c.e.r,d.e.r),c.e.c=Math.max(c.e.c,d.e.c),a==-1&&(c.e.r=a=d.e.r+1)}var h=[],g=0,m=r["!rows"]||(r["!rows"]=[]),v=0,x=0,b=0,y=0,S=0,_=0;for(r["!cols"]||(r["!cols"]=[]);v<l.length&&x<u;++v){var N=l[v];if(K3(N)){if(n.display)continue;m[x]={hidden:!0}}var j=N.children;for(b=y=0;b<j.length;++b){var E=j[b];if(!(n.display&&K3(E))){var T=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):EI(E.innerHTML),F=E.getAttribute("data-z")||E.getAttribute("z");for(g=0;g<h.length;++g){var A=h[g];A.s.c==y+s&&A.s.r<x+a&&x+a<=A.e.r&&(y=A.e.c+1-s,g=-1)}_=+E.getAttribute("colspan")||1,((S=+E.getAttribute("rowspan")||1)>1||_>1)&&h.push({s:{r:x+a,c:y+s},e:{r:x+a+(S||1)-1,c:y+s+(_||1)-1}});var R={t:"s",v:T},I=E.getAttribute("data-t")||E.getAttribute("t")||"";T!=null&&(T.length==0?R.t=I||"z":n.raw||T.trim().length==0||I=="s"||(T==="TRUE"?R={t:"b",v:!0}:T==="FALSE"?R={t:"b",v:!1}:isNaN(Gs(T))?isNaN(yf(T).getDate())||(R={t:"d",v:_i(T)},n.cellDates||(R={t:"n",v:Pi(R.v)}),R.z=n.dateNF||un[14]):R={t:"n",v:Gs(T)})),R.z===void 0&&F!=null&&(R.z=F);var O="",U=E.getElementsByTagName("A");if(U&&U.length)for(var D=0;D<U.length&&!(U[D].hasAttribute("href")&&(O=U[D].getAttribute("href"),O.charAt(0)!="#"));++D);O&&O.charAt(0)!="#"&&(R.l={Target:O}),n.dense?(r[x+a]||(r[x+a]=[]),r[x+a][y+s]=R):r[Rr({c:y+s,r:x+a})]=R,c.e.c<y+s&&(c.e.c=y+s),y+=_}}++x}return h.length&&(r["!merges"]=(r["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,x-1+a),r["!ref"]=Nn(c),x>=u&&(r["!fullref"]=Nn((c.e.r=l.length-v+x-1+a,c))),r}function aD(r,e){var t=e||{},n=t.dense?[]:{};return iD(n,r,e)}function KH(r,e){return Ql(aD(r,e),e)}function K3(r){var e="",t=XH(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function XH(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var YH=function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+wf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return jn+e}}(),X3=function(){var r=function(s){return Br(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(s,o,l){var u=[];u.push('      <table:table table:name="'+Br(o.SheetNames[l])+`" table:style-name="ta1">
`);var c=0,d=0,h=ra(s["!ref"]||"A1"),g=s["!merges"]||[],m=0,v=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)u.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(c=0;c<h.s.r;++c)x=b[c]?' table:style-name="ro'+b[c].ods+'"':"",u.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=h.e.r;++c){for(x=b[c]?' table:style-name="ro'+b[c].ods+'"':"",u.push("        <table:table-row"+x+`>
`),d=0;d<h.s.c;++d)u.push(e);for(;d<=h.e.c;++d){var y=!1,S={},_="";for(m=0;m!=g.length;++m)if(!(g[m].s.c>d)&&!(g[m].s.r>c)&&!(g[m].e.c<d)&&!(g[m].e.r<c)){(g[m].s.c!=d||g[m].s.r!=c)&&(y=!0),S["table:number-columns-spanned"]=g[m].e.c-g[m].s.c+1,S["table:number-rows-spanned"]=g[m].e.r-g[m].s.r+1;break}if(y){u.push(t);continue}var N=Rr({r:c,c:d}),j=v?(s[c]||[])[d]:s[N];if(j&&j.f&&(S["table:formula"]=Br(x$(j.f)),j.F&&j.F.slice(0,N.length)==N)){var E=ra(j.F);S["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,S["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!j){u.push(e);continue}switch(j.t){case"b":_=j.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=j.v?"true":"false";break;case"n":_=j.w||String(j.v||0),S["office:value-type"]="float",S["office:value"]=j.v||0;break;case"s":case"str":_=j.v==null?"":j.v,S["office:value-type"]="string";break;case"d":_=j.w||_i(j.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=_i(j.v).toISOString(),S["table:style-name"]="ce1";break;default:u.push(e);continue}var T=r(_);if(j.l&&j.l.Target){var F=j.l.Target;F=F.charAt(0)=="#"?"#"+v$(F.slice(1)):F,F.charAt(0)!="#"&&!F.match(/^\w+:/)&&(F="../"+F),T=bt("text:a",T,{"xlink:href":F.replace(/&/g,"&amp;")})}u.push("          "+bt("table:table-cell",bt("text:p",T,{}),S)+`
`)}u.push(`        </table:table-row>
`)}return u.push(`      </table:table>
`),u.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var d=0;d<c["!cols"].length;++d)if(c["!cols"][d]){var h=c["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;bb(h),h.ods=l;var g=c["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++l}}});var u=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var d=0;d<c["!rows"].length;++d)if(c["!rows"][d]){c["!rows"][d].ods=u;var h=c["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+u+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++u}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var u=[jn],c=wf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=wf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(u.push("<office:document"+c+d+`>
`),u.push(bC().replace(/office:document-meta/g,"office:meta"))):u.push("<office:document-content"+c+`>
`),a(u,o),u.push(`  <office:body>
`),u.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)u.push(n(o.Sheets[o.SheetNames[h]],o,h));return u.push(`    </office:spreadsheet>
`),u.push(`  </office:body>
`),l.bookType=="fods"?u.push("</office:document>"):u.push("</office:document-content>"),u.join("")}}();function sD(r,e){if(e.bookType=="fods")return X3(r,e);var t=cb(),n="",a=[],s=[];return n="mimetype",rr(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",rr(t,n,X3(r,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",rr(t,n,YH(r,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",rr(t,n,jn+bC()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",rr(t,n,cz(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",rr(t,n,oz(a)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Em(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function ZH(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Ua(bf(r))}function JH(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function Go(r){var e=r.reduce(function(a,s){return a+s.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(a){t.set(a,n),n+=a.length}),t}function eV(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,a=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)r[e+s]=a&255;r[e+15]|=t>=0?0:128}function _f(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function Dr(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function hu(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function Tn(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],a=_f(r,t),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var u=t[0];r[t[0]++]>=128;);l=r.slice(u,t[0])}break;case 5:o=4,l=r.slice(t[0],t[0]+o),t[0]+=o;break;case 1:o=8,l=r.slice(t[0],t[0]+o),t[0]+=o;break;case 2:o=_f(r,t),l=r.slice(t[0],t[0]+o),t[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var c={data:l,type:s};e[a]==null?e[a]=[c]:e[a].push(c)}return e}function Xn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(a){a.data&&(e.push(Dr(n*8+a.type)),a.type==2&&e.push(Dr(a.data.length)),e.push(a.data))})}),Go(e)}function Ia(r){for(var e,t=[],n=[0];n[0]<r.length;){var a=_f(r,n),s=Tn(r.slice(n[0],n[0]+a));n[0]+=a;var o={id:hu(s[1][0].data),messages:[]};s[2].forEach(function(l){var u=Tn(l.data),c=hu(u[3][0].data);o.messages.push({meta:u,data:r.slice(n[0],n[0]+c)}),n[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=hu(s[3][0].data)>>>0>0),t.push(o)}return t}function Vc(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:Dr(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:Dr(+!!t.merge),type:0}]);var a=[];t.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Dr(o.data.length)}],n[2].push({data:Xn(o.meta),type:2})});var s=Xn(n);e.push(Dr(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),Go(e)}function tV(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=_f(e,t),a=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var o=e[t[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[t[0]],l>1&&(o|=e[t[0]+1]<<8),l>2&&(o|=e[t[0]+2]<<16),l>3&&(o|=e[t[0]+3]<<24),o>>>=0,o++,t[0]+=l}a.push(e.slice(t[0],t[0]+o)),t[0]+=o;continue}else{var u=0,c=0;if(s==1?(c=(e[t[0]]>>2&7)+4,u=(e[t[0]++]&224)<<3,u|=e[t[0]++]):(c=(e[t[0]++]>>2)+1,s==2?(u=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(u=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),a=[Go(a)],u==0)throw new Error("Invalid offset 0");if(u>a[0].length)throw new Error("Invalid offset beyond length");if(c>=u)for(a.push(a[0].slice(-u)),c-=u;c>=a[a.length-1].length;)a.push(a[a.length-1]),c-=a[a.length-1].length;a.push(a[0].slice(-u,-u+c))}}var d=Go(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function za(r){for(var e=[],t=0;t<r.length;){var n=r[t++],a=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(tV(n,r.slice(t,t+a))),t+=a}if(t!==r.length)throw new Error("data is not a valid framed stream!");return Go(e)}function Gc(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),a=new Uint8Array(4);e.push(a);var s=Dr(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,t+=n}return Go(e)}function U1(r,e){var t=new Uint8Array(32),n=Em(t),a=12,s=0;switch(t[0]=5,r.t){case"n":t[1]=2,eV(t,a,r.v),s|=1,a+=16;break;case"b":t[1]=6,n.setFloat64(a,r.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(a,e.indexOf(r.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,s,!0),t.slice(0,a)}function H1(r,e){var t=new Uint8Array(32),n=Em(t),a=12,s=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(a,r.v,!0),s|=32,a+=8;break;case"b":t[2]=6,n.setFloat64(a,r.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(a,e.indexOf(r.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,s,!0),t.slice(0,a)}function ko(r){var e=Tn(r);return _f(e[1][0].data)}function rV(r,e,t){var n,a,s,o;if(!((n=r[6])!=null&&n[0])||!((a=r[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=r[8])==null?void 0:s[0])==null?void 0:o.data)&&hu(r[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var u=0,c=Em(r[7][0].data),d=0,h=[],g=Em(r[4][0].data),m=0,v=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),g.setUint16(x*2,65535);continue}c.setUint16(x*2,d,!0),g.setUint16(x*2,m,!0);var b,y;switch(typeof e[x]){case"string":b=U1({t:"s",v:e[x]},t),y=H1({t:"s",v:e[x]},t);break;case"number":b=U1({t:"n",v:e[x]},t),y=H1({t:"n",v:e[x]},t);break;case"boolean":b=U1({t:"b",v:e[x]},t),y=H1({t:"b",v:e[x]},t);break;default:throw new Error("Unsupported value "+e[x])}h.push(b),d+=b.length,v.push(y),m+=y.length,++u}for(r[2][0].data=Dr(u);x<r[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),g.setUint16(x*2,65535,!0);return r[6][0].data=Go(h),r[3][0].data=Go(v),u}function nV(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ra(t["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Nn(n)));var s=Am(t,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(X){return X.forEach(function(V){typeof V=="string"&&o.push(V)})});var l={},u=[],c=Ur.read(e.numbers,{type:"base64"});c.FileIndex.map(function(X,V){return[X,c.FullPaths[V]]}).forEach(function(X){var V=X[0],se=X[1];if(V.type==2&&V.name.match(/\.iwa/)){var ae=V.content,W=za(ae),z=Ia(W);z.forEach(function(re){u.push(re.id),l[re.id]={deps:[],location:se,type:hu(re.messages[0].meta[1][0].data)}})}}),u.sort(function(X,V){return X-V});var d=u.filter(function(X){return X>1}).map(function(X){return[X,Dr(X)]});c.FileIndex.map(function(X,V){return[X,c.FullPaths[V]]}).forEach(function(X){var V=X[0];if(X[1],!!V.name.match(/\.iwa/)){var se=Ia(za(V.content));se.forEach(function(ae){ae.messages.forEach(function(W){d.forEach(function(z){ae.messages.some(function(re){return hu(re.meta[1][0].data)!=11006&&JH(re.data,z[1])})&&l[z[0]].deps.push(ae.id)})})})}});for(var h=Ur.find(c,l[1].location),g=Ia(za(h.content)),m,v=0;v<g.length;++v){var x=g[v];x.id==1&&(m=x)}var b=ko(Tn(m.messages[0].data)[1][0].data);for(h=Ur.find(c,l[b].location),g=Ia(za(h.content)),v=0;v<g.length;++v)x=g[v],x.id==b&&(m=x);for(b=ko(Tn(m.messages[0].data)[2][0].data),h=Ur.find(c,l[b].location),g=Ia(za(h.content)),v=0;v<g.length;++v)x=g[v],x.id==b&&(m=x);for(b=ko(Tn(m.messages[0].data)[2][0].data),h=Ur.find(c,l[b].location),g=Ia(za(h.content)),v=0;v<g.length;++v)x=g[v],x.id==b&&(m=x);var y=Tn(m.messages[0].data);{y[6][0].data=Dr(n.e.r+1),y[7][0].data=Dr(n.e.c+1);var S=ko(y[46][0].data),_=Ur.find(c,l[S].location),N=Ia(za(_.content));{for(var j=0;j<N.length&&N[j].id!=S;++j);if(N[j].id!=S)throw"Bad ColumnRowUIDMapArchive";var E=Tn(N[j].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var T=0;T<=n.e.c;++T){var F=[];F[1]=F[2]=[{type:0,data:Dr(T+420690)}],E[1].push({type:2,data:Xn(F)}),E[2].push({type:0,data:Dr(T)}),E[3].push({type:0,data:Dr(T)})}E[4]=[],E[5]=[],E[6]=[];for(var A=0;A<=n.e.r;++A)F=[],F[1]=F[2]=[{type:0,data:Dr(A+726270)}],E[4].push({type:2,data:Xn(F)}),E[5].push({type:0,data:Dr(A)}),E[6].push({type:0,data:Dr(A)});N[j].messages[0].data=Xn(E)}_.content=Gc(Vc(N)),_.size=_.content.length,delete y[46];var R=Tn(y[4][0].data);{R[7][0].data=Dr(n.e.r+1);var I=Tn(R[1][0].data),O=ko(I[2][0].data);_=Ur.find(c,l[O].location),N=Ia(za(_.content));{if(N[0].id!=O)throw"Bad HeaderStorageBucket";var U=Tn(N[0].messages[0].data);for(A=0;A<s.length;++A){var D=Tn(U[2][0].data);D[1][0].data=Dr(A),D[4][0].data=Dr(s[A].length),U[2][A]={type:U[2][0].type,data:Xn(D)}}N[0].messages[0].data=Xn(U)}_.content=Gc(Vc(N)),_.size=_.content.length;var H=ko(R[2][0].data);_=Ur.find(c,l[H].location),N=Ia(za(_.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";for(U=Tn(N[0].messages[0].data),T=0;T<=n.e.c;++T)D=Tn(U[2][0].data),D[1][0].data=Dr(T),D[4][0].data=Dr(n.e.r+1),U[2][T]={type:U[2][0].type,data:Xn(D)};N[0].messages[0].data=Xn(U)}_.content=Gc(Vc(N)),_.size=_.content.length;var P=ko(R[4][0].data);(function(){for(var X=Ur.find(c,l[P].location),V=Ia(za(X.content)),se,ae=0;ae<V.length;++ae){var W=V[ae];W.id==P&&(se=W)}var z=Tn(se.messages[0].data);{z[3]=[];var re=[];o.forEach(function(oe,ye){re[1]=[{type:0,data:Dr(ye)}],re[2]=[{type:0,data:Dr(1)}],re[3]=[{type:2,data:ZH(oe)}],z[3].push({type:2,data:Xn(re)})})}se.messages[0].data=Xn(z);var ne=Vc(V),ie=Gc(ne);X.content=ie,X.size=X.content.length})();var G=Tn(R[3][0].data);{var ue=G[1][0];delete G[2];var le=Tn(ue.data);{var pe=ko(le[2][0].data);(function(){for(var X=Ur.find(c,l[pe].location),V=Ia(za(X.content)),se,ae=0;ae<V.length;++ae){var W=V[ae];W.id==pe&&(se=W)}var z=Tn(se.messages[0].data);{delete z[6],delete G[7];var re=new Uint8Array(z[5][0].data);z[5]=[];for(var ne=0,ie=0;ie<=n.e.r;++ie){var oe=Tn(re);ne+=rV(oe,s[ie],o),oe[1][0].data=Dr(ie),z[5].push({data:Xn(oe),type:2})}z[1]=[{type:0,data:Dr(n.e.c+1)}],z[2]=[{type:0,data:Dr(n.e.r+1)}],z[3]=[{type:0,data:Dr(ne)}],z[4]=[{type:0,data:Dr(n.e.r+1)}]}se.messages[0].data=Xn(z);var ye=Vc(V),M=Gc(ye);X.content=M,X.size=X.content.length})()}ue.data=Xn(le)}R[3][0].data=Xn(G)}y[4][0].data=Xn(R)}m.messages[0].data=Xn(y);var de=Vc(g),L=Gc(de);return h.content=L,h.size=h.content.length,c}function iV(r){return function(t){for(var n=0;n!=r.length;++n){var a=r[n];t[a[0]]===void 0&&(t[a[0]]=a[1]),a[2]==="n"&&(t[a[0]]=Number(t[a[0]]))}}}function jb(r){iV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function aV(r,e){return e.bookType=="ods"?sD(r,e):e.bookType=="numbers"?nV(r,e):e.bookType=="xlsb"?sV(r,e):oV(r,e)}function sV(r,e){nu=1024,r&&!r.SSF&&(r.SSF=qi(un)),r&&r.SSF&&(hp(),fp(r.SSF),e.revssf=mp(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=$C.indexOf(e.bookType)>-1,a=xC();jb(e=e||{});var s=cb(),o="",l=0;if(e.cellXfs=[],Jo(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",rr(s,o,wC(r.Props,e)),a.coreprops.push(o),kr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var u=[],c=0;c<r.SheetNames.length;++c)(r.Workbook.Sheets[c]||{}).Hidden!=2&&u.push(r.SheetNames[c]);r.Props.SheetNames=u}for(r.Props.Worksheets=r.Props.SheetNames.length,rr(s,o,NC(r.Props)),a.extprops.push(o),kr(e.rels,3,o,wr.EXT_PROPS),r.Custprops!==r.Props&&si(r.Custprops||{}).length>0&&(o="docProps/custom.xml",rr(s,o,SC(r.Custprops)),a.custprops.push(o),kr(e.rels,4,o,wr.CUST_PROPS)),l=1;l<=r.SheetNames.length;++l){var d={"!id":{}},h=r.Sheets[r.SheetNames[l-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+l+"."+t,rr(s,o,cH(l-1,o,e,r,d)),a.sheets.push(o),kr(e.wbrels,-1,"worksheets/sheet"+l+"."+t,wr.WS[0])}if(h){var m=h["!comments"],v=!1,x="";m&&m.length>0&&(x="xl/comments"+l+"."+t,rr(s,x,fH(m,x)),a.comments.push(x),kr(d,-1,"../comments"+l+"."+t,wr.CMNT),v=!0),h["!legacy"]&&v&&rr(s,"xl/drawings/vmlDrawing"+l+".vml",PC(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&rr(s,yC(o),du(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,rr(s,o,dH(e.Strings,o,e)),a.strs.push(o),kr(e.wbrels,-1,"sharedStrings."+t,wr.SST)),o="xl/workbook."+t,rr(s,o,lH(r,o)),a.workbooks.push(o),kr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",rr(s,o,IC(r.Themes,e)),a.themes.push(o),kr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+t,rr(s,o,uH(r,o,e)),a.styles.push(o),kr(e.wbrels,-1,"styles."+t,wr.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",rr(s,o,r.vbaraw),a.vba.push(o),kr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+t,rr(s,o,hH(o)),a.metadata.push(o),kr(e.wbrels,-1,"metadata."+t,wr.XLMETA),rr(s,"[Content_Types].xml",vC(a,e)),rr(s,"_rels/.rels",du(e.rels)),rr(s,"xl/_rels/workbook."+t+".rels",du(e.wbrels)),delete e.revssf,delete e.ssf,s}function oV(r,e){nu=1024,r&&!r.SSF&&(r.SSF=qi(un)),r&&r.SSF&&(hp(),fp(r.SSF),e.revssf=mp(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,hf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=$C.indexOf(e.bookType)>-1,a=xC();jb(e=e||{});var s=cb(),o="",l=0;if(e.cellXfs=[],Jo(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),o="docProps/core.xml",rr(s,o,wC(r.Props,e)),a.coreprops.push(o),kr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var u=[],c=0;c<r.SheetNames.length;++c)(r.Workbook.Sheets[c]||{}).Hidden!=2&&u.push(r.SheetNames[c]);r.Props.SheetNames=u}r.Props.Worksheets=r.Props.SheetNames.length,rr(s,o,NC(r.Props)),a.extprops.push(o),kr(e.rels,3,o,wr.EXT_PROPS),r.Custprops!==r.Props&&si(r.Custprops||{}).length>0&&(o="docProps/custom.xml",rr(s,o,SC(r.Custprops)),a.custprops.push(o),kr(e.rels,4,o,wr.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=r.SheetNames.length;++l){var h={"!id":{}},g=r.Sheets[r.SheetNames[l-1]],m=(g||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+t,rr(s,o,YC(l-1,e,r,h)),a.sheets.push(o),kr(e.wbrels,-1,"worksheets/sheet"+l+"."+t,wr.WS[0])}if(g){var v=g["!comments"],x=!1,b="";if(v&&v.length>0){var y=!1;v.forEach(function(S){S[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+t,rr(s,b,IP(v,d,e)),a.threadedcomments.push(b),kr(h,-1,"../threadedComments/threadedComment"+l+"."+t,wr.TCMNT)),b="xl/comments"+l+"."+t,rr(s,b,qC(v)),a.comments.push(b),kr(h,-1,"../comments"+l+"."+t,wr.CMNT),x=!0}g["!legacy"]&&x&&rr(s,"xl/drawings/vmlDrawing"+l+".vml",PC(l,g["!comments"])),delete g["!comments"],delete g["!legacy"]}h["!id"].rId1&&rr(s,yC(o),du(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,rr(s,o,MC(e.Strings,e)),a.strs.push(o),kr(e.wbrels,-1,"sharedStrings."+t,wr.SST)),o="xl/workbook."+t,rr(s,o,eD(r)),a.workbooks.push(o),kr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",rr(s,o,IC(r.Themes,e)),a.themes.push(o),kr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+t,rr(s,o,RC(r,e)),a.styles.push(o),kr(e.wbrels,-1,"styles."+t,wr.STY),r.vbaraw&&n&&(o="xl/vbaProject.bin",rr(s,o,r.vbaraw),a.vba.push(o),kr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+t,rr(s,o,zC()),a.metadata.push(o),kr(e.wbrels,-1,"metadata."+t,wr.XLMETA),d.length>1&&(o="xl/persons/person.xml",rr(s,o,zP(d)),a.people.push(o),kr(e.wbrels,-1,"persons/person.xml",wr.PEOPLE)),rr(s,"[Content_Types].xml",vC(a,e)),rr(s,"_rels/.rels",du(e.rels)),rr(s,"xl/_rels/workbook."+t+".rels",du(e.wbrels)),delete e.revssf,delete e.ssf,s}function lV(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=Xs(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function oD(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Lf(e.file,Ur.write(r,{type:Sr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ur.write(r,e)}function cV(r,e){var t=qi(e||{}),n=aV(r,t);return uV(n,t)}function uV(r,e){var t={},n=Sr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=r.FullPaths?Ur.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(dp(a))}return e.password&&typeof encrypt_agile<"u"?oD(encrypt_agile(a,e.password),e):e.type==="file"?Lf(e.file,a):e.type=="string"?cf(a):a}function dV(r,e){var t=e||{},n=AH(r,t);return oD(n,t)}function ls(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return vf(bf(n));case"binary":return bf(n);case"string":return r;case"file":return Lf(e.file,n,"utf8");case"buffer":return Sr?to(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ls(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fV(r,e){switch(e.type){case"base64":return vf(r);case"binary":return r;case"string":return r;case"file":return Lf(e.file,r,"binary");case"buffer":return Sr?to(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function A0(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?vf(t):e.type=="string"?cf(t):t;case"file":return Lf(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function by(r,e){PL(),YU(r);var t=qi(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=by(r,t);return t.type="array",dp(n)}var a=0;if(t.sheet&&(typeof t.sheet=="number"?a=t.sheet:a=r.SheetNames.indexOf(t.sheet),!r.SheetNames[a]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return ls(jH(r,t),t);case"slk":case"sylk":return ls(Wz.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"htm":case"html":return ls(nD(r.Sheets[r.SheetNames[a]],t),t);case"txt":return fV(lD(r.Sheets[r.SheetNames[a]],t),t);case"csv":return ls(Eb(r.Sheets[r.SheetNames[a]],t),t,"\uFEFF");case"dif":return ls(Kz.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"dbf":return A0(Qz.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"prn":return ls(Xz.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"rtf":return ls(nP.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"eth":return ls(kC.from_sheet(r.Sheets[r.SheetNames[a]],t),t);case"fods":return ls(sD(r,t),t);case"wk1":return A0(U3.sheet_to_wk1(r.Sheets[r.SheetNames[a]],t),t);case"wk3":return A0(U3.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),A0(rD(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),dV(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return cV(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function hV(r,e,t,n,a,s,o,l){var u=ii(t),c=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,g=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!o||r[t])for(var m=e.s.c;m<=e.e.c;++m){var v=o?r[t][m]:r[n[m]+u];if(v===void 0||v.t===void 0){if(c===void 0)continue;s[m]!=null&&(g[s[m]]=c);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[m]!=null){if(x==null)if(v.t=="e"&&x===null)g[s[m]]=null;else if(c!==void 0)g[s[m]]=c;else if(d&&x===null)g[s[m]]=null;else continue;else g[s[m]]=d&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?x:Ys(v,x,l);x!=null&&(h=!1)}}return{row:g,isempty:h}}function Am(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,a=1,s=[],o=0,l="",u={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},d=c.range!=null?c.range:r["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof d){case"string":u=Zr(d);break;case"number":u=Zr(r["!ref"]),u.s.r=d;break;default:u=d}n>0&&(a=0);var h=ii(u.s.r),g=[],m=[],v=0,x=0,b=Array.isArray(r),y=u.s.r,S=0,_={};b&&!r[y]&&(r[y]=[]);var N=c.skipHidden&&r["!cols"]||[],j=c.skipHidden&&r["!rows"]||[];for(S=u.s.c;S<=u.e.c;++S)if(!(N[S]||{}).hidden)switch(g[S]=hi(S),t=b?r[y][S]:r[g[S]+h],n){case 1:s[S]=S-u.s.c;break;case 2:s[S]=g[S];break;case 3:s[S]=c.header[S-u.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),l=o=Ys(t,null,c),x=_[o]||0,!x)_[o]=1;else{do l=o+"_"+x++;while(_[l]);_[o]=x,_[l]=1}s[S]=l}for(y=u.s.r+a;y<=u.e.r;++y)if(!(j[y]||{}).hidden){var E=hV(r,u,y,g,n,s,b,c);(E.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(m[v++]=E.row)}return m.length=v,m}var Y3=/"/g;function mV(r,e,t,n,a,s,o,l){for(var u=!0,c=[],d="",h=ii(t),g=e.s.c;g<=e.e.c;++g)if(n[g]){var m=l.dense?(r[t]||[])[g]:r[n[g]+h];if(m==null)d="";else if(m.v!=null){u=!1,d=""+(l.rawNumbers&&m.t=="n"?m.v:Ys(m,null,l));for(var v=0,x=0;v!==d.length;++v)if((x=d.charCodeAt(v))===a||x===s||x===34||l.forceQuotes){d='"'+d.replace(Y3,'""')+'"';break}d=="ID"&&(d='"ID"')}else m.f!=null&&!m.F?(u=!1,d="="+m.f,d.indexOf(",")>=0&&(d='"'+d.replace(Y3,'""')+'"')):d="";c.push(d)}return l.blankrows===!1&&u?null:c.join(o)}function Eb(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var a=Zr(r["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,u=l.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(r);for(var g=n.skipHidden&&r["!cols"]||[],m=n.skipHidden&&r["!rows"]||[],v=a.s.c;v<=a.e.c;++v)(g[v]||{}).hidden||(h[v]=hi(v));for(var x=0,b=a.s.r;b<=a.e.r;++b)(m[b]||{}).hidden||(d=mV(r,a,b,h,o,u,s,n),d!=null&&(n.strip&&(d=d.replace(c,"")),(d||n.blankrows!==!1)&&t.push((x++?l:"")+d)));return delete n.dense,t.join("")}function lD(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Eb(r,e);return t}function pV(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var a=Zr(r["!ref"]),s="",o=[],l,u=[],c=Array.isArray(r);for(l=a.s.c;l<=a.e.c;++l)o[l]=hi(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ii(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,t=c?(r[d]||[])[l]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}u[u.length]=e+"="+n}return u}function cD(r,e,t){var n=t||{},a=+!n.skipHeader,s=r||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var u=typeof n.origin=="string"?$n(n.origin):n.origin;o=u.r,l=u.c}var c,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var h=Zr(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(o=h.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var g=n.header||[],m=0;e.forEach(function(x,b){si(x).forEach(function(y){(m=g.indexOf(y))==-1&&(g[m=g.length]=y);var S=x[y],_="z",N="",j=Rr({c:l+m,r:o+b+a});c=Nf(s,j),S&&typeof S=="object"&&!(S instanceof Date)?s[j]=S:(typeof S=="number"?_="n":typeof S=="boolean"?_="b":typeof S=="string"?_="s":S instanceof Date?(_="d",n.cellDates||(_="n",S=Pi(S)),N=n.dateNF||un[14]):S===null&&n.nullError&&(_="e",S=0),c?(c.t=_,c.v=S,delete c.w,delete c.R,N&&(c.z=N)):s[j]=c={t:_,v:S},N&&(c.z=N))})}),d.e.c=Math.max(d.e.c,l+g.length-1);var v=ii(o);if(a)for(m=0;m<g.length;++m)s[hi(m+l)+v]={t:"s",v:g[m]};return s["!ref"]=Nn(d),s}function gV(r,e){return cD(null,r,e)}function Nf(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=$n(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?Nf(r,Rr(e)):Nf(r,Rr({r:e,c:t||0}))}function xV(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function vV(){return{SheetNames:[],Sheets:{}}}function yV(r,e,t,n){var a=1;if(!t)for(;a<=65535&&r.SheetNames.indexOf(t="Sheet"+a)!=-1;++a,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||t;for(++a;a<=65535&&r.SheetNames.indexOf(t=o+a)!=-1;++a);}if(JC(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function bV(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=xV(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function wV(r,e){return r.z=e,r}function uD(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function _V(r,e,t){return uD(r,"#"+e,t)}function NV(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function SV(r,e,t,n){for(var a=typeof e!="string"?e:Zr(e),s=typeof e=="string"?e:Nn(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var u=Nf(r,o,l);u.t="n",u.F=s,delete u.v,o==a.s.r&&l==a.s.c&&(u.f=t,n&&(u.D=!0))}return r}var Qc={encode_col:hi,encode_row:ii,encode_cell:Rr,encode_range:Nn,decode_col:pb,decode_row:mb,split_cell:PI,decode_cell:$n,decode_range:ra,format_cell:Ys,sheet_add_aoa:dC,sheet_add_json:cD,sheet_add_dom:iD,aoa_to_sheet:Bu,json_to_sheet:gV,table_to_sheet:aD,table_to_book:KH,sheet_to_csv:Eb,sheet_to_txt:lD,sheet_to_json:Am,sheet_to_html:nD,sheet_to_formulae:pV,sheet_to_row_object_array:Am,sheet_get_cell:Nf,book_new:vV,book_append_sheet:yV,book_set_sheet_visibility:bV,cell_set_number_format:wV,cell_set_hyperlink:uD,cell_set_internal_link:_V,cell_add_comment:NV,sheet_set_array_formula:SV,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function T0(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var V1={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Z3;function jV(){return Z3||(Z3=1,function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,s){function o(c,d){if(!a[c]){if(!n[c]){var h=typeof T0=="function"&&T0;if(!d&&h)return h(c,!0);if(l)return l(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var m=a[c]={exports:{}};n[c][0].call(m.exports,function(v){var x=n[c][1][v];return o(x||v)},m,m.exports,t,n,a,s)}return a[c].exports}for(var l=typeof T0=="function"&&T0,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(t,n,a){var s=t("./utils"),o=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,d,h,g,m,v,x,b=[],y=0,S=u.length,_=S,N=s.getTypeOf(u)!=="string";y<u.length;)_=S-y,h=N?(c=u[y++],d=y<S?u[y++]:0,y<S?u[y++]:0):(c=u.charCodeAt(y++),d=y<S?u.charCodeAt(y++):0,y<S?u.charCodeAt(y++):0),g=c>>2,m=(3&c)<<4|d>>4,v=1<_?(15&d)<<2|h>>6:64,x=2<_?63&h:64,b.push(l.charAt(g)+l.charAt(m)+l.charAt(v)+l.charAt(x));return b.join("")},a.decode=function(u){var c,d,h,g,m,v,x=0,b=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var S,_=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&_--,u.charAt(u.length-2)===l.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|_):new Array(0|_);x<u.length;)c=l.indexOf(u.charAt(x++))<<2|(g=l.indexOf(u.charAt(x++)))>>4,d=(15&g)<<4|(m=l.indexOf(u.charAt(x++)))>>2,h=(3&m)<<6|(v=l.indexOf(u.charAt(x++))),S[b++]=c,m!==64&&(S[b++]=d),v!==64&&(S[b++]=h);return S}},{"./support":30,"./utils":32}],2:[function(t,n,a){var s=t("./external"),o=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function c(d,h,g,m,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=g,this.compression=m,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,g){return d.pipe(new l).pipe(new u("uncompressedSize")).pipe(h.compressWorker(g)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var s=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var s=t("./utils"),o=function(){for(var l,u=[],c=0;c<256;c++){l=c;for(var d=0;d<8;d++)l=1&l?3988292384^l>>>1:l>>>1;u[c]=l}return u}();n.exports=function(l,u){return l!==void 0&&l.length?s.getTypeOf(l)!=="string"?function(c,d,h,g){var m=o,v=g+h;c^=-1;for(var x=g;x<v;x++)c=c>>>8^m[255&(c^d[x])];return-1^c}(0|u,l,l.length,0):function(c,d,h,g){var m=o,v=g+h;c^=-1;for(var x=g;x<v;x++)c=c>>>8^m[255&(c^d.charCodeAt(x))];return-1^c}(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),c=s?"uint8array":"array";function d(h,g){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=g,this.meta={}}a.magic="\b\0",l.inherits(d,u),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(c,h.data),!1)},d.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(g){h.push({data:g,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function s(m,v){var x,b="";for(x=0;x<v;x++)b+=String.fromCharCode(255&m),m>>>=8;return b}function o(m,v,x,b,y,S){var _,N,j=m.file,E=m.compression,T=S!==c.utf8encode,F=l.transformTo("string",S(j.name)),A=l.transformTo("string",c.utf8encode(j.name)),R=j.comment,I=l.transformTo("string",S(R)),O=l.transformTo("string",c.utf8encode(R)),U=A.length!==j.name.length,D=O.length!==R.length,H="",P="",G="",ue=j.dir,le=j.date,pe={crc32:0,compressedSize:0,uncompressedSize:0};v&&!x||(pe.crc32=m.crc32,pe.compressedSize=m.compressedSize,pe.uncompressedSize=m.uncompressedSize);var de=0;v&&(de|=8),T||!U&&!D||(de|=2048);var L=0,X=0;ue&&(L|=16),y==="UNIX"?(X=798,L|=function(se,ae){var W=se;return se||(W=ae?16893:33204),(65535&W)<<16}(j.unixPermissions,ue)):(X=20,L|=function(se){return 63&(se||0)}(j.dosPermissions)),_=le.getUTCHours(),_<<=6,_|=le.getUTCMinutes(),_<<=5,_|=le.getUTCSeconds()/2,N=le.getUTCFullYear()-1980,N<<=4,N|=le.getUTCMonth()+1,N<<=5,N|=le.getUTCDate(),U&&(P=s(1,1)+s(d(F),4)+A,H+="up"+s(P.length,2)+P),D&&(G=s(1,1)+s(d(I),4)+O,H+="uc"+s(G.length,2)+G);var V="";return V+=`
\0`,V+=s(de,2),V+=E.magic,V+=s(_,2),V+=s(N,2),V+=s(pe.crc32,4),V+=s(pe.compressedSize,4),V+=s(pe.uncompressedSize,4),V+=s(F.length,2),V+=s(H.length,2),{fileRecord:h.LOCAL_FILE_HEADER+V+F+H,dirRecord:h.CENTRAL_FILE_HEADER+s(X,2)+V+s(I.length,2)+"\0\0\0\0"+s(L,4)+s(b,4)+F+H+I}}var l=t("../utils"),u=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),h=t("../signature");function g(m,v,x,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=x,this.encodeFileName=b,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,u),g.prototype.push=function(m){var v=m.meta.percent||0,x=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,u.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:x?(v+100*(x-b-1))/x:100}}))},g.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var v=this.streamFiles&&!m.file.dir;if(v){var x=o(m,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(m){this.accumulate=!1;var v=this.streamFiles&&!m.file.dir,x=o(m,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),v)this.push({data:function(b){return h.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var m=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var x=this.bytesWritten-m,b=function(y,S,_,N,j){var E=l.transformTo("string",j(N));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(S,4)+s(_,4)+s(E.length,2)+E}(this.dirRecords.length,x,m,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(m){this._sources.push(m);var v=this;return m.on("data",function(x){v.processChunk(x)}),m.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),m.on("error",function(x){v.error(x)}),this},g.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(m){var v=this._sources;if(!u.prototype.error.call(this,m))return!1;for(var x=0;x<v.length;x++)try{v[x].error(m)}catch{}return!0},g.prototype.lock=function(){u.prototype.lock.call(this);for(var m=this._sources,v=0;v<m.length;v++)m[v].lock()},n.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var s=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(l,u,c){var d=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{l.forEach(function(g,m){h++;var v=function(S,_){var N=S||_,j=s[N];if(!j)throw new Error(N+" is not a valid compression method !");return j}(m.options.compression,u.compression),x=m.options.compressionOptions||u.compressionOptions||{},b=m.dir,y=m.date;m._compressWorker(v,x).withStreamInfo("file",{name:g,dir:b,date:y,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var l in this)typeof this[l]!="function"&&(o[l]=this[l]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,l){return new s().loadAsync(o,l)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var s=t("./utils"),o=t("./external"),l=t("./utf8"),u=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(g){return new o.Promise(function(m,v){var x=g.decompressed.getContentWorker().pipe(new c);x.on("error",function(b){v(b)}).on("end",function(){x.streamInfo.crc32!==g.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(g,m){var v=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),d.isNode&&d.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,m.optimizedBinaryString,m.base64).then(function(x){var b=new u(m);return b.load(x),b}).then(function(x){var b=[o.Promise.resolve(x)],y=x.files;if(m.checkCRC32)for(var S=0;S<y.length;S++)b.push(h(y[S]));return o.Promise.all(b)}).then(function(x){for(var b=x.shift(),y=b.files,S=0;S<y.length;S++){var _=y[S],N=_.fileNameStr,j=s.resolve(_.fileNameStr);v.file(j,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(v.file(j).unsafeOriginalName=N)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var s=t("../utils"),o=t("../stream/GenericWorker");function l(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(l,o),l.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},l.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var s=t("readable-stream").Readable;function o(l,u,c){s.call(this,u),this._helper=l;var d=this;l.on("data",function(h,g){d.push(h)||d._helper.pause(),c&&c(g)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,a){function s(j,E,T){var F,A=l.getTypeOf(E),R=l.extend(T||{},d);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(j=y(j)),R.createFolders&&(F=b(j))&&S.call(this,F,!0);var I=A==="string"&&R.binary===!1&&R.base64===!1;T&&T.binary!==void 0||(R.binary=!I),(E instanceof h&&E.uncompressedSize===0||R.dir||!E||E.length===0)&&(R.base64=!1,R.binary=!0,E="",R.compression="STORE",A="string");var O=null;O=E instanceof h||E instanceof u?E:v.isNode&&v.isStream(E)?new x(j,E):l.prepareContent(j,E,R.binary,R.optimizedBinaryString,R.base64);var U=new g(j,O,R);this.files[j]=U}var o=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),g=t("./zipObject"),m=t("./generate"),v=t("./nodejsUtils"),x=t("./nodejs/NodejsStreamInputAdapter"),b=function(j){j.slice(-1)==="/"&&(j=j.substring(0,j.length-1));var E=j.lastIndexOf("/");return 0<E?j.substring(0,E):""},y=function(j){return j.slice(-1)!=="/"&&(j+="/"),j},S=function(j,E){return E=E!==void 0?E:d.createFolders,j=y(j),this.files[j]||s.call(this,j,null,{dir:!0,createFolders:E}),this.files[j]};function _(j){return Object.prototype.toString.call(j)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(j){var E,T,F;for(E in this.files)F=this.files[E],(T=E.slice(this.root.length,E.length))&&E.slice(0,this.root.length)===this.root&&j(T,F)},filter:function(j){var E=[];return this.forEach(function(T,F){j(T,F)&&E.push(F)}),E},file:function(j,E,T){if(arguments.length!==1)return j=this.root+j,s.call(this,j,E,T),this;if(_(j)){var F=j;return this.filter(function(R,I){return!I.dir&&F.test(R)})}var A=this.files[this.root+j];return A&&!A.dir?A:null},folder:function(j){if(!j)return this;if(_(j))return this.filter(function(A,R){return R.dir&&j.test(A)});var E=this.root+j,T=S.call(this,E),F=this.clone();return F.root=T.name,F},remove:function(j){j=this.root+j;var E=this.files[j];if(E||(j.slice(-1)!=="/"&&(j+="/"),E=this.files[j]),E&&!E.dir)delete this.files[j];else for(var T=this.filter(function(A,R){return R.name.slice(0,j.length)===j}),F=0;F<T.length;F++)delete this.files[T[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(j){var E,T={};try{if((T=l.extend(j||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");l.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var F=T.comment||this.comment||"";E=m.generateWorker(this,T,F)}catch(A){(E=new u("error")).error(A)}return new c(E,T.type||"string",T.mimeType)},generateAsync:function(j,E){return this.generateInternalStream(j).accumulate(E)},generateNodeStream:function(j,E){return(j=j||{}).type||(j.type="nodebuffer"),this.generateInternalStream(j).toNodejsStream(E)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var s=t("./DataReader");function o(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),c=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===u&&this.data[g+1]===c&&this.data[g+2]===d&&this.data[g+3]===h)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),c=l.charCodeAt(1),d=l.charCodeAt(2),h=l.charCodeAt(3),g=this.readData(4);return u===g[0]&&c===g[1]&&d===g[2]&&h===g[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var s=t("../utils");function o(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,c=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=l,c},readString:function(l){return s.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=o},{"../utils":32}],19:[function(t,n,a){var s=t("./Uint8ArrayReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var s=t("./DataReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var s=t("./ArrayReader");function o(l){s.call(this,l)}t("../utils").inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var s=t("../utils"),o=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");n.exports=function(h){var g=s.getTypeOf(h);return s.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new c(h):o.uint8array?new d(s.transformTo("uint8array",h)):new l(s.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var s=t("./GenericWorker"),o=t("../utils");function l(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(l,s),l.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var s=t("./GenericWorker"),o=t("../crc32");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var s=t("../utils"),o=t("./GenericWorker");function l(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(l,o),l.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var s=t("../utils"),o=t("./GenericWorker");function l(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=s.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}s.inherits(l,o),l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,l){return this._listeners[o].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,l){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,l)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var l=this;return o.on("data",function(u){l.processChunk(u)}),o.on("end",function(){l.end()}),o.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,l){return this.extraStreamInfo[o]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(t,n,a){var s=t("../utils"),o=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),c=t("../support"),d=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(v,x){return new d.Promise(function(b,y){var S=[],_=v._internalType,N=v._outputType,j=v._mimeType;v.on("data",function(E,T){S.push(E),x&&x(T)}).on("error",function(E){S=[],y(E)}).on("end",function(){try{var E=function(T,F,A){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",F),A);case"base64":return u.encode(F);default:return s.transformTo(T,F)}}(N,function(T,F){var A,R=0,I=null,O=0;for(A=0;A<F.length;A++)O+=F[A].length;switch(T){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(I=new Uint8Array(O),A=0;A<F.length;A++)I.set(F[A],R),R+=F[A].length;return I;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+T+"'")}}(_,S),j);b(E)}catch(T){y(T)}S=[]}).resume()})}function m(v,x,b){var y=x;switch(x){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=x,this._mimeType=b,s.checkSupport(y),this._worker=v.pipe(new o(y)),v.lock()}catch(S){this._worker=new l("error"),this._worker.error(S)}}m.prototype={accumulate:function(v){return g(this,v)},on:function(v,x){var b=this;return v==="data"?this._worker.on(v,function(y){x.call(b,y.data,y.meta)}):this._worker.on(v,function(){s.delay(x,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var s=t("./utils"),o=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function g(){u.call(this,"utf-8 encode")}a.utf8encode=function(m){return o.nodebuffer?l.newBufferFrom(m,"utf-8"):function(v){var x,b,y,S,_,N=v.length,j=0;for(S=0;S<N;S++)(64512&(b=v.charCodeAt(S)))==55296&&S+1<N&&(64512&(y=v.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),S++),j+=b<128?1:b<2048?2:b<65536?3:4;for(x=o.uint8array?new Uint8Array(j):new Array(j),S=_=0;_<j;S++)(64512&(b=v.charCodeAt(S)))==55296&&S+1<N&&(64512&(y=v.charCodeAt(S+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),S++),b<128?x[_++]=b:(b<2048?x[_++]=192|b>>>6:(b<65536?x[_++]=224|b>>>12:(x[_++]=240|b>>>18,x[_++]=128|b>>>12&63),x[_++]=128|b>>>6&63),x[_++]=128|63&b);return x}(m)},a.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(v){var x,b,y,S,_=v.length,N=new Array(2*_);for(x=b=0;x<_;)if((y=v[x++])<128)N[b++]=y;else if(4<(S=c[y]))N[b++]=65533,x+=S-1;else{for(y&=S===2?31:S===3?15:7;1<S&&x<_;)y=y<<6|63&v[x++],S--;1<S?N[b++]=65533:y<65536?N[b++]=y:(y-=65536,N[b++]=55296|y>>10&1023,N[b++]=56320|1023&y)}return N.length!==b&&(N.subarray?N=N.subarray(0,b):N.length=b),s.applyFromCharCode(N)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(h,u),h.prototype.processChunk=function(m){var v=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=v;(v=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),v.set(x,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(S,_){var N;for((_=_||S.length)>S.length&&(_=S.length),N=_-1;0<=N&&(192&S[N])==128;)N--;return N<0||N===0?_:N+c[S[N]]>_?N:_}(v),y=v;b!==v.length&&(o.uint8array?(y=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(y=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:a.utf8decode(y),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,s.inherits(g,u),g.prototype.processChunk=function(m){this.push({data:a.utf8encode(m.data),meta:m.meta})},a.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var s=t("./support"),o=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function c(x){return x}function d(x,b){for(var y=0;y<x.length;++y)b[y]=255&x.charCodeAt(y);return b}t("setimmediate"),a.newBlob=function(x,b){a.checkSupport("blob");try{return new Blob([x],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(x),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(x,b,y){var S=[],_=0,N=x.length;if(N<=y)return String.fromCharCode.apply(null,x);for(;_<N;)b==="array"||b==="nodebuffer"?S.push(String.fromCharCode.apply(null,x.slice(_,Math.min(_+y,N)))):S.push(String.fromCharCode.apply(null,x.subarray(_,Math.min(_+y,N)))),_+=y;return S.join("")},stringifyByChar:function(x){for(var b="",y=0;y<x.length;y++)b+=String.fromCharCode(x[y]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(x){var b=65536,y=a.getTypeOf(x),S=!0;if(y==="uint8array"?S=h.applyCanBeUsed.uint8array:y==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<b;)try{return h.stringifyByChunk(x,y,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(x)}function m(x,b){for(var y=0;y<x.length;y++)b[y]=x[y];return b}a.applyFromCharCode=g;var v={};v.string={string:c,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return v.string.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:function(x){return d(x,l.allocBuffer(x.length))}},v.array={string:g,array:c,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(x)}},v.arraybuffer={string:function(x){return g(new Uint8Array(x))},array:function(x){return m(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:c,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return l.newBufferFrom(new Uint8Array(x))}},v.uint8array={string:g,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:c,nodebuffer:function(x){return l.newBufferFrom(x)}},v.nodebuffer={string:g,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return v.nodebuffer.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:c},a.transformTo=function(x,b){if(b=b||"",!x)return b;a.checkSupport(x);var y=a.getTypeOf(b);return v[y][x](b)},a.resolve=function(x){for(var b=x.split("/"),y=[],S=0;S<b.length;S++){var _=b[S];_==="."||_===""&&S!==0&&S!==b.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},a.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":s.nodebuffer&&l.isBuffer(x)?"nodebuffer":s.uint8array&&x instanceof Uint8Array?"uint8array":s.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(x){if(!s[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(x){var b,y,S="";for(y=0;y<(x||"").length;y++)S+="\\x"+((b=x.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return S},a.delay=function(x,b,y){setImmediate(function(){x.apply(y||null,b||[])})},a.inherits=function(x,b){function y(){}y.prototype=b.prototype,x.prototype=new y},a.extend=function(){var x,b,y={};for(x=0;x<arguments.length;x++)for(b in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],b)&&y[b]===void 0&&(y[b]=arguments[x][b]);return y},a.prepareContent=function(x,b,y,S,_){return u.Promise.resolve(b).then(function(N){return s.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new u.Promise(function(j,E){var T=new FileReader;T.onload=function(F){j(F.target.result)},T.onerror=function(F){E(F.target.error)},T.readAsArrayBuffer(N)}):N}).then(function(N){var j=a.getTypeOf(N);return j?(j==="arraybuffer"?N=a.transformTo("uint8array",N):j==="string"&&(_?N=o.decode(N):y&&S!==!0&&(N=function(E){return d(E,s.uint8array?new Uint8Array(E.length):new Array(E.length))}(N))),N):u.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var s=t("./reader/readerFor"),o=t("./utils"),l=t("./signature"),u=t("./zipEntry"),c=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(h)+")")}},isSignature:function(h,g){var m=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===g;return this.reader.setIndex(m),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),g=c.uint8array?"uint8array":"array",m=o.transformTo(g,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,g,m,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),g=this.reader.readInt(4),m=this.reader.readData(g),this.zip64ExtensibleData[h]={id:h,length:g,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,g;for(h=0;h<this.files.length;h++)g=this.files[h],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var g=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var v=g-m;if(0<v)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var s=t("./reader/readerFor"),o=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),c=t("./utf8"),d=t("./compressions"),h=t("./support");function g(m,v){this.options=m,this.loadOptions=v}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var v,x;if(m.skip(22),this.fileNameLength=m.readInt(2),x=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)&&d[y].magic===b)return d[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var v=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(v),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var v,x,b,y=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<y;)v=m.readInt(2),x=m.readInt(2),b=m.readData(x),this.extraFields[v]={id:v,length:x,value:b};m.setIndex(y)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var x=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var v=s(m.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var v=s(m.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(m.length-5))}return null}},n.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function s(v,x,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=x,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");s.prototype={internalStream:function(v){var x=null,b="string";try{if(!v)throw new Error("No output type specified.");var y=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),x=this._decompressWorker();var S=!this._dataBinary;S&&!y&&(x=x.pipe(new u.Utf8EncodeWorker)),!S&&y&&(x=x.pipe(new u.Utf8DecodeWorker))}catch(_){(x=new d("error")).error(_)}return new o(x,b,"")},async:function(v,x){return this.internalStream(v).accumulate(x)},nodeStream:function(v,x){return this.internalStream(v||"nodebuffer").toNodejsStream(x)},_compressWorker:function(v,x){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(b,v,x)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)s.prototype[h[m]]=g;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(s){var o,l,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var c=0,d=new u(v),h=s.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var x=s.document.createElement("script");x.onreadystatechange=function(){v(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},s.document.documentElement.appendChild(x)}:function(){setTimeout(v,0)};else{var g=new s.MessageChannel;g.port1.onmessage=v,o=function(){g.port2.postMessage(0)}}var m=[];function v(){var x,b;l=!0;for(var y=m.length;y;){for(b=m,m=[],x=-1;++x<y;)b[x]();y=m.length}l=!1}n.exports=function(x){m.push(x)!==1||l||o()}}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var s=t("immediate");function o(){}var l={},u=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,y!==o&&x(this,y)}function g(y,S,_){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(y,S,_){s(function(){var N;try{N=S(_)}catch(j){return l.reject(y,j)}N===y?l.reject(y,new TypeError("Cannot resolve promise with itself")):l.resolve(y,N)})}function v(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function x(y,S){var _=!1;function N(T){_||(_=!0,l.reject(y,T))}function j(T){_||(_=!0,l.resolve(y,T))}var E=b(function(){S(j,N)});E.status==="error"&&N(E.value)}function b(y,S){var _={};try{_.value=y(S),_.status="success"}catch(N){_.status="error",_.value=N}return _}(n.exports=h).prototype.finally=function(y){if(typeof y!="function")return this;var S=this.constructor;return this.then(function(_){return S.resolve(y()).then(function(){return _})},function(_){return S.resolve(y()).then(function(){throw _})})},h.prototype.catch=function(y){return this.then(null,y)},h.prototype.then=function(y,S){if(typeof y!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var _=new this.constructor(o);return this.state!==d?m(_,this.state===c?y:S,this.outcome):this.queue.push(new g(_,y,S)),_},g.prototype.callFulfilled=function(y){l.resolve(this.promise,y)},g.prototype.otherCallFulfilled=function(y){m(this.promise,this.onFulfilled,y)},g.prototype.callRejected=function(y){l.reject(this.promise,y)},g.prototype.otherCallRejected=function(y){m(this.promise,this.onRejected,y)},l.resolve=function(y,S){var _=b(v,S);if(_.status==="error")return l.reject(y,_.value);var N=_.value;if(N)x(y,N);else{y.state=c,y.outcome=S;for(var j=-1,E=y.queue.length;++j<E;)y.queue[j].callFulfilled(S)}return y},l.reject=function(y,S){y.state=u,y.outcome=S;for(var _=-1,N=y.queue.length;++_<N;)y.queue[_].callRejected(S);return y},h.resolve=function(y){return y instanceof this?y:l.resolve(new this(o),y)},h.reject=function(y){var S=new this(o);return l.reject(S,y)},h.all=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,N=!1;if(!_)return this.resolve([]);for(var j=new Array(_),E=0,T=-1,F=new this(o);++T<_;)A(y[T],T);return F;function A(R,I){S.resolve(R).then(function(O){j[I]=O,++E!==_||N||(N=!0,l.resolve(F,j))},function(O){N||(N=!0,l.reject(F,O))})}},h.race=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,N=!1;if(!_)return this.resolve([]);for(var j=-1,E=new this(o);++j<_;)T=y[j],S.resolve(T).then(function(F){N||(N=!0,l.resolve(E,F))},function(F){N||(N=!0,l.reject(E,F))});var T;return E}},{immediate:36}],38:[function(t,n,a){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var s=t("./zlib/deflate"),o=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,h=0,g=-1,m=0,v=8;function x(y){if(!(this instanceof x))return new x(y);this.options=o.assign({level:g,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},y||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(_!==h)throw new Error(u[_]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var N;if(N=typeof S.dictionary=="string"?l.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(_=s.deflateSetDictionary(this.strm,N))!==h)throw new Error(u[_]);this._dict_set=!0}}function b(y,S){var _=new x(S);if(_.push(y,!0),_.err)throw _.msg||u[_.err];return _.result}x.prototype.push=function(y,S){var _,N,j=this.strm,E=this.options.chunkSize;if(this.ended)return!1;N=S===~~S?S:S===!0?4:0,typeof y=="string"?j.input=l.string2buf(y):d.call(y)==="[object ArrayBuffer]"?j.input=new Uint8Array(y):j.input=y,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(E),j.next_out=0,j.avail_out=E),(_=s.deflate(j,N))!==1&&_!==h)return this.onEnd(_),!(this.ended=!0);j.avail_out!==0&&(j.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(o.shrinkBuf(j.output,j.next_out))):this.onData(o.shrinkBuf(j.output,j.next_out)))}while((0<j.avail_in||j.avail_out===0)&&_!==1);return N===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===h):N!==2||(this.onEnd(h),!(j.avail_out=0))},x.prototype.onData=function(y){this.chunks.push(y)},x.prototype.onEnd=function(y){y===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Deflate=x,a.deflate=b,a.deflateRaw=function(y,S){return(S=S||{}).raw=!0,b(y,S)},a.gzip=function(y,S){return(S=S||{}).gzip=!0,b(y,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var s=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),g=Object.prototype.toString;function m(x){if(!(this instanceof m))return new m(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||x&&x.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,b.windowBits);if(y!==u.Z_OK)throw new Error(c[y]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function v(x,b){var y=new m(b);if(y.push(x,!0),y.err)throw y.msg||c[y.err];return y.result}m.prototype.push=function(x,b){var y,S,_,N,j,E,T=this.strm,F=this.options.chunkSize,A=this.options.dictionary,R=!1;if(this.ended)return!1;S=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof x=="string"?T.input=l.binstring2buf(x):g.call(x)==="[object ArrayBuffer]"?T.input=new Uint8Array(x):T.input=x,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(F),T.next_out=0,T.avail_out=F),(y=s.inflate(T,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&A&&(E=typeof A=="string"?l.string2buf(A):g.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,y=s.inflateSetDictionary(this.strm,E)),y===u.Z_BUF_ERROR&&R===!0&&(y=u.Z_OK,R=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&y!==u.Z_STREAM_END&&(T.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=l.utf8border(T.output,T.next_out),N=T.next_out-_,j=l.buf2string(T.output,_),T.next_out=N,T.avail_out=F-N,N&&o.arraySet(T.output,T.output,_,N,0),this.onData(j)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(R=!0)}while((0<T.avail_in||T.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(T.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Inflate=m,a.inflate=v,a.inflateRaw=function(x,b){return(b=b||{}).raw=!0,v(x,b)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(u[h]=d[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,d,h,g){if(c.subarray&&u.subarray)u.set(c.subarray(d,d+h),g);else for(var m=0;m<h;m++)u[g+m]=c[d+m]},flattenChunks:function(u){var c,d,h,g,m,v;for(c=h=0,d=u.length;c<d;c++)h+=u[c].length;for(v=new Uint8Array(h),c=g=0,d=u.length;c<d;c++)m=u[c],v.set(m,g),g+=m.length;return v}},l={arraySet:function(u,c,d,h,g){for(var m=0;m<h;m++)u[g+m]=c[d+m]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,l))},a.setTyped(s)},{}],42:[function(t,n,a){var s=t("./common"),o=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new s.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,g){if(g<65537&&(h.subarray&&l||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,g));for(var m="",v=0;v<g;v++)m+=String.fromCharCode(h[v]);return m}u[254]=u[254]=1,a.string2buf=function(h){var g,m,v,x,b,y=h.length,S=0;for(x=0;x<y;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<y&&(64512&(v=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),S+=m<128?1:m<2048?2:m<65536?3:4;for(g=new s.Buf8(S),x=b=0;b<S;x++)(64512&(m=h.charCodeAt(x)))==55296&&x+1<y&&(64512&(v=h.charCodeAt(x+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),x++),m<128?g[b++]=m:(m<2048?g[b++]=192|m>>>6:(m<65536?g[b++]=224|m>>>12:(g[b++]=240|m>>>18,g[b++]=128|m>>>12&63),g[b++]=128|m>>>6&63),g[b++]=128|63&m);return g},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var g=new s.Buf8(h.length),m=0,v=g.length;m<v;m++)g[m]=h.charCodeAt(m);return g},a.buf2string=function(h,g){var m,v,x,b,y=g||h.length,S=new Array(2*y);for(m=v=0;m<y;)if((x=h[m++])<128)S[v++]=x;else if(4<(b=u[x]))S[v++]=65533,m+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&m<y;)x=x<<6|63&h[m++],b--;1<b?S[v++]=65533:x<65536?S[v++]=x:(x-=65536,S[v++]=55296|x>>10&1023,S[v++]=56320|1023&x)}return d(S,v)},a.utf8border=function(h,g){var m;for((g=g||h.length)>h.length&&(g=h.length),m=g-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?g:m+u[h[m]]>g?m:g}},{"./common":41}],43:[function(t,n,a){n.exports=function(s,o,l,u){for(var c=65535&s|0,d=s>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;d=d+(c=c+o[u++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();n.exports=function(o,l,u,c){var d=s,h=c+u;o^=-1;for(var g=c;g<h;g++)o=o>>>8^d[255&(o^l[g])];return-1^o}},{}],46:[function(t,n,a){var s,o=t("../utils/common"),l=t("./trees"),u=t("./adler32"),c=t("./crc32"),d=t("./messages"),h=0,g=4,m=0,v=-2,x=-1,b=4,y=2,S=8,_=9,N=286,j=30,E=19,T=2*N+1,F=15,A=3,R=258,I=R+A+1,O=42,U=113,D=1,H=2,P=3,G=4;function ue(M,ge){return M.msg=d[ge],ge}function le(M){return(M<<1)-(4<M?9:0)}function pe(M){for(var ge=M.length;0<=--ge;)M[ge]=0}function de(M){var ge=M.state,ee=ge.pending;ee>M.avail_out&&(ee=M.avail_out),ee!==0&&(o.arraySet(M.output,ge.pending_buf,ge.pending_out,ee,M.next_out),M.next_out+=ee,ge.pending_out+=ee,M.total_out+=ee,M.avail_out-=ee,ge.pending-=ee,ge.pending===0&&(ge.pending_out=0))}function L(M,ge){l._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ge),M.block_start=M.strstart,de(M.strm)}function X(M,ge){M.pending_buf[M.pending++]=ge}function V(M,ge){M.pending_buf[M.pending++]=ge>>>8&255,M.pending_buf[M.pending++]=255&ge}function se(M,ge){var ee,k,B=M.max_chain_length,Q=M.strstart,Z=M.prev_length,J=M.nice_match,K=M.strstart>M.w_size-I?M.strstart-(M.w_size-I):0,te=M.window,me=M.w_mask,fe=M.prev,xe=M.strstart+R,_e=te[Q+Z-1],je=te[Q+Z];M.prev_length>=M.good_match&&(B>>=2),J>M.lookahead&&(J=M.lookahead);do if(te[(ee=ge)+Z]===je&&te[ee+Z-1]===_e&&te[ee]===te[Q]&&te[++ee]===te[Q+1]){Q+=2,ee++;do;while(te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&te[++Q]===te[++ee]&&Q<xe);if(k=R-(xe-Q),Q=xe-R,Z<k){if(M.match_start=ge,J<=(Z=k))break;_e=te[Q+Z-1],je=te[Q+Z]}}while((ge=fe[ge&me])>K&&--B!=0);return Z<=M.lookahead?Z:M.lookahead}function ae(M){var ge,ee,k,B,Q,Z,J,K,te,me,fe=M.w_size;do{if(B=M.window_size-M.lookahead-M.strstart,M.strstart>=fe+(fe-I)){for(o.arraySet(M.window,M.window,fe,fe,0),M.match_start-=fe,M.strstart-=fe,M.block_start-=fe,ge=ee=M.hash_size;k=M.head[--ge],M.head[ge]=fe<=k?k-fe:0,--ee;);for(ge=ee=fe;k=M.prev[--ge],M.prev[ge]=fe<=k?k-fe:0,--ee;);B+=fe}if(M.strm.avail_in===0)break;if(Z=M.strm,J=M.window,K=M.strstart+M.lookahead,te=B,me=void 0,me=Z.avail_in,te<me&&(me=te),ee=me===0?0:(Z.avail_in-=me,o.arraySet(J,Z.input,Z.next_in,me,K),Z.state.wrap===1?Z.adler=u(Z.adler,J,me,K):Z.state.wrap===2&&(Z.adler=c(Z.adler,J,me,K)),Z.next_in+=me,Z.total_in+=me,me),M.lookahead+=ee,M.lookahead+M.insert>=A)for(Q=M.strstart-M.insert,M.ins_h=M.window[Q],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Q+A-1])&M.hash_mask,M.prev[Q&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Q,Q++,M.insert--,!(M.lookahead+M.insert<A)););}while(M.lookahead<I&&M.strm.avail_in!==0)}function W(M,ge){for(var ee,k;;){if(M.lookahead<I){if(ae(M),M.lookahead<I&&ge===h)return D;if(M.lookahead===0)break}if(ee=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),ee!==0&&M.strstart-ee<=M.w_size-I&&(M.match_length=se(M,ee)),M.match_length>=A)if(k=l._tr_tally(M,M.strstart-M.match_start,M.match_length-A),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=A){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else k=l._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(k&&(L(M,!1),M.strm.avail_out===0))return D}return M.insert=M.strstart<A-1?M.strstart:A-1,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):M.last_lit&&(L(M,!1),M.strm.avail_out===0)?D:H}function z(M,ge){for(var ee,k,B;;){if(M.lookahead<I){if(ae(M),M.lookahead<I&&ge===h)return D;if(M.lookahead===0)break}if(ee=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=A-1,ee!==0&&M.prev_length<M.max_lazy_match&&M.strstart-ee<=M.w_size-I&&(M.match_length=se(M,ee),M.match_length<=5&&(M.strategy===1||M.match_length===A&&4096<M.strstart-M.match_start)&&(M.match_length=A-1)),M.prev_length>=A&&M.match_length<=M.prev_length){for(B=M.strstart+M.lookahead-A,k=l._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-A),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=B&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,ee=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=A-1,M.strstart++,k&&(L(M,!1),M.strm.avail_out===0))return D}else if(M.match_available){if((k=l._tr_tally(M,0,M.window[M.strstart-1]))&&L(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return D}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(k=l._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<A-1?M.strstart:A-1,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):M.last_lit&&(L(M,!1),M.strm.avail_out===0)?D:H}function re(M,ge,ee,k,B){this.good_length=M,this.max_lazy=ge,this.nice_length=ee,this.max_chain=k,this.func=B}function ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*j+1)),this.bl_tree=new o.Buf16(2*(2*E+1)),pe(this.dyn_ltree),pe(this.dyn_dtree),pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(F+1),this.heap=new o.Buf16(2*N+1),pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),pe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(M){var ge;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=y,(ge=M.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?O:U,M.adler=ge.wrap===2?0:1,ge.last_flush=h,l._tr_init(ge),m):ue(M,v)}function oe(M){var ge=ie(M);return ge===m&&function(ee){ee.window_size=2*ee.w_size,pe(ee.head),ee.max_lazy_match=s[ee.level].max_lazy,ee.good_match=s[ee.level].good_length,ee.nice_match=s[ee.level].nice_length,ee.max_chain_length=s[ee.level].max_chain,ee.strstart=0,ee.block_start=0,ee.lookahead=0,ee.insert=0,ee.match_length=ee.prev_length=A-1,ee.match_available=0,ee.ins_h=0}(M.state),ge}function ye(M,ge,ee,k,B,Q){if(!M)return v;var Z=1;if(ge===x&&(ge=6),k<0?(Z=0,k=-k):15<k&&(Z=2,k-=16),B<1||_<B||ee!==S||k<8||15<k||ge<0||9<ge||Q<0||b<Q)return ue(M,v);k===8&&(k=9);var J=new ne;return(M.state=J).strm=M,J.wrap=Z,J.gzhead=null,J.w_bits=k,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=B+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+A-1)/A),J.window=new o.Buf8(2*J.w_size),J.head=new o.Buf16(J.hash_size),J.prev=new o.Buf16(J.w_size),J.lit_bufsize=1<<B+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new o.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=ge,J.strategy=Q,J.method=ee,oe(M)}s=[new re(0,0,0,0,function(M,ge){var ee=65535;for(ee>M.pending_buf_size-5&&(ee=M.pending_buf_size-5);;){if(M.lookahead<=1){if(ae(M),M.lookahead===0&&ge===h)return D;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var k=M.block_start+ee;if((M.strstart===0||M.strstart>=k)&&(M.lookahead=M.strstart-k,M.strstart=k,L(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-I&&(L(M,!1),M.strm.avail_out===0))return D}return M.insert=0,ge===g?(L(M,!0),M.strm.avail_out===0?P:G):(M.strstart>M.block_start&&(L(M,!1),M.strm.avail_out),D)}),new re(4,4,8,4,W),new re(4,5,16,8,W),new re(4,6,32,32,W),new re(4,4,16,16,z),new re(8,16,32,32,z),new re(8,16,128,128,z),new re(8,32,128,256,z),new re(32,128,258,1024,z),new re(32,258,258,4096,z)],a.deflateInit=function(M,ge){return ye(M,ge,S,15,8,0)},a.deflateInit2=ye,a.deflateReset=oe,a.deflateResetKeep=ie,a.deflateSetHeader=function(M,ge){return M&&M.state?M.state.wrap!==2?v:(M.state.gzhead=ge,m):v},a.deflate=function(M,ge){var ee,k,B,Q;if(!M||!M.state||5<ge||ge<0)return M?ue(M,v):v;if(k=M.state,!M.output||!M.input&&M.avail_in!==0||k.status===666&&ge!==g)return ue(M,M.avail_out===0?-5:v);if(k.strm=M,ee=k.last_flush,k.last_flush=ge,k.status===O)if(k.wrap===2)M.adler=0,X(k,31),X(k,139),X(k,8),k.gzhead?(X(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),X(k,255&k.gzhead.time),X(k,k.gzhead.time>>8&255),X(k,k.gzhead.time>>16&255),X(k,k.gzhead.time>>24&255),X(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),X(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(X(k,255&k.gzhead.extra.length),X(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(M.adler=c(M.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(X(k,0),X(k,0),X(k,0),X(k,0),X(k,0),X(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),X(k,3),k.status=U);else{var Z=S+(k.w_bits-8<<4)<<8;Z|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(Z|=32),Z+=31-Z%31,k.status=U,V(k,Z),k.strstart!==0&&(V(k,M.adler>>>16),V(k,65535&M.adler)),M.adler=1}if(k.status===69)if(k.gzhead.extra){for(B=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending!==k.pending_buf_size));)X(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){B=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending===k.pending_buf_size)){Q=1;break}Q=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,X(k,Q)}while(Q!==0);k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),Q===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){B=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),de(M),B=k.pending,k.pending===k.pending_buf_size)){Q=1;break}Q=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,X(k,Q)}while(Q!==0);k.gzhead.hcrc&&k.pending>B&&(M.adler=c(M.adler,k.pending_buf,k.pending-B,B)),Q===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&de(M),k.pending+2<=k.pending_buf_size&&(X(k,255&M.adler),X(k,M.adler>>8&255),M.adler=0,k.status=U)):k.status=U),k.pending!==0){if(de(M),M.avail_out===0)return k.last_flush=-1,m}else if(M.avail_in===0&&le(ge)<=le(ee)&&ge!==g)return ue(M,-5);if(k.status===666&&M.avail_in!==0)return ue(M,-5);if(M.avail_in!==0||k.lookahead!==0||ge!==h&&k.status!==666){var J=k.strategy===2?function(K,te){for(var me;;){if(K.lookahead===0&&(ae(K),K.lookahead===0)){if(te===h)return D;break}if(K.match_length=0,me=l._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,me&&(L(K,!1),K.strm.avail_out===0))return D}return K.insert=0,te===g?(L(K,!0),K.strm.avail_out===0?P:G):K.last_lit&&(L(K,!1),K.strm.avail_out===0)?D:H}(k,ge):k.strategy===3?function(K,te){for(var me,fe,xe,_e,je=K.window;;){if(K.lookahead<=R){if(ae(K),K.lookahead<=R&&te===h)return D;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=A&&0<K.strstart&&(fe=je[xe=K.strstart-1])===je[++xe]&&fe===je[++xe]&&fe===je[++xe]){_e=K.strstart+R;do;while(fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&fe===je[++xe]&&xe<_e);K.match_length=R-(_e-xe),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=A?(me=l._tr_tally(K,1,K.match_length-A),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(me=l._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),me&&(L(K,!1),K.strm.avail_out===0))return D}return K.insert=0,te===g?(L(K,!0),K.strm.avail_out===0?P:G):K.last_lit&&(L(K,!1),K.strm.avail_out===0)?D:H}(k,ge):s[k.level].func(k,ge);if(J!==P&&J!==G||(k.status=666),J===D||J===P)return M.avail_out===0&&(k.last_flush=-1),m;if(J===H&&(ge===1?l._tr_align(k):ge!==5&&(l._tr_stored_block(k,0,0,!1),ge===3&&(pe(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),de(M),M.avail_out===0))return k.last_flush=-1,m}return ge!==g?m:k.wrap<=0?1:(k.wrap===2?(X(k,255&M.adler),X(k,M.adler>>8&255),X(k,M.adler>>16&255),X(k,M.adler>>24&255),X(k,255&M.total_in),X(k,M.total_in>>8&255),X(k,M.total_in>>16&255),X(k,M.total_in>>24&255)):(V(k,M.adler>>>16),V(k,65535&M.adler)),de(M),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?m:1)},a.deflateEnd=function(M){var ge;return M&&M.state?(ge=M.state.status)!==O&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==U&&ge!==666?ue(M,v):(M.state=null,ge===U?ue(M,-3):m):v},a.deflateSetDictionary=function(M,ge){var ee,k,B,Q,Z,J,K,te,me=ge.length;if(!M||!M.state||(Q=(ee=M.state).wrap)===2||Q===1&&ee.status!==O||ee.lookahead)return v;for(Q===1&&(M.adler=u(M.adler,ge,me,0)),ee.wrap=0,me>=ee.w_size&&(Q===0&&(pe(ee.head),ee.strstart=0,ee.block_start=0,ee.insert=0),te=new o.Buf8(ee.w_size),o.arraySet(te,ge,me-ee.w_size,ee.w_size,0),ge=te,me=ee.w_size),Z=M.avail_in,J=M.next_in,K=M.input,M.avail_in=me,M.next_in=0,M.input=ge,ae(ee);ee.lookahead>=A;){for(k=ee.strstart,B=ee.lookahead-(A-1);ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[k+A-1])&ee.hash_mask,ee.prev[k&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=k,k++,--B;);ee.strstart=k,ee.lookahead=A-1,ae(ee)}return ee.strstart+=ee.lookahead,ee.block_start=ee.strstart,ee.insert=ee.lookahead,ee.lookahead=0,ee.match_length=ee.prev_length=A-1,ee.match_available=0,M.next_in=J,M.input=K,M.avail_in=Z,ee.wrap=Q,m},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(s,o){var l,u,c,d,h,g,m,v,x,b,y,S,_,N,j,E,T,F,A,R,I,O,U,D,H;l=s.state,u=s.next_in,D=s.input,c=u+(s.avail_in-5),d=s.next_out,H=s.output,h=d-(o-s.avail_out),g=d+(s.avail_out-257),m=l.dmax,v=l.wsize,x=l.whave,b=l.wnext,y=l.window,S=l.hold,_=l.bits,N=l.lencode,j=l.distcode,E=(1<<l.lenbits)-1,T=(1<<l.distbits)-1;e:do{_<15&&(S+=D[u++]<<_,_+=8,S+=D[u++]<<_,_+=8),F=N[S&E];t:for(;;){if(S>>>=A=F>>>24,_-=A,(A=F>>>16&255)===0)H[d++]=65535&F;else{if(!(16&A)){if((64&A)==0){F=N[(65535&F)+(S&(1<<A)-1)];continue t}if(32&A){l.mode=12;break e}s.msg="invalid literal/length code",l.mode=30;break e}R=65535&F,(A&=15)&&(_<A&&(S+=D[u++]<<_,_+=8),R+=S&(1<<A)-1,S>>>=A,_-=A),_<15&&(S+=D[u++]<<_,_+=8,S+=D[u++]<<_,_+=8),F=j[S&T];r:for(;;){if(S>>>=A=F>>>24,_-=A,!(16&(A=F>>>16&255))){if((64&A)==0){F=j[(65535&F)+(S&(1<<A)-1)];continue r}s.msg="invalid distance code",l.mode=30;break e}if(I=65535&F,_<(A&=15)&&(S+=D[u++]<<_,(_+=8)<A&&(S+=D[u++]<<_,_+=8)),m<(I+=S&(1<<A)-1)){s.msg="invalid distance too far back",l.mode=30;break e}if(S>>>=A,_-=A,(A=d-h)<I){if(x<(A=I-A)&&l.sane){s.msg="invalid distance too far back",l.mode=30;break e}if(U=y,(O=0)===b){if(O+=v-A,A<R){for(R-=A;H[d++]=y[O++],--A;);O=d-I,U=H}}else if(b<A){if(O+=v+b-A,(A-=b)<R){for(R-=A;H[d++]=y[O++],--A;);if(O=0,b<R){for(R-=A=b;H[d++]=y[O++],--A;);O=d-I,U=H}}}else if(O+=b-A,A<R){for(R-=A;H[d++]=y[O++],--A;);O=d-I,U=H}for(;2<R;)H[d++]=U[O++],H[d++]=U[O++],H[d++]=U[O++],R-=3;R&&(H[d++]=U[O++],1<R&&(H[d++]=U[O++]))}else{for(O=d-I;H[d++]=H[O++],H[d++]=H[O++],H[d++]=H[O++],2<(R-=3););R&&(H[d++]=H[O++],1<R&&(H[d++]=H[O++]))}break}}break}}while(u<c&&d<g);u-=R=_>>3,S&=(1<<(_-=R<<3))-1,s.next_in=u,s.next_out=d,s.avail_in=u<c?c-u+5:5-(u-c),s.avail_out=d<g?g-d+257:257-(d-g),l.hold=S,l.bits=_}},{}],49:[function(t,n,a){var s=t("../utils/common"),o=t("./adler32"),l=t("./crc32"),u=t("./inffast"),c=t("./inftrees"),d=1,h=2,g=0,m=-2,v=1,x=852,b=592;function y(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(O){var U;return O&&O.state?(U=O.state,O.total_in=O.total_out=U.total=0,O.msg="",U.wrap&&(O.adler=1&U.wrap),U.mode=v,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new s.Buf32(x),U.distcode=U.distdyn=new s.Buf32(b),U.sane=1,U.back=-1,g):m}function N(O){var U;return O&&O.state?((U=O.state).wsize=0,U.whave=0,U.wnext=0,_(O)):m}function j(O,U){var D,H;return O&&O.state?(H=O.state,U<0?(D=0,U=-U):(D=1+(U>>4),U<48&&(U&=15)),U&&(U<8||15<U)?m:(H.window!==null&&H.wbits!==U&&(H.window=null),H.wrap=D,H.wbits=U,N(O))):m}function E(O,U){var D,H;return O?(H=new S,(O.state=H).window=null,(D=j(O,U))!==g&&(O.state=null),D):m}var T,F,A=!0;function R(O){if(A){var U;for(T=new s.Buf32(512),F=new s.Buf32(32),U=0;U<144;)O.lens[U++]=8;for(;U<256;)O.lens[U++]=9;for(;U<280;)O.lens[U++]=7;for(;U<288;)O.lens[U++]=8;for(c(d,O.lens,0,288,T,0,O.work,{bits:9}),U=0;U<32;)O.lens[U++]=5;c(h,O.lens,0,32,F,0,O.work,{bits:5}),A=!1}O.lencode=T,O.lenbits=9,O.distcode=F,O.distbits=5}function I(O,U,D,H){var P,G=O.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),H>=G.wsize?(s.arraySet(G.window,U,D-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(H<(P=G.wsize-G.wnext)&&(P=H),s.arraySet(G.window,U,D-H,P,G.wnext),(H-=P)?(s.arraySet(G.window,U,D-H,H,0),G.wnext=H,G.whave=G.wsize):(G.wnext+=P,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=P))),0}a.inflateReset=N,a.inflateReset2=j,a.inflateResetKeep=_,a.inflateInit=function(O){return E(O,15)},a.inflateInit2=E,a.inflate=function(O,U){var D,H,P,G,ue,le,pe,de,L,X,V,se,ae,W,z,re,ne,ie,oe,ye,M,ge,ee,k,B=0,Q=new s.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return m;(D=O.state).mode===12&&(D.mode=13),ue=O.next_out,P=O.output,pe=O.avail_out,G=O.next_in,H=O.input,le=O.avail_in,de=D.hold,L=D.bits,X=le,V=pe,ge=g;e:for(;;)switch(D.mode){case v:if(D.wrap===0){D.mode=13;break}for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(2&D.wrap&&de===35615){Q[D.check=0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0),L=de=0,D.mode=2;break}if(D.flags=0,D.head&&(D.head.done=!1),!(1&D.wrap)||(((255&de)<<8)+(de>>8))%31){O.msg="incorrect header check",D.mode=30;break}if((15&de)!=8){O.msg="unknown compression method",D.mode=30;break}if(L-=4,M=8+(15&(de>>>=4)),D.wbits===0)D.wbits=M;else if(M>D.wbits){O.msg="invalid window size",D.mode=30;break}D.dmax=1<<M,O.adler=D.check=1,D.mode=512&de?10:12,L=de=0;break;case 2:for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(D.flags=de,(255&D.flags)!=8){O.msg="unknown compression method",D.mode=30;break}if(57344&D.flags){O.msg="unknown header flags set",D.mode=30;break}D.head&&(D.head.text=de>>8&1),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0,D.mode=3;case 3:for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.head&&(D.head.time=de),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,Q[2]=de>>>16&255,Q[3]=de>>>24&255,D.check=l(D.check,Q,4,0)),L=de=0,D.mode=4;case 4:for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.head&&(D.head.xflags=255&de,D.head.os=de>>8),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0,D.mode=5;case 5:if(1024&D.flags){for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.length=de,D.head&&(D.head.extra_len=de),512&D.flags&&(Q[0]=255&de,Q[1]=de>>>8&255,D.check=l(D.check,Q,2,0)),L=de=0}else D.head&&(D.head.extra=null);D.mode=6;case 6:if(1024&D.flags&&(le<(se=D.length)&&(se=le),se&&(D.head&&(M=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),s.arraySet(D.head.extra,H,G,se,M)),512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,D.length-=se),D.length))break e;D.length=0,D.mode=7;case 7:if(2048&D.flags){if(le===0)break e;for(se=0;M=H[G+se++],D.head&&M&&D.length<65536&&(D.head.name+=String.fromCharCode(M)),M&&se<le;);if(512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,M)break e}else D.head&&(D.head.name=null);D.length=0,D.mode=8;case 8:if(4096&D.flags){if(le===0)break e;for(se=0;M=H[G+se++],D.head&&M&&D.length<65536&&(D.head.comment+=String.fromCharCode(M)),M&&se<le;);if(512&D.flags&&(D.check=l(D.check,H,se,G)),le-=se,G+=se,M)break e}else D.head&&(D.head.comment=null);D.mode=9;case 9:if(512&D.flags){for(;L<16;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de!==(65535&D.check)){O.msg="header crc mismatch",D.mode=30;break}L=de=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),O.adler=D.check=0,D.mode=12;break;case 10:for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}O.adler=D.check=y(de),L=de=0,D.mode=11;case 11:if(D.havedict===0)return O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,2;O.adler=D.check=1,D.mode=12;case 12:if(U===5||U===6)break e;case 13:if(D.last){de>>>=7&L,L-=7&L,D.mode=27;break}for(;L<3;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}switch(D.last=1&de,L-=1,3&(de>>>=1)){case 0:D.mode=14;break;case 1:if(R(D),D.mode=20,U!==6)break;de>>>=2,L-=2;break e;case 2:D.mode=17;break;case 3:O.msg="invalid block type",D.mode=30}de>>>=2,L-=2;break;case 14:for(de>>>=7&L,L-=7&L;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if((65535&de)!=(de>>>16^65535)){O.msg="invalid stored block lengths",D.mode=30;break}if(D.length=65535&de,L=de=0,D.mode=15,U===6)break e;case 15:D.mode=16;case 16:if(se=D.length){if(le<se&&(se=le),pe<se&&(se=pe),se===0)break e;s.arraySet(P,H,G,se,ue),le-=se,G+=se,pe-=se,ue+=se,D.length-=se;break}D.mode=12;break;case 17:for(;L<14;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(D.nlen=257+(31&de),de>>>=5,L-=5,D.ndist=1+(31&de),de>>>=5,L-=5,D.ncode=4+(15&de),de>>>=4,L-=4,286<D.nlen||30<D.ndist){O.msg="too many length or distance symbols",D.mode=30;break}D.have=0,D.mode=18;case 18:for(;D.have<D.ncode;){for(;L<3;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.lens[Z[D.have++]]=7&de,de>>>=3,L-=3}for(;D.have<19;)D.lens[Z[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,ee={bits:D.lenbits},ge=c(0,D.lens,0,19,D.lencode,0,D.work,ee),D.lenbits=ee.bits,ge){O.msg="invalid code lengths set",D.mode=30;break}D.have=0,D.mode=19;case 19:for(;D.have<D.nlen+D.ndist;){for(;re=(B=D.lencode[de&(1<<D.lenbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(ne<16)de>>>=z,L-=z,D.lens[D.have++]=ne;else{if(ne===16){for(k=z+2;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de>>>=z,L-=z,D.have===0){O.msg="invalid bit length repeat",D.mode=30;break}M=D.lens[D.have-1],se=3+(3&de),de>>>=2,L-=2}else if(ne===17){for(k=z+3;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}L-=z,M=0,se=3+(7&(de>>>=z)),de>>>=3,L-=3}else{for(k=z+7;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}L-=z,M=0,se=11+(127&(de>>>=z)),de>>>=7,L-=7}if(D.have+se>D.nlen+D.ndist){O.msg="invalid bit length repeat",D.mode=30;break}for(;se--;)D.lens[D.have++]=M}}if(D.mode===30)break;if(D.lens[256]===0){O.msg="invalid code -- missing end-of-block",D.mode=30;break}if(D.lenbits=9,ee={bits:D.lenbits},ge=c(d,D.lens,0,D.nlen,D.lencode,0,D.work,ee),D.lenbits=ee.bits,ge){O.msg="invalid literal/lengths set",D.mode=30;break}if(D.distbits=6,D.distcode=D.distdyn,ee={bits:D.distbits},ge=c(h,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,ee),D.distbits=ee.bits,ge){O.msg="invalid distances set",D.mode=30;break}if(D.mode=20,U===6)break e;case 20:D.mode=21;case 21:if(6<=le&&258<=pe){O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,u(O,V),ue=O.next_out,P=O.output,pe=O.avail_out,G=O.next_in,H=O.input,le=O.avail_in,de=D.hold,L=D.bits,D.mode===12&&(D.back=-1);break}for(D.back=0;re=(B=D.lencode[de&(1<<D.lenbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(re&&(240&re)==0){for(ie=z,oe=re,ye=ne;re=(B=D.lencode[ye+((de&(1<<ie+oe)-1)>>ie)])>>>16&255,ne=65535&B,!(ie+(z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}de>>>=ie,L-=ie,D.back+=ie}if(de>>>=z,L-=z,D.back+=z,D.length=ne,re===0){D.mode=26;break}if(32&re){D.back=-1,D.mode=12;break}if(64&re){O.msg="invalid literal/length code",D.mode=30;break}D.extra=15&re,D.mode=22;case 22:if(D.extra){for(k=D.extra;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.length+=de&(1<<D.extra)-1,de>>>=D.extra,L-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=23;case 23:for(;re=(B=D.distcode[de&(1<<D.distbits)-1])>>>16&255,ne=65535&B,!((z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if((240&re)==0){for(ie=z,oe=re,ye=ne;re=(B=D.distcode[ye+((de&(1<<ie+oe)-1)>>ie)])>>>16&255,ne=65535&B,!(ie+(z=B>>>24)<=L);){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}de>>>=ie,L-=ie,D.back+=ie}if(de>>>=z,L-=z,D.back+=z,64&re){O.msg="invalid distance code",D.mode=30;break}D.offset=ne,D.extra=15&re,D.mode=24;case 24:if(D.extra){for(k=D.extra;L<k;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}D.offset+=de&(1<<D.extra)-1,de>>>=D.extra,L-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){O.msg="invalid distance too far back",D.mode=30;break}D.mode=25;case 25:if(pe===0)break e;if(se=V-pe,D.offset>se){if((se=D.offset-se)>D.whave&&D.sane){O.msg="invalid distance too far back",D.mode=30;break}ae=se>D.wnext?(se-=D.wnext,D.wsize-se):D.wnext-se,se>D.length&&(se=D.length),W=D.window}else W=P,ae=ue-D.offset,se=D.length;for(pe<se&&(se=pe),pe-=se,D.length-=se;P[ue++]=W[ae++],--se;);D.length===0&&(D.mode=21);break;case 26:if(pe===0)break e;P[ue++]=D.length,pe--,D.mode=21;break;case 27:if(D.wrap){for(;L<32;){if(le===0)break e;le--,de|=H[G++]<<L,L+=8}if(V-=pe,O.total_out+=V,D.total+=V,V&&(O.adler=D.check=D.flags?l(D.check,P,V,ue-V):o(D.check,P,V,ue-V)),V=pe,(D.flags?de:y(de))!==D.check){O.msg="incorrect data check",D.mode=30;break}L=de=0}D.mode=28;case 28:if(D.wrap&&D.flags){for(;L<32;){if(le===0)break e;le--,de+=H[G++]<<L,L+=8}if(de!==(4294967295&D.total)){O.msg="incorrect length check",D.mode=30;break}L=de=0}D.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return m}return O.next_out=ue,O.avail_out=pe,O.next_in=G,O.avail_in=le,D.hold=de,D.bits=L,(D.wsize||V!==O.avail_out&&D.mode<30&&(D.mode<27||U!==4))&&I(O,O.output,O.next_out,V-O.avail_out)?(D.mode=31,-4):(X-=O.avail_in,V-=O.avail_out,O.total_in+=X,O.total_out+=V,D.total+=V,D.wrap&&V&&(O.adler=D.check=D.flags?l(D.check,P,V,O.next_out-V):o(D.check,P,V,O.next_out-V)),O.data_type=D.bits+(D.last?64:0)+(D.mode===12?128:0)+(D.mode===20||D.mode===15?256:0),(X==0&&V===0||U===4)&&ge===g&&(ge=-5),ge)},a.inflateEnd=function(O){if(!O||!O.state)return m;var U=O.state;return U.window&&(U.window=null),O.state=null,g},a.inflateGetHeader=function(O,U){var D;return O&&O.state?(2&(D=O.state).wrap)==0?m:((D.head=U).done=!1,g):m},a.inflateSetDictionary=function(O,U){var D,H=U.length;return O&&O.state?(D=O.state).wrap!==0&&D.mode!==11?m:D.mode===11&&o(1,U,H,0)!==D.check?-3:I(O,U,H,H)?(D.mode=31,-4):(D.havedict=1,g):m},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,h,g,m,v,x,b,y){var S,_,N,j,E,T,F,A,R,I=y.bits,O=0,U=0,D=0,H=0,P=0,G=0,ue=0,le=0,pe=0,de=0,L=null,X=0,V=new s.Buf16(16),se=new s.Buf16(16),ae=null,W=0;for(O=0;O<=15;O++)V[O]=0;for(U=0;U<m;U++)V[h[g+U]]++;for(P=I,H=15;1<=H&&V[H]===0;H--);if(H<P&&(P=H),H===0)return v[x++]=20971520,v[x++]=20971520,y.bits=1,0;for(D=1;D<H&&V[D]===0;D++);for(P<D&&(P=D),O=le=1;O<=15;O++)if(le<<=1,(le-=V[O])<0)return-1;if(0<le&&(d===0||H!==1))return-1;for(se[1]=0,O=1;O<15;O++)se[O+1]=se[O]+V[O];for(U=0;U<m;U++)h[g+U]!==0&&(b[se[h[g+U]]++]=U);if(T=d===0?(L=ae=b,19):d===1?(L=o,X-=257,ae=l,W-=257,256):(L=u,ae=c,-1),O=D,E=x,ue=U=de=0,N=-1,j=(pe=1<<(G=P))-1,d===1&&852<pe||d===2&&592<pe)return 1;for(;;){for(F=O-ue,R=b[U]<T?(A=0,b[U]):b[U]>T?(A=ae[W+b[U]],L[X+b[U]]):(A=96,0),S=1<<O-ue,D=_=1<<G;v[E+(de>>ue)+(_-=S)]=F<<24|A<<16|R|0,_!==0;);for(S=1<<O-1;de&S;)S>>=1;if(S!==0?(de&=S-1,de+=S):de=0,U++,--V[O]==0){if(O===H)break;O=h[g+b[U]]}if(P<O&&(de&j)!==N){for(ue===0&&(ue=P),E+=D,le=1<<(G=O-ue);G+ue<H&&!((le-=V[G+ue])<=0);)G++,le<<=1;if(pe+=1<<G,d===1&&852<pe||d===2&&592<pe)return 1;v[N=de&j]=P<<24|G<<16|E-x|0}}return de!==0&&(v[E+de]=O-ue<<24|64<<16|0),y.bits=P,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var s=t("../utils/common"),o=0,l=1;function u(B){for(var Q=B.length;0<=--Q;)B[Q]=0}var c=0,d=29,h=256,g=h+1+d,m=30,v=19,x=2*g+1,b=15,y=16,S=7,_=256,N=16,j=17,E=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(g+2));u(I);var O=new Array(2*m);u(O);var U=new Array(512);u(U);var D=new Array(256);u(D);var H=new Array(d);u(H);var P,G,ue,le=new Array(m);function pe(B,Q,Z,J,K){this.static_tree=B,this.extra_bits=Q,this.extra_base=Z,this.elems=J,this.max_length=K,this.has_stree=B&&B.length}function de(B,Q){this.dyn_tree=B,this.max_code=0,this.stat_desc=Q}function L(B){return B<256?U[B]:U[256+(B>>>7)]}function X(B,Q){B.pending_buf[B.pending++]=255&Q,B.pending_buf[B.pending++]=Q>>>8&255}function V(B,Q,Z){B.bi_valid>y-Z?(B.bi_buf|=Q<<B.bi_valid&65535,X(B,B.bi_buf),B.bi_buf=Q>>y-B.bi_valid,B.bi_valid+=Z-y):(B.bi_buf|=Q<<B.bi_valid&65535,B.bi_valid+=Z)}function se(B,Q,Z){V(B,Z[2*Q],Z[2*Q+1])}function ae(B,Q){for(var Z=0;Z|=1&B,B>>>=1,Z<<=1,0<--Q;);return Z>>>1}function W(B,Q,Z){var J,K,te=new Array(b+1),me=0;for(J=1;J<=b;J++)te[J]=me=me+Z[J-1]<<1;for(K=0;K<=Q;K++){var fe=B[2*K+1];fe!==0&&(B[2*K]=ae(te[fe]++,fe))}}function z(B){var Q;for(Q=0;Q<g;Q++)B.dyn_ltree[2*Q]=0;for(Q=0;Q<m;Q++)B.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)B.bl_tree[2*Q]=0;B.dyn_ltree[2*_]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function re(B){8<B.bi_valid?X(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function ne(B,Q,Z,J){var K=2*Q,te=2*Z;return B[K]<B[te]||B[K]===B[te]&&J[Q]<=J[Z]}function ie(B,Q,Z){for(var J=B.heap[Z],K=Z<<1;K<=B.heap_len&&(K<B.heap_len&&ne(Q,B.heap[K+1],B.heap[K],B.depth)&&K++,!ne(Q,J,B.heap[K],B.depth));)B.heap[Z]=B.heap[K],Z=K,K<<=1;B.heap[Z]=J}function oe(B,Q,Z){var J,K,te,me,fe=0;if(B.last_lit!==0)for(;J=B.pending_buf[B.d_buf+2*fe]<<8|B.pending_buf[B.d_buf+2*fe+1],K=B.pending_buf[B.l_buf+fe],fe++,J===0?se(B,K,Q):(se(B,(te=D[K])+h+1,Q),(me=T[te])!==0&&V(B,K-=H[te],me),se(B,te=L(--J),Z),(me=F[te])!==0&&V(B,J-=le[te],me)),fe<B.last_lit;);se(B,_,Q)}function ye(B,Q){var Z,J,K,te=Q.dyn_tree,me=Q.stat_desc.static_tree,fe=Q.stat_desc.has_stree,xe=Q.stat_desc.elems,_e=-1;for(B.heap_len=0,B.heap_max=x,Z=0;Z<xe;Z++)te[2*Z]!==0?(B.heap[++B.heap_len]=_e=Z,B.depth[Z]=0):te[2*Z+1]=0;for(;B.heap_len<2;)te[2*(K=B.heap[++B.heap_len]=_e<2?++_e:0)]=1,B.depth[K]=0,B.opt_len--,fe&&(B.static_len-=me[2*K+1]);for(Q.max_code=_e,Z=B.heap_len>>1;1<=Z;Z--)ie(B,te,Z);for(K=xe;Z=B.heap[1],B.heap[1]=B.heap[B.heap_len--],ie(B,te,1),J=B.heap[1],B.heap[--B.heap_max]=Z,B.heap[--B.heap_max]=J,te[2*K]=te[2*Z]+te[2*J],B.depth[K]=(B.depth[Z]>=B.depth[J]?B.depth[Z]:B.depth[J])+1,te[2*Z+1]=te[2*J+1]=K,B.heap[1]=K++,ie(B,te,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(je,Be){var Re,ze,Ye,Le,it,ht,ce=Be.dyn_tree,be=Be.max_code,Fe=Be.stat_desc.static_tree,$e=Be.stat_desc.has_stree,vt=Be.stat_desc.extra_bits,Nt=Be.stat_desc.extra_base,Qt=Be.stat_desc.max_length,Vr=0;for(Le=0;Le<=b;Le++)je.bl_count[Le]=0;for(ce[2*je.heap[je.heap_max]+1]=0,Re=je.heap_max+1;Re<x;Re++)Qt<(Le=ce[2*ce[2*(ze=je.heap[Re])+1]+1]+1)&&(Le=Qt,Vr++),ce[2*ze+1]=Le,be<ze||(je.bl_count[Le]++,it=0,Nt<=ze&&(it=vt[ze-Nt]),ht=ce[2*ze],je.opt_len+=ht*(Le+it),$e&&(je.static_len+=ht*(Fe[2*ze+1]+it)));if(Vr!==0){do{for(Le=Qt-1;je.bl_count[Le]===0;)Le--;je.bl_count[Le]--,je.bl_count[Le+1]+=2,je.bl_count[Qt]--,Vr-=2}while(0<Vr);for(Le=Qt;Le!==0;Le--)for(ze=je.bl_count[Le];ze!==0;)be<(Ye=je.heap[--Re])||(ce[2*Ye+1]!==Le&&(je.opt_len+=(Le-ce[2*Ye+1])*ce[2*Ye],ce[2*Ye+1]=Le),ze--)}}(B,Q),W(te,_e,B.bl_count)}function M(B,Q,Z){var J,K,te=-1,me=Q[1],fe=0,xe=7,_e=4;for(me===0&&(xe=138,_e=3),Q[2*(Z+1)+1]=65535,J=0;J<=Z;J++)K=me,me=Q[2*(J+1)+1],++fe<xe&&K===me||(fe<_e?B.bl_tree[2*K]+=fe:K!==0?(K!==te&&B.bl_tree[2*K]++,B.bl_tree[2*N]++):fe<=10?B.bl_tree[2*j]++:B.bl_tree[2*E]++,te=K,_e=(fe=0)===me?(xe=138,3):K===me?(xe=6,3):(xe=7,4))}function ge(B,Q,Z){var J,K,te=-1,me=Q[1],fe=0,xe=7,_e=4;for(me===0&&(xe=138,_e=3),J=0;J<=Z;J++)if(K=me,me=Q[2*(J+1)+1],!(++fe<xe&&K===me)){if(fe<_e)for(;se(B,K,B.bl_tree),--fe!=0;);else K!==0?(K!==te&&(se(B,K,B.bl_tree),fe--),se(B,N,B.bl_tree),V(B,fe-3,2)):fe<=10?(se(B,j,B.bl_tree),V(B,fe-3,3)):(se(B,E,B.bl_tree),V(B,fe-11,7));te=K,_e=(fe=0)===me?(xe=138,3):K===me?(xe=6,3):(xe=7,4)}}u(le);var ee=!1;function k(B,Q,Z,J){V(B,(c<<1)+(J?1:0),3),function(K,te,me,fe){re(K),X(K,me),X(K,~me),s.arraySet(K.pending_buf,K.window,te,me,K.pending),K.pending+=me}(B,Q,Z)}a._tr_init=function(B){ee||(function(){var Q,Z,J,K,te,me=new Array(b+1);for(K=J=0;K<d-1;K++)for(H[K]=J,Q=0;Q<1<<T[K];Q++)D[J++]=K;for(D[J-1]=K,K=te=0;K<16;K++)for(le[K]=te,Q=0;Q<1<<F[K];Q++)U[te++]=K;for(te>>=7;K<m;K++)for(le[K]=te<<7,Q=0;Q<1<<F[K]-7;Q++)U[256+te++]=K;for(Z=0;Z<=b;Z++)me[Z]=0;for(Q=0;Q<=143;)I[2*Q+1]=8,Q++,me[8]++;for(;Q<=255;)I[2*Q+1]=9,Q++,me[9]++;for(;Q<=279;)I[2*Q+1]=7,Q++,me[7]++;for(;Q<=287;)I[2*Q+1]=8,Q++,me[8]++;for(W(I,g+1,me),Q=0;Q<m;Q++)O[2*Q+1]=5,O[2*Q]=ae(Q,5);P=new pe(I,T,h+1,g,b),G=new pe(O,F,0,m,b),ue=new pe(new Array(0),A,0,v,S)}(),ee=!0),B.l_desc=new de(B.dyn_ltree,P),B.d_desc=new de(B.dyn_dtree,G),B.bl_desc=new de(B.bl_tree,ue),B.bi_buf=0,B.bi_valid=0,z(B)},a._tr_stored_block=k,a._tr_flush_block=function(B,Q,Z,J){var K,te,me=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(fe){var xe,_e=4093624447;for(xe=0;xe<=31;xe++,_e>>>=1)if(1&_e&&fe.dyn_ltree[2*xe]!==0)return o;if(fe.dyn_ltree[18]!==0||fe.dyn_ltree[20]!==0||fe.dyn_ltree[26]!==0)return l;for(xe=32;xe<h;xe++)if(fe.dyn_ltree[2*xe]!==0)return l;return o}(B)),ye(B,B.l_desc),ye(B,B.d_desc),me=function(fe){var xe;for(M(fe,fe.dyn_ltree,fe.l_desc.max_code),M(fe,fe.dyn_dtree,fe.d_desc.max_code),ye(fe,fe.bl_desc),xe=v-1;3<=xe&&fe.bl_tree[2*R[xe]+1]===0;xe--);return fe.opt_len+=3*(xe+1)+5+5+4,xe}(B),K=B.opt_len+3+7>>>3,(te=B.static_len+3+7>>>3)<=K&&(K=te)):K=te=Z+5,Z+4<=K&&Q!==-1?k(B,Q,Z,J):B.strategy===4||te===K?(V(B,2+(J?1:0),3),oe(B,I,O)):(V(B,4+(J?1:0),3),function(fe,xe,_e,je){var Be;for(V(fe,xe-257,5),V(fe,_e-1,5),V(fe,je-4,4),Be=0;Be<je;Be++)V(fe,fe.bl_tree[2*R[Be]+1],3);ge(fe,fe.dyn_ltree,xe-1),ge(fe,fe.dyn_dtree,_e-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,me+1),oe(B,B.dyn_ltree,B.dyn_dtree)),z(B),J&&re(B)},a._tr_tally=function(B,Q,Z){return B.pending_buf[B.d_buf+2*B.last_lit]=Q>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&Q,B.pending_buf[B.l_buf+B.last_lit]=255&Z,B.last_lit++,Q===0?B.dyn_ltree[2*Z]++:(B.matches++,Q--,B.dyn_ltree[2*(D[Z]+h+1)]++,B.dyn_dtree[2*L(Q)]++),B.last_lit===B.lit_bufsize-1},a._tr_align=function(B){V(B,2,3),se(B,_,I),function(Q){Q.bi_valid===16?(X(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(s){(function(o,l){if(!o.setImmediate){var u,c,d,h,g=1,m={},v=!1,x=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,u={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){S(N)})}:function(){if(o.postMessage&&!o.importScripts){var N=!0,j=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=j,N}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(N){o.postMessage(h+N,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(N){S(N.data)},function(N){d.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(c=x.documentElement,function(N){var j=x.createElement("script");j.onreadystatechange=function(){S(N),j.onreadystatechange=null,c.removeChild(j),j=null},c.appendChild(j)}):function(N){setTimeout(S,0,N)},b.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var j=new Array(arguments.length-1),E=0;E<j.length;E++)j[E]=arguments[E+1];var T={callback:N,args:j};return m[g]=T,u(g),g++},b.clearImmediate=y}function y(N){delete m[N]}function S(N){if(v)setTimeout(S,0,N);else{var j=m[N];if(j){v=!0;try{(function(E){var T=E.callback,F=E.args;switch(F.length){case 0:T();break;case 1:T(F[0]);break;case 2:T(F[0],F[1]);break;case 3:T(F[0],F[1],F[2]);break;default:T.apply(l,F)}})(j)}finally{y(N),v=!1}}}}function _(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(h)===0&&S(+N.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(V1)),V1.exports}var EV=jV();const C0=Df(EV);function kn(){return kn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kn.apply(null,arguments)}var dD={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Ni(r,e){if(Tm(r,e))return r[e];throw typeof r[e]=="function"&&Ab(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ju(r,e,t){if(Tm(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function Tm(r,e){return!TV(r)&&!Array.isArray(r)?!1:Ct(CV,e)?!0:!(e in Object.prototype||e in Function.prototype)}function AV(r,e){if(!Ab(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function Ab(r,e){return r==null||typeof r[e]!="function"||Ct(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Ct(DV,e)?!0:!(e in Object.prototype||e in Function.prototype)}function TV(r){return typeof r=="object"&&r&&r.constructor===Object}var CV={length:!0,name:!0},DV={toString:!0,valueOf:!0,toLocaleString:!0};class yp{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Ni(this.wrappedObject,e)}set(e,t){return ju(this.wrappedObject,e,t),this}has(e){return Tm(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return hD(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){Tm(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class fD{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return hD(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function hD(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function Sf(){return new Map}function mu(r){if(!r)return Sf();if(pD(r))return r;if(wp(r))return new yp(r);throw new Error("createMap can create maps from objects or Maps")}function kV(r){if(r instanceof yp)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);ju(e,t,n)}return e}function Kt(r){return typeof r=="number"}function Xt(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function mf(r){return typeof r=="bigint"}function Ws(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function $f(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function Ji(r){return r&&r.constructor.prototype.isUnit===!0||!1}function fi(r){return typeof r=="string"}var Mr=Array.isArray;function Lt(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function ja(r){return Array.isArray(r)||Lt(r)}function Cm(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Bl(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Tb(r){return r&&r.constructor.prototype.isRange===!0||!1}function bp(r){return r&&r.constructor.prototype.isIndex===!0||!1}function MV(r){return typeof r=="boolean"}function FV(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function mD(r){return r&&r.constructor.prototype.isHelp===!0||!1}function OV(r){return typeof r=="function"}function BV(r){return r instanceof Date}function RV(r){return r instanceof RegExp}function wp(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!Ws(r)&&!$f(r))}function pD(r){return r?r instanceof Map||r instanceof yp||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function LV(r){return r===null}function IV(r){return r===void 0}function Ul(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function wa(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function zV(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function PV(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function qV(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function dr(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function wy(r){return dr(r)||pn(r)&&r.args.length===1&&dr(r.args[0])&&"-+~".includes(r.op)}function Uf(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Qo(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function Iu(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ar(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function _p(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function pn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Zs(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function $V(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function UV(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Hn(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function gD(r){return r&&r.constructor.prototype.isChain===!0||!1}function Or(r){var e=typeof r;return e==="object"?r===null?"null":Xt(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function Ht(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return Ht(t)});if(r instanceof Date)return new Date(r.valueOf());if(Xt(r))return r;if(wp(r))return HV(r,Ht);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function HV(r,e){var t={};for(var n in r)Ct(r,n)&&(t[n]=e(r[n]));return t}function xD(r,e){for(var t in e)Ct(e,t)&&(r[t]=e[t]);return r}function Js(r,e){var t,n,a;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,a=r.length;n<a;n++)if(!Js(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Js(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function VV(r,e,t){var n=!0,a;Object.defineProperty(r,e,{get:function(){return n&&(a=t(),n=!1),a},set:function(o){a=o,n=!1},configurable:!0,enumerable:!0})}function Ct(r,e){return r&&Object.hasOwnProperty.call(r,e)}function GV(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],s=r[a];s!==void 0&&(t[a]=s)}return t}var QV=["Matrix","Array"],WV=["number","BigNumber","Fraction"],tt=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(dD)};kn(tt,dD,{MATRIX_OPTIONS:QV,NUMBER_OPTIONS:WV});function J3(){return!0}function ga(){return!1}function Wc(){}const ej="Argument is not a typed-function.";function vD(){function r(te){return typeof te=="object"&&te!==null&&te.constructor===Object}const e=[{name:"number",test:function(te){return typeof te=="number"}},{name:"string",test:function(te){return typeof te=="string"}},{name:"boolean",test:function(te){return typeof te=="boolean"}},{name:"Function",test:function(te){return typeof te=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(te){return te instanceof Date}},{name:"RegExp",test:function(te){return te instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(te){return te===null}},{name:"undefined",test:function(te){return te===void 0}}],t={name:"any",test:J3,isAny:!0};let n,a,s=0,o={createCount:0};function l(te){const me=n.get(te);if(me)return me;let fe='Unknown type "'+te+'"';const xe=te.toLowerCase();let _e;for(_e of a)if(_e.toLowerCase()===xe){fe+='. Did you mean "'+_e+'" ?';break}throw new TypeError(fe)}function u(te){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const fe=me?l(me).index:a.length,xe=[];for(let je=0;je<te.length;++je){if(!te[je]||typeof te[je].name!="string"||typeof te[je].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Be=te[je].name;if(n.has(Be))throw new TypeError('Duplicate type name "'+Be+'"');xe.push(Be),n.set(Be,{name:Be,test:te[je].test,isAny:te[je].isAny,index:fe+je,conversionsTo:[]})}const _e=a.slice(fe);a=a.slice(0,fe).concat(xe).concat(_e);for(let je=fe+xe.length;je<a.length;++je)n.get(a[je]).index=je}function c(){n=new Map,a=[],s=0,u([t],!1)}c(),u(e);function d(){let te;for(te of a)n.get(te).conversionsTo=[];s=0}function h(te){const me=a.filter(fe=>{const xe=n.get(fe);return!xe.isAny&&xe.test(te)});return me.length?me:["any"]}function g(te){return te&&typeof te=="function"&&"_typedFunctionData"in te}function m(te,me,fe){if(!g(te))throw new TypeError(ej);const xe=fe&&fe.exact,_e=Array.isArray(me)?me.join(","):me,je=N(_e),Be=b(je);if(!xe||Be in te.signatures){const Le=te._typedFunctionData.signatureMap.get(Be);if(Le)return Le}const Re=je.length;let ze;if(xe){ze=[];let Le;for(Le in te.signatures)ze.push(te._typedFunctionData.signatureMap.get(Le))}else ze=te._typedFunctionData.signatures;for(let Le=0;Le<Re;++Le){const it=je[Le],ht=[];let ce;for(ce of ze){const be=F(ce.params,Le);if(!(!be||it.restParam&&!be.restParam)){if(!be.hasAny){const Fe=_(be);if(it.types.some($e=>!Fe.has($e.name)))continue}ht.push(ce)}}if(ze=ht,ze.length===0)break}let Ye;for(Ye of ze)if(Ye.params.length<=Re)return Ye;throw new TypeError("Signature not found (signature: "+(te.name||"unnamed")+"("+b(je,", ")+"))")}function v(te,me,fe){return m(te,me,fe).implementation}function x(te,me){const fe=l(me);if(fe.test(te))return te;const xe=fe.conversionsTo;if(xe.length===0)throw new Error("There are no conversions to "+me+" defined.");for(let _e=0;_e<xe.length;_e++)if(l(xe[_e].from).test(te))return xe[_e].convert(te);throw new Error("Cannot convert "+te+" to "+me)}function b(te){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return te.map(fe=>fe.name).join(me)}function y(te){const me=te.indexOf("...")===0,xe=(me?te.length>3?te.slice(3):"any":te).split("|").map(Re=>l(Re.trim()));let _e=!1,je=me?"...":"";return{types:xe.map(function(Re){return _e=Re.isAny||_e,je+=Re.name+"|",{name:Re.name,typeIndex:Re.index,test:Re.test,isAny:Re.isAny,conversion:null,conversionIndex:-1}}),name:je.slice(0,-1),hasAny:_e,hasConversion:!1,restParam:me}}function S(te){const me=te.types.map(Be=>Be.name),fe=G(me);let xe=te.hasAny,_e=te.name;const je=fe.map(function(Be){const Re=l(Be.from);return xe=Re.isAny||xe,_e+="|"+Be.from,{name:Be.from,typeIndex:Re.index,test:Re.test,isAny:Re.isAny,conversion:Be,conversionIndex:Be.index}});return{types:te.types.concat(je),name:_e,hasAny:xe,hasConversion:je.length>0,restParam:te.restParam}}function _(te){return te.typeSet||(te.typeSet=new Set,te.types.forEach(me=>te.typeSet.add(me.name))),te.typeSet}function N(te){const me=[];if(typeof te!="string")throw new TypeError("Signatures must be strings");const fe=te.trim();if(fe==="")return me;const xe=fe.split(",");for(let _e=0;_e<xe.length;++_e){const je=y(xe[_e].trim());if(je.restParam&&_e!==xe.length-1)throw new SyntaxError('Unexpected rest parameter "'+xe[_e]+'": only allowed for the last parameter');if(je.types.length===0)return null;me.push(je)}return me}function j(te){const me=re(te);return me?me.restParam:!1}function E(te){if(!te||te.types.length===0)return J3;if(te.types.length===1)return l(te.types[0].name).test;if(te.types.length===2){const me=l(te.types[0].name).test,fe=l(te.types[1].name).test;return function(_e){return me(_e)||fe(_e)}}else{const me=te.types.map(function(fe){return l(fe.name).test});return function(xe){for(let _e=0;_e<me.length;_e++)if(me[_e](xe))return!0;return!1}}}function T(te){let me,fe,xe;if(j(te)){me=z(te).map(E);const _e=me.length,je=E(re(te)),Be=function(Re){for(let ze=_e;ze<Re.length;ze++)if(!je(Re[ze]))return!1;return!0};return function(ze){for(let Ye=0;Ye<me.length;Ye++)if(!me[Ye](ze[Ye]))return!1;return Be(ze)&&ze.length>=_e+1}}else return te.length===0?function(je){return je.length===0}:te.length===1?(fe=E(te[0]),function(je){return fe(je[0])&&je.length===1}):te.length===2?(fe=E(te[0]),xe=E(te[1]),function(je){return fe(je[0])&&xe(je[1])&&je.length===2}):(me=te.map(E),function(je){for(let Be=0;Be<me.length;Be++)if(!me[Be](je[Be]))return!1;return je.length===me.length})}function F(te,me){return me<te.length?te[me]:j(te)?re(te):null}function A(te,me){const fe=F(te,me);return fe?_(fe):new Set}function R(te){return te.conversion===null||te.conversion===void 0}function I(te,me){const fe=new Set;return te.forEach(xe=>{const _e=A(xe.params,me);let je;for(je of _e)fe.add(je)}),fe.has("any")?["any"]:Array.from(fe)}function O(te,me,fe){let xe,_e;const je=te||"unnamed";let Be=fe,Re;for(Re=0;Re<me.length;Re++){const it=[];if(Be.forEach(ht=>{const ce=F(ht.params,Re),be=E(ce);(Re<ht.params.length||j(ht.params))&&be(me[Re])&&it.push(ht)}),it.length===0){if(_e=I(Be,Re),_e.length>0){const ht=h(me[Re]);return xe=new TypeError("Unexpected type of argument in function "+je+" (expected: "+_e.join(" or ")+", actual: "+ht.join(" | ")+", index: "+Re+")"),xe.data={category:"wrongType",fn:je,index:Re,actual:ht,expected:_e},xe}}else Be=it}const ze=Be.map(function(it){return j(it.params)?1/0:it.params.length});if(me.length<Math.min.apply(null,ze))return _e=I(Be,Re),xe=new TypeError("Too few arguments in function "+je+" (expected: "+_e.join(" or ")+", index: "+me.length+")"),xe.data={category:"tooFewArgs",fn:je,index:me.length,expected:_e},xe;const Ye=Math.max.apply(null,ze);if(me.length>Ye)return xe=new TypeError("Too many arguments in function "+je+" (expected: "+Ye+", actual: "+me.length+")"),xe.data={category:"tooManyArgs",fn:je,index:me.length,expectedLength:Ye},xe;const Le=[];for(let it=0;it<me.length;++it)Le.push(h(me[it]).join("|"));return xe=new TypeError('Arguments of type "'+Le.join(", ")+'" do not match any of the defined signatures of function '+je+"."),xe.data={category:"mismatch",actual:Le},xe}function U(te){let me=a.length+1;for(let fe=0;fe<te.types.length;fe++)R(te.types[fe])&&(me=Math.min(me,te.types[fe].typeIndex));return me}function D(te){let me=s+1;for(let fe=0;fe<te.types.length;fe++)R(te.types[fe])||(me=Math.min(me,te.types[fe].conversionIndex));return me}function H(te,me){if(te.hasAny){if(!me.hasAny)return 1}else if(me.hasAny)return-1;if(te.restParam){if(!me.restParam)return 1}else if(me.restParam)return-1;if(te.hasConversion){if(!me.hasConversion)return 1}else if(me.hasConversion)return-1;const fe=U(te)-U(me);if(fe<0)return-1;if(fe>0)return 1;const xe=D(te)-D(me);return xe<0?-1:xe>0?1:0}function P(te,me){const fe=te.params,xe=me.params,_e=re(fe),je=re(xe),Be=j(fe),Re=j(xe);if(Be&&_e.hasAny){if(!Re||!je.hasAny)return 1}else if(Re&&je.hasAny)return-1;let ze=0,Ye=0,Le;for(Le of fe)Le.hasAny&&++ze,Le.hasConversion&&++Ye;let it=0,ht=0;for(Le of xe)Le.hasAny&&++it,Le.hasConversion&&++ht;if(ze!==it)return ze-it;if(Be&&_e.hasConversion){if(!Re||!je.hasConversion)return 1}else if(Re&&je.hasConversion)return-1;if(Ye!==ht)return Ye-ht;if(Be){if(!Re)return 1}else if(Re)return-1;const ce=(fe.length-xe.length)*(Be?-1:1);if(ce!==0)return ce;const be=[];let Fe=0;for(let vt=0;vt<fe.length;++vt){const Nt=H(fe[vt],xe[vt]);be.push(Nt),Fe+=Nt}if(Fe!==0)return Fe;let $e;for($e of be)if($e!==0)return $e;return 0}function G(te){if(te.length===0)return[];const me=te.map(l);te.length>1&&me.sort((_e,je)=>_e.index-je.index);let fe=me[0].conversionsTo;if(te.length===1)return fe;fe=fe.concat([]);const xe=new Set(te);for(let _e=1;_e<me.length;++_e){let je;for(je of me[_e].conversionsTo)xe.has(je.from)||(fe.push(je),xe.add(je.from))}return fe}function ue(te,me){let fe=me;if(te.some(_e=>_e.hasConversion)){const _e=j(te),je=te.map(le);fe=function(){const Re=[],ze=_e?arguments.length-1:arguments.length;for(let Ye=0;Ye<ze;Ye++)Re[Ye]=je[Ye](arguments[Ye]);return _e&&(Re[ze]=arguments[ze].map(je[ze])),me.apply(this,Re)}}let xe=fe;if(j(te)){const _e=te.length-1;xe=function(){return fe.apply(this,ne(arguments,0,_e).concat([ne(arguments,_e)]))}}return xe}function le(te){let me,fe,xe,_e;const je=[],Be=[];switch(te.types.forEach(function(Re){Re.conversion&&(je.push(l(Re.conversion.from).test),Be.push(Re.conversion.convert))}),Be.length){case 0:return function(ze){return ze};case 1:return me=je[0],xe=Be[0],function(ze){return me(ze)?xe(ze):ze};case 2:return me=je[0],fe=je[1],xe=Be[0],_e=Be[1],function(ze){return me(ze)?xe(ze):fe(ze)?_e(ze):ze};default:return function(ze){for(let Ye=0;Ye<Be.length;Ye++)if(je[Ye](ze))return Be[Ye](ze);return ze}}}function pe(te){function me(fe,xe,_e){if(xe<fe.length){const je=fe[xe];let Be=[];if(je.restParam){const Re=je.types.filter(R);Re.length<je.types.length&&Be.push({types:Re,name:"..."+Re.map(ze=>ze.name).join("|"),hasAny:Re.some(ze=>ze.isAny),hasConversion:!1,restParam:!0}),Be.push(je)}else Be=je.types.map(function(Re){return{types:[Re],name:Re.name,hasAny:Re.isAny,hasConversion:Re.conversion,restParam:!1}});return oe(Be,function(Re){return me(fe,xe+1,_e.concat([Re]))})}else return[_e]}return me(te,0,[])}function de(te,me){const fe=Math.max(te.length,me.length);for(let Re=0;Re<fe;Re++){const ze=A(te,Re),Ye=A(me,Re);let Le=!1,it;for(it of Ye)if(ze.has(it)){Le=!0;break}if(!Le)return!1}const xe=te.length,_e=me.length,je=j(te),Be=j(me);return je?Be?xe===_e:_e>=xe:Be?xe>=_e:xe===_e}function L(te){return te.map(me=>k(me)?ge(me.referToSelf.callback):ee(me)?M(me.referTo.references,me.referTo.callback):me)}function X(te,me,fe){const xe=[];let _e;for(_e of te){let je=fe[_e];if(typeof je!="number")throw new TypeError('No definition for referenced signature "'+_e+'"');if(je=me[je],typeof je!="function")return!1;xe.push(je)}return xe}function V(te,me,fe){const xe=L(te),_e=new Array(xe.length).fill(!1);let je=!0;for(;je;){je=!1;let Be=!0;for(let Re=0;Re<xe.length;++Re){if(_e[Re])continue;const ze=xe[Re];if(k(ze))xe[Re]=ze.referToSelf.callback(fe),xe[Re].referToSelf=ze.referToSelf,_e[Re]=!0,Be=!1;else if(ee(ze)){const Ye=X(ze.referTo.references,xe,me);Ye?(xe[Re]=ze.referTo.callback.apply(this,Ye),xe[Re].referTo=ze.referTo,_e[Re]=!0,Be=!1):je=!0}}if(Be&&je)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return xe}function se(te){const me=/\bthis(\(|\.signatures\b)/;Object.keys(te).forEach(fe=>{const xe=te[fe];if(me.test(xe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ae(te,me){if(o.createCount++,Object.keys(me).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&se(me);const fe=[],xe=[],_e={},je=[];let Be;for(Be in me){if(!Object.prototype.hasOwnProperty.call(me,Be))continue;const ut=N(Be);if(!ut)continue;fe.forEach(function(yr){if(de(yr,ut))throw new TypeError('Conflicting signatures "'+b(yr)+'" and "'+b(ut)+'".')}),fe.push(ut);const Mt=xe.length;xe.push(me[Be]);const Er=ut.map(S);let vr;for(vr of pe(Er)){const yr=b(vr);je.push({params:vr,name:yr,fn:Mt}),vr.every(ka=>!ka.hasConversion)&&(_e[yr]=Mt)}}je.sort(P);const Re=V(xe,_e,pt);let ze;for(ze in _e)Object.prototype.hasOwnProperty.call(_e,ze)&&(_e[ze]=Re[_e[ze]]);const Ye=[],Le=new Map;for(ze of je)Le.has(ze.name)||(ze.fn=Re[ze.fn],Ye.push(ze),Le.set(ze.name,ze));const it=Ye[0]&&Ye[0].params.length<=2&&!j(Ye[0].params),ht=Ye[1]&&Ye[1].params.length<=2&&!j(Ye[1].params),ce=Ye[2]&&Ye[2].params.length<=2&&!j(Ye[2].params),be=Ye[3]&&Ye[3].params.length<=2&&!j(Ye[3].params),Fe=Ye[4]&&Ye[4].params.length<=2&&!j(Ye[4].params),$e=Ye[5]&&Ye[5].params.length<=2&&!j(Ye[5].params),vt=it&&ht&&ce&&be&&Fe&&$e;for(let ut=0;ut<Ye.length;++ut)Ye[ut].test=T(Ye[ut].params);const Nt=it?E(Ye[0].params[0]):ga,Qt=ht?E(Ye[1].params[0]):ga,Vr=ce?E(Ye[2].params[0]):ga,io=be?E(Ye[3].params[0]):ga,ao=Fe?E(Ye[4].params[0]):ga,Da=$e?E(Ye[5].params[0]):ga,Ns=it?E(Ye[0].params[1]):ga,so=ht?E(Ye[1].params[1]):ga,cl=ce?E(Ye[2].params[1]):ga,Te=be?E(Ye[3].params[1]):ga,Qe=Fe?E(Ye[4].params[1]):ga,At=$e?E(Ye[5].params[1]):ga;for(let ut=0;ut<Ye.length;++ut)Ye[ut].implementation=ue(Ye[ut].params,Ye[ut].fn);const fr=it?Ye[0].implementation:Wc,rn=ht?Ye[1].implementation:Wc,Xu=ce?Ye[2].implementation:Wc,we=be?Ye[3].implementation:Wc,De=Fe?Ye[4].implementation:Wc,Ee=$e?Ye[5].implementation:Wc,Ae=it?Ye[0].params.length:-1,Ce=ht?Ye[1].params.length:-1,ke=ce?Ye[2].params.length:-1,Ve=be?Ye[3].params.length:-1,Ze=Fe?Ye[4].params.length:-1,qe=$e?Ye[5].params.length:-1,Ge=vt?6:0,Ke=Ye.length,dt=Ye.map(ut=>ut.test),yt=Ye.map(ut=>ut.implementation),St=function(){for(let Mt=Ge;Mt<Ke;Mt++)if(dt[Mt](arguments))return yt[Mt].apply(this,arguments);return o.onMismatch(te,arguments,Ye)};function pt(ut,Mt){return arguments.length===Ae&&Nt(ut)&&Ns(Mt)?fr.apply(this,arguments):arguments.length===Ce&&Qt(ut)&&so(Mt)?rn.apply(this,arguments):arguments.length===ke&&Vr(ut)&&cl(Mt)?Xu.apply(this,arguments):arguments.length===Ve&&io(ut)&&Te(Mt)?we.apply(this,arguments):arguments.length===Ze&&ao(ut)&&Qe(Mt)?De.apply(this,arguments):arguments.length===qe&&Da(ut)&&At(Mt)?Ee.apply(this,arguments):St.apply(this,arguments)}try{Object.defineProperty(pt,"name",{value:te})}catch{}return pt.signatures=_e,pt._typedFunctionData={signatures:Ye,signatureMap:Le},pt}function W(te,me,fe){throw O(te,me,fe)}function z(te){return ne(te,0,te.length-1)}function re(te){return te[te.length-1]}function ne(te,me,fe){return Array.prototype.slice.call(te,me,fe)}function ie(te,me){for(let fe=0;fe<te.length;fe++)if(me(te[fe]))return te[fe]}function oe(te,me){return Array.prototype.concat.apply([],te.map(me))}function ye(){const te=z(arguments).map(fe=>b(N(fe))),me=re(arguments);if(typeof me!="function")throw new TypeError("Callback function expected as last argument");return M(te,me)}function M(te,me){return{referTo:{references:te,callback:me}}}function ge(te){if(typeof te!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:te}}}function ee(te){return te&&typeof te.referTo=="object"&&Array.isArray(te.referTo.references)&&typeof te.referTo.callback=="function"}function k(te){return te&&typeof te.referToSelf=="object"&&typeof te.referToSelf.callback=="function"}function B(te,me){if(!te)return me;if(me&&me!==te){const fe=new Error("Function names do not match (expected: "+te+", actual: "+me+")");throw fe.data={actual:me,expected:te},fe}return te}function Q(te){let me;for(const fe in te)Object.prototype.hasOwnProperty.call(te,fe)&&(g(te[fe])||typeof te[fe].signature=="string")&&(me=B(me,te[fe].name));return me}function Z(te,me){let fe;for(fe in me)if(Object.prototype.hasOwnProperty.call(me,fe)){if(fe in te&&me[fe]!==te[fe]){const xe=new Error('Signature "'+fe+'" is defined twice');throw xe.data={signature:fe,sourceFunction:me[fe],destFunction:te[fe]},xe}te[fe]=me[fe]}}const J=o;o=function(te){const me=typeof te=="string",fe=me?1:0;let xe=me?te:"";const _e={};for(let je=fe;je<arguments.length;++je){const Be=arguments[je];let Re={},ze;if(typeof Be=="function"?(ze=Be.name,typeof Be.signature=="string"?Re[Be.signature]=Be:g(Be)&&(Re=Be.signatures)):r(Be)&&(Re=Be,me||(ze=Q(Be))),Object.keys(Re).length===0){const Ye=new TypeError("Argument to 'typed' at index "+je+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ye.data={index:je,argument:Be},Ye}me||(xe=B(xe,ze)),Z(_e,Re)}return ae(xe||"",_e)},o.create=vD,o.createCount=J.createCount,o.onMismatch=W,o.throwMismatchError=W,o.createError=O,o.clear=c,o.clearConversions=d,o.addTypes=u,o._findType=l,o.referTo=ye,o.referToSelf=ge,o.convert=x,o.findSignature=m,o.find=v,o.isTypedFunction=g,o.warnAgainstDeprecatedThis=!0,o.addType=function(te,me){let fe="any";me!==!1&&n.has("Object")&&(fe="Object"),o.addTypes([te],fe)};function K(te){if(!te||typeof te.from!="string"||typeof te.to!="string"||typeof te.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(te.to===te.from)throw new SyntaxError('Illegal to define conversion from "'+te.from+'" to itself.')}return o.addConversion=function(te){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};K(te);const fe=l(te.to),xe=fe.conversionsTo.find(_e=>_e.from===te.from);if(xe)if(me&&me.override)o.removeConversion({from:xe.from,to:te.to,convert:xe.convert});else throw new Error('There is already a conversion from "'+te.from+'" to "'+fe.name+'"');fe.conversionsTo.push({from:te.from,convert:te.convert,index:s++})},o.addConversions=function(te,me){te.forEach(fe=>o.addConversion(fe,me))},o.removeConversion=function(te){K(te);const me=l(te.to),fe=ie(me.conversionsTo,_e=>_e.from===te.from);if(!fe)throw new Error("Attempt to remove nonexistent conversion from "+te.from+" to "+te.to);if(fe.convert!==te.convert)throw new Error("Conversion to remove does not match existing conversion");const xe=me.conversionsTo.indexOf(fe);me.conversionsTo.splice(xe,1)},o.resolve=function(te,me){if(!g(te))throw new TypeError(ej);const fe=te._typedFunctionData.signatures;for(let xe=0;xe<fe.length;++xe)if(fe[xe].test(me))return fe[xe];return null},o}const Dm=vD();function Se(r,e,t,n){function a(s){var o=GV(s,e.map(YV));return KV(r,e,s),t(o)}return a.isFactory=!0,a.fn=r,a.dependencies=e.slice().sort(),n&&(a.meta=n),a}function KV(r,e,t){var n=e.filter(s=>!XV(s)).every(s=>t[s]!==void 0);if(!n){var a=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(a.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function XV(r){return r&&r[0]==="?"}function YV(r){return r&&r[0]==="?"?r.slice(1):r}function kt(r){return typeof r=="boolean"?!0:isFinite(r)?r===Math.round(r):!1}function el(r,e){if(e.number==="bigint")try{BigInt(r)}catch{return e.numberFallback}return e.number}var zo=Math.sign||function(r){return r>0?1:r<0?-1:0},ZV=Math.log2||function(e){return Math.log(e)/Math.LN2},JV=Math.log10||function(e){return Math.log(e)/Math.LN10},eG=Math.log1p||function(r){return Math.log(r+1)},tG=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},rG=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function G1(r,e,t){var n={2:"0b",8:"0o",16:"0x"},a=n[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!kt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),s="i".concat(t)}var o="";return r<0&&(r=-r,o="-"),"".concat(o).concat(a).concat(r.toString(e)).concat(s)}function Il(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:a}=yD(e);switch(t){case"fixed":return bD(r,n);case"exponential":return wD(r,n);case"engineering":return nG(r,n);case"bin":return G1(r,2,a);case"oct":return G1(r,8,a);case"hex":return G1(r,16,a);case"auto":return iG(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function yD(r){var e="auto",t,n;if(r!==void 0)if(Kt(r))t=r;else if(Xt(r))t=r.toNumber();else if(wp(r))r.precision!==void 0&&(t=tj(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=tj(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function Hf(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],a=parseFloat(e[4]||"0"),s=n.indexOf(".");a+=s!==-1?s-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(l){return a-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return o.length===0&&(o.push(0),a++),{sign:t,coefficients:o,exponent:a}}function nG(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Hf(r),n=Np(t,e),a=n.exponent,s=n.coefficients,o=a%3===0?a:a<0?a-3-a%3:a-a%3;if(Kt(e))for(;e>s.length||a-o+1>s.length;)s.push(0);else for(var l=Math.abs(a-o)-(s.length-1),u=0;u<l;u++)s.push(0);for(var c=Math.abs(a-o),d=1;c>0;)d++,c--;var h=s.slice(d).join(""),g=Kt(e)&&h.length||h.match(/[1-9]/)?"."+h:"",m=s.slice(0,d).join("")+g+"e"+(a>=0?"+":"")+o.toString();return n.sign+m}function bD(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Hf(r),n=typeof e=="number"?Np(t,t.exponent+1+e):t,a=n.coefficients,s=n.exponent+1,o=s+(e||0);return a.length<o&&(a=a.concat(pu(o-a.length))),s<0&&(a=pu(-s+1).concat(a),s=1),s<a.length&&a.splice(s,0,s===0?"0.":"."),n.sign+a.join("")}function wD(r,e){if(isNaN(r)||!isFinite(r))return String(r);var t=Hf(r),n=e?Np(t,e):t,a=n.coefficients,s=n.exponent;a.length<e&&(a=a.concat(pu(e-a.length)));var o=a.shift();return n.sign+o+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s}function iG(r,e,t){if(isNaN(r)||!isFinite(r))return String(r);var n=rj(t?.lowerExp,-3),a=rj(t?.upperExp,5),s=Hf(r),o=e?Np(s,e):s;if(o.exponent<n||o.exponent>=a)return wD(r,e);var l=o.coefficients,u=o.exponent;l.length<e&&(l=l.concat(pu(e-l.length))),l=l.concat(pu(u-l.length+1+(l.length<e?e-l.length:0))),l=pu(-u).concat(l);var c=u>0?u:0;return c<l.length-1&&l.splice(c+1,0,"."),o.sign+l.join("")}function Np(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var a=n.splice(e,n.length-e);if(a[0]>=5){var s=e-1;for(n[s]++;n[s]===10;)n.pop(),s===0&&(n.unshift(0),t.exponent++,s++),s--,n[s]++}}return t}function pu(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function aG(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function oi(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!isFinite(r)||!isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var sG=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},oG=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},lG=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},cG=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},uG=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},dG=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function fG(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function tj(r,e){if(Kt(r))return r;if(Xt(r))return r.toNumber();e()}function rj(r,e){return Kt(r)?r:Xt(r)?r.toNumber():e}var _D=function(){return _D=Dm.create,Dm},hG=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],mG=Se("typed",hG,function(e){var{BigNumber:t,Complex:n,DenseMatrix:a,Fraction:s}=e,o=_D();return o.clear(),o.addTypes([{name:"number",test:Kt},{name:"Complex",test:Ws},{name:"BigNumber",test:Xt},{name:"bigint",test:mf},{name:"Fraction",test:$f},{name:"Unit",test:Ji},{name:"identifier",test:l=>fi&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(l)},{name:"string",test:fi},{name:"Chain",test:gD},{name:"Array",test:Mr},{name:"Matrix",test:Lt},{name:"DenseMatrix",test:Cm},{name:"SparseMatrix",test:Bl},{name:"Range",test:Tb},{name:"Index",test:bp},{name:"boolean",test:MV},{name:"ResultSet",test:FV},{name:"Help",test:mD},{name:"function",test:OV},{name:"Date",test:BV},{name:"RegExp",test:RV},{name:"null",test:LV},{name:"undefined",test:IV},{name:"AccessorNode",test:Ul},{name:"ArrayNode",test:wa},{name:"AssignmentNode",test:zV},{name:"BlockNode",test:PV},{name:"ConditionalNode",test:qV},{name:"ConstantNode",test:dr},{name:"FunctionNode",test:Qo},{name:"FunctionAssignmentNode",test:Uf},{name:"IndexNode",test:Iu},{name:"Node",test:Ar},{name:"ObjectNode",test:_p},{name:"OperatorNode",test:pn},{name:"ParenthesisNode",test:Zs},{name:"RangeNode",test:$V},{name:"RelationalNode",test:UV},{name:"SymbolNode",test:Hn},{name:"Map",test:pD},{name:"Object",test:wp}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(t||D0(u),aG(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new t(u)}},{from:"number",to:"Complex",convert:function(u){return n||k0(u),new n(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return n||k0(u),new n(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return t||D0(u),new t(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return s||M0(u),new s(u)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return n||k0(u),new n(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){s||M0(u);var c=new s(u);if(c.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(u){var c=Number(u);if(isNaN(c))throw new Error('Cannot convert "'+u+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(u){t||D0(u);try{return new t(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){s||M0(u);try{return new s(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){n||k0(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return t||D0(u),new t(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return s||M0(u),new s(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return a||pG(),new a(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),o.onMismatch=(l,u,c)=>{var d=o.createError(l,u,c);if(["wrongType","mismatch"].includes(d.data.category)&&u.length===1&&ja(u[0])&&c.some(g=>!g.params.includes(","))){var h=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw h.data=d.data,h}throw d},o.onMismatch=(l,u,c)=>{var d=o.createError(l,u,c);if(["wrongType","mismatch"].includes(d.data.category)&&u.length===1&&ja(u[0])&&c.some(g=>!g.params.includes(","))){var h=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw h.data=d.data,h}throw d},o});function D0(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function k0(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function pG(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function M0(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var gG="ResultSet",xG=[],vG=Se(gG,xG,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var iu=9e15,tl=1e9,_y="0123456789abcdef",km="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Mm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ny={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-iu,maxE:iu,crypto:!1},ND,Us,Wt=!0,Sp="[DecimalError] ",Wo=Sp+"Invalid argument: ",SD=Sp+"Precision limit exceeded",jD=Sp+"crypto unavailable",ED="[object Decimal]",gi=Math.floor,Dn=Math.pow,yG=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,bG=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,wG=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,AD=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qa=1e7,zt=7,_G=9007199254740991,NG=km.length-1,Sy=Mm.length-1,ct={toStringTag:ED};ct.absoluteValue=ct.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Rt(r)};ct.ceil=function(){return Rt(new this.constructor(this),this.e+1,2)};ct.clampedTo=ct.clamp=function(r,e){var t,n=this,a=n.constructor;if(r=new a(r),e=new a(e),!r.s||!e.s)return new a(NaN);if(r.gt(e))throw Error(Wo+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new a(n)};ct.comparedTo=ct.cmp=function(r){var e,t,n,a,s=this,o=s.d,l=(r=new s.constructor(r)).d,u=s.s,c=r.s;if(!o||!l)return!u||!c?NaN:u!==c?u:o===l?0:!o^u<0?1:-1;if(!o[0]||!l[0])return o[0]?u:l[0]?-c:0;if(u!==c)return u;if(s.e!==r.e)return s.e>r.e^u<0?1:-1;for(n=o.length,a=l.length,e=0,t=n<a?n:a;e<t;++e)if(o[e]!==l[e])return o[e]>l[e]^u<0?1:-1;return n===a?0:n>a^u<0?1:-1};ct.cosine=ct.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+zt,n.rounding=1,t=SG(n,MD(n,t)),n.precision=r,n.rounding=e,Rt(Us==2||Us==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};ct.cubeRoot=ct.cbrt=function(){var r,e,t,n,a,s,o,l,u,c,d=this,h=d.constructor;if(!d.isFinite()||d.isZero())return new h(d);for(Wt=!1,s=d.s*Dn(d.s*d,1/3),!s||Math.abs(s)==1/0?(t=ri(d.d),r=d.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=Dn(t,1/3),r=gi((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=d.s):n=new h(s.toString()),o=(r=h.precision)+3;;)if(l=n,u=l.times(l).times(l),c=u.plus(d),n=Wr(c.plus(d).times(l),c.plus(u),o+2,1),ri(l.d).slice(0,o)===(t=ri(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!a&&t=="4999"){if(!a&&(Rt(l,r+1,0),l.times(l).times(l).eq(d))){n=l;break}o+=4,a=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Rt(n,r+1,1),e=!n.times(n).times(n).eq(d));break}return Wt=!0,Rt(n,r,h.rounding,e)};ct.decimalPlaces=ct.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-gi(this.e/zt))*zt,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};ct.dividedBy=ct.div=function(r){return Wr(this,new this.constructor(r))};ct.dividedToIntegerBy=ct.divToInt=function(r){var e=this,t=e.constructor;return Rt(Wr(e,new t(r),0,1,1),t.precision,t.rounding)};ct.equals=ct.eq=function(r){return this.cmp(r)===0};ct.floor=function(){return Rt(new this.constructor(this),this.e+1,3)};ct.greaterThan=ct.gt=function(r){return this.cmp(r)>0};ct.greaterThanOrEqualTo=ct.gte=function(r){var e=this.cmp(r);return e==1||e===0};ct.hyperbolicCosine=ct.cosh=function(){var r,e,t,n,a,s=this,o=s.constructor,l=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return l;t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,a=s.d.length,a<32?(r=Math.ceil(a/3),e=(1/Ep(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=Eu(o,1,s.times(e),new o(1),!0);for(var u,c=r,d=new o(8);c--;)u=s.times(s),s=l.minus(u.times(d.minus(u.times(d))));return Rt(s,o.precision=t,o.rounding=n,!0)};ct.hyperbolicSine=ct.sinh=function(){var r,e,t,n,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(a.e,a.sd())+4,s.rounding=1,n=a.d.length,n<3)a=Eu(s,2,a,a,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,a=a.times(1/Ep(5,r)),a=Eu(s,2,a,a,!0);for(var o,l=new s(5),u=new s(16),c=new s(20);r--;)o=a.times(a),a=a.times(l.plus(o.times(u.times(o).plus(c))))}return s.precision=e,s.rounding=t,Rt(a,e,t,!0)};ct.hyperbolicTangent=ct.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Wr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};ct.inverseCosine=ct.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,a=e.rounding;return t!==-1?t===0?r.isNeg()?ms(e,n,a):new e(0):new e(NaN):r.isZero()?ms(e,n+4,a).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=a,r.times(2))};ct.inverseHyperbolicCosine=ct.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Wt=!1,t=t.times(t).minus(1).sqrt().plus(t),Wt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};ct.inverseHyperbolicSine=ct.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Wt=!1,t=t.times(t).plus(1).sqrt().plus(t),Wt=!0,n.precision=r,n.rounding=e,t.ln())};ct.inverseHyperbolicTangent=ct.atanh=function(){var r,e,t,n,a=this,s=a.constructor;return a.isFinite()?a.e>=0?new s(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(r=s.precision,e=s.rounding,n=a.sd(),Math.max(n,r)<2*-a.e-1?Rt(new s(a),r,e,!0):(s.precision=t=n-a.e,a=Wr(a.plus(1),new s(1).minus(a),t+r,1),s.precision=r+4,s.rounding=1,a=a.ln(),s.precision=r,s.rounding=e,a.times(.5))):new s(NaN)};ct.inverseSine=ct.asin=function(){var r,e,t,n,a=this,s=a.constructor;return a.isZero()?new s(a):(e=a.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=ms(s,t+4,n).times(.5),r.s=a.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,a=a.div(new s(1).minus(a.times(a)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,a.times(2)))};ct.inverseTangent=ct.atan=function(){var r,e,t,n,a,s,o,l,u,c=this,d=c.constructor,h=d.precision,g=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&h+4<=Sy)return o=ms(d,h+4,g).times(.25),o.s=c.s,o}else{if(!c.s)return new d(NaN);if(h+4<=Sy)return o=ms(d,h+4,g).times(.5),o.s=c.s,o}for(d.precision=l=h+10,d.rounding=1,t=Math.min(28,l/zt+2|0),r=t;r;--r)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Wt=!1,e=Math.ceil(l/zt),n=1,u=c.times(c),o=new d(c),a=c;r!==-1;)if(a=a.times(u),s=o.minus(a.div(n+=2)),a=a.times(u),o=s.plus(a.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===s.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),Wt=!0,Rt(o,d.precision=h,d.rounding=g,!0)};ct.isFinite=function(){return!!this.d};ct.isInteger=ct.isInt=function(){return!!this.d&&gi(this.e/zt)>this.d.length-2};ct.isNaN=function(){return!this.s};ct.isNegative=ct.isNeg=function(){return this.s<0};ct.isPositive=ct.isPos=function(){return this.s>0};ct.isZero=function(){return!!this.d&&this.d[0]===0};ct.lessThan=ct.lt=function(r){return this.cmp(r)<0};ct.lessThanOrEqualTo=ct.lte=function(r){return this.cmp(r)<1};ct.logarithm=ct.log=function(r){var e,t,n,a,s,o,l,u,c=this,d=c.constructor,h=d.precision,g=d.rounding,m=5;if(r==null)r=new d(10),e=!0;else{if(r=new d(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new d(NaN);e=r.eq(10)}if(t=c.d,c.s<0||!t||!t[0]||c.eq(1))return new d(t&&!t[0]?-1/0:c.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(a=t[0];a%10===0;)a/=10;s=a!==1}if(Wt=!1,l=h+m,o=Po(c,l),n=e?Fm(d,l+10):Po(r,l),u=Wr(o,n,l,1),jf(u.d,a=h,g))do if(l+=10,o=Po(c,l),n=e?Fm(d,l+10):Po(r,l),u=Wr(o,n,l,1),!s){+ri(u.d).slice(a+1,a+15)+1==1e14&&(u=Rt(u,h+1,0));break}while(jf(u.d,a+=10,g));return Wt=!0,Rt(u,h,g)};ct.minus=ct.sub=function(r){var e,t,n,a,s,o,l,u,c,d,h,g,m=this,v=m.constructor;if(r=new v(r),!m.d||!r.d)return!m.s||!r.s?r=new v(NaN):m.d?r.s=-r.s:r=new v(r.d||m.s!==r.s?m:NaN),r;if(m.s!=r.s)return r.s=-r.s,m.plus(r);if(c=m.d,g=r.d,l=v.precision,u=v.rounding,!c[0]||!g[0]){if(g[0])r.s=-r.s;else if(c[0])r=new v(m);else return new v(u===3?-0:0);return Wt?Rt(r,l,u):r}if(t=gi(r.e/zt),d=gi(m.e/zt),c=c.slice(),s=d-t,s){for(h=s<0,h?(e=c,s=-s,o=g.length):(e=g,t=d,o=c.length),n=Math.max(Math.ceil(l/zt),o)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=c.length,o=g.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(c[n]!=g[n]){h=c[n]<g[n];break}s=0}for(h&&(e=c,c=g,g=e,r.s=-r.s),o=c.length,n=g.length-o;n>0;--n)c[o++]=0;for(n=g.length;n>s;){if(c[--n]<g[n]){for(a=n;a&&c[--a]===0;)c[a]=Qa-1;--c[a],c[n]+=Qa}c[n]-=g[n]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--t;return c[0]?(r.d=c,r.e=jp(c,t),Wt?Rt(r,l,u):r):new v(u===3?-0:0)};ct.modulo=ct.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Rt(new n(t),n.precision,n.rounding):(Wt=!1,n.modulo==9?(e=Wr(t,r.abs(),0,3,1),e.s*=r.s):e=Wr(t,r,0,n.modulo,1),e=e.times(r),Wt=!0,t.minus(e))};ct.naturalExponential=ct.exp=function(){return jy(this)};ct.naturalLogarithm=ct.ln=function(){return Po(this)};ct.negated=ct.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Rt(r)};ct.plus=ct.add=function(r){var e,t,n,a,s,o,l,u,c,d,h=this,g=h.constructor;if(r=new g(r),!h.d||!r.d)return!h.s||!r.s?r=new g(NaN):h.d||(r=new g(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(c=h.d,d=r.d,l=g.precision,u=g.rounding,!c[0]||!d[0])return d[0]||(r=new g(h)),Wt?Rt(r,l,u):r;if(s=gi(h.e/zt),n=gi(r.e/zt),c=c.slice(),a=s-n,a){for(a<0?(t=c,a=-a,o=d.length):(t=d,n=s,o=c.length),s=Math.ceil(l/zt),o=s>o?s+1:o+1,a>o&&(a=o,t.length=1),t.reverse();a--;)t.push(0);t.reverse()}for(o=c.length,a=d.length,o-a<0&&(a=o,t=d,d=c,c=t),e=0;a;)e=(c[--a]=c[a]+d[a]+e)/Qa|0,c[a]%=Qa;for(e&&(c.unshift(e),++n),o=c.length;c[--o]==0;)c.pop();return r.d=c,r.e=jp(c,n),Wt?Rt(r,l,u):r};ct.precision=ct.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Wo+r);return t.d?(e=TD(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};ct.round=function(){var r=this,e=r.constructor;return Rt(new e(r),r.e+1,e.rounding)};ct.sine=ct.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+zt,n.rounding=1,t=EG(n,MD(n,t)),n.precision=r,n.rounding=e,Rt(Us>2?t.neg():t,r,e,!0)):new n(NaN)};ct.squareRoot=ct.sqrt=function(){var r,e,t,n,a,s,o=this,l=o.d,u=o.e,c=o.s,d=o.constructor;if(c!==1||!l||!l[0])return new d(!c||c<0&&(!l||l[0])?NaN:l?o:1/0);for(Wt=!1,c=Math.sqrt(+o),c==0||c==1/0?(e=ri(l),(e.length+u)%2==0&&(e+="0"),c=Math.sqrt(e),u=gi((u+1)/2)-(u<0||u%2),c==1/0?e="5e"+u:(e=c.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new d(e)):n=new d(c.toString()),t=(u=d.precision)+3;;)if(s=n,n=s.plus(Wr(o,s,t+2,1)).times(.5),ri(s.d).slice(0,t)===(e=ri(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!a&&e=="4999"){if(!a&&(Rt(s,u+1,0),s.times(s).eq(o))){n=s;break}t+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Rt(n,u+1,1),r=!n.times(n).eq(o));break}return Wt=!0,Rt(n,u,d.rounding,r)};ct.tangent=ct.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Wr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Rt(Us==2||Us==4?t.neg():t,r,e,!0)):new n(NaN)};ct.times=ct.mul=function(r){var e,t,n,a,s,o,l,u,c,d=this,h=d.constructor,g=d.d,m=(r=new h(r)).d;if(r.s*=d.s,!g||!g[0]||!m||!m[0])return new h(!r.s||g&&!g[0]&&!m||m&&!m[0]&&!g?NaN:!g||!m?r.s/0:r.s*0);for(t=gi(d.e/zt)+gi(r.e/zt),u=g.length,c=m.length,u<c&&(s=g,g=m,m=s,o=u,u=c,c=o),s=[],o=u+c,n=o;n--;)s.push(0);for(n=c;--n>=0;){for(e=0,a=u+n;a>n;)l=s[a]+m[n]*g[a-n-1]+e,s[a--]=l%Qa|0,e=l/Qa|0;s[a]=(s[a]+e)%Qa|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),r.d=s,r.e=jp(s,t),Wt?Rt(r,h.precision,h.rounding):r};ct.toBinary=function(r,e){return Cb(this,2,r,e)};ct.toDecimalPlaces=ct.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:($i(r,0,tl),e===void 0?e=n.rounding:$i(e,0,8),Rt(t,r+t.e+1,e))};ct.toExponential=function(r,e){var t,n=this,a=n.constructor;return r===void 0?t=xs(n,!0):($i(r,0,tl),e===void 0?e=a.rounding:$i(e,0,8),n=Rt(new a(n),r+1,e),t=xs(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};ct.toFixed=function(r,e){var t,n,a=this,s=a.constructor;return r===void 0?t=xs(a):($i(r,0,tl),e===void 0?e=s.rounding:$i(e,0,8),n=Rt(new s(a),r+a.e+1,e),t=xs(n,!1,r+n.e+1)),a.isNeg()&&!a.isZero()?"-"+t:t};ct.toFraction=function(r){var e,t,n,a,s,o,l,u,c,d,h,g,m=this,v=m.d,x=m.constructor;if(!v)return new x(m);if(c=t=new x(1),n=u=new x(0),e=new x(n),s=e.e=TD(v)-m.e-1,o=s%zt,e.d[0]=Dn(10,o<0?zt+o:o),r==null)r=s>0?e:c;else{if(l=new x(r),!l.isInt()||l.lt(c))throw Error(Wo+l);r=l.gt(e)?s>0?e:c:l}for(Wt=!1,l=new x(ri(v)),d=x.precision,x.precision=s=v.length*zt*2;h=Wr(l,e,0,1,1),a=t.plus(h.times(n)),a.cmp(r)!=1;)t=n,n=a,a=c,c=u.plus(h.times(a)),u=a,a=e,e=l.minus(h.times(a)),l=a;return a=Wr(r.minus(t),n,0,1,1),u=u.plus(a.times(c)),t=t.plus(a.times(n)),u.s=c.s=m.s,g=Wr(c,n,s,1).minus(m).abs().cmp(Wr(u,t,s,1).minus(m).abs())<1?[c,n]:[u,t],x.precision=d,Wt=!0,g};ct.toHexadecimal=ct.toHex=function(r,e){return Cb(this,16,r,e)};ct.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:$i(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Wt=!1,t=Wr(t,r,0,e,1).times(r),Wt=!0,Rt(t)):(r.s=t.s,t=r),t};ct.toNumber=function(){return+this};ct.toOctal=function(r,e){return Cb(this,8,r,e)};ct.toPower=ct.pow=function(r){var e,t,n,a,s,o,l=this,u=l.constructor,c=+(r=new u(r));if(!l.d||!r.d||!l.d[0]||!r.d[0])return new u(Dn(+l,c));if(l=new u(l),l.eq(1))return l;if(n=u.precision,s=u.rounding,r.eq(1))return Rt(l,n,s);if(e=gi(r.e/zt),e>=r.d.length-1&&(t=c<0?-c:c)<=_G)return a=CD(u,l,t,n),r.s<0?new u(1).div(a):Rt(a,n,s);if(o=l.s,o<0){if(e<r.d.length-1)return new u(NaN);if((r.d[e]&1)==0&&(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return t=Dn(+l,c),e=t==0||!isFinite(t)?gi(c*(Math.log("0."+ri(l.d))/Math.LN10+l.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(Wt=!1,u.rounding=l.s=1,t=Math.min(12,(e+"").length),a=jy(r.times(Po(l,n+t)),n),a.d&&(a=Rt(a,n+5,1),jf(a.d,n,s)&&(e=n+10,a=Rt(jy(r.times(Po(l,e+t)),e),e+5,1),+ri(a.d).slice(n+1,n+15)+1==1e14&&(a=Rt(a,n+1,0)))),a.s=o,Wt=!0,u.rounding=s,Rt(a,n,s))};ct.toPrecision=function(r,e){var t,n=this,a=n.constructor;return r===void 0?t=xs(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):($i(r,1,tl),e===void 0?e=a.rounding:$i(e,0,8),n=Rt(new a(n),r,e),t=xs(n,r<=n.e||n.e<=a.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};ct.toSignificantDigits=ct.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):($i(r,1,tl),e===void 0?e=n.rounding:$i(e,0,8)),Rt(new n(t),r,e)};ct.toString=function(){var r=this,e=r.constructor,t=xs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};ct.truncated=ct.trunc=function(){return Rt(new this.constructor(this),this.e+1,1)};ct.valueOf=ct.toJSON=function(){var r=this,e=r.constructor,t=xs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function ri(r){var e,t,n,a=r.length-1,s="",o=r[0];if(a>0){for(s+=o,e=1;e<a;e++)n=r[e]+"",t=zt-n.length,t&&(s+=Fo(t)),s+=n;o=r[e],n=o+"",t=zt-n.length,t&&(s+=Fo(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function $i(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Wo+r)}function jf(r,e,t,n){var a,s,o,l;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=zt,a=0):(a=Math.ceil((e+1)/zt),e%=zt),s=Dn(10,zt-e),l=r[a]%s|0,n==null?e<3?(e==0?l=l/100|0:e==1&&(l=l/10|0),o=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):o=(t<4&&l+1==s||t>3&&l+1==s/2)&&(r[a+1]/s/100|0)==Dn(10,e-2)-1||(l==s/2||l==0)&&(r[a+1]/s/100|0)==0:e<4?(e==0?l=l/1e3|0:e==1?l=l/100|0:e==2&&(l=l/10|0),o=(n||t<4)&&l==9999||!n&&t>3&&l==4999):o=((n||t<4)&&l+1==s||!n&&t>3&&l+1==s/2)&&(r[a+1]/s/1e3|0)==Dn(10,e-3)-1,o}function rm(r,e,t){for(var n,a=[0],s,o=0,l=r.length;o<l;){for(s=a.length;s--;)a[s]*=e;for(a[0]+=_y.indexOf(r.charAt(o++)),n=0;n<a.length;n++)a[n]>t-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/t|0,a[n]%=t)}return a.reverse()}function SG(r,e){var t,n,a;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),a=(1/Ep(4,t)).toString()):(t=16,a="2.3283064365386962890625e-10"),r.precision+=t,e=Eu(r,1,e.times(a),new r(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var Wr=function(){function r(n,a,s){var o,l=0,u=n.length;for(n=n.slice();u--;)o=n[u]*a+l,n[u]=o%s|0,l=o/s|0;return l&&n.unshift(l),n}function e(n,a,s,o){var l,u;if(s!=o)u=s>o?1:-1;else for(l=u=0;l<s;l++)if(n[l]!=a[l]){u=n[l]>a[l]?1:-1;break}return u}function t(n,a,s,o){for(var l=0;s--;)n[s]-=l,l=n[s]<a[s]?1:0,n[s]=l*o+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o,l,u){var c,d,h,g,m,v,x,b,y,S,_,N,j,E,T,F,A,R,I,O,U=n.constructor,D=n.s==a.s?1:-1,H=n.d,P=a.d;if(!H||!H[0]||!P||!P[0])return new U(!n.s||!a.s||(H?P&&H[0]==P[0]:!P)?NaN:H&&H[0]==0||!P?D*0:D/0);for(u?(m=1,d=n.e-a.e):(u=Qa,m=zt,d=gi(n.e/m)-gi(a.e/m)),I=P.length,A=H.length,y=new U(D),S=y.d=[],h=0;P[h]==(H[h]||0);h++);if(P[h]>(H[h]||0)&&d--,s==null?(E=s=U.precision,o=U.rounding):l?E=s+(n.e-a.e)+1:E=s,E<0)S.push(1),v=!0;else{if(E=E/m+2|0,h=0,I==1){for(g=0,P=P[0],E++;(h<A||g)&&E--;h++)T=g*u+(H[h]||0),S[h]=T/P|0,g=T%P|0;v=g||h<A}else{for(g=u/(P[0]+1)|0,g>1&&(P=r(P,g,u),H=r(H,g,u),I=P.length,A=H.length),F=I,_=H.slice(0,I),N=_.length;N<I;)_[N++]=0;O=P.slice(),O.unshift(0),R=P[0],P[1]>=u/2&&++R;do g=0,c=e(P,_,I,N),c<0?(j=_[0],I!=N&&(j=j*u+(_[1]||0)),g=j/R|0,g>1?(g>=u&&(g=u-1),x=r(P,g,u),b=x.length,N=_.length,c=e(x,_,b,N),c==1&&(g--,t(x,I<b?O:P,b,u))):(g==0&&(c=g=1),x=P.slice()),b=x.length,b<N&&x.unshift(0),t(_,x,N,u),c==-1&&(N=_.length,c=e(P,_,I,N),c<1&&(g++,t(_,I<N?O:P,N,u))),N=_.length):c===0&&(g++,_=[0]),S[h++]=g,c&&_[0]?_[N++]=H[F]||0:(_=[H[F]],N=1);while((F++<A||_[0]!==void 0)&&E--);v=_[0]!==void 0}S[0]||S.shift()}if(m==1)y.e=d,ND=v;else{for(h=1,g=S[0];g>=10;g/=10)h++;y.e=h+d*m-1,Rt(y,l?s+y.e+1:s,o,v)}return y}}();function Rt(r,e,t,n){var a,s,o,l,u,c,d,h,g,m=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(a=1,l=h[0];l>=10;l/=10)a++;if(s=e-a,s<0)s+=zt,o=e,d=h[g=0],u=d/Dn(10,a-o-1)%10|0;else if(g=Math.ceil((s+1)/zt),l=h.length,g>=l)if(n){for(;l++<=g;)h.push(0);d=u=0,a=1,s%=zt,o=s-zt+1}else break e;else{for(d=l=h[g],a=1;l>=10;l/=10)a++;s%=zt,o=s-zt+a,u=o<0?0:d/Dn(10,a-o-1)%10|0}if(n=n||e<0||h[g+1]!==void 0||(o<0?d:d%Dn(10,a-o-1)),c=t<4?(u||n)&&(t==0||t==(r.s<0?3:2)):u>5||u==5&&(t==4||n||t==6&&(s>0?o>0?d/Dn(10,a-o):0:h[g-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,c?(e-=r.e+1,h[0]=Dn(10,(zt-e%zt)%zt),r.e=-e||0):h[0]=r.e=0,r;if(s==0?(h.length=g,l=1,g--):(h.length=g+1,l=Dn(10,zt-s),h[g]=o>0?(d/Dn(10,a-o)%Dn(10,o)|0)*l:0),c)for(;;)if(g==0){for(s=1,o=h[0];o>=10;o/=10)s++;for(o=h[0]+=l,l=1;o>=10;o/=10)l++;s!=l&&(r.e++,h[0]==Qa&&(h[0]=1));break}else{if(h[g]+=l,h[g]!=Qa)break;h[g--]=0,l=1}for(s=h.length;h[--s]===0;)h.pop()}return Wt&&(r.e>m.maxE?(r.d=null,r.e=NaN):r.e<m.minE&&(r.e=0,r.d=[0])),r}function xs(r,e,t){if(!r.isFinite())return kD(r);var n,a=r.e,s=ri(r.d),o=s.length;return e?(t&&(n=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Fo(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):a<0?(s="0."+Fo(-a-1)+s,t&&(n=t-o)>0&&(s+=Fo(n))):a>=o?(s+=Fo(a+1-o),t&&(n=t-a-1)>0&&(s=s+"."+Fo(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-o)>0&&(a+1===o&&(s+="."),s+=Fo(n))),s}function jp(r,e){var t=r[0];for(e*=zt;t>=10;t/=10)e++;return e}function Fm(r,e,t){if(e>NG)throw Wt=!0,t&&(r.precision=t),Error(SD);return Rt(new r(km),e,1,!0)}function ms(r,e,t){if(e>Sy)throw Error(SD);return Rt(new r(Mm),e,t,!0)}function TD(r){var e=r.length-1,t=e*zt+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Fo(r){for(var e="";r--;)e+="0";return e}function CD(r,e,t,n){var a,s=new r(1),o=Math.ceil(n/zt+4);for(Wt=!1;;){if(t%2&&(s=s.times(e),ij(s.d,o)&&(a=!0)),t=gi(t/2),t===0){t=s.d.length-1,a&&s.d[t]===0&&++s.d[t];break}e=e.times(e),ij(e.d,o)}return Wt=!0,s}function nj(r){return r.d[r.d.length-1]&1}function DD(r,e,t){for(var n,a,s=new r(e[0]),o=0;++o<e.length;){if(a=new r(e[o]),!a.s){s=a;break}n=s.cmp(a),(n===t||n===0&&s.s===t)&&(s=a)}return s}function jy(r,e){var t,n,a,s,o,l,u,c=0,d=0,h=0,g=r.constructor,m=g.rounding,v=g.precision;if(!r.d||!r.d[0]||r.e>17)return new g(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Wt=!1,u=v):u=e,l=new g(.03125);r.e>-2;)r=r.times(l),h+=5;for(n=Math.log(Dn(2,h))/Math.LN10*2+5|0,u+=n,t=s=o=new g(1),g.precision=u;;){if(s=Rt(s.times(r),u,1),t=t.times(++d),l=o.plus(Wr(s,t,u,1)),ri(l.d).slice(0,u)===ri(o.d).slice(0,u)){for(a=h;a--;)o=Rt(o.times(o),u,1);if(e==null)if(c<3&&jf(o.d,u-n,m,c))g.precision=u+=10,t=s=l=new g(1),d=0,c++;else return Rt(o,g.precision=v,m,Wt=!0);else return g.precision=v,o}o=l}}function Po(r,e){var t,n,a,s,o,l,u,c,d,h,g,m=1,v=10,x=r,b=x.d,y=x.constructor,S=y.rounding,_=y.precision;if(x.s<0||!b||!b[0]||!x.e&&b[0]==1&&b.length==1)return new y(b&&!b[0]?-1/0:x.s!=1?NaN:b?0:x);if(e==null?(Wt=!1,d=_):d=e,y.precision=d+=v,t=ri(b),n=t.charAt(0),Math.abs(s=x.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)x=x.times(r),t=ri(x.d),n=t.charAt(0),m++;s=x.e,n>1?(x=new y("0."+t),s++):x=new y(n+"."+t.slice(1))}else return c=Fm(y,d+2,_).times(s+""),x=Po(new y(n+"."+t.slice(1)),d-v).plus(c),y.precision=_,e==null?Rt(x,_,S,Wt=!0):x;for(h=x,u=o=x=Wr(x.minus(1),x.plus(1),d,1),g=Rt(x.times(x),d,1),a=3;;){if(o=Rt(o.times(g),d,1),c=u.plus(Wr(o,new y(a),d,1)),ri(c.d).slice(0,d)===ri(u.d).slice(0,d))if(u=u.times(2),s!==0&&(u=u.plus(Fm(y,d+2,_).times(s+""))),u=Wr(u,new y(m),d,1),e==null)if(jf(u.d,d-v,S,l))y.precision=d+=v,c=o=x=Wr(h.minus(1),h.plus(1),d,1),g=Rt(x.times(x),d,1),a=l=1;else return Rt(u,y.precision=_,S,Wt=!0);else return y.precision=_,u;u=c,a+=2}}function kD(r){return String(r.s*r.s/0)}function nm(r,e){var t,n,a;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(n,a),e){if(a-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%zt,t<0&&(n+=zt),n<a){for(n&&r.d.push(+e.slice(0,n)),a-=zt;n<a;)r.d.push(+e.slice(n,n+=zt));e=e.slice(n),n=zt-e.length}else n-=a;for(;n--;)e+="0";r.d.push(+e),Wt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function jG(r,e){var t,n,a,s,o,l,u,c,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),AD.test(e))return nm(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(bG.test(e))t=16,e=e.toLowerCase();else if(yG.test(e))t=2;else if(wG.test(e))t=8;else throw Error(Wo+e);for(s=e.search(/p/i),s>0?(u=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,n=r.constructor,o&&(e=e.replace(".",""),l=e.length,s=l-s,a=CD(n,new n(t),s,s*2)),c=rm(e,t,Qa),d=c.length-1,s=d;c[s]===0;--s)c.pop();return s<0?new n(r.s*0):(r.e=jp(c,d),r.d=c,Wt=!1,o&&(r=Wr(r,a,l*4)),u&&(r=r.times(Math.abs(u)<54?Dn(2,u):Ko.pow(2,u))),Wt=!0,r)}function EG(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Eu(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/Ep(5,t)),e=Eu(r,2,e,e);for(var a,s=new r(5),o=new r(16),l=new r(20);t--;)a=e.times(e),e=e.times(s.plus(a.times(o.times(a).minus(l))));return e}function Eu(r,e,t,n,a){var s,o,l,u,c=r.precision,d=Math.ceil(c/zt);for(Wt=!1,u=t.times(t),l=new r(n);;){if(o=Wr(l.times(u),new r(e++*e++),c,1),l=a?n.plus(o):n.minus(o),n=Wr(o.times(u),new r(e++*e++),c,1),o=l.plus(n),o.d[d]!==void 0){for(s=d;o.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=n,n=o,o=s}return Wt=!0,o.d.length=d+1,o}function Ep(r,e){for(var t=r;--e;)t*=r;return t}function MD(r,e){var t,n=e.s<0,a=ms(r,r.precision,1),s=a.times(.5);if(e=e.abs(),e.lte(s))return Us=n?4:1,e;if(t=e.divToInt(a),t.isZero())Us=n?3:2;else{if(e=e.minus(t.times(a)),e.lte(s))return Us=nj(t)?n?2:3:n?4:1,e;Us=nj(t)?n?1:4:n?3:2}return e.minus(a).abs()}function Cb(r,e,t,n){var a,s,o,l,u,c,d,h,g,m=r.constructor,v=t!==void 0;if(v?($i(t,1,tl),n===void 0?n=m.rounding:$i(n,0,8)):(t=m.precision,n=m.rounding),!r.isFinite())d=kD(r);else{for(d=xs(r),o=d.indexOf("."),v?(a=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):a=e,o>=0&&(d=d.replace(".",""),g=new m(1),g.e=d.length-o,g.d=rm(xs(g),10,a),g.e=g.d.length),h=rm(d,10,a),s=u=h.length;h[--u]==0;)h.pop();if(!h[0])d=v?"0p+0":"0";else{if(o<0?s--:(r=new m(r),r.d=h,r.e=s,r=Wr(r,g,t,n,0,a),h=r.d,s=r.e,c=ND),o=h[t],l=a/2,c=c||h[t+1]!==void 0,c=n<4?(o!==void 0||c)&&(n===0||n===(r.s<0?3:2)):o>l||o===l&&(n===4||c||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,c)for(;++h[--t]>a-1;)h[t]=0,t||(++s,h.unshift(1));for(u=h.length;!h[u-1];--u);for(o=0,d="";o<u;o++)d+=_y.charAt(h[o]);if(v){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)d+="0";for(h=rm(d,a,e),u=h.length;!h[u-1];--u);for(o=1,d="1.";o<u;o++)d+=_y.charAt(h[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>u)for(s-=u;s--;)d+="0";else s<u&&(d=d.slice(0,s)+"."+d.slice(s))}d=(e==16?"0x":e==2?"0b":e==8?"0o":"")+d}return r.s<0?"-"+d:d}function ij(r,e){if(r.length>e)return r.length=e,!0}function AG(r){return new this(r).abs()}function TG(r){return new this(r).acos()}function CG(r){return new this(r).acosh()}function DG(r,e){return new this(r).plus(e)}function kG(r){return new this(r).asin()}function MG(r){return new this(r).asinh()}function FG(r){return new this(r).atan()}function OG(r){return new this(r).atanh()}function BG(r,e){r=new this(r),e=new this(e);var t,n=this.precision,a=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=ms(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?ms(this,n,a):new this(0),t.s=r.s):!r.d||e.isZero()?(t=ms(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Wr(r,e,s,1)),e=ms(this,s,1),this.precision=n,this.rounding=a,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Wr(r,e,s,1)),t}function RG(r){return new this(r).cbrt()}function LG(r){return Rt(r=new this(r),r.e+1,2)}function IG(r,e,t){return new this(r).clamp(e,t)}function zG(r){if(!r||typeof r!="object")throw Error(Sp+"Object expected");var e,t,n,a=r.defaults===!0,s=["precision",1,tl,"rounding",0,8,"toExpNeg",-iu,0,"toExpPos",0,iu,"maxE",0,iu,"minE",-iu,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],a&&(this[t]=Ny[t]),(n=r[t])!==void 0)if(gi(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(Wo+t+": "+n);if(t="crypto",a&&(this[t]=Ny[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(jD);else this[t]=!1;else throw Error(Wo+t+": "+n);return this}function PG(r){return new this(r).cos()}function qG(r){return new this(r).cosh()}function FD(r){var e,t,n;function a(s){var o,l,u,c=this;if(!(c instanceof a))return new a(s);if(c.constructor=a,aj(s)){c.s=s.s,Wt?!s.d||s.e>a.maxE?(c.e=NaN,c.d=null):s.e<a.minE?(c.e=0,c.d=[0]):(c.e=s.e,c.d=s.d.slice()):(c.e=s.e,c.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){c.s=1/s<0?-1:1,c.e=0,c.d=[0];return}if(s<0?(s=-s,c.s=-1):c.s=1,s===~~s&&s<1e7){for(o=0,l=s;l>=10;l/=10)o++;Wt?o>a.maxE?(c.e=NaN,c.d=null):o<a.minE?(c.e=0,c.d=[0]):(c.e=o,c.d=[s]):(c.e=o,c.d=[s]);return}if(s*0!==0){s||(c.s=NaN),c.e=NaN,c.d=null;return}return nm(c,s.toString())}if(u==="string")return(l=s.charCodeAt(0))===45?(s=s.slice(1),c.s=-1):(l===43&&(s=s.slice(1)),c.s=1),AD.test(s)?nm(c,s):jG(c,s);if(u==="bigint")return s<0?(s=-s,c.s=-1):c.s=1,nm(c,s.toString());throw Error(Wo+s)}if(a.prototype=ct,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=zG,a.clone=FD,a.isDecimal=aj,a.abs=AG,a.acos=TG,a.acosh=CG,a.add=DG,a.asin=kG,a.asinh=MG,a.atan=FG,a.atanh=OG,a.atan2=BG,a.cbrt=RG,a.ceil=LG,a.clamp=IG,a.cos=PG,a.cosh=qG,a.div=$G,a.exp=UG,a.floor=HG,a.hypot=VG,a.ln=GG,a.log=QG,a.log10=KG,a.log2=WG,a.max=XG,a.min=YG,a.mod=ZG,a.mul=JG,a.pow=eQ,a.random=tQ,a.round=rQ,a.sign=nQ,a.sin=iQ,a.sinh=aQ,a.sqrt=sQ,a.sub=oQ,a.sum=lQ,a.tan=cQ,a.tanh=uQ,a.trunc=dQ,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return a.config(r),a}function $G(r,e){return new this(r).div(e)}function UG(r){return new this(r).exp()}function HG(r){return Rt(r=new this(r),r.e+1,3)}function VG(){var r,e,t=new this(0);for(Wt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Wt=!0,new this(1/0);t=e}return Wt=!0,t.sqrt()}function aj(r){return r instanceof Ko||r&&r.toStringTag===ED||!1}function GG(r){return new this(r).ln()}function QG(r,e){return new this(r).log(e)}function WG(r){return new this(r).log(2)}function KG(r){return new this(r).log(10)}function XG(){return DD(this,arguments,-1)}function YG(){return DD(this,arguments,1)}function ZG(r,e){return new this(r).mod(e)}function JG(r,e){return new this(r).mul(e)}function eQ(r,e){return new this(r).pow(e)}function tQ(r){var e,t,n,a,s=0,o=new this(1),l=[];if(r===void 0?r=this.precision:$i(r,1,tl),n=Math.ceil(r/zt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)a=e[s],a>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)a=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,s):(l.push(a%1e7),s+=4);s=n/4}else throw Error(jD);else for(;s<n;)l[s++]=Math.random()*1e7|0;for(n=l[--s],r%=zt,n&&r&&(a=Dn(10,zt-r),l[s]=(n/a|0)*a);l[s]===0;s--)l.pop();if(s<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=zt)l.shift();for(n=1,a=l[0];a>=10;a/=10)n++;n<zt&&(t-=zt-n)}return o.e=t,o.d=l,o}function rQ(r){return Rt(r=new this(r),r.e+1,this.rounding)}function nQ(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function iQ(r){return new this(r).sin()}function aQ(r){return new this(r).sinh()}function sQ(r){return new this(r).sqrt()}function oQ(r,e){return new this(r).sub(e)}function lQ(){var r=0,e=arguments,t=new this(e[r]);for(Wt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Wt=!0,Rt(t,this.precision,this.rounding)}function cQ(r){return new this(r).tan()}function uQ(r){return new this(r).tanh()}function dQ(r){return Rt(r=new this(r),r.e+1,1)}ct[Symbol.for("nodejs.util.inspect.custom")]=ct.toString;ct[Symbol.toStringTag]="Decimal";var Ko=ct.constructor=FD(Ny);km=new Ko(km);Mm=new Ko(Mm);var fQ="BigNumber",hQ=["?on","config"],mQ=Se(fQ,hQ,r=>{var{on:e,config:t}=r,n=Ko.clone({precision:t.precision,modulo:Ko.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},e&&e("config",function(a,s){a.precision!==s.precision&&n.config({precision:a.precision})}),n},{isClass:!0});const di=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},xa=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},pQ=function(r){const e=Math.PI/4;if(-e>r||r>e)return Math.cos(r)-1;const t=r*r;return t*(t*(t*(t*(t*(t*(t*(t/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Q1=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},Kc=function(){throw SyntaxError("Invalid Param")};function W1(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const gQ={re:0,im:0},Dl=function(r,e){const t=gQ;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return et.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return et.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):Kc();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let a=1,s=0;n===null&&Kc();for(let o=0;o<n.length;o++){const l=n[o];l===" "||l==="	"||l===`
`||(l==="+"?a++:l==="-"?s++:l==="i"||l==="I"?(a+s===0&&Kc(),n[o+1]!==" "&&!isNaN(n[o+1])?(t.im+=parseFloat((s%2?"-":"")+n[o+1]),o++):t.im+=parseFloat((s%2?"-":"")+"1"),a=s=0):((a+s===0||isNaN(l))&&Kc(),n[o+1]==="i"||n[o+1]==="I"?(t.im+=parseFloat((s%2?"-":"")+l),o++):t.re+=parseFloat((s%2?"-":"")+l),a=s=0))}a+s>0&&Kc();break;case"number":t.im=0,t.re=r;break;default:Kc()}return isNaN(t.re)||isNaN(t.im),t};function et(r,e){if(!(this instanceof et))return new et(r,e);const t=Dl(r,e);this.re=t.re,this.im=t.im}et.prototype={re:0,im:0,sign:function(){const r=Q1(this.re,this.im);return new et(this.re/r,this.im/r)},add:function(r,e){const t=Dl(r,e),n=this.isInfinite(),a=!(isFinite(t.re)&&isFinite(t.im));return n||a?n&&a?et.NAN:et.INFINITY:new et(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=Dl(r,e),n=this.isInfinite(),a=!(isFinite(t.re)&&isFinite(t.im));return n||a?n&&a?et.NAN:et.INFINITY:new et(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=Dl(r,e),n=this.isInfinite(),a=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,o=t.re===0&&t.im===0;return n&&o||a&&s?et.NAN:n||a?et.INFINITY:t.im===0&&this.im===0?new et(this.re*t.re,0):new et(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=Dl(r,e),n=this.isInfinite(),a=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,o=t.re===0&&t.im===0;if(s&&o||n&&a)return et.NAN;if(o||n)return et.INFINITY;if(s||a)return et.ZERO;if(t.im===0)return new et(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const l=t.re/t.im,u=t.re*l+t.im;return new et((this.re*l+this.im)/u,(this.im*l-this.re)/u)}else{const l=t.im/t.re,u=t.im*l+t.re;return new et((this.re+this.im*l)/u,(this.im-this.re*l)/u)}},pow:function(r,e){const t=Dl(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return et.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new et(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new et(Math.pow(this.im,t.re),0);case 1:return new et(0,Math.pow(this.im,t.re));case 2:return new et(-Math.pow(this.im,t.re),0);case 3:return new et(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return et.ZERO;const s=Math.atan2(this.im,this.re),o=W1(this.re,this.im);let l=Math.exp(t.re*o-t.im*s),u=t.im*o+t.re*s;return new et(l*Math.cos(u),l*Math.sin(u))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new et(Math.sqrt(r),0):new et(0,Math.sqrt(-r));const t=Q1(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),a=Math.abs(e)/(2*n);return r>=0?new et(n,e<0?-a:a):new et(a,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new et(r,0):new et(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new et(Math.expm1(r)*Math.cos(e)+pQ(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new et(Math.log(r),0):new et(W1(r,e),Math.atan2(e,r))},abs:function(){return Q1(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new et(Math.sin(r)*di(e),Math.cos(r)*xa(e))},cos:function(){const r=this.re,e=this.im;return new et(Math.cos(r)*di(e),-Math.sin(r)*xa(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+di(e);return new et(Math.sin(r)/t,xa(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-di(e);return new et(-Math.sin(r)/t,xa(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*di(2*e)+.5*Math.cos(2*r);return new et(Math.cos(r)*di(e)/t,Math.sin(r)*xa(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*di(2*e)-.5*Math.cos(2*r);return new et(Math.sin(r)*di(e)/t,-Math.cos(r)*xa(e)/t)},asin:function(){const r=this.re,e=this.im,t=new et(e*e-r*r+1,-2*r*e).sqrt(),n=new et(t.re-e,t.im+r).log();return new et(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new et(e*e-r*r+1,-2*r*e).sqrt(),n=new et(t.re-e,t.im+r).log();return new et(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new et(0,1/0);if(e===-1)return new et(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new et((1-e*e-r*r)/t,-2*r/t).log();return new et(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new et(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new et(r/t,-e/t).atan():new et(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new et(0,1/0);const t=r*r+e*e;return t!==0?new et(r/t,-e/t).acos():new et(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new et(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new et(r/t,-e/t).asin():new et(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new et(xa(r)*Math.cos(e),di(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new et(di(r)*Math.cos(e),xa(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=di(r)+Math.cos(e);return new et(xa(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=di(r)-Math.cos(e);return new et(xa(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-di(2*r);return new et(-2*xa(r)*Math.cos(e)/t,2*di(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+di(2*r);return new et(2*di(r)*Math.cos(e)/t,-2*xa(r)*Math.sin(e)/t)},asinh:function(){let r=this.im;this.im=-this.re,this.re=r;const e=this.asin();return this.re=-this.im,this.im=r,r=e.re,e.re=-e.im,e.im=r,e},acosh:function(){const r=this.acos();if(r.im<=0){const e=r.re;r.re=-r.im,r.im=e}else{const e=r.im;r.im=-r.re,r.re=e}return r},atanh:function(){const r=this.re,e=this.im,t=r>1&&e===0,n=1-r,a=1+r,s=n*n+e*e,o=s!==0?new et((a*n-e*e)/s,(e*n+a*e)/s):new et(r!==-1?r/0:0,e!==0?e/0:0),l=o.re;return o.re=W1(o.re,o.im)/2,o.im=Math.atan2(o.im,l)/2,t&&(o.im=-o.im),o},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new et(0,Math.PI/2);const t=r*r+e*e;return t!==0?new et(r/t,-e/t).atanh():new et(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0)return new et(r!==0?Math.log(r+Math.sqrt(r*r+1)):1/0,0);const t=r*r+e*e;return t!==0?new et(r/t,-e/t).asinh():new et(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return et.INFINITY;const t=r*r+e*e;return t!==0?new et(r/t,-e/t).acosh():new et(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return et.INFINITY;if(this.isInfinite())return et.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new et(r/t,-e/t)},conjugate:function(){return new et(this.re,-this.im)},neg:function(){return new et(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new et(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new et(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new et(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=Dl(r,e);return Math.abs(t.re-this.re)<=et.EPSILON&&Math.abs(t.im-this.im)<=et.EPSILON},clone:function(){return new et(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<et.EPSILON&&(r=0),Math.abs(e)<et.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};et.ZERO=new et(0,0);et.ONE=new et(1,0);et.I=new et(0,1);et.PI=new et(Math.PI,0);et.E=new et(Math.E,0);et.INFINITY=new et(1/0,1/0);et.NAN=new et(NaN,NaN);et.EPSILON=1e-15;var xQ="Complex",vQ=[],yQ=Se(xQ,vQ,()=>(Object.defineProperty(et,"name",{value:"Complex"}),et.prototype.constructor=et,et.prototype.type="Complex",et.prototype.isComplex=!0,et.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},et.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},et.prototype.format=function(r){var e="",t=this.im,n=this.re,a=Il(this.re,r),s=Il(this.im,r),o=Kt(r)?r:r?r.precision:null;if(o!==null){var l=Math.pow(10,-o);Math.abs(n/t)<l&&(n=0),Math.abs(t/n)<l&&(t=0)}return t===0?e=a:n===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=a+" - i":e=a+" - "+s.substring(1)+"i":t===1?e=a+" + i":e=a+" + "+s+"i",e},et.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return et(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(Kt(t)){if(Ji(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Kt(n))return new et({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},et.prototype.valueOf=et.prototype.toString,et.fromJSON=function(r){return new et(r)},et.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},et),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(r){if(isNaN(r))throw new Error("");return r});const Ft=BigInt(0),nr=BigInt(1),Pn=BigInt(2),pf=BigInt(3),au=BigInt(5),Bi=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const bQ=2e3,_t={s:nr,n:Ft,d:nr};function Ps(r,e){try{r=BigInt(r)}catch{throw Mo()}return r*e}function Pa(r){return typeof r=="bigint"?r:Math.floor(r)}function en(r,e){if(e===Ft)throw Db();const t=Object.create(ya.prototype);t.s=r<Ft?-nr:nr,r=r<Ft?-r:r;const n=Ml(r,e);return t.n=r/n,t.d=e/n,t}const wQ=[Pn*Pn,Pn,Pn*Pn,Pn,Pn*Pn,Pn*pf,Pn,Pn*pf];function Xc(r){const e=Object.create(null);if(r<=nr)return e[r]=nr,e;const t=n=>{e[n]=(e[n]||Ft)+nr};for(;r%Pn===Ft;)t(Pn),r/=Pn;for(;r%pf===Ft;)t(pf),r/=pf;for(;r%au===Ft;)t(au),r/=au;for(let n=0,a=Pn+au;a*a<=r;){for(;r%a===Ft;)t(a),r/=a;a+=wQ[n],n=n+1&7}return r>nr&&t(r),e}const zn=function(r,e){let t=Ft,n=nr,a=nr;if(r!=null)if(e!==void 0){if(typeof r=="bigint")t=r;else{if(isNaN(r))throw Mo();if(r%1!==0)throw sj();t=BigInt(r)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Mo();if(e%1!==0)throw sj();n=BigInt(e)}a=t*n}else if(typeof r=="object"){if("d"in r&&"n"in r)t=BigInt(r.n),n=BigInt(r.d),"s"in r&&(t*=BigInt(r.s));else if(0 in r)t=BigInt(r[0]),1 in r&&(n=BigInt(r[1]));else if(typeof r=="bigint")t=r;else throw Mo();a=t*n}else if(typeof r=="number"){if(isNaN(r))throw Mo();if(r<0&&(a=-nr,r=-r),r%1===0)t=BigInt(r);else{let s=1,o=0,l=1,u=1,c=1,d=1e7;for(r>=1&&(s=10**Math.floor(1+Math.log10(r)),r/=s);l<=d&&c<=d;){let h=(o+u)/(l+c);if(r===h){l+c<=d?(t=o+u,n=l+c):c>l?(t=u,n=c):(t=o,n=l);break}else r>h?(o+=u,l+=c):(u+=o,c+=l),l>d?(t=u,n=c):(t=o,n=l)}t=BigInt(t)*BigInt(s),n=BigInt(n)}}else if(typeof r=="string"){let s=0,o=Ft,l=Ft,u=Ft,c=nr,d=nr,h=r.replace(/_/g,"").match(/\d+|./g);if(h===null)throw Mo();if(h[s]==="-"?(a=-nr,s++):h[s]==="+"&&s++,h.length===s+1?l=Ps(h[s++],a):h[s+1]==="."||h[s]==="."?(h[s]!=="."&&(o=Ps(h[s++],a)),s++,(s+1===h.length||h[s+1]==="("&&h[s+3]===")"||h[s+1]==="'"&&h[s+3]==="'")&&(l=Ps(h[s],a),c=Bi**BigInt(h[s].length),s++),(h[s]==="("&&h[s+2]===")"||h[s]==="'"&&h[s+2]==="'")&&(u=Ps(h[s+1],a),d=Bi**BigInt(h[s+1].length)-nr,s+=3)):h[s+1]==="/"||h[s+1]===":"?(l=Ps(h[s],a),c=Ps(h[s+2],nr),s+=3):h[s+3]==="/"&&h[s+1]===" "&&(o=Ps(h[s],a),l=Ps(h[s+2],a),c=Ps(h[s+4],nr),s+=5),h.length<=s)n=c*d,a=t=u+n*o+d*l;else throw Mo()}else if(typeof r=="bigint")t=r,a=r,n=nr;else throw Mo();if(n===Ft)throw Db();_t.s=a<Ft?-nr:nr,_t.n=t<Ft?-t:t,_t.d=n<Ft?-n:n};function _Q(r,e,t){let n=nr;for(;e>Ft;r=r*r%t,e>>=nr)e&nr&&(n=n*r%t);return n}function NQ(r,e){for(;e%Pn===Ft;e/=Pn);for(;e%au===Ft;e/=au);if(e===nr)return Ft;let t=Bi%e,n=1;for(;t!==nr;n++)if(t=t*Bi%e,n>bQ)return Ft;return BigInt(n)}function SQ(r,e,t){let n=nr,a=_Q(Bi,t,e);for(let s=0;s<300;s++){if(n===a)return BigInt(s);n=n*Bi%e,a=a*Bi%e}return 0}function Ml(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function ya(r,e){if(zn(r,e),this instanceof ya)r=Ml(_t.d,_t.n),this.s=_t.s,this.n=_t.n/r,this.d=_t.d/r;else return en(_t.s*_t.n,_t.d)}const Db=function(){return new Error("Division by Zero")},Mo=function(){return new Error("Invalid argument")},sj=function(){return new Error("Parameters must be integer")};ya.prototype={s:nr,n:Ft,d:nr,abs:function(){return en(this.n,this.d)},neg:function(){return en(-this.s*this.n,this.d)},add:function(r,e){return zn(r,e),en(this.s*this.n*_t.d+_t.s*this.d*_t.n,this.d*_t.d)},sub:function(r,e){return zn(r,e),en(this.s*this.n*_t.d-_t.s*this.d*_t.n,this.d*_t.d)},mul:function(r,e){return zn(r,e),en(this.s*_t.s*this.n*_t.n,this.d*_t.d)},div:function(r,e){return zn(r,e),en(this.s*_t.s*this.n*_t.d,this.d*_t.n)},clone:function(){return en(this.s*this.n,this.d)},mod:function(r,e){if(r===void 0)return en(this.s*this.n%this.d,nr);if(zn(r,e),Ft===_t.n*this.d)throw Db();return en(this.s*(_t.d*this.n)%(_t.n*this.d),_t.d*this.d)},gcd:function(r,e){return zn(r,e),en(Ml(_t.n,this.n)*Ml(_t.d,this.d),_t.d*this.d)},lcm:function(r,e){return zn(r,e),_t.n===Ft&&this.n===Ft?en(Ft,nr):en(_t.n*this.n,Ml(_t.n,this.n)*Ml(_t.d,this.d))},inverse:function(){return en(this.s*this.d,this.n)},pow:function(r,e){if(zn(r,e),_t.d===nr)return _t.s<Ft?en((this.s*this.d)**_t.n,this.n**_t.n):en((this.s*this.n)**_t.n,this.d**_t.n);if(this.s<Ft)return null;let t=Xc(this.n),n=Xc(this.d),a=nr,s=nr;for(let o in t)if(o!=="1"){if(o==="0"){a=Ft;break}if(t[o]*=_t.n,t[o]%_t.d===Ft)t[o]/=_t.d;else return null;a*=BigInt(o)**t[o]}for(let o in n)if(o!=="1"){if(n[o]*=_t.n,n[o]%_t.d===Ft)n[o]/=_t.d;else return null;s*=BigInt(o)**n[o]}return _t.s<Ft?en(s,a):en(a,s)},log:function(r,e){if(zn(r,e),this.s<=Ft||_t.s<=Ft)return null;const t=Object.create(null),n=Xc(_t.n),a=Xc(_t.d),s=Xc(this.n),o=Xc(this.d);for(const c in a)n[c]=(n[c]||Ft)-a[c];for(const c in o)s[c]=(s[c]||Ft)-o[c];for(const c in n)c!=="1"&&(t[c]=!0);for(const c in s)c!=="1"&&(t[c]=!0);let l=null,u=null;for(const c in t){const d=n[c]||Ft,h=s[c]||Ft;if(d===Ft){if(h!==Ft)return null;continue}let g=h,m=d;const v=Ml(g,m);if(g/=v,m/=v,l===null&&u===null)l=g,u=m;else if(g*u!==l*m)return null}return l!==null&&u!==null?en(l,u):null},equals:function(r,e){return zn(r,e),this.s*this.n*_t.d===_t.s*_t.n*this.d},lt:function(r,e){return zn(r,e),this.s*this.n*_t.d<_t.s*_t.n*this.d},lte:function(r,e){return zn(r,e),this.s*this.n*_t.d<=_t.s*_t.n*this.d},gt:function(r,e){return zn(r,e),this.s*this.n*_t.d>_t.s*_t.n*this.d},gte:function(r,e){return zn(r,e),this.s*this.n*_t.d>=_t.s*_t.n*this.d},compare:function(r,e){zn(r,e);let t=this.s*this.n*_t.d-_t.s*_t.n*this.d;return(Ft<t)-(t<Ft)},ceil:function(r){return r=Bi**BigInt(r||0),en(Pa(this.s*r*this.n/this.d)+(r*this.n%this.d>Ft&&this.s>=Ft?nr:Ft),r)},floor:function(r){return r=Bi**BigInt(r||0),en(Pa(this.s*r*this.n/this.d)-(r*this.n%this.d>Ft&&this.s<Ft?nr:Ft),r)},round:function(r){return r=Bi**BigInt(r||0),en(Pa(this.s*r*this.n/this.d)+this.s*((this.s>=Ft?nr:Ft)+Pn*(r*this.n%this.d)>this.d?nr:Ft),r)},roundTo:function(r,e){zn(r,e);const t=this.n*_t.d,n=this.d*_t.n,a=t%n;let s=Pa(t/n);return a+a>=n&&s++,en(this.s*s*_t.n,_t.d)},divisible:function(r,e){return zn(r,e),_t.n===Ft?!1:this.n*_t.d%(_t.n*this.d)===Ft},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(r=15){let e=this.n,t=this.d,n=NQ(e,t),a=SQ(e,t,n),s=this.s<Ft?"-":"";if(s+=Pa(e/t),e%=t,e*=Bi,e&&(s+="."),n){for(let o=a;o--;)s+=Pa(e/t),e%=t,e*=Bi;s+="(";for(let o=n;o--;)s+=Pa(e/t),e%=t,e*=Bi;s+=")"}else for(let o=r;e&&o--;)s+=Pa(e/t),e%=t,e*=Bi;return s},toFraction:function(r=!1){let e=this.n,t=this.d,n=this.s<Ft?"-":"";if(t===nr)n+=e;else{const a=Pa(e/t);r&&a>Ft&&(n+=a,n+=" ",e%=t),n+=e,n+="/",n+=t}return n},toLatex:function(r=!1){let e=this.n,t=this.d,n=this.s<Ft?"-":"";if(t===nr)n+=e;else{const a=Pa(e/t);r&&a>Ft&&(n+=a,e%=t),n+="\\frac{",n+=e,n+="}{",n+=t,n+="}"}return n},toContinued:function(){let r=this.n,e=this.d;const t=[];for(;e;){t.push(Pa(r/e));const n=r%e;r=e,e=n}return t},simplify:function(r=.001){const e=BigInt(Math.ceil(1/r)),t=this.abs(),n=t.toContinued();for(let a=1;a<n.length;a++){let s=en(n[a-1],nr);for(let l=a-2;l>=0;l--)s=s.inverse().add(n[l]);let o=s.sub(t);if(o.n*e<o.d)return s.mul(this.s)}return this}};var jQ="Fraction",EQ=[],AQ=Se(jQ,EQ,()=>(Object.defineProperty(ya,"name",{value:"Fraction"}),ya.prototype.constructor=ya,ya.prototype.type="Fraction",ya.prototype.isFraction=!0,ya.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ya.fromJSON=function(r){return new ya(r)},ya),{isClass:!0}),TQ="Range",CQ=[],DQ=Se(TQ,CQ,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,s=t!=null,o=n!=null;if(a){if(Xt(e))e=e.toNumber();else if(typeof e!="number"&&!mf(e))throw new TypeError("Parameter start must be a number or bigint")}if(s){if(Xt(t))t=t.toNumber();else if(typeof t!="number"&&!mf(t))throw new TypeError("Parameter end must be a number or bigint")}if(o){if(Xt(n))n=n.toNumber();else if(typeof n!="number"&&!mf(n))throw new TypeError("Parameter step must be a number or bigint")}this.start=a?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=o?parseFloat(n):1}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(s){return parseFloat(s)}),a=n.some(function(s){return isNaN(s)});if(a)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,a=this.end,s=a-t;return zo(n)===zo(s)?e=Math.ceil(s/n):s===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,a=this.end,s=0;if(n>0)for(;t<a;)e(t,[s],this),t+=n,s++;else if(n<0)for(;t>a;)e(t,[s],this),t+=n,s++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,a,s){t[a[0]]=e(n,a,s)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Il(this.start,e);return this.step!==1&&(t+=":"+Il(this.step,e)),t+=":"+Il(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),kQ="Matrix",MQ=[],FQ=Se(kQ,MQ,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function K1(r,e,t){var n=r.constructor,a=new n(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!kt(t))throw new Error("size must be an integer");if(r.greaterThan(a.pow(t-1).sub(1))||r.lessThan(a.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(a.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function OQ(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:a}=yD(e);switch(t){case"fixed":return RQ(r,n);case"exponential":return oj(r,n);case"engineering":return BQ(r,n);case"bin":return K1(r,2,a);case"oct":return K1(r,8,a);case"hex":return K1(r,16,a);case"auto":{var s=lj(e?.lowerExp,-3),o=lj(e?.upperExp,5);if(r.isZero())return"0";var l,u=r.toSignificantDigits(n),c=u.e;return c>=s&&c<o?l=u.toFixed():l=oj(r,n),l.replace(/((\.\d*?)(0+))($|e)/,function(){var d=arguments[2],h=arguments[4];return d!=="."?d+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function BQ(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,a=r.mul(Math.pow(10,-n)),s=a.toPrecision(e);if(s.includes("e")){var o=r.constructor;s=new o(s).toFixed()}return s+"e"+(t>=0?"+":"")+n.toString()}function oj(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function RQ(r,e){return r.toFixed(e)}function lj(r,e){return Kt(r)?r:Xt(r)?r.toNumber():e}function LQ(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function Jt(r,e){var t=IQ(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function IQ(r,e){if(typeof r=="number")return Il(r,e);if(Xt(r))return OQ(r,e);if(zQ(r))return!e||e.fraction!=="decimal"?"".concat(r.s*r.n,"/").concat(r.d):r.toString();if(Array.isArray(r))return OD(r,e);if(fi(r))return su(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>su(n)+": "+Jt(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function su(r){for(var e=String(r),t="",n=0;n<e.length;){var a=e.charAt(n);t+=a in cj?cj[a]:a,n++}return'"'+t+'"'}var cj={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function _a(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function OD(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,a=0;a<n;a++)a!==0&&(t+=", "),t+=OD(r[a],e);return t+="]",t}else return Jt(r,e)}function zQ(r){return r&&typeof r=="object"&&typeof r.s=="bigint"&&typeof r.n=="bigint"&&typeof r.d=="bigint"||!1}function Ey(r,e){if(!fi(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Or(r)+", index: 0)");if(!fi(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Or(e)+", index: 1)");return r===e?0:r>e?1:-1}function er(r,e,t){if(!(this instanceof er))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}er.prototype=new RangeError;er.prototype.constructor=RangeError;er.prototype.name="DimensionError";er.prototype.isDimensionError=!0;function Wa(r,e,t){if(!(this instanceof Wa))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Wa.prototype=new RangeError;Wa.prototype.constructor=RangeError;Wa.prototype.name="IndexError";Wa.prototype.isIndexError=!0;function Ut(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function BD(r,e,t){var n,a=r.length;if(a!==e[t])throw new er(a,e[t]);if(t<e.length-1){var s=t+1;for(n=0;n<a;n++){var o=r[n];if(!Array.isArray(o))throw new er(e.length-1,e.length,"<");BD(r[n],e,s)}}else for(n=0;n<a;n++)if(Array.isArray(r[n]))throw new er(e.length+1,e.length,">")}function uj(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new er(r.length,0)}else BD(r,e,0)}function Om(r,e){var t=r.isMatrix?r._size:Ut(r),n=e._sourceSize;n.forEach((a,s)=>{if(a!==null&&a!==t[s])throw new er(a,t[s])})}function $r(r,e){if(r!==void 0){if(!Kt(r)||!kt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Wa(r,e)}}function Au(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&Mr(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(fi(t)&&t.length===0)return!0}return!1}function Tu(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!Kt(a)||!kt(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(e)+")")}),(Kt(r)||Xt(r))&&(r=[r]);var n=t!==void 0?t:0;return Ay(r,e,0,n),r}function Ay(r,e,t,n){var a,s,o=r.length,l=e[t],u=Math.min(o,l);if(r.length=l,t<e.length-1){var c=t+1;for(a=0;a<u;a++)s=r[a],Array.isArray(s)||(s=[s],r[a]=s),Ay(s,e,c,n);for(a=u;a<l;a++)s=[],r[a]=s,Ay(s,e,c,n)}else{for(a=0;a<u;a++)for(;Array.isArray(r[a]);)r[a]=r[a][0];for(a=u;a<l;a++)r[a]=n}}function kb(r,e){var t=pr(r,!0),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new er(0,n,"!=");e=Mb(e,n);var a=RD(e);if(n!==a)throw new er(a,n,"!=");try{return PQ(t,e)}catch(s){throw s instanceof er?new er(a,n,"!="):s}}function Mb(r,e){var t=RD(r),n=r.slice(),a=-1,s=r.indexOf(a),o=r.indexOf(a,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var l=s>=0,u=e%t===0;if(l)if(u)n[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function RD(r){return r.reduce((e,t)=>e*t,1)}function PQ(r,e){for(var t=r,n,a=e.length-1;a>0;a--){var s=e[a];n=[];for(var o=t.length/s,l=0;l<o;l++)n.push(t.slice(l*s,(l+1)*s));t=n}return t}function Bm(r,e){for(var t=Ut(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=LD(r,n,0),t.length=n),r}function LD(r,e,t){var n,a;if(t<e){var s=t+1;for(n=0,a=r.length;n<a;n++)r[n]=LD(r[n],e,s)}else for(;Array.isArray(r);)r=r[0];return r}function ID(r,e,t,n){var a=n||Ut(r);if(t)for(var s=0;s<t;s++)r=[r],a.unshift(1);for(r=zD(r,e,0);a.length<e;)a.push(1);return r}function zD(r,e,t){var n,a;if(Array.isArray(r)){var s=t+1;for(n=0,a=r.length;n<a;n++)r[n]=zD(r[n],e,s)}else for(var o=t;o<e;o++)r=[r];return r}function pr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(r))return r;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var t=[];return e?a(r):n(r),t;function n(s){for(var o=0;o<s.length;o++){var l=s[o];Array.isArray(l)?n(l):t.push(l)}}function a(s){if(Array.isArray(s[0]))for(var o=0;o<s.length;o++)a(s[o]);else for(var l=0;l<s.length;l++)t.push(s[l])}}function $o(r,e){return Array.prototype.map.call(r,e)}function PD(r,e){Array.prototype.forEach.call(r,e)}function dj(r,e){if(Ut(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function fj(r,e){if(Ut(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function hj(r,e){return Array.prototype.join.call(r,e)}function Cu(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function Rm(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function Ap(r,e){for(var t,n=0,a=0;a<r.length;a++){var s=r[a],o=Array.isArray(s);if(a===0&&o&&(n=s.length),o&&s.length!==n)return;var l=o?Ap(s,e):e(s);if(t===void 0)t=l;else if(t!==l)return"mixed"}return t}function qD(r,e,t,n){if(n<t){if(r.length!==e.length)throw new er(r.length,e.length);for(var a=[],s=0;s<r.length;s++)a[s]=qD(r[s],e[s],t,n+1);return a}else return r.concat(e)}function $D(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return qD(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function Fb(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(g=>g.length),a=Math.max(...n),s=new Array(a).fill(null),o=0;o<e.length;o++)for(var l=e[o],u=n[o],c=0;c<u;c++){var d=a-u+c;l[c]>s[d]&&(s[d]=l[c])}for(var h=0;h<e.length;h++)UD(e[h],s);return s}function UD(r,e){for(var t=e.length,n=r.length,a=0;a<n;a++){var s=t-n+a;if(r[a]<e[s]&&r[a]>1||r[a]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[a]," to size ").concat(e[s]))}}function Rl(r,e){var t=Ut(r);if(Js(t,e))return r;UD(t,e);var n=Fb(t,e),a=n.length,s=[...Array(a-t.length).fill(1),...t],o=$Q(r);t.length<a&&(o=kb(o,s),t=Ut(o));for(var l=0;l<a;l++)t[l]<n[l]&&(o=qQ(o,n[l],l),t=Ut(o));return o}function qQ(r,e,t){return $D(...Array(e).fill(r),t)}function Ob(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=Ut(r);if(e.length!==t.length)throw new er(e.length,t.length);for(var n=0;n<e.length;n++)$r(e[n],t[n]);return e.reduce((a,s)=>a[s],r)}function Ty(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return[];if(t)return s(r);var n=[];return a(r,0);function a(o,l){if(Array.isArray(o)){for(var u=o.length,c=Array(u),d=0;d<u;d++)n[l]=d,c[d]=a(o[d],l+1);return c}else return e(o,n.slice(0,l),r)}function s(o){if(Array.isArray(o)){for(var l=o.length,u=Array(l),c=0;c<l;c++)u[c]=s(o[c]);return u}else return e(o)}}function HD(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return;if(t){s(r);return}var n=[];a(r,0);function a(o,l){if(Array.isArray(o))for(var u=o.length,c=0;c<u;c++)n[l]=c,a(o[c],l+1);else e(o,n.slice(0,l),r)}function s(o){if(Array.isArray(o))for(var l=o.length,u=0;u<l;u++)s(o[u]);else e(o)}}function $Q(r){return kn([],r)}function Hl(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Dm.isTypedFunction(r)){var a;if(n)a=1;else{var s=(e.isMatrix?e.size():Ut(e)).map(()=>0),o=e.isMatrix?e.get(s):Ob(e,s);a=VQ(r,o,s,e)}var l;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var u=UQ(r,a);l=u!==void 0?u:r}else l=r;return a>=1&&a<=3?{isUnary:a===1,fn:function(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];return mj(l,h.slice(0,a),t,r.name)}}:{isUnary:!1,fn:function(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];return mj(l,h,t,r.name)}}}return n===void 0?{isUnary:HQ(r),fn:r}:{isUnary:n,fn:r}}function UQ(r,e){var t=[];if(Object.entries(r.signatures).forEach(n=>{var[a,s]=n;a.split(",").length===e&&t.push(s)}),t.length===1)return t[0]}function HQ(r){if(r.length!==1)return!1;var e=r.toString();if(/arguments/.test(e))return!1;var t=e.match(/\(.*?\)/);return!/\.\.\./.test(t)}function VQ(r,e,t,n){for(var a=[e,t,n],s=3;s>0;s--){var o=a.slice(0,s);if(Dm.resolve(r,o)!==null)return s}}function mj(r,e,t,n){try{return r(...e)}catch(a){GQ(a,e,t,n)}}function GQ(r,e,t,n){var a;if(r instanceof TypeError&&((a=r.data)===null||a===void 0?void 0:a.category)==="wrongType"){var s=[];throw s.push("value: ".concat(Or(e[0]))),e.length>=2&&s.push("index: ".concat(Or(e[1]))),e.length>=3&&s.push("array: ".concat(Or(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var QQ="DenseMatrix",WQ=["Matrix"],KQ=Se(QQ,WQ,r=>{var{Matrix:e}=r;function t(d,h){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!fi(h))throw new Error("Invalid datatype: "+h);if(Lt(d))d.type==="DenseMatrix"?(this._data=Ht(d._data),this._size=Ht(d._size),this._datatype=h||d._datatype):(this._data=d.toArray(),this._size=d.size(),this._datatype=h||d._datatype);else if(d&&Mr(d.data)&&Mr(d.size))this._data=d.data,this._size=d.size,uj(this._data,this._size),this._datatype=h||d.datatype;else if(Mr(d))this._data=c(d),this._size=Ut(this._data),uj(this._data,this._size),this._datatype=h;else{if(d)throw new TypeError("Unsupported type of data ("+Or(d)+")");this._data=[],this._size=[0],this._datatype=h}}t.prototype=new e,t.prototype.createDenseMatrix=function(d,h){return new t(d,h)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return Ap(this._data,Or)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(d,h){return new t(d,h)},t.prototype.subset=function(d,h,g){switch(arguments.length){case 1:return n(this,d);case 2:case 3:return s(this,d,h,g);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(d){return Ob(this._data,d)},t.prototype.set=function(d,h,g){if(!Mr(d))throw new TypeError("Array expected");if(d.length<this._size.length)throw new er(d.length,this._size.length,"<");var m,v,x,b=d.map(function(S){return S+1});u(this,b,g);var y=this._data;for(m=0,v=d.length-1;m<v;m++)x=d[m],$r(x,y.length),y=y[x];return x=d[d.length-1],$r(x,y.length),y[x]=h,this};function n(d,h){if(!bp(h))throw new TypeError("Invalid index");var g=h.isScalar();if(g)return d.get(h.min());var m=h.size();if(m.length!==d._size.length)throw new er(m.length,d._size.length);for(var v=h.min(),x=h.max(),b=0,y=d._size.length;b<y;b++)$r(v[b],d._size[b]),$r(x[b],d._size[b]);var S=new t([]),_=a(d._data,h);return S._size=_.size,S._datatype=d._datatype,S._data=_.data,S}function a(d,h){var g=h.size().length-1,m=Array(g);return{data:v(d),size:m};function v(x){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=h.dimension(b);return m[b]=y.size()[0],b<g?y.map(S=>($r(S,x.length),v(x[S],b+1))).valueOf():y.map(S=>($r(S,x.length),x[S])).valueOf()}}function s(d,h,g,m){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var v=h.size(),x=h.isScalar(),b;if(Lt(g)?(b=g.size(),g=g.valueOf()):b=Ut(g),x){if(b.length!==0)throw new TypeError("Scalar expected");d.set(h.min(),g,m)}else{if(!Js(b,v))try{b.length===0?g=Rl([g],v):g=Rl(g,v),b=Ut(g)}catch{}if(v.length<d._size.length)throw new er(v.length,d._size.length,"<");if(b.length<v.length){for(var y=0,S=0;v[y]===1&&b[y]===1;)y++;for(;v[y]===1;)S++,y++;g=ID(g,v.length,S,b)}if(!Js(v,b))throw new er(v,b,">");var _=h.max().map(function(N){return N+1});u(d,_,m),o(d._data,h,g)}return d}function o(d,h,g){var m=h.size().length-1;v(d,g);function v(x,b){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,S=h.dimension(y);y<m?S.forEach((_,N)=>{$r(_,x.length),v(x[_],b[N[0]],y+1)}):S.forEach((_,N)=>{$r(_,x.length),x[_]=b[N[0]]})}}t.prototype.resize=function(d,h,g){if(!ja(d))throw new TypeError("Array or Matrix expected");var m=d.valueOf().map(x=>Array.isArray(x)&&x.length===1?x[0]:x),v=g?this.clone():this;return l(v,m,h)};function l(d,h,g){if(h.length===0){for(var m=d._data;Mr(m);)m=m[0];return m}return d._size=h.slice(0),d._data=Tu(d._data,d._size,g),d}t.prototype.reshape=function(d,h){var g=h?this.clone():this;g._data=kb(g._data,d);var m=g._size.reduce((v,x)=>v*x);return g._size=Mb(d,m),g};function u(d,h,g){for(var m=d._size.slice(0),v=!1;m.length<h.length;)m.push(0),v=!0;for(var x=0,b=h.length;x<b;x++)h[x]>m[x]&&(m[x]=h[x],v=!0);v&&l(d,m,g)}t.prototype.clone=function(){var d=new t({data:Ht(this._data),size:Ht(this._size),datatype:this._datatype});return d},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(d){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=this,m=g._size.length-1;if(m<0)return g.clone();var v=Hl(d,g,"map",h),x=v.fn,b=g.create(void 0,g._datatype);if(b._size=g._size,h||v.isUnary)return b._data=E(g._data),b;if(m===0){for(var y=g.valueOf(),S=Array(y.length),_=0;_<y.length;_++)S[_]=x(y[_],[_],g);return b._data=S,b}var N=[];return b._data=j(g._data),b;function j(T){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=Array(T.length);if(F<m)for(var R=0;R<T.length;R++)N[F]=R,A[R]=j(T[R],F+1);else for(var I=0;I<T.length;I++)N[F]=I,A[I]=x(T[I],N.slice(),g);return A}function E(T){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=Array(T.length);if(F<m)for(var R=0;R<T.length;R++)A[R]=E(T[R],F+1);else for(var I=0;I<T.length;I++)A[I]=x(T[I]);return A}},t.prototype.forEach=function(d){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=this,m=g._size.length-1;if(m<0)return;var v=Hl(d,g,"map",h),x=v.fn;if(h||v.isUnary){_(g._data);return}if(m===0){for(var b=0;b<g._data.length;b++)x(g._data[b],[b],g);return}var y=[];S(g._data);function S(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(j<m)for(var E=0;E<N.length;E++)y[j]=E,S(N[E],j+1);else for(var T=0;T<N.length;T++)y[j]=T,x(N[T],y.slice(),g)}function _(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(j<m)for(var E=0;E<N.length;E++)_(N[E],j+1);else for(var T=0;T<N.length;T++)x(N[T])}},t.prototype[Symbol.iterator]=function*(){var d=this._size.length-1;if(!(d<0)){if(d===0){for(var h=0;h<this._data.length;h++)yield{value:this._data[h],index:[h]};return}var g=[],m=function*(x,b){if(b<d)for(var y=0;y<x.length;y++)g[b]=y,yield*m(x[y],b+1);else for(var S=0;S<x.length;S++)g[b]=S,yield{value:x[S],index:g.slice()}};yield*m(this._data,0)}},t.prototype.rows=function(){var d=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var g=this._data;for(var m of g)d.push(new t([m],this._datatype));return d},t.prototype.columns=function(){var d=this,h=[],g=this.size();if(g.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,v=function(y){var S=m.map(_=>[_[y]]);h.push(new t(S,d._datatype))},x=0;x<g[1];x++)v(x);return h},t.prototype.toArray=function(){return Ht(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(d){return Jt(this._data,d)},t.prototype.toString=function(){return Jt(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(d){if(d){if(Xt(d)&&(d=d.toNumber()),!Kt(d)||!kt(d))throw new TypeError("The parameter k must be an integer number")}else d=0;for(var h=d>0?d:0,g=d<0?-d:0,m=this._size[0],v=this._size[1],x=Math.min(m-g,v-h),b=[],y=0;y<x;y++)b[y]=this._data[y+g][y+h];return new t({data:b,size:[x],datatype:this._datatype})},t.diagonal=function(d,h,g,m){if(!Mr(d))throw new TypeError("Array expected, size parameter");if(d.length!==2)throw new Error("Only two dimensions matrix are supported");if(d=d.map(function(T){if(Xt(T)&&(T=T.toNumber()),!Kt(T)||!kt(T)||T<1)throw new Error("Size values must be positive integers");return T}),g){if(Xt(g)&&(g=g.toNumber()),!Kt(g)||!kt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var v=g>0?g:0,x=g<0?-g:0,b=d[0],y=d[1],S=Math.min(b-x,y-v),_;if(Mr(h)){if(h.length!==S)throw new Error("Invalid value array length");_=function(F){return h[F]}}else if(Lt(h)){var N=h.size();if(N.length!==1||N[0]!==S)throw new Error("Invalid matrix length");_=function(F){return h.get([F])}}else _=function(){return h};m||(m=Xt(_(0))?_(0).mul(0):0);var j=[];if(d.length>0){j=Tu(j,d,m);for(var E=0;E<S;E++)j[E+x][E+v]=_(E)}return new t({data:j,size:[b,y]})},t.fromJSON=function(d){return new t(d)},t.prototype.swapRows=function(d,h){if(!Kt(d)||!kt(d)||!Kt(h)||!kt(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $r(d,this._size[0]),$r(h,this._size[0]),t._swapRows(d,h,this._data),this},t._swapRows=function(d,h,g){var m=g[d];g[d]=g[h],g[h]=m};function c(d){return Lt(d)?c(d.valueOf()):Mr(d)?d.map(c):d}return t},{isClass:!0}),pj="clone",XQ=["typed"],YQ=Se(pj,XQ,r=>{var{typed:e}=r;return e(pj,{any:Ht})});function VD(r){var e=r.length,t=r[0].length,n,a,s=[];for(a=0;a<t;a++){var o=[];for(n=0;n<e;n++)o.push(r[n][a]);s.push(o)}return s}function zu(r){for(var e=0;e<r.length;e++)if(ja(r[e]))return!0;return!1}function Xo(r,e){Lt(r)?r.forEach(t=>e(t),!1,!0):HD(r,e,!0)}function Yt(r,e,t){if(!t)return Lt(r)?r.map(a=>e(a),!1,!0):Ty(r,e,!0);var n=a=>a===0?a:e(a);return Lt(r)?r.map(a=>n(a),!1,!0):Ty(r,n,!0)}function Tp(r,e,t){var n=Array.isArray(r)?Ut(r):r.size();if(e<0||e>=n.length)throw new Wa(e,n.length);return Lt(r)?r.create(Lm(r.valueOf(),e,t),r.datatype()):Lm(r,e,t)}function Lm(r,e,t){var n,a,s,o;if(e<=0)if(Array.isArray(r[0])){for(o=VD(r),a=[],n=0;n<o.length;n++)a[n]=Lm(o[n],e-1,t);return a}else{for(s=r[0],n=1;n<r.length;n++)s=t(s,r[n]);return s}else{for(a=[],n=0;n<r.length;n++)a[n]=Lm(r[n],e-1,t);return a}}function gj(r,e,t,n,a,s,o,l,u,c,d){var h=r._values,g=r._index,m=r._ptr,v,x,b,y;if(n)for(x=m[e],b=m[e+1],v=x;v<b;v++)y=g[v],t[y]!==s?(t[y]=s,o.push(y),n[y]=h[v]):(n[y]=l(n[y],h[v]),a[y]=s);else for(x=m[e],b=m[e+1],v=x;v<b;v++)y=g[v],t[y]!==s?(t[y]=s,o.push(y)):a[y]=s}var xj="isInteger",ZQ=["typed"],JQ=Se(xj,ZQ,r=>{var{typed:e}=r;return e(xj,{number:kt,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),Ka="number",Pu="number, number";function GD(r){return Math.abs(r)}GD.signature=Ka;function QD(r,e){return r+e}QD.signature=Pu;function WD(r,e){return r-e}WD.signature=Pu;function KD(r,e){return r*e}KD.signature=Pu;function XD(r){return-r}XD.signature=Ka;function YD(r){return r}YD.signature=Ka;function af(r){return tG(r)}af.signature=Ka;function ZD(r){return r*r*r}ZD.signature=Ka;function JD(r){return Math.exp(r)}JD.signature=Ka;function e8(r){return rG(r)}e8.signature=Ka;function t8(r,e){if(!kt(r)||!kt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}t8.signature=Pu;function vj(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function Im(r){return JV(r)}Im.signature=Ka;function Cy(r){return ZV(r)}Cy.signature=Ka;function yj(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function Dy(r){return zo(r)}Dy.signature=Ka;function r8(r){return r*r}r8.signature=Ka;function n8(r,e){var t,n,a,s=0,o=1,l=1,u=0;if(!kt(r)||!kt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),a=r-n*e,t=s,s=o-n*s,o=t,t=l,l=u-n*l,u=t,r=e,e=a;var c;return r<0?c=[-r,-o,-u]:c=[r,r?o:0,u],c}n8.signature=Pu;function i8(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}i8.signature=Pu;function Yd(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!kt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(bD(r,e))}var eW="number",qu="number, number";function a8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function bitAnd");return r&e}a8.signature=qu;function s8(r){if(!kt(r))throw new Error("Integer expected in function bitNot");return~r}s8.signature=eW;function o8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function bitOr");return r|e}o8.signature=qu;function l8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function bitXor");return r^e}l8.signature=qu;function c8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function leftShift");return r<<e}c8.signature=qu;function u8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}u8.signature=qu;function d8(r,e){if(!kt(r)||!kt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}d8.signature=qu;function Hs(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return Hs(r,t)*Hs(t+1,e)}function f8(r,e){if(!kt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!kt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,a=e<t?t+1:e+1,s=2,o=e<t?e:t,l=a;l<=r;++l)for(n*=l;s<=o&&n%s===0;)n/=s,++s;return s<=o&&(n/=Hs(s,o)),n}f8.signature="number, number";var tW=Math.PI,rW=2*Math.PI,nW=Math.E,iW=1.618033988749895,aW="number",Bb="number, number";function h8(r){return!r}h8.signature=aW;function ky(r,e){return!!(r||e)}ky.signature=Bb;function My(r,e){return!!r!=!!e}My.signature=Bb;function Fy(r,e){return!!(r&&e)}Fy.signature=Bb;function zm(r){var e;if(kt(r))return r<=0?isFinite(r)?1/0:NaN:r>171?1/0:Hs(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*zm(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,a=n*r,s=a*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*a)+163879/(209018880*s)+5246819/(75246796800*s*r))}--r,e=gu[0];for(var o=1;o<gu.length;++o)e+=gu[o]/(r+o);var l=r+m8+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,r+.5)*Math.exp(-l)*e}zm.signature="number";var m8=4.7421875,gu=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],p8=.9189385332046728,sW=5,oW=7,bj=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function Pm(r){if(r<0)return NaN;if(r===0)return 1/0;if(!isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-Pm(1-r);r=r-1;for(var e=r+sW+.5,t=bj[0],n=oW-1;n>=1;n--)t+=bj[n]/(r+n);return p8+(r+.5)*Math.log(e)-e+Math.log(t)}Pm.signature="number";var xi="number";function g8(r){return sG(r)}g8.signature=xi;function x8(r){return Math.atan(1/r)}x8.signature=xi;function v8(r){return isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}v8.signature=xi;function y8(r){return Math.asin(1/r)}y8.signature=xi;function b8(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}b8.signature=xi;function w8(r){return Math.acos(1/r)}w8.signature=xi;function _8(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}_8.signature=xi;function N8(r){return oG(r)}N8.signature=xi;function S8(r){return lG(r)}S8.signature=xi;function j8(r){return 1/Math.tan(r)}j8.signature=xi;function E8(r){var e=Math.exp(2*r);return(e+1)/(e-1)}E8.signature=xi;function A8(r){return 1/Math.sin(r)}A8.signature=xi;function T8(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*zo(r)}T8.signature=xi;function C8(r){return 1/Math.cos(r)}C8.signature=xi;function D8(r){return 2/(Math.exp(r)+Math.exp(-r))}D8.signature=xi;function k8(r){return uG(r)}k8.signature=xi;var Rb="number";function M8(r){return r<0}M8.signature=Rb;function F8(r){return r>0}F8.signature=Rb;function O8(r){return Number.isNaN(r)}O8.signature=Rb;function Ea(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var wj="isNegative",lW=["typed","config"],cW=Se(wj,lW,r=>{var{typed:e,config:t}=r;return e(wj,{number:n=>oi(n,0,t.relTol,t.absTol)?!1:M8(n),BigNumber:n=>Ea(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),_j="isNumeric",uW=["typed"],dW=Se(_j,uW,r=>{var{typed:e}=r;return e(_j,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),Nj="hasNumericValue",fW=["typed","isNumeric"],hW=Se(Nj,fW,r=>{var{typed:e,isNumeric:t}=r;return e(Nj,{boolean:()=>!0,string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return t(a)}})}),Sj="isPositive",mW=["typed","config"],pW=Se(Sj,mW,r=>{var{typed:e,config:t}=r;return e(Sj,{number:n=>oi(n,0,t.relTol,t.absTol)?!1:F8(n),BigNumber:n=>Ea(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),jj="isZero",gW=["typed","equalScalar"],xW=Se(jj,gW,r=>{var{typed:e,equalScalar:t}=r;return e(jj,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>a=>e.find(n,a.valueType())(a.value)),"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),Ej="isNaN",vW=["typed"],yW=Se(Ej,vW,r=>{var{typed:e}=r;return e(Ej,{number:O8,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),Aj="typeOf",bW=["typed"],wW=Se(Aj,bW,r=>{var{typed:e}=r;return e(Aj,{any:Or})});function _W(r,e,t,n){return oi(r.re,e.re,t,n)&&oi(r.im,e.im,t,n)}var $u=Se("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),a.valueType()])(n.value,a.value)})}}),qm="equalScalar",NW=["typed","config"],SW=Se(qm,NW,r=>{var{typed:e,config:t}=r,n=$u({typed:e});return e(qm,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return oi(s,o,t.relTol,t.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||Ea(s,o,t.relTol,t.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return _W(s,o,t.relTol,t.absTol)}},n)});Se(qm,["typed","config"],r=>{var{typed:e,config:t}=r;return e(qm,{"number, number":function(a,s){return oi(a,s,t.relTol,t.absTol)}})});var jW="SparseMatrix",EW=["typed","equalScalar","Matrix"],AW=Se(jW,EW,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function a(x,b){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!fi(b))throw new Error("Invalid datatype: "+b);if(Lt(x))s(this,x,b);else if(x&&Mr(x.index)&&Mr(x.ptr)&&Mr(x.size))this._values=x.values,this._index=x.index,this._ptr=x.ptr,this._size=x.size,this._datatype=b||x.datatype;else if(Mr(x))o(this,x,b);else{if(x)throw new TypeError("Unsupported type of data ("+Or(x)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(x,b,y){b.type==="SparseMatrix"?(x._values=b._values?Ht(b._values):void 0,x._index=Ht(b._index),x._ptr=Ht(b._ptr),x._size=Ht(b._size),x._datatype=y||b._datatype):o(x,b.valueOf(),y||b._datatype)}function o(x,b,y){x._values=[],x._index=[],x._ptr=[],x._datatype=y;var S=b.length,_=0,N=t,j=0;if(fi(y)&&(N=e.find(t,[y,y])||t,j=e.convert(0,y)),S>0){var E=0;do{x._ptr.push(x._index.length);for(var T=0;T<S;T++){var F=b[T];if(Mr(F)){if(E===0&&_<F.length&&(_=F.length),E<F.length){var A=F[E];N(A,j)||(x._values.push(A),x._index.push(T))}}else E===0&&_<1&&(_=1),N(F,j)||(x._values.push(F),x._index.push(T))}E++}while(E<_)}x._ptr.push(x._index.length),x._size=[S,_]}a.prototype=new n,a.prototype.createSparseMatrix=function(x,b){return new a(x,b)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Ap(this._values,Or)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(x,b){return new a(x,b)},a.prototype.density=function(){var x=this._size[0],b=this._size[1];return x!==0&&b!==0?this._index.length/(x*b):0},a.prototype.subset=function(x,b,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return l(this,x);case 2:case 3:return u(this,x,b,y);default:throw new SyntaxError("Wrong number of arguments")}};function l(x,b){if(!bp(b))throw new TypeError("Invalid index");var y=b.isScalar();if(y)return x.get(b.min());var S=b.size();if(S.length!==x._size.length)throw new er(S.length,x._size.length);var _,N,j,E,T=b.min(),F=b.max();for(_=0,N=x._size.length;_<N;_++)$r(T[_],x._size[_]),$r(F[_],x._size[_]);var A=x._values,R=x._index,I=x._ptr,O=b.dimension(0),U=b.dimension(1),D=[],H=[];O.forEach(function(le,pe){H[le]=pe[0],D[le]=!0});var P=A?[]:void 0,G=[],ue=[];return U.forEach(function(le){for(ue.push(G.length),j=I[le],E=I[le+1];j<E;j++)_=R[j],D[_]===!0&&(G.push(H[_]),P&&P.push(A[j]))}),ue.push(G.length),new a({values:P,index:G,ptr:ue,size:S,datatype:x._datatype})}function u(x,b,y,S){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var _=b.size(),N=b.isScalar(),j;if(Lt(y)?(j=y.size(),y=y.toArray()):j=Ut(y),N){if(j.length!==0)throw new TypeError("Scalar expected");x.set(b.min(),y,S)}else{if(_.length!==1&&_.length!==2)throw new er(_.length,x._size.length,"<");if(j.length<_.length){for(var E=0,T=0;_[E]===1&&j[E]===1;)E++;for(;_[E]===1;)T++,E++;y=ID(y,_.length,T,j)}if(!Js(_,j))throw new er(_,j,">");if(_.length===1){var F=b.dimension(0);F.forEach(function(I,O){$r(I),x.set([I,0],y[O[0]],S)})}else{var A=b.dimension(0),R=b.dimension(1);A.forEach(function(I,O){$r(I),R.forEach(function(U,D){$r(U),x.set([I,U],y[O[0]][D[0]],S)})})}}return x}a.prototype.get=function(x){if(!Mr(x))throw new TypeError("Array expected");if(x.length!==this._size.length)throw new er(x.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=x[0],y=x[1];$r(b,this._size[0]),$r(y,this._size[1]);var S=c(b,this._ptr[y],this._ptr[y+1],this._index);return S<this._ptr[y+1]&&this._index[S]===b?this._values[S]:0},a.prototype.set=function(x,b,y){if(!Mr(x))throw new TypeError("Array expected");if(x.length!==this._size.length)throw new er(x.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=x[0],_=x[1],N=this._size[0],j=this._size[1],E=t,T=0;fi(this._datatype)&&(E=e.find(t,[this._datatype,this._datatype])||t,T=e.convert(0,this._datatype)),(S>N-1||_>j-1)&&(g(this,Math.max(S+1,N),Math.max(_+1,j),y),N=this._size[0],j=this._size[1]),$r(S,N),$r(_,j);var F=c(S,this._ptr[_],this._ptr[_+1],this._index);return F<this._ptr[_+1]&&this._index[F]===S?E(b,T)?d(F,_,this._values,this._index,this._ptr):this._values[F]=b:E(b,T)||h(F,S,_,b,this._values,this._index,this._ptr),this};function c(x,b,y,S){if(y-b===0)return y;for(var _=b;_<y;_++)if(S[_]===x)return _;return b}function d(x,b,y,S,_){y.splice(x,1),S.splice(x,1);for(var N=b+1;N<_.length;N++)_[N]--}function h(x,b,y,S,_,N,j){_.splice(x,0,S),N.splice(x,0,b);for(var E=y+1;E<j.length;E++)j[E]++}a.prototype.resize=function(x,b,y){if(!ja(x))throw new TypeError("Array or Matrix expected");var S=x.valueOf().map(N=>Array.isArray(N)&&N.length===1?N[0]:N);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(N){if(!Kt(N)||!kt(N)||N<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(S)+")")});var _=y?this.clone():this;return g(_,S[0],S[1],b)};function g(x,b,y,S){var _=S||0,N=t,j=0;fi(x._datatype)&&(N=e.find(t,[x._datatype,x._datatype])||t,j=e.convert(0,x._datatype),_=e.convert(_,x._datatype));var E=!N(_,j),T=x._size[0],F=x._size[1],A,R,I;if(y>F){for(R=F;R<y;R++)if(x._ptr[R]=x._values.length,E)for(A=0;A<T;A++)x._values.push(_),x._index.push(A);x._ptr[y]=x._values.length}else y<F&&(x._ptr.splice(y+1,F-y),x._values.splice(x._ptr[y],x._values.length),x._index.splice(x._ptr[y],x._index.length));if(F=y,b>T){if(E){var O=0;for(R=0;R<F;R++){x._ptr[R]=x._ptr[R]+O,I=x._ptr[R+1]+O;var U=0;for(A=T;A<b;A++,U++)x._values.splice(I+U,0,_),x._index.splice(I+U,0,A),O++}x._ptr[F]=x._values.length}}else if(b<T){var D=0;for(R=0;R<F;R++){x._ptr[R]=x._ptr[R]-D;var H=x._ptr[R],P=x._ptr[R+1]-D;for(I=H;I<P;I++)A=x._index[I],A>b-1&&(x._values.splice(I,1),x._index.splice(I,1),D++)}x._ptr[R]=x._values.length}return x._size[0]=b,x._size[1]=y,x}a.prototype.reshape=function(x,b){if(!Mr(x))throw new TypeError("Array expected");if(x.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");x.forEach(function(le){if(!Kt(le)||!kt(le)||le<=-2||le===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Jt(x)+")")});var y=this._size[0]*this._size[1];x=Mb(x,y);var S=x[0]*x[1];if(y!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var _=b?this.clone():this;if(this._size[0]===x[0]&&this._size[1]===x[1])return _;for(var N=[],j=0;j<_._ptr.length;j++)for(var E=0;E<_._ptr[j+1]-_._ptr[j];E++)N.push(j);for(var T=_._values.slice(),F=_._index.slice(),A=0;A<_._index.length;A++){var R=F[A],I=N[A],O=R*_._size[1]+I;N[A]=O%x[1],F[A]=Math.floor(O/x[1])}_._values.length=0,_._index.length=0,_._ptr.length=x[1]+1,_._size=x.slice();for(var U=0;U<_._ptr.length;U++)_._ptr[U]=0;for(var D=0;D<T.length;D++){var H=F[D],P=N[D],G=T[D],ue=c(H,_._ptr[P],_._ptr[P+1],_._index);h(ue,H,P,G,_._values,_._index,_._ptr)}return _},a.prototype.clone=function(){var x=new a({values:this._values?Ht(this._values):void 0,index:Ht(this._index),ptr:Ht(this._ptr),size:Ht(this._size),datatype:this._datatype});return x},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(x,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,S=this._size[0],_=this._size[1],N=Hl(x,y,"map"),j=function(T,F,A){return N.fn(T,[F,A],y)};return m(this,0,S-1,0,_-1,j,b)};function m(x,b,y,S,_,N,j){var E=[],T=[],F=[],A=t,R=0;fi(x._datatype)&&(A=e.find(t,[x._datatype,x._datatype])||t,R=e.convert(0,x._datatype));for(var I=function(X,V,se){var ae=N(X,V,se);A(ae,R)||(E.push(ae),T.push(V))},O=S;O<=_;O++){F.push(E.length);var U=x._ptr[O],D=x._ptr[O+1];if(j)for(var H=U;H<D;H++){var P=x._index[H];P>=b&&P<=y&&I(x._values[H],P-b,O-S)}else{for(var G={},ue=U;ue<D;ue++){var le=x._index[ue];G[le]=x._values[ue]}for(var pe=b;pe<=y;pe++){var de=pe in G?G[pe]:0;I(de,pe-b,O-S)}}}return F.push(E.length),new a({values:E,index:T,ptr:F,size:[y-b+1,_-S+1]})}a.prototype.forEach=function(x,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,S=this._size[0],_=this._size[1],N=Hl(x,y,"forEach"),j=0;j<_;j++){var E=this._ptr[j],T=this._ptr[j+1];if(b)for(var F=E;F<T;F++){var A=this._index[F];N.fn(this._values[F],[A,j],y)}else{for(var R={},I=E;I<T;I++){var O=this._index[I];R[O]=this._values[I]}for(var U=0;U<S;U++){var D=U in R?R[U]:0;N.fn(D,[U,j],y)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var x=this._size[1],b=0;b<x;b++)for(var y=this._ptr[b],S=this._ptr[b+1],_=y;_<S;_++){var N=this._index[_];yield{value:this._values[_],index:[N,b]}}},a.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(x,b,y,S,_){var N=S[0],j=S[1],E=[],T,F;for(T=0;T<N;T++)for(E[T]=[],F=0;F<j;F++)E[T][F]=0;for(F=0;F<j;F++)for(var A=y[F],R=y[F+1],I=A;I<R;I++)T=b[I],E[T][F]=x?_?Ht(x[I]):x[I]:1;return E}return a.prototype.format=function(x){for(var b=this._size[0],y=this._size[1],S=this.density(),_="Sparse Matrix ["+Jt(b,x)+" x "+Jt(y,x)+"] density: "+Jt(S,x)+`
`,N=0;N<y;N++)for(var j=this._ptr[N],E=this._ptr[N+1],T=j;T<E;T++){var F=this._index[T];_+=`
    (`+Jt(F,x)+", "+Jt(N,x)+") ==> "+(this._values?Jt(this._values[T],x):"X")}return _},a.prototype.toString=function(){return Jt(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(x){if(x){if(Xt(x)&&(x=x.toNumber()),!Kt(x)||!kt(x))throw new TypeError("The parameter k must be an integer number")}else x=0;var b=x>0?x:0,y=x<0?-x:0,S=this._size[0],_=this._size[1],N=Math.min(S-y,_-b),j=[],E=[],T=[];T[0]=0;for(var F=b;F<_&&j.length<N;F++)for(var A=this._ptr[F],R=this._ptr[F+1],I=A;I<R;I++){var O=this._index[I];if(O===F-b+y){j.push(this._values[I]),E[j.length-1]=O-y;break}}return T.push(j.length),new a({values:j,index:E,ptr:T,size:[N,1]})},a.fromJSON=function(x){return new a(x)},a.diagonal=function(x,b,y,S,_){if(!Mr(x))throw new TypeError("Array expected, size parameter");if(x.length!==2)throw new Error("Only two dimensions matrix are supported");if(x=x.map(function(le){if(Xt(le)&&(le=le.toNumber()),!Kt(le)||!kt(le)||le<1)throw new Error("Size values must be positive integers");return le}),y){if(Xt(y)&&(y=y.toNumber()),!Kt(y)||!kt(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var N=t,j=0;fi(_)&&(N=e.find(t,[_,_])||t,j=e.convert(0,_));var E=y>0?y:0,T=y<0?-y:0,F=x[0],A=x[1],R=Math.min(F-T,A-E),I;if(Mr(b)){if(b.length!==R)throw new Error("Invalid value array length");I=function(pe){return b[pe]}}else if(Lt(b)){var O=b.size();if(O.length!==1||O[0]!==R)throw new Error("Invalid matrix length");I=function(pe){return b.get([pe])}}else I=function(){return b};for(var U=[],D=[],H=[],P=0;P<A;P++){H.push(U.length);var G=P-E;if(G>=0&&G<R){var ue=I(G);N(ue,j)||(D.push(G+T),U.push(ue))}}return H.push(U.length),new a({values:U,index:D,ptr:H,size:[F,A]})},a.prototype.swapRows=function(x,b){if(!Kt(x)||!kt(x)||!Kt(b)||!kt(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $r(x,this._size[0]),$r(b,this._size[0]),a._swapRows(x,b,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(x,b,y,S,_){for(var N=S[x],j=S[x+1],E=N;E<j;E++)_(y[E],b[E])},a._swapRows=function(x,b,y,S,_,N){for(var j=0;j<y;j++){var E=N[j],T=N[j+1],F=c(x,E,T,_),A=c(b,E,T,_);if(F<T&&A<T&&_[F]===x&&_[A]===b){if(S){var R=S[F];S[F]=S[A],S[A]=R}continue}if(F<T&&_[F]===x&&(A>=T||_[A]!==b)){var I=S?S[F]:void 0;_.splice(A,0,b),S&&S.splice(A,0,I),_.splice(A<=F?F+1:F,1),S&&S.splice(A<=F?F+1:F,1);continue}if(A<T&&_[A]===b&&(F>=T||_[F]!==x)){var O=S?S[A]:void 0;_.splice(F,0,x),S&&S.splice(F,0,O),_.splice(F<=A?A+1:A,1),S&&S.splice(F<=A?A+1:A,1)}}},a},{isClass:!0}),TW="number",CW=["typed"];function DW(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],a=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:a}}else return null}function kW(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var a=parseInt(r.fractionalPart[n],r.radix);t+=a/Math.pow(r.radix,n+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is not a valid number');return s}var MW=Se(TW,CW,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var s=DW(a);if(s)return kW(s);var o=0,l=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);l&&(o=Number(l[2]),a=l[1]);var u=Number(a);if(isNaN(u))throw new SyntaxError('String "'+a+'" is not a valid number');if(l){if(u>2**o-1)throw new SyntaxError('String "'.concat(a,'" is out of range'));u>=2**(o-1)&&(u=u-2**o)}return u},BigNumber:function(a){return a.toNumber()},bigint:function(a){return Number(a)},Fraction:function(a){return a.valueOf()},Unit:e.referToSelf(n=>a=>{var s=a.clone();return s.value=n(a.value),s}),null:function(a){return 0},"Unit, string | Unit":function(a,s){return a.toNumber(s)},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),FW="bigint",OW=["typed"],BW=Se(FW,OW,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(a){return a},number:function(a){return BigInt(a.toFixed())},BigNumber:function(a){return BigInt(a.round().toString())},Fraction:function(a){return BigInt(a.valueOf().toFixed())},"string | boolean":function(a){return BigInt(a)},null:function(a){return 0n},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))});return t.fromJSON=function(n){return BigInt(n.value)},t}),Tj="string",RW=["typed"],LW=Se(Tj,RW,r=>{var{typed:e}=r;return e(Tj,{"":function(){return""},number:Il,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t)),any:function(n){return String(n)}})}),Cj="boolean",IW=["typed"],zW=Se(Cj,IW,r=>{var{typed:e}=r;return e(Cj,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var a=n.toLowerCase();if(a==="true")return!0;if(a==="false")return!1;var s=Number(n);if(n!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),PW="bignumber",qW=["typed","BigNumber"],$W=Se(PW,qW,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(a){return new t(a+"")},string:function(a){var s=a.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],l=t(s[1]),u=new t(2).pow(Number(o));if(l.gt(u.sub(1)))throw new SyntaxError('String "'.concat(a,'" is out of range'));var c=new t(2).pow(Number(o)-1);return l.gte(c)?l.sub(u):l}return new t(a)},BigNumber:function(a){return a},bigint:function(a){return new t(a.toString())},Unit:e.referToSelf(n=>a=>{var s=a.clone();return s.value=n(a.value),s}),Fraction:function(a){return new t(String(a.n)).div(String(a.d)).times(String(a.s))},null:function(a){return new t(0)},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),UW="complex",HW=["typed","Complex"],VW=Se(UW,HW,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(a){return new t(a,0)},"number, number":function(a,s){return new t(a,s)},"BigNumber, BigNumber":function(a,s){return new t(a.toNumber(),s.toNumber())},Fraction:function(a){return new t(a.valueOf(),0)},Complex:function(a){return a.clone()},string:function(a){return t(a)},null:function(a){return t(0)},Object:function(a){if("re"in a&&"im"in a)return new t(a.re,a.im);if("r"in a&&"phi"in a||"abs"in a&&"arg"in a)return new t(a);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),GW="fraction",QW=["typed","Fraction"],WW=Se(GW,QW,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(a){if(!isFinite(a)||isNaN(a))throw new Error(a+" cannot be represented as a fraction");return new t(a)},string:function(a){return new t(a)},"number, number":function(a,s){return new t(a,s)},"bigint, bigint":function(a,s){return new t(a,s)},null:function(a){return new t(0)},BigNumber:function(a){return new t(a.toString())},bigint:function(a){return new t(a.toString())},Fraction:function(a){return a},Unit:e.referToSelf(n=>a=>{var s=a.clone();return s.value=n(a.value),s}),Object:function(a){return new t(a)},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),Dj="matrix",KW=["typed","Matrix","DenseMatrix","SparseMatrix"],XW=Se(Dj,KW,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:a}=r;return e(Dj,{"":function(){return s([])},string:function(l){return s([],l)},"string, string":function(l,u){return s([],l,u)},Array:function(l){return s(l)},Matrix:function(l){return s(l,l.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,l,u){if(l==="dense"||l==="default"||l===void 0)return new n(o,u);if(l==="sparse")return new a(o,u);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}}),kj="matrixFromFunction",YW=["typed","matrix","isZero"],ZW=Se(kj,YW,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(kj,{"Array | Matrix, function, string, string":function(o,l,u,c){return a(o,l,u,c)},"Array | Matrix, function, string":function(o,l,u){return a(o,l,u)},"Matrix, function":function(o,l){return a(o,l,"dense")},"Array, function":function(o,l){return a(o,l,"dense").toArray()},"Array | Matrix, string, function":function(o,l,u){return a(o,u,l)},"Array | Matrix, string, string, function":function(o,l,u,c){return a(o,c,l,u)}});function a(s,o,l,u){var c;return u!==void 0?c=t(l,u):c=t(l),c.resize(s),c.forEach(function(d,h){var g=o(h);n(g)||c.set(h,g)}),c}}),Mj="matrixFromRows",JW=["typed","matrix","flatten","size"],eK=Se(Mj,JW,r=>{var{typed:e,matrix:t,flatten:n,size:a}=r;return e(Mj,{"...Array":function(u){return s(u)},"...Matrix":function(u){return t(s(u.map(c=>c.toArray())))}});function s(l){if(l.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=o(l[0]),c=[];for(var d of l){var h=o(d);if(h!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(h|0));c.push(n(d))}return c}function o(l){var u=a(l);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),Fj="matrixFromColumns",tK=["typed","matrix","flatten","size"],rK=Se(Fj,tK,r=>{var{typed:e,matrix:t,flatten:n,size:a}=r;return e(Fj,{"...Array":function(u){return s(u)},"...Matrix":function(u){return t(s(u.map(c=>c.toArray())))}});function s(l){if(l.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=o(l[0]),c=[],d=0;d<u;d++)c[d]=[];for(var h of l){var g=o(h);if(g!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(g|0));for(var m=n(h),v=0;v<u;v++)c[v].push(m[v])}return c}function o(l){var u=a(l);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),Oj="splitUnit",nK=["typed"],iK=Se(Oj,nK,r=>{var{typed:e}=r;return e(Oj,{"Unit, Array":function(n,a){return n.splitUnit(a)}})}),Bj="unaryMinus",aK=["typed"],sK=Se(Bj,aK,r=>{var{typed:e}=r;return e(Bj,{number:XD,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var a=n.clone();return a.value=e.find(t,a.valueType())(n.value),a}),"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t,!0))})}),Rj="unaryPlus",oK=["typed","config","numeric"],lK=Se(Rj,oK,r=>{var{typed:e,config:t,numeric:n}=r;return e(Rj,{number:YD,Complex:function(s){return s},BigNumber:function(s){return s},bigint:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(a=>s=>Yt(s,a,!0)),boolean:function(s){return n(s?1:0,t.number)},string:function(s){return n(s,el(s,t))}})}),Lj="abs",cK=["typed"],uK=Se(Lj,cK,r=>{var{typed:e}=r;return e(Lj,{number:GD,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t,!0))})}),Ij="mapSlices",dK=["typed","isInteger"],Oy=Se(Ij,dK,r=>{var{typed:e,isInteger:t}=r;return e(Ij,{"Array | Matrix, number | BigNumber, function":function(a,s,o){if(!t(s))throw new TypeError("Integer number expected for dimension");var l=Array.isArray(a)?Ut(a):a.size();if(s<0||s>=l.length)throw new Wa(s,l.length);return Lt(a)?a.create($m(a.valueOf(),s,o),a.datatype()):$m(a,s,o)}})},{formerly:"apply"});function $m(r,e,t){var n,a,s;if(e<=0)if(Array.isArray(r[0])){for(s=fK(r),a=[],n=0;n<s.length;n++)a[n]=$m(s[n],e-1,t);return a}else return t(r);else{for(a=[],n=0;n<r.length;n++)a[n]=$m(r[n],e-1,t);return a}}function fK(r){var e=r.length,t=r[0].length,n,a,s=[];for(a=0;a<t;a++){var o=[];for(n=0;n<e;n++)o.push(r[n][a]);s.push(o)}return s}var zj="addScalar",hK=["typed"],mK=Se(zj,hK,r=>{var{typed:e}=r;return e(zj,{"number, number":QD,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"bigint, bigint":function(n,a){return n+a},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":e.referToSelf(t=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),a.valueType()])(s.value,a.value),s.fixPrefix=!1,s})})}),Pj="subtractScalar",pK=["typed"],gK=Se(Pj,pK,r=>{var{typed:e}=r;return e(Pj,{"number, number":WD,"Complex, Complex":function(n,a){return n.sub(a)},"BigNumber, BigNumber":function(n,a){return n.minus(a)},"bigint, bigint":function(n,a){return n-a},"Fraction, Fraction":function(n,a){return n.sub(a)},"Unit, Unit":e.referToSelf(t=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),a.valueType()])(s.value,a.value),s.fixPrefix=!1,s})})}),qj="cbrt",xK=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],vK=Se(qj,xK,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:a,matrix:s,Complex:o,BigNumber:l,Fraction:u}=r;return t(qj,{number:af,Complex:c,"Complex, boolean":c,BigNumber:function(g){return g.cbrt()},Unit:d});function c(h,g){var m=h.arg()/3,v=h.abs(),x=new o(af(v),0).mul(new o(0,m).exp());if(g){var b=[x,new o(af(v),0).mul(new o(0,m+Math.PI*2/3).exp()),new o(af(v),0).mul(new o(0,m-Math.PI*2/3).exp())];return e.matrix==="Array"?b:s(b)}else return x}function d(h){if(h.value&&Ws(h.value)){var g=h.clone();return g.value=1,g=g.pow(1/3),g.value=c(h.value),g}else{var m=n(h.value);m&&(h.value=a(h.value));var v;Xt(h.value)?v=new l(1).div(3):$f(h.value)?v=new u(1,3):v=1/3;var x=h.pow(v);return m&&(x.value=a(x.value)),x}}}),yK="matAlgo11xS0s",bK=["typed","equalScalar"],li=Se(yK,bK,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o,l){var u=a._values,c=a._index,d=a._ptr,h=a._size,g=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=h[0],v=h[1],x,b=t,y=0,S=o;typeof g=="string"&&(x=g,b=e.find(t,[x,x]),y=e.convert(0,x),s=e.convert(s,x),S=e.find(o,[x,x]));for(var _=[],N=[],j=[],E=0;E<v;E++){j[E]=N.length;for(var T=d[E],F=d[E+1],A=T;A<F;A++){var R=c[A],I=l?S(s,u[A]):S(u[A],s);b(I,y)||(N.push(R),_.push(I))}}return j[v]=N.length,a.createSparseMatrix({values:_,index:N,ptr:j,size:[m,v],datatype:x})}}),wK="matAlgo12xSfs",_K=["typed","DenseMatrix"],Mn=Se(wK,_K,r=>{var{typed:e,DenseMatrix:t}=r;return function(a,s,o,l){var u=a._values,c=a._index,d=a._ptr,h=a._size,g=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=h[0],v=h[1],x,b=o;typeof g=="string"&&(x=g,s=e.convert(s,x),b=e.find(o,[x,x]));for(var y=[],S=[],_=[],N=0;N<v;N++){for(var j=N+1,E=d[N],T=d[N+1],F=E;F<T;F++){var A=c[F];S[A]=u[F],_[A]=j}for(var R=0;R<m;R++)N===0&&(y[R]=[]),_[R]===j?y[R][N]=l?b(s,S[R]):b(S[R],s):y[R][N]=l?b(s,0):b(0,s)}return new t({data:y,size:[m,v],datatype:x})}}),NK="matAlgo14xDs",SK=["typed"],Xa=Se(NK,SK,r=>{var{typed:e}=r;return function(a,s,o,l){var u=a._data,c=a._size,d=a._datatype,h,g=o;typeof d=="string"&&(h=d,s=e.convert(s,h),g=e.find(o,[h,h]));var m=c.length>0?t(g,0,c,c[0],u,s,l):[];return a.createDenseMatrix({data:m,size:Ht(c),datatype:h})};function t(n,a,s,o,l,u,c){var d=[];if(a===s.length-1)for(var h=0;h<o;h++)d[h]=c?n(u,l[h]):n(l[h],u);else for(var g=0;g<o;g++)d[g]=t(n,a+1,s,s[a+1],l[g],u,c);return d}}),By="ceil",jK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],EK=new Ko(10),AK=Se(By,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function a(s){var o=Math.ceil(s),l=n(s);return o===l?o:oi(s,l,t.relTol,t.absTol)&&!oi(s,o,t.relTol,t.absTol)?l:o}return e(By,{number:a,"number, number":function(o,l){if(!kt(l))throw new RangeError("number of decimals in function ceil must be an integer");if(l<0||l>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var u=10**l;return a(o*u)/u}})}),TK=Se(By,jK,r=>{var{typed:e,config:t,round:n,matrix:a,equalScalar:s,zeros:o,DenseMatrix:l}=r,u=li({typed:e,equalScalar:s}),c=Mn({typed:e,DenseMatrix:l}),d=Xa({typed:e}),h=AK({typed:e,config:t,round:n});function g(m){var v=(y,S)=>Ea(y,S,t.relTol,t.absTol),x=m.ceil(),b=n(m);return x.eq(b)?x:v(m,b)&&!v(m,x)?b:x}return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(v){return v.ceil()},"Complex, number":function(v,x){return v.ceil(x)},"Complex, BigNumber":function(v,x){return v.ceil(x.toNumber())},BigNumber:g,"BigNumber, BigNumber":function(v,x){var b=EK.pow(x);return g(v.mul(b)).div(b)},bigint:m=>m,"bigint, number":(m,v)=>m,"bigint, BigNumber":(m,v)=>m,Fraction:function(v){return v.ceil()},"Fraction, number":function(v,x){return v.ceil(x)},"Fraction, BigNumber":function(v,x){return v.ceil(x.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(v,x,b){var y=v.toNumeric(b);return b.multiply(m(y,x))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>m(v,x.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>Yt(v,y=>m(y,x,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(v,x)=>m(v,0,x)),"Array | Matrix":e.referToSelf(m=>v=>Yt(v,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(v,x)=>Yt(v,b=>m(b,x),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>u(v,x,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>d(v,x,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(v,x)=>d(a(x),v,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(v,x)=>s(v,0)?o(x.size(),x.storage()):x.storage()==="dense"?d(x,v,m,!0):c(x,v,m,!0))})}),$j="cube",CK=["typed"],DK=Se($j,CK,r=>{var{typed:e}=r;return e($j,{number:ZD,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),Uj="exp",kK=["typed"],MK=Se(Uj,kK,r=>{var{typed:e}=r;return e(Uj,{number:JD,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),Hj="expm1",FK=["typed","Complex"],OK=Se(Hj,FK,r=>{var{typed:e,Complex:t}=r;return e(Hj,{number:e8,Complex:function(a){var s=Math.exp(a.re);return new t(s*Math.cos(a.im)-1,s*Math.sin(a.im))},BigNumber:function(a){return a.exp().minus(1)}})}),Ry="fix",BK=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],RK=Se(Ry,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(Ry,{number:function(s){return s>0?n(s):t(s)},"number, number":function(s,o){return s>0?n(s,o):t(s,o)}})}),LK=Se(Ry,BK,r=>{var{typed:e,Complex:t,matrix:n,ceil:a,floor:s,equalScalar:o,zeros:l,DenseMatrix:u}=r,c=Mn({typed:e,DenseMatrix:u}),d=Xa({typed:e}),h=RK({typed:e,ceil:a,floor:s});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(m){return new t(m.re>0?Math.floor(m.re):Math.ceil(m.re),m.im>0?Math.floor(m.im):Math.ceil(m.im))},"Complex, number":function(m,v){return new t(m.re>0?s(m.re,v):a(m.re,v),m.im>0?s(m.im,v):a(m.im,v))},"Complex, BigNumber":function(m,v){var x=v.toNumber();return new t(m.re>0?s(m.re,x):a(m.re,x),m.im>0?s(m.im,x):a(m.im,x))},BigNumber:function(m){return m.isNegative()?a(m):s(m)},"BigNumber, number | BigNumber":function(m,v){return m.isNegative()?a(m,v):s(m,v)},bigint:g=>g,"bigint, number":(g,m)=>g,"bigint, BigNumber":(g,m)=>g,Fraction:function(m){return m.s<0n?m.ceil():m.floor()},"Fraction, number | BigNumber":function(m,v){return m.s<0n?a(m,v):s(m,v)},"Unit, number, Unit":e.referToSelf(g=>function(m,v,x){var b=m.toNumeric(x);return x.multiply(g(b,v))}),"Unit, BigNumber, Unit":e.referToSelf(g=>(m,v,x)=>g(m,v.toNumber(),x)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(g=>(m,v,x)=>Yt(m,b=>g(b,v,x),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(g=>(m,v)=>g(m,0,v)),"Array | Matrix":e.referToSelf(g=>m=>Yt(m,g,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(g=>(m,v)=>Yt(m,x=>g(x,v),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(g=>(m,v)=>d(n(v),m,g,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(g=>(m,v)=>o(m,0)?l(v.size(),v.storage()):v.storage()==="dense"?d(v,m,g,!0):c(v,m,g,!0))})}),Ly="floor",IK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],zK=new Ko(10),PK=Se(Ly,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function a(s){var o=Math.floor(s),l=n(s);return o===l?o:oi(s,l,t.relTol,t.absTol)&&!oi(s,o,t.relTol,t.absTol)?l:o}return e(Ly,{number:a,"number, number":function(o,l){if(!kt(l))throw new RangeError("number of decimals in function floor must be an integer");if(l<0||l>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var u=10**l;return a(o*u)/u}})}),B8=Se(Ly,IK,r=>{var{typed:e,config:t,round:n,matrix:a,equalScalar:s,zeros:o,DenseMatrix:l}=r,u=li({typed:e,equalScalar:s}),c=Mn({typed:e,DenseMatrix:l}),d=Xa({typed:e}),h=PK({typed:e,config:t,round:n});function g(m){var v=(y,S)=>Ea(y,S,t.relTol,t.absTol),x=m.floor(),b=n(m);return x.eq(b)?x:v(m,b)&&!v(m,x)?b:x}return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(v){return v.floor()},"Complex, number":function(v,x){return v.floor(x)},"Complex, BigNumber":function(v,x){return v.floor(x.toNumber())},BigNumber:g,"BigNumber, BigNumber":function(v,x){var b=zK.pow(x);return g(v.mul(b)).div(b)},bigint:m=>m,"bigint, number":(m,v)=>m,"bigint, BigNumber":(m,v)=>m,Fraction:function(v){return v.floor()},"Fraction, number":function(v,x){return v.floor(x)},"Fraction, BigNumber":function(v,x){return v.floor(x.toNumber())},"Unit, number, Unit":e.referToSelf(m=>function(v,x,b){var y=v.toNumeric(b);return b.multiply(m(y,x))}),"Unit, BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>m(v,x.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(m=>(v,x,b)=>Yt(v,y=>m(y,x,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(m=>(v,x)=>m(v,0,x)),"Array | Matrix":e.referToSelf(m=>v=>Yt(v,m,!0)),"Array, number | BigNumber":e.referToSelf(m=>(v,x)=>Yt(v,b=>m(b,x),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>u(v,x,m,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(m=>(v,x)=>d(v,x,m,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(m=>(v,x)=>d(a(x),v,m,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(m=>(v,x)=>s(v,0)?o(x.size(),x.storage()):x.storage()==="dense"?d(x,v,m,!0):c(x,v,m,!0))})}),qK="matAlgo02xDS0",$K=["typed","equalScalar"],Ya=Se(qK,$K,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o,l){var u=a._data,c=a._size,d=a._datatype||a.getDataType(),h=s._values,g=s._index,m=s._ptr,v=s._size,x=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==v.length)throw new er(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=c[0],y=c[1],S,_=t,N=0,j=o;typeof d=="string"&&d===x&&d!=="mixed"&&(S=d,_=e.find(t,[S,S]),N=e.convert(0,S),j=e.find(o,[S,S]));for(var E=[],T=[],F=[],A=0;A<y;A++){F[A]=T.length;for(var R=m[A],I=m[A+1],O=R;O<I;O++){var U=g[O],D=l?j(h[O],u[U][A]):j(u[U][A],h[O]);_(D,N)||(T.push(U),E.push(D))}}return F[y]=T.length,s.createSparseMatrix({values:E,index:T,ptr:F,size:[b,y],datatype:d===a._datatype&&x===s._datatype?S:void 0})}}),UK="matAlgo03xDSf",HK=["typed"],Ai=Se(UK,HK,r=>{var{typed:e}=r;return function(n,a,s,o){var l=n._data,u=n._size,c=n._datatype||n.getDataType(),d=a._values,h=a._index,g=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==m.length)throw new er(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var x=u[0],b=u[1],y,S=0,_=s;typeof c=="string"&&c===v&&c!=="mixed"&&(y=c,S=e.convert(0,y),_=e.find(s,[y,y]));for(var N=[],j=0;j<x;j++)N[j]=[];for(var E=[],T=[],F=0;F<b;F++){for(var A=F+1,R=g[F],I=g[F+1],O=R;O<I;O++){var U=h[O];E[U]=o?_(d[O],l[U][F]):_(l[U][F],d[O]),T[U]=A}for(var D=0;D<x;D++)T[D]===A?N[D][F]=E[D]:N[D][F]=o?_(S,l[D][F]):_(l[D][F],S)}return n.createDenseMatrix({data:N,size:[x,b],datatype:c===n._datatype&&v===a._datatype?y:void 0})}}),VK="matAlgo05xSfSf",GK=["typed","equalScalar"],Cp=Se(VK,GK,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o){var l=a._values,u=a._index,c=a._ptr,d=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType(),g=s._values,m=s._index,v=s._ptr,x=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(d.length!==x.length)throw new er(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");var y=d[0],S=d[1],_,N=t,j=0,E=o;typeof h=="string"&&h===b&&h!=="mixed"&&(_=h,N=e.find(t,[_,_]),j=e.convert(0,_),E=e.find(o,[_,_]));var T=l&&g?[]:void 0,F=[],A=[],R=T?[]:void 0,I=T?[]:void 0,O=[],U=[],D,H,P,G;for(H=0;H<S;H++){A[H]=F.length;var ue=H+1;for(P=c[H],G=c[H+1];P<G;P++)D=u[P],F.push(D),O[D]=ue,R&&(R[D]=l[P]);for(P=v[H],G=v[H+1];P<G;P++)D=m[P],O[D]!==ue&&F.push(D),U[D]=ue,I&&(I[D]=g[P]);if(T)for(P=A[H];P<F.length;){D=F[P];var le=O[D],pe=U[D];if(le===ue||pe===ue){var de=le===ue?R[D]:j,L=pe===ue?I[D]:j,X=E(de,L);N(X,j)?F.splice(P,1):(T.push(X),P++)}}}return A[S]=F.length,a.createSparseMatrix({values:T,index:F,ptr:A,size:[y,S],datatype:h===a._datatype&&b===s._datatype?_:void 0})}}),QK="matAlgo13xDD",WK=["typed"],KK=Se(QK,WK,r=>{var{typed:e}=r;return function(a,s,o){var l=a._data,u=a._size,c=a._datatype,d=s._data,h=s._size,g=s._datatype,m=[];if(u.length!==h.length)throw new er(u.length,h.length);for(var v=0;v<u.length;v++){if(u[v]!==h[v])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");m[v]=u[v]}var x,b=o;typeof c=="string"&&c===g&&(x=c,b=e.find(o,[x,x]));var y=m.length>0?t(b,0,m,m[0],l,d):[];return a.createDenseMatrix({data:y,size:m,datatype:x})};function t(n,a,s,o,l,u){var c=[];if(a===s.length-1)for(var d=0;d<o;d++)c[d]=n(l[d],u[d]);else for(var h=0;h<o;h++)c[h]=t(n,a+1,s,s[a+1],l[h],u[h]);return c}});function In(r,e){if(Js(r.size(),e.size()))return[r,e];var t=Fb(r.size(),e.size());return[r,e].map(n=>XK(n,t))}function XK(r,e){return Js(r.size(),e)?r:r.create(Rl(r.valueOf(),e),r.datatype())}var YK="matrixAlgorithmSuite",ZK=["typed","matrix"],Hr=Se(YK,ZK,r=>{var{typed:e,matrix:t}=r,n=KK({typed:e}),a=Xa({typed:e});return function(o){var l=o.elop,u=o.SD||o.DS,c;l?(c={"DenseMatrix, DenseMatrix":(m,v)=>n(...In(m,v),l),"Array, Array":(m,v)=>n(...In(t(m),t(v)),l).valueOf(),"Array, DenseMatrix":(m,v)=>n(...In(t(m),v),l),"DenseMatrix, Array":(m,v)=>n(...In(m,t(v)),l)},o.SS&&(c["SparseMatrix, SparseMatrix"]=(m,v)=>o.SS(...In(m,v),l,!1)),o.DS&&(c["DenseMatrix, SparseMatrix"]=(m,v)=>o.DS(...In(m,v),l,!1),c["Array, SparseMatrix"]=(m,v)=>o.DS(...In(t(m),v),l,!1)),u&&(c["SparseMatrix, DenseMatrix"]=(m,v)=>u(...In(v,m),l,!0),c["SparseMatrix, Array"]=(m,v)=>u(...In(t(v),m),l,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(v,x)=>n(...In(v,x),m)),"Array, Array":e.referToSelf(m=>(v,x)=>n(...In(t(v),t(x)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(v,x)=>n(...In(t(v),x),m)),"DenseMatrix, Array":e.referToSelf(m=>(v,x)=>n(...In(v,t(x)),m))},o.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,x)=>o.SS(...In(v,x),m,!1))),o.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,x)=>o.DS(...In(v,x),m,!1)),c["Array, SparseMatrix"]=e.referToSelf(m=>(v,x)=>o.DS(...In(t(v),x),m,!1))),u&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(v,x)=>u(...In(x,v),m,!0)),c["SparseMatrix, Array"]=e.referToSelf(m=>(v,x)=>u(...In(t(x),v),m,!0))));var d=o.scalar||"any",h=o.Ds||o.Ss;h&&(l?(c["DenseMatrix,"+d]=(m,v)=>a(m,v,l,!1),c[d+", DenseMatrix"]=(m,v)=>a(v,m,l,!0),c["Array,"+d]=(m,v)=>a(t(m),v,l,!1).valueOf(),c[d+", Array"]=(m,v)=>a(t(v),m,l,!0).valueOf()):(c["DenseMatrix,"+d]=e.referToSelf(m=>(v,x)=>a(v,x,m,!1)),c[d+", DenseMatrix"]=e.referToSelf(m=>(v,x)=>a(x,v,m,!0)),c["Array,"+d]=e.referToSelf(m=>(v,x)=>a(t(v),x,m,!1).valueOf()),c[d+", Array"]=e.referToSelf(m=>(v,x)=>a(t(x),v,m,!0).valueOf())));var g=o.sS!==void 0?o.sS:o.Ss;return l?(o.Ss&&(c["SparseMatrix,"+d]=(m,v)=>o.Ss(m,v,l,!1)),g&&(c[d+", SparseMatrix"]=(m,v)=>g(v,m,l,!0))):(o.Ss&&(c["SparseMatrix,"+d]=e.referToSelf(m=>(v,x)=>o.Ss(v,x,m,!1))),g&&(c[d+", SparseMatrix"]=e.referToSelf(m=>(v,x)=>g(x,v,m,!0)))),l&&l.signatures&&xD(c,l.signatures),c}}),Vj="mod",JK=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],R8=Se(Vj,JK,r=>{var{typed:e,config:t,round:n,matrix:a,equalScalar:s,zeros:o,DenseMatrix:l,concat:u}=r,c=B8({typed:e,config:t,round:n,matrix:a,equalScalar:s,zeros:o,DenseMatrix:l}),d=Ya({typed:e,equalScalar:s}),h=Ai({typed:e}),g=Cp({typed:e,equalScalar:s}),m=li({typed:e,equalScalar:s}),v=Mn({typed:e,DenseMatrix:l}),x=Hr({typed:e,matrix:a,concat:u});return e(Vj,{"number, number":b,"BigNumber, BigNumber":function(S,_){return _.isZero()?S:S.sub(_.mul(c(S.div(_))))},"bigint, bigint":function(S,_){if(_===0n)return S;if(S<0){var N=S%_;return N===0n?N:N+_}return S%_},"Fraction, Fraction":function(S,_){return _.equals(0)?S:S.sub(_.mul(c(S.div(_))))}},x({SS:g,DS:h,SD:d,Ss:m,sS:v}));function b(y,S){return S===0?y:y-S*c(y/S)}}),eX="matAlgo01xDSid",tX=["typed"],rl=Se(eX,tX,r=>{var{typed:e}=r;return function(n,a,s,o){var l=n._data,u=n._size,c=n._datatype||n.getDataType(),d=a._values,h=a._index,g=a._ptr,m=a._size,v=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(u.length!==m.length)throw new er(u.length,m.length);if(u[0]!==m[0]||u[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+m+")");if(!d)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var x=u[0],b=u[1],y=typeof c=="string"&&c!=="mixed"&&c===v?c:void 0,S=y?e.find(s,[y,y]):s,_,N,j=[];for(_=0;_<x;_++)j[_]=[];var E=[],T=[];for(N=0;N<b;N++){for(var F=N+1,A=g[N],R=g[N+1],I=A;I<R;I++)_=h[I],E[_]=o?S(d[I],l[_][N]):S(l[_][N],d[I]),T[_]=F;for(_=0;_<x;_++)T[_]===F?j[_][N]=E[_]:j[_][N]=l[_][N]}return n.createDenseMatrix({data:j,size:[x,b],datatype:c===n._datatype&&v===a._datatype?y:void 0})}}),rX="matAlgo04xSidSid",nX=["typed","equalScalar"],Lb=Se(rX,nX,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o){var l=a._values,u=a._index,c=a._ptr,d=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType(),g=s._values,m=s._index,v=s._ptr,x=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(d.length!==x.length)throw new er(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");var y=d[0],S=d[1],_,N=t,j=0,E=o;typeof h=="string"&&h===b&&h!=="mixed"&&(_=h,N=e.find(t,[_,_]),j=e.convert(0,_),E=e.find(o,[_,_]));var T=l&&g?[]:void 0,F=[],A=[],R=l&&g?[]:void 0,I=l&&g?[]:void 0,O=[],U=[],D,H,P,G,ue;for(H=0;H<S;H++){A[H]=F.length;var le=H+1;for(G=c[H],ue=c[H+1],P=G;P<ue;P++)D=u[P],F.push(D),O[D]=le,R&&(R[D]=l[P]);for(G=v[H],ue=v[H+1],P=G;P<ue;P++)if(D=m[P],O[D]===le){if(R){var pe=E(R[D],g[P]);N(pe,j)?O[D]=null:R[D]=pe}}else F.push(D),U[D]=le,I&&(I[D]=g[P]);if(R&&I)for(P=A[H];P<F.length;)D=F[P],O[D]===le?(T[P]=R[D],P++):U[D]===le?(T[P]=I[D],P++):F.splice(P,1)}return A[S]=F.length,a.createSparseMatrix({values:T,index:F,ptr:A,size:[y,S],datatype:h===a._datatype&&b===s._datatype?_:void 0})}}),iX="matAlgo10xSids",aX=["typed","DenseMatrix"],Zl=Se(iX,aX,r=>{var{typed:e,DenseMatrix:t}=r;return function(a,s,o,l){var u=a._values,c=a._index,d=a._ptr,h=a._size,g=a._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=h[0],v=h[1],x,b=o;typeof g=="string"&&(x=g,s=e.convert(s,x),b=e.find(o,[x,x]));for(var y=[],S=[],_=[],N=0;N<v;N++){for(var j=N+1,E=d[N],T=d[N+1],F=E;F<T;F++){var A=c[F];S[A]=u[F],_[A]=j}for(var R=0;R<m;R++)N===0&&(y[R]=[]),_[R]===j?y[R][N]=l?b(s,S[R]):b(S[R],s):y[R][N]=s}return new t({data:y,size:[m,v],datatype:x})}});function Jl(r,e,t,n){if(!(this instanceof Jl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Jl.prototype=new Error;Jl.prototype.constructor=Error;Jl.prototype.name="ArgumentsError";Jl.prototype.isArgumentsError=!0;var Gj="gcd",sX=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],X1="number | BigNumber | Fraction | Matrix | Array",oX="".concat(X1,", ").concat(X1,", ...").concat(X1);function Qj(r){return!r.some(e=>Array.isArray(e))}var lX=Se(Gj,sX,r=>{var{typed:e,matrix:t,config:n,round:a,equalScalar:s,zeros:o,BigNumber:l,DenseMatrix:u,concat:c}=r,d=R8({typed:e,config:n,round:a,matrix:t,equalScalar:s,zeros:o,DenseMatrix:u,concat:c}),h=rl({typed:e}),g=Lb({typed:e,equalScalar:s}),m=Zl({typed:e,DenseMatrix:u}),v=Hr({typed:e,matrix:t,concat:c});return e(Gj,{"number, number":x,"BigNumber, BigNumber":b,"Fraction, Fraction":(y,S)=>y.gcd(S)},v({SS:g,DS:h,Ss:m}),{[oX]:e.referToSelf(y=>(S,_,N)=>{for(var j=y(S,_),E=0;E<N.length;E++)j=y(j,N[E]);return j}),Array:e.referToSelf(y=>S=>{if(S.length===1&&Array.isArray(S[0])&&Qj(S[0]))return y(...S[0]);if(Qj(S))return y(...S);throw new Jl("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(y=>S=>y(S.toArray()))});function x(y,S){if(!kt(y)||!kt(S))throw new Error("Parameters in function gcd must be integer numbers");for(var _;S!==0;)_=d(y,S),y=S,S=_;return y<0?-y:y}function b(y,S){if(!y.isInt()||!S.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var _=new l(0);!S.isZero();){var N=d(y,S);y=S,S=N}return y.lt(_)?y.neg():y}}),cX="matAlgo06xS0S0",uX=["typed","equalScalar"],Dp=Se(cX,uX,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o){var l=a._values,u=a._size,c=a._datatype||a._data===void 0?a._datatype:a.getDataType(),d=s._values,h=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==h.length)throw new er(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");var m=u[0],v=u[1],x,b=t,y=0,S=o;typeof c=="string"&&c===g&&c!=="mixed"&&(x=c,b=e.find(t,[x,x]),y=e.convert(0,x),S=e.find(o,[x,x]));for(var _=l&&d?[]:void 0,N=[],j=[],E=_?[]:void 0,T=[],F=[],A=0;A<v;A++){j[A]=N.length;var R=A+1;if(gj(a,A,T,E,F,R,N,S),gj(s,A,T,E,F,R,N,S),E)for(var I=j[A];I<N.length;){var O=N[I];if(F[O]===R){var U=E[O];b(U,y)?N.splice(I,1):(_.push(U),I++)}else N.splice(I,1)}else for(var D=j[A];D<N.length;){var H=N[D];F[H]!==R?N.splice(D,1):D++}}return j[v]=N.length,a.createSparseMatrix({values:_,index:N,ptr:j,size:[m,v],datatype:c===a._datatype&&g===s._datatype?x:void 0})}}),Wj="lcm",dX=["typed","matrix","equalScalar","concat"],fX=Se(Wj,dX,r=>{var{typed:e,matrix:t,equalScalar:n,concat:a}=r,s=Ya({typed:e,equalScalar:n}),o=Dp({typed:e,equalScalar:n}),l=li({typed:e,equalScalar:n}),u=Hr({typed:e,matrix:t,concat:a}),c="number | BigNumber | Fraction | Matrix | Array",d={};return d["".concat(c,", ").concat(c,", ...").concat(c)]=e.referToSelf(g=>(m,v,x)=>{for(var b=g(m,v),y=0;y<x.length;y++)b=g(b,x[y]);return b}),e(Wj,{"number, number":t8,"BigNumber, BigNumber":h,"Fraction, Fraction":(g,m)=>g.lcm(m)},u({SS:o,DS:s,Ss:l}),d);function h(g,m){if(!g.isInt()||!m.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(g.isZero())return g;if(m.isZero())return m;for(var v=g.times(m);!m.isZero();){var x=m;m=g.mod(x),g=x}return v.div(g).abs()}});function Ib(r,e,t,n){return function(a){if(a>0||t.predictable){if(a<=0)return NaN;var s=a.toString(16),o=s.substring(0,15);return r*(s.length-o.length)+e(+("0x"+o))}return n(a.toNumber())}}var Kj="log10",hX=["typed","config","Complex"],mX=Im(16),pX=Se(Kj,hX,r=>{var{typed:e,config:t,Complex:n}=r;function a(o){return o.log().div(Math.LN10)}function s(o){return a(new n(o,0))}return e(Kj,{number:function(l){return l>=0||t.predictable?Im(l):s(l)},bigint:Ib(mX,Im,t,s),Complex:a,BigNumber:function(l){return!l.isNegative()||t.predictable?l.log():s(l.toNumber())},"Array | Matrix":e.referToSelf(o=>l=>Yt(l,o))})}),Xj="log2",gX=["typed","config","Complex"],xX=Se(Xj,gX,r=>{var{typed:e,config:t,Complex:n}=r;function a(o){return s(new n(o,0))}return e(Xj,{number:function(l){return l>=0||t.predictable?Cy(l):a(l)},bigint:Ib(4,Cy,t,a),Complex:s,BigNumber:function(l){return!l.isNegative()||t.predictable?l.log(2):a(l.toNumber())},"Array | Matrix":e.referToSelf(o=>l=>Yt(l,o))});function s(o){var l=Math.sqrt(o.re*o.re+o.im*o.im);return new n(Math.log2?Math.log2(l):Math.log(l)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}}),vX="multiplyScalar",yX=["typed"],bX=Se(vX,yX,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":KD,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"bigint, bigint":function(n,a){return n*a},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),Yj="multiply",wX=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],_X=Se(Yj,wX,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:a,equalScalar:s,dot:o}=r,l=li({typed:e,equalScalar:s}),u=Xa({typed:e});function c(j,E){switch(j.length){case 1:switch(E.length){case 1:if(j[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(j[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+j[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(j[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+j[1]+") must match Vector length ("+E[0]+")");break;case 2:if(j[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+j[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+j.length+" dimensions)")}}function d(j,E,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(j,E)}function h(j,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return g(j,E)}function g(j,E){var T=j._data,F=j._size,A=j._datatype||j.getDataType(),R=E._data,I=E._size,O=E._datatype||E.getDataType(),U=F[0],D=I[1],H,P=n,G=a;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&(H=A,P=e.find(n,[H,H]),G=e.find(a,[H,H]));for(var ue=[],le=0;le<D;le++){for(var pe=G(T[0],R[0][le]),de=1;de<U;de++)pe=P(pe,G(T[de],R[de][le]));ue[le]=pe}return j.createDenseMatrix({data:ue,size:[D],datatype:A===j._datatype&&O===E._datatype?H:void 0})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":x,"SparseMatrix, any":S}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":_,"SparseMatrix, SparseMatrix":N});function x(j,E){var T=j._data,F=j._size,A=j._datatype||j.getDataType(),R=E._data,I=E._datatype||E.getDataType(),O=F[0],U=F[1],D,H=n,P=a;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&(D=A,H=e.find(n,[D,D]),P=e.find(a,[D,D]));for(var G=[],ue=0;ue<O;ue++){for(var le=T[ue],pe=P(le[0],R[0]),de=1;de<U;de++)pe=H(pe,P(le[de],R[de]));G[ue]=pe}return j.createDenseMatrix({data:G,size:[O],datatype:A===j._datatype&&I===E._datatype?D:void 0})}function b(j,E){var T=j._data,F=j._size,A=j._datatype||j.getDataType(),R=E._data,I=E._size,O=E._datatype||E.getDataType(),U=F[0],D=F[1],H=I[1],P,G=n,ue=a;A&&O&&A===O&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(P=A,G=e.find(n,[P,P]),ue=e.find(a,[P,P]));for(var le=[],pe=0;pe<U;pe++){var de=T[pe];le[pe]=[];for(var L=0;L<H;L++){for(var X=ue(de[0],R[0][L]),V=1;V<D;V++)X=G(X,ue(de[V],R[V][L]));le[pe][L]=X}}return j.createDenseMatrix({data:le,size:[U,H],datatype:A===j._datatype&&O===E._datatype?P:void 0})}function y(j,E){var T=j._data,F=j._size,A=j._datatype||j.getDataType(),R=E._values,I=E._index,O=E._ptr,U=E._size,D=E._datatype||E._data===void 0?E._datatype:E.getDataType();if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=F[0],P=U[1],G,ue=n,le=a,pe=s,de=0;A&&D&&A===D&&typeof A=="string"&&A!=="mixed"&&(G=A,ue=e.find(n,[G,G]),le=e.find(a,[G,G]),pe=e.find(s,[G,G]),de=e.convert(0,G));for(var L=[],X=[],V=[],se=E.createSparseMatrix({values:L,index:X,ptr:V,size:[H,P],datatype:A===j._datatype&&D===E._datatype?G:void 0}),ae=0;ae<P;ae++){V[ae]=X.length;var W=O[ae],z=O[ae+1];if(z>W)for(var re=0,ne=0;ne<H;ne++){for(var ie=ne+1,oe=void 0,ye=W;ye<z;ye++){var M=I[ye];re!==ie?(oe=le(T[ne][M],R[ye]),re=ie):oe=ue(oe,le(T[ne][M],R[ye]))}re===ie&&!pe(oe,de)&&(X.push(ne),L.push(oe))}}return V[P]=X.length,se}function S(j,E){var T=j._values,F=j._index,A=j._ptr,R=j._datatype||j._data===void 0?j._datatype:j.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=E._data,O=E._datatype||E.getDataType(),U=j._size[0],D=E._size[0],H=[],P=[],G=[],ue,le=n,pe=a,de=s,L=0;R&&O&&R===O&&typeof R=="string"&&R!=="mixed"&&(ue=R,le=e.find(n,[ue,ue]),pe=e.find(a,[ue,ue]),de=e.find(s,[ue,ue]),L=e.convert(0,ue));var X=[],V=[];G[0]=0;for(var se=0;se<D;se++){var ae=I[se];if(!de(ae,L))for(var W=A[se],z=A[se+1],re=W;re<z;re++){var ne=F[re];V[ne]?X[ne]=le(X[ne],pe(ae,T[re])):(V[ne]=!0,P.push(ne),X[ne]=pe(ae,T[re]))}}for(var ie=P.length,oe=0;oe<ie;oe++){var ye=P[oe];H[oe]=X[ye]}return G[1]=P.length,j.createSparseMatrix({values:H,index:P,ptr:G,size:[U,1],datatype:R===j._datatype&&O===E._datatype?ue:void 0})}function _(j,E){var T=j._values,F=j._index,A=j._ptr,R=j._datatype||j._data===void 0?j._datatype:j.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=E._data,O=E._datatype||E.getDataType(),U=j._size[0],D=E._size[0],H=E._size[1],P,G=n,ue=a,le=s,pe=0;R&&O&&R===O&&typeof R=="string"&&R!=="mixed"&&(P=R,G=e.find(n,[P,P]),ue=e.find(a,[P,P]),le=e.find(s,[P,P]),pe=e.convert(0,P));for(var de=[],L=[],X=[],V=j.createSparseMatrix({values:de,index:L,ptr:X,size:[U,H],datatype:R===j._datatype&&O===E._datatype?P:void 0}),se=[],ae=[],W=0;W<H;W++){X[W]=L.length;for(var z=W+1,re=0;re<D;re++){var ne=I[re][W];if(!le(ne,pe))for(var ie=A[re],oe=A[re+1],ye=ie;ye<oe;ye++){var M=F[ye];ae[M]!==z?(ae[M]=z,L.push(M),se[M]=ue(ne,T[ye])):se[M]=G(se[M],ue(ne,T[ye]))}}for(var ge=X[W],ee=L.length,k=ge;k<ee;k++){var B=L[k];de[k]=se[B]}}return X[H]=L.length,V}function N(j,E){var T=j._values,F=j._index,A=j._ptr,R=j._datatype||j._data===void 0?j._datatype:j.getDataType(),I=E._values,O=E._index,U=E._ptr,D=E._datatype||E._data===void 0?E._datatype:E.getDataType(),H=j._size[0],P=E._size[1],G=T&&I,ue,le=n,pe=a;R&&D&&R===D&&typeof R=="string"&&R!=="mixed"&&(ue=R,le=e.find(n,[ue,ue]),pe=e.find(a,[ue,ue]));for(var de=G?[]:void 0,L=[],X=[],V=j.createSparseMatrix({values:de,index:L,ptr:X,size:[H,P],datatype:R===j._datatype&&D===E._datatype?ue:void 0}),se=G?[]:void 0,ae=[],W,z,re,ne,ie,oe,ye,M,ge=0;ge<P;ge++){X[ge]=L.length;var ee=ge+1;for(ie=U[ge],oe=U[ge+1],ne=ie;ne<oe;ne++)if(M=O[ne],G)for(z=A[M],re=A[M+1],W=z;W<re;W++)ye=F[W],ae[ye]!==ee?(ae[ye]=ee,L.push(ye),se[ye]=pe(I[ne],T[W])):se[ye]=le(se[ye],pe(I[ne],T[W]));else for(z=A[M],re=A[M+1],W=z;W<re;W++)ye=F[W],ae[ye]!==ee&&(ae[ye]=ee,L.push(ye));if(G)for(var k=X[ge],B=L.length,Q=k;Q<B;Q++){var Z=L[Q];de[Q]=se[Z]}}return X[P]=L.length,V}return e(Yj,a,{"Array, Array":e.referTo("Matrix, Matrix",j=>(E,T)=>{c(Ut(E),Ut(T));var F=j(t(E),t(T));return Lt(F)?F.valueOf():F}),"Matrix, Matrix":function(E,T){var F=E.size(),A=T.size();return c(F,A),F.length===1?A.length===1?d(E,T,F[0]):h(E,T):A.length===1?m(E,T):v(E,T)},"Matrix, Array":e.referTo("Matrix,Matrix",j=>(E,T)=>j(E,t(T))),"Array, Matrix":e.referToSelf(j=>(E,T)=>j(t(E,T.storage()),T)),"SparseMatrix, any":function(E,T){return l(E,T,a,!1)},"DenseMatrix, any":function(E,T){return u(E,T,a,!1)},"any, SparseMatrix":function(E,T){return l(T,E,a,!0)},"any, DenseMatrix":function(E,T){return u(T,E,a,!0)},"Array, any":function(E,T){return u(t(E),T,a,!1).valueOf()},"any, Array":function(E,T){return u(t(T),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":e.referToSelf(j=>(E,T,F)=>{for(var A=j(E,T),R=0;R<F.length;R++)A=j(A,F[R]);return A})})}),Zj="nthRoot",NX=["typed","matrix","equalScalar","BigNumber","concat"],SX=Se(Zj,NX,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:a,concat:s}=r,o=rl({typed:e}),l=Ya({typed:e,equalScalar:n}),u=Dp({typed:e,equalScalar:n}),c=li({typed:e,equalScalar:n}),d=Hr({typed:e,matrix:t,concat:s});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(Zj,{number:yj,"number, number":yj,BigNumber:m=>g(m,new a(2)),"BigNumber, BigNumber":g,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",m=>v=>m(t(v),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",m=>v=>m(v,2)),SparseMatrix:e.referTo("SparseMatrix,number",m=>v=>m(v,2)),"SparseMatrix, SparseMatrix":e.referToSelf(m=>(v,x)=>{if(x.density()===1)return u(v,x,m);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(m=>(v,x)=>{if(x.density()===1)return o(v,x,m,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",m=>(v,x)=>m(t(v),x)),"number | BigNumber, SparseMatrix":e.referToSelf(m=>(v,x)=>{if(x.density()===1)return c(x,v,m,!0);throw new Error("Root must be non-zero")})},d({scalar:"number | BigNumber",SD:l,Ss:c,sS:!1}));function g(m,v){var x=a.precision,b=a.clone({precision:x+2}),y=new a(0),S=new b(1),_=v.isNegative();if(_&&(v=v.neg()),v.isZero())throw new Error("Root must be non-zero");if(m.isNegative()&&!v.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(m.isZero())return _?new b(1/0):0;if(!m.isFinite())return _?y:m;var N=m.abs().pow(S.div(v));return N=m.isNeg()?N.neg():N,new a((_?S.div(N):N).toPrecision(x))}}),Jj="sign",jX=["typed","BigNumber","Fraction","complex"],EX=Se(Jj,jX,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:a}=r;return e(Jj,{number:Dy,Complex:function(o){return o.im===0?n(Dy(o.re)):o.sign()},BigNumber:function(o){return new t(o.cmp(0))},bigint:function(o){return o>0n?1n:o<0n?-1n:0n},Fraction:function(o){return o.n===0n?new a(0):new a(o.s)},"Array | Matrix":e.referToSelf(s=>o=>Yt(o,s,!0)),Unit:e.referToSelf(s=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,o.valueType())(o.value)})})}),AX="sqrt",TX=["config","typed","Complex"],CX=Se(AX,TX,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:a,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():a(o.toNumber())},Unit:function(o){return o.pow(.5)}});function a(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new n(s,0).sqrt()}}),eE="square",DX=["typed"],kX=Se(eE,DX,r=>{var{typed:e}=r;return e(eE,{number:r8,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),tE="subtract",MX=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],FX=Se(tE,MX,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:a,unaryMinus:s,DenseMatrix:o,concat:l}=r,u=rl({typed:e}),c=Ai({typed:e}),d=Cp({typed:e,equalScalar:n}),h=Zl({typed:e,DenseMatrix:o}),g=Mn({typed:e,DenseMatrix:o}),m=Hr({typed:e,matrix:t,concat:l});return e(tE,{"any, any":a},m({elop:a,SS:d,DS:u,SD:c,Ss:g,sS:h}))}),rE="xgcd",OX=["typed","config","matrix","BigNumber"],BX=Se(rE,OX,r=>{var{typed:e,config:t,matrix:n,BigNumber:a}=r;return e(rE,{"number, number":function(l,u){var c=n8(l,u);return t.matrix==="Array"?c:n(c)},"BigNumber, BigNumber":s});function s(o,l){var u,c,d,h=new a(0),g=new a(1),m=h,v=g,x=g,b=h;if(!o.isInt()||!l.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!l.isZero();)c=o.div(l).floor(),d=o.mod(l),u=m,m=v.minus(c.times(m)),v=u,u=x,x=b.minus(c.times(x)),b=u,o=l,l=d;var y;return o.lt(h)?y=[o.neg(),v.neg(),b.neg()]:y=[o,o.isZero()?0:v,b],t.matrix==="Array"?y:n(y)}}),nE="invmod",RX=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],LX=Se(nE,RX,r=>{var{typed:e,config:t,BigNumber:n,xgcd:a,equal:s,smaller:o,mod:l,add:u,isInteger:c}=r;return e(nE,{"number, number":d,"BigNumber, BigNumber":d});function d(h,g){if(!c(h)||!c(g))throw new Error("Parameters in function invmod must be integer numbers");if(h=l(h,g),s(g,0))throw new Error("Divisor must be non zero");var m=a(h,g);m=m.valueOf();var[v,x]=m;return s(v,n(1))?(x=l(x,g),o(x,n(0))&&(x=u(x,g)),x):NaN}}),IX="matAlgo09xS0Sf",zX=["typed","equalScalar"],L8=Se(IX,zX,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o){var l=a._values,u=a._index,c=a._ptr,d=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType(),g=s._values,m=s._index,v=s._ptr,x=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(d.length!==x.length)throw new er(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");var y=d[0],S=d[1],_,N=t,j=0,E=o;typeof h=="string"&&h===b&&h!=="mixed"&&(_=h,N=e.find(t,[_,_]),j=e.convert(0,_),E=e.find(o,[_,_]));var T=l&&g?[]:void 0,F=[],A=[],R=T?[]:void 0,I=[],O,U,D,H,P;for(U=0;U<S;U++){A[U]=F.length;var G=U+1;if(R)for(H=v[U],P=v[U+1],D=H;D<P;D++)O=m[D],I[O]=G,R[O]=g[D];for(H=c[U],P=c[U+1],D=H;D<P;D++)if(O=u[D],R){var ue=I[O]===G?R[O]:j,le=E(l[D],ue);N(le,j)||(F.push(O),T.push(le))}else F.push(O)}return A[S]=F.length,a.createSparseMatrix({values:T,index:F,ptr:A,size:[y,S],datatype:h===a._datatype&&b===s._datatype?_:void 0})}}),iE="dotMultiply",PX=["typed","matrix","equalScalar","multiplyScalar","concat"],qX=Se(iE,PX,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:a,concat:s}=r,o=Ya({typed:e,equalScalar:n}),l=L8({typed:e,equalScalar:n}),u=li({typed:e,equalScalar:n}),c=Hr({typed:e,matrix:t,concat:s});return e(iE,c({elop:a,SS:l,DS:o,Ss:u}))});function $X(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return zb(r,e,function(n,a){return n&a})}function Ef(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function UX(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:zb(r,e,function(a,s){return a|s})}function zb(r,e,t){var n=r.constructor,a,s,o=+(r.s<0),l=+(e.s<0);if(o){a=F0(Ef(r));for(var u=0;u<a.length;++u)a[u]^=1}else a=F0(r);if(l){s=F0(Ef(e));for(var c=0;c<s.length;++c)s[c]^=1}else s=F0(e);var d,h,g;a.length<=s.length?(d=a,h=s,g=o):(d=s,h=a,g=l);var m=d.length,v=h.length,x=t(o,l)^1,b=new n(x^1),y=new n(1),S=new n(2),_=n.precision;for(n.config({precision:1e9});m>0;)t(d[--m],h[--v])===x&&(b=b.plus(y)),y=y.times(S);for(;v>0;)t(g,h[--v])===x&&(b=b.plus(y)),y=y.times(S);return n.config({precision:_}),x===0&&(b.s=-b.s),b}function F0(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var a=e[n]+"",s=7-a.length;s--;)a="0"+a;t+=a}for(var o=t.length;t.charAt(o)==="0";)o--;var l=r.e,u=t.slice(0,o+1||1),c=u.length;if(l>0)if(++l>c)for(l-=c;l--;)u+="0";else l<c&&(u=u.slice(0,l)+"."+u.slice(l));for(var d=[0],h=0;h<u.length;){for(var g=d.length;g--;)d[g]*=10;d[0]+=parseInt(u.charAt(h++));for(var m=0;m<d.length;++m)d[m]>1&&((d[m+1]===null||d[m+1]===void 0)&&(d[m+1]=0),d[m+1]+=d[m]>>1,d[m]&=1)}return d.reverse()}function HX(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?Ef(e):e.eq(n)?Ef(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):zb(r,e,function(a,s){return a^s})}function VX(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function GX(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var aE="bitAnd",QX=["typed","matrix","equalScalar","concat"],I8=Se(aE,QX,r=>{var{typed:e,matrix:t,equalScalar:n,concat:a}=r,s=Ya({typed:e,equalScalar:n}),o=Dp({typed:e,equalScalar:n}),l=li({typed:e,equalScalar:n}),u=Hr({typed:e,matrix:t,concat:a});return e(aE,{"number, number":a8,"BigNumber, BigNumber":$X,"bigint, bigint":(c,d)=>c&d},u({SS:o,DS:s,Ss:l}))}),sE="bitNot",WX=["typed"],KX=Se(sE,WX,r=>{var{typed:e}=r;return e(sE,{number:s8,BigNumber:Ef,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),oE="bitOr",XX=["typed","matrix","equalScalar","DenseMatrix","concat"],z8=Se(oE,XX,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s}=r,o=rl({typed:e}),l=Lb({typed:e,equalScalar:n}),u=Zl({typed:e,DenseMatrix:a}),c=Hr({typed:e,matrix:t,concat:s});return e(oE,{"number, number":o8,"BigNumber, BigNumber":UX,"bigint, bigint":(d,h)=>d|h},c({SS:l,DS:o,Ss:u}))}),YX="matAlgo07xSSf",ZX=["typed","SparseMatrix"],ys=Se(YX,ZX,r=>{var{typed:e,SparseMatrix:t}=r;return function(s,o,l){var u=s._size,c=s._datatype||s._data===void 0?s._datatype:s.getDataType(),d=o._size,h=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(u.length!==d.length)throw new er(u.length,d.length);if(u[0]!==d[0]||u[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+d+")");var g=u[0],m=u[1],v,x=0,b=l;typeof c=="string"&&c===h&&c!=="mixed"&&(v=c,x=e.convert(0,v),b=e.find(l,[v,v]));for(var y=[],S=[],_=new Array(m+1).fill(0),N=[],j=[],E=[],T=[],F=0;F<m;F++){var A=F+1,R=0;n(s,F,E,N,A),n(o,F,T,j,A);for(var I=0;I<g;I++){var O=E[I]===A?N[I]:x,U=T[I]===A?j[I]:x,D=b(O,U);D!==0&&D!==!1&&(S.push(I),y.push(D),R++)}_[F+1]=_[F]+R}return new t({values:y,index:S,ptr:_,size:[g,m],datatype:c===s._datatype&&h===o._datatype?v:void 0})};function n(a,s,o,l,u){for(var c=a._values,d=a._index,h=a._ptr,g=h[s],m=h[s+1];g<m;g++){var v=d[g];o[v]=u,l[v]=c[g]}}}),lE="bitXor",JX=["typed","matrix","DenseMatrix","concat","SparseMatrix"],eY=Se(lE,JX,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:a,SparseMatrix:s}=r,o=Ai({typed:e}),l=ys({typed:e,SparseMatrix:s}),u=Mn({typed:e,DenseMatrix:n}),c=Hr({typed:e,matrix:t,concat:a});return e(lE,{"number, number":l8,"BigNumber, BigNumber":HX,"bigint, bigint":(d,h)=>d^h},c({SS:l,DS:o,Ss:u}))}),cE="arg",tY=["typed"],rY=Se(cE,tY,r=>{var{typed:e}=r;return e(cE,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),uE="conj",nY=["typed"],iY=Se(uE,nY,r=>{var{typed:e}=r;return e(uE,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),Unit:e.referToSelf(t=>n=>new n.constructor(t(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),dE="im",aY=["typed"],sY=Se(dE,aY,r=>{var{typed:e}=r;return e(dE,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),fE="re",oY=["typed"],lY=Se(fE,oY,r=>{var{typed:e}=r;return e(fE,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),hE="not",cY=["typed"],uY=Se(hE,cY,r=>{var{typed:e}=r;return e(hE,{"null | undefined":()=>!0,number:h8,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),mE="or",dY=["typed","matrix","equalScalar","DenseMatrix","concat"],P8=Se(mE,dY,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s}=r,o=Ai({typed:e}),l=Cp({typed:e,equalScalar:n}),u=Mn({typed:e,DenseMatrix:a}),c=Hr({typed:e,matrix:t,concat:s});return e(mE,{"number, number":ky,"Complex, Complex":function(h,g){return h.re!==0||h.im!==0||g.re!==0||g.im!==0},"BigNumber, BigNumber":function(h,g){return!h.isZero()&&!h.isNaN()||!g.isZero()&&!g.isNaN()},"bigint, bigint":ky,"Unit, Unit":e.referToSelf(d=>(h,g)=>d(h.value||0,g.value||0))},c({SS:l,DS:o,Ss:u}))}),pE="xor",fY=["typed","matrix","DenseMatrix","concat","SparseMatrix"],hY=Se(pE,fY,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:a,SparseMatrix:s}=r,o=Ai({typed:e}),l=ys({typed:e,SparseMatrix:s}),u=Mn({typed:e,DenseMatrix:n}),c=Hr({typed:e,matrix:t,concat:a});return e(pE,{"number, number":My,"Complex, Complex":function(h,g){return(h.re!==0||h.im!==0)!=(g.re!==0||g.im!==0)},"bigint, bigint":My,"BigNumber, BigNumber":function(h,g){return(!h.isZero()&&!h.isNaN())!=(!g.isZero()&&!g.isNaN())},"Unit, Unit":e.referToSelf(d=>(h,g)=>d(h.value||0,g.value||0))},c({SS:l,DS:o,Ss:u}))}),gE="concat",mY=["typed","matrix","isInteger"],q8=Se(gE,mY,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(gE,{"...Array | Matrix | number | BigNumber":function(s){var o,l=s.length,u=-1,c,d=!1,h=[];for(o=0;o<l;o++){var g=s[o];if(Lt(g)&&(d=!0),Kt(g)||Xt(g)){if(o!==l-1)throw new Error("Dimension must be specified as last argument");if(c=u,u=g.valueOf(),!n(u))throw new TypeError("Integer number expected for dimension");if(u<0||o>0&&u>c)throw new Wa(u,c+1)}else{var m=Ht(g).valueOf(),v=Ut(m);if(h[o]=m,c=u,u=v.length-1,o>0&&u!==c)throw new er(c+1,u+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var x=h.shift();h.length;)x=$D(x,h.shift(),u);return d?t(x):x},"...string":function(s){return s.join("")}})}),xE="column",pY=["typed","Index","matrix","range"],$8=Se(xE,pY,r=>{var{typed:e,Index:t,matrix:n,range:a}=r;return e(xE,{"Matrix, number":s,"Array, number":function(l,u){return s(n(Ht(l)),u).valueOf()}});function s(o,l){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");$r(l,o.size()[1]);var u=a(0,o.size()[0]),c=new t(u,l),d=o.subset(c);return Lt(d)?d:n([[d]])}}),vE="count",gY=["typed","size","prod"],xY=Se(vE,gY,r=>{var{typed:e,size:t,prod:n}=r;return e(vE,{string:function(s){return s.length},"Matrix | Array":function(s){return n(t(s))}})}),yE="cross",vY=["typed","matrix","subtract","multiply"],yY=Se(yE,vY,r=>{var{typed:e,matrix:t,subtract:n,multiply:a}=r;return e(yE,{"Matrix, Matrix":function(l,u){return t(s(l.toArray(),u.toArray()))},"Matrix, Array":function(l,u){return t(s(l.toArray(),u))},"Array, Matrix":function(l,u){return t(s(l,u.toArray()))},"Array, Array":s});function s(o,l){var u=Math.max(Ut(o).length,Ut(l).length);o=Bm(o),l=Bm(l);var c=Ut(o),d=Ut(l);if(c.length!==1||d.length!==1||c[0]!==3||d[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+c.join(", ")+"], B = ["+d.join(", ")+"])");var h=[n(a(o[1],l[2]),a(o[2],l[1])),n(a(o[2],l[0]),a(o[0],l[2])),n(a(o[0],l[1]),a(o[1],l[0]))];return u>1?[h]:h}}),bE="diag",bY=["typed","matrix","DenseMatrix","SparseMatrix"],wY=Se(bE,bY,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:a}=r;return e(bE,{Array:function(c){return s(c,0,Ut(c),null)},"Array, number":function(c,d){return s(c,d,Ut(c),null)},"Array, BigNumber":function(c,d){return s(c,d.toNumber(),Ut(c),null)},"Array, string":function(c,d){return s(c,0,Ut(c),d)},"Array, number, string":function(c,d,h){return s(c,d,Ut(c),h)},"Array, BigNumber, string":function(c,d,h){return s(c,d.toNumber(),Ut(c),h)},Matrix:function(c){return s(c,0,c.size(),c.storage())},"Matrix, number":function(c,d){return s(c,d,c.size(),c.storage())},"Matrix, BigNumber":function(c,d){return s(c,d.toNumber(),c.size(),c.storage())},"Matrix, string":function(c,d){return s(c,0,c.size(),d)},"Matrix, number, string":function(c,d,h){return s(c,d,c.size(),h)},"Matrix, BigNumber, string":function(c,d,h){return s(c,d.toNumber(),c.size(),h)}});function s(u,c,d,h){if(!kt(c))throw new TypeError("Second parameter in function diag must be an integer");var g=c>0?c:0,m=c<0?-c:0;switch(d.length){case 1:return o(u,c,h,d[0],m,g);case 2:return l(u,c,h,d,m,g)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(u,c,d,h,g,m){var v=[h+g,h+m];if(d&&d!=="sparse"&&d!=="dense")throw new TypeError("Unknown matrix type ".concat(d,'"'));var x=d==="sparse"?a.diagonal(v,u,c):n.diagonal(v,u,c);return d!==null?x:x.valueOf()}function l(u,c,d,h,g,m){if(Lt(u)){var v=u.diagonal(c);return d!==null?d!==v.storage()?t(v,d):v:v.valueOf()}for(var x=Math.min(h[0]-g,h[1]-m),b=[],y=0;y<x;y++)b[y]=u[y+g][y+m];return d!==null?t(b):b}}),_Y="filter",NY=["typed"],U8=Se(_Y,NY,r=>{var{typed:e}=r;return e("filter",{"Array, function":wE,"Matrix, function":function(n,a){return n.create(wE(n.valueOf(),a),n.datatype())},"Array, RegExp":fj,"Matrix, RegExp":function(n,a){return n.create(fj(n.valueOf(),a),n.datatype())}})});function wE(r,e){var t=Hl(e,r,"filter");return t.isUnary?dj(r,t.fn):dj(r,function(n,a,s){return t.fn(n,[a],s)})}var _E="flatten",SY=["typed"],jY=Se(_E,SY,r=>{var{typed:e}=r;return e(_E,{Array:function(n){return pr(n)},Matrix:function(n){return n.create(pr(n.valueOf(),!0),n.datatype())}})}),Iy="forEach",EY=["typed"],H8=Se(Iy,EY,r=>{var{typed:e}=r;return e(Iy,{"Array, function":AY,"Matrix, function":function(n,a){n.forEach(a)}})});function AY(r,e){var t=Hl(e,r,Iy);HD(r,t.fn,t.isUnary)}var NE="getMatrixDataType",TY=["typed"],CY=Se(NE,TY,r=>{var{typed:e}=r;return e(NE,{Array:function(n){return Ap(n,Or)},Matrix:function(n){return n.getDataType()}})}),SE="identity",DY=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],kY=Se(SE,DY,r=>{var{typed:e,config:t,matrix:n,BigNumber:a,DenseMatrix:s,SparseMatrix:o}=r;return e(SE,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(d){return n(d)},"number | BigNumber":function(d){return u(d,d,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(d,h){return u(d,d,h)},"number | BigNumber, number | BigNumber":function(d,h){return u(d,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(d,h,g){return u(d,h,g)},Array:function(d){return l(d)},"Array, string":function(d,h){return l(d,h)},Matrix:function(d){return l(d.valueOf(),d.storage())},"Matrix, string":function(d,h){return l(d.valueOf(),h)}});function l(c,d){switch(c.length){case 0:return d?n(d):[];case 1:return u(c[0],c[0],d);case 2:return u(c[0],c[1],d);default:throw new Error("Vector containing two values expected")}}function u(c,d,h){var g=Xt(c)||Xt(d)?a:null;if(Xt(c)&&(c=c.toNumber()),Xt(d)&&(d=d.toNumber()),!kt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");if(!kt(d)||d<1)throw new Error("Parameters in function identity must be positive integers");var m=g?new a(1):1,v=g?new g(0):0,x=[c,d];if(h){if(h==="sparse")return o.diagonal(x,m,0,v);if(h==="dense")return s.diagonal(x,m,0,v);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var b=Tu([],x,v),y=c<d?c:d,S=0;S<y;S++)b[S][S]=m;return b}}),jE="kron",MY=["typed","matrix","multiplyScalar"],FY=Se(jE,MY,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(jE,{"Matrix, Matrix":function(o,l){return t(a(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(a(o.toArray(),l))},"Array, Matrix":function(o,l){return t(a(o,l.toArray()))},"Array, Array":a});function a(s,o){if(Ut(s).length===1&&(s=[s]),Ut(o).length===1&&(o=[o]),Ut(s).length>2||Ut(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(s.length)+", y = "+JSON.stringify(o.length)+")");var l=[],u=[];return s.map(function(c){return o.map(function(d){return u=[],l.push(u),c.map(function(h){return d.map(function(g){return u.push(n(h,g))})})})})&&l}}),Y1="map",OY=["typed"],V8=Se(Y1,OY,r=>{var{typed:e}=r;return e(Y1,{"Array, function":n,"Matrix, function":function(s,o){return s.map(o)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(a,s,o)=>t([a,s,...o.slice(0,o.length-1)],o[o.length-1])});function t(a,s){if(typeof s!="function")throw new Error("Last argument must be a callback function");var o=a[0].isMatrix,l=Fb(...a.map(N=>N.isMatrix?N.size():Ut(N))),u=o?(N,j)=>N.get(j):Ob,c=o?a.map(N=>N.isMatrix?N.create(Rl(N.toArray(),l),N.datatype()):a[0].create(Rl(N.valueOf(),l))):a.map(N=>N.isMatrix?Rl(N.toArray(),l):Rl(N,l)),d;if(e.isTypedFunction(s)){var h=l.map(()=>0),g=c.map(N=>u(N,h)),m=_(s,g,h,c);d=y(m)}else{var v=a.length,x=S(s,v);d=y(x)}var b=(N,j)=>d([N,...c.slice(1).map(E=>u(E,j))],j);if(o)return c[0].map(b);return n(c[0],b);function y(N){switch(N){case 0:return j=>s(...j);case 1:return(j,E)=>s(...j,E);case 2:return(j,E)=>s(...j,E,...c)}}function S(N,j){return N.length>j+1?2:N.length===j+1?1:0}function _(N,j,E,T){return e.resolve(N,[...j,E,...T])!==null?2:e.resolve(N,[...j,E])!==null?1:(e.resolve(N,j)!==null,0)}}function n(a,s){var o=Hl(s,a,Y1);return Ty(a,o.fn,o.isUnary)}}),EE="diff",BY=["typed","matrix","subtract","number"],G8=Se(EE,BY,r=>{var{typed:e,matrix:t,subtract:n,number:a}=r;return e(EE,{"Array | Matrix":function(d){return Lt(d)?t(o(d.toArray())):o(d)},"Array | Matrix, number":function(d,h){if(!kt(h))throw new RangeError("Dimension must be a whole number");return Lt(d)?t(s(d.toArray(),h)):s(d,h)},"Array, BigNumber":e.referTo("Array,number",c=>(d,h)=>c(d,a(h))),"Matrix, BigNumber":e.referTo("Matrix,number",c=>(d,h)=>c(d,a(h)))});function s(c,d){if(Lt(c)&&(c=c.toArray()),!Array.isArray(c))throw RangeError("Array/Matrix does not have that many dimensions");if(d>0){var h=[];return c.forEach(g=>{h.push(s(g,d-1))}),h}else{if(d===0)return o(c);throw RangeError("Cannot have negative dimension")}}function o(c){for(var d=[],h=c.length,g=1;g<h;g++)d.push(l(c[g-1],c[g]));return d}function l(c,d){Lt(c)&&(c=c.toArray()),Lt(d)&&(d=d.toArray());var h=Array.isArray(c),g=Array.isArray(d);if(h&&g)return u(c,d);if(!h&&!g)return n(d,c);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(c,d){if(c.length!==d.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],g=c.length,m=0;m<g;m++)h.push(l(c[m],d[m]));return h}}),RY="ones",LY=["typed","config","matrix","BigNumber"],IY=Se(RY,LY,r=>{var{typed:e,config:t,matrix:n,BigNumber:a}=r;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(c){var d=c[c.length-1];if(typeof d=="string"){var h=c.pop();return s(c,h)}else return t.matrix==="Array"?s(c):s(c,"default")},Array:s,Matrix:function(c){var d=c.storage();return s(c.valueOf(),d)},"Array | Matrix, string":function(c,d){return s(c.valueOf(),d)}});function s(u,c){var d=o(u),h=d?new a(1):1;if(l(u),c){var g=n(c);return u.length>0?g.resize(u,h):g}else{var m=[];return u.length>0?Tu(m,u,h):m}}function o(u){var c=!1;return u.forEach(function(d,h,g){Xt(d)&&(c=!0,g[h]=d.toNumber())}),c}function l(u){u.forEach(function(c){if(typeof c!="number"||!kt(c)||c<0)throw new Error("Parameters in function ones must be positive integers")})}});function Pb(){throw new Error('No "bignumber" implementation available')}function Q8(){throw new Error('No "fraction" implementation available')}function W8(){throw new Error('No "matrix" implementation available')}var AE="range",zY=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],K8=Se(AE,zY,r=>{var{typed:e,config:t,matrix:n,bignumber:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isPositive:d}=r;return e(AE,{string:g,"string, boolean":g,number:function(b){throw new TypeError("Too few arguments to function range(): ".concat(b))},boolean:function(b){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(b,", number|bigint|BigNumber|Fraction"))},"number, number":function(b,y){return h(m(b,y,1,!1))},"number, number, number":function(b,y,S){return h(m(b,y,S,!1))},"number, number, boolean":function(b,y,S){return h(m(b,y,1,S))},"number, number, number, boolean":function(b,y,S,_){return h(m(b,y,S,_))},"bigint, bigint|number":function(b,y){return h(m(b,y,1n,!1))},"number, bigint":function(b,y){return h(m(BigInt(b),y,1n,!1))},"bigint, bigint|number, bigint|number":function(b,y,S){return h(m(b,y,BigInt(S),!1))},"number, bigint, bigint|number":function(b,y,S){return h(m(BigInt(b),y,BigInt(S),!1))},"bigint, bigint|number, boolean":function(b,y,S){return h(m(b,y,1n,S))},"number, bigint, boolean":function(b,y,S){return h(m(BigInt(b),y,1n,S))},"bigint, bigint|number, bigint|number, boolean":function(b,y,S,_){return h(m(b,y,BigInt(S),_))},"number, bigint, bigint|number, boolean":function(b,y,S,_){return h(m(BigInt(b),y,BigInt(S),_))},"BigNumber, BigNumber":function(b,y){var S=b.constructor;return h(m(b,y,new S(1),!1))},"BigNumber, BigNumber, BigNumber":function(b,y,S){return h(m(b,y,S,!1))},"BigNumber, BigNumber, boolean":function(b,y,S){var _=b.constructor;return h(m(b,y,new _(1),S))},"BigNumber, BigNumber, BigNumber, boolean":function(b,y,S,_){return h(m(b,y,S,_))},"Fraction, Fraction":function(b,y){return h(m(b,y,1,!1))},"Fraction, Fraction, Fraction":function(b,y,S){return h(m(b,y,S,!1))},"Fraction, Fraction, boolean":function(b,y,S){return h(m(b,y,1,S))},"Fraction, Fraction, Fraction, boolean":function(b,y,S,_){return h(m(b,y,S,_))},"Unit, Unit, Unit":function(b,y,S){return h(m(b,y,S,!1))},"Unit, Unit, Unit, boolean":function(b,y,S,_){return h(m(b,y,S,_))}});function h(x){return t.matrix==="Matrix"?n?n(x):W8():x}function g(x,b){var y=v(x);if(!y)throw new SyntaxError('String "'+x+'" is no valid range');return t.number==="BigNumber"?(a===void 0&&Pb(),h(m(a(y.start),a(y.end),a(y.step)))):h(m(y.start,y.end,y.step,b))}function m(x,b,y,S){for(var _=[],N=d(y)?S?o:s:S?u:l,j=x;N(j,b);)_.push(j),j=c(j,y);return _}function v(x){var b=x.split(":"),y=b.map(function(_){return Number(_)}),S=y.some(function(_){return isNaN(_)});if(S)return null;switch(y.length){case 2:return{start:y[0],end:y[1],step:1};case 3:return{start:y[0],end:y[2],step:y[1]};default:return null}}}),TE="reshape",PY=["typed","isInteger","matrix"],qY=Se(TE,PY,r=>{var{typed:e,isInteger:t}=r;return e(TE,{"Matrix, Array":function(a,s){return a.reshape(s,!0)},"Array, Array":function(a,s){return s.forEach(function(o){if(!t(o))throw new TypeError("Invalid size for dimension: "+o)}),kb(a,s)}})}),$Y="resize",UY=["config","matrix"],HY=Se($Y,UY,r=>{var{config:e,matrix:t}=r;return function(s,o,l){if(arguments.length!==2&&arguments.length!==3)throw new Jl("resize",arguments.length,2,3);if(Lt(o)&&(o=o.valueOf()),Xt(o[0])&&(o=o.map(function(d){return Xt(d)?d.toNumber():d})),Lt(s))return s.resize(o,l,!0);if(typeof s=="string")return n(s,o,l);var u=Array.isArray(s)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(s);)s=s[0];return Ht(s)}else{Array.isArray(s)||(s=[s]),s=Ht(s);var c=Tu(s,o,l);return u?t(c):c}};function n(a,s,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(s.length!==1)throw new er(s.length,1);var l=s[0];if(typeof l!="number"||!kt(l))throw new TypeError("Invalid size, must contain positive integers (size: "+Jt(s)+")");if(a.length>l)return a.substring(0,l);if(a.length<l){for(var u=a,c=0,d=l-a.length;c<d;c++)u+=o;return u}else return a}}),CE="rotate",VY=["typed","multiply","rotationMatrix"],GY=Se(CE,VY,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(CE,{"Array , number | BigNumber | Complex | Unit":function(o,l){a(o,2);var u=t(n(l),o);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(o,l){return a(o,2),t(n(l),o)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(o,l,u){a(o,3);var c=t(n(l,u),o);return c},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(o,l,u){return a(o,3),t(n(l,u),o)}});function a(s,o){var l=Array.isArray(s)?Ut(s):s.size();if(l.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(l.length===2&&l[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(o));if(l[0]!==o)throw new RangeError("Vector must be of dimensions 1x".concat(o))}}),DE="rotationMatrix",QY=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],WY=Se(DE,QY,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:a,unaryMinus:s,norm:o,BigNumber:l,matrix:u,DenseMatrix:c,SparseMatrix:d,cos:h,sin:g}=r;return e(DE,{"":function(){return t.matrix==="Matrix"?u([]):[]},string:function(_){return u(_)},"number | BigNumber | Complex | Unit":function(_){return m(_,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(_,N){return m(_,N)},"number | BigNumber | Complex | Unit, Array":function(_,N){var j=u(N);return v(j),y(_,j,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(_,N){v(N);var j=N.storage()||(t.matrix==="Matrix"?"dense":void 0);return y(_,N,j)},"number | BigNumber | Complex | Unit, Array, string":function(_,N,j){var E=u(N);return v(E),y(_,E,j)},"number | BigNumber | Complex | Unit, Matrix, string":function(_,N,j){return v(N),y(_,N,j)}});function m(S,_){var N=Xt(S),j=N?new l(-1):-1,E=h(S),T=g(S),F=[[E,n(j,T)],[T,E]];return b(F,_)}function v(S){var _=S.size();if(_.length<1||_[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function x(S){return S.reduce((_,N)=>n(_,N))}function b(S,_){if(_){if(_==="sparse")return new d(S);if(_==="dense")return new c(S);throw new TypeError('Unknown matrix type "'.concat(_,'"'))}return S}function y(S,_,N){var j=o(_);if(j===0)throw new RangeError("Rotation around zero vector");var E=Xt(S)?l:null,T=E?new E(1):1,F=E?new E(-1):-1,A=E?new E(_.get([0])/j):_.get([0])/j,R=E?new E(_.get([1])/j):_.get([1])/j,I=E?new E(_.get([2])/j):_.get([2])/j,O=h(S),U=a(T,s(O)),D=g(S),H=a(O,x([A,A,U])),P=a(x([A,R,U]),x([F,I,D])),G=a(x([A,I,U]),x([R,D])),ue=a(x([A,R,U]),x([I,D])),le=a(O,x([R,R,U])),pe=a(x([R,I,U]),x([F,A,D])),de=a(x([A,I,U]),x([F,R,D])),L=a(x([R,I,U]),x([A,D])),X=a(O,x([I,I,U])),V=[[H,P,G],[ue,le,pe],[de,L,X]];return b(V,N)}}),kE="row",KY=["typed","Index","matrix","range"],X8=Se(kE,KY,r=>{var{typed:e,Index:t,matrix:n,range:a}=r;return e(kE,{"Matrix, number":s,"Array, number":function(l,u){return s(n(Ht(l)),u).valueOf()}});function s(o,l){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");$r(l,o.size()[0]);var u=a(0,o.size()[1]),c=new t(l,u),d=o.subset(c);return Lt(d)?d:n([[d]])}}),ME="size",XY=["typed","config","?matrix"],YY=Se(ME,XY,r=>{var{typed:e,config:t,matrix:n}=r;return e(ME,{Matrix:function(s){return s.create(s.size(),"number")},Array:Ut,string:function(s){return t.matrix==="Array"?[s.length]:n([s.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(s){return t.matrix==="Array"?[]:n?n([],"dense","number"):W8()}})}),FE="squeeze",ZY=["typed"],JY=Se(FE,ZY,r=>{var{typed:e}=r;return e(FE,{Array:function(n){return Bm(Ht(n))},Matrix:function(n){var a=Bm(n.toArray());return Array.isArray(a)?n.create(a,n.datatype()):a},any:function(n){return Ht(n)}})}),OE="subset",eZ=["typed","matrix","zeros","add"],Y8=Se(OE,eZ,r=>{var{typed:e,matrix:t,zeros:n,add:a}=r;return e(OE,{"Matrix, Index":function(l,u){return Au(u)?t():(Om(l,u),l.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(o){return function(l,u){var c=o(t(l),u);return u.isScalar()?c:c.valueOf()}}),"Object, Index":rZ,"string, Index":tZ,"Matrix, Index, any, any":function(l,u,c,d){return Au(u)?l:(Om(l,u),l.clone().subset(u,s(c,u),d))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(o){return function(l,u,c,d){var h=o(t(l),u,c,d);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(l,u,c){return o(t(l),u,c,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(o){return function(l,u,c){return o(l,u,c,void 0)}}),"string, Index, string":BE,"string, Index, string, string":BE,"Object, Index, any":nZ});function s(o,l){if(typeof o=="string")throw new Error("can't boradcast a string");if(l._isScalar)return o;var u=l.size();if(u.every(c=>c>0))try{return a(o,n(u))}catch{return o}else return o}});function tZ(r,e){if(!bp(e))throw new TypeError("Index expected");if(Au(e))return"";if(Om(Array.from(r),e),e.size().length!==1)throw new er(e.size().length,1);var t=r.length;$r(e.min()[0],t),$r(e.max()[0],t);var n=e.dimension(0),a="";return n.forEach(function(s){a+=r.charAt(s)}),a}function BE(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(Au(e))return r;if(Om(Array.from(r),e),e.size().length!==1)throw new er(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var a=e.dimension(0),s=a.size()[0];if(s!==t.length)throw new er(a.size()[0],t.length);var o=r.length;$r(e.min()[0]),$r(e.max()[0]);for(var l=[],u=0;u<o;u++)l[u]=r.charAt(u);if(a.forEach(function(h,g){l[h]=t.charAt(g[0])}),l.length>o)for(var c=o-1,d=l.length;c<d;c++)l[c]||(l[c]=n);return l.join("")}function rZ(r,e){if(!Au(e)){if(e.size().length!==1)throw new er(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return Ni(r,t)}}function nZ(r,e,t){if(Au(e))return r;if(e.size().length!==1)throw new er(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var a=Ht(r);return ju(a,n,t),a}var RE="transpose",iZ=["typed","matrix"],aZ=Se(RE,iZ,r=>{var{typed:e,matrix:t}=r;return e(RE,{Array:o=>n(t(o)).valueOf(),Matrix:n,any:Ht});function n(o){var l=o.size(),u;switch(l.length){case 1:u=o.clone();break;case 2:{var c=l[0],d=l[1];if(d===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Jt(l)+")");switch(o.storage()){case"dense":u=a(o,c,d);break;case"sparse":u=s(o,c,d);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Jt(l)+")")}return u}function a(o,l,u){for(var c=o._data,d=[],h,g=0;g<u;g++){h=d[g]=[];for(var m=0;m<l;m++)h[m]=Ht(c[m][g])}return o.createDenseMatrix({data:d,size:[u,l],datatype:o._datatype})}function s(o,l,u){for(var c=o._values,d=o._index,h=o._ptr,g=c?[]:void 0,m=[],v=[],x=[],b=0;b<l;b++)x[b]=0;var y,S,_;for(y=0,S=d.length;y<S;y++)x[d[y]]++;for(var N=0,j=0;j<l;j++)v.push(N),N+=x[j],x[j]=v[j];for(v.push(N),_=0;_<u;_++)for(var E=h[_],T=h[_+1],F=E;F<T;F++){var A=x[d[F]]++;m[A]=_,c&&(g[A]=Ht(c[F]))}return o.createSparseMatrix({values:g,index:m,ptr:v,size:[u,l],datatype:o._datatype})}}),LE="ctranspose",sZ=["typed","transpose","conj"],oZ=Se(LE,sZ,r=>{var{typed:e,transpose:t,conj:n}=r;return e(LE,{any:function(s){return n(t(s))}})}),IE="zeros",lZ=["typed","config","matrix","BigNumber"],cZ=Se(IE,lZ,r=>{var{typed:e,config:t,matrix:n,BigNumber:a}=r;return e(IE,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(c){var d=c[c.length-1];if(typeof d=="string"){var h=c.pop();return s(c,h)}else return t.matrix==="Array"?s(c):s(c,"default")},Array:s,Matrix:function(c){var d=c.storage();return s(c.valueOf(),d)},"Array | Matrix, string":function(c,d){return s(c.valueOf(),d)}});function s(u,c){var d=o(u),h=d?new a(0):0;if(l(u),c){var g=n(c);return u.length>0?g.resize(u,h):g}else{var m=[];return u.length>0?Tu(m,u,h):m}}function o(u){var c=!1;return u.forEach(function(d,h,g){Xt(d)&&(c=!0,g[h]=d.toNumber())}),c}function l(u){u.forEach(function(c){if(typeof c!="number"||!kt(c)||c<0)throw new Error("Parameters in function zeros must be positive integers")})}}),zE="fft",uZ=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],dZ=Se(zE,uZ,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:a,divideScalar:s,exp:o,tau:l,i:u,dotDivide:c,conj:d,pow:h,ceil:g,log2:m}=r;return e(zE,{Array:v,Matrix:function(_){return _.create(v(_.valueOf()),_.datatype())}});function v(S){var _=Ut(S);return _.length===1?y(S,_[0]):x(S.map(N=>v(N,_.slice(1))),0)}function x(S,_){var N=Ut(S);if(_!==0)return new Array(N[0]).fill(0).map((E,T)=>x(S[T],_-1));if(N.length===1)return y(S);function j(E){var T=Ut(E);return new Array(T[1]).fill(0).map((F,A)=>new Array(T[0]).fill(0).map((R,I)=>E[I][A]))}return j(x(j(S),1))}function b(S){for(var _=S.length,N=o(s(a(-1,a(u,l)),_)),j=[],E=1-_;E<_;E++)j.push(h(N,s(h(E,2),2)));for(var T=h(2,g(m(_+_-1))),F=[...new Array(_).fill(0).map((P,G)=>a(S[G],j[_-1+G])),...new Array(T-_).fill(0)],A=[...new Array(_+_-1).fill(0).map((P,G)=>s(1,j[G])),...new Array(T-(_+_-1)).fill(0)],R=y(F),I=y(A),O=new Array(T).fill(0).map((P,G)=>a(R[G],I[G])),U=c(d(v(d(O))),T),D=[],H=_-1;H<_+_-1;H++)D.push(a(U[H],j[H]));return D}function y(S){var _=S.length;if(_===1)return[S[0]];if(_%2===0){for(var N=[...y(S.filter((F,A)=>A%2===0)),...y(S.filter((F,A)=>A%2===1))],j=0;j<_/2;j++){var E=N[j],T=a(N[j+_/2],o(a(a(l,u),s(-j,_))));N[j]=n(E,T),N[j+_/2]=n(E,a(-1,T))}return N}else return b(S)}}),PE="ifft",fZ=["typed","fft","dotDivide","conj"],hZ=Se(PE,fZ,r=>{var{typed:e,fft:t,dotDivide:n,conj:a}=r;return e(PE,{"Array | Matrix":function(o){var l=Lt(o)?o.size():Ut(o);return n(a(t(a(o))),l.reduce((u,c)=>u*c,1))}})});function Af(r){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(r)}function mZ(r,e){if(Af(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function pZ(r){var e=mZ(r,"string");return Af(e)=="symbol"?e:e+""}function Sn(r,e,t){return(e=pZ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qE(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function gZ(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(t),!0).forEach(function(n){Sn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qE(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var xZ="solveODE",vZ=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],yZ=Se(xZ,vZ,r=>{var{typed:e,add:t,subtract:n,multiply:a,divide:s,max:o,map:l,abs:u,isPositive:c,isNegative:d,larger:h,smaller:g,matrix:m,bignumber:v,unaryMinus:x}=r;function b(F){return function(A,R,I,O){var U=!(R.length===2&&(R.every(E)||R.every(Ji)));if(U)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var D=R[0],H=R[1],P=h(H,D),G=O.firstStep;if(G!==void 0&&!c(G))throw new Error('"firstStep" must be positive');var ue=O.maxStep;if(ue!==void 0&&!c(ue))throw new Error('"maxStep" must be positive');var le=O.minStep;if(le&&d(le))throw new Error('"minStep" must be positive or zero');var pe=[D,H,G,le,ue].filter(te=>te!==void 0);if(!(pe.every(E)||pe.every(Ji)))throw new Error('Inconsistent type of "t" dependant variables');for(var de=1,L=O.tol?O.tol:1e-4,X=O.minDelta?O.minDelta:.2,V=O.maxDelta?O.maxDelta:5,se=O.maxIter?O.maxIter:1e4,ae=[D,H,...I,ue,le].some(Xt),[W,z,re,ne]=ae?[v(F.a),v(F.c),v(F.b),v(F.bp)]:[F.a,F.c,F.b,F.bp],ie=G?P?G:x(G):s(n(H,D),de),oe=[D],ye=[I],M=n(re,ne),ge=0,ee=0,k=N(P),B=j(P);k(oe[ge],H);){var Q=[];ie=B(oe[ge],H,ie),Q.push(A(oe[ge],ye[ge]));for(var Z=1;Z<z.length;++Z)Q.push(A(t(oe[ge],a(z[Z],ie)),t(ye[ge],a(ie,W[Z],Q))));var J=o(u(l(a(M,Q),te=>Ji(te)?te.value:te)));J<L&&L/J>1/4&&(oe.push(t(oe[ge],ie)),ye.push(t(ye[ge],a(ie,re,Q))),ge++);var K=.84*(L/J)**(1/5);if(g(K,X)?K=X:h(K,V)&&(K=V),K=ae?v(K):K,ie=a(ie,K),ue&&h(u(ie),ue)?ie=P?ue:x(ue):le&&g(u(ie),le)&&(ie=P?le:x(le)),ee++,ee>se)throw new Error("Maximum number of iterations reached, try changing options")}return{t:oe,y:ye}}}function y(F,A,R,I){var O=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],U=[null,1/2,3/4,1],D=[2/9,1/3,4/9,0],H=[7/24,1/4,1/3,1/8],P={a:O,c:U,b:D,bp:H};return b(P)(F,A,R,I)}function S(F,A,R,I){var O=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],U=[null,1/5,3/10,4/5,8/9,1,1],D=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],H=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],P={a:O,c:U,b:D,bp:H};return b(P)(F,A,R,I)}function _(F,A,R,I){var O=I.method?I.method:"RK45",U={RK23:y,RK45:S};if(O.toUpperCase()in U){var D=gZ({},I);return delete D.method,U[O.toUpperCase()](F,A,R,D)}else{var H=Object.keys(U).map(G=>'"'.concat(G,'"')),P="".concat(H.slice(0,-1).join(", ")," and ").concat(H.slice(-1));throw new Error('Unavailable method "'.concat(O,'". Available methods are ').concat(P))}}function N(F){return F?g:h}function j(F){var A=F?h:g;return function(R,I,O){var U=t(R,O);return A(U,I)?n(I,R):O}}function E(F){return Xt(F)||Kt(F)}function T(F,A,R,I){var O=_(F,A.toArray(),R.toArray(),I);return{t:m(O.t),y:m(O.y)}}return e("solveODE",{"function, Array, Array, Object":_,"function, Matrix, Matrix, Object":T,"function, Array, Array":(F,A,R)=>_(F,A,R,{}),"function, Matrix, Matrix":(F,A,R)=>T(F,A,R,{}),"function, Array, number | BigNumber | Unit":(F,A,R)=>{var I=_(F,A,[R],{});return{t:I.t,y:I.y.map(O=>O[0])}},"function, Matrix, number | BigNumber | Unit":(F,A,R)=>{var I=_(F,A.toArray(),[R],{});return{t:m(I.t),y:m(I.y.map(O=>O[0]))}},"function, Array, number | BigNumber | Unit, Object":(F,A,R,I)=>{var O=_(F,A,[R],I);return{t:O.t,y:O.y.map(U=>U[0])}},"function, Matrix, number | BigNumber | Unit, Object":(F,A,R,I)=>{var O=_(F,A.toArray(),[R],I);return{t:m(O.t),y:m(O.y.map(U=>U[0]))}}})}),bZ="erf",wZ=["typed"],_Z=Se(bZ,wZ,r=>{var{typed:e}=r;return e("name",{number:function(o){var l=Math.abs(o);return l>=jZ?zo(o):l<=NZ?zo(o)*t(l):l<=4?zo(o)*(1-n(l)):zo(o)*(1-a(l))},"Array | Matrix":e.referToSelf(s=>o=>Yt(o,s))});function t(s){var o=s*s,l=qs[0][4]*o,u=o,c;for(c=0;c<3;c+=1)l=(l+qs[0][c])*o,u=(u+Yc[0][c])*o;return s*(l+qs[0][3])/(u+Yc[0][3])}function n(s){var o=qs[1][8]*s,l=s,u;for(u=0;u<7;u+=1)o=(o+qs[1][u])*s,l=(l+Yc[1][u])*s;var c=(o+qs[1][7])/(l+Yc[1][7]),d=parseInt(s*16)/16,h=(s-d)*(s+d);return Math.exp(-d*d)*Math.exp(-h)*c}function a(s){var o=1/(s*s),l=qs[2][5]*o,u=o,c;for(c=0;c<4;c+=1)l=(l+qs[2][c])*o,u=(u+Yc[2][c])*o;var d=o*(l+qs[2][4])/(u+Yc[2][4]);d=(SZ-d)/s,o=parseInt(s*16)/16;var h=(s-o)*(s+o);return Math.exp(-o*o)*Math.exp(-h)*d}}),NZ=.46875,SZ=.5641895835477563,qs=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Yc=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],jZ=Math.pow(2,53),$E="zeta",EZ=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],AZ=Se($E,EZ,r=>{var{typed:e,config:t,multiply:n,pow:a,divide:s,factorial:o,equal:l,smallerEq:u,isNegative:c,gamma:d,sin:h,subtract:g,add:m,Complex:v,BigNumber:x,pi:b}=r;return e($E,{number:E=>y(E,T=>T,()=>20),BigNumber:E=>y(E,T=>new x(T),()=>Math.abs(Math.log10(t.relTol))),Complex:S});function y(E,T,F){return l(E,0)?T(-.5):l(E,1)?T(NaN):isFinite(E)?_(E,T,F,A=>A):c(E)?T(NaN):T(1)}function S(E){return E.re===0&&E.im===0?new v(-.5):E.re===1?new v(NaN,NaN):E.re===1/0&&E.im===0?new v(1):E.im===1/0||E.re===-1/0?new v(NaN,NaN):_(E,T=>T,T=>Math.round(1.3*15+.9*Math.abs(T.im)),T=>T.re)}function _(E,T,F,A){var R=F(E);if(A(E)>-(R-1)/2)return j(E,T(R),T);var I=n(a(2,E),a(T(b),g(E,1)));return I=n(I,h(n(s(T(b),2),E))),I=n(I,d(g(1,E))),n(I,_(g(1,E),T,F,A))}function N(E,T){for(var F=E,A=E;u(A,T);A=m(A,1)){var R=s(n(o(m(T,g(A,1))),a(4,A)),n(o(g(T,A)),o(n(2,A))));F=m(F,R)}return n(T,F)}function j(E,T,F){for(var A=s(1,n(N(F(0),T),g(1,a(2,g(1,E))))),R=F(0),I=F(1);u(I,T);I=m(I,1))R=m(R,s(n((-1)**(I-1),N(I,T)),a(I,E)));return n(A,R)}}),UE="mode",TZ=["typed","isNaN","isNumeric"],CZ=Se(UE,TZ,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(UE,{"Array | Matrix":a,"...":function(o){return a(o)}});function a(s){s=pr(s.valueOf());var o=s.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var l={},u=[],c=0,d=0;d<s.length;d++){var h=s[d];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in l||(l[h]=0),l[h]++,l[h]===c?u.push(h):l[h]>c&&(c=l[h],u=[h])}return u}});function Ei(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+Or(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+Or(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var HE="prod",DZ=["typed","config","multiplyScalar","numeric"],kZ=Se(HE,DZ,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:a}=r;return e(HE,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(l,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(l){return s(l)}});function s(o){var l;if(Xo(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Ei(c,"prod",u)}}),typeof l=="string"&&(l=a(l,el(l,t))),l===void 0)throw new Error("Cannot calculate prod of an empty array");return l}}),VE="format",MZ=["typed"],FZ=Se(VE,MZ,r=>{var{typed:e}=r;return e(VE,{any:Jt,"any, Object | function | number | BigNumber":Jt})}),GE="bin",OZ=["typed","format"],BZ=Se(GE,OZ,r=>{var{typed:e,format:t}=r;return e(GE,{"number | BigNumber":function(a){return t(a,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(a,s){return t(a,{notation:"bin",wordSize:s})}})}),QE="oct",RZ=["typed","format"],LZ=Se(QE,RZ,r=>{var{typed:e,format:t}=r;return e(QE,{"number | BigNumber":function(a){return t(a,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(a,s){return t(a,{notation:"oct",wordSize:s})}})}),WE="hex",IZ=["typed","format"],zZ=Se(WE,IZ,r=>{var{typed:e,format:t}=r;return e(WE,{"number | BigNumber":function(a){return t(a,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(a,s){return t(a,{notation:"hex",wordSize:s})}})}),Z8=/\$([\w.]+)/g,KE="print",PZ=["typed"],J8=Se(KE,PZ,r=>{var{typed:e}=r;return e(KE,{"string, Object | Array":XE,"string, Object | Array, number | Object":XE})});function XE(r,e,t){return r.replace(Z8,function(n,a){var s=a.split("."),o=e[s.shift()];for(o!==void 0&&o.isMatrix&&(o=o.toArray());s.length&&o!==void 0;){var l=s.shift();o=l?o[l]:o+"."}return o!==void 0?fi(o)?o:Jt(o,t):n})}var YE="to",qZ=["typed","matrix","concat"],$Z=Se(YE,qZ,r=>{var{typed:e,matrix:t,concat:n}=r,a=Hr({typed:e,matrix:t,concat:n});return e(YE,{"Unit, Unit | string":(s,o)=>s.to(o)},a({Ds:!0}))}),ZE="toBest",UZ=["typed"],HZ=Se(ZE,UZ,r=>{var{typed:e}=r;return e(ZE,{Unit:t=>t.toBest(),"Unit, string":(t,n)=>t.toBest(n.split(",")),"Unit, string, Object":(t,n,a)=>t.toBest(n.split(","),a),"Unit, Array":(t,n)=>t.toBest(n),"Unit, Array, Object":(t,n,a)=>t.toBest(n,a)})}),JE="isPrime",VZ=["typed"],GZ=Se(JE,VZ,r=>{var{typed:e}=r;return e(JE,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var a=5;a*a<=n;a+=6)if(n%a===0||n%(a+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var a=5n;a*a<=n;a+=6n)if(n%a===0n||n%(a+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var a=n.toNumber(),s=5;s*s<=a;s+=6)if(a%s===0||a%(s+2)===0)return!1;return!0}function o(S,_,N){for(var j=1;!_.eq(0);)_.mod(2).eq(0)?(_=_.div(2),S=S.mul(S).mod(N)):(_=_.sub(1),j=S.mul(j).mod(N));return j}var l=n.constructor.clone({precision:n.toFixed(0).length*2});n=new l(n);for(var u=0,c=n.sub(1);c.mod(2).eq(0);)c=c.div(2),u+=1;var d=null;if(n.lt("3317044064679887385961981"))d=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(S=>S<n);else{var h=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));d=[];for(var g=2;g<=h;g+=1)d.push(h)}for(var m=0;m<d.length;m+=1){var v=d[m],x=o(n.sub(n).add(v),c,n);if(!x.eq(1)){for(var b=0,y=x;!y.eq(n.sub(1));b+=1,y=y.mul(y).mod(n))if(b===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>Yt(n,t))})}),QZ="numeric",WZ=["number","?bignumber","?fraction"],KZ=Se(QZ,WZ,r=>{var{number:e,bignumber:t,fraction:n}=r,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>e(o),BigNumber:t?o=>t(o):Pb,bigint:o=>BigInt(o),Fraction:n?o=>n(o):Q8};return function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",c=arguments.length>2?arguments[2]:void 0;if(c!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var d=Or(l);if(!(d in a))throw new TypeError("Cannot convert "+l+' of type "'+d+'"; valid input types are '+Object.keys(a).join(", "));if(!(u in s))throw new TypeError("Cannot convert "+l+' to type "'+u+'"; valid output types are '+Object.keys(s).join(", "));return u===d?l:s[u](l)}}),e6="divideScalar",XZ=["typed","numeric"],YZ=Se(e6,XZ,r=>{var{typed:e,numeric:t}=r;return e(e6,{"number, number":function(a,s){return a/s},"Complex, Complex":function(a,s){return a.div(s)},"BigNumber, BigNumber":function(a,s){return a.div(s)},"bigint, bigint":function(a,s){return a/s},"Fraction, Fraction":function(a,s){return a.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,a)=>n.divide(a),"number | Fraction | Complex | BigNumber, Unit":(n,a)=>a.divideInto(n)})}),t6="pow",ZZ=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],JZ=Se(t6,ZZ,r=>{var{typed:e,config:t,identity:n,multiply:a,matrix:s,inv:o,number:l,fraction:u,Complex:c}=r;return e(t6,{"number, number":d,"Complex, Complex":function(v,x){return v.pow(x)},"BigNumber, BigNumber":function(v,x){return x.isInteger()||v>=0||t.predictable?v.pow(x):new c(v.toNumber(),0).pow(x.toNumber(),0)},"bigint, bigint":(m,v)=>m**v,"Fraction, Fraction":function(v,x){var b=v.pow(x);if(b!=null)return b;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return d(v.valueOf(),x.valueOf())},"Array, number":h,"Array, BigNumber":function(v,x){return h(v,x.toNumber())},"Matrix, number":g,"Matrix, BigNumber":function(v,x){return g(v,x.toNumber())},"Unit, number | BigNumber":function(v,x){return v.pow(x)}});function d(m,v){if(t.predictable&&!kt(v)&&m<0)try{var x=u(v),b=l(x);if((v===b||Math.abs((v-b)/v)<1e-14)&&x.d%2n===1n)return(x.n%2n===0n?1:-1)*Math.pow(-m,v)}catch{}return t.predictable&&(m<-1&&v===1/0||m>-1&&m<0&&v===-1/0)?NaN:kt(v)||m>=0||t.predictable?i8(m,v):m*m<1&&v===1/0||m*m>1&&v===-1/0?0:new c(m,0).pow(v,0)}function h(m,v){if(!kt(v))throw new TypeError("For A^b, b must be an integer (value is "+v+")");var x=Ut(m);if(x.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+x.length+" dimensions)");if(x[0]!==x[1])throw new Error("For A^b, A must be square (size is "+x[0]+"x"+x[1]+")");if(v<0)try{return h(o(m),-v)}catch(S){throw S.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+v+")"):S}for(var b=n(x[0]).valueOf(),y=m;v>=1;)(v&1)===1&&(b=a(y,b)),v>>=1,y=a(y,y);return b}function g(m,v){return s(h(m.valueOf(),v))}}),Zc="Number of decimals in function round must be an integer",r6="round",eJ=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],tJ=Se(r6,eJ,r=>{var{typed:e,config:t,matrix:n,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:l}=r,u=li({typed:e,equalScalar:a}),c=Mn({typed:e,DenseMatrix:l}),d=Xa({typed:e});function h(g){return Math.abs(Hf(g).exponent)}return e(r6,{number:function(m){var v=Yd(m,h(t.relTol)),x=oi(m,v,t.relTol,t.absTol)?v:m;return Yd(x)},"number, number":function(m,v){var x=h(t.relTol);if(v>=x)return Yd(m,v);var b=Yd(m,x),y=oi(m,b,t.relTol,t.absTol)?b:m;return Yd(y,v)},"number, BigNumber":function(m,v){if(!v.isInteger())throw new TypeError(Zc);return new o(m).toDecimalPlaces(v.toNumber())},Complex:function(m){return m.round()},"Complex, number":function(m,v){if(v%1)throw new TypeError(Zc);return m.round(v)},"Complex, BigNumber":function(m,v){if(!v.isInteger())throw new TypeError(Zc);var x=v.toNumber();return m.round(x)},BigNumber:function(m){var v=new o(m).toDecimalPlaces(h(t.relTol)),x=Ea(m,v,t.relTol,t.absTol)?v:m;return x.toDecimalPlaces(0)},"BigNumber, BigNumber":function(m,v){if(!v.isInteger())throw new TypeError(Zc);var x=h(t.relTol);if(v>=x)return m.toDecimalPlaces(v.toNumber());var b=m.toDecimalPlaces(x),y=Ea(m,b,t.relTol,t.absTol)?b:m;return y.toDecimalPlaces(v.toNumber())},bigint:g=>g,"bigint, number":(g,m)=>g,"bigint, BigNumber":(g,m)=>g,Fraction:function(m){return m.round()},"Fraction, number":function(m,v){if(v%1)throw new TypeError(Zc);return m.round(v)},"Fraction, BigNumber":function(m,v){if(!v.isInteger())throw new TypeError(Zc);return m.round(v.toNumber())},"Unit, number, Unit":e.referToSelf(g=>function(m,v,x){var b=m.toNumeric(x);return x.multiply(g(b,v))}),"Unit, BigNumber, Unit":e.referToSelf(g=>(m,v,x)=>g(m,v.toNumber(),x)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(g=>(m,v,x)=>Yt(m,b=>g(b,v,x),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(g=>(m,v)=>g(m,0,v)),"Array | Matrix":e.referToSelf(g=>m=>Yt(m,g,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(g=>(m,v)=>u(m,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(m,v)=>d(m,v,g,!1)),"Array, number | BigNumber":e.referToSelf(g=>(m,v)=>d(n(m),v,g,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(g=>(m,v)=>a(m,0)?s(v.size(),v.storage()):c(v,m,g,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(g=>(m,v)=>a(m,0)?s(v.size(),v.storage()):d(v,m,g,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(g=>(m,v)=>d(n(v),m,g,!0).valueOf())})}),n6="log",rJ=["config","typed","typeOf","divideScalar","Complex"],nJ=Math.log(16),iJ=Se(n6,rJ,r=>{var{typed:e,typeOf:t,config:n,divideScalar:a,Complex:s}=r;function o(u){return u.log()}function l(u){return o(new s(u,0))}return e(n6,{number:function(c){return c>=0||n.predictable?vj(c):l(c)},bigint:Ib(nJ,vj,n,l),Complex:o,BigNumber:function(c){return!c.isNegative()||n.predictable?c.ln():l(c.toNumber())},"any, any":e.referToSelf(u=>(c,d)=>{if(t(c)==="Fraction"&&t(d)==="Fraction"){var h=c.log(d);if(h!==null)return h}return a(u(c),u(d))})})}),i6="log1p",aJ=["typed","config","divideScalar","log","Complex"],sJ=Se(i6,aJ,r=>{var{typed:e,config:t,divideScalar:n,log:a,Complex:s}=r;return e(i6,{number:function(u){return u>=-1||t.predictable?eG(u):o(new s(u,0))},Complex:o,BigNumber:function(u){var c=u.plus(1);return!c.isNegative()||t.predictable?c.ln():o(new s(u.toNumber(),0))},"Array | Matrix":e.referToSelf(l=>u=>Yt(u,l)),"any, any":e.referToSelf(l=>(u,c)=>n(l(u),a(c)))});function o(l){var u=l.re+1;return new s(Math.log(Math.sqrt(u*u+l.im*l.im)),Math.atan2(l.im,u))}}),a6="nthRoots",oJ=["config","typed","divideScalar","Complex"],lJ=Se(a6,oJ,r=>{var{typed:e,config:t,divideScalar:n,Complex:a}=r,s=[function(u){return new a(u,0)},function(u){return new a(0,u)},function(u){return new a(-u,0)},function(u){return new a(0,-u)}];function o(l,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(l===0||l.abs()===0)return[new a(0,0)];var c=typeof l=="number",d;(c||l.re===0||l.im===0)&&(c?d=2*+(l<0):l.im===0?d=2*+(l.re<0):d=2*+(l.im<0)+1);for(var h=l.arg(),g=l.abs(),m=[],v=Math.pow(g,1/u),x=0;x<u;x++){var b=(d+4*x)/u;if(b===Math.round(b)){m.push(s[b%4](v));continue}m.push(new a({r:v,phi:(h+2*Math.PI*x)/u}))}return m}return e(a6,{Complex:function(u){return o(u,2)},"Complex, number":o})}),s6="dotPow",cJ=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],uJ=Se(s6,cJ,r=>{var{typed:e,equalScalar:t,matrix:n,pow:a,DenseMatrix:s,concat:o,SparseMatrix:l}=r,u=Ai({typed:e}),c=ys({typed:e,SparseMatrix:l}),d=li({typed:e,equalScalar:t}),h=Mn({typed:e,DenseMatrix:s}),g=Hr({typed:e,matrix:n,concat:o}),m={};for(var v in a.signatures)Object.prototype.hasOwnProperty.call(a.signatures,v)&&!v.includes("Matrix")&&!v.includes("Array")&&(m[v]=a.signatures[v]);var x=e(m);return e(s6,g({elop:x,SS:c,DS:u,Ss:d,sS:h}))}),o6="dotDivide",dJ=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],fJ=Se(o6,dJ,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:a,DenseMatrix:s,concat:o,SparseMatrix:l}=r,u=Ya({typed:e,equalScalar:n}),c=Ai({typed:e}),d=ys({typed:e,SparseMatrix:l}),h=li({typed:e,equalScalar:n}),g=Mn({typed:e,DenseMatrix:s}),m=Hr({typed:e,matrix:t,concat:o});return e(o6,m({elop:a,SS:d,DS:c,SD:u,Ss:h,sS:g}))});function Vf(r){var{DenseMatrix:e}=r;return function(n,a,s){var o=n.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Jt(o)+")");var l=o[0],u=o[1];if(l!==u)throw new RangeError("Matrix must be square (size: "+Jt(o)+")");var c=[];if(Lt(a)){var d=a.size(),h=a._data;if(d.length===1){if(d[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var g=0;g<l;g++)c[g]=[h[g]];return new e({data:c,size:[l,1],datatype:a._datatype})}if(d.length===2){if(d[0]!==l||d[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Cm(a)){if(s){c=[];for(var m=0;m<l;m++)c[m]=[h[m][0]];return new e({data:c,size:[l,1],datatype:a._datatype})}return a}if(Bl(a)){for(var v=0;v<l;v++)c[v]=[0];for(var x=a._values,b=a._index,y=a._ptr,S=y[1],_=y[0];_<S;_++){var N=b[_];c[N][0]=x[_]}return new e({data:c,size:[l,1],datatype:a._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Mr(a)){var j=Ut(a);if(j.length===1){if(j[0]!==l)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<l;E++)c[E]=[a[E]];return new e({data:c,size:[l,1]})}if(j.length===2){if(j[0]!==l||j[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<l;T++)c[T]=[a[T][0]];return new e({data:c,size:[l,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var l6="lsolve",hJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],mJ=Se(l6,hJ,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:a,subtractScalar:s,equalScalar:o,DenseMatrix:l}=r,u=Vf({DenseMatrix:l});return e(l6,{"SparseMatrix, Array | Matrix":function(g,m){return d(g,m)},"DenseMatrix, Array | Matrix":function(g,m){return c(g,m)},"Array, Array | Matrix":function(g,m){var v=t(g),x=c(v,m);return x.valueOf()}});function c(h,g){g=u(h,g,!0);for(var m=g._data,v=h._size[0],x=h._size[1],b=[],y=h._data,S=0;S<x;S++){var _=m[S][0]||0,N=void 0;if(o(_,0))N=0;else{var j=y[S][S];if(o(j,0))throw new Error("Linear system cannot be solved since matrix is singular");N=n(_,j);for(var E=S+1;E<v;E++)m[E]=[s(m[E][0]||0,a(N,y[E][S]))]}b[S]=[N]}return new l({data:b,size:[v,1]})}function d(h,g){g=u(h,g,!0);for(var m=g._data,v=h._size[0],x=h._size[1],b=h._values,y=h._index,S=h._ptr,_=[],N=0;N<x;N++){var j=m[N][0]||0;if(o(j,0))_[N]=[0];else{for(var E=0,T=[],F=[],A=S[N],R=S[N+1],I=A;I<R;I++){var O=y[I];O===N?E=b[I]:O>N&&(T.push(b[I]),F.push(O))}if(o(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(j,E),D=0,H=F.length;D<H;D++){var P=F[D];m[P]=[s(m[P][0]||0,a(U,T[D]))]}_[N]=[U]}}return new l({data:_,size:[v,1]})}}),c6="usolve",pJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],gJ=Se(c6,pJ,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:a,subtractScalar:s,equalScalar:o,DenseMatrix:l}=r,u=Vf({DenseMatrix:l});return e(c6,{"SparseMatrix, Array | Matrix":function(g,m){return d(g,m)},"DenseMatrix, Array | Matrix":function(g,m){return c(g,m)},"Array, Array | Matrix":function(g,m){var v=t(g),x=c(v,m);return x.valueOf()}});function c(h,g){g=u(h,g,!0);for(var m=g._data,v=h._size[0],x=h._size[1],b=[],y=h._data,S=x-1;S>=0;S--){var _=m[S][0]||0,N=void 0;if(o(_,0))N=0;else{var j=y[S][S];if(o(j,0))throw new Error("Linear system cannot be solved since matrix is singular");N=n(_,j);for(var E=S-1;E>=0;E--)m[E]=[s(m[E][0]||0,a(N,y[E][S]))]}b[S]=[N]}return new l({data:b,size:[v,1]})}function d(h,g){g=u(h,g,!0);for(var m=g._data,v=h._size[0],x=h._size[1],b=h._values,y=h._index,S=h._ptr,_=[],N=x-1;N>=0;N--){var j=m[N][0]||0;if(o(j,0))_[N]=[0];else{for(var E=0,T=[],F=[],A=S[N],R=S[N+1],I=R-1;I>=A;I--){var O=y[I];O===N?E=b[I]:O<N&&(T.push(b[I]),F.push(O))}if(o(E,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var U=n(j,E),D=0,H=F.length;D<H;D++){var P=F[D];m[P]=[s(m[P][0],a(U,T[D]))]}_[N]=[U]}}return new l({data:_,size:[v,1]})}}),u6="lsolveAll",xJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],vJ=Se(u6,xJ,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:a,subtractScalar:s,equalScalar:o,DenseMatrix:l}=r,u=Vf({DenseMatrix:l});return e(u6,{"SparseMatrix, Array | Matrix":function(g,m){return d(g,m)},"DenseMatrix, Array | Matrix":function(g,m){return c(g,m)},"Array, Array | Matrix":function(g,m){var v=t(g),x=c(v,m);return x.map(b=>b.valueOf())}});function c(h,g){for(var m=[u(h,g,!0)._data.map(F=>F[0])],v=h._data,x=h._size[0],b=h._size[1],y=0;y<b;y++)for(var S=m.length,_=0;_<S;_++){var N=m[_];if(o(v[y][y],0))if(o(N[y],0)){if(_===0){var E=[...N];E[y]=1;for(var T=y+1;T<b;T++)E[T]=s(E[T],v[T][y]);m.push(E)}}else{if(_===0)return[];m.splice(_,1),_-=1,S-=1}else{N[y]=n(N[y],v[y][y]);for(var j=y+1;j<b;j++)N[j]=s(N[j],a(N[y],v[j][y]))}}return m.map(F=>new l({data:F.map(A=>[A]),size:[x,1]}))}function d(h,g){for(var m=[u(h,g,!0)._data.map(de=>de[0])],v=h._size[0],x=h._size[1],b=h._values,y=h._index,S=h._ptr,_=0;_<x;_++)for(var N=m.length,j=0;j<N;j++){for(var E=m[j],T=[],F=[],A=S[_],R=S[_+1],I=0,O=A;O<R;O++){var U=y[O];U===_?I=b[O]:U>_&&(T.push(b[O]),F.push(U))}if(o(I,0))if(o(E[_],0)){if(j===0){var G=[...E];G[_]=1;for(var ue=0,le=F.length;ue<le;ue++){var pe=F[ue];G[pe]=s(G[pe],T[ue])}m.push(G)}}else{if(j===0)return[];m.splice(j,1),j-=1,N-=1}else{E[_]=n(E[_],I);for(var D=0,H=F.length;D<H;D++){var P=F[D];E[P]=s(E[P],a(E[_],T[D]))}}}return m.map(de=>new l({data:de.map(L=>[L]),size:[v,1]}))}}),d6="usolveAll",yJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],bJ=Se(d6,yJ,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:a,subtractScalar:s,equalScalar:o,DenseMatrix:l}=r,u=Vf({DenseMatrix:l});return e(d6,{"SparseMatrix, Array | Matrix":function(g,m){return d(g,m)},"DenseMatrix, Array | Matrix":function(g,m){return c(g,m)},"Array, Array | Matrix":function(g,m){var v=t(g),x=c(v,m);return x.map(b=>b.valueOf())}});function c(h,g){for(var m=[u(h,g,!0)._data.map(F=>F[0])],v=h._data,x=h._size[0],b=h._size[1],y=b-1;y>=0;y--)for(var S=m.length,_=0;_<S;_++){var N=m[_];if(o(v[y][y],0))if(o(N[y],0)){if(_===0){var E=[...N];E[y]=1;for(var T=y-1;T>=0;T--)E[T]=s(E[T],v[T][y]);m.push(E)}}else{if(_===0)return[];m.splice(_,1),_-=1,S-=1}else{N[y]=n(N[y],v[y][y]);for(var j=y-1;j>=0;j--)N[j]=s(N[j],a(N[y],v[j][y]))}}return m.map(F=>new l({data:F.map(A=>[A]),size:[x,1]}))}function d(h,g){for(var m=[u(h,g,!0)._data.map(de=>de[0])],v=h._size[0],x=h._size[1],b=h._values,y=h._index,S=h._ptr,_=x-1;_>=0;_--)for(var N=m.length,j=0;j<N;j++){for(var E=m[j],T=[],F=[],A=S[_],R=S[_+1],I=0,O=R-1;O>=A;O--){var U=y[O];U===_?I=b[O]:U<_&&(T.push(b[O]),F.push(U))}if(o(I,0))if(o(E[_],0)){if(j===0){var G=[...E];G[_]=1;for(var ue=0,le=F.length;ue<le;ue++){var pe=F[ue];G[pe]=s(G[pe],T[ue])}m.push(G)}}else{if(j===0)return[];m.splice(j,1),j-=1,N-=1}else{E[_]=n(E[_],I);for(var D=0,H=F.length;D<H;D++){var P=F[D];E[P]=s(E[P],a(E[_],T[D]))}}}return m.map(de=>new l({data:de.map(L=>[L]),size:[v,1]}))}}),wJ="matAlgo08xS0Sid",_J=["typed","equalScalar"],qb=Se(wJ,_J,r=>{var{typed:e,equalScalar:t}=r;return function(a,s,o){var l=a._values,u=a._index,c=a._ptr,d=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType(),g=s._values,m=s._index,v=s._ptr,x=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(d.length!==x.length)throw new er(d.length,x.length);if(d[0]!==x[0]||d[1]!==x[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+x+")");if(!l||!g)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=d[0],S=d[1],_,N=t,j=0,E=o;typeof h=="string"&&h===b&&h!=="mixed"&&(_=h,N=e.find(t,[_,_]),j=e.convert(0,_),E=e.find(o,[_,_]));for(var T=[],F=[],A=[],R=[],I=[],O,U,D,H,P=0;P<S;P++){A[P]=F.length;var G=P+1;for(U=c[P],D=c[P+1],O=U;O<D;O++)H=u[O],I[H]=G,R[H]=l[O],F.push(H);for(U=v[P],D=v[P+1],O=U;O<D;O++)H=m[O],I[H]===G&&(R[H]=E(R[H],g[O]));for(O=A[P];O<F.length;){H=F[O];var ue=R[H];N(ue,j)?F.splice(O,1):(T.push(ue),O++)}}return A[S]=F.length,a.createSparseMatrix({values:T,index:F,ptr:A,size:[y,S],datatype:h===a._datatype&&b===s._datatype?_:void 0})}}),$b=Se("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(a,s)=>n(t(a),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(a,s)=>n(t(a),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(a,s)=>n(a,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(a,s)=>n(a,t(s)).valueOf())}}),f6="leftShift",NJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],SJ=Se(f6,NJ,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,DenseMatrix:s,concat:o}=r,l=rl({typed:e}),u=Ya({typed:e,equalScalar:n}),c=qb({typed:e,equalScalar:n}),d=Zl({typed:e,DenseMatrix:s}),h=li({typed:e,equalScalar:n}),g=Xa({typed:e}),m=Hr({typed:e,matrix:t,concat:o}),v=$b({typed:e,matrix:t});return e(f6,{"number, number":c8,"BigNumber, BigNumber":VX,"bigint, bigint":(x,b)=>x<<b,"SparseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():h(b,y,x,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():g(b,y,x,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):d(y,b,x,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):g(y,b,x,!0))},v,m({SS:c,DS:l,SD:u}))}),h6="rightArithShift",jJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],EJ=Se(h6,jJ,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,DenseMatrix:s,concat:o}=r,l=rl({typed:e}),u=Ya({typed:e,equalScalar:n}),c=qb({typed:e,equalScalar:n}),d=Zl({typed:e,DenseMatrix:s}),h=li({typed:e,equalScalar:n}),g=Xa({typed:e}),m=Hr({typed:e,matrix:t,concat:o}),v=$b({typed:e,matrix:t});return e(h6,{"number, number":u8,"BigNumber, BigNumber":GX,"bigint, bigint":(x,b)=>x>>b,"SparseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():h(b,y,x,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():g(b,y,x,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):d(y,b,x,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):g(y,b,x,!0))},v,m({SS:c,DS:l,SD:u}))}),m6="rightLogShift",AJ=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],TJ=Se(m6,AJ,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,DenseMatrix:s,concat:o}=r,l=rl({typed:e}),u=Ya({typed:e,equalScalar:n}),c=qb({typed:e,equalScalar:n}),d=Zl({typed:e,DenseMatrix:s}),h=li({typed:e,equalScalar:n}),g=Xa({typed:e}),m=Hr({typed:e,matrix:t,concat:o}),v=$b({typed:e,matrix:t});return e(m6,{"number, number":d8,"SparseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():h(b,y,x,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(x=>(b,y)=>n(y,0)?b.clone():g(b,y,x,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):d(y,b,x,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(x=>(b,y)=>n(b,0)?a(y.size(),y.storage()):g(y,b,x,!0))},v,m({SS:c,DS:l,SD:u}))}),p6="and",CJ=["typed","matrix","equalScalar","zeros","not","concat"],ek=Se(p6,CJ,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,not:s,concat:o}=r,l=Ya({typed:e,equalScalar:n}),u=Dp({typed:e,equalScalar:n}),c=li({typed:e,equalScalar:n}),d=Xa({typed:e}),h=Hr({typed:e,matrix:t,concat:o});return e(p6,{"number, number":Fy,"Complex, Complex":function(m,v){return(m.re!==0||m.im!==0)&&(v.re!==0||v.im!==0)},"BigNumber, BigNumber":function(m,v){return!m.isZero()&&!v.isZero()&&!m.isNaN()&&!v.isNaN()},"bigint, bigint":Fy,"Unit, Unit":e.referToSelf(g=>(m,v)=>g(m.value||0,v.value||0)),"SparseMatrix, any":e.referToSelf(g=>(m,v)=>s(v)?a(m.size(),m.storage()):c(m,v,g,!1)),"DenseMatrix, any":e.referToSelf(g=>(m,v)=>s(v)?a(m.size(),m.storage()):d(m,v,g,!1)),"any, SparseMatrix":e.referToSelf(g=>(m,v)=>s(m)?a(m.size(),m.storage()):c(v,m,g,!0)),"any, DenseMatrix":e.referToSelf(g=>(m,v)=>s(m)?a(m.size(),m.storage()):d(v,m,g,!0)),"Array, any":e.referToSelf(g=>(m,v)=>g(t(m),v).valueOf()),"any, Array":e.referToSelf(g=>(m,v)=>g(m,t(v)).valueOf())},h({SS:u,DS:l}))}),Um="compare",DJ=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],kJ=Se(Um,DJ,r=>{var{typed:e,config:t,equalScalar:n,matrix:a,BigNumber:s,Fraction:o,DenseMatrix:l,concat:u}=r,c=Ai({typed:e}),d=Cp({typed:e,equalScalar:n}),h=Mn({typed:e,DenseMatrix:l}),g=Hr({typed:e,matrix:a,concat:u}),m=$u({typed:e});return e(Um,MJ({typed:e,config:t}),{"boolean, boolean":function(x,b){return x===b?0:x>b?1:-1},"BigNumber, BigNumber":function(x,b){return Ea(x,b,t.relTol,t.absTol)?new s(0):new s(x.cmp(b))},"bigint, bigint":function(x,b){return x===b?0n:x>b?1n:-1n},"Fraction, Fraction":function(x,b){return new o(x.compare(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},m,g({SS:d,DS:c,Ss:h}))}),MJ=Se(Um,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Um,{"number, number":function(a,s){return oi(a,s,t.relTol,t.absTol)?0:a>s?1:-1}})}),Z1,g6;function FJ(){return g6||(g6=1,Z1=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,l=/^0/,u=function(_){return r.insensitive&&(""+_).toLowerCase()||""+_},c=u(e).replace(a,"")||"",d=u(t).replace(a,"")||"",h=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=d.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(c.match(o),16)||h.length!==1&&c.match(s)&&Date.parse(c),v=parseInt(d.match(o),16)||m&&d.match(s)&&Date.parse(d)||null,x,b;if(v){if(m<v)return-1;if(m>v)return 1}for(var y=0,S=Math.max(h.length,g.length);y<S;y++){if(x=!(h[y]||"").match(l)&&parseFloat(h[y])||h[y]||0,b=!(g[y]||"").match(l)&&parseFloat(g[y])||g[y]||0,isNaN(x)!==isNaN(b))return isNaN(x)?1:-1;if(typeof x!=typeof b&&(x+="",b+=""),x<b)return-1;if(x>b)return 1}return 0}),Z1}var OJ=FJ();const Jc=Df(OJ);var x6="compareNatural",BJ=["typed","compare"],RJ=Se(x6,BJ,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(x6,{"any, any":a});function a(u,c){var d=Or(u),h=Or(c),g;if((d==="number"||d==="BigNumber"||d==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return g=t(u,c),g.toString()!=="0"?g>0?1:-1:Jc(d,h);var m=["Array","DenseMatrix","SparseMatrix"];if(m.includes(d)||m.includes(h))return g=s(a,u,c),g!==0?g:Jc(d,h);if(d!==h)return Jc(d,h);if(d==="Complex")return LJ(u,c);if(d==="Unit")return u.equalBase(c)?a(u.value,c.value):o(a,u.formatUnits(),c.formatUnits());if(d==="boolean")return n(u,c);if(d==="string")return Jc(u,c);if(d==="Object")return l(a,u,c);if(d==="null"||d==="undefined")return 0;throw new TypeError('Unsupported type of value "'+d+'"')}function s(u,c,d){return Bl(c)&&Bl(d)?o(u,c.toJSON().values,d.toJSON().values):Bl(c)?s(u,c.toArray(),d):Bl(d)?s(u,c,d.toArray()):Cm(c)?s(u,c.toJSON().data,d):Cm(d)?s(u,c,d.toJSON().data):Array.isArray(c)?Array.isArray(d)?o(u,c,d):s(u,c,[d]):s(u,[c],d)}function o(u,c,d){for(var h=0,g=Math.min(c.length,d.length);h<g;h++){var m=u(c[h],d[h]);if(m!==0)return m}return c.length>d.length?1:c.length<d.length?-1:0}function l(u,c,d){var h=Object.keys(c),g=Object.keys(d);h.sort(Jc),g.sort(Jc);var m=o(u,h,g);if(m!==0)return m;for(var v=0;v<h.length;v++){var x=u(c[h[v]],d[g[v]]);if(x!==0)return x}return 0}});function LJ(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var v6="compareText",IJ=["typed","matrix","concat"];Ey.signature="any, any";var zJ=Se(v6,IJ,r=>{var{typed:e,matrix:t,concat:n}=r,a=Hr({typed:e,matrix:t,concat:n});return e(v6,Ey,a({elop:Ey,Ds:!0}))}),Hm="equal",PJ=["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],qJ=Se(Hm,PJ,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s,SparseMatrix:o}=r,l=Ai({typed:e}),u=ys({typed:e,SparseMatrix:o}),c=Mn({typed:e,DenseMatrix:a}),d=Hr({typed:e,matrix:t,concat:s});return e(Hm,$J({typed:e,equalScalar:n}),d({elop:n,SS:u,DS:l,Ss:c}))}),$J=Se(Hm,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Hm,{"any, any":function(a,s){return a===null?s===null:s===null?a===null:a===void 0?s===void 0:s===void 0?a===void 0:t(a,s)}})}),y6="equalText",UJ=["typed","compareText","isZero"],HJ=Se(y6,UJ,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(y6,{"any, any":function(s,o){return n(t(s,o))}})}),Vm="smaller",VJ=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],GJ=Se(Vm,VJ,r=>{var{typed:e,config:t,bignumber:n,matrix:a,DenseMatrix:s,concat:o,SparseMatrix:l}=r,u=Ai({typed:e}),c=ys({typed:e,SparseMatrix:l}),d=Mn({typed:e,DenseMatrix:s}),h=Hr({typed:e,matrix:a,concat:o}),g=$u({typed:e});function m(v,x){return v.lt(x)&&!Ea(v,x,t.relTol,t.absTol)}return e(Vm,QJ({typed:e,config:t}),{"boolean, boolean":(v,x)=>v<x,"BigNumber, BigNumber":m,"bigint, bigint":(v,x)=>v<x,"Fraction, Fraction":(v,x)=>v.compare(x)===-1,"Fraction, BigNumber":function(x,b){return m(n(x),b)},"BigNumber, Fraction":function(x,b){return m(x,n(b))},"Complex, Complex":function(x,b){throw new TypeError("No ordering relation is defined for complex numbers")}},g,h({SS:c,DS:u,Ss:d}))}),QJ=Se(Vm,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Vm,{"number, number":function(a,s){return a<s&&!oi(a,s,t.relTol,t.absTol)}})}),Gm="smallerEq",WJ=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],KJ=Se(Gm,WJ,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:a,concat:s,SparseMatrix:o}=r,l=Ai({typed:e}),u=ys({typed:e,SparseMatrix:o}),c=Mn({typed:e,DenseMatrix:a}),d=Hr({typed:e,matrix:n,concat:s}),h=$u({typed:e});return e(Gm,XJ({typed:e,config:t}),{"boolean, boolean":(g,m)=>g<=m,"BigNumber, BigNumber":function(m,v){return m.lte(v)||Ea(m,v,t.relTol,t.absTol)},"bigint, bigint":(g,m)=>g<=m,"Fraction, Fraction":(g,m)=>g.compare(m)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:u,DS:l,Ss:c}))}),XJ=Se(Gm,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Gm,{"number, number":function(a,s){return a<=s||oi(a,s,t.relTol,t.absTol)}})}),Qm="larger",YJ=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],ZJ=Se(Qm,YJ,r=>{var{typed:e,config:t,bignumber:n,matrix:a,DenseMatrix:s,concat:o,SparseMatrix:l}=r,u=Ai({typed:e}),c=ys({typed:e,SparseMatrix:l}),d=Mn({typed:e,DenseMatrix:s}),h=Hr({typed:e,matrix:a,concat:o}),g=$u({typed:e});function m(v,x){return v.gt(x)&&!Ea(v,x,t.relTol,t.absTol)}return e(Qm,JJ({typed:e,config:t}),{"boolean, boolean":(v,x)=>v>x,"BigNumber, BigNumber":m,"bigint, bigint":(v,x)=>v>x,"Fraction, Fraction":(v,x)=>v.compare(x)===1,"Fraction, BigNumber":function(x,b){return m(n(x),b)},"BigNumber, Fraction":function(x,b){return m(x,n(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},g,h({SS:c,DS:u,Ss:d}))}),JJ=Se(Qm,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Qm,{"number, number":function(a,s){return a>s&&!oi(a,s,t.relTol,t.absTol)}})}),Wm="largerEq",eee=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],tee=Se(Wm,eee,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:a,concat:s,SparseMatrix:o}=r,l=Ai({typed:e}),u=ys({typed:e,SparseMatrix:o}),c=Mn({typed:e,DenseMatrix:a}),d=Hr({typed:e,matrix:n,concat:s}),h=$u({typed:e});return e(Wm,ree({typed:e,config:t}),{"boolean, boolean":(g,m)=>g>=m,"BigNumber, BigNumber":function(m,v){return m.gte(v)||Ea(m,v,t.relTol,t.absTol)},"bigint, bigint":function(m,v){return m>=v},"Fraction, Fraction":(g,m)=>g.compare(m)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:u,DS:l,Ss:c}))}),ree=Se(Wm,["typed","config"],r=>{var{typed:e,config:t}=r;return e(Wm,{"number, number":function(a,s){return a>=s||oi(a,s,t.relTol,t.absTol)}})}),b6="deepEqual",nee=["typed","equal"],iee=Se(b6,nee,r=>{var{typed:e,equal:t}=r;return e(b6,{"any, any":function(s,o){return n(s.valueOf(),o.valueOf())}});function n(a,s){if(Array.isArray(a))if(Array.isArray(s)){var o=a.length;if(o!==s.length)return!1;for(var l=0;l<o;l++)if(!n(a[l],s[l]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(a,s)}}),Km="unequal",aee=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],see=Se(Km,aee,r=>{var{typed:e,config:t,equalScalar:n,matrix:a,DenseMatrix:s,concat:o,SparseMatrix:l}=r,u=Ai({typed:e}),c=ys({typed:e,SparseMatrix:l}),d=Mn({typed:e,DenseMatrix:s}),h=Hr({typed:e,matrix:a,concat:o});return e(Km,oee({typed:e,equalScalar:n}),h({elop:g,SS:c,DS:u,Ss:d}));function g(m,v){return!n(m,v)}}),oee=Se(Km,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(Km,{"any, any":function(a,s){return a===null?s!==null:s===null?a!==null:a===void 0?s!==void 0:s===void 0?a!==void 0:!t(a,s)}})}),w6="partitionSelect",lee=["typed","isNumeric","isNaN","compare"],cee=Se(w6,lee,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:a}=r,s=a,o=(c,d)=>-a(c,d);return e(w6,{"Array | Matrix, number":function(d,h){return l(d,h,s)},"Array | Matrix, number, string":function(d,h,g){if(g==="asc")return l(d,h,s);if(g==="desc")return l(d,h,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":l});function l(c,d,h){if(!kt(d)||d<0)throw new Error("k must be a non-negative integer");if(Lt(c)){var g=c.size();if(g.length>1)throw new Error("Only one dimensional matrices supported");return u(c.valueOf(),d,h)}if(Array.isArray(c))return u(c,d,h)}function u(c,d,h){if(d>=c.length)throw new Error("k out of bounds");for(var g=0;g<c.length;g++)if(t(c[g])&&n(c[g]))return c[g];for(var m=0,v=c.length-1;m<v;){for(var x=m,b=v,y=c[Math.floor(Math.random()*(v-m+1))+m];x<b;)if(h(c[x],y)>=0){var S=c[b];c[b]=c[x],c[x]=S,--b}else++x;h(c[x],y)>0&&--x,d<=x?v=x:m=x+1}return c[d]}}),_6="sort",uee=["typed","matrix","compare","compareNatural"],dee=Se(_6,uee,r=>{var{typed:e,matrix:t,compare:n,compareNatural:a}=r,s=n,o=(d,h)=>-n(d,h);return e(_6,{Array:function(h){return u(h),h.sort(s)},Matrix:function(h){return c(h),t(h.toArray().sort(s),h.storage())},"Array, function":function(h,g){return u(h),h.sort(g)},"Matrix, function":function(h,g){return c(h),t(h.toArray().sort(g),h.storage())},"Array, string":function(h,g){return u(h),h.sort(l(g))},"Matrix, string":function(h,g){return c(h),t(h.toArray().sort(l(g)),h.storage())}});function l(d){if(d==="asc")return s;if(d==="desc")return o;if(d==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function u(d){if(Ut(d).length!==1)throw new Error("One dimensional array expected")}function c(d){if(d.size().length!==1)throw new Error("One dimensional matrix expected")}}),N6="max",fee=["typed","config","numeric","larger","isNaN"],tk=Se(N6,fee,r=>{var{typed:e,config:t,numeric:n,larger:a,isNaN:s}=r;return e(N6,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(c,d){return Tp(c,d.valueOf(),o)},"...":function(c){if(zu(c))throw new TypeError("Scalar values expected in function max");return l(c)}});function o(u,c){try{return a(u,c)?u:c}catch(d){throw Ei(d,"max",c)}}function l(u){var c;if(Xo(u,function(d){try{(s(d)||c===void 0||a(d,c))&&(c=d)}catch(h){throw Ei(h,"max",d)}}),c===void 0)throw new Error("Cannot calculate max of an empty array");return typeof c=="string"&&(c=n(c,el(c,t))),c}}),S6="min",hee=["typed","config","numeric","smaller","isNaN"],rk=Se(S6,hee,r=>{var{typed:e,config:t,numeric:n,smaller:a,isNaN:s}=r;return e(S6,{"Array | Matrix":l,"Array | Matrix, number | BigNumber":function(c,d){return Tp(c,d.valueOf(),o)},"...":function(c){if(zu(c))throw new TypeError("Scalar values expected in function min");return l(c)}});function o(u,c){try{return a(u,c)?u:c}catch(d){throw Ei(d,"min",c)}}function l(u){var c;if(Xo(u,function(d){try{(s(d)||c===void 0||a(d,c))&&(c=d)}catch(h){throw Ei(h,"min",d)}}),c===void 0)throw new Error("Cannot calculate min of an empty array");return typeof c=="string"&&(c=n(c,el(c,t))),c}}),mee="ImmutableDenseMatrix",pee=["smaller","DenseMatrix"],gee=Se(mee,pee,r=>{var{smaller:e,DenseMatrix:t}=r;function n(a,s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!fi(s))throw new Error("Invalid datatype: "+s);if(Lt(a)||Mr(a)){var o=new t(a,s);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(a&&Mr(a.data)&&Mr(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+Or(a)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(a){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,a);return Lt(s)?new n({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Ht(this._data),size:Ht(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(a){return new n(a)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(s){(a===null||e(s,a))&&(a=s)}),this._min=a!==null?a:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(s){(a===null||e(a,s))&&(a=s)}),this._max=a!==null?a:void 0}return this._max},n},{isClass:!0}),xee="Index",vee=["ImmutableDenseMatrix","getMatrixDataType"],yee=Se(xee,vee,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,l=arguments.length;o<l;o++){var u=arguments[o],c=Mr(u),d=Lt(u),h=typeof u,g=null;if(Tb(u))this._dimensions.push(u),this._isScalar=!1;else if(c||d){var m=void 0;t(u)==="boolean"?(c&&(m=a(j6(u).valueOf())),d&&(m=a(j6(u._data).valueOf())),g=u.valueOf().length):m=a(u.valueOf()),this._dimensions.push(m);var v=m.size();(v.length!==1||v[0]!==1||g!==null)&&(this._isScalar=!1)}else if(h==="number")this._dimensions.push(a([u]));else if(h==="bigint")this._dimensions.push(a([Number(u)]));else if(h==="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(g)}}n.prototype.type="Index",n.prototype.isIndex=!0;function a(s){for(var o=0,l=s.length;o<l;o++)if(typeof s[o]!="number"||!kt(s[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(s)}return n.prototype.clone=function(){var s=new n;return s._dimensions=Ht(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},n.create=function(s){var o=new n;return n.apply(o,s),o},n.prototype.size=function(){for(var s=[],o=0,l=this._dimensions.length;o<l;o++){var u=this._dimensions[o];s[o]=typeof u=="string"?1:u.size()[0]}return s},n.prototype.max=function(){for(var s=[],o=0,l=this._dimensions.length;o<l;o++){var u=this._dimensions[o];s[o]=typeof u=="string"?u:u.max()}return s},n.prototype.min=function(){for(var s=[],o=0,l=this._dimensions.length;o<l;o++){var u=this._dimensions[o];s[o]=typeof u=="string"?u:u.min()}return s},n.prototype.forEach=function(s){for(var o=0,l=this._dimensions.length;o<l;o++)s(this._dimensions[o],o,this)},n.prototype.dimension=function(s){return typeof s!="number"?null:this._dimensions[s]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var s=[],o=0,l=this._dimensions.length;o<l;o++){var u=this._dimensions[o];s.push(typeof u=="string"?u:u.toArray())}return s},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var s=[],o=0,l=this._dimensions.length;o<l;o++){var u=this._dimensions[o];typeof u=="string"?s.push(JSON.stringify(u)):s.push(u.toString())}return"["+s.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(s){return n.create(s.dimensions)},n},{isClass:!0});function j6(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var bee="FibonacciHeap",wee=["smaller","larger"],_ee=Se(bee,wee,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(d,h){var g={key:d,value:h,degree:0};if(this._minimum){var m=this._minimum;g.left=m,g.right=m.right,m.right=g,g.right.left=g,e(d,m.key)&&(this._minimum=g)}else g.left=g,g.right=g,this._minimum=g;return this._size++,g},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var d=this._minimum;if(d===null)return d;for(var h=this._minimum,g=d.degree,m=d.child;g>0;){var v=m.right;m.left.right=m.right,m.right.left=m.left,m.left=h,m.right=h.right,h.right=m,m.right.left=m,m.parent=null,m=v,g--}return d.left.right=d.right,d.right.left=d.left,d===d.right?h=null:(h=d.right,h=c(h,this._size)),this._size--,this._minimum=h,d},a.prototype.remove=function(d){this._minimum=s(this._minimum,d,-1),this.extractMinimum()};function s(d,h,g){h.key=g;var m=h.parent;return m&&e(h.key,m.key)&&(o(d,h,m),l(d,m)),e(h.key,d.key)&&(d=h),d}function o(d,h,g){h.left.right=h.right,h.right.left=h.left,g.degree--,g.child===h&&(g.child=h.right),g.degree===0&&(g.child=null),h.left=d,h.right=d.right,d.right=h,h.right.left=h,h.parent=null,h.mark=!1}function l(d,h){var g=h.parent;g&&(h.mark?(o(d,h,g),l(g)):h.mark=!0)}var u=function(h,g){h.left.right=h.right,h.right.left=h.left,h.parent=g,g.child?(h.left=g.child,h.right=g.child.right,g.child.right=h,h.right.left=h):(g.child=h,h.right=h,h.left=h),g.degree++,h.mark=!1};function c(d,h){var g=Math.floor(Math.log(h)*n)+1,m=new Array(g),v=0,x=d;if(x)for(v++,x=x.right;x!==d;)v++,x=x.right;for(var b;v>0;){for(var y=x.degree,S=x.right;b=m[y],!!b;){if(t(x.key,b.key)){var _=b;b=x,x=_}u(b,x),m[y]=null,y++}m[y]=x,x=S,v--}d=null;for(var N=0;N<g;N++)b=m[N],b&&(d?(b.left.right=b.right,b.right.left=b.left,b.left=d,b.right=d.right,d.right=b,b.right.left=b,e(b.key,d.key)&&(d=b)):d=b);return d}return a},{isClass:!0}),Nee="Spa",See=["addScalar","equalScalar","FibonacciHeap"],jee=Se(Nee,See,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(s,o){if(this._values[s])this._values[s].value=o;else{var l=this._heap.insert(s,o);this._values[s]=l}},a.prototype.get=function(s){var o=this._values[s];return o?o.value:0},a.prototype.accumulate=function(s,o){var l=this._values[s];l?l.value=e(l.value,o):(l=this._heap.insert(s,o),this._values[s]=l)},a.prototype.forEach=function(s,o,l){var u=this._heap,c=this._values,d=[],h=u.extractMinimum();for(h&&d.push(h);h&&h.key<=o;)h.key>=s&&(t(h.value,0)||l(h.key,h.value,this)),h=u.extractMinimum(),h&&d.push(h);for(var g=0;g<d.length;g++){var m=d[g];h=u.insert(m.key,m.value),c[h.key]=h}},a.prototype.swap=function(s,o){var l=this._values[s],u=this._values[o];if(!l&&u)l=this._heap.insert(s,u.value),this._heap.remove(u),this._values[s]=l,this._values[o]=void 0;else if(l&&!u)u=this._heap.insert(o,l.value),this._heap.remove(l),this._values[o]=u,this._values[s]=void 0;else if(l&&u){var c=l.value;l.value=u.value,u.value=c}},a},{isClass:!0});function Eee(r){var e=0,t=1,n=Object.create(null),a=Object.create(null),s=0,o=function(u){var c=a[u];if(c&&(delete n[c],delete a[u],--e,t===c)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(u){var c=a[u],d=++s;if(n[d]=u,a[u]=d,!c)return++e,e<=r?void 0:(u=n[t],o(u),u);if(delete n[c],t===c)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:o,clear:function(){e=s=0,t=1,n=Object.create(null),a=Object.create(null)}}}function Gf(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:Eee(t||Number.POSITIVE_INFINITY)});for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=e(a);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var l=r.apply(r,a);return n.cache.values.set(o,l),n.cache.values.delete(n.cache.lru.hit(o)),l}}var Aee=Gf(function(r){return new r(1).exp()},{hasher:kp}),Tee=Gf(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:kp}),Ub=Gf(function(r){return r.acos(-1)},{hasher:kp}),Cee=Gf(function(r){return Ub(r).times(2)},{hasher:kp});function kp(r){return r[0].precision}function E6(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function J1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E6(Object(t),!0).forEach(function(n){Sn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):E6(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Dee="Unit",kee=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","toBest","number","Complex","BigNumber","Fraction"],Mee=Se(Dee,kee,r=>{var{on:e,config:t,addScalar:n,subtractScalar:a,multiplyScalar:s,divideScalar:o,pow:l,abs:u,fix:c,round:d,equal:h,isNumeric:g,format:m,toBest:v,number:x,Complex:b,BigNumber:y,Fraction:S}=r,_=x;function N(Z,J){if(!(this instanceof N))throw new Error("Constructor must be called with the new operator");if(!(Z==null||g(Z)||Ws(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,J===void 0)this.units=[],this.dimensions=X.map(te=>0);else if(typeof J=="string"){var K=N.parse(J);this.units=K.units,this.dimensions=K.dimensions}else if(Ji(J)&&J.value===null)this.fixPrefix=J.fixPrefix,this.skipAutomaticSimplification=J.skipAutomaticSimplification,this.dimensions=J.dimensions.slice(0),this.units=J.units.map(te=>kn({},te));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Z)}Object.defineProperty(N,"name",{value:"Unit"}),N.prototype.constructor=N,N.prototype.type="Unit",N.prototype.isUnit=!0;var j,E,T;function F(){for(;T===" "||T==="	";)I()}function A(Z){return Z>="0"&&Z<="9"||Z==="."}function R(Z){return Z>="0"&&Z<="9"}function I(){E++,T=j.charAt(E)}function O(Z){E=Z,T=j.charAt(E)}function U(){var Z="",J=E;if(T==="+"?I():T==="-"&&(Z+=T,I()),!A(T))return O(J),null;if(T==="."){if(Z+=T,I(),!R(T))return O(J),null}else{for(;R(T);)Z+=T,I();T==="."&&(Z+=T,I())}for(;R(T);)Z+=T,I();if(T==="E"||T==="e"){var K="",te=E;if(K+=T,I(),(T==="+"||T==="-")&&(K+=T,I()),!R(T))return O(te),Z;for(Z=Z+K;R(T);)Z+=T,I()}return Z}function D(){for(var Z="";R(T)||N.isValidAlpha(T);)Z+=T,I();var J=Z.charAt(0);return N.isValidAlpha(J)?Z:null}function H(Z){return T===Z?(I(),Z):null}N.parse=function(Z,J){if(J=J||{},j=Z,E=-1,T="",typeof j!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var K=new N;K.units=[];var te=1,me=!1;I(),F();var fe=U(),xe=null;if(fe){if(t.number==="BigNumber")xe=new y(fe);else if(t.number==="Fraction")try{xe=new S(fe)}catch{xe=parseFloat(fe)}else xe=parseFloat(fe);F(),H("*")?(te=1,me=!0):H("/")&&(te=-1,me=!0)}for(var _e=[],je=1;;){for(F();T==="(";)_e.push(te),je*=te,te=1,I(),F();var Be=void 0;if(T){var Re=T;if(Be=D(),Be===null)throw new SyntaxError('Unexpected "'+Re+'" in "'+j+'" at index '+E.toString())}else break;var ze=P(Be);if(ze===null)throw new SyntaxError('Unit "'+Be+'" not found.');var Ye=te*je;if(F(),H("^")){F();var Le=U();if(Le===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');Ye*=Le}K.units.push({unit:ze.unit,prefix:ze.prefix,power:Ye});for(var it=0;it<X.length;it++)K.dimensions[it]+=(ze.unit.dimensions[it]||0)*Ye;for(F();T===")";){if(_e.length===0)throw new SyntaxError('Unmatched ")" in "'+j+'" at index '+E.toString());je/=_e.pop(),I(),F()}if(me=!1,H("*")?(te=1,me=!0):H("/")?(te=-1,me=!0):te=1,ze.unit.base){var ht=ze.unit.base.key;ie.auto[ht]={unit:ze.unit,prefix:ze.prefix}}}if(F(),T)throw new SyntaxError('Could not parse: "'+Z+'"');if(me)throw new SyntaxError('Trailing characters: "'+Z+'"');if(_e.length!==0)throw new SyntaxError('Unmatched "(" in "'+j+'"');if(K.units.length===0&&!J.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return K.value=xe!==void 0?K._normalize(xe):null,K},N.prototype.clone=function(){var Z=new N;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=Ht(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var J=0;J<this.units.length;J++){Z.units[J]={};for(var K in this.units[J])Ct(this.units[J],K)&&(Z.units[J][K]=this.units[J][K])}return Z},N.prototype.valueType=function(){return Or(this.value)},N.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},N.prototype._normalize=function(Z){if(Z==null||this.units.length===0)return Z;for(var J=Z,K=N._getNumberConverter(Or(Z)),te=0;te<this.units.length;te++){var me=K(this.units[te].unit.value),fe=K(this.units[te].prefix.value),xe=K(this.units[te].power);J=s(J,l(s(me,fe),xe))}return J},N.prototype._denormalize=function(Z,J){if(Z==null||this.units.length===0)return Z;for(var K=Z,te=N._getNumberConverter(Or(Z)),me=0;me<this.units.length;me++){var fe=te(this.units[me].unit.value),xe=te(this.units[me].prefix.value),_e=te(this.units[me].power);K=o(K,l(s(fe,xe),_e))}return K};var P=Gf(Z=>{if(Ct(z,Z)){var J=z[Z],K=J.prefixes[""];return{unit:J,prefix:K}}for(var te in z)if(Ct(z,te)&&LQ(Z,te)){var me=z[te],fe=Z.length-te.length,xe=Z.substring(0,fe),_e=Ct(me.prefixes,xe)?me.prefixes[xe]:void 0;if(_e!==void 0)return{unit:me,prefix:_e}}return null},{hasher:Z=>Z[0],limit:100});N.isValuelessUnit=function(Z){return P(Z)!==null},N.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=V[Z]),!Z)return!1;for(var J=0;J<X.length;J++)if(Math.abs((this.dimensions[J]||0)-(Z.dimensions[J]||0))>1e-12)return!1;return!0},N.prototype.equalBase=function(Z){for(var J=0;J<X.length;J++)if(Math.abs((this.dimensions[J]||0)-(Z.dimensions[J]||0))>1e-12)return!1;return!0},N.prototype.equals=function(Z){return this.equalBase(Z)&&h(this.value,Z.value)},N.prototype.multiply=function(Z){for(var J=this.clone(),K=Ji(Z)?Z:new N(Z),te=0;te<X.length;te++)J.dimensions[te]=(this.dimensions[te]||0)+(K.dimensions[te]||0);for(var me=0;me<K.units.length;me++){var fe=J1({},K.units[me]);J.units.push(fe)}if(this.value!==null||K.value!==null){var xe=this.value===null?this._normalize(ue(K.value)):this.value,_e=K.value===null?K._normalize(ue(this.value)):K.value;J.value=s(xe,_e)}else J.value=null;return Ji(Z)&&(J.skipAutomaticSimplification=!1),G(J)},N.prototype.divideInto=function(Z){return new N(Z).divide(this)},N.prototype.divide=function(Z){for(var J=this.clone(),K=Ji(Z)?Z:new N(Z),te=0;te<X.length;te++)J.dimensions[te]=(this.dimensions[te]||0)-(K.dimensions[te]||0);for(var me=0;me<K.units.length;me++){var fe=J1(J1({},K.units[me]),{},{power:-K.units[me].power});J.units.push(fe)}if(this.value!==null||K.value!==null){var xe=this.value===null?this._normalize(ue(K.value)):this.value,_e=K.value===null?K._normalize(ue(this.value)):K.value;J.value=o(xe,_e)}else J.value=null;return Ji(Z)&&(J.skipAutomaticSimplification=!1),G(J)},N.prototype.pow=function(Z){for(var J=this.clone(),K=0;K<X.length;K++)J.dimensions[K]=(this.dimensions[K]||0)*Z;for(var te=0;te<J.units.length;te++)J.units[te].power*=Z;return J.value!==null?J.value=l(J.value,Z):J.value=null,J.skipAutomaticSimplification=!1,G(J)};function G(Z){return Z.equalBase(V.NONE)&&Z.value!==null&&!t.predictable?Z.value:Z}function ue(Z){var J=N._getNumberConverter(Or(Z));return J(1)}N.prototype.abs=function(){var Z=this.clone();if(Z.value!==null)if(Z._isDerived()||Z.units.length===0||Z.units[0].unit.offset===0)Z.value=u(Z.value);else{var J=Z._numberConverter(),K=J(Z.units[0].unit.value),te=J(Z.units[0].unit.offset),me=s(K,te);Z.value=a(u(n(Z.value,me)),me)}for(var fe in Z.units)(Z.units[fe].unit.name==="VA"||Z.units[fe].unit.name==="VAR")&&(Z.units[fe].unit=z.W);return Z},N.prototype.to=function(Z){var J=this.value===null?this._normalize(1):this.value,K;if(typeof Z=="string")K=N.parse(Z);else if(Ji(Z))K=Z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(K))throw new Error("Units do not match ('".concat(K.toString(),"' != '").concat(this.toString(),"')"));if(K.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||K.units.length===0||this.units[0].unit.offset===K.units[0].unit.offset)K.value=Ht(J);else{var te=N._getNumberConverter(Or(J)),me=this.units[0].unit.value,fe=this.units[0].unit.offset,xe=s(me,fe),_e=K.units[0].unit.value,je=K.units[0].unit.offset,Be=s(_e,je);K.value=n(J,te(a(xe,Be)))}return K.fixPrefix=!0,K.skipAutomaticSimplification=!0,K},N.prototype.toNumber=function(Z){return _(this.toNumeric(Z))},N.prototype.toNumeric=function(Z){var J;return Z?J=this.to(Z):J=this.clone(),J._isDerived()||J.units.length===0?J._denormalize(J.value):J._denormalize(J.value,J.units[0].prefix.value)},N.prototype.toString=function(){return this.format()},N.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},N.fromJSON=function(Z){var J,K=new N(Z.value,(J=Z.unit)!==null&&J!==void 0?J:void 0);return K.fixPrefix=Z.fixPrefix||!1,K},N.prototype.valueOf=N.prototype.toString,N.prototype.simplify=function(){var Z=this.clone(),J=[],K;for(var te in oe)if(Ct(oe,te)&&Z.hasBase(V[te])){K=te;break}if(K==="NONE")Z.units=[];else{var me;if(K&&Ct(oe,K)&&(me=oe[K]),me)Z.units=[{unit:me.unit,prefix:me.prefix,power:1}];else{for(var fe=!1,xe=0;xe<X.length;xe++){var _e=X[xe];Math.abs(Z.dimensions[xe]||0)>1e-12&&(Ct(oe,_e)?J.push({unit:oe[_e].unit,prefix:oe[_e].prefix,power:Z.dimensions[xe]||0}):fe=!0)}J.length<Z.units.length&&!fe&&(Z.units=J)}}return Z},N.prototype.toSI=function(){for(var Z=this.clone(),J=[],K=0;K<X.length;K++){var te=X[K];if(Math.abs(Z.dimensions[K]||0)>1e-12)if(Ct(ie.si,te))J.push({unit:ie.si[te].unit,prefix:ie.si[te].prefix,power:Z.dimensions[K]||0});else throw new Error("Cannot express custom unit "+te+" in SI units")}return Z.units=J,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,this.value!==null?(Z.value=null,this.to(Z)):Z},N.prototype.formatUnits=function(){for(var Z="",J="",K=0,te=0,me=0;me<this.units.length;me++)this.units[me].power>0?(K++,Z+=" "+this.units[me].prefix.name+this.units[me].unit.name,Math.abs(this.units[me].power-1)>1e-15&&(Z+="^"+this.units[me].power)):this.units[me].power<0&&te++;if(te>0)for(var fe=0;fe<this.units.length;fe++)this.units[fe].power<0&&(K>0?(J+=" "+this.units[fe].prefix.name+this.units[fe].unit.name,Math.abs(this.units[fe].power+1)>1e-15&&(J+="^"+-this.units[fe].power)):(J+=" "+this.units[fe].prefix.name+this.units[fe].unit.name,J+="^"+this.units[fe].power));Z=Z.substr(1),J=J.substr(1),K>1&&te>0&&(Z="("+Z+")"),te>1&&K>0&&(J="("+J+")");var xe=Z;return K>0&&te>0&&(xe+=" / "),xe+=J,xe},N.prototype.toBest=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z&&!Array.isArray(Z))throw new Error("Invalid unit type. Expected string or Unit.");var K=this.units[0].unit.prefixes;if(Z&&Z.length>0){var te=Z.map(xe=>{var _e=null;if(typeof xe=="string"){if(_e=N.parse(xe),!_e)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!Ji(xe))throw new Error("Invalid unit type. Expected compatible string or Unit.");_e===null&&(_e=xe.clone());try{return this.to(_e.formatUnits()),_e}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),me=te.map(xe=>xe.units[0].prefix);this.units[0].unit.prefixes=me.reduce((xe,_e)=>(xe[_e.name]=_e,xe),{}),this.units[0].prefix=me[0]}var fe=le(this,J).simp;return this.units[0].unit.prefixes=K,fe.fixPrefix=!0,fe},N.prototype.format=function(Z){var{simp:J,valueStr:K,unitStr:te}=le(this,Z),me=K;return J.value&&Ws(J.value)&&(me="("+me+")"),te.length>0&&me.length>0&&(me+=" "),me+=te,me};function le(Z){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=Z.skipAutomaticSimplification||Z.value===null?Z.clone():Z.simplify();pe(K),de(K,J.offset);var te=K._denormalize(K.value),me=K.value!==null?m(te,J||{}):"",fe=K.formatUnits();return{simp:K,valueStr:me,unitStr:fe}}function pe(Z){var J=!1;typeof Z.value<"u"&&Z.value!==null&&Ws(Z.value)&&(J=Math.abs(Z.value.re)<1e-14);for(var K in Z.units)Ct(Z.units,K)&&Z.units[K].unit&&(Z.units[K].unit.name==="VA"&&J?Z.units[K].unit=z.VAR:Z.units[K].unit.name==="VAR"&&!J&&(Z.units[K].unit=z.VA))}function de(Z,J){Z.units.length===1&&!Z.fixPrefix&&Math.abs(Z.units[0].power-Math.round(Z.units[0].power))<1e-14&&(Z.units[0].prefix=Z._bestPrefix(J))}N.prototype._bestPrefix=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var J=this.value!==null?u(this.value):0,K=u(this.units[0].unit.value),te=this.units[0].prefix;if(J===0)return te;var me=this.units[0].power,fe=Math.log(J/Math.pow(te.value*K,me))/Math.LN10-Z;if(fe>-2.200001&&fe<1.800001)return te;fe=Math.abs(fe);var xe=this.units[0].unit.prefixes;for(var _e in xe)if(Ct(xe,_e)){var je=xe[_e];if(je.scientific){var Be=Math.abs(Math.log(J/Math.pow(je.value*K,me))/Math.LN10-Z);(Be<fe||Be===fe&&je.name.length<te.name.length)&&(te=je,fe=Be)}}return te},N.prototype.splitUnit=function(Z){for(var J=this.clone(),K=[],te=0;te<Z.length&&(J=J.to(Z[te]),te!==Z.length-1);te++){var me=J.toNumeric(),fe=d(me),xe=void 0,_e=h(fe,me);_e?xe=fe:xe=c(J.toNumeric());var je=new N(xe,Z[te].toString());K.push(je),J=a(J,je)}for(var Be=0,Re=0;Re<K.length;Re++)Be=n(Be,K[Re].value);return h(Be,this.value)&&(J.value=0),K.push(J),K};var L={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};L.SHORTLONG=kn({},L.SHORT,L.LONG),L.BINARY_SHORT=kn({},L.BINARY_SHORT_SI,L.BINARY_SHORT_IEC),L.BINARY_LONG=kn({},L.BINARY_LONG_SI,L.BINARY_LONG_IEC);var X=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],V={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var se in V)Ct(V,se)&&(V[se].key=se);var ae={},W={name:"",base:ae,value:1,offset:0,dimensions:X.map(Z=>0)},z={meter:{name:"meter",base:V.LENGTH,prefixes:L.LONG,value:1,offset:0},inch:{name:"inch",base:V.LENGTH,prefixes:L.NONE,value:.0254,offset:0},foot:{name:"foot",base:V.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yard:{name:"yard",base:V.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mile:{name:"mile",base:V.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},link:{name:"link",base:V.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rod:{name:"rod",base:V.LENGTH,prefixes:L.NONE,value:5.0292,offset:0},chain:{name:"chain",base:V.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:V.LENGTH,prefixes:L.NONE,value:1e-10,offset:0},m:{name:"m",base:V.LENGTH,prefixes:L.SHORT,value:1,offset:0},in:{name:"in",base:V.LENGTH,prefixes:L.NONE,value:.0254,offset:0},ft:{name:"ft",base:V.LENGTH,prefixes:L.NONE,value:.3048,offset:0},yd:{name:"yd",base:V.LENGTH,prefixes:L.NONE,value:.9144,offset:0},mi:{name:"mi",base:V.LENGTH,prefixes:L.NONE,value:1609.344,offset:0},li:{name:"li",base:V.LENGTH,prefixes:L.NONE,value:.201168,offset:0},rd:{name:"rd",base:V.LENGTH,prefixes:L.NONE,value:5.02921,offset:0},ch:{name:"ch",base:V.LENGTH,prefixes:L.NONE,value:20.1168,offset:0},mil:{name:"mil",base:V.LENGTH,prefixes:L.NONE,value:254e-7,offset:0},m2:{name:"m2",base:V.SURFACE,prefixes:L.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:V.SURFACE,prefixes:L.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:V.SURFACE,prefixes:L.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:V.SURFACE,prefixes:L.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:V.SURFACE,prefixes:L.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:V.SURFACE,prefixes:L.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:V.SURFACE,prefixes:L.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:V.SURFACE,prefixes:L.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:V.SURFACE,prefixes:L.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:V.SURFACE,prefixes:L.NONE,value:1e4,offset:0},m3:{name:"m3",base:V.VOLUME,prefixes:L.CUBIC,value:1,offset:0},L:{name:"L",base:V.VOLUME,prefixes:L.SHORT,value:.001,offset:0},l:{name:"l",base:V.VOLUME,prefixes:L.SHORT,value:.001,offset:0},litre:{name:"litre",base:V.VOLUME,prefixes:L.LONG,value:.001,offset:0},cuin:{name:"cuin",base:V.VOLUME,prefixes:L.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:V.VOLUME,prefixes:L.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:V.VOLUME,prefixes:L.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:V.VOLUME,prefixes:L.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:V.VOLUME,prefixes:L.NONE,value:15e-6,offset:0},drop:{name:"drop",base:V.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:V.VOLUME,prefixes:L.NONE,value:5e-8,offset:0},minim:{name:"minim",base:V.VOLUME,prefixes:L.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:V.VOLUME,prefixes:L.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:V.VOLUME,prefixes:L.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:V.VOLUME,prefixes:L.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:V.VOLUME,prefixes:L.NONE,value:1e-6,offset:0},cup:{name:"cup",base:V.VOLUME,prefixes:L.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:V.VOLUME,prefixes:L.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:V.VOLUME,prefixes:L.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:V.VOLUME,prefixes:L.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:V.VOLUME,prefixes:L.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:V.VOLUME,prefixes:L.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:V.VOLUME,prefixes:L.NONE,value:.238480942392,offset:0},g:{name:"g",base:V.MASS,prefixes:L.SHORT,value:.001,offset:0},gram:{name:"gram",base:V.MASS,prefixes:L.LONG,value:.001,offset:0},ton:{name:"ton",base:V.MASS,prefixes:L.SHORT,value:907.18474,offset:0},t:{name:"t",base:V.MASS,prefixes:L.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:V.MASS,prefixes:L.LONG,value:1e3,offset:0},grain:{name:"grain",base:V.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:V.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:V.MASS,prefixes:L.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:V.MASS,prefixes:L.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:V.MASS,prefixes:L.NONE,value:45.359237,offset:0},stick:{name:"stick",base:V.MASS,prefixes:L.NONE,value:.115,offset:0},stone:{name:"stone",base:V.MASS,prefixes:L.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:V.MASS,prefixes:L.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:V.MASS,prefixes:L.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:V.MASS,prefixes:L.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:V.MASS,prefixes:L.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:V.MASS,prefixes:L.NONE,value:45.359237,offset:0},s:{name:"s",base:V.TIME,prefixes:L.SHORT,value:1,offset:0},min:{name:"min",base:V.TIME,prefixes:L.NONE,value:60,offset:0},h:{name:"h",base:V.TIME,prefixes:L.NONE,value:3600,offset:0},second:{name:"second",base:V.TIME,prefixes:L.LONG,value:1,offset:0},sec:{name:"sec",base:V.TIME,prefixes:L.LONG,value:1,offset:0},minute:{name:"minute",base:V.TIME,prefixes:L.NONE,value:60,offset:0},hour:{name:"hour",base:V.TIME,prefixes:L.NONE,value:3600,offset:0},day:{name:"day",base:V.TIME,prefixes:L.NONE,value:86400,offset:0},week:{name:"week",base:V.TIME,prefixes:L.NONE,value:7*86400,offset:0},month:{name:"month",base:V.TIME,prefixes:L.NONE,value:2629800,offset:0},year:{name:"year",base:V.TIME,prefixes:L.NONE,value:31557600,offset:0},decade:{name:"decade",base:V.TIME,prefixes:L.NONE,value:315576e3,offset:0},century:{name:"century",base:V.TIME,prefixes:L.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:V.TIME,prefixes:L.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:V.FREQUENCY,prefixes:L.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:V.FREQUENCY,prefixes:L.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:V.ANGLE,prefixes:L.SHORT,value:1,offset:0},radian:{name:"radian",base:V.ANGLE,prefixes:L.LONG,value:1,offset:0},deg:{name:"deg",base:V.ANGLE,prefixes:L.SHORT,value:null,offset:0},degree:{name:"degree",base:V.ANGLE,prefixes:L.LONG,value:null,offset:0},grad:{name:"grad",base:V.ANGLE,prefixes:L.SHORT,value:null,offset:0},gradian:{name:"gradian",base:V.ANGLE,prefixes:L.LONG,value:null,offset:0},cycle:{name:"cycle",base:V.ANGLE,prefixes:L.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:V.ANGLE,prefixes:L.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:V.ANGLE,prefixes:L.NONE,value:null,offset:0},A:{name:"A",base:V.CURRENT,prefixes:L.SHORT,value:1,offset:0},ampere:{name:"ampere",base:V.CURRENT,prefixes:L.LONG,value:1,offset:0},K:{name:"K",base:V.TEMPERATURE,prefixes:L.SHORT,value:1,offset:0},degC:{name:"degC",base:V.TEMPERATURE,prefixes:L.SHORT,value:1,offset:273.15},degF:{name:"degF",base:V.TEMPERATURE,prefixes:L.SHORT,value:new S(5,9),offset:459.67},degR:{name:"degR",base:V.TEMPERATURE,prefixes:L.SHORT,value:new S(5,9),offset:0},kelvin:{name:"kelvin",base:V.TEMPERATURE,prefixes:L.LONG,value:1,offset:0},celsius:{name:"celsius",base:V.TEMPERATURE,prefixes:L.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:V.TEMPERATURE,prefixes:L.LONG,value:new S(5,9),offset:459.67},rankine:{name:"rankine",base:V.TEMPERATURE,prefixes:L.LONG,value:new S(5,9),offset:0},mol:{name:"mol",base:V.AMOUNT_OF_SUBSTANCE,prefixes:L.SHORT,value:1,offset:0},mole:{name:"mole",base:V.AMOUNT_OF_SUBSTANCE,prefixes:L.LONG,value:1,offset:0},cd:{name:"cd",base:V.LUMINOUS_INTENSITY,prefixes:L.SHORT,value:1,offset:0},candela:{name:"candela",base:V.LUMINOUS_INTENSITY,prefixes:L.LONG,value:1,offset:0},N:{name:"N",base:V.FORCE,prefixes:L.SHORT,value:1,offset:0},newton:{name:"newton",base:V.FORCE,prefixes:L.LONG,value:1,offset:0},dyn:{name:"dyn",base:V.FORCE,prefixes:L.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:V.FORCE,prefixes:L.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:V.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:V.FORCE,prefixes:L.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:V.FORCE,prefixes:L.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:V.FORCE,prefixes:L.NONE,value:9.80665,offset:0},J:{name:"J",base:V.ENERGY,prefixes:L.SHORT,value:1,offset:0},joule:{name:"joule",base:V.ENERGY,prefixes:L.LONG,value:1,offset:0},erg:{name:"erg",base:V.ENERGY,prefixes:L.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:V.ENERGY,prefixes:L.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:V.ENERGY,prefixes:L.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:V.ENERGY,prefixes:L.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:V.ENERGY,prefixes:L.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:V.POWER,prefixes:L.SHORT,value:1,offset:0},watt:{name:"watt",base:V.POWER,prefixes:L.LONG,value:1,offset:0},hp:{name:"hp",base:V.POWER,prefixes:L.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:V.POWER,prefixes:L.SHORT,value:b.I,offset:0},VA:{name:"VA",base:V.POWER,prefixes:L.SHORT,value:1,offset:0},Pa:{name:"Pa",base:V.PRESSURE,prefixes:L.SHORT,value:1,offset:0},psi:{name:"psi",base:V.PRESSURE,prefixes:L.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:V.PRESSURE,prefixes:L.NONE,value:101325,offset:0},bar:{name:"bar",base:V.PRESSURE,prefixes:L.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:V.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:V.PRESSURE,prefixes:L.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:V.PRESSURE,prefixes:L.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:V.PRESSURE,prefixes:L.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:V.ELECTRIC_CHARGE,prefixes:L.LONG,value:1,offset:0},C:{name:"C",base:V.ELECTRIC_CHARGE,prefixes:L.SHORT,value:1,offset:0},farad:{name:"farad",base:V.ELECTRIC_CAPACITANCE,prefixes:L.LONG,value:1,offset:0},F:{name:"F",base:V.ELECTRIC_CAPACITANCE,prefixes:L.SHORT,value:1,offset:0},volt:{name:"volt",base:V.ELECTRIC_POTENTIAL,prefixes:L.LONG,value:1,offset:0},V:{name:"V",base:V.ELECTRIC_POTENTIAL,prefixes:L.SHORT,value:1,offset:0},ohm:{name:"ohm",base:V.ELECTRIC_RESISTANCE,prefixes:L.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:V.ELECTRIC_INDUCTANCE,prefixes:L.LONG,value:1,offset:0},H:{name:"H",base:V.ELECTRIC_INDUCTANCE,prefixes:L.SHORT,value:1,offset:0},siemens:{name:"siemens",base:V.ELECTRIC_CONDUCTANCE,prefixes:L.LONG,value:1,offset:0},S:{name:"S",base:V.ELECTRIC_CONDUCTANCE,prefixes:L.SHORT,value:1,offset:0},weber:{name:"weber",base:V.MAGNETIC_FLUX,prefixes:L.LONG,value:1,offset:0},Wb:{name:"Wb",base:V.MAGNETIC_FLUX,prefixes:L.SHORT,value:1,offset:0},tesla:{name:"tesla",base:V.MAGNETIC_FLUX_DENSITY,prefixes:L.LONG,value:1,offset:0},T:{name:"T",base:V.MAGNETIC_FLUX_DENSITY,prefixes:L.SHORT,value:1,offset:0},b:{name:"b",base:V.BIT,prefixes:L.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:V.BIT,prefixes:L.BINARY_LONG,value:1,offset:0},B:{name:"B",base:V.BIT,prefixes:L.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:V.BIT,prefixes:L.BINARY_LONG,value:8,offset:0}},re={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ne(Z){if(Z.number==="BigNumber"){var J=Ub(y);z.rad.value=new y(1),z.deg.value=J.div(180),z.grad.value=J.div(200),z.cycle.value=J.times(2),z.arcsec.value=J.div(648e3),z.arcmin.value=J.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=Math.PI*2,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}ne(t),e&&e("config",function(Z,J){Z.number!==J.number&&ne(Z)});var ie={si:{NONE:{unit:W,prefix:L.NONE[""]},LENGTH:{unit:z.m,prefix:L.SHORT[""]},MASS:{unit:z.g,prefix:L.SHORT.k},TIME:{unit:z.s,prefix:L.SHORT[""]},CURRENT:{unit:z.A,prefix:L.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:L.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:L.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:L.SHORT[""]},ANGLE:{unit:z.rad,prefix:L.SHORT[""]},BIT:{unit:z.bits,prefix:L.SHORT[""]},FORCE:{unit:z.N,prefix:L.SHORT[""]},ENERGY:{unit:z.J,prefix:L.SHORT[""]},POWER:{unit:z.W,prefix:L.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:L.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:L.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:L.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:L.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:L.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:L.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:L.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:L.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:L.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:L.SHORT[""]}}};ie.cgs=JSON.parse(JSON.stringify(ie.si)),ie.cgs.LENGTH={unit:z.m,prefix:L.SHORT.c},ie.cgs.MASS={unit:z.g,prefix:L.SHORT[""]},ie.cgs.FORCE={unit:z.dyn,prefix:L.SHORT[""]},ie.cgs.ENERGY={unit:z.erg,prefix:L.NONE[""]},ie.us=JSON.parse(JSON.stringify(ie.si)),ie.us.LENGTH={unit:z.ft,prefix:L.NONE[""]},ie.us.MASS={unit:z.lbm,prefix:L.NONE[""]},ie.us.TEMPERATURE={unit:z.degF,prefix:L.NONE[""]},ie.us.FORCE={unit:z.lbf,prefix:L.NONE[""]},ie.us.ENERGY={unit:z.BTU,prefix:L.BTU[""]},ie.us.POWER={unit:z.hp,prefix:L.NONE[""]},ie.us.PRESSURE={unit:z.psi,prefix:L.NONE[""]},ie.auto=JSON.parse(JSON.stringify(ie.si));var oe=ie.auto;N.setUnitSystem=function(Z){if(Ct(ie,Z))oe=ie[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(ie).join(", "))},N.getUnitSystem=function(){for(var Z in ie)if(Ct(ie,Z)&&ie[Z]===oe)return Z},N.typeConverters={BigNumber:function(J){return J!=null&&J.isFraction?new y(String(J.n)).div(String(J.d)).times(String(J.s)):new y(J+"")},Fraction:function(J){return new S(J)},Complex:function(J){return J},number:function(J){return J!=null&&J.isFraction?x(J):J}},N.prototype._numberConverter=function(){var Z=N.typeConverters[this.valueType()];if(Z)return Z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},N._getNumberConverter=function(Z){if(!N.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return N.typeConverters[Z]};for(var ye in z)if(Ct(z,ye)){var M=z[ye];M.dimensions=M.base.dimensions}for(var ge in re)if(Ct(re,ge)){var ee=z[re[ge]],k={};for(var B in ee)Ct(ee,B)&&(k[B]=ee[B]);k.name=ge,z[ge]=k}N.isValidAlpha=function(J){return/^[a-zA-Z]$/.test(J)};function Q(Z){for(var J=0;J<Z.length;J++){if(T=Z.charAt(J),J===0&&!N.isValidAlpha(T))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(J>0&&!(N.isValidAlpha(T)||R(T)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return N.createUnit=function(Z,J){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(J&&J.override){for(var K in Z)if(Ct(Z,K)&&N.deleteUnit(K),Z[K].aliases)for(var te=0;te<Z[K].aliases.length;te++)N.deleteUnit(Z[K].aliases[te])}var me;for(var fe in Z)Ct(Z,fe)&&(me=N.createUnitSingle(fe,Z[fe]));return me},N.createUnitSingle=function(Z,J){if((typeof J>"u"||J===null)&&(J={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ct(z,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');Q(Z);var K=null,te=[],me=0,fe,xe,_e;if(J&&J.type==="Unit")K=J.clone();else if(typeof J=="string")J!==""&&(fe=J);else if(typeof J=="object")fe=J.definition,xe=J.prefixes,me=J.offset,_e=J.baseName,J.aliases&&(te=J.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+J.toString()+'": expecting "string" or "Unit" or "Object"');if(te){for(var je=0;je<te.length;je++)if(Ct(z,te[je]))throw new Error('Cannot create alias "'+te[je]+'": a unit with that name already exists')}if(fe&&typeof fe=="string"&&!K)try{K=N.parse(fe,{allowNoUnits:!0})}catch(Qt){throw Qt.message='Could not create unit "'+Z+'" from "'+fe+'": '+Qt.message,Qt}else fe&&fe.type==="Unit"&&(K=fe.clone());te=te||[],me=me||0,xe&&xe.toUpperCase?xe=L[xe.toUpperCase()]||L.NONE:xe=L.NONE;var Be={};if(K){Be={name:Z,value:K.value,dimensions:K.dimensions.slice(0),prefixes:xe,offset:me};var Le=!1;for(var it in V)if(Ct(V,it)){for(var ht=!0,ce=0;ce<X.length;ce++)if(Math.abs((Be.dimensions[ce]||0)-(V[it].dimensions[ce]||0))>1e-12){ht=!1;break}if(ht){Le=!0,Be.base=V[it];break}}if(!Le){_e=_e||Z+"_STUFF";var be={dimensions:K.dimensions.slice(0)};be.key=_e,V[_e]=be,oe[_e]={unit:Be,prefix:L.NONE[""]},Be.base=V[_e]}}else{if(_e=_e||Z+"_STUFF",X.indexOf(_e)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');X.push(_e);for(var Re in V)Ct(V,Re)&&(V[Re].dimensions[X.length-1]=0);for(var ze={dimensions:[]},Ye=0;Ye<X.length;Ye++)ze.dimensions[Ye]=0;ze.dimensions[X.length-1]=1,ze.key=_e,V[_e]=ze,Be={name:Z,value:1,dimensions:V[_e].dimensions.slice(0),prefixes:xe,offset:me,base:V[_e]},oe[_e]={unit:Be,prefix:L.NONE[""]}}N.UNITS[Z]=Be;for(var Fe=0;Fe<te.length;Fe++){var $e=te[Fe],vt={};for(var Nt in Be)Ct(Be,Nt)&&(vt[Nt]=Be[Nt]);vt.name=$e,N.UNITS[$e]=vt}return delete P.cache,new N(null,Z)},N.deleteUnit=function(Z){delete N.UNITS[Z],delete P.cache},N.PREFIXES=L,N.BASE_DIMENSIONS=X,N.BASE_UNITS=V,N.UNIT_SYSTEMS=ie,N.UNITS=z,N},{isClass:!0}),A6="unit",Fee=["typed","Unit"],Oee=Se(A6,Fee,r=>{var{typed:e,Unit:t}=r;return e(A6,{Unit:function(a){return a.clone()},string:function(a){return t.isValuelessUnit(a)?new t(null,a):t.parse(a,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(a,s){return new t(a,s)},"number | BigNumber | Fraction":function(a){return new t(a)},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),T6="sparse",Bee=["typed","SparseMatrix"],Ree=Se(T6,Bee,r=>{var{typed:e,SparseMatrix:t}=r;return e(T6,{"":function(){return new t([])},string:function(a){return new t([],a)},"Array | Matrix":function(a){return new t(a)},"Array | Matrix, string":function(a,s){return new t(a,s)}})}),C6="createUnit",Lee=["typed","Unit"],Iee=Se(C6,Lee,r=>{var{typed:e,Unit:t}=r;return e(C6,{"Object, Object":function(a,s){return t.createUnit(a,s)},Object:function(a){return t.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,s,o){var l={};return l[a]=s,t.createUnit(l,o)},"string, Unit | string | Object":function(a,s){var o={};return o[a]=s,t.createUnit(o,{})},string:function(a){var s={};return s[a]={},t.createUnit(s,{})}})}),D6="acos",zee=["typed","config","Complex"],Pee=Se(D6,zee,r=>{var{typed:e,config:t,Complex:n}=r;return e(D6,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new n(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),k6="acosh",qee=["typed","config","Complex"],$ee=Se(k6,qee,r=>{var{typed:e,config:t,Complex:n}=r;return e(k6,{number:function(s){return s>=1||t.predictable?g8(s):s<=-1?new n(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new n(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),M6="acot",Uee=["typed","BigNumber"],Hee=Se(M6,Uee,r=>{var{typed:e,BigNumber:t}=r;return e(M6,{number:x8,Complex:function(a){return a.acot()},BigNumber:function(a){return new t(1).div(a).atan()}})}),F6="acoth",Vee=["typed","config","Complex","BigNumber"],Gee=Se(F6,Vee,r=>{var{typed:e,config:t,Complex:n,BigNumber:a}=r;return e(F6,{number:function(o){return o>=1||o<=-1||t.predictable?v8(o):new n(o,0).acoth()},Complex:function(o){return o.acoth()},BigNumber:function(o){return new a(1).div(o).atanh()}})}),O6="acsc",Qee=["typed","config","Complex","BigNumber"],Wee=Se(O6,Qee,r=>{var{typed:e,config:t,Complex:n,BigNumber:a}=r;return e(O6,{number:function(o){return o<=-1||o>=1||t.predictable?y8(o):new n(o,0).acsc()},Complex:function(o){return o.acsc()},BigNumber:function(o){return new a(1).div(o).asin()}})}),B6="acsch",Kee=["typed","BigNumber"],Xee=Se(B6,Kee,r=>{var{typed:e,BigNumber:t}=r;return e(B6,{number:b8,Complex:function(a){return a.acsch()},BigNumber:function(a){return new t(1).div(a).asinh()}})}),R6="asec",Yee=["typed","config","Complex","BigNumber"],Zee=Se(R6,Yee,r=>{var{typed:e,config:t,Complex:n,BigNumber:a}=r;return e(R6,{number:function(o){return o<=-1||o>=1||t.predictable?w8(o):new n(o,0).asec()},Complex:function(o){return o.asec()},BigNumber:function(o){return new a(1).div(o).acos()}})}),L6="asech",Jee=["typed","config","Complex","BigNumber"],ete=Se(L6,Jee,r=>{var{typed:e,config:t,Complex:n,BigNumber:a}=r;return e(L6,{number:function(o){if(o<=1&&o>=-1||t.predictable){var l=1/o;if(l>0||t.predictable)return _8(o);var u=Math.sqrt(l*l-1);return new n(Math.log(u-l),Math.PI)}return new n(o,0).asech()},Complex:function(o){return o.asech()},BigNumber:function(o){return new a(1).div(o).acosh()}})}),I6="asin",tte=["typed","config","Complex"],rte=Se(I6,tte,r=>{var{typed:e,config:t,Complex:n}=r;return e(I6,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new n(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),nte="asinh",ite=["typed"],ate=Se(nte,ite,r=>{var{typed:e}=r;return e("asinh",{number:N8,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),ste="atan",ote=["typed"],lte=Se(ste,ote,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),z6="atan2",cte=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],ute=Se(z6,cte,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:a,DenseMatrix:s,concat:o}=r,l=Ya({typed:e,equalScalar:n}),u=Ai({typed:e}),c=L8({typed:e,equalScalar:n}),d=li({typed:e,equalScalar:n}),h=Mn({typed:e,DenseMatrix:s}),g=Hr({typed:e,matrix:t,concat:o});return e(z6,{"number, number":Math.atan2,"BigNumber, BigNumber":(m,v)=>a.atan2(m,v)},g({scalar:"number | BigNumber",SS:c,DS:u,SD:l,Ss:d,sS:h}))}),P6="atanh",dte=["typed","config","Complex"],fte=Se(P6,dte,r=>{var{typed:e,config:t,Complex:n}=r;return e(P6,{number:function(s){return s<=1&&s>=-1||t.predictable?S8(s):new n(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),Uu=Se("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),q6="cos",hte=["typed"],mte=Se(q6,hte,r=>{var{typed:e}=r,t=Uu({typed:e});return e(q6,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),$6="cosh",pte=["typed"],gte=Se($6,pte,r=>{var{typed:e}=r;return e($6,{number:cG,"Complex | BigNumber":t=>t.cosh()})}),U6="cot",xte=["typed","BigNumber"],vte=Se(U6,xte,r=>{var{typed:e,BigNumber:t}=r,n=Uu({typed:e});return e(U6,{number:j8,Complex:a=>a.cot(),BigNumber:a=>new t(1).div(a.tan())},n)}),H6="coth",yte=["typed","BigNumber"],bte=Se(H6,yte,r=>{var{typed:e,BigNumber:t}=r;return e(H6,{number:E8,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),V6="csc",wte=["typed","BigNumber"],_te=Se(V6,wte,r=>{var{typed:e,BigNumber:t}=r,n=Uu({typed:e});return e(V6,{number:A8,Complex:a=>a.csc(),BigNumber:a=>new t(1).div(a.sin())},n)}),G6="csch",Nte=["typed","BigNumber"],Ste=Se(G6,Nte,r=>{var{typed:e,BigNumber:t}=r;return e(G6,{number:T8,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),Q6="sec",jte=["typed","BigNumber"],Ete=Se(Q6,jte,r=>{var{typed:e,BigNumber:t}=r,n=Uu({typed:e});return e(Q6,{number:C8,Complex:a=>a.sec(),BigNumber:a=>new t(1).div(a.cos())},n)}),W6="sech",Ate=["typed","BigNumber"],Tte=Se(W6,Ate,r=>{var{typed:e,BigNumber:t}=r;return e(W6,{number:D8,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),K6="sin",Cte=["typed"],Dte=Se(K6,Cte,r=>{var{typed:e}=r,t=Uu({typed:e});return e(K6,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),X6="sinh",kte=["typed"],Mte=Se(X6,kte,r=>{var{typed:e}=r;return e(X6,{number:k8,"Complex | BigNumber":t=>t.sinh()})}),Y6="tan",Fte=["typed"],Ote=Se(Y6,Fte,r=>{var{typed:e}=r,t=Uu({typed:e});return e(Y6,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),Bte="tanh",Rte=["typed"],Lte=Se(Bte,Rte,r=>{var{typed:e}=r;return e("tanh",{number:dG,"Complex | BigNumber":t=>t.tanh()})}),Z6="setCartesian",Ite=["typed","size","subset","compareNatural","Index","DenseMatrix"],zte=Se(Z6,Ite,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s,DenseMatrix:o}=r;return e(Z6,{"Array | Matrix, Array | Matrix":function(u,c){var d=[];if(n(t(u),new s(0))!==0&&n(t(c),new s(0))!==0){var h=pr(Array.isArray(u)?u:u.toArray()).sort(a),g=pr(Array.isArray(c)?c:c.toArray()).sort(a);d=[];for(var m=0;m<h.length;m++)for(var v=0;v<g.length;v++)d.push([h[m],g[v]])}return Array.isArray(u)&&Array.isArray(c)?d:new o(d)}})}),J6="setDifference",Pte=["typed","size","subset","compareNatural","Index","DenseMatrix"],qte=Se(J6,Pte,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s,DenseMatrix:o}=r;return e(J6,{"Array | Matrix, Array | Matrix":function(u,c){var d;if(n(t(u),new s(0))===0)d=[];else{if(n(t(c),new s(0))===0)return pr(u.toArray());var h=Cu(pr(Array.isArray(u)?u:u.toArray()).sort(a)),g=Cu(pr(Array.isArray(c)?c:c.toArray()).sort(a));d=[];for(var m,v=0;v<h.length;v++){m=!1;for(var x=0;x<g.length;x++)if(a(h[v].value,g[x].value)===0&&h[v].identifier===g[x].identifier){m=!0;break}m||d.push(h[v])}}return Array.isArray(u)&&Array.isArray(c)?Rm(d):new o(Rm(d))}})}),eA="setDistinct",$te=["typed","size","subset","compareNatural","Index","DenseMatrix"],Ute=Se(eA,$te,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s,DenseMatrix:o}=r;return e(eA,{"Array | Matrix":function(u){var c;if(n(t(u),new s(0))===0)c=[];else{var d=pr(Array.isArray(u)?u:u.toArray()).sort(a);c=[],c.push(d[0]);for(var h=1;h<d.length;h++)a(d[h],d[h-1])!==0&&c.push(d[h])}return Array.isArray(u)?c:new o(c)}})}),tA="setIntersect",Hte=["typed","size","subset","compareNatural","Index","DenseMatrix"],Vte=Se(tA,Hte,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s,DenseMatrix:o}=r;return e(tA,{"Array | Matrix, Array | Matrix":function(u,c){var d;if(n(t(u),new s(0))===0||n(t(c),new s(0))===0)d=[];else{var h=Cu(pr(Array.isArray(u)?u:u.toArray()).sort(a)),g=Cu(pr(Array.isArray(c)?c:c.toArray()).sort(a));d=[];for(var m=0;m<h.length;m++)for(var v=0;v<g.length;v++)if(a(h[m].value,g[v].value)===0&&h[m].identifier===g[v].identifier){d.push(h[m]);break}}return Array.isArray(u)&&Array.isArray(c)?Rm(d):new o(Rm(d))}})}),rA="setIsSubset",Gte=["typed","size","subset","compareNatural","Index"],Qte=Se(rA,Gte,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s}=r;return e(rA,{"Array | Matrix, Array | Matrix":function(l,u){if(n(t(l),new s(0))===0)return!0;if(n(t(u),new s(0))===0)return!1;for(var c=Cu(pr(Array.isArray(l)?l:l.toArray()).sort(a)),d=Cu(pr(Array.isArray(u)?u:u.toArray()).sort(a)),h,g=0;g<c.length;g++){h=!1;for(var m=0;m<d.length;m++)if(a(c[g].value,d[m].value)===0&&c[g].identifier===d[m].identifier){h=!0;break}if(h===!1)return!1}return!0}})}),nA="setMultiplicity",Wte=["typed","size","subset","compareNatural","Index"],Kte=Se(nA,Wte,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s}=r;return e(nA,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(l,u){if(n(t(u),new s(0))===0)return 0;for(var c=pr(Array.isArray(u)?u:u.toArray()),d=0,h=0;h<c.length;h++)a(c[h],l)===0&&d++;return d}})}),iA="setPowerset",Xte=["typed","size","subset","compareNatural","Index"],Yte=Se(iA,Xte,r=>{var{typed:e,size:t,subset:n,compareNatural:a,Index:s}=r;return e(iA,{"Array | Matrix":function(c){if(n(t(c),new s(0))===0)return[];for(var d=pr(Array.isArray(c)?c:c.toArray()).sort(a),h=[],g=0;g.toString(2).length<=d.length;)h.push(o(d,g.toString(2).split("").reverse())),g++;return l(h)}});function o(u,c){for(var d=[],h=0;h<c.length;h++)c[h]==="1"&&d.push(u[h]);return d}function l(u){for(var c=[],d=u.length-1;d>0;d--)for(var h=0;h<d;h++)u[h].length>u[h+1].length&&(c=u[h],u[h]=u[h+1],u[h+1]=c);return u}}),aA="setSize",Zte=["typed","compareNatural"],Jte=Se(aA,Zte,r=>{var{typed:e,compareNatural:t}=r;return e(aA,{"Array | Matrix":function(a){return Array.isArray(a)?pr(a).length:pr(a.toArray()).length},"Array | Matrix, boolean":function(a,s){if(s===!1||a.length===0)return Array.isArray(a)?pr(a).length:pr(a.toArray()).length;for(var o=pr(Array.isArray(a)?a:a.toArray()).sort(t),l=1,u=1;u<o.length;u++)t(o[u],o[u-1])!==0&&l++;return l}})}),sA="setSymDifference",ere=["typed","size","concat","subset","setDifference","Index"],tre=Se(sA,ere,r=>{var{typed:e,size:t,concat:n,subset:a,setDifference:s,Index:o}=r;return e(sA,{"Array | Matrix, Array | Matrix":function(u,c){if(a(t(u),new o(0))===0)return pr(c);if(a(t(c),new o(0))===0)return pr(u);var d=pr(u),h=pr(c);return n(s(d,h),s(h,d))}})}),oA="setUnion",rre=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],nre=Se(oA,rre,r=>{var{typed:e,size:t,concat:n,subset:a,setIntersect:s,setSymDifference:o,Index:l}=r;return e(oA,{"Array | Matrix, Array | Matrix":function(c,d){if(a(t(c),new l(0))===0)return pr(d);if(a(t(d),new l(0))===0)return pr(c);var h=pr(c),g=pr(d);return n(o(h,g),s(h,g))}})}),lA="add",ire=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],are=Se(lA,ire,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:a,DenseMatrix:s,SparseMatrix:o,concat:l}=r,u=rl({typed:e}),c=Lb({typed:e,equalScalar:a}),d=Zl({typed:e,DenseMatrix:s}),h=Hr({typed:e,matrix:t,concat:l});return e(lA,{"any, any":n,"any, any, ...any":e.referToSelf(g=>(m,v,x)=>{for(var b=g(m,v),y=0;y<x.length;y++)b=g(b,x[y]);return b})},h({elop:n,DS:u,SS:c,Ss:d}))}),cA="hypot",sre=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],ore=Se(cA,sre,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:a,multiplyScalar:s,sqrt:o,smaller:l,isPositive:u}=r;return e(cA,{"... number | BigNumber":c,Array:c,Matrix:d=>c(pr(d.toArray(),!0))});function c(d){for(var h=0,g=0,m=0;m<d.length;m++){if(Ws(d[m]))throw new TypeError("Unexpected type of argument to hypot");var v=t(d[m]);l(g,v)?(h=s(h,s(a(g,v),a(g,v))),h=n(h,1),g=v):h=n(h,u(v)?s(a(v,g),a(v,g)):v)}return s(g,o(h))}}),uA="norm",lre=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],cre=Se(uA,lre,r=>{var{typed:e,abs:t,add:n,pow:a,conj:s,sqrt:o,multiply:l,equalScalar:u,larger:c,smaller:d,matrix:h,ctranspose:g,eigs:m}=r;return e(uA,{number:Math.abs,Complex:function(F){return F.abs()},BigNumber:function(F){return F.abs()},boolean:function(F){return Math.abs(F)},Array:function(F){return E(h(F),2)},Matrix:function(F){return E(F,2)},"Array, number | BigNumber | string":function(F,A){return E(h(F),A)},"Matrix, number | BigNumber | string":function(F,A){return E(F,A)}});function v(T){var F=0;return T.forEach(function(A){var R=t(A);c(R,F)&&(F=R)},!0),F}function x(T){var F;return T.forEach(function(A){var R=t(A);(!F||d(R,F))&&(F=R)},!0),F||0}function b(T,F){if(F===Number.POSITIVE_INFINITY||F==="inf")return v(T);if(F===Number.NEGATIVE_INFINITY||F==="-inf")return x(T);if(F==="fro")return E(T,2);if(typeof F=="number"&&!isNaN(F)){if(!u(F,0)){var A=0;return T.forEach(function(R){A=n(a(t(R),F),A)},!0),a(A,1/F)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function y(T){var F=0;return T.forEach(function(A,R){F=n(F,l(A,s(A)))}),t(o(F))}function S(T){var F=[],A=0;return T.forEach(function(R,I){var O=I[1],U=n(F[O]||0,t(R));c(U,A)&&(A=U),F[O]=U},!0),A}function _(T){var F=T.size();if(F[0]!==F[1])throw new RangeError("Invalid matrix dimensions");var A=g(T),R=l(A,T),I=m(R).values.toArray(),O=I[I.length-1];return t(o(O))}function N(T){var F=[],A=0;return T.forEach(function(R,I){var O=I[0],U=n(F[O]||0,t(R));c(U,A)&&(A=U),F[O]=U},!0),A}function j(T,F){if(F===1)return S(T);if(F===Number.POSITIVE_INFINITY||F==="inf")return N(T);if(F==="fro")return y(T);if(F===2)return _(T);throw new Error("Unsupported parameter value "+F)}function E(T,F){var A=T.size();if(A.length===1)return b(T,F);if(A.length===2){if(A[0]&&A[1])return j(T,F);throw new RangeError("Invalid matrix dimensions")}}}),dA="dot",ure=["typed","addScalar","multiplyScalar","conj","size"],dre=Se(dA,ure,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:a,size:s}=r;return e(dA,{"Array | DenseMatrix, Array | DenseMatrix":l,"SparseMatrix, SparseMatrix":u});function o(d,h){var g=c(d),m=c(h),v,x;if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(m.length===1)x=m[0];else if(m.length===2&&m[1]===1)x=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(v!==x)throw new RangeError("Vectors must have equal length ("+v+" != "+x+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function l(d,h){var g=o(d,h),m=Lt(d)?d._data:d,v=Lt(d)?d._datatype||d.getDataType():void 0,x=Lt(h)?h._data:h,b=Lt(h)?h._datatype||h.getDataType():void 0,y=c(d).length===2,S=c(h).length===2,_=t,N=n;if(v&&b&&v===b&&typeof v=="string"&&v!=="mixed"){var j=v;_=e.find(t,[j,j]),N=e.find(n,[j,j])}if(!y&&!S){for(var E=N(a(m[0]),x[0]),T=1;T<g;T++)E=_(E,N(a(m[T]),x[T]));return E}if(!y&&S){for(var F=N(a(m[0]),x[0][0]),A=1;A<g;A++)F=_(F,N(a(m[A]),x[A][0]));return F}if(y&&!S){for(var R=N(a(m[0][0]),x[0]),I=1;I<g;I++)R=_(R,N(a(m[I][0]),x[I]));return R}if(y&&S){for(var O=N(a(m[0][0]),x[0][0]),U=1;U<g;U++)O=_(O,N(a(m[U][0]),x[U][0]));return O}}function u(d,h){o(d,h);for(var g=d._index,m=d._values,v=h._index,x=h._values,b=0,y=t,S=n,_=0,N=0;_<g.length&&N<v.length;){var j=g[_],E=v[N];if(j<E){_++;continue}if(j>E){N++;continue}j===E&&(b=y(b,S(m[_],x[N])),_++,N++)}return b}function c(d){return Lt(d)?d.size():s(d)}}),fre="trace",hre=["typed","matrix","add"],mre=Se(fre,hre,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(l){return a(t(l))},SparseMatrix:s,DenseMatrix:a,any:Ht});function a(o){var l=o._size,u=o._data;switch(l.length){case 1:if(l[0]===1)return Ht(u[0]);throw new RangeError("Matrix must be square (size: "+Jt(l)+")");case 2:{var c=l[0],d=l[1];if(c===d){for(var h=0,g=0;g<c;g++)h=n(h,u[g][g]);return h}else throw new RangeError("Matrix must be square (size: "+Jt(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(l)+")")}}function s(o){var l=o._values,u=o._index,c=o._ptr,d=o._size,h=d[0],g=d[1];if(h===g){var m=0;if(l.length>0)for(var v=0;v<g;v++)for(var x=c[v],b=c[v+1],y=x;y<b;y++){var S=u[y];if(S===v){m=n(m,l[y]);break}if(S>v)break}return m}throw new RangeError("Matrix must be square (size: "+Jt(d)+")")}}),fA="index",pre=["typed","Index"],gre=Se(fA,pre,r=>{var{typed:e,Index:t}=r;return e(fA,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var s=a.map(function(l){return Xt(l)?l.toNumber():Mr(l)||Lt(l)?l.map(function(u){return Xt(u)?u.toNumber():u}):l}),o=new t;return t.apply(o,s),o}})}),nk=new Set(["end"]),xre="Node",vre=["mathWithTransform"],yre=Se(xre,vre,r=>{var{mathWithTransform:e}=r;function t(a){for(var s of[...nk])if(a.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),o={},l=null;function u(c){var d=mu(c);return t(d),s(d,o,l)}return{evaluate:u}}_compile(s,o){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!Ar(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function o(l,u){l.forEach(function(c,d,h){u(c,d,h),o(c,u)})}o(this,s)}transform(s){function o(l,u,c){var d=s(l,u,c);return d!==l?d:l.map(o)}return o(this,null,null)}filter(s){var o=[];return this.traverse(function(l,u,c){s(l,u,c)&&o.push(l)}),o}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&Js(this,s):!1}toString(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var o=this._getCustomString(s);return typeof o<"u"?o:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ti(r){return r&&r.isIndexError?new Wa(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function ik(r){var{subset:e}=r;return function(n,a){try{if(Array.isArray(n))return e(n,a);if(n&&typeof n.subset=="function")return n.subset(a);if(typeof n=="string")return e(n,a);if(typeof n=="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ni(n,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Ti(s)}}}var O0="AccessorNode",bre=["subset","Node"],wre=Se(O0,bre,r=>{var{subset:e,Node:t}=r,n=ik({subset:e});function a(o){return!(Ul(o)||wa(o)||dr(o)||Qo(o)||_p(o)||Zs(o)||Hn(o))}class s extends t{constructor(l,u){if(super(),!Ar(l))throw new TypeError('Node expected for parameter "object"');if(!Iu(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=l,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return O0}get isAccessorNode(){return!0}_compile(l,u){var c=this.object._compile(l,u),d=this.index._compile(l,u);if(this.index.isObjectProperty()){var h=this.index.getObjectProperty();return function(m,v,x){return Ni(c(m,v,x),h)}}else return function(m,v,x){var b=c(m,v,x),y=d(m,v,b);return n(b,y)}}forEach(l){l(this.object,"object",this),l(this.index,"index",this)}map(l){return new s(this._ifNode(l(this.object,"object",this)),this._ifNode(l(this.index,"index",this)))}clone(){return new s(this.object,this.index)}_toString(l){var u=this.object.toString(l);return a(this.object)&&(u="("+u+")"),u+this.index.toString(l)}_toHTML(l){var u=this.object.toHTML(l);return a(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(l)}_toTex(l){var u=this.object.toTex(l);return a(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(l)}toJSON(){return{mathjs:O0,object:this.object,index:this.index}}static fromJSON(l){return new s(l.object,l.index)}}return Sn(s,"name",O0),s},{isClass:!0,isNode:!0}),B0="ArrayNode",_re=["Node"],Nre=Se(B0,_re,r=>{var{Node:e}=r;class t extends e{constructor(a){if(super(),this.items=a||[],!Array.isArray(this.items)||!this.items.every(Ar))throw new TypeError("Array containing Nodes expected")}get type(){return B0}get isArrayNode(){return!0}_compile(a,s){var o=$o(this.items,function(c){return c._compile(a,s)}),l=a.config.matrix!=="Array";if(l){var u=a.matrix;return function(d,h,g){return u($o(o,function(m){return m(d,h,g)}))}}else return function(d,h,g){return $o(o,function(m){return m(d,h,g)})}}forEach(a){for(var s=0;s<this.items.length;s++){var o=this.items[s];a(o,"items["+s+"]",this)}}map(a){for(var s=[],o=0;o<this.items.length;o++)s[o]=this._ifNode(a(this.items[o],"items["+o+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(a){var s=this.items.map(function(o){return o.toString(a)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:B0,items:this.items}}static fromJSON(a){return new t(a.items)}_toHTML(a){var s=this.items.map(function(o){return o.toHTML(a)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){function s(o,l){var u=o.some(wa)&&!o.every(wa),c=l||u,d=c?"&":"\\\\",h=o.map(function(g){return g.items?s(g.items,!l):g.toTex(a)}).join(d);return u||!c||c&&!l?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return s(this.items,!1)}}return Sn(t,"name",B0),t},{isClass:!0,isNode:!0});function Sre(r){var{subset:e,matrix:t}=r;return function(a,s,o){try{if(Array.isArray(a)){var l=t(a).subset(s,o).valueOf();return l.forEach((u,c)=>{a[c]=u}),a}else{if(a&&typeof a.subset=="function")return a.subset(s,o);if(typeof a=="string")return e(a,s,o);if(typeof a=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return ju(a,s.getObjectProperty(),o),a}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw Ti(u)}}}var qa=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function R0(r,e){if(!e||e!=="auto")return r;for(var t=r;Zs(t);)t=t.content;return t}function Fr(r,e,t,n){var a=r;e!=="keep"&&(a=r.getContent());for(var s=a.getIdentifier(),o=null,l=0;l<qa.length;l++)if(s in qa[l]){o=l;break}if(s==="OperatorNode:multiply"&&a.implicit&&t!=="show"){var u=R0(a.args[0],e);!(dr(u)&&n&&n.getIdentifier()==="OperatorNode:divide"&&wy(R0(n.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&wy(R0(u.args[0],e))&&dr(R0(u.args[1])))&&(o+=1)}return o}function Zd(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),a=Fr(t,e);if(a===null)return null;var s=qa[a][n];if(Ct(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function ey(r,e,t){var n=t!=="keep"?r.getContent():r,a=t!=="keep"?r.getContent():e,s=n.getIdentifier(),o=a.getIdentifier(),l=Fr(n,t);if(l===null)return null;var u=qa[l][s];if(Ct(u,"associativeWith")&&u.associativeWith instanceof Array){for(var c=0;c<u.associativeWith.length;c++)if(u.associativeWith[c]===o)return!0;return!1}return null}function jre(r){var e="OperatorNode:"+r;for(var t of qa)if(e in t)return t[e].op;return null}var L0="AssignmentNode",Ere=["subset","?matrix","Node"],Are=Se(L0,Ere,r=>{var{subset:e,matrix:t,Node:n}=r,a=ik({subset:e}),s=Sre({subset:e,matrix:t});function o(u,c,d){c||(c="keep");var h=Fr(u,c,d),g=Fr(u.value,c,d);return c==="all"||g!==null&&g<=h}class l extends n{constructor(c,d,h){if(super(),this.object=c,this.index=h?d:null,this.value=h||d,!Hn(c)&&!Ul(c))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Hn(c)&&c.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Iu(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ar(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return L0}get isAssignmentNode(){return!0}_compile(c,d){var h=this.object._compile(c,d),g=this.index?this.index._compile(c,d):null,m=this.value._compile(c,d),v=this.object.name;if(this.index)if(this.index.isObjectProperty()){var x=this.index.getObjectProperty();return function(N,j,E){var T=h(N,j,E),F=m(N,j,E);return ju(T,x,F),F}}else{if(Hn(this.object))return function(N,j,E){var T=h(N,j,E),F=m(N,j,E),A=g(N,j,T);return N.set(v,s(T,A,F)),F};var b=this.object.object._compile(c,d);if(this.object.index.isObjectProperty()){var y=this.object.index.getObjectProperty();return function(N,j,E){var T=b(N,j,E),F=Ni(T,y),A=g(N,j,F),R=m(N,j,E);return ju(T,y,s(F,A,R)),R}}else{var S=this.object.index._compile(c,d);return function(N,j,E){var T=b(N,j,E),F=S(N,j,T),A=a(T,F),R=g(N,j,A),I=m(N,j,E);return s(T,F,s(A,R,I)),I}}}else{if(!Hn(this.object))throw new TypeError("SymbolNode expected as object");return function(N,j,E){var T=m(N,j,E);return N.set(v,T),T}}}forEach(c){c(this.object,"object",this),this.index&&c(this.index,"index",this),c(this.value,"value",this)}map(c){var d=this._ifNode(c(this.object,"object",this)),h=this.index?this._ifNode(c(this.index,"index",this)):null,g=this._ifNode(c(this.value,"value",this));return new l(d,h,g)}clone(){return new l(this.object,this.index,this.value)}_toString(c){var d=this.object.toString(c),h=this.index?this.index.toString(c):"",g=this.value.toString(c);return o(this,c&&c.parenthesis,c&&c.implicit)&&(g="("+g+")"),d+h+" = "+g}toJSON(){return{mathjs:L0,object:this.object,index:this.index,value:this.value}}static fromJSON(c){return new l(c.object,c.index,c.value)}_toHTML(c){var d=this.object.toHTML(c),h=this.index?this.index.toHTML(c):"",g=this.value.toHTML(c);return o(this,c&&c.parenthesis,c&&c.implicit)&&(g='<span class="math-paranthesis math-round-parenthesis">(</span>'+g+'<span class="math-paranthesis math-round-parenthesis">)</span>'),d+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+g}_toTex(c){var d=this.object.toTex(c),h=this.index?this.index.toTex(c):"",g=this.value.toTex(c);return o(this,c&&c.parenthesis,c&&c.implicit)&&(g="\\left(".concat(g,"\\right)")),d+h+"="+g}}return Sn(l,"name",L0),l},{isClass:!0,isNode:!0}),I0="BlockNode",Tre=["ResultSet","Node"],Cre=Se(I0,Tre,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(o){var l=o&&o.node,u=o&&o.visible!==void 0?o.visible:!0;if(!Ar(l))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:l,visible:u}})}get type(){return I0}get isBlockNode(){return!0}_compile(s,o){var l=$o(this.blocks,function(u){return{evaluate:u.node._compile(s,o),visible:u.visible}});return function(c,d,h){var g=[];return PD(l,function(v){var x=v.evaluate(c,d,h);v.visible&&g.push(x)}),new e(g)}}forEach(s){for(var o=0;o<this.blocks.length;o++)s(this.blocks[o].node,"blocks["+o+"].node",this)}map(s){for(var o=[],l=0;l<this.blocks.length;l++){var u=this.blocks[l],c=this._ifNode(s(u.node,"blocks["+l+"].node",this));o[l]={node:c,visible:u.visible}}return new n(o)}clone(){var s=this.blocks.map(function(o){return{node:o.node,visible:o.visible}});return new n(s)}_toString(s){return this.blocks.map(function(o){return o.node.toString(s)+(o.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:I0,blocks:this.blocks}}static fromJSON(s){return new n(s.blocks)}_toHTML(s){return this.blocks.map(function(o){return o.node.toHTML(s)+(o.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(o){return o.node.toTex(s)+(o.visible?"":";")}).join(`\\;\\;
`)}}return Sn(n,"name",I0),n},{isClass:!0,isNode:!0}),z0="ConditionalNode",Dre=["Node"],kre=Se(z0,Dre,r=>{var{Node:e}=r;function t(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(Xt(a))return!a.isZero();if(Ws(a))return!!(a.re||a.im);if(Ji(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+Or(a)+'"')}class n extends e{constructor(s,o,l){if(super(),!Ar(s))throw new TypeError("Parameter condition must be a Node");if(!Ar(o))throw new TypeError("Parameter trueExpr must be a Node");if(!Ar(l))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=o,this.falseExpr=l}get type(){return z0}get isConditionalNode(){return!0}_compile(s,o){var l=this.condition._compile(s,o),u=this.trueExpr._compile(s,o),c=this.falseExpr._compile(s,o);return function(h,g,m){return t(l(h,g,m))?u(h,g,m):c(h,g,m)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new n(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=Fr(this,o,s&&s.implicit),u=this.condition.toString(s),c=Fr(this.condition,o,s&&s.implicit);(o==="all"||this.condition.type==="OperatorNode"||c!==null&&c<=l)&&(u="("+u+")");var d=this.trueExpr.toString(s),h=Fr(this.trueExpr,o,s&&s.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=l)&&(d="("+d+")");var g=this.falseExpr.toString(s),m=Fr(this.falseExpr,o,s&&s.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=l)&&(g="("+g+")"),u+" ? "+d+" : "+g}toJSON(){return{mathjs:z0,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new n(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=Fr(this,o,s&&s.implicit),u=this.condition.toHTML(s),c=Fr(this.condition,o,s&&s.implicit);(o==="all"||this.condition.type==="OperatorNode"||c!==null&&c<=l)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.trueExpr.toHTML(s),h=Fr(this.trueExpr,o,s&&s.implicit);(o==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=l)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>');var g=this.falseExpr.toHTML(s),m=Fr(this.falseExpr,o,s&&s.implicit);return(o==="all"||this.falseExpr.type==="OperatorNode"||m!==null&&m<=l)&&(g='<span class="math-parenthesis math-round-parenthesis">(</span>'+g+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+d+'<span class="math-operator math-conditional-operator">:</span>'+g}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Sn(n,"name",z0),n},{isClass:!0,isNode:!0}),ty,hA;function Mre(){if(hA)return ty;hA=1;var r=Object.assign||function(a){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},t={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},n=function(s,o){return r({},s,o)};return ty=function(a){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.preserveFormatting,l=o===void 0?!1:o,u=s.escapeMapFn,c=u===void 0?n:u,d=String(a),h="",g=c(r({},e),l?r({},t):{}),m=Object.keys(g),v=function(){var b=!1;m.forEach(function(y,S){b||d.length>=y.length&&d.slice(0,y.length)===y&&(h+=g[m[S]],d=d.slice(y.length,d.length),b=!0)}),b||(h+=d.slice(0,1),d=d.slice(1,d.length))};d;)v();return h},ty}var Fre=Mre();const Ore=Df(Fre);var zy={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},mr={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},mA={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(mr.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(mr.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(mr.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(mr.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(mr.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(mr.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(mr.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(mr.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(mr.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(mr.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(mr.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(mr.bitAnd,"${args[1]}\\right)")},bitNot:{1:mr.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(mr.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(mr.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(mr.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(mr.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(mr.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(mr.and,"${args[1]}\\right)")},not:{1:mr.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(mr.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(mr.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(mr.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(mr.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(mr.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(mr.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(mr.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(mr.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(mr.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(mr.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(mr.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(mr.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(mr.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(zy.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Bre="\\mathrm{${name}}\\left(${args}\\right)",pA={deg:"^\\circ"};function Py(r){return Ore(r,{preserveFormatting:!0})}function ak(r,e){return e=typeof e>"u"?!1:e,e?Ct(pA,r)?pA[r]:"\\mathrm{"+Py(r)+"}":Ct(zy,r)?zy[r]:Py(r)}var P0="ConstantNode",Rre=["Node"],Lre=Se(P0,Rre,r=>{var{Node:e}=r;class t extends e{constructor(a){super(),this.value=a}get type(){return P0}get isConstantNode(){return!0}_compile(a,s){var o=this.value;return function(){return o}}forEach(a){}map(a){return this.clone()}clone(){return new t(this.value)}_toString(a){return Jt(this.value,a)}_toHTML(a){var s=this._toString(a);switch(Or(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+s+"</span>";case"string":return'<span class="math-string">'+s+"</span>";case"boolean":return'<span class="math-boolean">'+s+"</span>";case"null":return'<span class="math-null-symbol">'+s+"</span>";case"undefined":return'<span class="math-undefined">'+s+"</span>";default:return'<span class="math-symbol">'+s+"</span>"}}toJSON(){return{mathjs:P0,value:this.value}}static fromJSON(a){return new t(a.value)}_toTex(a){var s=this._toString(a),o=Or(this.value);switch(o){case"string":return"\\mathtt{"+Py(s)+"}";case"number":case"BigNumber":{var l=o==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!l)return this.value.valueOf()<0?"-\\infty":"\\infty";var u=s.toLowerCase().indexOf("e");return u!==-1?s.substring(0,u)+"\\cdot10^{"+s.substring(u+1)+"}":s}case"bigint":return s.toString();case"Fraction":return this.value.toLatex();default:return s}}}return Sn(t,"name",P0),t},{isClass:!0,isNode:!0}),q0="FunctionAssignmentNode",Ire=["typed","Node"],zre=Se(q0,Ire,r=>{var{typed:e,Node:t}=r;function n(s,o,l){var u=Fr(s,o,l),c=Fr(s.expr,o,l);return o==="all"||c!==null&&c<=u}class a extends t{constructor(o,l,u){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(l))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ar(u))throw new TypeError('Node expected for parameter "expr"');if(nk.has(o))throw new Error('Illegal function name, "'+o+'" is a reserved keyword');var c=new Set;for(var d of l){var h=typeof d=="string"?d:d.name;if(c.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));c.add(h)}this.name=o,this.params=l.map(function(g){return g&&g.name||g}),this.types=l.map(function(g){return g&&g.type||"any"}),this.expr=u}get type(){return q0}get isFunctionAssignmentNode(){return!0}_compile(o,l){var u=Object.create(l);PD(this.params,function(v){u[v]=!0});var c=this.expr._compile(o,u),d=this.name,h=this.params,g=hj(this.types,","),m=d+"("+hj(this.params,", ")+")";return function(x,b,y){var S={};S[g]=function(){for(var N=Object.create(b),j=0;j<h.length;j++)N[h[j]]=arguments[j];return c(x,N,y)};var _=e(d,S);return _.syntax=m,x.set(d,_),_}}forEach(o){o(this.expr,"expr",this)}map(o){var l=this._ifNode(o(this.expr,"expr",this));return new a(this.name,this.params.slice(0),l)}clone(){return new a(this.name,this.params.slice(0),this.expr)}_toString(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toString(o);return n(this,l,o&&o.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var o=this.types;return{mathjs:q0,name:this.name,params:this.params.map(function(l,u){return{name:l,type:o[u]}}),expr:this.expr}}static fromJSON(o){return new a(o.name,o.params,o.expr)}_toHTML(o){for(var l=o&&o.parenthesis?o.parenthesis:"keep",u=[],c=0;c<this.params.length;c++)u.push('<span class="math-symbol math-parameter">'+_a(this.params[c])+"</span>");var d=this.expr.toHTML(o);return n(this,l,o&&o.implicit)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+_a(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=this.expr.toTex(o);return n(this,l,o&&o.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(ak).join(",")+"\\right)="+u}}return Sn(a,"name",q0),a},{isClass:!0,isNode:!0}),$0="IndexNode",Pre=["Node","size"],qre=Se($0,Pre,r=>{var{Node:e,size:t}=r;class n extends e{constructor(s,o){if(super(),this.dimensions=s,this.dotNotation=o||!1,!Array.isArray(s)||!s.every(Ar))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return $0}get isIndexNode(){return!0}_compile(s,o){var l=$o(this.dimensions,function(c,d){var h=c.filter(v=>v.isSymbolNode&&v.name==="end").length>0;if(h){var g=Object.create(o);g.end=!0;var m=c._compile(s,g);return function(x,b,y){if(!Lt(y)&&!Mr(y)&&!fi(y))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Or(y));var S=t(y).valueOf(),_=Object.create(b);return _.end=S[d],m(x,_,y)}}else return c._compile(s,o)}),u=Ni(s,"index");return function(d,h,g){var m=$o(l,function(v){return v(d,h,g)});return u(...m)}}forEach(s){for(var o=0;o<this.dimensions.length;o++)s(this.dimensions[o],"dimensions["+o+"]",this)}map(s){for(var o=[],l=0;l<this.dimensions.length;l++)o[l]=this._ifNode(s(this.dimensions[l],"dimensions["+l+"]",this));return new n(o,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&dr(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:$0,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new n(s.dimensions,s.dotNotation)}_toHTML(s){for(var o=[],l=0;l<this.dimensions.length;l++)o[l]=this.dimensions[l].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+_a(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var o=this.dimensions.map(function(l){return l.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+o.join(",")+"}"}}return Sn(n,"name",$0),n},{isClass:!0,isNode:!0}),U0="ObjectNode",$re=["Node"],Ure=Se(U0,$re,r=>{var{Node:e}=r;class t extends e{constructor(a){if(super(),this.properties=a||{},a&&(typeof a!="object"||!Object.keys(a).every(function(s){return Ar(a[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return U0}get isObjectNode(){return!0}_compile(a,s){var o={};for(var l in this.properties)if(Ct(this.properties,l)){var u=su(l),c=JSON.parse(u),d=Ni(this.properties,l);o[c]=d._compile(a,s)}return function(g,m,v){var x={};for(var b in o)Ct(o,b)&&(x[b]=o[b](g,m,v));return x}}forEach(a){for(var s in this.properties)Ct(this.properties,s)&&a(this.properties[s],"properties["+su(s)+"]",this)}map(a){var s={};for(var o in this.properties)Ct(this.properties,o)&&(s[o]=this._ifNode(a(this.properties[o],"properties["+su(o)+"]",this)));return new t(s)}clone(){var a={};for(var s in this.properties)Ct(this.properties,s)&&(a[s]=this.properties[s]);return new t(a)}_toString(a){var s=[];for(var o in this.properties)Ct(this.properties,o)&&s.push(su(o)+": "+this.properties[o].toString(a));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:U0,properties:this.properties}}static fromJSON(a){return new t(a.properties)}_toHTML(a){var s=[];for(var o in this.properties)Ct(this.properties,o)&&s.push('<span class="math-symbol math-property">'+_a(o)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[o].toHTML(a));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(a){var s=[];for(var o in this.properties)Ct(this.properties,o)&&s.push("\\mathbf{"+o+":} & "+this.properties[o].toTex(a)+"\\\\");var l="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return l}}return Sn(t,"name",U0),t},{isClass:!0,isNode:!0});function sf(r,e){return new fD(r,new yp(e),new Set(Object.keys(e)))}var H0="OperatorNode",Hre=["Node"],Vre=Se(H0,Hre,r=>{var{Node:e}=r;function t(s,o){var l=s;if(o==="auto")for(;Zs(l);)l=l.content;return dr(l)?!0:pn(l)?t(l.args[0],o):!1}function n(s,o,l,u,c){var d=Fr(s,o,l),h=Zd(s,o);if(o==="all"||u.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return u.map(function(R){switch(R.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var g;switch(u.length){case 0:g=[];break;case 1:{var m=Fr(u[0],o,l,s);if(c&&m!==null){var v,x;if(o==="keep"?(v=u[0].getIdentifier(),x=s.getIdentifier()):(v=u[0].getContent().getIdentifier(),x=s.getContent().getIdentifier()),qa[d][x].latexLeftParens===!1){g=[!1];break}if(qa[m][v].latexParens===!1){g=[!1];break}}if(m===null){g=[!1];break}if(m<=d){g=[!0];break}g=[!1]}break;case 2:{var b,y=Fr(u[0],o,l,s),S=ey(s,u[0],o);y===null?b=!1:y===d&&h==="right"&&!S||y<d?b=!0:b=!1;var _,N=Fr(u[1],o,l,s),j=ey(s,u[1],o);if(N===null?_=!1:N===d&&h==="left"&&!j||N<d?_=!0:_=!1,c){var E,T,F;o==="keep"?(E=s.getIdentifier(),T=s.args[0].getIdentifier(),F=s.args[1].getIdentifier()):(E=s.getContent().getIdentifier(),T=s.args[0].getContent().getIdentifier(),F=s.args[1].getContent().getIdentifier()),y!==null&&(qa[d][E].latexLeftParens===!1&&(b=!1),qa[y][T].latexParens===!1&&(b=!1)),N!==null&&(qa[d][E].latexRightParens===!1&&(_=!1),qa[N][F].latexParens===!1&&(_=!1))}g=[b,_]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(g=u.map(function(R){var I=Fr(R,o,l,s),O=ey(s,R,o),U=Zd(R,o);return I===null?!1:d===I&&h===U&&!O?!0:I<d}));break}if(u.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&o!=="all"&&l==="hide")for(var A=1;A<g.length;++A)t(u[A],o)&&!g[A-1]&&(o!=="keep"||!Zs(u[A-1]))&&(g[A]=!0);return g}class a extends e{constructor(o,l,u,c,d){if(super(),typeof o!="string")throw new TypeError('string expected for parameter "op"');if(typeof l!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(Ar))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=c===!0,this.isPercentage=d===!0,this.op=o,this.fn=l,this.args=u||[]}get type(){return H0}get isOperatorNode(){return!0}_compile(o,l){if(typeof this.fn!="string"||!Ab(o,this.fn))throw o[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=Ni(o,this.fn),c=$o(this.args,function(v){return v._compile(o,l)});if(typeof u=="function"&&u.rawArgs===!0){var d=this.args;return function(x,b,y){return u(d,o,sf(x,b))}}else if(c.length===1){var h=c[0];return function(x,b,y){return u(h(x,b,y))}}else if(c.length===2){var g=c[0],m=c[1];return function(x,b,y){return u(g(x,b,y),m(x,b,y))}}else return function(x,b,y){return u.apply(null,$o(c,function(S){return S(x,b,y)}))}}forEach(o){for(var l=0;l<this.args.length;l++)o(this.args[l],"args["+l+"]",this)}map(o){for(var l=[],u=0;u<this.args.length;u++)l[u]=this._ifNode(o(this.args[u],"args["+u+"]",this));return new a(this.op,this.fn,l,this.implicit,this.isPercentage)}clone(){return new a(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",c=this.args,d=n(this,l,u,c,!1);if(c.length===1){var h=Zd(this,l),g=c[0].toString(o);d[0]&&(g="("+g+")");var m=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(m?" ":"")+g:h==="left"?g+(m?" ":"")+this.op:g+this.op}else if(c.length===2){var v=c[0].toString(o),x=c[1].toString(o);return d[0]&&(v="("+v+")"),d[1]&&(x="("+x+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v+" "+x:v+" "+this.op+" "+x}else if(c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=c.map(function(y,S){return y=y.toString(o),d[S]&&(y="("+y+")"),y});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?b.join(" "):b.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:H0,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(o){return new a(o.op,o.fn,o.args,o.implicit,o.isPercentage)}_toHTML(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",c=this.args,d=n(this,l,u,c,!1);if(c.length===1){var h=Zd(this,l),g=c[0].toHTML(o);return d[0]&&(g='<span class="math-parenthesis math-round-parenthesis">(</span>'+g+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+_a(this.op)+"</span>"+g:g+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+_a(this.op)+"</span>"}else if(c.length===2){var m=c[0].toHTML(o),v=c[1].toHTML(o);return d[0]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d[1]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+v:m+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_a(this.op)+"</span>"+v}else{var x=c.map(function(b,y){return b=b.toHTML(o),d[y]&&(b='<span class="math-parenthesis math-round-parenthesis">(</span>'+b+'<span class="math-parenthesis math-round-parenthesis">)</span>'),b});return c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?x.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):x.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_a(this.op)+"</span>"):'<span class="math-function">'+_a(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+x.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(o){var l=o&&o.parenthesis?o.parenthesis:"keep",u=o&&o.implicit?o.implicit:"hide",c=this.args,d=n(this,l,u,c,!0),h=mr[this.fn];if(h=typeof h>"u"?this.op:h,c.length===1){var g=Zd(this,l),m=c[0].toTex(o);return d[0]&&(m="\\left(".concat(m,"\\right)")),g==="right"?h+m:m+h}else if(c.length===2){var v=c[0],x=v.toTex(o);d[0]&&(x="\\left(".concat(x,"\\right)"));var b=c[1],y=b.toTex(o);d[1]&&(y="\\left(".concat(y,"\\right)"));var S;switch(l==="keep"?S=v.getIdentifier():S=v.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+x+"}{"+y+"}";case"OperatorNode:pow":switch(x="{"+x+"}",y="{"+y+"}",S){case"ConditionalNode":case"OperatorNode:divide":x="\\left(".concat(x,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return x+"~"+y}return x+h+y}else if(c.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var _=c.map(function(N,j){return N=N.toTex(o),d[j]&&(N="\\left(".concat(N,"\\right)")),N});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?_.join("~"):_.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+c.map(function(N){return N.toTex(o)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Sn(a,"name",H0),a},{isClass:!0,isNode:!0}),V0="ParenthesisNode",Gre=["Node"],Qre=Se(V0,Gre,r=>{var{Node:e}=r;class t extends e{constructor(a){if(super(),!Ar(a))throw new TypeError('Node expected for parameter "content"');this.content=a}get type(){return V0}get isParenthesisNode(){return!0}_compile(a,s){return this.content._compile(a,s)}getContent(){return this.content.getContent()}forEach(a){a(this.content,"content",this)}map(a){var s=a(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"("+this.content.toString(a)+")":this.content.toString(a)}toJSON(){return{mathjs:V0,content:this.content}}static fromJSON(a){return new t(a.content)}_toHTML(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(a)}_toTex(a){return!a||a&&!a.parenthesis||a&&a.parenthesis==="keep"?"\\left(".concat(this.content.toTex(a),"\\right)"):this.content.toTex(a)}}return Sn(t,"name",V0),t},{isClass:!0,isNode:!0}),G0="RangeNode",Wre=["Node"],Kre=Se(G0,Wre,r=>{var{Node:e}=r;function t(a,s,o){var l=Fr(a,s,o),u={},c=Fr(a.start,s,o);if(u.start=c!==null&&c<=l||s==="all",a.step){var d=Fr(a.step,s,o);u.step=d!==null&&d<=l||s==="all"}var h=Fr(a.end,s,o);return u.end=h!==null&&h<=l||s==="all",u}class n extends e{constructor(s,o,l){if(super(),!Ar(s))throw new TypeError("Node expected");if(!Ar(o))throw new TypeError("Node expected");if(l&&!Ar(l))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=o,this.step=l||null}get type(){return G0}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(o){return Hn(o)&&o.name==="end"});return s.length>0}_compile(s,o){var l=s.range,u=this.start._compile(s,o),c=this.end._compile(s,o);if(this.step){var d=this.step._compile(s,o);return function(g,m,v){return l(u(g,m,v),c(g,m,v),d(g,m,v))}}else return function(g,m,v){return l(u(g,m,v),c(g,m,v))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new n(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=t(this,o,s&&s.implicit),u,c=this.start.toString(s);if(l.start&&(c="("+c+")"),u=c,this.step){var d=this.step.toString(s);l.step&&(d="("+d+")"),u+=":"+d}var h=this.end.toString(s);return l.end&&(h="("+h+")"),u+=":"+h,u}toJSON(){return{mathjs:G0,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new n(s.start,s.end,s.step)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=t(this,o,s&&s.implicit),u,c=this.start.toHTML(s);if(l.start&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=c,this.step){var d=this.step.toHTML(s);l.step&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+d}var h=this.end.toHTML(s);return l.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+h,u}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",l=t(this,o,s&&s.implicit),u=this.start.toTex(s);if(l.start&&(u="\\left(".concat(u,"\\right)")),this.step){var c=this.step.toTex(s);l.step&&(c="\\left(".concat(c,"\\right)")),u+=":"+c}var d=this.end.toTex(s);return l.end&&(d="\\left(".concat(d,"\\right)")),u+=":"+d,u}}return Sn(n,"name",G0),n},{isClass:!0,isNode:!0}),Q0="RelationalNode",Xre=["Node"],Yre=Se(Q0,Xre,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(s,o){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(o))throw new TypeError("Parameter params must be an array");if(s.length!==o.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=o}get type(){return Q0}get isRelationalNode(){return!0}_compile(s,o){var l=this,u=this.params.map(c=>c._compile(s,o));return function(d,h,g){for(var m,v=u[0](d,h,g),x=0;x<l.conditionals.length;x++){m=v,v=u[x+1](d,h,g);var b=Ni(s,l.conditionals[x]);if(!b(m,v))return!1}return!0}}forEach(s){this.params.forEach((o,l)=>s(o,"params["+l+"]",this),this)}map(s){return new n(this.conditionals.slice(),this.params.map((o,l)=>this._ifNode(s(o,"params["+l+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=Fr(this,o,s&&s.implicit),u=this.params.map(function(h,g){var m=Fr(h,o,s&&s.implicit);return o==="all"||m!==null&&m<=l?"("+h.toString(s)+")":h.toString(s)}),c=u[0],d=0;d<this.conditionals.length;d++)c+=" "+t[this.conditionals[d]],c+=" "+u[d+1];return c}toJSON(){return{mathjs:Q0,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new n(s.conditionals,s.params)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=Fr(this,o,s&&s.implicit),u=this.params.map(function(h,g){var m=Fr(h,o,s&&s.implicit);return o==="all"||m!==null&&m<=l?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(s)}),c=u[0],d=0;d<this.conditionals.length;d++)c+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+_a(t[this.conditionals[d]])+"</span>"+u[d+1];return c}_toTex(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",l=Fr(this,o,s&&s.implicit),u=this.params.map(function(h,g){var m=Fr(h,o,s&&s.implicit);return o==="all"||m!==null&&m<=l?"\\left("+h.toTex(s)+"\right)":h.toTex(s)}),c=u[0],d=0;d<this.conditionals.length;d++)c+=mr[this.conditionals[d]]+u[d+1];return c}}return Sn(n,"name",Q0),n},{isClass:!0,isNode:!0}),Zre="SymbolNode",Jre=["math","?Unit","Node"],ene=Se(Zre,Jre,r=>{var{math:e,Unit:t,Node:n}=r;function a(o){return t?t.isValuelessUnit(o):!1}class s extends n{constructor(l){if(super(),typeof l!="string")throw new TypeError('String expected for parameter "name"');this.name=l}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(l,u){var c=this.name;if(u[c]===!0)return function(h,g,m){return Ni(g,c)};if(c in l)return function(h,g,m){return h.has(c)?h.get(c):Ni(l,c)};var d=a(c);return function(h,g,m){return h.has(c)?h.get(c):d?new t(null,c):s.onUndefinedSymbol(c)}}forEach(l){}map(l){return this.clone()}static onUndefinedSymbol(l){throw new Error("Undefined symbol "+l)}clone(){return new s(this.name)}_toString(l){return this.name}_toHTML(l){var u=_a(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(l){return new s(l.name)}_toTex(l){var u=!1;typeof e[this.name]>"u"&&a(this.name)&&(u=!0);var c=ak(this.name,u);return c[0]==="\\"?c:" "+c}}return s},{isClass:!0,isNode:!0}),W0="FunctionNode",tne=["math","Node","SymbolNode"],rne=Se(W0,tne,r=>{var e,{math:t,Node:n,SymbolNode:a}=r,s=u=>Jt(u,{truncate:78});function o(u,c,d){for(var h="",g=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,m=0,v;(v=g.exec(u))!==null;)if(h+=u.substring(m,v.index),m=v.index,v[0]==="$$")h+="$",m++;else{m+=v[0].length;var x=c[v[1]];if(!x)throw new ReferenceError("Template: Property "+v[1]+" does not exist.");if(v[2]===void 0)switch(typeof x){case"string":h+=x;break;case"object":if(Ar(x))h+=x.toTex(d);else if(Array.isArray(x))h+=x.map(function(b,y){if(Ar(b))return b.toTex(d);throw new TypeError("Template: "+v[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+v[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+v[1]+" has to be a Node, String or array of Nodes")}else if(Ar(x[v[2]]&&x[v[2]]))h+=x[v[2]].toTex(d);else throw new TypeError("Template: "+v[1]+"["+v[2]+"] is not a Node.")}return h+=u.slice(m),h}class l extends n{constructor(c,d){if(super(),typeof c=="string"&&(c=new a(c)),!Ar(c))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(d)||!d.every(Ar))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=c,this.args=d||[]}get name(){return this.fn.name||""}get type(){return W0}get isFunctionNode(){return!0}_compile(c,d){var h=this.args.map(F=>F._compile(c,d));if(Hn(this.fn)){var g=this.fn.name;if(d[g]){var y=this.args;return function(A,R,I){var O=Ni(R,g);if(typeof O!="function")throw new TypeError("Argument '".concat(g,"' was not a function; received: ").concat(s(O)));if(O.rawArgs)return O(y,c,sf(A,R));var U=h.map(D=>D(A,R,I));return O.apply(O,U)}}else{var m=g in c?Ni(c,g):void 0,v=typeof m=="function"&&m.rawArgs===!0,x=F=>{var A;if(F.has(g))A=F.get(g);else if(g in c)A=Ni(c,g);else return l.onUndefinedFunction(g);if(typeof A=="function")return A;throw new TypeError("'".concat(g,`' is not a function; its value is:
  `).concat(s(A)))};if(v){var b=this.args;return function(A,R,I){var O=x(A);if(O.rawArgs===!0)return O(b,c,sf(A,R));var U=h.map(D=>D(A,R,I));return O(...U)}}else switch(h.length){case 0:return function(A,R,I){var O=x(A);return O()};case 1:return function(A,R,I){var O=x(A),U=h[0];return O(U(A,R,I))};case 2:return function(A,R,I){var O=x(A),U=h[0],D=h[1];return O(U(A,R,I),D(A,R,I))};default:return function(A,R,I){var O=x(A),U=h.map(D=>D(A,R,I));return O(...U)}}}}else if(Ul(this.fn)&&Iu(this.fn.index)&&this.fn.index.isObjectProperty()){var S=this.fn.object._compile(c,d),_=this.fn.index.getObjectProperty(),N=this.args;return function(A,R,I){var O=S(A,R,I),U=AV(O,_);if(U!=null&&U.rawArgs)return U(N,c,sf(A,R));var D=h.map(H=>H(A,R,I));return U.apply(O,D)}}else{var j=this.fn.toString(),E=this.fn._compile(c,d),T=this.args;return function(A,R,I){var O=E(A,R,I);if(typeof O!="function")throw new TypeError("Expression '".concat(j,"' did not evaluate to a function; value is:")+`
  `.concat(s(O)));if(O.rawArgs)return O(T,c,sf(A,R));var U=h.map(D=>D(A,R,I));return O.apply(O,U)}}}forEach(c){c(this.fn,"fn",this);for(var d=0;d<this.args.length;d++)c(this.args[d],"args["+d+"]",this)}map(c){for(var d=this._ifNode(c(this.fn,"fn",this)),h=[],g=0;g<this.args.length;g++)h[g]=this._ifNode(c(this.args[g],"args["+g+"]",this));return new l(d,h)}clone(){return new l(this.fn,this.args.slice(0))}toString(c){var d,h=this.fn.toString(c);return c&&typeof c.handler=="object"&&Ct(c.handler,h)&&(d=c.handler[h](this,c)),typeof d<"u"?d:super.toString(c)}_toString(c){var d=this.args.map(function(g){return g.toString(c)}),h=Uf(this.fn)?"("+this.fn.toString(c)+")":this.fn.toString(c);return h+"("+d.join(", ")+")"}toJSON(){return{mathjs:W0,fn:this.fn,args:this.args}}_toHTML(c){var d=this.args.map(function(h){return h.toHTML(c)});return'<span class="math-function">'+_a(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+d.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(c){var d;return c&&typeof c.handler=="object"&&Ct(c.handler,this.name)&&(d=c.handler[this.name](this,c)),typeof d<"u"?d:super.toTex(c)}_toTex(c){var d=this.args.map(function(m){return m.toTex(c)}),h;mA[this.name]&&(h=mA[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var g;switch(typeof h){case"function":g=h(this,c);break;case"string":g=o(h,this,c);break;case"object":switch(typeof h[d.length]){case"function":g=h[d.length](this,c);break;case"string":g=o(h[d.length],this,c);break}}return typeof g<"u"?g:o(Bre,this,c)}getIdentifier(){return this.type+":"+this.name}}return e=l,Sn(l,"name",W0),Sn(l,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),Sn(l,"fromJSON",function(u){return new e(u.fn,u.args)}),l},{isClass:!0,isNode:!0}),gA="parse",nne=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],ine=Se(gA,nne,r=>{var{typed:e,numeric:t,config:n,AccessorNode:a,ArrayNode:s,AssignmentNode:o,BlockNode:l,ConditionalNode:u,ConstantNode:c,FunctionAssignmentNode:d,FunctionNode:h,IndexNode:g,ObjectNode:m,OperatorNode:v,ParenthesisNode:x,RangeNode:b,RelationalNode:y,SymbolNode:S}=r,_=e(gA,{string:function(be){return de(be,{})},"Array | Matrix":function(be){return N(be,{})},"string, Object":function(be,Fe){var $e=Fe.nodes!==void 0?Fe.nodes:{};return de(be,$e)},"Array | Matrix, Object":N});function N(ce){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fe=be.nodes!==void 0?be.nodes:{};return Yt(ce,function($e){if(typeof $e!="string")throw new TypeError("String expected");return de($e,Fe)})}var j={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},T={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},F={true:!0,false:!1,null:null,undefined:void 0},A=["NaN","Infinity"],R={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function I(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:j.NULL,nestingLevel:0,conditionalLevel:null}}function O(ce,be){return ce.expression.substr(ce.index,be)}function U(ce){return O(ce,1)}function D(ce){ce.index++}function H(ce){return ce.expression.charAt(ce.index-1)}function P(ce){return ce.expression.charAt(ce.index+1)}function G(ce){for(ce.tokenType=j.NULL,ce.token="",ce.comment="";;){if(U(ce)==="#")for(;U(ce)!==`
`&&U(ce)!=="";)ce.comment+=U(ce),D(ce);if(_.isWhitespace(U(ce),ce.nestingLevel))D(ce);else break}if(U(ce)===""){ce.tokenType=j.DELIMITER;return}if(U(ce)===`
`&&!ce.nestingLevel){ce.tokenType=j.DELIMITER,ce.token=U(ce),D(ce);return}var be=U(ce),Fe=O(ce,2),$e=O(ce,3);if($e.length===3&&E[$e]){ce.tokenType=j.DELIMITER,ce.token=$e,D(ce),D(ce),D(ce);return}if(Fe.length===2&&E[Fe]){ce.tokenType=j.DELIMITER,ce.token=Fe,D(ce),D(ce);return}if(E[be]){ce.tokenType=j.DELIMITER,ce.token=be,D(ce);return}if(_.isDigitDot(be)){ce.tokenType=j.NUMBER;var vt=O(ce,2);if(vt==="0b"||vt==="0o"||vt==="0x"){for(ce.token+=U(ce),D(ce),ce.token+=U(ce),D(ce);_.isHexDigit(U(ce));)ce.token+=U(ce),D(ce);if(U(ce)===".")for(ce.token+=".",D(ce);_.isHexDigit(U(ce));)ce.token+=U(ce),D(ce);else if(U(ce)==="i")for(ce.token+="i",D(ce);_.isDigit(U(ce));)ce.token+=U(ce),D(ce);return}if(U(ce)==="."){if(ce.token+=U(ce),D(ce),!_.isDigit(U(ce))){ce.tokenType=j.DELIMITER;return}}else{for(;_.isDigit(U(ce));)ce.token+=U(ce),D(ce);_.isDecimalMark(U(ce),P(ce))&&(ce.token+=U(ce),D(ce))}for(;_.isDigit(U(ce));)ce.token+=U(ce),D(ce);if(U(ce)==="E"||U(ce)==="e"){if(_.isDigit(P(ce))||P(ce)==="-"||P(ce)==="+"){if(ce.token+=U(ce),D(ce),(U(ce)==="+"||U(ce)==="-")&&(ce.token+=U(ce),D(ce)),!_.isDigit(U(ce)))throw it(ce,'Digit expected, got "'+U(ce)+'"');for(;_.isDigit(U(ce));)ce.token+=U(ce),D(ce);if(_.isDecimalMark(U(ce),P(ce)))throw it(ce,'Digit expected, got "'+U(ce)+'"')}else if(_.isDecimalMark(P(ce),ce.expression.charAt(ce.index+2)))throw D(ce),it(ce,'Digit expected, got "'+U(ce)+'"')}return}if(_.isAlpha(U(ce),H(ce),P(ce))){for(;_.isAlpha(U(ce),H(ce),P(ce))||_.isDigit(U(ce));)ce.token+=U(ce),D(ce);Ct(T,ce.token)?ce.tokenType=j.DELIMITER:ce.tokenType=j.SYMBOL;return}for(ce.tokenType=j.UNKNOWN;U(ce)!=="";)ce.token+=U(ce),D(ce);throw it(ce,'Syntax error in part "'+ce.token+'"')}function ue(ce){do G(ce);while(ce.token===`
`)}function le(ce){ce.nestingLevel++}function pe(ce){ce.nestingLevel--}_.isAlpha=function(be,Fe,$e){return _.isValidLatinOrGreek(be)||_.isValidMathSymbol(be,$e)||_.isValidMathSymbol(Fe,be)},_.isValidLatinOrGreek=function(be){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(be)},_.isValidMathSymbol=function(be,Fe){return/^[\uD835]$/.test(be)&&/^[\uDC00-\uDFFF]$/.test(Fe)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Fe)},_.isWhitespace=function(be,Fe){return be===" "||be==="	"||be===""||be===`
`&&Fe>0},_.isDecimalMark=function(be,Fe){return be==="."&&Fe!=="/"&&Fe!=="*"&&Fe!=="^"},_.isDigitDot=function(be){return be>="0"&&be<="9"||be==="."},_.isDigit=function(be){return be>="0"&&be<="9"},_.isHexDigit=function(be){return be>="0"&&be<="9"||be>="a"&&be<="f"||be>="A"&&be<="F"};function de(ce,be){var Fe=I();kn(Fe,{expression:ce,extraNodes:be}),G(Fe);var $e=L(Fe);if(Fe.token!=="")throw Fe.tokenType===j.DELIMITER?ht(Fe,"Unexpected operator "+Fe.token):it(Fe,'Unexpected part "'+Fe.token+'"');return $e}function L(ce){var be,Fe=[],$e;for(ce.token!==""&&ce.token!==`
`&&ce.token!==";"&&(be=X(ce),ce.comment&&(be.comment=ce.comment));ce.token===`
`||ce.token===";";)Fe.length===0&&be&&($e=ce.token!==";",Fe.push({node:be,visible:$e})),G(ce),ce.token!==`
`&&ce.token!==";"&&ce.token!==""&&(be=X(ce),ce.comment&&(be.comment=ce.comment),$e=ce.token!==";",Fe.push({node:be,visible:$e}));return Fe.length>0?new l(Fe):(be||(be=new c(void 0),ce.comment&&(be.comment=ce.comment)),be)}function X(ce){var be,Fe,$e,vt,Nt=V(ce);if(ce.token==="="){if(Hn(Nt))return be=Nt.name,ue(ce),$e=X(ce),new o(new S(be),$e);if(Ul(Nt))return ue(ce),$e=X(ce),new o(Nt.object,Nt.index,$e);if(Qo(Nt)&&Hn(Nt.fn)&&(vt=!0,Fe=[],be=Nt.name,Nt.args.forEach(function(Qt,Vr){Hn(Qt)?Fe[Vr]=Qt.name:vt=!1}),vt))return ue(ce),$e=X(ce),new d(be,Fe,$e);throw it(ce,"Invalid left hand side of assignment operator =")}return Nt}function V(ce){for(var be=se(ce);ce.token==="?";){var Fe=ce.conditionalLevel;ce.conditionalLevel=ce.nestingLevel,ue(ce);var $e=be,vt=X(ce);if(ce.token!==":")throw it(ce,"False part of conditional expression expected");ce.conditionalLevel=null,ue(ce);var Nt=X(ce);be=new u($e,vt,Nt),ce.conditionalLevel=Fe}return be}function se(ce){for(var be=ae(ce);ce.token==="or";)ue(ce),be=new v("or","or",[be,ae(ce)]);return be}function ae(ce){for(var be=W(ce);ce.token==="xor";)ue(ce),be=new v("xor","xor",[be,W(ce)]);return be}function W(ce){for(var be=z(ce);ce.token==="and";)ue(ce),be=new v("and","and",[be,z(ce)]);return be}function z(ce){for(var be=re(ce);ce.token==="|";)ue(ce),be=new v("|","bitOr",[be,re(ce)]);return be}function re(ce){for(var be=ne(ce);ce.token==="^|";)ue(ce),be=new v("^|","bitXor",[be,ne(ce)]);return be}function ne(ce){for(var be=ie(ce);ce.token==="&";)ue(ce),be=new v("&","bitAnd",[be,ie(ce)]);return be}function ie(ce){for(var be=[oe(ce)],Fe=[],$e={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ct($e,ce.token);){var vt={name:ce.token,fn:$e[ce.token]};Fe.push(vt),ue(ce),be.push(oe(ce))}return be.length===1?be[0]:be.length===2?new v(Fe[0].name,Fe[0].fn,be):new y(Fe.map(Nt=>Nt.fn),be)}function oe(ce){var be,Fe,$e,vt;be=ye(ce);for(var Nt={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ct(Nt,ce.token);)Fe=ce.token,$e=Nt[Fe],ue(ce),vt=[be,ye(ce)],be=new v(Fe,$e,vt);return be}function ye(ce){var be,Fe,$e,vt;be=M(ce);for(var Nt={to:"to",in:"to"};Ct(Nt,ce.token);)Fe=ce.token,$e=Nt[Fe],ue(ce),Fe==="in"&&"])},;".includes(ce.token)?be=new v("*","multiply",[be,new S("in")],!0):(vt=[be,M(ce)],be=new v(Fe,$e,vt));return be}function M(ce){var be,Fe=[];if(ce.token===":"?be=new c(1):be=ge(ce),ce.token===":"&&ce.conditionalLevel!==ce.nestingLevel){for(Fe.push(be);ce.token===":"&&Fe.length<3;)ue(ce),ce.token===")"||ce.token==="]"||ce.token===","||ce.token===""?Fe.push(new S("end")):Fe.push(ge(ce));Fe.length===3?be=new b(Fe[0],Fe[2],Fe[1]):be=new b(Fe[0],Fe[1])}return be}function ge(ce){var be,Fe,$e,vt;be=ee(ce);for(var Nt={"+":"add","-":"subtract"};Ct(Nt,ce.token);){Fe=ce.token,$e=Nt[Fe],ue(ce);var Qt=ee(ce);Qt.isPercentage?vt=[be,new v("*","multiply",[be,Qt])]:vt=[be,Qt],be=new v(Fe,$e,vt)}return be}function ee(ce){var be,Fe,$e,vt;be=k(ce),Fe=be;for(var Nt={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ct(Nt,ce.token);)if($e=ce.token,vt=Nt[$e],ue(ce),$e==="%"&&ce.tokenType===j.DELIMITER&&ce.token!=="(")if(ce.token!==""&&Nt[ce.token]){var Qt=new v("/","divide",[be,new c(100)],!1,!0);$e=ce.token,vt=Nt[$e],ue(ce),Fe=k(ce),be=new v($e,vt,[Qt,Fe])}else be=new v("/","divide",[be,new c(100)],!1,!0);else Fe=k(ce),be=new v($e,vt,[be,Fe]);return be}function k(ce){var be,Fe;for(be=B(ce),Fe=be;ce.tokenType===j.SYMBOL||ce.token==="in"&&dr(be)||ce.token==="in"&&pn(be)&&be.fn==="unaryMinus"&&dr(be.args[0])||ce.tokenType===j.NUMBER&&!dr(Fe)&&(!pn(Fe)||Fe.op==="!")||ce.token==="(";)Fe=B(ce),be=new v("*","multiply",[be,Fe],!0);return be}function B(ce){for(var be=Q(ce),Fe=be,$e=[];ce.token==="/"&&wy(Fe);)if($e.push(kn({},ce)),ue(ce),ce.tokenType===j.NUMBER)if($e.push(kn({},ce)),ue(ce),ce.tokenType===j.SYMBOL||ce.token==="("||ce.token==="in")kn(ce,$e.pop()),$e.pop(),Fe=Q(ce),be=new v("/","divide",[be,Fe]);else{$e.pop(),kn(ce,$e.pop());break}else{kn(ce,$e.pop());break}return be}function Q(ce){var be,Fe,$e,vt={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ct(vt,ce.token)?($e=vt[ce.token],be=ce.token,ue(ce),Fe=[Q(ce)],new v(be,$e,Fe)):Z(ce)}function Z(ce){var be,Fe,$e,vt;return be=J(ce),(ce.token==="^"||ce.token===".^")&&(Fe=ce.token,$e=Fe==="^"?"pow":"dotPow",ue(ce),vt=[be,Q(ce)],be=new v(Fe,$e,vt)),be}function J(ce){var be,Fe,$e,vt;be=K(ce);for(var Nt={"!":"factorial","'":"ctranspose"};Ct(Nt,ce.token);)Fe=ce.token,$e=Nt[Fe],G(ce),vt=[be],be=new v(Fe,$e,vt),be=me(ce,be);return be}function K(ce){var be=[];if(ce.tokenType===j.SYMBOL&&Ct(ce.extraNodes,ce.token)){var Fe=ce.extraNodes[ce.token];if(G(ce),ce.token==="("){if(be=[],le(ce),G(ce),ce.token!==")")for(be.push(X(ce));ce.token===",";)G(ce),be.push(X(ce));if(ce.token!==")")throw it(ce,"Parenthesis ) expected");pe(ce),G(ce)}return new Fe(be)}return te(ce)}function te(ce){var be,Fe;return ce.tokenType===j.SYMBOL||ce.tokenType===j.DELIMITER&&ce.token in T?(Fe=ce.token,G(ce),Ct(F,Fe)?be=new c(F[Fe]):A.includes(Fe)?be=new c(t(Fe,"number")):be=new S(Fe),be=me(ce,be),be):fe(ce)}function me(ce,be,Fe){for(var $e;ce.token==="("||ce.token==="["||ce.token===".";)if($e=[],ce.token==="(")if(Hn(be)||Ul(be)){if(le(ce),G(ce),ce.token!==")")for($e.push(X(ce));ce.token===",";)G(ce),$e.push(X(ce));if(ce.token!==")")throw it(ce,"Parenthesis ) expected");pe(ce),G(ce),be=new h(be,$e)}else return be;else if(ce.token==="["){if(le(ce),G(ce),ce.token!=="]")for($e.push(X(ce));ce.token===",";)G(ce),$e.push(X(ce));if(ce.token!=="]")throw it(ce,"Parenthesis ] expected");pe(ce),G(ce),be=new a(be,new g($e))}else{G(ce);var vt=ce.tokenType===j.SYMBOL||ce.tokenType===j.DELIMITER&&ce.token in T;if(!vt)throw it(ce,"Property name expected after dot");$e.push(new c(ce.token)),G(ce);var Nt=!0;be=new a(be,new g($e,Nt))}return be}function fe(ce){var be,Fe;return ce.token==='"'||ce.token==="'"?(Fe=xe(ce,ce.token),be=new c(Fe),be=me(ce,be),be):_e(ce)}function xe(ce,be){for(var Fe="";U(ce)!==""&&U(ce)!==be;)if(U(ce)==="\\"){D(ce);var $e=U(ce),vt=R[$e];if(vt!==void 0)Fe+=vt,ce.index+=1;else if($e==="u"){var Nt=ce.expression.slice(ce.index+1,ce.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Nt))Fe+=String.fromCharCode(parseInt(Nt,16)),ce.index+=5;else throw it(ce,"Invalid unicode character \\u".concat(Nt))}else throw it(ce,"Bad escape character \\".concat($e))}else Fe+=U(ce),D(ce);if(G(ce),ce.token!==be)throw it(ce,"End of string ".concat(be," expected"));return G(ce),Fe}function _e(ce){var be,Fe,$e,vt;if(ce.token==="["){if(le(ce),G(ce),ce.token!=="]"){var Nt=je(ce);if(ce.token===";"){for($e=1,Fe=[Nt];ce.token===";";)G(ce),ce.token!=="]"&&(Fe[$e]=je(ce),$e++);if(ce.token!=="]")throw it(ce,"End of matrix ] expected");pe(ce),G(ce),vt=Fe[0].items.length;for(var Qt=1;Qt<$e;Qt++)if(Fe[Qt].items.length!==vt)throw ht(ce,"Column dimensions mismatch ("+Fe[Qt].items.length+" !== "+vt+")");be=new s(Fe)}else{if(ce.token!=="]")throw it(ce,"End of matrix ] expected");pe(ce),G(ce),be=Nt}}else pe(ce),G(ce),be=new s([]);return me(ce,be)}return Be(ce)}function je(ce){for(var be=[X(ce)],Fe=1;ce.token===",";)G(ce),ce.token!=="]"&&ce.token!==";"&&(be[Fe]=X(ce),Fe++);return new s(be)}function Be(ce){if(ce.token==="{"){le(ce);var be,Fe={};do if(G(ce),ce.token!=="}"){if(ce.token==='"'||ce.token==="'")be=xe(ce,ce.token);else if(ce.tokenType===j.SYMBOL||ce.tokenType===j.DELIMITER&&ce.token in T)be=ce.token,G(ce);else throw it(ce,"Symbol or string expected as object key");if(ce.token!==":")throw it(ce,"Colon : expected after object key");G(ce),Fe[be]=X(ce)}while(ce.token===",");if(ce.token!=="}")throw it(ce,"Comma , or bracket } expected after object value");pe(ce),G(ce);var $e=new m(Fe);return $e=me(ce,$e),$e}return Re(ce)}function Re(ce){var be;if(ce.tokenType===j.NUMBER){be=ce.token,G(ce);var Fe=el(be,n),$e=t(be,Fe);return new c($e)}return ze(ce)}function ze(ce){var be;if(ce.token==="("){if(le(ce),G(ce),be=X(ce),ce.token!==")")throw it(ce,"Parenthesis ) expected");return pe(ce),G(ce),be=new x(be),be=me(ce,be),be}return Ye(ce)}function Ye(ce){throw ce.token===""?it(ce,"Unexpected end of expression"):it(ce,"Value expected")}function Le(ce){return ce.index-ce.token.length+1}function it(ce,be){var Fe=Le(ce),$e=new SyntaxError(be+" (char "+Fe+")");return $e.char=Fe,$e}function ht(ce,be){var Fe=Le(ce),$e=new SyntaxError(be+" (char "+Fe+")");return $e.char=Fe,$e}return e.addConversion({from:"string",to:"Node",convert:_}),_}),xA="compile",ane=["typed","parse"],sne=Se(xA,ane,r=>{var{typed:e,parse:t}=r;return e(xA,{string:function(a){return t(a).compile()},"Array | Matrix":function(a){return Yt(a,function(s){return t(s).compile()})}})}),vA="evaluate",one=["typed","parse"],lne=Se(vA,one,r=>{var{typed:e,parse:t}=r;return e(vA,{string:function(a){var s=Sf();return t(a).compile().evaluate(s)},"string, Map | Object":function(a,s){return t(a).compile().evaluate(s)},"Array | Matrix":function(a){var s=Sf();return Yt(a,function(o){return t(o).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(a,s){return Yt(a,function(o){return t(o).compile().evaluate(s)})}})}),cne="Parser",une=["evaluate","parse"],dne=Se(cne,une,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Sf(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(s){return e(s,this.scope)},n.prototype.get=function(s){if(this.scope.has(s))return this.scope.get(s)},n.prototype.getAll=function(){return kV(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function a(s){if(s.length===0)return!1;for(var o=0;o<s.length;o++){var l=s.charAt(o-1),u=s.charAt(o),c=s.charAt(o+1),d=t.isAlpha(u,l,c)||o>0&&t.isDigit(u);if(!d)return!1}return!0}return n.prototype.set=function(s,o){if(!a(s))throw new Error("Invalid variable name: '".concat(s,"'. Variable names must follow the specified rules."));return this.scope.set(s,o),o},n.prototype.remove=function(s){this.scope.delete(s)},n.prototype.clear=function(){this.scope.clear()},n},{isClass:!0}),yA="parser",fne=["typed","Parser"],hne=Se(yA,fne,r=>{var{typed:e,Parser:t}=r;return e(yA,{"":function(){return new t}})}),bA="lup",mne=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],pne=Se(bA,mne,r=>{var{typed:e,matrix:t,abs:n,addScalar:a,divideScalar:s,multiplyScalar:o,subtractScalar:l,larger:u,equalScalar:c,unaryMinus:d,DenseMatrix:h,SparseMatrix:g,Spa:m}=r;return e(bA,{DenseMatrix:function(y){return v(y)},SparseMatrix:function(y){return x(y)},Array:function(y){var S=t(y),_=v(S);return{L:_.L.valueOf(),U:_.U.valueOf(),p:_.p}}});function v(b){var y=b._size[0],S=b._size[1],_=Math.min(y,S),N=Ht(b._data),j=[],E=[y,_],T=[],F=[_,S],A,R,I,O=[];for(A=0;A<y;A++)O[A]=A;for(R=0;R<S;R++){if(R>0)for(A=0;A<y;A++){var U=Math.min(A,R),D=0;for(I=0;I<U;I++)D=a(D,o(N[A][I],N[I][R]));N[A][R]=l(N[A][R],D)}var H=R,P=0,G=0;for(A=R;A<y;A++){var ue=N[A][R],le=n(ue);u(le,P)&&(H=A,P=le,G=ue)}if(R!==H&&(O[R]=[O[H],O[H]=O[R]][0],h._swapRows(R,H,N)),R<y)for(A=R+1;A<y;A++){var pe=N[A][R];c(pe,0)||(N[A][R]=s(N[A][R],G))}}for(R=0;R<S;R++)for(A=0;A<y;A++){if(R===0&&(A<S&&(T[A]=[]),j[A]=[]),A<R){A<S&&(T[A][R]=N[A][R]),R<y&&(j[A][R]=0);continue}if(A===R){A<S&&(T[A][R]=N[A][R]),R<y&&(j[A][R]=1);continue}A<S&&(T[A][R]=0),R<y&&(j[A][R]=N[A][R])}var de=new h({data:j,size:E}),L=new h({data:T,size:F}),X=[];for(A=0,_=O.length;A<_;A++)X[O[A]]=A;return{L:de,U:L,p:X,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function x(b){var y=b._size[0],S=b._size[1],_=Math.min(y,S),N=b._values,j=b._index,E=b._ptr,T=[],F=[],A=[],R=[y,_],I=[],O=[],U=[],D=[_,S],H,P,G,ue=[],le=[];for(H=0;H<y;H++)ue[H]=H,le[H]=H;var pe=function(X,V){var se=le[X],ae=le[V];ue[se]=V,ue[ae]=X,le[X]=ae,le[V]=se},de=function(){var X=new m;P<y&&(A.push(T.length),T.push(1),F.push(P)),U.push(I.length);var V=E[P],se=E[P+1];for(G=V;G<se;G++)H=j[G],X.set(ue[H],N[G]);P>0&&X.forEach(0,P-1,function(re,ne){g._forEachRow(re,T,F,A,function(ie,oe){ie>re&&X.accumulate(ie,d(o(oe,ne)))})});var ae=P,W=X.get(P),z=n(W);X.forEach(P+1,y-1,function(re,ne){var ie=n(ne);u(ie,z)&&(ae=re,z=ie,W=ne)}),P!==ae&&(g._swapRows(P,ae,R[1],T,F,A),g._swapRows(P,ae,D[1],I,O,U),X.swap(P,ae),pe(P,ae)),X.forEach(0,y-1,function(re,ne){re<=P?(I.push(ne),O.push(re)):(ne=s(ne,W),c(ne,0)||(T.push(ne),F.push(re)))})};for(P=0;P<S;P++)de();return U.push(I.length),A.push(T.length),{L:new g({values:T,index:F,ptr:A,size:R}),U:new g({values:I,index:O,ptr:U,size:D}),p:ue,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),wA="qr",gne=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],xne=Se(wA,gne,r=>{var{typed:e,matrix:t,zeros:n,identity:a,isZero:s,equal:o,sign:l,sqrt:u,conj:c,unaryMinus:d,addScalar:h,divideScalar:g,multiplyScalar:m,subtractScalar:v,complex:x}=r;return kn(e(wA,{DenseMatrix:function(N){return y(N)},SparseMatrix:function(N){return S()},Array:function(N){var j=t(N),E=y(j);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:b});function b(_){var N=_._size[0],j=_._size[1],E=a([N],"dense"),T=E._data,F=_.clone(),A=F._data,R,I,O,U=n([N],"");for(O=0;O<Math.min(j,N);++O){var D=A[O][O],H=d(o(D,0)?1:l(D)),P=c(H),G=0;for(R=O;R<N;R++)G=h(G,m(A[R][O],c(A[R][O])));var ue=m(H,u(G));if(!s(ue)){var le=v(D,ue);for(U[O]=1,R=O+1;R<N;R++)U[R]=g(A[R][O],le);var pe=d(c(g(le,ue))),de=void 0;for(I=O;I<j;I++){for(de=0,R=O;R<N;R++)de=h(de,m(c(U[R]),A[R][I]));for(de=m(de,pe),R=O;R<N;R++)A[R][I]=m(v(A[R][I],m(U[R],de)),P)}for(R=0;R<N;R++){for(de=0,I=O;I<N;I++)de=h(de,m(T[R][I],U[I]));for(de=m(de,pe),I=O;I<N;++I)T[R][I]=g(v(T[R][I],m(de,c(U[I]))),P)}}}return{Q:E,R:F,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(_){var N=b(_),j=N.R._data;if(_._data.length>0)for(var E=j[0][0].type==="Complex"?x(0):0,T=0;T<j.length;++T)for(var F=0;F<T&&F<(j[0]||[]).length;++F)j[T][F]=E;return N}function S(_){throw new Error("qr not implemented for sparse matrices yet")}});function vne(r,e,t,n){r._values;for(var a=r._index,s=r._ptr,o=r._size,l=r._datatype,u=o[0],c=o[1],d=null,h=[],g=[],m=0,v=0;v<c;v++){g[v]=m;for(var x=t?t[v]:v,b=s[x],y=s[x+1],S=b;S<y;S++){var _=a[S];h[m]=_,m++}}return g[c]=m,r.createSparseMatrix({values:d,index:h,ptr:g,size:[u,c],datatype:l})}function sk(r,e,t,n,a,s,o){var l=0;for(t[o]=r;l>=0;){var u=t[o+l],c=t[n+u];c===-1?(l--,s[e++]=u):(t[n+u]=t[a+c],++l,t[o+l]=c)}return e}function yne(r,e){if(!r)return null;var t=0,n,a=[],s=[],o=0,l=e,u=2*e;for(n=0;n<e;n++)s[o+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(s[l+n]=s[o+r[n]],s[o+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=sk(n,t,s,o,l,a,u));return a}function bne(r,e){if(!r)return null;var t=r._index,n=r._ptr,a=r._size,s=a[0],o=a[1],l=[],u=[],c=0,d=o,h,g;for(h=0;h<s;h++)u[d+h]=-1;for(var m=0;m<o;m++){l[m]=-1,u[c+m]=-1;for(var v=n[m],x=n[m+1],b=v;b<x;b++){var y=t[b];for(h=u[d+y];h!==-1&&h<m;h=g)g=u[c+h],u[c+h]=m,g===-1&&(l[h]=m);u[d+y]=m}}return l}function wne(r,e,t){for(var n=r._values,a=r._index,s=r._ptr,o=r._size,l=o[1],u=0,c=0;c<l;c++){var d=s[c];for(s[c]=u;d<s[c+1];d++)e(a[d],c,n?n[d]:1,t)&&(a[u]=a[d],n&&(n[u]=n[d]),u++)}return s[l]=u,a.splice(u,a.length-u),n&&n.splice(u,n.length-u),u}function Oo(r){return-r-2}var _ne="csAmd",Nne=["add","multiply","transpose"],Sne=Se(_ne,Nne,r=>{var{add:e,multiply:t,transpose:n}=r;return function(d,h){if(!h||d<=0||d>3)return null;var g=h._size,m=g[0],v=g[1],x=0,b=Math.max(16,10*Math.sqrt(v));b=Math.min(v-2,b);var y=a(d,h,m,v,b);wne(y,u,null);for(var S=y._index,_=y._ptr,N=_[v],j=[],E=[],T=0,F=v+1,A=2*(v+1),R=3*(v+1),I=4*(v+1),O=5*(v+1),U=6*(v+1),D=7*(v+1),H=j,P=s(v,_,E,T,R,H,A,D,F,U,I,O),G=o(v,_,E,O,I,U,b,F,R,H,A),ue=0,le,pe,de,L,X,V,se,ae,W,z,re,ne,ie,oe,ye,M;G<v;){for(de=-1;ue<v&&(de=E[R+ue])===-1;ue++);E[A+de]!==-1&&(H[E[A+de]]=-1),E[R+ue]=E[A+de];var ge=E[I+de],ee=E[F+de];G+=ee;var k=0;E[F+de]=-ee;var B=_[de],Q=ge===0?B:N,Z=Q;for(L=1;L<=ge+1;L++){for(L>ge?(V=de,se=B,ae=E[T+de]-ge):(V=S[B++],se=_[V],ae=E[T+V]),X=1;X<=ae;X++)le=S[se++],!((W=E[F+le])<=0)&&(k+=W,E[F+le]=-W,S[Z++]=le,E[A+le]!==-1&&(H[E[A+le]]=H[le]),H[le]!==-1?E[A+H[le]]=E[A+le]:E[R+E[O+le]]=E[A+le]);V!==de&&(_[V]=Oo(de),E[U+V]=0)}for(ge!==0&&(N=Z),E[O+de]=k,_[de]=Q,E[T+de]=Z-Q,E[I+de]=-2,P=l(P,x,E,U,v),z=Q;z<Z;z++)if(le=S[z],!((re=E[I+le])<=0)){W=-E[F+le];var J=P-W;for(B=_[le],ne=_[le]+re-1;B<=ne;B++)V=S[B],E[U+V]>=P?E[U+V]-=W:E[U+V]!==0&&(E[U+V]=E[O+V]+J)}for(z=Q;z<Z;z++){for(le=S[z],ne=_[le],ie=ne+E[I+le]-1,oe=ne,ye=0,M=0,B=ne;B<=ie;B++)if(V=S[B],E[U+V]!==0){var K=E[U+V]-P;K>0?(M+=K,S[oe++]=V,ye+=V):(_[V]=Oo(de),E[U+V]=0)}E[I+le]=oe-ne+1;var te=oe,me=ne+E[T+le];for(B=ie+1;B<me;B++){pe=S[B];var fe=E[F+pe];fe<=0||(M+=fe,S[oe++]=pe,ye+=pe)}M===0?(_[le]=Oo(de),W=-E[F+le],k-=W,ee+=W,G+=W,E[F+le]=0,E[I+le]=-1):(E[O+le]=Math.min(E[O+le],M),S[oe]=S[te],S[te]=S[ne],S[ne]=de,E[T+le]=oe-ne+1,ye=(ye<0?-ye:ye)%v,E[A+le]=E[D+ye],E[D+ye]=le,H[le]=ye)}for(E[O+de]=k,x=Math.max(x,k),P=l(P+x,x,E,U,v),z=Q;z<Z;z++)if(le=S[z],!(E[F+le]>=0))for(ye=H[le],le=E[D+ye],E[D+ye]=-1;le!==-1&&E[A+le]!==-1;le=E[A+le],P++){for(ae=E[T+le],re=E[I+le],B=_[le]+1;B<=_[le]+ae-1;B++)E[U+S[B]]=P;var xe=le;for(pe=E[A+le];pe!==-1;){var _e=E[T+pe]===ae&&E[I+pe]===re;for(B=_[pe]+1;_e&&B<=_[pe]+ae-1;B++)E[U+S[B]]!==P&&(_e=0);_e?(_[pe]=Oo(le),E[F+le]+=E[F+pe],E[F+pe]=0,E[I+pe]=-1,pe=E[A+pe],E[A+xe]=pe):(xe=pe,pe=E[A+pe])}}for(B=Q,z=Q;z<Z;z++)le=S[z],!((W=-E[F+le])<=0)&&(E[F+le]=W,M=E[O+le]+k-W,M=Math.min(M,v-G-W),E[R+M]!==-1&&(H[E[R+M]]=le),E[A+le]=E[R+M],H[le]=-1,E[R+M]=le,ue=Math.min(ue,M),E[O+le]=M,S[B++]=le);E[F+de]=ee,(E[T+de]=B-Q)===0&&(_[de]=-1,E[U+de]=0),ge!==0&&(N=B)}for(le=0;le<v;le++)_[le]=Oo(_[le]);for(pe=0;pe<=v;pe++)E[R+pe]=-1;for(pe=v;pe>=0;pe--)E[F+pe]>0||(E[A+pe]=E[R+_[pe]],E[R+_[pe]]=pe);for(V=v;V>=0;V--)E[F+V]<=0||_[V]!==-1&&(E[A+V]=E[R+_[V]],E[R+_[V]]=V);for(de=0,le=0;le<=v;le++)_[le]===-1&&(de=sk(le,de,E,R,A,j,U));return j.splice(j.length-1,1),j};function a(c,d,h,g,m){var v=n(d);if(c===1&&g===h)return e(d,v);if(c===2){for(var x=v._index,b=v._ptr,y=0,S=0;S<h;S++){var _=b[S];if(b[S]=y,!(b[S+1]-_>m))for(var N=b[S+1];_<N;_++)x[y++]=x[_]}return b[h]=y,d=n(v),t(v,d)}return t(v,d)}function s(c,d,h,g,m,v,x,b,y,S,_,N){for(var j=0;j<c;j++)h[g+j]=d[j+1]-d[j];h[g+c]=0;for(var E=0;E<=c;E++)h[m+E]=-1,v[E]=-1,h[x+E]=-1,h[b+E]=-1,h[y+E]=1,h[S+E]=1,h[_+E]=0,h[N+E]=h[g+E];var T=l(0,0,h,S,c);return h[_+c]=-2,d[c]=-1,h[S+c]=0,T}function o(c,d,h,g,m,v,x,b,y,S,_){for(var N=0,j=0;j<c;j++){var E=h[g+j];if(E===0)h[m+j]=-2,N++,d[j]=-1,h[v+j]=0;else if(E>x)h[b+j]=0,h[m+j]=-1,N++,d[j]=Oo(c),h[b+c]++;else{var T=h[y+E];T!==-1&&(S[T]=j),h[_+j]=h[y+E],h[y+E]=j}}return N}function l(c,d,h,g,m){if(c<2||c+d<0){for(var v=0;v<m;v++)h[g+v]!==0&&(h[g+v]=1);c=2}return c}function u(c,d){return c!==d}});function jne(r,e,t,n,a,s,o){var l,u,c=0,d;if(r<=e||t[n+e]<=t[a+r])return-1;t[a+r]=t[n+e];var h=t[s+r];if(t[s+r]=e,h===-1)c=1,d=r;else{for(c=2,d=h;d!==t[o+d];d=t[o+d]);for(l=h;l!==d;l=u)u=t[o+l],t[o+l]=d}return{jleaf:c,q:d}}var Ene="csCounts",Ane=["transpose"],Tne=Se(Ene,Ane,r=>{var{transpose:e}=r;return function(t,n,a,s){if(!t||!n||!a)return null;var o=t._size,l=o[0],u=o[1],c,d,h,g,m,v,x,b=4*u+(s?u+l+1:0),y=[],S=0,_=u,N=2*u,j=3*u,E=4*u,T=5*u+1;for(h=0;h<b;h++)y[h]=-1;var F=[],A=e(t),R=A._index,I=A._ptr;for(h=0;h<u;h++)for(d=a[h],F[d]=y[j+d]===-1?1:0;d!==-1&&y[j+d]===-1;d=n[d])y[j+d]=h;if(s){for(h=0;h<u;h++)y[a[h]]=h;for(c=0;c<l;c++){for(h=u,v=I[c],x=I[c+1],m=v;m<x;m++)h=Math.min(h,y[R[m]]);y[T+c]=y[E+h],y[E+h]=c}}for(c=0;c<u;c++)y[S+c]=c;for(h=0;h<u;h++){for(d=a[h],n[d]!==-1&&F[n[d]]--,g=s?y[E+h]:d;g!==-1;g=s?y[T+g]:-1)for(m=I[g];m<I[g+1];m++){c=R[m];var O=jne(c,d,y,j,_,N,S);O.jleaf>=1&&F[d]++,O.jleaf===2&&F[O.q]--}n[d]!==-1&&(y[S+d]=n[d])}for(d=0;d<u;d++)n[d]!==-1&&(F[n[d]]+=F[d]);return F}}),Cne="csSqr",Dne=["add","multiply","transpose"],kne=Se(Cne,Dne,r=>{var{add:e,multiply:t,transpose:n}=r,a=Sne({add:e,multiply:t,transpose:n}),s=Tne({transpose:n});return function(u,c,d){var h=c._ptr,g=c._size,m=g[1],v,x={};if(x.q=a(u,c),u&&!x.q)return null;if(d){var b=u?vne(c,null,x.q):c;x.parent=bne(b);var y=yne(x.parent,m);if(x.cp=s(b,x.parent,y,1),b&&x.parent&&x.cp&&o(b,x))for(x.unz=0,v=0;v<m;v++)x.unz+=x.cp[v]}else x.unz=4*h[m]+m,x.lnz=x.unz;return x};function o(l,u){var c=l._ptr,d=l._index,h=l._size,g=h[0],m=h[1];u.pinv=[],u.leftmost=[];var v=u.parent,x=u.pinv,b=u.leftmost,y=[],S=0,_=g,N=g+m,j=g+2*m,E,T,F,A,R;for(T=0;T<m;T++)y[_+T]=-1,y[N+T]=-1,y[j+T]=0;for(E=0;E<g;E++)b[E]=-1;for(T=m-1;T>=0;T--)for(A=c[T],R=c[T+1],F=A;F<R;F++)b[d[F]]=T;for(E=g-1;E>=0;E--)x[E]=-1,T=b[E],T!==-1&&(y[j+T]++===0&&(y[N+T]=E),y[S+E]=y[_+T],y[_+T]=E);for(u.lnz=0,u.m2=g,T=0;T<m;T++)if(E=y[_+T],u.lnz++,E<0&&(E=u.m2++),x[E]=T,!(--j[T]<=0)){u.lnz+=y[j+T];var I=v[T];I!==-1&&(y[j+I]===0&&(y[N+I]=y[N+T]),y[S+y[N+T]]=y[_+I],y[_+I]=y[S+E],y[j+I]+=y[j+T])}for(E=0;E<g;E++)x[E]<0&&(x[E]=T++);return!0}});function qy(r,e){return r[e]<0}function ok(r,e){r[e]=Oo(r[e])}function _A(r){return r<0?Oo(r):r}function Mne(r,e,t,n,a){var s=e._index,o=e._ptr,l=e._size,u=l[1],c,d,h,g=0;for(n[0]=r;g>=0;){r=n[g];var m=a?a[r]:r;qy(o,r)||(ok(o,r),n[u+g]=m<0?0:_A(o[m]));var v=1;for(d=n[u+g],h=m<0?0:_A(o[m+1]);d<h;d++)if(c=s[d],!qy(o,c)){n[u+g]=d,n[++g]=c,v=0;break}v&&(g--,n[--t]=r)}return t}function Fne(r,e,t,n,a){var s=r._ptr,o=r._size,l=e._index,u=e._ptr,c=o[1],d,h,g,m=c;for(h=u[t],g=u[t+1],d=h;d<g;d++){var v=l[d];qy(s,v)||(m=Mne(v,r,m,n,a))}for(d=m;d<c;d++)ok(s,n[d]);return m}var One="csSpsolve",Bne=["divideScalar","multiply","subtract"],Rne=Se(One,Bne,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(s,o,l,u,c,d,h){var g=s._values,m=s._index,v=s._ptr,x=s._size,b=x[1],y=o._values,S=o._index,_=o._ptr,N,j,E,T,F=Fne(s,o,l,u,d);for(N=F;N<b;N++)c[u[N]]=0;for(j=_[l],E=_[l+1],N=j;N<E;N++)c[S[N]]=y[N];for(var A=F;A<b;A++){var R=u[A],I=d?d[R]:R;if(!(I<0))for(j=v[I],E=v[I+1],c[R]=e(c[R],g[h?j:E-1]),N=h?j+1:j,T=h?E:E-1;N<T;N++){var O=m[N];c[O]=n(c[O],t(g[N],c[R]))}}return F}}),Lne="csLu",Ine=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],zne=Se(Lne,Ine,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:a,larger:s,largerEq:o,SparseMatrix:l}=r,u=Rne({divideScalar:t,multiply:n,subtract:a});return function(d,h,g){if(!d)return null;var m=d._size,v=m[1],x,b=100,y=100;h&&(x=h.q,b=h.lnz||b,y=h.unz||y);var S=[],_=[],N=[],j=new l({values:S,index:_,ptr:N,size:[v,v]}),E=[],T=[],F=[],A=new l({values:E,index:T,ptr:F,size:[v,v]}),R=[],I,O,U=[],D=[];for(I=0;I<v;I++)U[I]=0,R[I]=-1,N[I+1]=0;b=0,y=0;for(var H=0;H<v;H++){N[H]=b,F[H]=y;var P=x?x[H]:H,G=u(j,d,P,D,U,R,1),ue=-1,le=-1;for(O=G;O<v;O++)if(I=D[O],R[I]<0){var pe=e(U[I]);s(pe,le)&&(le=pe,ue=I)}else T[y]=R[I],E[y++]=U[I];if(ue===-1||le<=0)return null;R[P]<0&&o(e(U[P]),n(le,g))&&(ue=P);var de=U[ue];for(T[y]=H,E[y++]=de,R[ue]=H,_[b]=ue,S[b++]=1,O=G;O<v;O++)I=D[O],R[I]<0&&(_[b]=I,S[b++]=t(U[I],de)),U[I]=0}for(N[v]=b,F[v]=y,O=0;O<b;O++)_[O]=R[_[O]];return S.splice(b,S.length-b),_.splice(b,_.length-b),E.splice(y,E.length-y),T.splice(y,T.length-y),{L:j,U:A,pinv:R}}}),NA="slu",Pne=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],qne=Se(NA,Pne,r=>{var{typed:e,abs:t,add:n,multiply:a,transpose:s,divideScalar:o,subtract:l,larger:u,largerEq:c,SparseMatrix:d}=r,h=kne({add:n,multiply:a,transpose:s}),g=zne({abs:t,divideScalar:o,multiply:a,subtract:l,larger:u,largerEq:c,SparseMatrix:d});return e(NA,{"SparseMatrix, number, number":function(v,x,b){if(!kt(x)||x<0||x>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(b<0||b>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=h(x,v,!1),S=g(v,y,b);return{L:S.L,U:S.U,p:S.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function SA(r,e){var t,n=e.length,a=[];if(r)for(t=0;t<n;t++)a[r[t]]=e[t];else for(t=0;t<n;t++)a[t]=e[t];return a}var jA="lusolve",$ne=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Une=Se(jA,$ne,r=>{var{typed:e,matrix:t,lup:n,slu:a,usolve:s,lsolve:o,DenseMatrix:l}=r,u=Vf({DenseMatrix:l});return e(jA,{"Array, Array | Matrix":function(g,m){g=t(g);var v=n(g),x=d(v.L,v.U,v.p,null,m);return x.valueOf()},"DenseMatrix, Array | Matrix":function(g,m){var v=n(g);return d(v.L,v.U,v.p,null,m)},"SparseMatrix, Array | Matrix":function(g,m){var v=n(g);return d(v.L,v.U,v.p,null,m)},"SparseMatrix, Array | Matrix, number, number":function(g,m,v,x){var b=a(g,v,x);return d(b.L,b.U,b.p,b.q,m)},"Object, Array | Matrix":function(g,m){return d(g.L,g.U,g.p,g.q,m)}});function c(h){if(Lt(h))return h;if(Mr(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function d(h,g,m,v,x){h=c(h),g=c(g),m&&(x=u(h,x,!0),x._data=SA(m,x._data));var b=o(h,x),y=s(g,b);return v&&(y._data=SA(v,y._data)),y}}),EA="polynomialRoot",Hne=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],Vne=Se(EA,Hne,r=>{var{typed:e,isZero:t,equalScalar:n,add:a,subtract:s,multiply:o,divide:l,sqrt:u,unaryMinus:c,cbrt:d,typeOf:h,im:g,re:m}=r;return e(EA,{"number|Complex, ...number|Complex":(v,x)=>{for(var b=[v,...x];b.length>0&&t(b[b.length-1]);)b.pop();if(b.length<2)throw new RangeError("Polynomial [".concat(v,", ").concat(x,"] must have a non-zero non-constant coefficient"));switch(b.length){case 2:return[c(l(b[0],b[1]))];case 3:{var[y,S,_]=b,N=o(2,_),j=o(S,S),E=o(4,_,y);if(n(j,E))return[l(c(S),N)];var T=u(s(j,E));return[l(s(T,S),N),l(s(c(T),S),N)]}case 4:{var[F,A,R,I]=b,O=c(o(3,I)),U=o(R,R),D=o(3,I,A),H=a(o(2,R,R,R),o(27,I,I,F)),P=o(9,I,R,A);if(n(U,D)&&n(H,P))return[l(R,O)];var G=s(U,D),ue=s(H,P),le=a(o(18,I,R,A,F),o(R,R,A,A)),pe=a(o(4,R,R,R,F),o(4,I,A,A,A),o(27,I,I,F,F));if(n(le,pe))return[l(s(o(4,I,R,A),a(o(9,I,I,F),o(R,R,R))),o(I,G)),l(s(o(9,I,F),o(R,A)),o(2,G))];var de;n(U,D)?de=ue:de=l(a(ue,u(s(o(ue,ue),o(4,G,G,G)))),2);var L=!0,X=d(de,L).toArray().map(V=>l(a(R,V,l(G,V)),O));return X.map(V=>h(V)==="Complex"&&n(m(V),m(V)+g(V))?m(V):V)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(b))}}})}),Gne="Help",Qne=["evaluate"],Wne=Se(Gne,Qne,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},a=`
`;if(n.name&&(a+="Name: "+n.name+`

`),n.category&&(a+="Category: "+n.category+`

`),n.description&&(a+=`Description:
    `+n.description+`

`),n.syntax&&(a+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){a+=`Examples:
`;for(var s=!1,o=e("config()"),l={config:h=>(s=!0,e("config(newConfig)",{newConfig:h}))},u=0;u<n.examples.length;u++){var c=n.examples[u];a+="    "+c+`
`;var d=void 0;try{d=e(c,l)}catch(h){d=h}d!==void 0&&!mD(d)&&(a+="        "+Jt(d,{precision:14})+`
`)}a+=`
`,s&&e("config(originalConfig)",{originalConfig:o})}return n.mayThrow&&n.mayThrow.length&&(a+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(a+="See also: "+n.seealso.join(", ")+`
`),a},t.prototype.toJSON=function(){var n=Ht(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var a={};return Object.keys(n).filter(s=>s!=="mathjs").forEach(s=>{a[s]=n[s]}),new t(a)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),Kne="Chain",Xne=["?on","math","typed"],Yne=Se(Kne,Xne,r=>{var{on:e,math:t,typed:n}=r;function a(c){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");gD(c)?this.value=c.value:this.value=c}a.prototype.type="Chain",a.prototype.isChain=!0,a.prototype.done=function(){return this.value},a.prototype.valueOf=function(){return this.value},a.prototype.toString=function(){return Jt(this.value)},a.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},a.fromJSON=function(c){return new a(c.value)};function s(c,d){typeof d=="function"&&(a.prototype[c]=l(d))}function o(c,d){VV(a.prototype,c,function(){var g=d();if(typeof g=="function")return l(g)})}function l(c){return function(){if(arguments.length===0)return new a(c(this.value));for(var d=[this.value],h=0;h<arguments.length;h++)d[h+1]=arguments[h];if(n.isTypedFunction(c)){var g=n.resolve(c,d);if(g.params.length===1)throw new Error("chain function "+c.name+" cannot match rest parameter between chain value and additional arguments.");return new a(g.implementation.apply(c,d))}return new a(c.apply(c,d))}}a.createProxy=function(c,d){if(typeof c=="string")s(c,d);else{var h=function(v){Ct(c,v)&&u[v]===void 0&&o(v,()=>c[v])};for(var g in c)h(g)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return a.createProxy(t),e&&e("import",function(c,d,h){h||o(c,d)}),a},{isClass:!0}),AA={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Zne={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},Jne={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},eie={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},tie={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},rie={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},nie={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},iie={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},aie={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},sie={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},oie={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},TA={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},lie={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},cie={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},uie={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},die={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},fie={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},hie={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},mie={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},pie={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},gie={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},xie={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},vie={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},yie={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},bie={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},wie={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},_ie={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},Nie={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},Sie={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},jie={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Eie={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},Aie={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},Tie={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},Cie={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},Die={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},kie={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},Mie={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},Fie={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Oie={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Bie={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Rie={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},Lie={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},Iie={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},zie={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},Pie={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},qie={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},$ie={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},Uie={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},Hie={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},Vie={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},Gie={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},Qie={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},Wie={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},Kie={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},Xie={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},Yie={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},Zie={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},Jie={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},eae={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},tae={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},rae={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},nae={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},iae={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},aae={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},sae={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},oae={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lae={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},cae={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},uae={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},dae={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},fae={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},hae={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},mae={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},pae={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},gae={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},xae={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},vae={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},yae={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},bae={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},wae={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},_ae={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},Nae={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},Sae={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},jae={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},Eae={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},Aae={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Tae={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},Cae={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Dae={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},kae={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},Mae={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Fae={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Oae={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Bae={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Rae={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},Lae={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},Iae={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},zae={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},Pae={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},qae={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},$ae={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},Uae={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},Hae={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},Vae={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},Gae={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},Qae={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},Wae={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},Kae={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},Xae={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},Yae={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},Zae={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},Jae={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},ese={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},tse={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},rse={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},nse={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},ise={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},ase={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},sse={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},ose={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},lse={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},cse={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},use={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},dse={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},fse={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},hse={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},mse={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},pse={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},gse={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},xse={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},vse={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},yse={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},bse={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},wse={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},_se={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Nse={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},Sse={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},jse={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Ese={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},Ase={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Tse={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},Cse={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},Dse={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},kse={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Mse={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Fse={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},Ose={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},Bse={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Rse={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Lse={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Ise={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},zse={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Pse={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},qse={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},$se={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},Use={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},Hse={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Vse={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Gse={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Qse={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Wse={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},Kse={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},Xse={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},Yse={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},Zse={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},Jse={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},eoe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},toe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},roe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},noe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},ioe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},aoe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},soe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},ooe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},loe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},coe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},uoe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},doe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},foe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},hoe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},moe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},poe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},goe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},xoe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},voe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},yoe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},boe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},woe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},_oe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Noe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Soe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},joe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},Eoe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},Aoe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},Toe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},Coe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},Doe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},koe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},Moe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},Foe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},Ooe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},Boe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Roe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},Loe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Ioe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},zoe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},Poe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},qoe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},$oe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},Uoe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},Hoe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Voe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},Goe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Qoe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},Woe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Koe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},Xoe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},Yoe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},Zoe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},Joe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},ele={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},tle={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},rle={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},nle={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},ile={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},ale={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sle={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},ole={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},lle={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},cle={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},ule={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},dle={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},fle={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},hle={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},mle={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},ple={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},gle={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},xle={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},vle={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},yle={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},ble={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},wle={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},_le={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Nle={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Sle={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},jle={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Ele={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Ale={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},Tle={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},Cle={bignumber:hie,bigint:mie,boolean:pie,complex:gie,createUnit:xie,fraction:vie,index:yie,matrix:bie,number:wie,sparse:_ie,splitUnit:Nie,string:Sie,unit:jie,e:AA,E:AA,false:Zne,i:Jne,Infinity:eie,LN2:rie,LN10:tie,LOG2E:iie,LOG10E:nie,NaN:aie,null:sie,pi:TA,PI:TA,phi:oie,SQRT1_2:lie,SQRT2:cie,tau:uie,true:die,version:fie,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Cie,lsolve:kie,lsolveAll:Mie,lup:Fie,lusolve:Oie,leafCount:Die,polynomialRoot:Bie,resolve:Iie,simplify:zie,simplifyConstant:Pie,simplifyCore:qie,symbolicEqual:Uie,rationalize:Lie,slu:$ie,usolve:Hie,usolveAll:Vie,qr:Rie,abs:Gie,add:Qie,cbrt:Wie,ceil:Kie,cube:Xie,divide:Yie,dotDivide:Zie,dotMultiply:Jie,dotPow:eae,exp:tae,expm:rae,expm1:nae,fix:iae,floor:aae,gcd:sae,hypot:oae,lcm:cae,log:uae,log2:hae,log1p:fae,log10:dae,mod:mae,multiply:pae,norm:gae,nthRoot:xae,nthRoots:vae,pow:yae,round:bae,sign:wae,sqrt:_ae,sqrtm:Nae,square:Aae,subtract:Tae,unaryMinus:Cae,unaryPlus:Dae,xgcd:kae,invmod:lae,bitAnd:Mae,bitNot:Fae,bitOr:Oae,bitXor:Bae,leftShift:Rae,rightArithShift:Lae,rightLogShift:Iae,bellNumbers:zae,catalan:Pae,composition:qae,stirlingS2:$ae,config:Eie,import:Aie,typed:Tie,arg:Uae,conj:Hae,re:Gae,im:Vae,evaluate:Qae,help:Yae,parse:Kae,parser:Wae,compile:Xae,distance:Zae,intersect:Jae,and:ese,not:tse,or:rse,xor:nse,mapSlices:ise,concat:sse,count:ose,cross:lse,column:ase,ctranspose:cse,det:use,diag:dse,diff:fse,dot:hse,getMatrixDataType:vse,identity:yse,filter:pse,flatten:gse,forEach:xse,inv:bse,pinv:wse,eigs:mse,kron:_se,matrixFromFunction:jse,matrixFromRows:Ese,matrixFromColumns:Sse,map:Nse,ones:Ase,partitionSelect:Tse,range:Cse,resize:kse,reshape:Dse,rotate:Mse,rotationMatrix:Fse,row:Ose,size:Bse,sort:Rse,squeeze:Lse,subset:Ise,trace:zse,transpose:Pse,zeros:qse,fft:$se,ifft:Use,sylvester:Sae,schur:jae,lyap:Eae,solveODE:Tle,combinations:Hse,combinationsWithRep:Vse,factorial:Gse,gamma:Qse,kldivergence:Kse,lgamma:Wse,multinomial:Xse,permutations:Yse,pickRandom:Zse,random:Jse,randomInt:eoe,compare:toe,compareNatural:roe,compareText:noe,deepEqual:ioe,equal:aoe,equalText:soe,larger:ooe,largerEq:loe,smaller:coe,smallerEq:uoe,unequal:doe,setCartesian:foe,setDifference:hoe,setDistinct:moe,setIntersect:poe,setIsSubset:goe,setMultiplicity:xoe,setPowerset:voe,setSize:yoe,setSymDifference:boe,setUnion:woe,zpk2tf:_oe,freqz:Noe,erf:Soe,zeta:joe,cumsum:Boe,mad:Eoe,max:Aoe,mean:Toe,median:Coe,min:Doe,mode:koe,prod:Moe,quantileSeq:Foe,std:Ooe,sum:Roe,variance:Loe,corr:Ioe,acos:zoe,acosh:Poe,acot:qoe,acoth:$oe,acsc:Uoe,acsch:Hoe,asec:Voe,asech:Goe,asin:Qoe,asinh:Woe,atan:Koe,atanh:Yoe,atan2:Xoe,cos:Zoe,cosh:Joe,cot:ele,coth:tle,csc:rle,csch:nle,sec:ile,sech:ale,sin:sle,sinh:ole,tan:lle,tanh:cle,to:ule,toBest:dle,clone:hle,format:mle,bin:fle,oct:jle,hex:gle,isNaN:vle,isInteger:xle,isNegative:yle,isNumeric:ble,hasNumericValue:ple,isPositive:wle,isPrime:_le,isZero:Nle,print:Ele,typeOf:Ale,numeric:Sle},CA="help",Dle=["typed","mathWithTransform","Help"],kle=Se(CA,Dle,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(CA,{any:function(s){var o,l=s;if(typeof s!="string"){for(o in t)if(Ct(t,o)&&s===t[o]){l=o;break}}var u=Ni(Cle,l);if(!u){var c=typeof l=="function"?l.name:l;throw new Error('No documentation found on "'+c+'"')}return new n(u)}})}),DA="chain",Mle=["typed","Chain"],Fle=Se(DA,Mle,r=>{var{typed:e,Chain:t}=r;return e(DA,{"":function(){return new t},any:function(a){return new t(a)}})}),kA="det",Ole=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Ble=Se(kA,Ole,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:a,divideScalar:s,isZero:o,unaryMinus:l}=r;return e(kA,{any:function(d){return Ht(d)},"Array | Matrix":function(d){var h;switch(Lt(d)?h=d.size():Array.isArray(d)?(d=t(d),h=d.size()):h=[],h.length){case 0:return Ht(d);case 1:if(h[0]===1)return Ht(d.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Jt(h)+")");case 2:{var g=h[0],m=h[1];if(g===m)return u(d.clone().valueOf(),g);if(m===0)return 1;throw new RangeError("Matrix must be square (size: "+Jt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(h)+")")}}});function u(c,d,h){if(d===1)return Ht(c[0][0]);if(d===2)return n(a(c[0][0],c[1][1]),a(c[1][0],c[0][1]));for(var g=!1,m=new Array(d).fill(0).map((T,F)=>F),v=0;v<d;v++){var x=m[v];if(o(c[x][v])){var b=void 0;for(b=v+1;b<d;b++)if(!o(c[m[b]][v])){x=m[b],m[b]=m[v],m[v]=x,g=!g;break}if(b===d)return c[x][v]}for(var y=c[x][v],S=v===0?1:c[m[v-1]][v-1],_=v+1;_<d;_++)for(var N=m[_],j=v+1;j<d;j++)c[N][j]=s(n(a(c[N][j],y),a(c[N][v],c[x][j])),S)}var E=c[m[d-1]][d-1];return g?l(E):E}}),MA="inv",Rle=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Lle=Se(MA,Rle,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:a,multiply:s,unaryMinus:o,det:l,identity:u,abs:c}=r;return e(MA,{"Array | Matrix":function(g){var m=Lt(g)?g.size():Ut(g);switch(m.length){case 1:if(m[0]===1)return Lt(g)?t([n(1,g.valueOf()[0])]):[n(1,g[0])];throw new RangeError("Matrix must be square (size: "+Jt(m)+")");case 2:{var v=m[0],x=m[1];if(v===x)return Lt(g)?t(d(g.valueOf(),v,x),g.storage()):d(g,v,x);throw new RangeError("Matrix must be square (size: "+Jt(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(m)+")")}},any:function(g){return n(1,g)}});function d(h,g,m){var v,x,b,y,S;if(g===1){if(y=h[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(g===2){var _=l(h);if(_===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],_),n(o(h[0][1]),_)],[n(o(h[1][0]),_),n(h[0][0],_)]]}else{var N=h.concat();for(v=0;v<g;v++)N[v]=N[v].concat();for(var j=u(g).valueOf(),E=0;E<m;E++){var T=c(N[E][E]),F=E;for(v=E+1;v<g;)c(N[v][E])>T&&(T=c(N[v][E]),F=v),v++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");v=F,v!==E&&(S=N[E],N[E]=N[v],N[v]=S,S=j[E],j[E]=j[v],j[v]=S);var A=N[E],R=j[E];for(v=0;v<g;v++){var I=N[v],O=j[v];if(v!==E){if(I[E]!==0){for(b=n(o(I[E]),A[E]),x=E;x<m;x++)I[x]=a(I[x],s(b,A[x]));for(x=0;x<m;x++)O[x]=a(O[x],s(b,R[x]))}}else{for(b=A[E],x=E;x<m;x++)I[x]=n(I[x],b);for(x=0;x<m;x++)O[x]=n(O[x],b)}}}return j}}}),FA="pinv",Ile=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],zle=Se(FA,Ile,r=>{var{typed:e,matrix:t,inv:n,deepEqual:a,equal:s,dotDivide:o,dot:l,ctranspose:u,divideScalar:c,multiply:d,add:h,Complex:g}=r;return e(FA,{"Array | Matrix":function(_){var N=Lt(_)?_.size():Ut(_);switch(N.length){case 1:return y(_)?u(_):N[0]===1?n(_):o(u(_),l(_,_));case 2:{if(y(_))return u(_);var j=N[0],E=N[1];if(j===E)try{return n(_)}catch(T){if(!(T instanceof Error&&T.message.match(/Cannot calculate inverse, determinant is zero/)))throw T}return Lt(_)?t(m(_.valueOf(),j,E),_.storage()):m(_,j,E)}default:throw new RangeError("Matrix must be two dimensional (size: "+Jt(N)+")")}},any:function(_){return s(_,0)?Ht(_):c(1,_)}});function m(S,_,N){var{C:j,F:E}=x(S,_,N),T=d(n(d(u(j),j)),u(j)),F=d(u(E),n(d(E,u(E))));return d(F,T)}function v(S,_,N){for(var j=Ht(S),E=0,T=0;T<_;T++){if(N<=E)return j;for(var F=T;b(j[F][E]);)if(F++,_===F&&(F=T,E++,N===E))return j;[j[F],j[T]]=[j[T],j[F]];for(var A=j[T][E],R=0;R<N;R++)j[T][R]=o(j[T][R],A);for(var I=0;I<_;I++)if(I!==T){A=j[I][E];for(var O=0;O<N;O++)j[I][O]=h(j[I][O],d(-1,d(A,j[T][O])))}E++}return j}function x(S,_,N){var j=v(S,_,N),E=S.map((F,A)=>F.filter((R,I)=>I<_&&!b(l(j[I],j[I])))),T=j.filter((F,A)=>!b(l(j[A],j[A])));return{C:E,F:T}}function b(S){return s(h(S,g(1,1)),h(0,g(1,1)))}function y(S){return a(h(S,g(1,1)),h(d(S,0),g(1,1)))}});function Ple(r){var{addScalar:e,subtract:t,flatten:n,multiply:a,multiplyScalar:s,divideScalar:o,sqrt:l,abs:u,bignumber:c,diag:d,size:h,reshape:g,inv:m,qr:v,usolve:x,usolveAll:b,equal:y,complex:S,larger:_,smaller:N,matrixFromColumns:j,dot:E}=r;function T(L,X,V,se){var ae=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,W=F(L,X,V,se,ae);A(L,X,V,se,ae,W);var{values:z,C:re}=R(L,X,V,se,ae);if(ae){var ne=I(L,X,re,W,z,V,se);return{values:z,eigenvectors:ne}}return{values:z}}function F(L,X,V,se,ae){var W=se==="BigNumber",z=se==="Complex",re=W?c(0):0,ne=W?c(1):z?S(1):1,ie=W?c(1):1,oe=W?c(10):2,ye=s(oe,oe),M;ae&&(M=Array(X).fill(ne));for(var ge=!1;!ge;){ge=!0;for(var ee=0;ee<X;ee++){for(var k=re,B=re,Q=0;Q<X;Q++)ee!==Q&&(k=e(k,u(L[Q][ee])),B=e(B,u(L[ee][Q])));if(!y(k,0)&&!y(B,0)){for(var Z=ie,J=k,K=o(B,oe),te=s(B,oe);N(J,K);)J=s(J,ye),Z=s(Z,oe);for(;_(J,te);)J=o(J,ye),Z=o(Z,oe);var me=N(o(e(J,B),Z),s(e(k,B),.95));if(me){ge=!1;for(var fe=o(1,Z),xe=0;xe<X;xe++)ee!==xe&&(L[ee][xe]=s(L[ee][xe],fe),L[xe][ee]=s(L[xe][ee],Z));ae&&(M[ee]=s(M[ee],fe))}}}}return ae?d(M):null}function A(L,X,V,se,ae,W){var z=se==="BigNumber",re=se==="Complex",ne=z?c(0):re?S(0):0;z&&(V=c(V));for(var ie=0;ie<X-2;ie++){for(var oe=0,ye=ne,M=ie+1;M<X;M++){var ge=L[M][ie];N(u(ye),u(ge))&&(ye=ge,oe=M)}if(!N(u(ye),V)){if(oe!==ie+1){var ee=L[oe];L[oe]=L[ie+1],L[ie+1]=ee;for(var k=0;k<X;k++){var B=L[k][oe];L[k][oe]=L[k][ie+1],L[k][ie+1]=B}if(ae){var Q=W[oe];W[oe]=W[ie+1],W[ie+1]=Q}}for(var Z=ie+2;Z<X;Z++){var J=o(L[Z][ie],ye);if(J!==0){for(var K=0;K<X;K++)L[Z][K]=t(L[Z][K],s(J,L[ie+1][K]));for(var te=0;te<X;te++)L[te][ie+1]=e(L[te][ie+1],s(J,L[te][Z]));if(ae)for(var me=0;me<X;me++)W[Z][me]=t(W[Z][me],s(J,W[ie+1][me]))}}}}return W}function R(L,X,V,se,ae){var W=se==="BigNumber",z=se==="Complex",re=W?c(1):z?S(1):1;W&&(V=c(V));for(var ne=Ht(L),ie=[],oe=X,ye=[],M=ae?d(Array(X).fill(re)):void 0,ge=ae?d(Array(oe).fill(re)):void 0,ee=0;ee<=100;){ee+=1;for(var k=ne[oe-1][oe-1],B=0;B<oe;B++)ne[B][B]=t(ne[B][B],k);var{Q,R:Z}=v(ne);ne=a(Z,Q);for(var J=0;J<oe;J++)ne[J][J]=e(ne[J][J],k);if(ae&&(ge=a(ge,Q)),oe===1||N(u(ne[oe-1][oe-2]),V)){ee=0,ie.push(ne[oe-1][oe-1]),ae&&(ye.unshift([[1]]),D(ge,X),M=a(M,ge),oe>1&&(ge=d(Array(oe-1).fill(re)))),oe-=1,ne.pop();for(var K=0;K<oe;K++)ne[K].pop()}else if(oe===2||N(u(ne[oe-2][oe-3]),V)){ee=0;var te=O(ne[oe-2][oe-2],ne[oe-2][oe-1],ne[oe-1][oe-2],ne[oe-1][oe-1]);ie.push(...te),ae&&(ye.unshift(U(ne[oe-2][oe-2],ne[oe-2][oe-1],ne[oe-1][oe-2],ne[oe-1][oe-1],te[0],te[1],V,se)),D(ge,X),M=a(M,ge),oe>2&&(ge=d(Array(oe-2).fill(re)))),oe-=2,ne.pop(),ne.pop();for(var me=0;me<oe;me++)ne[me].pop(),ne[me].pop()}if(oe===0)break}if(ie.sort((_e,je)=>+t(u(_e),u(je))),ee>100){var fe=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ie.join(", "));throw fe.values=ie,fe.vectors=[],fe}var xe=ae?a(M,H(ye,X)):void 0;return{values:ie,C:xe}}function I(L,X,V,se,ae,W,z){var re=m(V),ne=a(re,L,V),ie=z==="BigNumber",oe=z==="Complex",ye=ie?c(0):oe?S(0):0,M=ie?c(1):oe?S(1):1,ge=[],ee=[];for(var k of ae){var B=P(ge,k,y);B===-1?(ge.push(k),ee.push(1)):ee[B]+=1}for(var Q=[],Z=ge.length,J=Array(X).fill(ye),K=d(Array(X).fill(M)),te=function(){var xe=ge[me],_e=t(ne,a(xe,K)),je=b(_e,J);for(je.shift();je.length<ee[me];){var Be=G(_e,X,je,W,z);if(Be===null)break;je.push(Be)}var Re=a(m(se),V);je=je.map(ze=>a(Re,ze)),Q.push(...je.map(ze=>({value:xe,vector:n(ze)})))},me=0;me<Z;me++)te();return Q}function O(L,X,V,se){var ae=e(L,se),W=t(s(L,se),s(X,V)),z=s(ae,.5),re=s(l(t(s(ae,ae),s(4,W))),.5);return[e(z,re),t(z,re)]}function U(L,X,V,se,ae,W,z,re){var ne=re==="BigNumber",ie=re==="Complex",oe=ne?c(0):ie?S(0):0,ye=ne?c(1):ie?S(1):1;if(N(u(V),z))return[[ye,oe],[oe,ye]];if(_(u(t(ae,W)),z))return[[t(ae,se),t(W,se)],[V,V]];var M=t(L,ae),ge=t(se,ae);return N(u(X),z)&&N(u(ge),z)?[[M,ye],[V,oe]]:[[X,oe],[ge,ye]]}function D(L,X){for(var V=0;V<L.length;V++)L[V].push(...Array(X-L[V].length).fill(0));for(var se=L.length;se<X;se++)L.push(Array(X).fill(0)),L[se][se]=1;return L}function H(L,X){for(var V=[],se=0;se<X;se++)V[se]=Array(X).fill(0);var ae=0;for(var W of L){for(var z=W.length,re=0;re<z;re++)for(var ne=0;ne<z;ne++)V[ae+re][ae+ne]=W[re][ne];ae+=z}return V}function P(L,X,V){for(var se=0;se<L.length;se++)if(V(L[se],X))return se;return-1}function G(L,X,V,se,ae){for(var W=ae==="BigNumber"?c(1e3):1e3,z,re=0;re<5;++re){z=ue(X,V,ae);try{z=x(L,z)}catch{continue}if(_(pe(z),W))break}if(re>=5)return null;for(re=0;;){var ne=x(L,z);if(N(pe(le(z,[ne])),se))break;if(++re>=10)return null;z=de(ne)}return z}function ue(L,X,V){var se=V==="BigNumber",ae=V==="Complex",W=Array(L).fill(0).map(z=>2*Math.random()-1);return se&&(W=W.map(z=>c(z))),ae&&(W=W.map(z=>S(z))),W=le(W,X),de(W,V)}function le(L,X){var V=h(L);for(var se of X)se=g(se,V),L=t(L,a(o(E(se,L),E(se,se)),se));return L}function pe(L){return u(l(E(L,L)))}function de(L,X){var V=X==="BigNumber",se=X==="Complex",ae=V?c(1):se?S(1):1;return a(o(ae,pe(L)),L)}return T}function qle(r){var{config:e,addScalar:t,subtract:n,abs:a,atan:s,cos:o,sin:l,multiplyScalar:u,inv:c,bignumber:d,multiply:h,add:g}=r;function m(A,R){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,O=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if(O==="number")return v(A,I,U);if(O==="BigNumber")return x(A,I,U);throw TypeError("Unsupported data type: "+O)}function v(A,R,I){var O=A.length,U=Math.abs(R/O),D,H;if(I){H=new Array(O);for(var P=0;P<O;P++)H[P]=Array(O).fill(0),H[P][P]=1}for(var G=E(A);Math.abs(G[1])>=Math.abs(U);){var ue=G[0][0],le=G[0][1];D=b(A[ue][ue],A[le][le],A[ue][le]),A=j(A,D,ue,le),I&&(H=S(H,D,ue,le)),G=E(A)}for(var pe=Array(O).fill(0),de=0;de<O;de++)pe[de]=A[de][de];return F(Ht(pe),H,I)}function x(A,R,I){var O=A.length,U=a(R/O),D,H;if(I){H=new Array(O);for(var P=0;P<O;P++)H[P]=Array(O).fill(0),H[P][P]=1}for(var G=T(A);a(G[1])>=a(U);){var ue=G[0][0],le=G[0][1];D=y(A[ue][ue],A[le][le],A[ue][le]),A=N(A,D,ue,le),I&&(H=_(H,D,ue,le)),G=T(A)}for(var pe=Array(O).fill(0),de=0;de<O;de++)pe[de]=A[de][de];return F(Ht(pe),H,I)}function b(A,R,I){var O=R-A;return Math.abs(O)<=e.relTol?Math.PI/4:.5*Math.atan(2*I/(R-A))}function y(A,R,I){var O=n(R,A);return a(O)<=e.relTol?d(-1).acos().div(4):u(.5,s(h(2,I,c(O))))}function S(A,R,I,O){for(var U=A.length,D=Math.cos(R),H=Math.sin(R),P=Array(U).fill(0),G=Array(U).fill(0),ue=0;ue<U;ue++)P[ue]=D*A[ue][I]-H*A[ue][O],G[ue]=H*A[ue][I]+D*A[ue][O];for(var le=0;le<U;le++)A[le][I]=P[le],A[le][O]=G[le];return A}function _(A,R,I,O){for(var U=A.length,D=o(R),H=l(R),P=Array(U).fill(d(0)),G=Array(U).fill(d(0)),ue=0;ue<U;ue++)P[ue]=n(u(D,A[ue][I]),u(H,A[ue][O])),G[ue]=t(u(H,A[ue][I]),u(D,A[ue][O]));for(var le=0;le<U;le++)A[le][I]=P[le],A[le][O]=G[le];return A}function N(A,R,I,O){for(var U=A.length,D=d(o(R)),H=d(l(R)),P=u(D,D),G=u(H,H),ue=Array(U).fill(d(0)),le=Array(U).fill(d(0)),pe=h(d(2),D,H,A[I][O]),de=t(n(u(P,A[I][I]),pe),u(G,A[O][O])),L=g(u(G,A[I][I]),pe,u(P,A[O][O])),X=0;X<U;X++)ue[X]=n(u(D,A[I][X]),u(H,A[O][X])),le[X]=t(u(H,A[I][X]),u(D,A[O][X]));A[I][I]=de,A[O][O]=L,A[I][O]=d(0),A[O][I]=d(0);for(var V=0;V<U;V++)V!==I&&V!==O&&(A[I][V]=ue[V],A[V][I]=ue[V],A[O][V]=le[V],A[V][O]=le[V]);return A}function j(A,R,I,O){for(var U=A.length,D=Math.cos(R),H=Math.sin(R),P=D*D,G=H*H,ue=Array(U).fill(0),le=Array(U).fill(0),pe=P*A[I][I]-2*D*H*A[I][O]+G*A[O][O],de=G*A[I][I]+2*D*H*A[I][O]+P*A[O][O],L=0;L<U;L++)ue[L]=D*A[I][L]-H*A[O][L],le[L]=H*A[I][L]+D*A[O][L];A[I][I]=pe,A[O][O]=de,A[I][O]=0,A[O][I]=0;for(var X=0;X<U;X++)X!==I&&X!==O&&(A[I][X]=ue[X],A[X][I]=ue[X],A[O][X]=le[X],A[X][O]=le[X]);return A}function E(A){for(var R=A.length,I=0,O=[0,1],U=0;U<R;U++)for(var D=U+1;D<R;D++)Math.abs(I)<Math.abs(A[U][D])&&(I=Math.abs(A[U][D]),O=[U,D]);return[O,I]}function T(A){for(var R=A.length,I=0,O=[0,1],U=0;U<R;U++)for(var D=U+1;D<R;D++)a(I)<a(A[U][D])&&(I=a(A[U][D]),O=[U,D]);return[O,I]}function F(A,R,I){var O=A.length,U=Array(O),D;if(I){D=Array(O);for(var H=0;H<O;H++)D[H]=Array(O)}for(var P=0;P<O;P++){for(var G=0,ue=A[0],le=0;le<A.length;le++)a(A[le])<a(ue)&&(G=le,ue=A[G]);if(U[P]=A.splice(G,1)[0],I)for(var pe=0;pe<O;pe++)D[P][pe]=R[pe][G],R[pe].splice(G,1)}if(!I)return{values:U};var de=D.map((L,X)=>({value:U[X],vector:L}));return{values:U,eigenvectors:de}}return m}var $le="eigs",Ule=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],Hle=Se($le,Ule,r=>{var{config:e,typed:t,matrix:n,addScalar:a,subtract:s,equal:o,abs:l,atan:u,cos:c,sin:d,multiplyScalar:h,divideScalar:g,inv:m,bignumber:v,multiply:x,add:b,larger:y,column:S,flatten:_,number:N,complex:j,sqrt:E,diag:T,size:F,reshape:A,qr:R,usolve:I,usolveAll:O,im:U,re:D,smaller:H,matrixFromColumns:P,dot:G}=r,ue=qle({config:e,addScalar:a,subtract:s,abs:l,atan:u,cos:c,sin:d,multiplyScalar:h,inv:m,bignumber:v,multiply:x,add:b}),le=Ple({addScalar:a,subtract:s,multiply:x,multiplyScalar:h,flatten:_,divideScalar:g,sqrt:E,abs:l,bignumber:v,diag:T,size:F,reshape:A,qr:R,inv:m,usolve:I,usolveAll:O,equal:o,complex:j,larger:y,smaller:H,matrixFromColumns:P,dot:G});return t("eigs",{Array:function(W){return pe(n(W))},"Array, number|BigNumber":function(W,z){return pe(n(W),{precision:z})},"Array, Object"(ae,W){return pe(n(ae),W)},Matrix:function(W){return pe(W,{matricize:!0})},"Matrix, number|BigNumber":function(W,z){return pe(W,{precision:z,matricize:!0})},"Matrix, Object":function(W,z){var re={matricize:!0};return kn(re,z),pe(W,re)}});function pe(ae){var W,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re="eigenvectors"in z?z.eigenvectors:!0,ne=(W=z.precision)!==null&&W!==void 0?W:e.relTol,ie=de(ae,ne,re);return z.matricize&&(ie.values=n(ie.values),re&&(ie.eigenvectors=ie.eigenvectors.map(oe=>{var{value:ye,vector:M}=oe;return{value:ye,vector:n(M)}}))),re&&Object.defineProperty(ie,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ie}function de(ae,W,z){var re=ae.toArray(),ne=ae.size();if(ne.length!==2||ne[0]!==ne[1])throw new RangeError("Matrix must be square (size: ".concat(Jt(ne),")"));var ie=ne[0];if(X(re,ie,W)&&(V(re,ie),L(re,ie,W))){var oe=se(ae,re,ie);return ue(re,ie,W,oe,z)}var ye=se(ae,re,ie);return le(re,ie,W,ye,z)}function L(ae,W,z){for(var re=0;re<W;re++)for(var ne=re;ne<W;ne++)if(y(v(l(s(ae[re][ne],ae[ne][re]))),z))return!1;return!0}function X(ae,W,z){for(var re=0;re<W;re++)for(var ne=0;ne<W;ne++)if(y(v(l(U(ae[re][ne]))),z))return!1;return!0}function V(ae,W){for(var z=0;z<W;z++)for(var re=0;re<W;re++)ae[z][re]=D(ae[z][re])}function se(ae,W,z){var re=ae.datatype();if(re==="number"||re==="BigNumber"||re==="Complex")return re;for(var ne=!1,ie=!1,oe=!1,ye=0;ye<z;ye++)for(var M=0;M<z;M++){var ge=W[ye][M];if(Kt(ge)||$f(ge))ne=!0;else if(Xt(ge))ie=!0;else if(Ws(ge))oe=!0;else throw TypeError("Unsupported type in Matrix: "+Or(ge))}if(ie&&oe&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),oe){for(var ee=0;ee<z;ee++)for(var k=0;k<z;k++)W[ee][k]=j(W[ee][k]);return"Complex"}if(ie){for(var B=0;B<z;B++)for(var Q=0;Q<z;Q++)W[B][Q]=v(W[B][Q]);return"BigNumber"}if(ne){for(var Z=0;Z<z;Z++)for(var J=0;J<z;J++)W[Z][J]=N(W[Z][J]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),OA="expm",Vle=["typed","abs","add","identity","inv","multiply"],Gle=Se(OA,Vle,r=>{var{typed:e,abs:t,add:n,identity:a,inv:s,multiply:o}=r;return e(OA,{Matrix:function(h){var g=h.size();if(g.length!==2||g[0]!==g[1])throw new RangeError("Matrix must be square (size: "+Jt(g)+")");for(var m=g[0],v=1e-15,x=l(h),b=u(x,v),y=b.q,S=b.j,_=o(h,Math.pow(2,-S)),N=a(m),j=a(m),E=1,T=_,F=-1,A=1;A<=y;A++)A>1&&(T=o(T,_),F=-F),E=E*(y-A+1)/((2*y-A+1)*A),N=n(N,o(E,T)),j=n(j,o(E*F,T));for(var R=o(s(j),N),I=0;I<S;I++)R=o(R,R);return Bl(h)?h.createSparseMatrix(R):R}});function l(d){for(var h=d.size()[0],g=0,m=0;m<h;m++){for(var v=0,x=0;x<h;x++)v+=t(d.get([m,x]));g=Math.max(v,g)}return g}function u(d,h){for(var g=30,m=0;m<g;m++)for(var v=0;v<=m;v++){var x=m-v;if(c(d,v,x)<h)return{q:v,j:x}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function c(d,h,g){for(var m=1,v=2;v<=h;v++)m*=v;for(var x=m,b=h+1;b<=2*h;b++)x*=b;var y=x*(2*h+1);return 8*Math.pow(d/Math.pow(2,g),2*h)*m*m/(x*y)}}),BA="sqrtm",Qle=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],Wle=Se(BA,Qle,r=>{var{typed:e,abs:t,add:n,multiply:a,map:s,sqrt:o,subtract:l,inv:u,size:c,max:d,identity:h}=r,g=1e3,m=1e-6;function v(x){var b,y=0,S=x,_=h(c(x));do{var N=S;if(S=a(.5,n(N,u(_))),_=a(.5,n(_,u(N))),b=d(t(l(S,N))),b>m&&++y>g)throw new Error("computing square root of matrix: iterative method could not converge")}while(b>m);return S}return e(BA,{"Array | Matrix":function(b){var y=Lt(b)?b.size():Ut(b);switch(y.length){case 1:if(y[0]===1)return s(b,o);throw new RangeError("Matrix must be square (size: "+Jt(y)+")");case 2:{var S=y[0],_=y[1];if(S===_)return v(b);throw new RangeError("Matrix must be square (size: "+Jt(y)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Jt(y)+")")}}})}),RA="sylvester",Kle=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Xle=Se(RA,Kle,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:a,multiply:s,range:o,concat:l,transpose:u,index:c,subset:d,add:h,subtract:g,identity:m,lusolve:v,abs:x}=r;return e(RA,{"Matrix, Matrix, Matrix":b,"Array, Matrix, Matrix":function(S,_,N){return b(a(S),_,N)},"Array, Array, Matrix":function(S,_,N){return b(a(S),a(_),N)},"Array, Matrix, Array":function(S,_,N){return b(a(S),_,a(N))},"Matrix, Array, Matrix":function(S,_,N){return b(S,a(_),N)},"Matrix, Array, Array":function(S,_,N){return b(S,a(_),a(N))},"Matrix, Matrix, Array":function(S,_,N){return b(S,_,a(N))},"Array, Array, Array":function(S,_,N){return b(a(S),a(_),a(N)).toArray()}});function b(y,S,_){for(var N=S.size()[0],j=y.size()[0],E=t(y),T=E.T,F=E.U,A=t(s(-1,S)),R=A.T,I=A.U,O=s(s(u(F),_),I),U=o(0,j),D=[],H=(oe,ye)=>l(oe,ye,1),P=(oe,ye)=>l(oe,ye,0),G=0;G<N;G++)if(G<N-1&&x(d(R,c(G+1,G)))>1e-5){for(var ue=P(d(O,c(U,G)),d(O,c(U,G+1))),le=0;le<G;le++)ue=h(ue,P(s(D[le],d(R,c(le,G))),s(D[le],d(R,c(le,G+1)))));var pe=s(m(j),s(-1,d(R,c(G,G)))),de=s(m(j),s(-1,d(R,c(G+1,G)))),L=s(m(j),s(-1,d(R,c(G,G+1)))),X=s(m(j),s(-1,d(R,c(G+1,G+1)))),V=P(H(h(T,pe),de),H(L,h(T,X))),se=v(V,ue);D[G]=se.subset(c(o(0,j),0)),D[G+1]=se.subset(c(o(j,2*j),0)),G++}else{for(var ae=d(O,c(U,G)),W=0;W<G;W++)ae=h(ae,s(D[W],d(R,c(W,G))));var z=d(R,c(G,G)),re=g(T,s(z,m(j)));D[G]=v(re,ae)}var ne=a(n(...D)),ie=s(F,s(ne,u(I)));return ie}}),LA="schur",Yle=["typed","matrix","identity","multiply","qr","norm","subtract"],Zle=Se(LA,Yle,r=>{var{typed:e,matrix:t,identity:n,multiply:a,qr:s,norm:o,subtract:l}=r;return e(LA,{Array:function(d){var h=u(t(d));return{U:h.U.valueOf(),T:h.T.valueOf()}},Matrix:function(d){return u(d)}});function u(c){var d=c.size()[0],h=c,g=n(d),m=0,v;do{v=h;var x=s(h),b=x.Q,y=x.R;if(h=a(y,b),g=a(g,b),m++>100)break}while(o(l(h,v))>1e-4);return{U:g,T:h}}}),IA="lyap",Jle=["typed","matrix","sylvester","multiply","transpose"],ece=Se(IA,Jle,r=>{var{typed:e,matrix:t,sylvester:n,multiply:a,transpose:s}=r;return e(IA,{"Matrix, Matrix":function(l,u){return n(l,s(l),a(-1,u))},"Array, Matrix":function(l,u){return n(t(l),s(t(l)),a(-1,u))},"Matrix, Array":function(l,u){return n(l,s(t(l)),t(a(-1,u)))},"Array, Array":function(l,u){return n(t(l),s(t(l)),t(a(-1,u))).toArray()}})}),tce="divide",rce=["typed","matrix","multiply","equalScalar","divideScalar","inv"],nce=Se(tce,rce,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:a,divideScalar:s,inv:o}=r,l=li({typed:e,equalScalar:a}),u=Xa({typed:e});return e("divide",xD({"Array | Matrix, Array | Matrix":function(d,h){return n(d,o(h))},"DenseMatrix, any":function(d,h){return u(d,h,s,!1)},"SparseMatrix, any":function(d,h){return l(d,h,s,!1)},"Array, any":function(d,h){return u(t(d),h,s,!1).valueOf()},"any, Array | Matrix":function(d,h){return n(d,o(h))}},s.signatures))}),zA="distance",ice=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],ace=Se(zA,ice,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:a,divideScalar:s,deepEqual:o,sqrt:l,abs:u}=r;return e(zA,{"Array, Array, Array":function(j,E,T){if(j.length===2&&E.length===2&&T.length===2){if(!d(j))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!d(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(E,T))throw new TypeError("LinePoint1 should not be same with LinePoint2");var F=n(T[1],E[1]),A=n(E[0],T[0]),R=n(a(T[0],E[1]),a(E[0],T[1]));return b(j[0],j[1],F,A,R)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(j,E,T){if(Object.keys(j).length===2&&Object.keys(E).length===2&&Object.keys(T).length===2){if(!d(j))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!d(E))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!d(T))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(v(E),v(T)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in j&&"pointY"in j&&"lineOnePtX"in E&&"lineOnePtY"in E&&"lineTwoPtX"in T&&"lineTwoPtY"in T){var F=n(T.lineTwoPtY,E.lineOnePtY),A=n(E.lineOnePtX,T.lineTwoPtX),R=n(a(T.lineTwoPtX,E.lineOnePtY),a(E.lineOnePtX,T.lineTwoPtY));return b(j.pointX,j.pointY,F,A,R)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(j,E){if(j.length===2&&E.length===3){if(!d(j))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return b(j[0],j[1],E[0],E[1],E[2])}else if(j.length===3&&E.length===6){if(!h(j))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(E))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(j[0],j[1],j[2],E[0],E[1],E[2],E[3],E[4],E[5])}else if(j.length===E.length&&j.length>0){if(!g(j))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!g(E))throw new TypeError("All values of an array should be numbers or BigNumbers");return S(j,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(j,E){if(Object.keys(j).length===2&&Object.keys(E).length===3){if(!d(j))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in j&&"pointY"in j&&"xCoeffLine"in E&&"yCoeffLine"in E&&"constant"in E)return b(j.pointX,j.pointY,E.xCoeffLine,E.yCoeffLine,E.constant);throw new TypeError("Key names do not match")}else if(Object.keys(j).length===3&&Object.keys(E).length===6){if(!h(j))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!m(E))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in j&&"pointY"in j&&"x0"in E&&"y0"in E&&"z0"in E&&"a"in E&&"b"in E&&"c"in E)return y(j.pointX,j.pointY,j.pointZ,E.x0,E.y0,E.z0,E.a,E.b,E.c);throw new TypeError("Key names do not match")}else if(Object.keys(j).length===2&&Object.keys(E).length===2){if(!d(j))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!d(E))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in j&&"pointOneY"in j&&"pointTwoX"in E&&"pointTwoY"in E)return S([j.pointOneX,j.pointOneY],[E.pointTwoX,E.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(j).length===3&&Object.keys(E).length===3){if(!h(j))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in j&&"pointOneY"in j&&"pointOneZ"in j&&"pointTwoX"in E&&"pointTwoY"in E&&"pointTwoZ"in E)return S([j.pointOneX,j.pointOneY,j.pointOneZ],[E.pointTwoX,E.pointTwoY,E.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(j){if(!x(j))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return _(j)}});function c(N){return typeof N=="number"||Xt(N)}function d(N){return N.constructor!==Array&&(N=v(N)),c(N[0])&&c(N[1])}function h(N){return N.constructor!==Array&&(N=v(N)),c(N[0])&&c(N[1])&&c(N[2])}function g(N){return Array.isArray(N)||(N=v(N)),N.every(c)}function m(N){return N.constructor!==Array&&(N=v(N)),c(N[0])&&c(N[1])&&c(N[2])&&c(N[3])&&c(N[4])&&c(N[5])}function v(N){for(var j=Object.keys(N),E=[],T=0;T<j.length;T++)E.push(N[j[T]]);return E}function x(N){if(N[0].length===2&&c(N[0][0])&&c(N[0][1])){if(N.some(j=>j.length!==2||!c(j[0])||!c(j[1])))return!1}else if(N[0].length===3&&c(N[0][0])&&c(N[0][1])&&c(N[0][2])){if(N.some(j=>j.length!==3||!c(j[0])||!c(j[1])||!c(j[2])))return!1}else return!1;return!0}function b(N,j,E,T,F){var A=u(t(t(a(E,N),a(T,j)),F)),R=l(t(a(E,E),a(T,T)));return s(A,R)}function y(N,j,E,T,F,A,R,I,O){var U=[n(a(n(F,j),O),a(n(A,E),I)),n(a(n(A,E),R),a(n(T,N),O)),n(a(n(T,N),I),a(n(F,j),R))];U=l(t(t(a(U[0],U[0]),a(U[1],U[1])),a(U[2],U[2])));var D=l(t(t(a(R,R),a(I,I)),a(O,O)));return s(U,D)}function S(N,j){for(var E=N.length,T=0,F=0,A=0;A<E;A++)F=n(N[A],j[A]),T=t(a(F,F),T);return l(T)}function _(N){for(var j=[],E=[],T=[],F=0;F<N.length-1;F++)for(var A=F+1;A<N.length;A++)N[0].length===2?(E=[N[F][0],N[F][1]],T=[N[A][0],N[A][1]]):N[0].length===3&&(E=[N[F][0],N[F][1],N[F][2]],T=[N[A][0],N[A][1],N[A][2]]),j.push(S(E,T));return j}}),sce="intersect",oce=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],lce=Se(sce,oce,r=>{var{typed:e,config:t,abs:n,add:a,addScalar:s,matrix:o,multiply:l,multiplyScalar:u,divideScalar:c,subtract:d,smaller:h,equalScalar:g,flatten:m,isZero:v,isNumeric:x}=r;return e("intersect",{"Array, Array, Array":b,"Array, Array, Array, Array":y,"Matrix, Matrix, Matrix":function(I,O,U){var D=b(I.valueOf(),O.valueOf(),U.valueOf());return D===null?null:o(D)},"Matrix, Matrix, Matrix, Matrix":function(I,O,U,D){var H=y(I.valueOf(),O.valueOf(),U.valueOf(),D.valueOf());return H===null?null:o(H)}});function b(R,I,O){if(R=S(R),I=S(I),O=S(O),!N(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!N(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!j(O))throw new TypeError("Array with 4 numbers expected as third argument");return A(R[0],R[1],R[2],I[0],I[1],I[2],O[0],O[1],O[2],O[3])}function y(R,I,O,U){if(R=S(R),I=S(I),O=S(O),U=S(U),R.length===2){if(!_(R))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!_(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!_(O))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!_(U))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return E(R,I,O,U)}else if(R.length===3){if(!N(R))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!N(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!N(O))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!N(U))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return F(R[0],R[1],R[2],I[0],I[1],I[2],O[0],O[1],O[2],U[0],U[1],U[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function S(R){return R.length===1?R[0]:R.length>1&&Array.isArray(R[0])&&R.every(I=>Array.isArray(I)&&I.length===1)?m(R):R}function _(R){return R.length===2&&x(R[0])&&x(R[1])}function N(R){return R.length===3&&x(R[0])&&x(R[1])&&x(R[2])}function j(R){return R.length===4&&x(R[0])&&x(R[1])&&x(R[2])&&x(R[3])}function E(R,I,O,U){var D=R,H=O,P=d(D,I),G=d(H,U),ue=d(u(P[0],G[1]),u(G[0],P[1]));if(v(ue)||h(n(ue),t.relTol))return null;var le=u(G[0],D[1]),pe=u(G[1],D[0]),de=u(G[0],H[1]),L=u(G[1],H[0]),X=c(s(d(d(le,pe),de),L),ue);return a(l(P,X),D)}function T(R,I,O,U,D,H,P,G,ue,le,pe,de){var L=u(d(R,I),d(O,U)),X=u(d(D,H),d(P,G)),V=u(d(ue,le),d(pe,de));return s(s(L,X),V)}function F(R,I,O,U,D,H,P,G,ue,le,pe,de){var L=T(R,P,le,P,I,G,pe,G,O,ue,de,ue),X=T(le,P,U,R,pe,G,D,I,de,ue,H,O),V=T(R,P,U,R,I,G,D,I,O,ue,H,O),se=T(le,P,le,P,pe,G,pe,G,de,ue,de,ue),ae=T(U,R,U,R,D,I,D,I,H,O,H,O),W=d(u(L,X),u(V,se)),z=d(u(ae,se),u(X,X));if(v(z))return null;var re=c(W,z),ne=c(s(L,u(re,X)),se),ie=s(R,u(re,d(U,R))),oe=s(I,u(re,d(D,I))),ye=s(O,u(re,d(H,O))),M=s(P,u(ne,d(le,P))),ge=s(G,u(ne,d(pe,G))),ee=s(ue,u(ne,d(de,ue)));return g(ie,M)&&g(oe,ge)&&g(ye,ee)?[ie,oe,ye]:null}function A(R,I,O,U,D,H,P,G,ue,le){var pe=u(R,P),de=u(U,P),L=u(I,G),X=u(D,G),V=u(O,ue),se=u(H,ue),ae=d(d(d(le,pe),L),V),W=d(d(d(s(s(de,X),se),pe),L),V),z=c(ae,W),re=s(R,u(z,d(U,R))),ne=s(I,u(z,d(D,I))),ie=s(O,u(z,d(H,O)));return[re,ne,ie]}}),PA="sum",cce=["typed","config","add","numeric"],lk=Se(PA,cce,r=>{var{typed:e,config:t,add:n,numeric:a}=r;return e(PA,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":o,"...":function(u){if(zu(u))throw new TypeError("Scalar values expected in function sum");return s(u)}});function s(l){var u;return Xo(l,function(c){try{u=u===void 0?c:n(u,c)}catch(d){throw Ei(d,"sum",c)}}),u===void 0&&(u=a(0,t.number)),typeof u=="string"&&(u=a(u,el(u,t))),u}function o(l,u){try{var c=Tp(l,u,n);return c}catch(d){throw Ei(d,"sum")}}}),K0="cumsum",uce=["typed","add","unaryPlus"],ck=Se(K0,uce,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(K0,{Array:a,Matrix:function(c){return c.create(a(c.valueOf(),c.datatype()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(c,d){return c.create(o(c.valueOf(),d),c.datatype())},"...":function(c){if(zu(c))throw new TypeError("All values expected to be scalar in function cumsum");return a(c)}});function a(u){try{return s(u)}catch(c){throw Ei(c,K0)}}function s(u){if(u.length===0)return[];for(var c=[n(u[0])],d=1;d<u.length;++d)c.push(t(c[d-1],u[d]));return c}function o(u,c){var d=Ut(u);if(c<0||c>=d.length)throw new Wa(c,d.length);try{return l(u,c)}catch(h){throw Ei(h,K0)}}function l(u,c){var d,h,g;if(c<=0){var m=u[0][0];if(Array.isArray(m)){for(g=VD(u),h=[],d=0;d<g.length;d++)h[d]=l(g[d],c-1);return h}else return s(u)}else{for(h=[],d=0;d<u.length;d++)h[d]=l(u[d],c-1);return h}}}),qA="mean",dce=["typed","add","divide"],uk=Se(qA,dce,r=>{var{typed:e,add:t,divide:n}=r;return e(qA,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(l){if(zu(l))throw new TypeError("Scalar values expected in function mean");return s(l)}});function a(o,l){try{var u=Tp(o,l,t),c=Array.isArray(o)?Ut(o):o.size();return n(u,c[l])}catch(d){throw Ei(d,"mean")}}function s(o){var l,u=0;if(Xo(o,function(c){try{l=l===void 0?c:t(l,c),u++}catch(d){throw Ei(d,"mean",c)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return n(l,u)}}),$A="median",fce=["typed","add","divide","compare","partitionSelect"],hce=Se($A,fce,r=>{var{typed:e,add:t,divide:n,compare:a,partitionSelect:s}=r;function o(c){try{c=pr(c.valueOf());var d=c.length;if(d===0)throw new Error("Cannot calculate median of an empty array");if(d%2===0){for(var h=d/2-1,g=s(c,h+1),m=c[h],v=0;v<h;++v)a(c[v],m)>0&&(m=c[v]);return u(m,g)}else{var x=s(c,(d-1)/2);return l(x)}}catch(b){throw Ei(b,"median")}}var l=e({"number | BigNumber | Complex | Unit":function(d){return d}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(d,h){return n(t(d,h),2)}});return e($A,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(d,h){throw new Error("median(A, dim) is not yet supported")},"...":function(d){if(zu(d))throw new TypeError("Scalar values expected in function median");return o(d)}})}),UA="mad",mce=["typed","abs","map","median","subtract"],pce=Se(UA,mce,r=>{var{typed:e,abs:t,map:n,median:a,subtract:s}=r;return e(UA,{"Array | Matrix":o,"...":function(u){return o(u)}});function o(l){if(l=pr(l.valueOf()),l.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=a(l);return a(n(l,function(c){return t(s(c,u))}))}catch(c){throw c instanceof TypeError&&c.message.includes("median")?new TypeError(c.message.replace("median","mad")):Ei(c,"mad")}}}),ry="unbiased",HA="variance",gce=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],dk=Se(HA,gce,r=>{var{typed:e,add:t,subtract:n,multiply:a,divide:s,mapSlices:o,isNaN:l}=r;return e(HA,{"Array | Matrix":function(h){return u(h,ry)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(h,g){return c(h,g,ry)},"Array | Matrix, number | BigNumber, string":c,"...":function(h){return u(h,ry)}});function u(d,h){var g,m=0;if(d.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Xo(d,function(b){try{g=g===void 0?b:t(g,b),m++}catch(y){throw Ei(y,"variance",b)}}),m===0)throw new Error("Cannot calculate variance of an empty array");var v=s(g,m);if(g=void 0,Xo(d,function(b){var y=n(b,v);g=g===void 0?a(y,y):t(g,a(y,y))}),l(g))return g;switch(h){case"uncorrected":return s(g,m);case"biased":return s(g,m+1);case"unbiased":{var x=Xt(g)?g.mul(0):0;return m===1?x:s(g,m-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function c(d,h,g){try{if(d.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(d,h,m=>u(m,g))}catch(m){throw Ei(m,"variance")}}}),VA="quantileSeq",xce=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],fk=Se(VA,xce,r=>{var{typed:e,bignumber:t,add:n,subtract:a,divide:s,multiply:o,partitionSelect:l,compare:u,isInteger:c,smaller:d,smallerEq:h,larger:g,mapSlices:m}=r;return e(VA,{"Array | Matrix, number | BigNumber":(S,_)=>x(S,_,!1),"Array | Matrix, number | BigNumber, number":(S,_,N)=>v(S,_,!1,N,x),"Array | Matrix, number | BigNumber, boolean":x,"Array | Matrix, number | BigNumber, boolean, number":(S,_,N,j)=>v(S,_,N,j,x),"Array | Matrix, Array | Matrix":(S,_)=>b(S,_,!1),"Array | Matrix, Array | Matrix, number":(S,_,N)=>v(S,_,!1,N,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(S,_,N,j)=>v(S,_,N,j,b)});function v(S,_,N,j,E){return m(S,j,T=>E(T,_,N))}function x(S,_,N){var j,E=S.valueOf();if(d(_,0))throw new Error("N/prob must be non-negative");if(h(_,1))return Kt(_)?y(E,_,N):t(y(E,_,N));if(g(_,1)){if(!c(_))throw new Error("N must be a positive integer");if(g(_,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var T=n(_,1);j=[];for(var F=0;d(F,_);F++){var A=s(F+1,T);j.push(y(E,A,N))}return Kt(_)?j:t(j)}}function b(S,_,N){for(var j=S.valueOf(),E=_.valueOf(),T=[],F=0;F<E.length;++F)T.push(y(j,E[F],N));return T}function y(S,_,N){var j=pr(S),E=j.length;if(E===0)throw new Error("Cannot calculate quantile of an empty sequence");var T=Kt(_)?_*(E-1):_.times(E-1),F=Kt(_)?Math.floor(T):T.floor().toNumber(),A=Kt(_)?T%1:T.minus(F);if(c(T))return N?j[T]:l(j,Kt(_)?T:T.valueOf());var R,I;if(N)R=j[F],I=j[F+1];else{I=l(j,F+1),R=j[F];for(var O=0;O<F;++O)u(j[O],R)>0&&(R=j[O])}return n(o(R,a(1,A)),o(I,A))}}),GA="std",vce=["typed","map","sqrt","variance"],hk=Se(GA,vce,r=>{var{typed:e,map:t,sqrt:n,variance:a}=r;return e(GA,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(l){return s(l)}});function s(o,l){if(o.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=a.apply(null,arguments);return ja(u)?t(u,n):n(u)}catch(c){throw c instanceof TypeError&&c.message.includes(" variance")?new TypeError(c.message.replace(" variance"," std")):c}}}),QA="corr",yce=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],bce=Se(QA,yce,r=>{var{typed:e,matrix:t,sqrt:n,sum:a,add:s,subtract:o,multiply:l,pow:u,divide:c}=r;return e(QA,{"Array, Array":function(m,v){return d(m,v)},"Matrix, Matrix":function(m,v){var x=d(m.toArray(),v.toArray());return Array.isArray(x)?t(x):x}});function d(g,m){var v=[];if(Array.isArray(g[0])&&Array.isArray(m[0])){if(g.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var x=0;x<g.length;x++){if(g[x].length!==m[x].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");v.push(h(g[x],m[x]))}return v}else{if(g.length!==m.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(g,m)}}function h(g,m){var v=g.length,x=a(g),b=a(m),y=g.reduce((E,T,F)=>s(E,l(T,m[F])),0),S=a(g.map(E=>u(E,2))),_=a(m.map(E=>u(E,2))),N=o(l(v,y),l(x,b)),j=n(l(o(l(v,S),u(x,2)),o(l(v,_),u(b,2))));return c(N,j)}}),WA="combinations",wce=["typed"],_ce=Se(WA,wce,r=>{var{typed:e}=r;return e(WA,{"number, number":f8,"BigNumber, BigNumber":function(n,a){var s=n.constructor,o,l,u=n.minus(a),c=new s(1);if(!KA(n)||!KA(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(n))throw new TypeError("k must be less than n in function combinations");if(o=c,a.lt(u))for(l=c;l.lte(u);l=l.plus(c))o=o.times(a.plus(l)).dividedBy(l);else for(l=c;l.lte(a);l=l.plus(c))o=o.times(u.plus(l)).dividedBy(l);return o}})});function KA(r){return r.isInteger()&&r.gte(0)}var XA="combinationsWithRep",Nce=["typed"],Sce=Se(XA,Nce,r=>{var{typed:e}=r;return e(XA,{"number, number":function(n,a){if(!kt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!kt(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<n-1){var s=Hs(n,n+a-1);return s/Hs(1,a)}var o=Hs(a+1,n+a-1);return o/Hs(1,n-1)},"BigNumber, BigNumber":function(n,a){var s=n.constructor,o,l,u=new s(1),c=n.minus(u);if(!YA(n)||!YA(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=u,a.lt(c))for(l=u;l.lte(c);l=l.plus(u))o=o.times(a.plus(l)).dividedBy(l);else for(l=u;l.lte(a);l=l.plus(u))o=o.times(c.plus(l)).dividedBy(l);return o}})});function YA(r){return r.isInteger()&&r.gte(0)}var ZA="gamma",jce=["typed","config","multiplyScalar","pow","BigNumber","Complex"],Ece=Se(ZA,jce,r=>{var{typed:e,config:t,multiplyScalar:n,pow:a,BigNumber:s,Complex:o}=r;function l(c){if(c.im===0)return zm(c.re);if(c.re<.5){var d=new o(1-c.re,-c.im),h=new o(Math.PI*c.re,Math.PI*c.im);return new o(Math.PI).div(h.sin()).div(l(d))}c=new o(c.re-1,c.im);for(var g=new o(gu[0],0),m=1;m<gu.length;++m){var v=new o(gu[m],0);g=g.add(v.div(c.add(m)))}var x=new o(c.re+m8+.5,c.im),b=Math.sqrt(2*Math.PI),y=x.pow(c.add(.5)),S=x.neg().exp();return g.mul(b).mul(y).mul(S)}return e(ZA,{number:zm,Complex:l,BigNumber:function(d){if(d.isInteger())return d.isNegative()||d.isZero()?new s(1/0):u(d.minus(1));if(!d.isFinite())return new s(d.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(c){if(c<8)return new s([1,1,2,6,24,120,720,5040][c]);var d=t.precision+(Math.log(c.toNumber())|0),h=s.clone({precision:d});if(c%2===1)return c.times(u(new s(c-1)));for(var g=c,m=new h(c),v=c.toNumber();g>2;)g-=2,v+=g,m=m.times(v);return new s(m.toPrecision(s.precision))}}),JA="lgamma",Ace=["Complex","typed"],Tce=Se(JA,Ace,r=>{var{Complex:e,typed:t}=r,n=7,a=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(JA,{number:Pm,Complex:o,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function o(c){var d=6.283185307179586,h=1.1447298858494002,g=.1;if(c.isNaN())return new e(NaN,NaN);if(c.im===0)return new e(Pm(c.re),0);if(c.re>=n||Math.abs(c.im)>=a)return l(c);if(c.re<=g){var m=fG(d,c.im)*Math.floor(.5*c.re+.25),v=c.mul(Math.PI).sin().log(),x=o(new e(1-c.re,-c.im));return new e(h,m).sub(v).sub(x)}else return c.im>=0?u(c):u(c.conjugate()).conjugate()}function l(c){for(var d=c.sub(.5).mul(c.log()).sub(c).add(p8),h=new e(1,0).div(c),g=h.div(c),m=s[0],v=s[1],x=2*g.re,b=g.re*g.re+g.im*g.im,y=2;y<8;y++){var S=v;v=-b*m+s[y],m=x*m+S}var _=h.mul(g.mul(m).add(v));return d.add(_)}function u(c){var d=0,h=0,g=c;for(c=c.add(1);c.re<=n;){g=g.mul(c);var m=g.im<0?1:0;m!==0&&h===0&&d++,h=m,c=c.add(1)}return l(c).sub(g.log()).sub(new e(0,d*2*Math.PI*1))}}),e5="factorial",Cce=["typed","gamma"],Dce=Se(e5,Cce,r=>{var{typed:e,gamma:t}=r;return e(e5,{number:function(a){if(a<0)throw new Error("Value must be non-negative");return t(a+1)},BigNumber:function(a){if(a.isNegative())throw new Error("Value must be non-negative");return t(a.plus(1))},"Array | Matrix":e.referToSelf(n=>a=>Yt(a,n))})}),t5="kldivergence",kce=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],Mce=Se(t5,kce,r=>{var{typed:e,matrix:t,divide:n,sum:a,multiply:s,map:o,dotDivide:l,log:u,isNumeric:c}=r;return e(t5,{"Array, Array":function(g,m){return d(t(g),t(m))},"Matrix, Array":function(g,m){return d(g,t(m))},"Array, Matrix":function(g,m){return d(t(g),m)},"Matrix, Matrix":function(g,m){return d(g,m)}});function d(h,g){var m=g.size().length,v=h.size().length;if(m>1)throw new Error("first object must be one dimensional");if(v>1)throw new Error("second object must be one dimensional");if(m!==v)throw new Error("Length of two vectors must be equal");var x=a(h);if(x===0)throw new Error("Sum of elements in first object must be non zero");var b=a(g);if(b===0)throw new Error("Sum of elements in second object must be non zero");var y=n(h,a(h)),S=n(g,a(g)),_=a(s(y,o(l(y,S),N=>u(N))));return c(_)?_:Number.NaN}}),r5="multinomial",Fce=["typed","add","divide","multiply","factorial","isInteger","isPositive"],Oce=Se(r5,Fce,r=>{var{typed:e,add:t,divide:n,multiply:a,factorial:s,isInteger:o,isPositive:l}=r;return e(r5,{"Array | Matrix":function(c){var d=0,h=1;return Xo(c,function(g){if(!o(g)||!l(g))throw new TypeError("Positive integer value expected in function multinomial");d=t(d,g),h=a(h,s(g))}),n(s(d),h)}})}),n5="permutations",Bce=["typed","factorial"],Rce=Se(n5,Bce,r=>{var{typed:e,factorial:t}=r;return e(n5,{"number | BigNumber":t,"number, number":function(a,s){if(!kt(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!kt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>a)throw new TypeError("second argument k must be less than or equal to first argument n");return Hs(a-s+1,a)},"BigNumber, BigNumber":function(a,s){var o,l;if(!i5(a)||!i5(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var u=a.mul(0).add(1);for(o=u,l=a.minus(s).plus(1);l.lte(a);l=l.plus(1))o=o.times(l);return o}})});function i5(r){return r.isInteger()&&r.gte(0)}var im={exports:{}},Lce=im.exports,a5;function Ice(){return a5||(a5=1,function(r){(function(e,t,n){function a(u){var c=this,d=l();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(u),c.s0<0&&(c.s0+=1),c.s1-=d(u),c.s1<0&&(c.s1+=1),c.s2-=d(u),c.s2<0&&(c.s2+=1),d=null}function s(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function o(u,c){var d=new a(u),h=c&&c.state,g=d.next;return g.int32=function(){return d.next()*4294967296|0},g.double=function(){return g()+(g()*2097152|0)*11102230246251565e-32},g.quick=g,h&&(typeof h=="object"&&s(h,d),g.state=function(){return s(d,{})}),g}function l(){var u=4022871197,c=function(d){d=String(d);for(var h=0;h<d.length;h++){u+=d.charCodeAt(h);var g=.02519603282416938*u;u=g>>>0,g-=u,g*=u,u=g>>>0,g-=u,u+=g*4294967296}return(u>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=o:this.alea=o})(Lce,r)}(im)),im.exports}var am={exports:{}},zce=am.exports,s5;function Pce(){return s5||(s5=1,function(r){(function(e,t,n){function a(l){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var h=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^h^h>>>8},l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u}function o(l,u){var c=new a(l),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var g=c.next()>>>11,m=(c.next()>>>0)/4294967296,v=(g+m)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&s(d,c),h.state=function(){return s(c,{})}),h}t&&t.exports?t.exports=o:this.xor128=o})(zce,r)}(am)),am.exports}var sm={exports:{}},qce=sm.exports,o5;function $ce(){return o5||(o5=1,function(r){(function(e,t,n){function a(l){var u=this,c="";u.next=function(){var h=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(h^h<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,l===(l|0)?u.x=l:c+=l;for(var d=0;d<c.length+64;d++)u.x^=c.charCodeAt(d)|0,d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function s(l,u){return u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,u.v=l.v,u.d=l.d,u}function o(l,u){var c=new a(l),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var g=c.next()>>>11,m=(c.next()>>>0)/4294967296,v=(g+m)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&s(d,c),h.state=function(){return s(c,{})}),h}t&&t.exports?t.exports=o:this.xorwow=o})(qce,r)}(sm)),sm.exports}var om={exports:{}},Uce=om.exports,l5;function Hce(){return l5||(l5=1,function(r){(function(e,t,n){function a(l){var u=this;u.next=function(){var d=u.x,h=u.i,g,m;return g=d[h],g^=g>>>7,m=g^g<<24,g=d[h+1&7],m^=g^g>>>10,g=d[h+3&7],m^=g^g>>>3,g=d[h+4&7],m^=g^g<<7,g=d[h+7&7],g=g^g<<13,m^=g^g<<9,d[h]=m,u.i=h+1&7,m};function c(d,h){var g,m=[];if(h===(h|0))m[0]=h;else for(h=""+h,g=0;g<h.length;++g)m[g&7]=m[g&7]<<15^h.charCodeAt(g)+m[g+1&7]<<13;for(;m.length<8;)m.push(0);for(g=0;g<8&&m[g]===0;++g);for(g==8?m[7]=-1:m[g],d.x=m,d.i=0,g=256;g>0;--g)d.next()}c(u,l)}function s(l,u){return u.x=l.x.slice(),u.i=l.i,u}function o(l,u){l==null&&(l=+new Date);var c=new a(l),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var g=c.next()>>>11,m=(c.next()>>>0)/4294967296,v=(g+m)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,d&&(d.x&&s(d,c),h.state=function(){return s(c,{})}),h}t&&t.exports?t.exports=o:this.xorshift7=o})(Uce,r)}(om)),om.exports}var lm={exports:{}},Vce=lm.exports,c5;function Gce(){return c5||(c5=1,function(r){(function(e,t,n){function a(l){var u=this;u.next=function(){var d=u.w,h=u.X,g=u.i,m,v;return u.w=d=d+1640531527|0,v=h[g+34&127],m=h[g=g+1&127],v^=v<<13,m^=m<<17,v^=v>>>15,m^=m>>>12,v=h[g]=v^m,u.i=g,v+(d^d>>>16)|0};function c(d,h){var g,m,v,x,b,y=[],S=128;for(h===(h|0)?(m=h,h=null):(h=h+"\0",m=0,S=Math.max(S,h.length)),v=0,x=-32;x<S;++x)h&&(m^=h.charCodeAt((x+32)%h.length)),x===0&&(b=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,x>=0&&(b=b+1640531527|0,g=y[x&127]^=m+b,v=g==0?v+1:0);for(v>=128&&(y[(h&&h.length||0)&127]=-1),v=127,x=512;x>0;--x)m=y[v+34&127],g=y[v=v+1&127],m^=m<<13,g^=g<<17,m^=m>>>15,g^=g>>>12,y[v]=m^g;d.w=b,d.X=y,d.i=v}c(u,l)}function s(l,u){return u.i=l.i,u.w=l.w,u.X=l.X.slice(),u}function o(l,u){l==null&&(l=+new Date);var c=new a(l),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var g=c.next()>>>11,m=(c.next()>>>0)/4294967296,v=(g+m)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,d&&(d.X&&s(d,c),h.state=function(){return s(c,{})}),h}t&&t.exports?t.exports=o:this.xor4096=o})(Vce,r)}(lm)),lm.exports}var cm={exports:{}},Qce=cm.exports,u5;function Wce(){return u5||(u5=1,function(r){(function(e,t,n){function a(l){var u=this,c="";u.next=function(){var h=u.b,g=u.c,m=u.d,v=u.a;return h=h<<25^h>>>7^g,g=g-m|0,m=m<<24^m>>>8^v,v=v-h|0,u.b=h=h<<20^h>>>12^g,u.c=g=g-m|0,u.d=m<<16^g>>>16^v,u.a=v-h|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,l===Math.floor(l)?(u.a=l/4294967296|0,u.b=l|0):c+=l;for(var d=0;d<c.length+20;d++)u.b^=c.charCodeAt(d)|0,u.next()}function s(l,u){return u.a=l.a,u.b=l.b,u.c=l.c,u.d=l.d,u}function o(l,u){var c=new a(l),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var g=c.next()>>>11,m=(c.next()>>>0)/4294967296,v=(g+m)/(1<<21);while(v===0);return v},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&s(d,c),h.state=function(){return s(c,{})}),h}t&&t.exports?t.exports=o:this.tychei=o})(Qce,r)}(cm)),cm.exports}var um={exports:{}};const Kce={},Xce=Object.freeze(Object.defineProperty({__proto__:null,default:Kce},Symbol.toStringTag,{value:"Module"})),Yce=SF(Xce);var Zce=um.exports,d5;function Jce(){return d5||(d5=1,function(r){(function(e,t,n){var a=256,s=6,o=52,l="random",u=n.pow(a,s),c=n.pow(2,o),d=c*2,h=a-1,g;function m(N,j,E){var T=[];j=j==!0?{entropy:!0}:j||{};var F=y(b(j.entropy?[N,_(t)]:N??S(),3),T),A=new v(T),R=function(){for(var I=A.g(s),O=u,U=0;I<c;)I=(I+U)*a,O*=a,U=A.g(1);for(;I>=d;)I/=2,O/=2,U>>>=1;return(I+U)/O};return R.int32=function(){return A.g(4)|0},R.quick=function(){return A.g(4)/4294967296},R.double=R,y(_(A.S),t),(j.pass||E||function(I,O,U,D){return D&&(D.S&&x(D,A),I.state=function(){return x(A,{})}),U?(n[l]=I,O):I})(R,F,"global"in j?j.global:this==n,j.state)}function v(N){var j,E=N.length,T=this,F=0,A=T.i=T.j=0,R=T.S=[];for(E||(N=[E++]);F<a;)R[F]=F++;for(F=0;F<a;F++)R[F]=R[A=h&A+N[F%E]+(j=R[F])],R[A]=j;(T.g=function(I){for(var O,U=0,D=T.i,H=T.j,P=T.S;I--;)O=P[D=h&D+1],U=U*a+P[h&(P[D]=P[H=h&H+O])+(P[H]=O)];return T.i=D,T.j=H,U})(a)}function x(N,j){return j.i=N.i,j.j=N.j,j.S=N.S.slice(),j}function b(N,j){var E=[],T=typeof N,F;if(j&&T=="object")for(F in N)try{E.push(b(N[F],j-1))}catch{}return E.length?E:T=="string"?N:N+"\0"}function y(N,j){for(var E=N+"",T,F=0;F<E.length;)j[h&F]=h&(T^=j[h&F]*19)+E.charCodeAt(F++);return _(j)}function S(){try{var N;return g&&(N=g.randomBytes)?N=N(a):(N=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(N)),_(N)}catch{var j=e.navigator,E=j&&j.plugins;return[+new Date,e,E,e.screen,_(t)]}}function _(N){return String.fromCharCode.apply(0,N)}if(y(n.random(),t),r.exports){r.exports=m;try{g=Yce}catch{}}else n["seed"+l]=m})(typeof self<"u"?self:Zce,[],Math)}(um)),um.exports}var ny,f5;function eue(){if(f5)return ny;f5=1;var r=Ice(),e=Pce(),t=$ce(),n=Hce(),a=Gce(),s=Wce(),o=Jce();return o.alea=r,o.xor128=e,o.xorwow=t,o.xorshift7=n,o.xor4096=a,o.tychei=s,ny=o,ny}var tue=eue();const mk=Df(tue);var rue=mk(Date.now());function Du(r){var e;function t(a){e=a===null?rue:mk(String(a))}t(r);function n(){return e()}return n}var h5="pickRandom",nue=["typed","config","?on"],iue=Se(h5,nue,r=>{var{typed:e,config:t,on:n}=r,a=Du(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(a=Du(o.randomSeed))}),e(h5,{"Array | Matrix":function(l){return s(l,{})},"Array | Matrix, Object":function(l,u){return s(l,u)},"Array | Matrix, number":function(l,u){return s(l,{number:u})},"Array | Matrix, Array | Matrix":function(l,u){return s(l,{weights:u})},"Array | Matrix, Array | Matrix, number":function(l,u,c){return s(l,{number:c,weights:u})},"Array | Matrix, number, Array | Matrix":function(l,u,c){return s(l,{number:u,weights:c})}});function s(o,l){var{number:u,weights:c,elementWise:d=!0}=l,h=typeof u>"u";h&&(u=1);var g=Lt(o)?o.create:Lt(c)?c.create:null;o=o.valueOf(),c&&(c=c.valueOf()),d===!0&&(o=pr(o),c=pr(c));var m=0;if(typeof c<"u"){if(c.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var v=0,x=c.length;v<x;v++){if(!Kt(c[v])||c[v]<0)throw new Error("Weights must be an array of positive numbers");m+=c[v]}}for(var b=o.length,y=[],S;y.length<u;){if(typeof c>"u")S=o[Math.floor(a()*b)];else for(var _=a()*m,N=0,j=o.length;N<j;N++)if(_-=c[N],_<0){S=o[N];break}y.push(S)}return h?y[0]:g?g(y):y}});function Hb(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,a=r.shift();n<a;n++)t.push(Hb(r,e));else for(var s=0,o=r.shift();s<o;s++)t.push(e());return t}var m5="random",aue=["typed","config","?on"],sue=Se(m5,aue,r=>{var{typed:e,config:t,on:n}=r,a=Du(t.randomSeed);return n&&n("config",function(l,u){l.randomSeed!==u.randomSeed&&(a=Du(l.randomSeed))}),e(m5,{"":()=>o(0,1),number:l=>o(0,l),"number, number":(l,u)=>o(l,u),"Array | Matrix":l=>s(l,0,1),"Array | Matrix, number":(l,u)=>s(l,0,u),"Array | Matrix, number, number":(l,u,c)=>s(l,u,c)});function s(l,u,c){var d=Hb(l.valueOf(),()=>o(u,c));return Lt(l)?l.create(d,"number"):d}function o(l,u){return l+a()*(u-l)}}),p5="randomInt",oue=["typed","config","log2","?on"],lue=Se(p5,oue,r=>{var{typed:e,config:t,log2:n,on:a}=r,s=Du(t.randomSeed);return a&&a("config",function(c,d){c.randomSeed!==d.randomSeed&&(s=Du(c.randomSeed))}),e(p5,{"":()=>l(0,2),number:c=>l(0,c),"number, number":(c,d)=>l(c,d),bigint:c=>u(0n,c),"bigint, bigint":u,"Array | Matrix":c=>o(c,0,1),"Array | Matrix, number":(c,d)=>o(c,0,d),"Array | Matrix, number, number":(c,d,h)=>o(c,d,h)});function o(c,d,h){var g=Hb(c.valueOf(),()=>l(d,h));return Lt(c)?c.create(g,"number"):g}function l(c,d){return Math.floor(c+s()*(d-c))}function u(c,d){var h=2n**30n,g=d-c;if(g<=h)return c+BigInt(l(0,Number(g)));for(var m=n(g),v=g;v>=g;){v=0n;for(var x=0;x<m;++x)v=2n*v+(s()<.5?0n:1n)}return c+v}}),g5="stirlingS2",cue=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],uue=Se(g5,cue,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:a,divideScalar:s,pow:o,factorial:l,combinations:u,isNegative:c,isInteger:d,number:h,bignumber:g,larger:m}=r,v=[],x=[];return e(g5,{"number | BigNumber, number | BigNumber":function(y,S){if(!d(y)||c(y)||!d(S)||c(S))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(m(S,y))throw new TypeError("k must be less than or equal to n in function stirlingS2");var _=!(Kt(y)&&Kt(S)),N=_?x:v,j=_?g:h,E=h(y),T=h(S);if(N[E]&&N[E].length>T)return N[E][T];for(var F=0;F<=E;++F)if(N[F]||(N[F]=[j(F===0?1:0)]),F!==0)for(var A=N[F],R=N[F-1],I=A.length;I<=F&&I<=T;++I)I===F?A[I]=1:A[I]=t(a(j(I),R[I]),R[I-1]);return N[E][T]}})}),x5="bellNumbers",due=["typed","addScalar","isNegative","isInteger","stirlingS2"],fue=Se(x5,due,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:a,stirlingS2:s}=r;return e(x5,{"number | BigNumber":function(l){if(!a(l)||n(l))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,c=0;c<=l;c++)u=t(u,s(l,c));return u}})}),v5="catalan",hue=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],mue=Se(v5,hue,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:a,combinations:s,isNegative:o,isInteger:l}=r;return e(v5,{"number | BigNumber":function(c){if(!l(c)||o(c))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(a(c,2),c),t(c,1))}})}),y5="composition",pue=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],gue=Se(y5,pue,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:a,isNegative:s,isInteger:o,larger:l}=r;return e(y5,{"number | BigNumber, number | BigNumber":function(c,d){if(!o(c)||!a(c)||!o(d)||!a(d))throw new TypeError("Positive integer value expected in function composition");if(l(d,c))throw new TypeError("k must be less than or equal to n in function composition");return n(t(c,-1),t(d,-1))}})}),b5="leafCount",xue=["parse","typed"],vue=Se(b5,xue,r=>{var{parse:e,typed:t}=r;function n(a){var s=0;return a.forEach(o=>{s+=n(o)}),s||1}return t(b5,{Node:function(s){return n(s)}})});function w5(r){return dr(r)||pn(r)&&r.isUnary()&&dr(r.args[0])}function Xm(r){return!!(dr(r)||(Qo(r)||pn(r))&&r.args.every(Xm)||Zs(r)&&Xm(r.content))}function _5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function iy(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(t),!0).forEach(function(n){Sn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var yue="simplifyUtil",bue=["FunctionNode","OperatorNode","SymbolNode"],Vb=Se(yue,bue,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,a=!0,s=!1,o="defaultF",l={add:{trivial:a,total:a,commutative:a,associative:a},unaryPlus:{trivial:a,total:a,commutative:a,associative:a},subtract:{trivial:s,total:a,commutative:s,associative:s},multiply:{trivial:a,total:a,commutative:a,associative:a},divide:{trivial:s,total:a,commutative:s,associative:s},paren:{trivial:a,total:a,commutative:a,associative:s},defaultF:{trivial:s,total:a,commutative:s,associative:s}},u={divide:{total:s},log:{total:s}},c={subtract:{total:s},abs:{trivial:a},log:{total:a}};function d(_,N){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l,E=o;if(typeof _=="string"?E=_:pn(_)?E=_.fn.toString():Qo(_)?E=_.name:Zs(_)&&(E="paren"),Ct(j,E)){var T=j[E];if(Ct(T,N))return T[N];if(Ct(l,E))return l[E][N]}if(Ct(j,o)){var F=j[o];return Ct(F,N)?F[N]:l[o][N]}if(Ct(l,E)){var A=l[E];if(Ct(A,N))return A[N]}return l[o][N]}function h(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l;return d(_,"commutative",N)}function g(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l;return d(_,"associative",N)}function m(_,N){var j=iy({},_);for(var E in N)Ct(_,E)?j[E]=iy(iy({},N[E]),_[E]):j[E]=N[E];return j}function v(_,N){if(!_.args||_.args.length===0)return _;_.args=x(_,N);for(var j=0;j<_.args.length;j++)v(_.args[j],N)}function x(_,N){var j,E=[],T=function(A){for(var R=0;R<A.args.length;R++){var I=A.args[R];pn(I)&&j===I.op?T(I):E.push(I)}};return g(_,N)?(j=_.op,T(_),E):_.args}function b(_,N){if(!(!_.args||_.args.length===0)){for(var j=S(_),E=_.args.length,T=0;T<E;T++)b(_.args[T],N);if(E>2&&g(_,N)){for(var F=_.args.pop();_.args.length>0;)F=j([_.args.pop(),F]);_.args=F.args}}}function y(_,N){if(!(!_.args||_.args.length===0)){for(var j=S(_),E=_.args.length,T=0;T<E;T++)y(_.args[T],N);if(E>2&&g(_,N)){for(var F=_.args.shift();_.args.length>0;)F=j([F,_.args.shift()]);_.args=F.args}}}function S(_){return pn(_)?function(N){try{return new t(_.op,_.fn,N,_.implicit)}catch(j){return console.error(j),[]}}:function(N){return new e(new n(_.name),N)}}return{createMakeNodeFunction:S,hasProperty:d,isCommutative:h,isAssociative:g,mergeContext:m,flatten:v,allChildren:x,unflattenr:b,unflattenl:y,defaultContext:l,realContext:u,positiveContext:c}}),wue="simplify",_ue=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],Nue=Se(wue,_ue,r=>{var{typed:e,parse:t,equal:n,resolve:a,simplifyConstant:s,simplifyCore:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:d,IndexNode:h,ObjectNode:g,OperatorNode:m,ParenthesisNode:v,SymbolNode:x,replacer:b}=r,{hasProperty:y,isCommutative:S,isAssociative:_,mergeContext:N,flatten:j,unflattenr:E,unflattenl:T,createMakeNodeFunction:F,defaultContext:A,realContext:R,positiveContext:I}=Vb({FunctionNode:d,OperatorNode:m,SymbolNode:x});e.addConversion({from:"Object",to:"Map",convert:mu});var O=e("simplify",{Node:le,"Node, Map":(z,re)=>le(z,!1,re),"Node, Map, Object":(z,re,ne)=>le(z,!1,re,ne),"Node, Array":le,"Node, Array, Map":le,"Node, Array, Map, Object":le});e.removeConversion({from:"Object",to:"Map",convert:mu}),O.defaultContext=A,O.realContext=R,O.positiveContext=I;function U(z){return z.transform(function(re){return Zs(re)?U(re.content):re})}var D={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};O.rules=[o,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},s,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},s,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function H(z,re){var ne={};if(z.s){var ie=z.s.split("->");if(ie.length===2)ne.l=ie[0],ne.r=ie[1];else throw SyntaxError("Could not parse rule: "+z.s)}else ne.l=z.l,ne.r=z.r;ne.l=U(t(ne.l)),ne.r=U(t(ne.r));for(var oe of["imposeContext","repeat","assuming"])oe in z&&(ne[oe]=z[oe]);if(z.evaluate&&(ne.evaluate=t(z.evaluate)),_(ne.l,re)){var ye=!S(ne.l,re),M;ye&&(M=ue());var ge=F(ne.l),ee=ue();ne.expanded={},ne.expanded.l=ge([ne.l,ee]),j(ne.expanded.l,re),E(ne.expanded.l,re),ne.expanded.r=ge([ne.r,ee]),ye&&(ne.expandedNC1={},ne.expandedNC1.l=ge([M,ne.l]),ne.expandedNC1.r=ge([M,ne.r]),ne.expandedNC2={},ne.expandedNC2.l=ge([M,ne.expanded.l]),ne.expandedNC2.r=ge([M,ne.expanded.r]))}return ne}function P(z,re){for(var ne=[],ie=0;ie<z.length;ie++){var oe=z[ie],ye=void 0,M=typeof oe;switch(M){case"string":oe={s:oe};case"object":ye=H(oe,re);break;case"function":ye=oe;break;default:throw TypeError("Unsupported type of rule: "+M)}ne.push(ye)}return ne}var G=0;function ue(){return new x("_p"+G++)}function le(z,re){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sf(),ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},oe=ie.consoleDebug;re=P(re||O.rules,ie.context);var ye=a(z,ne);ye=U(ye);for(var M={},ge=ye.toString({parenthesis:"all"});!M[ge];){M[ge]=!0,G=0;var ee=ge;oe&&console.log("Working on: ",ge);for(var k=0;k<re.length;k++){var B="";if(typeof re[k]=="function"?(ye=re[k](ye,ie),oe&&(B=re[k].name)):(j(ye,ie.context),ye=de(ye,re[k],ie.context),oe&&(B="".concat(re[k].l.toString()," -> ").concat(re[k].r.toString()))),oe){var Q=ye.toString({parenthesis:"all"});Q!==ee&&(console.log("Applying",B,"produced",Q),ee=Q)}T(ye,ie.context)}ge=ye.toString({parenthesis:"all"})}return ye}function pe(z,re,ne){var ie=z;if(z)for(var oe=0;oe<z.length;++oe){var ye=de(z[oe],re,ne);ye!==z[oe]&&(ie===z&&(ie=z.slice()),ie[oe]=ye)}return ie}function de(z,re,ne){if(re.assuming){for(var ie in re.assuming)for(var oe in re.assuming[ie])if(y(ie,oe,ne)!==re.assuming[ie][oe])return z}var ye=N(re.imposeContext,ne),M=z;if(M instanceof m||M instanceof d){var ge=pe(M.args,re,ne);ge!==M.args&&(M=M.clone(),M.args=ge)}else if(M instanceof v){if(M.content){var ee=de(M.content,re,ne);ee!==M.content&&(M=new v(ee))}}else if(M instanceof u){var k=pe(M.items,re,ne);k!==M.items&&(M=new u(k))}else if(M instanceof l){var B=M.object;M.object&&(B=de(M.object,re,ne));var Q=M.index;M.index&&(Q=de(M.index,re,ne)),(B!==M.object||Q!==M.index)&&(M=new l(B,Q))}else if(M instanceof h){var Z=pe(M.dimensions,re,ne);Z!==M.dimensions&&(M=new h(Z))}else if(M instanceof g){var J=!1,K={};for(var te in M.properties)K[te]=de(M.properties[te],re,ne),K[te]!==M.properties[te]&&(J=!0);J&&(M=new g(K))}var me=re.r,fe=ae(re.l,M,ye)[0];if(!fe&&re.expanded&&(me=re.expanded.r,fe=ae(re.expanded.l,M,ye)[0]),!fe&&re.expandedNC1&&(me=re.expandedNC1.r,fe=ae(re.expandedNC1.l,M,ye)[0],fe||(me=re.expandedNC2.r,fe=ae(re.expandedNC2.l,M,ye)[0])),fe){var xe=M.implicit;M=me.clone(),xe&&"implicit"in me&&(M.implicit=!0),M=M.transform(function(_e){return _e.isSymbolNode&&Ct(fe.placeholders,_e.name)?fe.placeholders[_e.name].clone():_e})}return re.repeat&&M!==z&&(M=de(M,re,ne)),M}function L(z,re){var ne=[],ie,oe,ye=F(z);if(S(z,re))for(var M=0;M<z.args.length;M++)oe=z.args.slice(0),oe.splice(M,1),ie=oe.length===1?oe[0]:ye(oe),ne.push(ye([z.args[M],ie]));else for(var ge=1;ge<z.args.length;ge++){var ee=z.args[0];ge>1&&(ee=ye(z.args.slice(0,ge))),oe=z.args.slice(ge),ie=oe.length===1?oe[0]:ye(oe),ne.push(ye([ee,ie]))}return ne}function X(z,re){var ne={placeholders:{}};if(!z.placeholders&&!re.placeholders)return ne;if(z.placeholders){if(!re.placeholders)return z}else return re;for(var ie in z.placeholders)if(Ct(z.placeholders,ie)&&(ne.placeholders[ie]=z.placeholders[ie],Ct(re.placeholders,ie)&&!W(z.placeholders[ie],re.placeholders[ie])))return null;for(var oe in re.placeholders)Ct(re.placeholders,oe)&&(ne.placeholders[oe]=re.placeholders[oe]);return ne}function V(z,re){var ne=[];if(z.length===0||re.length===0)return ne;for(var ie,oe=0;oe<z.length;oe++)for(var ye=0;ye<re.length;ye++)ie=X(z[oe],re[ye]),ie&&ne.push(ie);return ne}function se(z){if(z.length===0)return z;for(var re=z.reduce(V),ne=[],ie={},oe=0;oe<re.length;oe++){var ye=JSON.stringify(re[oe],b);ie[ye]||(ie[ye]=!0,ne.push(re[oe]))}return ne}function ae(z,re,ne,ie){var oe=[{placeholders:{}}];if(z instanceof m&&re instanceof m||z instanceof d&&re instanceof d){if(z instanceof m){if(z.op!==re.op||z.fn!==re.fn)return[]}else if(z instanceof d&&z.name!==re.name)return[];if(re.args.length===1&&z.args.length===1||!_(re,ne)&&re.args.length===z.args.length||ie){for(var ye=[],M=0;M<z.args.length;M++){var ge=ae(z.args[M],re.args[M],ne);if(ge.length===0)break;ye.push(ge)}if(ye.length!==z.args.length){if(!S(re,ne)||z.args.length===1)return[];if(z.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var ee=ae(z.args[0],re.args[1],ne);if(ee.length===0)return[];var k=ae(z.args[1],re.args[0],ne);if(k.length===0)return[];ye=[ee,k]}oe=se(ye)}else if(re.args.length>=2&&z.args.length===2){for(var B=L(re,ne),Q=[],Z=0;Z<B.length;Z++){var J=ae(z,B[Z],ne,!0);Q=Q.concat(J)}return Q}else{if(z.args.length>2)throw Error("Unexpected non-binary associative function: "+z.toString());return[]}}else if(z instanceof x){if(z.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(D[z.name]){if(z.name!==re.name)return[]}else switch(z.name[1]>="a"&&z.name[1]<="z"?z.name.substring(0,2):z.name[0]){case"n":case"_p":oe[0].placeholders[z.name]=re;break;case"c":case"cl":if(dr(re))oe[0].placeholders[z.name]=re;else return[];break;case"v":if(!dr(re))oe[0].placeholders[z.name]=re;else return[];break;case"vl":if(Hn(re))oe[0].placeholders[z.name]=re;else return[];break;case"cd":if(w5(re))oe[0].placeholders[z.name]=re;else return[];break;case"vd":if(!w5(re))oe[0].placeholders[z.name]=re;else return[];break;case"ce":if(Xm(re))oe[0].placeholders[z.name]=re;else return[];break;case"ve":if(!Xm(re))oe[0].placeholders[z.name]=re;else return[];break;default:throw new Error("Invalid symbol in rule: "+z.name)}}else if(z instanceof c){if(!n(z.value,re.value))return[]}else return[];return oe}function W(z,re){if(z instanceof c&&re instanceof c){if(!n(z.value,re.value))return!1}else if(z instanceof x&&re instanceof x){if(z.name!==re.name)return!1}else if(z instanceof m&&re instanceof m||z instanceof d&&re instanceof d){if(z instanceof m){if(z.op!==re.op||z.fn!==re.fn)return!1}else if(z instanceof d&&z.name!==re.name)return!1;if(z.args.length!==re.args.length)return!1;for(var ne=0;ne<z.args.length;ne++)if(!W(z.args[ne],re.args[ne]))return!1}else return!1;return!0}return O}),Sue="simplifyConstant",jue=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],Eue=Se(Sue,jue,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:a,fraction:s,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:d,IndexNode:h,ObjectNode:g,OperatorNode:m,SymbolNode:v}=r,{isCommutative:x,isAssociative:b,allChildren:y,createMakeNodeFunction:S}=Vb({FunctionNode:d,OperatorNode:m,SymbolNode:v}),_=e("simplifyConstant",{Node:H=>T(D(H,{})),"Node, Object":function(P,G){return T(D(P,G))}});function N(H){return $f(H)?H.valueOf():H instanceof Array?H.map(N):Lt(H)?a(N(H.valueOf())):H}function j(H,P,G){try{return n[H].apply(null,P)}catch{return P=P.map(N),A(n[H].apply(null,P),G)}}var E=e({Fraction:I,number:function(P){return P<0?R(new c(-P)):new c(P)},BigNumber:function(P){return P<0?R(new c(-P)):new c(P)},bigint:function(P){return P<0n?R(new c(-P)):new c(P)},Complex:function(P){throw new Error("Cannot convert Complex number to Node")},string:function(P){return new c(P)},Matrix:function(P){return new u(P.valueOf().map(G=>E(G)))}});function T(H){return Ar(H)?H:E(H)}function F(H,P){var G=P&&P.exactFractions!==!1;if(G&&isFinite(H)&&s){var ue=s(H),le=P&&typeof P.fractionsLimit=="number"?P.fractionsLimit:1/0;if(ue.valueOf()===H&&ue.n<le&&ue.d<le)return ue}return H}var A=e({"string, Object":function(P,G){var ue=el(P,t);if(ue==="BigNumber")return o===void 0&&Pb(),o(P);if(ue==="bigint")return BigInt(P);if(ue==="Fraction")return s===void 0&&Q8(),s(P);var le=parseFloat(P);return F(le,G)},"Fraction, Object":function(P,G){return P},"BigNumber, Object":function(P,G){return P},"number, Object":function(P,G){return F(P,G)},"bigint, Object":function(P,G){return P},"Complex, Object":function(P,G){return P.im!==0?P:F(P.re,G)},"Matrix, Object":function(P,G){return a(F(P.valueOf()))},"Array, Object":function(P,G){return P.map(F)}});function R(H){return new m("-","unaryMinus",[H])}function I(H){var P=le=>t.number==="BigNumber"&&o?o(le):Number(le),G=H.s*H.n,ue=G<0n?new m("-","unaryMinus",[new c(-P(G))]):new c(P(G));return H.d===1n?ue:new m("/","divide",[ue,new c(P(H.d))])}function O(H,P,G){if(!Iu(P))return new l(T(H),T(P));if(wa(H)||Lt(H)){for(var ue=Array.from(P.dimensions);ue.length>0;)if(dr(ue[0])&&typeof ue[0].value!="string"){var le=A(ue.shift().value,G);wa(H)?H=H.items[le-1]:(H=H.valueOf()[le-1],H instanceof Array&&(H=a(H)))}else if(ue.length>1&&dr(ue[1])&&typeof ue[1].value!="string"){var pe=A(ue[1].value,G),de=[],L=wa(H)?H.items:H.valueOf();for(var X of L)if(wa(X))de.push(X.items[pe-1]);else if(Lt(H))de.push(X[pe-1]);else break;if(de.length===L.length)wa(H)?H=new u(de):H=a(de),ue.splice(1,1);else break}else break;return ue.length===P.dimensions.length?new l(T(H),P):ue.length>0?(P=new h(ue),new l(T(H),P)):H}if(_p(H)&&P.dimensions.length===1&&dr(P.dimensions[0])){var V=P.dimensions[0].value;return V in H.properties?H.properties[V]:new c}return new l(T(H),P)}function U(H,P,G,ue){var le=P.shift(),pe=P.reduce((de,L)=>{if(!Ar(L)){var X=de.pop();if(Ar(X))return[X,L];try{return de.push(j(H,[X,L],ue)),de}catch{de.push(X)}}de.push(T(de.pop()));var V=de.length===1?de[0]:G(de);return[G([V,T(L)])]},[le]);return pe.length===1?pe[0]:G([pe[0],E(pe[1])])}function D(H,P){switch(H.type){case"SymbolNode":return H;case"ConstantNode":switch(typeof H.value){case"number":return A(H.value,P);case"bigint":return A(H.value,P);case"string":return H.value;default:if(!isNaN(H.value))return A(H.value,P)}return H;case"FunctionNode":if(n[H.name]&&n[H.name].rawArgs)return H;{var G=["add","multiply"];if(!G.includes(H.name)){var ue=H.args.map(ie=>D(ie,P));if(!ue.some(Ar))try{return j(H.name,ue,P)}catch{}if(H.name==="size"&&ue.length===1&&wa(ue[0])){for(var le=[],pe=ue[0];wa(pe);)le.push(pe.items.length),pe=pe.items[0];return a(le)}return new d(H.name,ue.map(T))}}case"OperatorNode":{var de=H.fn.toString(),L,X,V=S(H);if(pn(H)&&H.isUnary())L=[D(H.args[0],P)],Ar(L[0])?X=V(L):X=j(de,L,P);else if(b(H,P.context))if(L=y(H,P.context),L=L.map(ie=>D(ie,P)),x(de,P.context)){for(var se=[],ae=[],W=0;W<L.length;W++)Ar(L[W])?ae.push(L[W]):se.push(L[W]);se.length>1?(X=U(de,se,V,P),ae.unshift(X),X=U(de,ae,V,P)):X=U(de,L,V,P)}else X=U(de,L,V,P);else L=H.args.map(ie=>D(ie,P)),X=U(de,L,V,P);return X}case"ParenthesisNode":return D(H.content,P);case"AccessorNode":return O(D(H.object,P),D(H.index,P),P);case"ArrayNode":{var z=H.items.map(ie=>D(ie,P));return z.some(Ar)?new u(z.map(T)):a(z)}case"IndexNode":return new h(H.dimensions.map(ie=>_(ie,P)));case"ObjectNode":{var re={};for(var ne in H.properties)re[ne]=_(H.properties[ne],P);return new g(re)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(H.type))}}return _}),N5="simplifyCore",Aue=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],Tue=Se(N5,Aue,r=>{var{typed:e,parse:t,equal:n,isZero:a,add:s,subtract:o,multiply:l,divide:u,pow:c,AccessorNode:d,ArrayNode:h,ConstantNode:g,FunctionNode:m,IndexNode:v,ObjectNode:x,OperatorNode:b,ParenthesisNode:y,SymbolNode:S}=r,_=new g(0),N=new g(1),j=new g(!0),E=new g(!1);function T(I){return pn(I)&&["and","not","or"].includes(I.op)}var{hasProperty:F,isCommutative:A}=Vb({FunctionNode:m,OperatorNode:b,SymbolNode:S});function R(I){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=O?O.context:void 0;if(F(I,"trivial",U)){if(Qo(I)&&I.args.length===1)return R(I.args[0],O);var D=!1,H=0;if(I.forEach(ae=>{++H,H===1&&(D=R(ae,O))}),H===1)return D}var P=I;if(Qo(P)){var G=jre(P.name);if(G){if(P.args.length>2&&F(P,"associative",U))for(;P.args.length>2;){var ue=P.args.pop(),le=P.args.pop();P.args.push(new b(G,P.name,[ue,le]))}P=new b(G,P.name,P.args)}else return new m(R(P.fn),P.args.map(ae=>R(ae,O)))}if(pn(P)&&P.isUnary()){var pe=R(P.args[0],O);if(P.op==="~"&&pn(pe)&&pe.isUnary()&&pe.op==="~"||P.op==="not"&&pn(pe)&&pe.isUnary()&&pe.op==="not"&&T(pe.args[0]))return pe.args[0];var de=!0;if(P.op==="-"&&pn(pe)&&(pe.isBinary()&&pe.fn==="subtract"&&(P=new b("-","subtract",[pe.args[1],pe.args[0]]),de=!1),pe.isUnary()&&pe.op==="-"))return pe.args[0];if(de)return new b(P.op,P.fn,[pe])}if(pn(P)&&P.isBinary()){var L=R(P.args[0],O),X=R(P.args[1],O);if(P.op==="+"){if(dr(L)&&a(L.value))return X;if(dr(X)&&a(X.value))return L;pn(X)&&X.isUnary()&&X.op==="-"&&(X=X.args[0],P=new b("-","subtract",[L,X]))}if(P.op==="-")return pn(X)&&X.isUnary()&&X.op==="-"?R(new b("+","add",[L,X.args[0]]),O):dr(L)&&a(L.value)?R(new b("-","unaryMinus",[X])):dr(X)&&a(X.value)?L:new b(P.op,P.fn,[L,X]);if(P.op==="*"){if(dr(L)){if(a(L.value))return _;if(n(L.value,1))return X}if(dr(X)){if(a(X.value))return _;if(n(X.value,1))return L;if(A(P,U))return new b(P.op,P.fn,[X,L],P.implicit)}return new b(P.op,P.fn,[L,X],P.implicit)}if(P.op==="/")return dr(L)&&a(L.value)?_:dr(X)&&n(X.value,1)?L:new b(P.op,P.fn,[L,X]);if(P.op==="^"&&dr(X)){if(a(X.value))return N;if(n(X.value,1))return L}if(P.op==="and"){if(dr(L))if(L.value){if(T(X))return X;if(dr(X))return X.value?j:E}else return E;if(dr(X))if(X.value){if(T(L))return L}else return E}if(P.op==="or"){if(dr(L)){if(L.value)return j;if(T(X))return X}if(dr(X)){if(X.value)return j;if(T(L))return L}}return new b(P.op,P.fn,[L,X])}if(pn(P))return new b(P.op,P.fn,P.args.map(ae=>R(ae,O)));if(wa(P))return new h(P.items.map(ae=>R(ae,O)));if(Ul(P))return new d(R(P.object,O),R(P.index,O));if(Iu(P))return new v(P.dimensions.map(ae=>R(ae,O)));if(_p(P)){var V={};for(var se in P.properties)V[se]=R(P.properties[se],O);return new x(V)}return P}return e(N5,{Node:R,"Node,Object":R})}),Cue="resolve",Due=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],kue=Se(Cue,Due,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:a,OperatorNode:s,ParenthesisNode:o}=r;function l(u,c){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!c)return u;if(Hn(u)){if(d.has(u.name)){var h=Array.from(d).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var g=c.get(u.name);if(Ar(g)){var m=new Set(d);return m.add(u.name),l(g,c,m)}else return typeof g=="number"?t(String(g)):g!==void 0?new n(g):u}else if(pn(u)){var v=u.args.map(function(b){return l(b,c,d)});return new s(u.op,u.fn,v,u.implicit)}else{if(Zs(u))return new o(l(u.content,c,d));if(Qo(u)){var x=u.args.map(function(b){return l(b,c,d)});return new a(u.name,x)}}return u.map(b=>l(b,c,d))}return e("resolve",{Node:l,"Node, Map | null | undefined":l,"Node, Object":(u,c)=>l(u,mu(c)),"Array | Matrix":e.referToSelf(u=>c=>c.map(d=>u(d))),"Array | Matrix, null | undefined":e.referToSelf(u=>c=>c.map(d=>u(d))),"Array, Object":e.referTo("Array,Map",u=>(c,d)=>u(c,mu(d))),"Matrix, Object":e.referTo("Matrix,Map",u=>(c,d)=>u(c,mu(d))),"Array | Matrix, Map":e.referToSelf(u=>(c,d)=>c.map(h=>u(h,d)))})}),S5="symbolicEqual",Mue=["parse","simplify","typed","OperatorNode"],Fue=Se(S5,Mue,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:a}=r;function s(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=new a("-","subtract",[o,l]),d=t(c,{},u);return dr(d)&&!d.value}return n(S5,{"Node, Node":s,"Node, Node, Object":s})}),j5="derivative",Oue=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],Bue=Se(j5,Oue,r=>{var{typed:e,config:t,parse:n,simplify:a,equal:s,isZero:o,numeric:l,ConstantNode:u,FunctionNode:c,OperatorNode:d,ParenthesisNode:h,SymbolNode:g}=r;function m(N,j){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},T=new Map,F=j.name;function A(I){var O=T.get(I);if(O!==void 0)return O;var U=y(A,I,F);return T.set(I,U),U}var R=S(N,A);return E.simplify?a(R):R}function v(N){var j=n(N);if(!j.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(N)," into a variable in function derivative"));return j}var x=e(j5,{"Node, SymbolNode":m,"Node, SymbolNode, Object":m,"Node, string":(N,j)=>m(N,v(j)),"Node, string, Object":(N,j,E)=>m(N,v(j),E)});x._simplify=!0,x.toTex=function(N){return b.apply(null,N.args)};var b=e("_derivTex",{"Node, SymbolNode":function(j,E){return dr(j)&&Or(j.value)==="string"?b(n(j.value).toString(),E.toString(),1):b(j.toTex(),E.toString(),1)},"Node, ConstantNode":function(j,E){if(Or(E.value)==="string")return b(j,n(E.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(j,E,T){return b(j.toString(),E.name,T.value)},"string, string, number":function(j,E,T){var F;return T===1?F="{d\\over d"+E+"}":F="{d^{"+T+"}\\over d"+E+"^{"+T+"}}",F+"\\left[".concat(j,"\\right]")}}),y=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(j,E,T){return E.name!==T},"function, ParenthesisNode, string":function(j,E,T){return j(E.content,T)},"function, FunctionAssignmentNode, string":function(j,E,T){return E.params.includes(T)?j(E.expr,T):!0},"function, FunctionNode | OperatorNode, string":function(j,E,T){return E.args.every(F=>j(F,T))}}),S=e("_derivative",{"ConstantNode, function":function(){return _(0)},"SymbolNode, function":function(j,E){return E(j)?_(0):_(1)},"ParenthesisNode, function":function(j,E){return new h(S(j.content,E))},"FunctionAssignmentNode, function":function(j,E){return E(j)?_(0):S(j.expr,E)},"FunctionNode, function":function(j,E){if(E(j))return _(0);var T=j.args[0],F,A=!1,R=!1,I;switch(j.name){case"cbrt":A=!0,I=new d("*","multiply",[_(3),new d("^","pow",[T,new d("/","divide",[_(2),_(3)])])]);break;case"sqrt":case"nthRoot":if(j.args.length===1)A=!0,I=new d("*","multiply",[_(2),new c("sqrt",[T])]);else if(j.args.length===2)return F=new d("/","divide",[_(1),j.args[1]]),S(new d("^","pow",[T,F]),E);break;case"log10":F=_(10);case"log":if(!F&&j.args.length===1)I=T.clone(),A=!0;else if(j.args.length===1&&F||j.args.length===2&&E(j.args[1]))I=new d("*","multiply",[T.clone(),new c("log",[F||j.args[1]])]),A=!0;else if(j.args.length===2)return S(new d("/","divide",[new c("log",[T]),new c("log",[j.args[1]])]),E);break;case"pow":if(j.args.length===2)return S(new d("^","pow",[T,j.args[1]]),E);break;case"exp":I=new c("exp",[T.clone()]);break;case"sin":I=new c("cos",[T.clone()]);break;case"cos":I=new d("-","unaryMinus",[new c("sin",[T.clone()])]);break;case"tan":I=new d("^","pow",[new c("sec",[T.clone()]),_(2)]);break;case"sec":I=new d("*","multiply",[j,new c("tan",[T.clone()])]);break;case"csc":R=!0,I=new d("*","multiply",[j,new c("cot",[T.clone()])]);break;case"cot":R=!0,I=new d("^","pow",[new c("csc",[T.clone()]),_(2)]);break;case"asin":A=!0,I=new c("sqrt",[new d("-","subtract",[_(1),new d("^","pow",[T.clone(),_(2)])])]);break;case"acos":A=!0,R=!0,I=new c("sqrt",[new d("-","subtract",[_(1),new d("^","pow",[T.clone(),_(2)])])]);break;case"atan":A=!0,I=new d("+","add",[new d("^","pow",[T.clone(),_(2)]),_(1)]);break;case"asec":A=!0,I=new d("*","multiply",[new c("abs",[T.clone()]),new c("sqrt",[new d("-","subtract",[new d("^","pow",[T.clone(),_(2)]),_(1)])])]);break;case"acsc":A=!0,R=!0,I=new d("*","multiply",[new c("abs",[T.clone()]),new c("sqrt",[new d("-","subtract",[new d("^","pow",[T.clone(),_(2)]),_(1)])])]);break;case"acot":A=!0,R=!0,I=new d("+","add",[new d("^","pow",[T.clone(),_(2)]),_(1)]);break;case"sinh":I=new c("cosh",[T.clone()]);break;case"cosh":I=new c("sinh",[T.clone()]);break;case"tanh":I=new d("^","pow",[new c("sech",[T.clone()]),_(2)]);break;case"sech":R=!0,I=new d("*","multiply",[j,new c("tanh",[T.clone()])]);break;case"csch":R=!0,I=new d("*","multiply",[j,new c("coth",[T.clone()])]);break;case"coth":R=!0,I=new d("^","pow",[new c("csch",[T.clone()]),_(2)]);break;case"asinh":A=!0,I=new c("sqrt",[new d("+","add",[new d("^","pow",[T.clone(),_(2)]),_(1)])]);break;case"acosh":A=!0,I=new c("sqrt",[new d("-","subtract",[new d("^","pow",[T.clone(),_(2)]),_(1)])]);break;case"atanh":A=!0,I=new d("-","subtract",[_(1),new d("^","pow",[T.clone(),_(2)])]);break;case"asech":A=!0,R=!0,I=new d("*","multiply",[T.clone(),new c("sqrt",[new d("-","subtract",[_(1),new d("^","pow",[T.clone(),_(2)])])])]);break;case"acsch":A=!0,R=!0,I=new d("*","multiply",[new c("abs",[T.clone()]),new c("sqrt",[new d("+","add",[new d("^","pow",[T.clone(),_(2)]),_(1)])])]);break;case"acoth":A=!0,R=!0,I=new d("-","subtract",[_(1),new d("^","pow",[T.clone(),_(2)])]);break;case"abs":I=new d("/","divide",[new c(new g("abs"),[T.clone()]),T.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+j.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var O,U;A?(O="/",U="divide"):(O="*",U="multiply");var D=S(T,E);return R&&(D=new d("-","unaryMinus",[D])),new d(O,U,[D,I])},"OperatorNode, function":function(j,E){if(E(j))return _(0);if(j.op==="+")return new d(j.op,j.fn,j.args.map(function(P){return S(P,E)}));if(j.op==="-"){if(j.isUnary())return new d(j.op,j.fn,[S(j.args[0],E)]);if(j.isBinary())return new d(j.op,j.fn,[S(j.args[0],E),S(j.args[1],E)])}if(j.op==="*"){var T=j.args.filter(function(P){return E(P)});if(T.length>0){var F=j.args.filter(function(P){return!E(P)}),A=F.length===1?F[0]:new d("*","multiply",F),R=T.concat(S(A,E));return new d("*","multiply",R)}return new d("+","add",j.args.map(function(P){return new d("*","multiply",j.args.map(function(G){return G===P?S(G,E):G.clone()}))}))}if(j.op==="/"&&j.isBinary()){var I=j.args[0],O=j.args[1];return E(O)?new d("/","divide",[S(I,E),O]):E(I)?new d("*","multiply",[new d("-","unaryMinus",[I]),new d("/","divide",[S(O,E),new d("^","pow",[O.clone(),_(2)])])]):new d("/","divide",[new d("-","subtract",[new d("*","multiply",[S(I,E),O.clone()]),new d("*","multiply",[I.clone(),S(O,E)])]),new d("^","pow",[O.clone(),_(2)])])}if(j.op==="^"&&j.isBinary()){var U=j.args[0],D=j.args[1];if(E(U))return dr(U)&&(o(U.value)||s(U.value,1))?_(0):new d("*","multiply",[j,new d("*","multiply",[new c("log",[U.clone()]),S(D.clone(),E)])]);if(E(D)){if(dr(D)){if(o(D.value))return _(0);if(s(D.value,1))return S(U,E)}var H=new d("^","pow",[U.clone(),new d("-","subtract",[D,_(1)])]);return new d("*","multiply",[D.clone(),new d("*","multiply",[S(U,E),H])])}return new d("*","multiply",[new d("^","pow",[U.clone(),D.clone()]),new d("+","add",[new d("*","multiply",[S(U,E),new d("/","divide",[D.clone(),U.clone()])]),new d("*","multiply",[S(D,E),new c("log",[U.clone()])])])])}throw new Error('Cannot process operator "'+j.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function _(N,j){return new u(l(N,el(String(N),t)))}return x}),E5="rationalize",Rue=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],Lue=Se(E5,Rue,r=>{var{config:e,typed:t,equal:n,isZero:a,add:s,subtract:o,multiply:l,divide:u,pow:c,parse:d,simplifyConstant:h,simplifyCore:g,simplify:m,fraction:v,bignumber:x,mathWithTransform:b,matrix:y,AccessorNode:S,ArrayNode:_,ConstantNode:N,FunctionNode:j,IndexNode:E,ObjectNode:T,OperatorNode:F,SymbolNode:A,ParenthesisNode:R}=r;function I(P){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,le=U(),pe=O(P,G,!0,le.firstRules),de=pe.variables.length,L={exactFractions:!1},X={exactFractions:!0};if(P=pe.expression,de>=1){P=D(P);var V,se,ae=!0,W=!1;P=m(P,le.firstRules,{},L);for(var z;se=ae?le.distrDivRules:le.sucDivRules,P=m(P,se,{},X),ae=!ae,z=P.toString(),z!==V;)W=!0,V=z;W&&(P=m(P,le.firstRulesAgain,{},L)),P=m(P,le.finalRules,{},L)}var re=[],ne={};return P.type==="OperatorNode"&&P.isBinary()&&P.op==="/"?(de===1&&(P.args[0]=H(P.args[0],re),P.args[1]=H(P.args[1])),ue&&(ne.numerator=P.args[0],ne.denominator=P.args[1])):(de===1&&(P=H(P,re)),ue&&(ne.numerator=P,ne.denominator=null)),ue?(ne.coefficients=re,ne.variables=pe.variables,ne.expression=P,ne):P}return t(E5,{Node:I,"Node, boolean":(P,G)=>I(P,{},G),"Node, Object":I,"Node, Object, boolean":I});function O(P,G,ue,le){var pe=[],de=m(P,le,G,{exactFractions:!1});ue=!!ue;var L="+-*"+(ue?"/":"");V(de);var X={};return X.expression=de,X.variables=pe,X;function V(se){var ae=se.type;if(ae==="FunctionNode")throw new Error("There is an unsolved function call");if(ae==="OperatorNode")if(se.op==="^"){if(se.args[1].type!=="ConstantNode"||!kt(parseFloat(se.args[1].value)))throw new Error("There is a non-integer exponent");V(se.args[0])}else{if(!L.includes(se.op))throw new Error("Operator "+se.op+" invalid in polynomial expression");for(var W=0;W<se.args.length;W++)V(se.args[W])}else if(ae==="SymbolNode"){var z=se.name,re=pe.indexOf(z);re===-1&&pe.push(z)}else if(ae==="ParenthesisNode")V(se.content);else if(ae!=="ConstantNode")throw new Error("type "+ae+" is not allowed in polynomial expression")}}function U(){var P=[g,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],G=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],ue=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],le=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],pe={};return pe.firstRules=P.concat(G,le),pe.distrDivRules=ue,pe.sucDivRules=le,pe.firstRulesAgain=P.concat(G),pe.finalRules=[g,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],pe}function D(P,G,ue){var le=P.type,pe=arguments.length>1;if(le==="OperatorNode"&&P.isBinary()){var de=!1,L;if(P.op==="^"&&(P.args[0].type==="ParenthesisNode"||P.args[0].type==="OperatorNode")&&P.args[1].type==="ConstantNode"&&(L=parseFloat(P.args[1].value),de=L>=2&&kt(L)),de){if(L>2){var X=P.args[0],V=new F("^","pow",[P.args[0].cloneDeep(),new N(L-1)]);P=new F("*","multiply",[X,V])}else P=new F("*","multiply",[P.args[0],P.args[0].cloneDeep()]);pe&&(ue==="content"?G.content=P:G.args[ue]=P)}}if(le==="ParenthesisNode")D(P.content,P,"content");else if(le!=="ConstantNode"&&le!=="SymbolNode")for(var se=0;se<P.args.length;se++)D(P.args[se],P,se);if(!pe)return P}function H(P,G){G===void 0&&(G=[]),G[0]=0;var ue={};ue.cte=1,ue.oper="+",ue.fire="";var le=0,pe="";z(P,null,ue),le=G.length-1;for(var de=!0,L,X=le;X>=0;X--)if(G[X]!==0){var V=new N(de?G[X]:Math.abs(G[X])),se=G[X]<0?"-":"+";if(X>0){var ae=new A(pe);if(X>1){var W=new N(X);ae=new F("^","pow",[ae,W])}G[X]===-1&&de?V=new F("-","unaryMinus",[ae]):Math.abs(G[X])===1?V=ae:V=new F("*","multiply",[V,ae])}de?L=V:se==="+"?L=new F("+","add",[L,V]):L=new F("-","subtract",[L,V]),de=!1}if(de)return new N(0);return L;function z(re,ne,ie){var oe=re.type;if(oe==="FunctionNode")throw new Error("There is an unsolved function call");if(oe==="OperatorNode"){if(!"+-*^".includes(re.op))throw new Error("Operator "+re.op+" invalid");if(ne!==null){if((re.fn==="unaryMinus"||re.fn==="pow")&&ne.fn!=="add"&&ne.fn!=="subtract"&&ne.fn!=="multiply")throw new Error("Invalid "+re.op+" placing");if((re.fn==="subtract"||re.fn==="add"||re.fn==="multiply")&&ne.fn!=="add"&&ne.fn!=="subtract")throw new Error("Invalid "+re.op+" placing");if((re.fn==="subtract"||re.fn==="add"||re.fn==="unaryMinus")&&ie.noFil!==0)throw new Error("Invalid "+re.op+" placing")}(re.op==="^"||re.op==="*")&&(ie.fire=re.op);for(var ye=0;ye<re.args.length;ye++)re.fn==="unaryMinus"&&(ie.oper="-"),(re.op==="+"||re.fn==="subtract")&&(ie.fire="",ie.cte=1,ie.oper=ye===0?"+":re.op),ie.noFil=ye,z(re.args[ye],re,ie)}else if(oe==="SymbolNode"){if(re.name!==pe&&pe!=="")throw new Error("There is more than one variable");if(pe=re.name,ne===null){G[1]=1;return}if(ne.op==="^"&&ie.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ne.op==="*"&&ie.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(ie.fire===""||ie.fire==="*")&&(le<1&&(G[1]=0),G[1]+=ie.cte*(ie.oper==="+"?1:-1),le=Math.max(1,le))}else if(oe==="ConstantNode"){var M=parseFloat(re.value);if(ne===null){G[0]=M;return}if(ne.op==="^"){if(ie.noFil!==1)throw new Error("Constant cannot be powered");if(!kt(M)||M<=0)throw new Error("Non-integer exponent is not allowed");for(var ge=le+1;ge<M;ge++)G[ge]=0;M>le&&(G[M]=0),G[M]+=ie.cte*(ie.oper==="+"?1:-1),le=Math.max(M,le);return}ie.cte=M,ie.fire===""&&(G[0]+=ie.cte*(ie.oper==="+"?1:-1))}else throw new Error("Type "+oe+" is not allowed")}}}),A5="zpk2tf",Iue=["typed","add","multiply","Complex","number"],zue=Se(A5,Iue,r=>{var{typed:e,add:t,multiply:n,Complex:a,number:s}=r;return e(A5,{"Array,Array,number":function(c,d,h){return o(c,d,h)},"Array,Array":function(c,d){return o(c,d,1)},"Matrix,Matrix,number":function(c,d,h){return o(c.valueOf(),d.valueOf(),h)},"Matrix,Matrix":function(c,d){return o(c.valueOf(),d.valueOf(),1)}});function o(u,c,d){u.some(S=>S.type==="BigNumber")&&(u=u.map(S=>s(S))),c.some(S=>S.type==="BigNumber")&&(c=c.map(S=>s(S)));for(var h=[a(1,0)],g=[a(1,0)],m=0;m<u.length;m++){var v=u[m];typeof v=="number"&&(v=a(v,0)),h=l(h,[a(1,0),a(-v.re,-v.im)])}for(var x=0;x<c.length;x++){var b=c[x];typeof b=="number"&&(b=a(b,0)),g=l(g,[a(1,0),a(-b.re,-b.im)])}for(var y=0;y<h.length;y++)h[y]=n(h[y],d);return[h,g]}function l(u,c){for(var d=[],h=0;h<u.length+c.length-1;h++){d[h]=a(0,0);for(var g=0;g<u.length;g++)h-g>=0&&h-g<c.length&&(d[h]=t(d[h],n(u[g],c[h-g])))}return d}}),T5="freqz",Pue=["typed","add","multiply","Complex","divide","matrix"],que=Se(T5,Pue,r=>{var{typed:e,add:t,multiply:n,Complex:a,divide:s,matrix:o}=r;return e(T5,{"Array, Array":function(d,h){var g=u(512);return l(d,h,g)},"Array, Array, Array":function(d,h,g){return l(d,h,g)},"Array, Array, number":function(d,h,g){if(g<0)throw new Error("w must be a positive number");var m=u(g);return l(d,h,m)},"Matrix, Matrix":function(d,h){var g=u(512),{w:m,h:v}=l(d.valueOf(),h.valueOf(),g);return{w:o(m),h:o(v)}},"Matrix, Matrix, Matrix":function(d,h,g){var{h:m}=l(d.valueOf(),h.valueOf(),g.valueOf());return{h:o(m),w:o(g)}},"Matrix, Matrix, number":function(d,h,g){if(g<0)throw new Error("w must be a positive number");var m=u(g),{h:v}=l(d.valueOf(),h.valueOf(),m);return{h:o(v),w:o(m)}}});function l(c,d,h){for(var g=[],m=[],v=0;v<h.length;v++){for(var x=a(0,0),b=a(0,0),y=0;y<c.length;y++)x=t(x,n(c[y],a(Math.cos(-y*h[v]),Math.sin(-y*h[v]))));for(var S=0;S<d.length;S++)b=t(b,n(d[S],a(Math.cos(-S*h[v]),Math.sin(-S*h[v]))));g.push(x),m.push(b)}for(var _=[],N=0;N<g.length;N++)_.push(s(g[N],m[N]));return{h:_,w:h}}function u(c){for(var d=[],h=0;h<c;h++)d.push(h/c*Math.PI);return d}}),$ue="reviver",Uue=["classes"],Hue=Se($ue,Uue,r=>{var{classes:e}=r;return function(n,a){var s=e[a&&a.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(a):a}}),Vue="replacer",Gue=[],Que=Se(Vue,Gue,()=>function(e,t){return typeof t=="number"&&(!isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t}),Wue="14.6.0",Kue=Se("true",[],()=>!0),Xue=Se("false",[],()=>!1),Yue=Se("null",[],()=>null),Zue=na("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),Jue=na("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),ede=na("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Ub(t):tW}),tde=na("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Cee(t):rW}),rde=na("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Aee(t):nW}),nde=na("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?Tee(t):iW}),ide=na("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),ade=na("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),sde=na("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),ode=na("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),lde=na("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),cde=na("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),ude=na("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),dde=Se("version",[],()=>Wue);function na(r,e,t){return Se(r,e,t,{recreateOnConfigChange:!0})}var fde=Gt("speedOfLight","299792458","m s^-1"),hde=Gt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),mde=Gt("planckConstant","6.62607015e-34","J s"),pde=Gt("reducedPlanckConstant","1.0545718176461565e-34","J s"),gde=Gt("magneticConstant","1.25663706212e-6","N A^-2"),xde=Gt("electricConstant","8.8541878128e-12","F m^-1"),vde=Gt("vacuumImpedance","376.730313667","ohm"),yde=Gt("coulomb","8.987551792261171e9","N m^2 C^-2"),bde=Gt("coulombConstant","8.987551792261171e9","N m^2 C^-2"),wde=Gt("elementaryCharge","1.602176634e-19","C"),_de=Gt("bohrMagneton","9.2740100783e-24","J T^-1"),Nde=Gt("conductanceQuantum","7.748091729863649e-5","S"),Sde=Gt("inverseConductanceQuantum","12906.403729652257","ohm"),jde=Gt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Ede=Gt("nuclearMagneton","5.0507837461e-27","J T^-1"),Ade=Gt("klitzing","25812.807459304513","ohm"),Tde=Gt("bohrRadius","5.29177210903e-11","m"),Cde=Gt("classicalElectronRadius","2.8179403262e-15","m"),Dde=Gt("electronMass","9.1093837015e-31","kg"),kde=Gt("fermiCoupling","1.1663787e-5","GeV^-2"),Mde=Mp("fineStructure",.0072973525693),Fde=Gt("hartreeEnergy","4.3597447222071e-18","J"),Ode=Gt("protonMass","1.67262192369e-27","kg"),Bde=Gt("deuteronMass","3.3435830926e-27","kg"),Rde=Gt("neutronMass","1.6749271613e-27","kg"),Lde=Gt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Ide=Gt("rydberg","10973731.568160","m^-1"),zde=Gt("thomsonCrossSection","6.6524587321e-29","m^2"),Pde=Mp("weakMixingAngle",.2229),qde=Mp("efimovFactor",22.7),$de=Gt("atomicMass","1.66053906660e-27","kg"),Ude=Gt("avogadro","6.02214076e23","mol^-1"),Hde=Gt("boltzmann","1.380649e-23","J K^-1"),Vde=Gt("faraday","96485.33212331001","C mol^-1"),Gde=Gt("firstRadiation","3.7417718521927573e-16","W m^2"),Qde=Gt("loschmidt","2.686780111798444e25","m^-3"),Wde=Gt("gasConstant","8.31446261815324","J K^-1 mol^-1"),Kde=Gt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Xde=Gt("molarVolume","0.022413969545014137","m^3 mol^-1"),Yde=Mp("sackurTetrode",-1.16487052358),Zde=Gt("secondRadiation","0.014387768775039337","m K"),Jde=Gt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),efe=Gt("wienDisplacement","2.897771955e-3","m K"),tfe=Gt("molarMass","0.99999999965e-3","kg mol^-1"),rfe=Gt("molarMassC12","11.9999999958e-3","kg mol^-1"),nfe=Gt("gravity","9.80665","m s^-2"),ife=Gt("planckLength","1.616255e-35","m"),afe=Gt("planckMass","2.176435e-8","kg"),sfe=Gt("planckTime","5.391245e-44","s"),ofe=Gt("planckCharge","1.87554603778e-18","C"),lfe=Gt("planckTemperature","1.416785e+32","K");function Gt(r,e,t){var n=["config","Unit","BigNumber"];return Se(r,n,a=>{var{config:s,Unit:o,BigNumber:l}=a,u=s.number==="BigNumber"?new l(e):parseFloat(e),c=new o(u,t);return c.fixPrefix=!0,c})}function Mp(r,e){var t=["config","BigNumber"];return Se(r,t,n=>{var{config:a,BigNumber:s}=n;return a.number==="BigNumber"?new s(e):e})}function C5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,n)}return t}function cfe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?C5(Object(t),!0).forEach(function(n){Sn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):C5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ufe="mapSlices",dfe=["typed","isInteger"],ffe=Se(ufe,dfe,r=>{var{typed:e,isInteger:t}=r,n=Oy({typed:e,isInteger:t});return e("mapSlices",{"...any":function(s){var o=s[1];Kt(o)?s[1]=o-1:Xt(o)&&(s[1]=o.minus(1));try{return n.apply(null,s)}catch(l){throw Ti(l)}}})},cfe({isTransformFunction:!0},Oy.meta)),hfe="column",mfe=["typed","Index","matrix","range"],pfe=Se(hfe,mfe,r=>{var{typed:e,Index:t,matrix:n,range:a}=r,s=$8({typed:e,Index:t,matrix:n,range:a});return e("column",{"...any":function(l){var u=l.length-1,c=l[u];Kt(c)&&(l[u]=c-1);try{return s.apply(null,l)}catch(d){throw Ti(d)}}})},{isTransformFunction:!0});function Gb(r,e,t){var n=r.filter(function(u){return Hn(u)&&!(u.name in e)&&!t.has(u.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var a=n.name,s=new Map,o=new fD(t,s,new Set([a])),l=r.compile();return function(c){return s.set(a,c),l.evaluate(o)}}var gfe="transformCallback",xfe=["typed"],Qb=Se(gfe,xfe,r=>{var{typed:e}=r;return function(n,a){return e.isTypedFunction(n)?t(n,a):D5(n,n.length,a)};function t(n,a){var s=Object.fromEntries(Object.entries(n.signatures).map(o=>{var[l,u]=o,c=l.split(",").length;return e.isTypedFunction(u)?[l,t(u,a)]:[l,D5(u,c,a)]}));return typeof n.name=="string"?e(n.name,s):e(s)}});function D5(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.slice(0,t),l=k5(a[t]);return r(...o,l)}:e>t+1?function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.slice(0,t),l=k5(a[t]),u=a.slice(t+1);return r(...o,l,...u)}:r}function k5(r){return r.map(e=>e+1)}var vfe="filter",yfe=["typed"],bfe=Se(vfe,yfe,r=>{var{typed:e}=r;function t(a,s,o){var l=U8({typed:e}),u=Qb({typed:e});if(a.length===0)return l();var c=a[0];if(a.length===1)return l(c);var d=a.length-1,h=a[d];return c&&(c=n(c,o)),h&&(Hn(h)||Uf(h)?h=n(h,o):h=Gb(h,s,o)),l(c,u(h,d))}t.rawArgs=!0;function n(a,s){return a.compile().evaluate(s)}return t},{isTransformFunction:!0}),wfe="forEach",_fe=["typed"],Nfe=Se(wfe,_fe,r=>{var{typed:e}=r,t=H8({typed:e}),n=Qb({typed:e});function a(o,l,u){if(o.length===0)return t();var c=o[0];if(o.length===1)return t(c);var d=o.length-1,h=o[d];return c&&(c=s(c,u)),h&&(Hn(h)||Uf(h)?h=s(h,u):h=Gb(h,l,u)),t(c,n(h,d))}a.rawArgs=!0;function s(o,l){return o.compile().evaluate(l)}return a},{isTransformFunction:!0}),Sfe="index",jfe=["Index","getMatrixDataType"],Efe=Se(Sfe,jfe,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var a=[],s=0,o=arguments.length;s<o;s++){var l=arguments[s];if(Tb(l))l.start--,l.end-=l.step>0?0:2;else if(l&&l.isSet===!0)l=l.map(function(c){return c-1});else if(Mr(l)||Lt(l))t(l)!=="boolean"&&(l=l.map(function(c){return c-1}));else if(Kt(l)||mf(l))l--;else if(Xt(l))l=l.toNumber()-1;else if(typeof l!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");a[s]=l}var u=new e;return e.apply(u,a),u}},{isTransformFunction:!0}),Afe="map",Tfe=["typed"],Cfe=Se(Afe,Tfe,r=>{var{typed:e}=r,t=V8({typed:e}),n=Qb({typed:e});function a(s,o,l){if(s.length===0)return t();if(s.length===1)return t(s[0]);var u=s.length-1,c=s.slice(0,u),d=s[u];return c=c.map(g=>h(g,l)),d&&(Hn(d)||Uf(d)?d=h(d,l):d=Gb(d,o,l)),t(...c,n(d,u));function h(g,m){return g.compile().evaluate(m)}}return a.rawArgs=!0,a},{isTransformFunction:!0});function Dfe(r){return Kt(r)?r-1:Xt(r)?r.minus(1):r}function kfe(r){return Kt(r)||Xt(r)}function nl(r){if(r.length===2&&ja(r[0])){r=r.slice();var e=r[1];kfe(e)&&(r[1]=Dfe(e))}return r}var Mfe="max",Ffe=["typed","config","numeric","larger","isNaN"],Ofe=Se(Mfe,Ffe,r=>{var{typed:e,config:t,numeric:n,larger:a,isNaN:s}=r,o=tk({typed:e,config:t,numeric:n,larger:a,isNaN:s});return e("max",{"...any":function(u){u=nl(u);try{return o.apply(null,u)}catch(c){throw Ti(c)}}})},{isTransformFunction:!0}),Bfe="mean",Rfe=["typed","add","divide"],Lfe=Se(Bfe,Rfe,r=>{var{typed:e,add:t,divide:n}=r,a=uk({typed:e,add:t,divide:n});return e("mean",{"...any":function(o){o=nl(o);try{return a.apply(null,o)}catch(l){throw Ti(l)}}})},{isTransformFunction:!0}),Ife="min",zfe=["typed","config","numeric","smaller","isNaN"],Pfe=Se(Ife,zfe,r=>{var{typed:e,config:t,numeric:n,smaller:a,isNaN:s}=r,o=rk({typed:e,config:t,numeric:n,smaller:a,isNaN:s});return e("min",{"...any":function(u){u=nl(u);try{return o.apply(null,u)}catch(c){throw Ti(c)}}})},{isTransformFunction:!0}),qfe="range",$fe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],Ufe=Se(qfe,$fe,r=>{var{typed:e,config:t,matrix:n,bignumber:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isPositive:d}=r,h=K8({typed:e,config:t,matrix:n,bignumber:a,smaller:s,smallerEq:o,larger:l,largerEq:u,add:c,isPositive:d});return e("range",{"...any":function(m){var v=m.length-1,x=m[v];return typeof x!="boolean"&&m.push(!0),h.apply(null,m)}})},{isTransformFunction:!0}),Hfe="row",Vfe=["typed","Index","matrix","range"],Gfe=Se(Hfe,Vfe,r=>{var{typed:e,Index:t,matrix:n,range:a}=r,s=X8({typed:e,Index:t,matrix:n,range:a});return e("row",{"...any":function(l){var u=l.length-1,c=l[u];Kt(c)&&(l[u]=c-1);try{return s.apply(null,l)}catch(d){throw Ti(d)}}})},{isTransformFunction:!0}),Qfe="subset",Wfe=["typed","matrix","zeros","add"],Kfe=Se(Qfe,Wfe,r=>{var{typed:e,matrix:t,zeros:n,add:a}=r,s=Y8({typed:e,matrix:t,zeros:n,add:a});return e("subset",{"...any":function(l){try{return s.apply(null,l)}catch(u){throw Ti(u)}}})},{isTransformFunction:!0}),Xfe="concat",Yfe=["typed","matrix","isInteger"],Zfe=Se(Xfe,Yfe,r=>{var{typed:e,matrix:t,isInteger:n}=r,a=q8({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(o){var l=o.length-1,u=o[l];Kt(u)?o[l]=u-1:Xt(u)&&(o[l]=u.minus(1));try{return a.apply(null,o)}catch(c){throw Ti(c)}}})},{isTransformFunction:!0}),M5="diff",Jfe=["typed","matrix","subtract","number","bignumber"],ehe=Se(M5,Jfe,r=>{var{typed:e,matrix:t,subtract:n,number:a,bignumber:s}=r,o=G8({typed:e,matrix:t,subtract:n,number:a,bignumber:s});return e(M5,{"...any":function(u){u=nl(u);try{return o.apply(null,u)}catch(c){throw Ti(c)}}})},{isTransformFunction:!0}),the="std",rhe=["typed","map","sqrt","variance"],nhe=Se(the,rhe,r=>{var{typed:e,map:t,sqrt:n,variance:a}=r,s=hk({typed:e,map:t,sqrt:n,variance:a});return e("std",{"...any":function(l){l=nl(l);try{return s.apply(null,l)}catch(u){throw Ti(u)}}})},{isTransformFunction:!0}),F5="sum",ihe=["typed","config","add","numeric"],ahe=Se(F5,ihe,r=>{var{typed:e,config:t,add:n,numeric:a}=r,s=lk({typed:e,config:t,add:n,numeric:a});return e(F5,{"...any":function(l){l=nl(l);try{return s.apply(null,l)}catch(u){throw Ti(u)}}})},{isTransformFunction:!0}),she="quantileSeq",ohe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],lhe=Se(she,ohe,r=>{var{typed:e,bignumber:t,add:n,subtract:a,divide:s,multiply:o,partitionSelect:l,compare:u,isInteger:c,smaller:d,smallerEq:h,larger:g,mapSlices:m}=r,v=fk({typed:e,bignumber:t,add:n,subtract:a,divide:s,multiply:o,partitionSelect:l,compare:u,isInteger:c,smaller:d,smallerEq:h,larger:g,mapSlices:m});return e("quantileSeq",{"Array | Matrix, number | BigNumber":v,"Array | Matrix, number | BigNumber, number":(b,y,S)=>v(b,y,x(S)),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(b,y,S,_)=>v(b,y,S,x(_)),"Array | Matrix, Array | Matrix":v,"Array | Matrix, Array | Matrix, number":(b,y,S)=>v(b,y,x(S)),"Array | Matrix, Array | Matrix, boolean":v,"Array | Matrix, Array | Matrix, boolean, number":(b,y,S,_)=>v(b,y,S,x(_))});function x(b){return nl([[],b])[1]}},{isTransformFunction:!0}),O5="cumsum",che=["typed","add","unaryPlus"],uhe=Se(O5,che,r=>{var{typed:e,add:t,unaryPlus:n}=r,a=ck({typed:e,add:t,unaryPlus:n});return e(O5,{"...any":function(o){if(o.length===2&&ja(o[0])){var l=o[1];Kt(l)?o[1]=l-1:Xt(l)&&(o[1]=l.minus(1))}try{return a.apply(null,o)}catch(u){throw Ti(u)}}})},{isTransformFunction:!0}),B5="variance",dhe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],fhe=Se(B5,dhe,r=>{var{typed:e,add:t,subtract:n,multiply:a,divide:s,mapSlices:o,isNaN:l}=r,u=dk({typed:e,add:t,subtract:n,multiply:a,divide:s,mapSlices:o,isNaN:l});return e(B5,{"...any":function(d){d=nl(d);try{return u.apply(null,d)}catch(h){throw Ti(h)}}})},{isTransformFunction:!0}),R5="print",hhe=["typed","matrix","zeros","add"],mhe=Se(R5,hhe,r=>{var{typed:e,matrix:t,zeros:n,add:a}=r,s=J8({typed:e,matrix:t,zeros:n,add:a});return e(R5,{"string, Object | Array":function(u,c){return s(o(u),c)},"string, Object | Array, number | Object":function(u,c,d){return s(o(u),c,d)}});function o(l){return l.replace(Z8,u=>{var c=u.slice(1).split("."),d=c.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+d.join(".")})}},{isTransformFunction:!0}),phe="and",ghe=["typed","matrix","zeros","add","equalScalar","not","concat"],xhe=Se(phe,ghe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,not:s,concat:o}=r,l=ek({typed:e,matrix:t,equalScalar:n,zeros:a,not:s,concat:o});function u(c,d,h){var g=c[0].compile().evaluate(h);if(!ja(g)&&!l(g,!0))return!1;var m=c[1].compile().evaluate(h);return l(g,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),vhe="or",yhe=["typed","matrix","equalScalar","DenseMatrix","concat"],bhe=Se(vhe,yhe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s}=r,o=P8({typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s});function l(u,c,d){var h=u[0].compile().evaluate(d);if(!ja(h)&&o(h,!1))return!0;var g=u[1].compile().evaluate(d);return o(h,g)}return l.rawArgs=!0,l},{isTransformFunction:!0}),whe="bitAnd",_he=["typed","matrix","zeros","add","equalScalar","not","concat"],Nhe=Se(whe,_he,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:a,not:s,concat:o}=r,l=I8({typed:e,matrix:t,equalScalar:n,zeros:a,not:s,concat:o});function u(c,d,h){var g=c[0].compile().evaluate(h);if(!ja(g)){if(isNaN(g))return NaN;if(g===0||g===!1)return 0}var m=c[1].compile().evaluate(h);return l(g,m)}return u.rawArgs=!0,u},{isTransformFunction:!0}),She="bitOr",jhe=["typed","matrix","equalScalar","DenseMatrix","concat"],Ehe=Se(She,jhe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s}=r,o=z8({typed:e,matrix:t,equalScalar:n,DenseMatrix:a,concat:s});function l(u,c,d){var h=u[0].compile().evaluate(d);if(!ja(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var g=u[1].compile().evaluate(d);return o(h,g)}return l.rawArgs=!0,l},{isTransformFunction:!0}),xt=mQ({config:tt}),Lr=yQ({}),L5=rde({BigNumber:xt,config:tt}),Ahe=Xue({}),The=Mde({BigNumber:xt,config:tt}),ec=AQ({}),pk=ude({Complex:Lr}),Che=Zue({BigNumber:xt,config:tt}),Dhe=ade({BigNumber:xt,config:tt}),khe=ode({BigNumber:xt,config:tt}),Fp=FQ({}),Mhe=Jue({BigNumber:xt,config:tt}),Fhe=Yue({}),Ohe=nde({BigNumber:xt,config:tt}),Bhe=DQ({}),gk=vG({}),Rhe=lde({BigNumber:xt,config:tt}),Lhe=Yde({BigNumber:xt,config:tt}),xk=tde({BigNumber:xt,config:tt}),Ihe=Kue({}),zhe=dde({}),Zt=KQ({Matrix:Fp}),Phe=qde({BigNumber:xt,config:tt}),qhe=ide({BigNumber:xt,config:tt}),$y=ede({BigNumber:xt,config:tt}),vk=Que({}),$he=cde({BigNumber:xt,config:tt}),Me=mG({BigNumber:xt,Complex:Lr,DenseMatrix:Zt,Fraction:ec}),Uhe=Pde({BigNumber:xt,config:tt}),Ci=uK({typed:Me}),Hhe=Pee({Complex:Lr,config:tt,typed:Me}),Vhe=Hee({BigNumber:xt,typed:Me}),Ghe=Wee({BigNumber:xt,Complex:Lr,config:tt,typed:Me}),Fn=mK({typed:Me}),Qhe=rY({typed:Me}),Whe=ete({BigNumber:xt,Complex:Lr,config:tt,typed:Me}),Khe=ate({typed:Me}),yk=lte({typed:Me}),Xhe=fte({Complex:Lr,config:tt,typed:Me}),Yhe=BW({typed:Me}),Zhe=KX({typed:Me}),Jhe=zW({typed:Me}),e0e=YQ({typed:Me}),Op=_ce({typed:Me}),Bp=VW({Complex:Lr,typed:Me}),tc=iY({typed:Me}),Wb=mte({typed:Me}),t0e=vte({BigNumber:xt,typed:Me}),r0e=_te({BigNumber:xt,typed:Me}),n0e=DK({typed:Me}),tr=SW({config:tt,typed:Me}),i0e=_Z({typed:Me}),bk=MK({typed:Me}),a0e=OK({Complex:Lr,typed:Me}),s0e=U8({typed:Me}),Qf=jY({typed:Me}),o0e=H8({typed:Me}),Wf=FZ({typed:Me}),Kb=CY({typed:Me}),l0e=zZ({format:Wf,typed:Me}),Xb=sY({typed:Me}),Li=JQ({typed:Me}),il=cW({config:tt,typed:Me}),rc=pW({config:tt,typed:Me}),bs=xW({equalScalar:tr,typed:Me}),c0e=sde({BigNumber:xt,config:tt}),u0e=Tce({Complex:Lr,typed:Me}),d0e=pX({Complex:Lr,config:tt,typed:Me}),Yb=xX({Complex:Lr,config:tt,typed:Me}),nc=V8({typed:Me}),dn=bX({typed:Me}),Ym=uY({typed:Me}),ro=MW({typed:Me}),f0e=LZ({format:Wf,typed:Me}),h0e=iue({config:tt,typed:Me}),m0e=J8({typed:Me}),p0e=sue({config:tt,typed:Me}),Zb=lY({typed:Me}),g0e=Ete({BigNumber:xt,typed:Me}),wk=EX({BigNumber:xt,Fraction:ec,complex:Bp,typed:Me}),Rp=Dte({typed:Me}),On=AW({Matrix:Fp,equalScalar:tr,typed:Me}),x0e=iK({typed:Me}),v0e=kX({typed:Me}),y0e=LW({typed:Me}),Ta=gK({typed:Me}),b0e=Ote({typed:Me}),_k=HZ({typed:Me}),Jb=wW({typed:Me}),w0e=$ee({Complex:Lr,config:tt,typed:Me}),_0e=Xee({BigNumber:xt,typed:Me}),N0e=Zee({BigNumber:xt,Complex:Lr,config:tt,typed:Me}),Ii=$W({BigNumber:xt,typed:Me}),S0e=Sce({typed:Me}),j0e=gte({typed:Me}),E0e=Ste({BigNumber:xt,typed:Me}),Ks=yW({typed:Me}),A0e=GZ({typed:Me}),Tf=Oy({isInteger:Li,typed:Me}),gt=XW({DenseMatrix:Zt,Matrix:Fp,SparseMatrix:On,typed:Me}),T0e=ZW({isZero:bs,matrix:gt,typed:Me}),C0e=IY({BigNumber:xt,config:tt,matrix:gt,typed:Me}),D0e=lue({config:tt,log2:Yb,typed:Me}),Nk=qY({isInteger:Li,matrix:gt,typed:Me}),k0e=Tte({BigNumber:xt,typed:Me}),M0e=Mte({typed:Me}),F0e=Ree({SparseMatrix:On,typed:Me}),Za=CX({Complex:Lr,config:tt,typed:Me}),O0e=JY({typed:Me}),B0e=Lte({typed:Me}),Kf=aZ({matrix:gt,typed:Me}),Sk=BX({BigNumber:xt,config:tt,matrix:gt,typed:Me}),ni=cZ({BigNumber:xt,config:tt,matrix:gt,typed:Me}),R0e=Gee({BigNumber:xt,Complex:Lr,config:tt,typed:Me}),L0e=rte({Complex:Lr,config:tt,typed:Me}),I0e=BZ({format:Wf,typed:Me}),hr=q8({isInteger:Li,matrix:gt,typed:Me}),z0e=bte({BigNumber:xt,typed:Me}),ew=oZ({conj:tc,transpose:Kf,typed:Me}),jk=wY({DenseMatrix:Zt,SparseMatrix:On,matrix:gt,typed:Me}),P0e=qX({concat:hr,equalScalar:tr,matrix:gt,multiplyScalar:dn,typed:Me}),Ca=qJ({DenseMatrix:Zt,SparseMatrix:On,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),Xf=WW({Fraction:ec,typed:Me}),al=kY({BigNumber:xt,DenseMatrix:Zt,SparseMatrix:On,config:tt,matrix:gt,typed:Me}),ic=dW({typed:Me}),q0e=FY({matrix:gt,multiplyScalar:dn,typed:Me}),Lp=tee({DenseMatrix:Zt,SparseMatrix:On,concat:hr,config:tt,matrix:gt,typed:Me}),$0e=SJ({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me,zeros:ni}),U0e=CZ({isNaN:Ks,isNumeric:ic,typed:Me}),H0e=SX({BigNumber:xt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),Sa=KZ({bignumber:Ii,fraction:Xf,number:ro}),Ek=kZ({config:tt,multiplyScalar:dn,numeric:Sa,typed:Me}),V0e=HY({config:tt,matrix:gt}),G0e=EJ({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me,zeros:ni}),Hu=tJ({BigNumber:xt,DenseMatrix:Zt,config:tt,equalScalar:tr,matrix:gt,typed:Me,zeros:ni}),ci=YY({matrix:gt,config:tt,typed:Me}),Si=GJ({DenseMatrix:Zt,SparseMatrix:On,bignumber:Ii,concat:hr,config:tt,matrix:gt,typed:Me}),Q0e=$Z({concat:hr,matrix:gt,typed:Me}),ws=sK({typed:Me}),W0e=see({DenseMatrix:Zt,SparseMatrix:On,concat:hr,config:tt,equalScalar:tr,matrix:gt,typed:Me}),K0e=hY({DenseMatrix:Zt,SparseMatrix:On,concat:hr,matrix:gt,typed:Me}),lr=are({DenseMatrix:Zt,SparseMatrix:On,addScalar:Fn,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),X0e=ute({BigNumber:xt,DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),Y0e=I8({concat:hr,equalScalar:tr,matrix:gt,typed:Me}),Z0e=z8({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),J0e=eY({DenseMatrix:Zt,SparseMatrix:On,concat:hr,matrix:gt,typed:Me}),Ak=vK({BigNumber:xt,Complex:Lr,Fraction:ec,config:tt,isNegative:il,matrix:gt,typed:Me,unaryMinus:ws}),ac=kJ({BigNumber:xt,DenseMatrix:Zt,Fraction:ec,concat:hr,config:tt,equalScalar:tr,matrix:gt,typed:Me}),Tk=zJ({concat:hr,matrix:gt,typed:Me}),eme=xY({prod:Ek,size:ci,typed:Me}),tw=iee({equal:Ca,typed:Me}),tn=YZ({numeric:Sa,typed:Me}),Yf=fJ({DenseMatrix:Zt,SparseMatrix:On,concat:hr,divideScalar:tn,equalScalar:tr,matrix:gt,typed:Me}),tme=HJ({compareText:Tk,isZero:bs,typed:Me}),Ck=B8({DenseMatrix:Zt,config:tt,equalScalar:tr,matrix:gt,round:Hu,typed:Me,zeros:ni}),rme=lX({BigNumber:xt,DenseMatrix:Zt,concat:hr,config:tt,equalScalar:tr,matrix:gt,round:Hu,typed:Me,zeros:ni}),nme=hW({isNumeric:ic,typed:Me}),ime=ore({abs:Ci,addScalar:Fn,divideScalar:tn,isPositive:rc,multiplyScalar:dn,smaller:Si,sqrt:Za,typed:Me}),Dk=gee({DenseMatrix:Zt,smaller:Si}),pi=yee({ImmutableDenseMatrix:Dk,getMatrixDataType:Kb}),ji=ZJ({DenseMatrix:Zt,SparseMatrix:On,bignumber:Ii,concat:hr,config:tt,matrix:gt,typed:Me}),rw=iJ({Complex:Lr,config:tt,divideScalar:tn,typeOf:Jb,typed:Me}),kk=mJ({DenseMatrix:Zt,divideScalar:tn,equalScalar:tr,matrix:gt,multiplyScalar:dn,subtractScalar:Ta,typed:Me}),nw=rK({flatten:Qf,matrix:gt,size:ci,typed:Me}),iw=tk({config:tt,isNaN:Ks,larger:ji,numeric:Sa,typed:Me}),ame=rk({config:tt,isNaN:Ks,numeric:Sa,smaller:Si,typed:Me}),Mk=R8({DenseMatrix:Zt,concat:hr,config:tt,equalScalar:tr,matrix:gt,round:Hu,typed:Me,zeros:ni}),sme=lJ({Complex:Lr,config:tt,divideScalar:tn,typed:Me}),ome=P8({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),Ip=cee({compare:ac,isNaN:Ks,isNumeric:ic,typed:Me}),aw=xne({addScalar:Fn,complex:Bp,conj:tc,divideScalar:tn,equal:Ca,identity:al,isZero:bs,matrix:gt,multiplyScalar:dn,sign:wk,sqrt:Za,subtractScalar:Ta,typed:Me,unaryMinus:ws,zeros:ni}),lme=TJ({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me,zeros:ni}),ku=KJ({DenseMatrix:Zt,SparseMatrix:On,concat:hr,config:tt,matrix:gt,typed:Me}),ia=Y8({add:lr,matrix:gt,typed:Me,zeros:ni}),gn=FX({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,subtractScalar:Ta,typed:Me,unaryMinus:ws}),cme=mre({add:lr,matrix:gt,typed:Me}),sw=gJ({DenseMatrix:Zt,divideScalar:tn,equalScalar:tr,matrix:gt,multiplyScalar:dn,subtractScalar:Ta,typed:Me}),ume=mue({addScalar:Fn,combinations:Op,divideScalar:tn,isInteger:Li,isNegative:il,multiplyScalar:dn,typed:Me}),_s=RJ({compare:ac,typed:Me}),dme=gue({addScalar:Fn,combinations:Op,isInteger:Li,isNegative:il,isPositive:rc,larger:ji,typed:Me}),fme=G8({matrix:gt,number:ro,subtract:gn,typed:Me}),hme=ace({abs:Ci,addScalar:Fn,deepEqual:tw,divideScalar:tn,multiplyScalar:dn,sqrt:Za,subtractScalar:Ta,typed:Me}),zp=dre({addScalar:Fn,conj:tc,multiplyScalar:dn,size:ci,typed:Me}),Fk=_ee({larger:ji,smaller:Si}),Ok=gre({Index:pi,typed:Me}),mme=LX({BigNumber:xt,add:lr,config:tt,equal:Ca,isInteger:Li,mod:Mk,smaller:Si,typed:Me,xgcd:Sk}),pme=fX({concat:hr,equalScalar:tr,matrix:gt,typed:Me}),gme=sJ({Complex:Lr,config:tt,divideScalar:tn,log:rw,typed:Me}),xme=vJ({DenseMatrix:Zt,divideScalar:tn,equalScalar:tr,matrix:gt,multiplyScalar:dn,subtractScalar:Ta,typed:Me}),vme=eK({flatten:Qf,matrix:gt,size:ci,typed:Me}),jr=_X({addScalar:Fn,dot:zp,equalScalar:tr,matrix:gt,multiplyScalar:dn,typed:Me}),Mu=K8({bignumber:Ii,matrix:gt,add:lr,config:tt,isPositive:rc,larger:ji,largerEq:Lp,smaller:Si,smallerEq:ku,typed:Me}),yme=X8({Index:pi,matrix:gt,range:Mu,typed:Me}),bme=zte({DenseMatrix:Zt,Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),wme=Ute({DenseMatrix:Zt,Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),_me=Qte({Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),Nme=Yte({Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),Bk=qne({SparseMatrix:On,abs:Ci,add:lr,divideScalar:tn,larger:ji,largerEq:Lp,multiply:jr,subtract:gn,transpose:Kf,typed:Me}),Sme=dee({compare:ac,compareNatural:_s,matrix:gt,typed:Me}),ow=lK({config:tt,numeric:Sa,typed:Me}),Rk=bJ({DenseMatrix:Zt,divideScalar:tn,equalScalar:tr,matrix:gt,multiplyScalar:dn,subtractScalar:Ta,typed:Me}),jme=zue({Complex:Lr,add:lr,multiply:jr,number:ro,typed:Me}),Eme=ek({concat:hr,equalScalar:tr,matrix:gt,not:Ym,typed:Me,zeros:ni}),lw=TK({DenseMatrix:Zt,config:tt,equalScalar:tr,matrix:gt,round:Hu,typed:Me,zeros:ni}),Lk=$8({Index:pi,matrix:gt,range:Mu,typed:Me}),Ame=yY({matrix:gt,multiply:jr,subtract:gn,typed:Me}),Ik=Ble({divideScalar:tn,isZero:bs,matrix:gt,multiply:jr,subtractScalar:Ta,typed:Me,unaryMinus:ws}),zk=LK({Complex:Lr,DenseMatrix:Zt,ceil:lw,equalScalar:tr,floor:Ck,matrix:gt,typed:Me,zeros:ni}),sc=Lle({abs:Ci,addScalar:Fn,det:Ik,divideScalar:tn,identity:al,matrix:gt,multiply:jr,typed:Me,unaryMinus:ws}),Tme=zle({Complex:Lr,add:lr,ctranspose:ew,deepEqual:tw,divideScalar:tn,dot:zp,dotDivide:Yf,equal:Ca,inv:sc,matrix:gt,multiply:jr,typed:Me}),Ja=JZ({Complex:Lr,config:tt,fraction:Xf,identity:al,inv:sc,matrix:gt,multiply:jr,number:ro,typed:Me}),Pk=qte({DenseMatrix:Zt,Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),Cme=Kte({Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),qk=tre({Index:pi,concat:hr,setDifference:Pk,size:ci,subset:ia,typed:Me}),$k=jee({FibonacciHeap:Fk,addScalar:Fn,equalScalar:tr}),Dme=Wle({abs:Ci,add:lr,identity:al,inv:sc,map:nc,max:iw,multiply:jr,size:ci,sqrt:Za,subtract:gn,typed:Me}),cw=lk({add:lr,config:tt,numeric:Sa,typed:Me}),Pt=Mee({BigNumber:xt,Complex:Lr,Fraction:ec,abs:Ci,addScalar:Fn,config:tt,divideScalar:tn,equal:Ca,fix:zk,format:Wf,isNumeric:ic,multiplyScalar:dn,number:ro,pow:Ja,round:Hu,subtractScalar:Ta,toBest:_k}),kme=vde({BigNumber:xt,Unit:Pt,config:tt}),Mme=efe({BigNumber:xt,Unit:Pt,config:tt}),Fme=$de({BigNumber:xt,Unit:Pt,config:tt}),Ome=_de({BigNumber:xt,Unit:Pt,config:tt}),Bme=Hde({BigNumber:xt,Unit:Pt,config:tt}),Rme=Nde({BigNumber:xt,Unit:Pt,config:tt}),Lme=yde({BigNumber:xt,Unit:Pt,config:tt}),Ime=Iee({Unit:Pt,typed:Me}),zme=Bde({BigNumber:xt,Unit:Pt,config:tt}),Pme=uJ({DenseMatrix:Zt,SparseMatrix:On,concat:hr,equalScalar:tr,matrix:gt,pow:Ja,typed:Me}),qme=xde({BigNumber:xt,Unit:Pt,config:tt}),$me=wde({BigNumber:xt,Unit:Pt,config:tt}),Ume=Gle({abs:Ci,add:lr,identity:al,inv:sc,multiply:jr,typed:Me}),Hme=Vde({BigNumber:xt,Unit:Pt,config:tt}),Uk=dZ({addScalar:Fn,ceil:lw,conj:tc,divideScalar:tn,dotDivide:Yf,exp:bk,i:pk,log2:Yb,matrix:gt,multiplyScalar:dn,pow:Ja,tau:xk,typed:Me}),uw=Ece({BigNumber:xt,Complex:Lr,config:tt,multiplyScalar:dn,pow:Ja,typed:Me}),Vme=hde({BigNumber:xt,Unit:Pt,config:tt}),Gme=Fde({BigNumber:xt,Unit:Pt,config:tt}),Qme=hZ({conj:tc,dotDivide:Yf,fft:Uk,typed:Me}),Wme=Sde({BigNumber:xt,Unit:Pt,config:tt}),Kme=Ade({BigNumber:xt,Unit:Pt,config:tt}),Xme=Qde({BigNumber:xt,Unit:Pt,config:tt}),Yme=gde({BigNumber:xt,Unit:Pt,config:tt}),Zme=tfe({BigNumber:xt,Unit:Pt,config:tt}),Jme=Kde({BigNumber:xt,Unit:Pt,config:tt}),epe=Rde({BigNumber:xt,Unit:Pt,config:tt}),tpe=Ede({BigNumber:xt,Unit:Pt,config:tt}),rpe=ofe({BigNumber:xt,Unit:Pt,config:tt}),npe=ife({BigNumber:xt,Unit:Pt,config:tt}),ipe=lfe({BigNumber:xt,Unit:Pt,config:tt}),ape=Ode({BigNumber:xt,Unit:Pt,config:tt}),spe=Lde({BigNumber:xt,Unit:Pt,config:tt}),ope=pde({BigNumber:xt,Unit:Pt,config:tt}),lpe=Ide({BigNumber:xt,Unit:Pt,config:tt}),cpe=Zde({BigNumber:xt,Unit:Pt,config:tt}),upe=Jte({compareNatural:_s,typed:Me}),dpe=fde({BigNumber:xt,Unit:Pt,config:tt}),fpe=Jde({BigNumber:xt,Unit:Pt,config:tt}),hpe=zde({BigNumber:xt,Unit:Pt,config:tt}),mpe=Ude({BigNumber:xt,Unit:Pt,config:tt}),ppe=Tde({BigNumber:xt,Unit:Pt,config:tt}),gpe=bde({BigNumber:xt,Unit:Pt,config:tt}),ai=nce({divideScalar:tn,equalScalar:tr,inv:sc,matrix:gt,multiply:jr,typed:Me}),xpe=Dde({BigNumber:xt,Unit:Pt,config:tt}),Zf=Dce({gamma:uw,typed:Me}),vpe=Gde({BigNumber:xt,Unit:Pt,config:tt}),ype=nfe({BigNumber:xt,Unit:Pt,config:tt}),bpe=lce({abs:Ci,add:lr,addScalar:Fn,config:tt,divideScalar:tn,equalScalar:tr,flatten:Qf,isNumeric:ic,isZero:bs,matrix:gt,multiply:jr,multiplyScalar:dn,smaller:Si,subtract:gn,typed:Me}),Hk=pne({DenseMatrix:Zt,Spa:$k,SparseMatrix:On,abs:Ci,addScalar:Fn,divideScalar:tn,equalScalar:tr,larger:ji,matrix:gt,multiplyScalar:dn,subtractScalar:Ta,typed:Me,unaryMinus:ws}),wpe=jde({BigNumber:xt,Unit:Pt,config:tt}),_pe=rfe({BigNumber:xt,Unit:Pt,config:tt}),Npe=Oce({add:lr,divide:ai,factorial:Zf,isInteger:Li,isPositive:rc,multiply:jr,typed:Me}),Spe=Rce({factorial:Zf,typed:Me}),jpe=afe({BigNumber:xt,Unit:Pt,config:tt}),Epe=Vne({add:lr,cbrt:Ak,divide:ai,equalScalar:tr,im:Xb,isZero:bs,multiply:jr,re:Zb,sqrt:Za,subtract:gn,typeOf:Jb,typed:Me,unaryMinus:ws}),Vk=Vte({DenseMatrix:Zt,Index:pi,compareNatural:_s,size:ci,subset:ia,typed:Me}),Ape=yZ({abs:Ci,add:lr,bignumber:Ii,divide:ai,isNegative:il,isPositive:rc,larger:ji,map:nc,matrix:gt,max:iw,multiply:jr,smaller:Si,subtract:gn,typed:Me,unaryMinus:ws}),Gk=uue({bignumber:Ii,addScalar:Fn,combinations:Op,divideScalar:tn,factorial:Zf,isInteger:Li,isNegative:il,larger:ji,multiplyScalar:dn,number:ro,pow:Ja,subtractScalar:Ta,typed:Me}),Tpe=Oee({Unit:Pt,typed:Me}),Cpe=fue({addScalar:Fn,isInteger:Li,isNegative:il,stirlingS2:Gk,typed:Me}),Dpe=ck({add:lr,typed:Me,unaryPlus:ow}),Qk=Hle({abs:Ci,add:lr,addScalar:Fn,atan:yk,bignumber:Ii,column:Lk,complex:Bp,config:tt,cos:Wb,diag:jk,divideScalar:tn,dot:zp,equal:Ca,flatten:Qf,im:Xb,inv:sc,larger:ji,matrix:gt,matrixFromColumns:nw,multiply:jr,multiplyScalar:dn,number:ro,qr:aw,re:Zb,reshape:Nk,sin:Rp,size:ci,smaller:Si,sqrt:Za,subtract:gn,typed:Me,usolve:sw,usolveAll:Rk}),kpe=kde({BigNumber:xt,Unit:Pt,config:tt}),Mpe=Wde({BigNumber:xt,Unit:Pt,config:tt}),Fpe=Mce({divide:ai,dotDivide:Yf,isNumeric:ic,log:rw,map:nc,matrix:gt,multiply:jr,sum:cw,typed:Me}),Wk=Une({DenseMatrix:Zt,lsolve:kk,lup:Hk,matrix:gt,slu:Bk,typed:Me,usolve:sw}),Kk=uk({add:lr,divide:ai,typed:Me}),Ope=Xde({BigNumber:xt,Unit:Pt,config:tt}),Bpe=mde({BigNumber:xt,Unit:Pt,config:tt}),Rpe=fk({bignumber:Ii,add:lr,compare:ac,divide:ai,isInteger:Li,larger:ji,mapSlices:Tf,multiply:jr,partitionSelect:Ip,smaller:Si,smallerEq:ku,subtract:gn,typed:Me}),Lpe=nre({Index:pi,concat:hr,setIntersect:Vk,setSymDifference:qk,size:ci,subset:ia,typed:Me}),dw=dk({add:lr,divide:ai,isNaN:Ks,mapSlices:Tf,multiply:jr,subtract:gn,typed:Me}),Ipe=Cde({BigNumber:xt,Unit:Pt,config:tt}),Xk=hce({add:lr,compare:ac,divide:ai,partitionSelect:Ip,typed:Me}),zpe=bce({add:lr,divide:ai,matrix:gt,mean:Kk,multiply:jr,pow:Ja,sqrt:Za,subtract:gn,sum:cw,typed:Me}),Ppe=que({Complex:Lr,add:lr,divide:ai,matrix:gt,multiply:jr,typed:Me}),qpe=pce({abs:Ci,map:nc,median:Xk,subtract:gn,typed:Me}),$pe=hk({map:nc,sqrt:Za,typed:Me,variance:dw}),Upe=AZ({BigNumber:xt,Complex:Lr,add:lr,config:tt,divide:ai,equal:Ca,factorial:Zf,gamma:uw,isNegative:il,multiply:jr,pi:$y,pow:Ja,sin:Rp,smallerEq:ku,subtract:gn,typed:Me}),fw=cre({abs:Ci,add:lr,conj:tc,ctranspose:ew,eigs:Qk,equalScalar:tr,larger:ji,matrix:gt,multiply:jr,pow:Ja,smaller:Si,sqrt:Za,typed:Me}),Yk=WY({BigNumber:xt,DenseMatrix:Zt,SparseMatrix:On,addScalar:Fn,config:tt,cos:Wb,matrix:gt,multiplyScalar:dn,norm:fw,sin:Rp,typed:Me,unaryMinus:ws}),Hpe=sfe({BigNumber:xt,Unit:Pt,config:tt}),Zk=Zle({identity:al,matrix:gt,multiply:jr,norm:fw,qr:aw,subtract:gn,typed:Me}),Vpe=GY({multiply:jr,rotationMatrix:Yk,typed:Me}),Jk=Xle({abs:Ci,add:lr,concat:hr,identity:al,index:Ok,lusolve:Wk,matrix:gt,matrixFromColumns:nw,multiply:jr,range:Mu,schur:Zk,subset:ia,subtract:gn,transpose:Kf,typed:Me}),Gpe=ece({matrix:gt,multiply:jr,sylvester:Jk,transpose:Kf,typed:Me}),Vu={},Jf={},eM={},vi=yre({mathWithTransform:Jf}),Gu=Ure({Node:vi}),no=Vre({Node:vi}),oc=Qre({Node:vi}),tM=Yre({Node:vi}),Qu=Nre({Node:vi}),rM=Cre({Node:vi,ResultSet:gk}),nM=kre({Node:vi}),sl=Lre({Node:vi}),iM=Kre({Node:vi}),Qpe=Hue({classes:eM}),hw=Yne({math:Vu,typed:Me}),aM=zre({Node:vi,typed:Me}),Wpe=Fle({Chain:hw,typed:Me}),Wu=wre({Node:vi,subset:ia}),sM=Are({matrix:gt,Node:vi,subset:ia}),Ku=qre({Node:vi,size:ci}),ol=ene({Unit:Pt,Node:vi,math:Vu}),ll=rne({Node:vi,SymbolNode:ol,math:Vu}),es=ine({AccessorNode:Wu,ArrayNode:Qu,AssignmentNode:sM,BlockNode:rM,ConditionalNode:nM,ConstantNode:sl,FunctionAssignmentNode:aM,FunctionNode:ll,IndexNode:Ku,ObjectNode:Gu,OperatorNode:no,ParenthesisNode:oc,RangeNode:iM,RelationalNode:tM,SymbolNode:ol,config:tt,numeric:Sa,typed:Me}),oM=kue({ConstantNode:sl,FunctionNode:ll,OperatorNode:no,ParenthesisNode:oc,parse:es,typed:Me}),mw=Eue({bignumber:Ii,fraction:Xf,AccessorNode:Wu,ArrayNode:Qu,ConstantNode:sl,FunctionNode:ll,IndexNode:Ku,ObjectNode:Gu,OperatorNode:no,SymbolNode:ol,config:tt,mathWithTransform:Jf,matrix:gt,typed:Me}),Kpe=sne({parse:es,typed:Me}),pw=Tue({AccessorNode:Wu,ArrayNode:Qu,ConstantNode:sl,FunctionNode:ll,IndexNode:Ku,ObjectNode:Gu,OperatorNode:no,ParenthesisNode:oc,SymbolNode:ol,add:lr,divide:ai,equal:Ca,isZero:bs,multiply:jr,parse:es,pow:Ja,subtract:gn,typed:Me}),Bo=lne({parse:es,typed:Me}),lM=Wne({evaluate:Bo}),cM=dne({evaluate:Bo,parse:es}),Pp=Nue({AccessorNode:Wu,ArrayNode:Qu,ConstantNode:sl,FunctionNode:ll,IndexNode:Ku,ObjectNode:Gu,OperatorNode:no,ParenthesisNode:oc,SymbolNode:ol,equal:Ca,parse:es,replacer:vk,resolve:oM,simplifyConstant:mw,simplifyCore:pw,typed:Me}),Xpe=Fue({OperatorNode:no,parse:es,simplify:Pp,typed:Me}),Ype=vue({parse:es,typed:Me}),Zpe=hne({Parser:cM,typed:Me}),Jpe=Lue({bignumber:Ii,fraction:Xf,AccessorNode:Wu,ArrayNode:Qu,ConstantNode:sl,FunctionNode:ll,IndexNode:Ku,ObjectNode:Gu,OperatorNode:no,ParenthesisNode:oc,SymbolNode:ol,add:lr,config:tt,divide:ai,equal:Ca,isZero:bs,mathWithTransform:Jf,matrix:gt,multiply:jr,parse:es,pow:Ja,simplify:Pp,simplifyConstant:mw,simplifyCore:pw,subtract:gn,typed:Me}),ege=Bue({ConstantNode:sl,FunctionNode:ll,OperatorNode:no,ParenthesisNode:oc,SymbolNode:ol,config:tt,equal:Ca,isZero:bs,numeric:Sa,parse:es,simplify:Pp,typed:Me}),tge=kle({Help:lM,mathWithTransform:Jf,typed:Me});kn(Vu,{e:L5,false:Ahe,fineStructure:The,i:pk,Infinity:Che,LN10:Dhe,LOG10E:khe,NaN:Mhe,null:Fhe,phi:Ohe,SQRT1_2:Rhe,sackurTetrode:Lhe,tau:xk,true:Ihe,E:L5,version:zhe,efimovFactor:Phe,LN2:qhe,pi:$y,replacer:vk,reviver:Qpe,SQRT2:$he,typed:Me,PI:$y,weakMixingAngle:Uhe,abs:Ci,acos:Hhe,acot:Vhe,acsc:Ghe,addScalar:Fn,arg:Qhe,asech:Whe,asinh:Khe,atan:yk,atanh:Xhe,bigint:Yhe,bitNot:Zhe,boolean:Jhe,clone:e0e,combinations:Op,complex:Bp,conj:tc,cos:Wb,cot:t0e,csc:r0e,cube:n0e,equalScalar:tr,erf:i0e,exp:bk,expm1:a0e,filter:s0e,flatten:Qf,forEach:o0e,format:Wf,getMatrixDataType:Kb,hex:l0e,im:Xb,isInteger:Li,isNegative:il,isPositive:rc,isZero:bs,LOG2E:c0e,lgamma:u0e,log10:d0e,log2:Yb,map:nc,multiplyScalar:dn,not:Ym,number:ro,oct:f0e,pickRandom:h0e,print:m0e,random:p0e,re:Zb,sec:g0e,sign:wk,sin:Rp,splitUnit:x0e,square:v0e,string:y0e,subtractScalar:Ta,tan:b0e,toBest:_k,typeOf:Jb,acosh:w0e,acsch:_0e,asec:N0e,bignumber:Ii,chain:Wpe,combinationsWithRep:S0e,cosh:j0e,csch:E0e,isNaN:Ks,isPrime:A0e,mapSlices:Tf,matrix:gt,matrixFromFunction:T0e,ones:C0e,randomInt:D0e,reshape:Nk,sech:k0e,sinh:M0e,sparse:F0e,sqrt:Za,squeeze:O0e,tanh:B0e,transpose:Kf,xgcd:Sk,zeros:ni,acoth:R0e,asin:L0e,bin:I0e,concat:hr,coth:z0e,ctranspose:ew,diag:jk,dotMultiply:P0e,equal:Ca,fraction:Xf,identity:al,isNumeric:ic,kron:q0e,largerEq:Lp,leftShift:$0e,mode:U0e,nthRoot:H0e,numeric:Sa,prod:Ek,resize:V0e,rightArithShift:G0e,round:Hu,size:ci,smaller:Si,to:Q0e,unaryMinus:ws,unequal:W0e,xor:K0e,add:lr,atan2:X0e,bitAnd:Y0e,bitOr:Z0e,bitXor:J0e,cbrt:Ak,compare:ac,compareText:Tk,count:eme,deepEqual:tw,divideScalar:tn,dotDivide:Yf,equalText:tme,floor:Ck,gcd:rme,hasNumericValue:nme,hypot:ime,larger:ji,log:rw,lsolve:kk,matrixFromColumns:nw,max:iw,min:ame,mod:Mk,nthRoots:sme,or:ome,partitionSelect:Ip,qr:aw,rightLogShift:lme,smallerEq:ku,subset:ia,subtract:gn,trace:cme,usolve:sw,catalan:ume,compareNatural:_s,composition:dme,diff:fme,distance:hme,dot:zp,index:Ok,invmod:mme,lcm:pme,log1p:gme,lsolveAll:xme,matrixFromRows:vme,multiply:jr,range:Mu,row:yme,setCartesian:bme,setDistinct:wme,setIsSubset:_me,setPowerset:Nme,slu:Bk,sort:Sme,unaryPlus:ow,usolveAll:Rk,zpk2tf:jme,and:Eme,ceil:lw,column:Lk,cross:Ame,det:Ik,fix:zk,inv:sc,pinv:Tme,pow:Ja,setDifference:Pk,setMultiplicity:Cme,setSymDifference:qk,sqrtm:Dme,sum:cw,vacuumImpedance:kme,wienDisplacement:Mme,atomicMass:Fme,bohrMagneton:Ome,boltzmann:Bme,conductanceQuantum:Rme,coulomb:Lme,createUnit:Ime,deuteronMass:zme,dotPow:Pme,electricConstant:qme,elementaryCharge:$me,expm:Ume,faraday:Hme,fft:Uk,gamma:uw,gravitationConstant:Vme,hartreeEnergy:Gme,ifft:Qme,inverseConductanceQuantum:Wme,klitzing:Kme,loschmidt:Xme,magneticConstant:Yme,molarMass:Zme,molarPlanckConstant:Jme,neutronMass:epe,nuclearMagneton:tpe,planckCharge:rpe,planckLength:npe,planckTemperature:ipe,protonMass:ape,quantumOfCirculation:spe,reducedPlanckConstant:ope,rydberg:lpe,secondRadiation:cpe,setSize:upe,speedOfLight:dpe,stefanBoltzmann:fpe,thomsonCrossSection:hpe,avogadro:mpe,bohrRadius:ppe,coulombConstant:gpe,divide:ai,electronMass:xpe,factorial:Zf,firstRadiation:vpe,gravity:ype,intersect:bpe,lup:Hk,magneticFluxQuantum:wpe,molarMassC12:_pe,multinomial:Npe,parse:es,permutations:Spe,planckMass:jpe,polynomialRoot:Epe,resolve:oM,setIntersect:Vk,simplifyConstant:mw,solveODE:Ape,stirlingS2:Gk,unit:Tpe,bellNumbers:Cpe,compile:Kpe,cumsum:Dpe,eigs:Qk,fermiCoupling:kpe,gasConstant:Mpe,kldivergence:Fpe,lusolve:Wk,mean:Kk,molarVolume:Ope,planckConstant:Bpe,quantileSeq:Rpe,setUnion:Lpe,simplifyCore:pw,variance:dw,classicalElectronRadius:Ipe,evaluate:Bo,median:Xk,simplify:Pp,symbolicEqual:Xpe,corr:zpe,freqz:Ppe,leafCount:Ype,mad:qpe,parser:Zpe,rationalize:Jpe,std:$pe,zeta:Upe,derivative:ege,norm:fw,rotationMatrix:Yk,help:tge,planckTime:Hpe,schur:Zk,rotate:Vpe,sylvester:Jk,lyap:Gpe,config:tt});kn(Jf,Vu,{mapSlices:ffe({isInteger:Li,typed:Me}),filter:bfe({typed:Me}),forEach:Nfe({typed:Me}),map:Cfe({typed:Me}),or:bhe({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),and:xhe({add:lr,concat:hr,equalScalar:tr,matrix:gt,not:Ym,typed:Me,zeros:ni}),concat:Zfe({isInteger:Li,matrix:gt,typed:Me}),index:Efe({Index:pi,getMatrixDataType:Kb}),print:mhe({add:lr,matrix:gt,typed:Me,zeros:ni}),sum:ahe({add:lr,config:tt,numeric:Sa,typed:Me}),bitAnd:Nhe({add:lr,concat:hr,equalScalar:tr,matrix:gt,not:Ym,typed:Me,zeros:ni}),min:Pfe({config:tt,isNaN:Ks,numeric:Sa,smaller:Si,typed:Me}),subset:Kfe({add:lr,matrix:gt,typed:Me,zeros:ni}),bitOr:Ehe({DenseMatrix:Zt,concat:hr,equalScalar:tr,matrix:gt,typed:Me}),cumsum:uhe({add:lr,typed:Me,unaryPlus:ow}),diff:ehe({bignumber:Ii,matrix:gt,number:ro,subtract:gn,typed:Me}),max:Ofe({config:tt,isNaN:Ks,larger:ji,numeric:Sa,typed:Me}),range:Ufe({bignumber:Ii,matrix:gt,add:lr,config:tt,isPositive:rc,larger:ji,largerEq:Lp,smaller:Si,smallerEq:ku,typed:Me}),row:Gfe({Index:pi,matrix:gt,range:Mu,typed:Me}),column:pfe({Index:pi,matrix:gt,range:Mu,typed:Me}),mean:Lfe({add:lr,divide:ai,typed:Me}),quantileSeq:lhe({add:lr,bignumber:Ii,compare:ac,divide:ai,isInteger:Li,larger:ji,mapSlices:Tf,multiply:jr,partitionSelect:Ip,smaller:Si,smallerEq:ku,subtract:gn,typed:Me}),variance:fhe({add:lr,divide:ai,isNaN:Ks,mapSlices:Tf,multiply:jr,subtract:gn,typed:Me}),std:nhe({map:nc,sqrt:Za,typed:Me,variance:dw})});kn(eM,{BigNumber:xt,Complex:Lr,Fraction:ec,Matrix:Fp,Node:vi,ObjectNode:Gu,OperatorNode:no,ParenthesisNode:oc,Range:Bhe,RelationalNode:tM,ResultSet:gk,ArrayNode:Qu,BlockNode:rM,ConditionalNode:nM,ConstantNode:sl,DenseMatrix:Zt,RangeNode:iM,Chain:hw,FunctionAssignmentNode:aM,SparseMatrix:On,ImmutableDenseMatrix:Dk,Index:pi,AccessorNode:Wu,AssignmentNode:sM,FibonacciHeap:Fk,IndexNode:Ku,Spa:$k,Unit:Pt,SymbolNode:ol,FunctionNode:ll,Help:lM,Parser:cM});hw.createProxy(Vu);class Uo{generateRandomNumber(e,t,n,a=2,s=!1){let o;do o=Math.random()*(t-e)+e,n==="integer"?o=Math.floor(o):o=Math.round(o*Math.pow(10,a))/Math.pow(10,a);while(s&&o===0);return o}selectRandomChoice(e){const t=Math.floor(Math.random()*e.length);return e[t]}parseVariableDefinitions(e){const t=new Map,n=/!([a-zA-Z_][a-zA-Z0-9_]*)!/g;let a;const s=/!([a-zA-Z_][a-zA-Z0-9_]*)#0!/g,o=/!([a-zA-Z_][a-zA-Z0-9_]*)((?:#!([a-zA-Z_][a-zA-Z0-9_]*)!)+)!/g,l=/!([a-zA-Z_][a-zA-Z0-9_]*):(-?\d+):(-?\d+)!/g,u=/!([a-zA-Z_][a-zA-Z0-9_]*)\(([^)]+)\)!/g;for(;(a=o.exec(e))!==null;){const[,c,d]=a;if(!t.has(c)){const h=d.matchAll(/#!([a-zA-Z_][a-zA-Z0-9_]*)!/g),g=Array.from(h,m=>m[1]);t.set(c,{name:c,min:-10,max:10,type:"integer",excludeVars:g})}}for(;(a=s.exec(e))!==null;){const[,c]=a;t.has(c)||t.set(c,{name:c,min:-10,max:10,type:"integer",excludeZero:!0})}for(;(a=l.exec(e))!==null;){const[,c,d,h]=a;t.has(c)||t.set(c,{name:c,min:parseInt(d),max:parseInt(h),type:"integer"})}for(;(a=u.exec(e))!==null;){const[,c,d]=a;if(!t.has(c)){const h=d.split(",").map(g=>{g=g.trim();const m=parseFloat(g);return isNaN(m)?g:m});t.set(c,{name:c,min:0,max:0,type:"integer",choices:h})}}for(;(a=n.exec(e))!==null;){const[,c]=a;t.has(c)||t.set(c,{name:c,min:-10,max:10,type:"integer"})}return Array.from(t.values())}generateVariableValues(e){const t={},n=[...e].sort((a,s)=>{const o=a.excludeVars&&a.excludeVars.length>0,l=s.excludeVars&&s.excludeVars.length>0;return o===l?0:o?1:-1});for(const a of n)if(a.choices&&a.choices.length>0)t[a.name]=this.selectRandomChoice(a.choices);else{const s=[];if(a.excludeVars&&a.excludeVars.length>0)for(const c of a.excludeVars)t[c]!==void 0&&s.push(t[c]);let o=0,l;const u=100;do l=this.generateRandomNumber(a.min,a.max,a.type,a.decimals||0,a.excludeZero||!1),o++;while(s.includes(l)&&o<u);o>=u&&console.warn(`Could not find unique value for ${a.name} after ${u} attempts`),t[a.name]=l}return t}applyMathRules(e){let t=e;return t=t.replace(/([a-zA-Z])\^1\b/g,"$1"),t=t.replace(/([a-zA-Z])\^0\b/g,"1"),t=t.replace(/([+\-])\s*0([a-zA-Z])(\^\d+)?/g,""),t=t.replace(/^\s*0([a-zA-Z])(\^\d+)?\s*([+\-])/g,""),t=t.replace(/^\s*0([a-zA-Z])(\^\d+)?\s*$/g,"0"),t=t.replace(/([+={\s]|^)1([a-zA-Z])(\^\d+)?/g,"$1$2$3"),t=t.replace(/([+\-={}s]|^)-1([a-zA-Z])(\^\d+)?/g,"$1-$2$3"),t=t.replace(/\s*[+\-]\s*0\s*$/g,""),t=t.replace(/\s*[+\-]\s*0\s*([+\-])/g," $1"),t=t.replace(/^\s*\+\s*/,""),t=t.replace(/=\s*0\s*\+\s*/g,"= "),t=t.replace(/=\s*0\s*-\s*/g,"= -"),t=t.replace(/=\s*[+\-]\s*$/g,"= 0"),t.trim()===""||t.trim()==="="||/^[+\-\s]*$/.test(t)?"0":t}normalizeMathSigns(e){let t=e;return t=t.replace(/\+\s*-/g,"- "),t=t.replace(/-\s*-/g,"+ "),t=t.replace(/\s*([+\-*/])\s*/g," $1 "),t=t.replace(/([^!<>=])\s*=\s*([^=])/g,"$1 = $2"),t=t.replace(/\^\s+/g,"^"),t=t.replace(/\s+\^/g,"^"),t}substituteVariables(e,t){let n=e;n=n.replace(/!([a-zA-Z_][a-zA-Z0-9_]*)#0!/g,"!$1!"),n=n.replace(/!([a-zA-Z_][a-zA-Z0-9_]*):(-?\d+):(-?\d+)!/g,"!$1!"),n=n.replace(/!([a-zA-Z_][a-zA-Z0-9_]*)\([^)]+\)!/g,"!$1!"),n=n.replace(/!([a-zA-Z_][a-zA-Z0-9_]*)((?:#!([a-zA-Z_][a-zA-Z0-9_]*)!)+)!/g,"!$1!");for(const[a,s]of Object.entries(t)){const o=new RegExp(`!${a}!`,"g");n=n.replace(o,s.toString())}return n=this.normalizeMathSigns(n),n}evaluateExpressions(e,t){let n=e;n=this.evaluateConditionals(n,t);const a=/([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*\{tinh:\s*([^}]+)\}/g,s=Array.from(n.matchAll(a));for(const u of s){const[c,d,h]=u;try{let g=h.trim();for(const[v,x]of Object.entries(t)){const b=new RegExp(`!${v}!`,"g");g=g.replace(b,x.toString())}const m=Bo(g);t[d]=m,n=n.replace(c,"")}catch(g){console.error("Error evaluating assignment:",d,h,g),n=n.replace(c,"[ERROR]")}}const o=/\{tinh:\s*([^}]+)\}|tinh:\s*([^\s]+(?:\([^)]*\))?(?:[+\-*/]\s*[^\s]+(?:\([^)]*\))?)*)/g,l=Array.from(n.matchAll(o));for(let u=l.length-1;u>=0;u--){const c=l[u],[d,h,g]=c,m=h||g,v=c.index;try{let x=m.trim();for(const[y,S]of Object.entries(t)){const _=new RegExp(`!${y}!`,"g");x=x.replace(_,S.toString())}const b=Bo(x);n=n.substring(0,v)+b.toString()+n.substring(v+d.length)}catch(x){console.error("Error evaluating expression:",m,x),n=n.substring(0,v)+"[ERROR]"+n.substring(v+d.length)}}return n}parseIffFunction(e,t){const n=e.substring(t).match(/iff\s*\(/);if(!n||n.index===void 0)return null;const a=t+n.index,s=a+n[0].length;let o=1,l="";const u=[];let c=s;for(;c<e.length&&o>0;){const d=e[c];if(d==="(")o++,l+=d;else if(d===")")if(o--,o===0){u.push(l.trim());break}else l+=d;else d===","&&o===1?(u.push(l.trim()),l=""):l+=d;c++}return u.length!==3?(console.error("iff() must have exactly 3 arguments, got:",u.length),null):{fullMatch:e.substring(a,c+1),condition:u[0],trueValue:u[1],falseValue:u[2],endIndex:c+1}}evaluateConditionals(e,t){let n=e,a=100,s=0;for(;s<a;){s++;let o=-1,l=0;for(;;){const c=n.indexOf("iff",l);if(c===-1)break;o=c,l=c+1}if(o===-1)break;const u=this.parseIffFunction(n,o);if(!u){console.error("Failed to parse iff() at index",o);break}try{let c=u.condition.trim();for(const[v,x]of Object.entries(t)){const b=new RegExp(`!${v}!`,"g");c=c.replace(b,x.toString())}let d;const h=/^['\"]?([^'\"!=<>]+)['\"]?\s*(===|!==|==|!=)\s*['\"]?([^'\"!=<>]+)['\"]?$/,g=c.match(h);if(g){const[,v,x,b]=g,y=v.trim().replace(/^['\"]|['\"]$/g,""),S=b.trim().replace(/^['\"]|['\"]$/g,"");switch(x){case"===":case"==":d=y===S;break;case"!==":case"!=":d=y!==S;break;default:d=!1}}else try{d=Bo(c)}catch(v){console.warn("Condition evaluation failed, treating as false:",c,v),d=!1}let m=d?u.trueValue.trim():u.falseValue.trim();for(const[v,x]of Object.entries(t)){const b=new RegExp(`!${v}!`,"g");m=m.replace(b,x.toString())}m=m.replace(/^['"]|['"]$/g,""),n=n.substring(0,o)+m+n.substring(u.endIndex)}catch(c){console.error("Error evaluating conditional:",u.condition,c),n=n.substring(0,o)+"[ERROR]"+n.substring(u.endIndex);break}}return s>=a&&console.error("Max iterations reached in evaluateConditionals"),n}safeEvaluate(e){try{const t=Bo(e);if(typeof t!="number"||!isFinite(t))throw new Error("Invalid result");return t}catch{throw new Error("Invalid mathematical expression")}}protectHtmlTags(e){const t=new Map;let n=0;const a=/<[^>]+>/g;return{text:e.replace(a,o=>{const l=`__HTML_TAG_${n}__`;return t.set(l,o),n++,l}),tags:t}}restoreHtmlTags(e,t){let n=e;for(const[a,s]of t.entries())n=n.replace(a,s);return n}processQuestion(e){const t=[e.question,e.option_a||"",e.option_b||"",e.option_c||"",e.option_d||"",e.correct_option,e.explanation].join(" "),n=this.parseVariableDefinitions(t),a=this.generateVariableValues(n);console.log("Dynamic variables found:",n),console.log("Generated values:",a);const s=[e.question,e.option_a||"",e.option_b||"",e.option_c||"",e.option_d||"",e.correct_option,e.explanation];for(const l of s){if(!l)continue;const u=/([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*\{tinh:\s*([^}]+)\}/g;let c;for(;(c=u.exec(l))!==null;){const[,d,h]=c;try{let g=h.trim();for(const[v,x]of Object.entries(a)){const b=new RegExp(`!${v}!`,"g");g=g.replace(b,x.toString())}const m=Bo(g);a[d]=m,console.log(`Assigned variable: ${d} = ${m}`)}catch(g){console.error("Error pre-processing assignment:",d,h,g)}}}const o=l=>{if(!l)return"";const{text:u,tags:c}=this.protectHtmlTags(l);let d=this.substituteVariables(u,a);return d=this.evaluateExpressions(d,a),d=this.applyMathRules(d),d=this.normalizeMathSigns(d),d=this.applyMathRules(d),d=this.restoreHtmlTags(d,c),d};return{question:o(e.question),option_a:e.option_a?o(e.option_a):void 0,option_b:e.option_b?o(e.option_b):void 0,option_c:e.option_c?o(e.option_c):void 0,option_d:e.option_d?o(e.option_d):void 0,correct_option:o(e.correct_option),explanation:o(e.explanation),variables:a}}isDynamicQuestion(e){if(e.isDynamic===!0)return!0;const t=[e.question,e.option_a||"",e.option_b||"",e.option_c||"",e.option_d||"",e.correct_option,e.explanation].join(" ");return/!([a-zA-Z_][a-zA-Z0-9_]*)(?:#0|:[-\d]+:[-\d]+|\([^)]+\))?!/.test(t)||/\{tinh:\s*[^}]+\}/.test(t)||/iff\s*\([^)]+\)/.test(t)}generateVariations(e,t){const n=[];for(let a=0;a<t;a++)n.push(this.processQuestion(e));return n}}class rge{static testShuffleLogic(e){}static shuffleArray(e){const t=[...e];for(let n=t.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[t[n],t[a]]=[t[a],t[n]]}return t}static processQuestions(e,t){const n=new Uo;let a=e.map(s=>{if(s.isDynamic||n.isDynamicQuestion(s))try{const l=n.processQuestion(s);return{...s,...l,isDynamic:!0}}catch(l){return console.error("Error processing dynamic question:",s.id,l),s}return s});return t.shuffleQuestions&&(a=this.shuffleArray(a)),t.shuffleMcqOptions&&(a=a.map(s=>{if(s.type==="mcq"&&s.option_a&&s.option_b&&s.option_c&&s.option_d){const o=[{key:"A",value:s.option_a},{key:"B",value:s.option_b},{key:"C",value:s.option_c},{key:"D",value:s.option_d}],u=o.find(g=>g.key===s.correct_option)?.value||"",c=this.shuffleArray(o),d={};o.forEach(g=>{const m=c.findIndex(v=>v.value===g.value);if(m!==-1){const v=String.fromCharCode(65+m);d[g.key]=v}});let h="A";for(let g=0;g<c.length;g++)if(c[g].value===u){h=String.fromCharCode(65+g);break}return{...s,option_a:c[0]?.value||"",option_b:c[1]?.value||"",option_c:c[2]?.value||"",option_d:c[3]?.value||"",correct_option:h,original_correct_option:s.correct_option,original_correct_value:u,shuffled_answer_map:d}}return s})),a}static getCorrectAnswerForDisplay(e,t=!1){return e.type!=="mcq"?e.correct_option||"":t?e.original_correct_option||e.correct_option:e.correct_option||""}static organizeQuestionsBySections(e){return{mcq:e.filter(t=>t.type==="mcq"),msq:e.filter(t=>t.type==="msq"),sa:e.filter(t=>t.type==="sa")}}static generateExamCode(e){return(120+e).toString()}static generateExamTitle(e,t){const n=this.generateExamCode(e.examNumber),a=t.examTitle||" THI TRC NGHIM TON",s=t.examCount>1?`${a} - M  ${n}`:a,o=this.organizeQuestionsBySections(e.questions),l=t.examSubtitle||`M : ${n} - Tng s cu: ${e.questions.length} (MCQ: ${o.mcq.length}, MSQ: ${o.msq.length}, SA: ${o.sa.length})`;return{title:s,subtitle:l,examCode:n}}static async exportToTxt(e,t){const{title:n,subtitle:a}=this.generateExamTitle(e,t),s=e.questions;let o=`${n}
${a}

`;if(t.organizeBySections){const l=this.organizeQuestionsBySections(s);let u=1;l.mcq.length>0&&(o+=`PHN I: TRC NGHIM

`,l.mcq.forEach(c=>{o+=`Cu ${u}: ${c.question}
`,c.option_a&&(o+=`A. ${c.option_a}
`),c.option_b&&(o+=`B. ${c.option_b}
`),c.option_c&&(o+=`C. ${c.option_c}
`),c.option_d&&(o+=`D. ${c.option_d}
`),o+=`
`,u++})),l.msq.length>0&&(o+=`PHN II: NG - SAI

`,l.msq.forEach(c=>{o+=`Cu ${u}: ${c.question}
`,c.option_a&&(o+=`a) ${c.option_a}
`),c.option_b&&(o+=`b) ${c.option_b}
`),c.option_c&&(o+=`c) ${c.option_c}
`),c.option_d&&(o+=`d) ${c.option_d}
`),o+=`
`,u++})),l.sa.length>0&&(o+=`PHN III: TR LI NGN

`,l.sa.forEach(c=>{o+=`Cu ${u}: ${c.question}

`,u++})),t.includeAnswerKey&&(o+=`P N
`,u=1,l.mcq.length>0&&(o+=`Phn I: Trc nghim
`,l.mcq.forEach(c=>{const d=this.getCorrectAnswerForDisplay(c,!1);o+=`Cu ${u}: ${d}`,c.shuffled_answer_map&&c.original_correct_option!==c.correct_option&&(o+=` (gc: ${c.original_correct_option})`),o+=`
`,u++})),l.msq.length>0&&(o+=`Phn II: ng - sai
`,l.msq.forEach(c=>{const d=this.getCorrectAnswerForDisplay(c,!1);o+=`Cu ${u}: ${d}
`,u++})),l.sa.length>0&&(o+=`Phn III: Tr li ngn
`,l.sa.forEach(c=>{const d=this.getCorrectAnswerForDisplay(c,!1);o+=`Cu ${u}: ${d}
`,u++})))}else s.forEach((l,u)=>{o+=`Cu ${u+1}: ${l.question}
`,l.type!=="sa"&&(l.option_a&&(o+=`A. ${l.option_a}
`),l.option_b&&(o+=`B. ${l.option_b}
`),l.option_c&&(o+=`C. ${l.option_c}
`),l.option_d&&(o+=`D. ${l.option_d}
`)),o+=`
`}),t.includeAnswerKey&&(o+=`P N
`,s.forEach((l,u)=>{const c=this.getCorrectAnswerForDisplay(l,!1);o+=`Cu ${u+1}: ${c}
`}));return new Blob([o],{type:"text/plain;charset=utf-8"})}static async exportToDocx(e,t){const{title:n,subtitle:a}=this.generateExamTitle(e,t),s=e.questions,o=[];if(o.push(new Et({children:[new Tt({text:n,bold:!0,size:32})],alignment:Yn.CENTER,heading:d9.HEADING_1})),o.push(new Et({children:[new Tt({text:a,size:24})],alignment:Yn.CENTER})),o.push(new Et({text:""})),t.organizeBySections){const u=this.organizeQuestionsBySections(s);let c=1;u.mcq.length>0&&(o.push(new Et({children:[new Tt({text:"PHN I: TRC NGHIM",bold:!0,size:28})],alignment:Yn.CENTER})),o.push(new Et({text:""})),u.mcq.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),d.option_a&&o.push(new Et({children:[new Tt({text:"A. ",bold:!0,size:22}),new Tt({text:d.option_a,bold:!1,size:22})]})),d.option_b&&o.push(new Et({children:[new Tt({text:"B. ",bold:!0,size:22}),new Tt({text:d.option_b,bold:!1,size:22})]})),d.option_c&&o.push(new Et({children:[new Tt({text:"C. ",bold:!0,size:22}),new Tt({text:d.option_c,bold:!1,size:22})]})),d.option_d&&o.push(new Et({children:[new Tt({text:"D. ",bold:!0,size:22}),new Tt({text:d.option_d,bold:!1,size:22})]})),o.push(new Et({text:""})),c++})),u.msq.length>0&&(o.push(new Et({children:[new Tt({text:"PHN II: NG - SAI",bold:!0,size:28})],alignment:Yn.CENTER})),o.push(new Et({text:""})),u.msq.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),d.option_a&&o.push(new Et({children:[new Tt({text:"a) ",bold:!0,size:22}),new Tt({text:d.option_a,bold:!1,size:22})]})),d.option_b&&o.push(new Et({children:[new Tt({text:"b) ",bold:!0,size:22}),new Tt({text:d.option_b,bold:!1,size:22})]})),d.option_c&&o.push(new Et({children:[new Tt({text:"c) ",bold:!0,size:22}),new Tt({text:d.option_c,bold:!1,size:22})]})),d.option_d&&o.push(new Et({children:[new Tt({text:"d) ",bold:!0,size:22}),new Tt({text:d.option_d,bold:!1,size:22})]})),o.push(new Et({text:""})),c++})),u.sa.length>0&&(o.push(new Et({children:[new Tt({text:"PHN III: TR LI NGN",bold:!0,size:28})],alignment:Yn.CENTER})),o.push(new Et({text:""})),u.sa.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),o.push(new Et({text:""})),c++})),t.includeAnswerKey&&(o.push(new Et({text:""})),o.push(new Et({children:[new Tt({text:"P N",bold:!0,size:28})],alignment:Yn.CENTER})),c=1,u.mcq.length>0&&(o.push(new Et({children:[new Tt({text:"Phn I: Trc nghim",bold:!0,size:24})]})),u.mcq.forEach(d=>{const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`Cu ${c}: ${h}`,size:22})]})),c++})),u.msq.length>0&&(o.push(new Et({children:[new Tt({text:"Phn II: ng - sai",bold:!0,size:24})]})),u.msq.forEach(d=>{const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`Cu ${c}: ${h}`,size:22})]})),c++})),u.sa.length>0&&(o.push(new Et({children:[new Tt({text:"Phn III: Tr li ngn",bold:!0,size:24})]})),u.sa.forEach(d=>{const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`Cu ${c}: ${h}`,size:22})]})),c++}))),o.push(new Et({text:""})),o.push(new Et({children:[new Tt({text:"LI GII CHI TIT",bold:!0,size:28})],alignment:Yn.CENTER})),c=1,u.mcq.length>0&&(o.push(new Et({children:[new Tt({text:"Phn I: Trc nghim",bold:!0,size:24})]})),u.mcq.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),o.push(new Et({text:""})),d.option_a&&o.push(new Et({children:[new Tt({text:"A. ",bold:!0,size:22}),new Tt({text:d.option_a,bold:!1,size:22})]})),d.option_b&&o.push(new Et({children:[new Tt({text:"B. ",bold:!0,size:22}),new Tt({text:d.option_b,bold:!1,size:22})]})),d.option_c&&o.push(new Et({children:[new Tt({text:"C. ",bold:!0,size:22}),new Tt({text:d.option_c,bold:!1,size:22})]})),d.option_d&&o.push(new Et({children:[new Tt({text:"D. ",bold:!0,size:22}),new Tt({text:d.option_d,bold:!1,size:22})]})),o.push(new Et({text:""}));const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`p n ng: ${h}`,bold:!0,size:22,color:"006400"})]})),o.push(new Et({text:""})),o.push(new Et({children:[new Tt({text:`Li gii: ${d.explanation}`,size:22,italics:!0})]})),o.push(new Et({text:""})),o.push(new Et({text:""})),c++})),u.msq.length>0&&(o.push(new Et({children:[new Tt({text:"Phn II: ng - sai",bold:!0,size:24})]})),u.msq.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),o.push(new Et({text:""})),d.option_a&&o.push(new Et({children:[new Tt({text:"a) ",bold:!0,size:22}),new Tt({text:d.option_a,bold:!1,size:22})]})),d.option_b&&o.push(new Et({children:[new Tt({text:"b) ",bold:!0,size:22}),new Tt({text:d.option_b,bold:!1,size:22})]})),d.option_c&&o.push(new Et({children:[new Tt({text:"c) ",bold:!0,size:22}),new Tt({text:d.option_c,bold:!1,size:22})]})),d.option_d&&o.push(new Et({children:[new Tt({text:"d) ",bold:!0,size:22}),new Tt({text:d.option_d,bold:!1,size:22})]})),o.push(new Et({text:""}));const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`p n ng: ${h}`,bold:!0,size:22,color:"006400"})]})),o.push(new Et({text:""})),o.push(new Et({children:[new Tt({text:`Li gii: ${d.explanation}`,size:22,italics:!0})]})),o.push(new Et({text:""})),o.push(new Et({text:""})),c++})),u.sa.length>0&&(o.push(new Et({children:[new Tt({text:"Phn III: Tr li ngn",bold:!0,size:24})]})),u.sa.forEach(d=>{o.push(new Et({children:[new Tt({text:`Cu ${c}: `,bold:!0,size:24}),new Tt({text:d.question,bold:!1,size:24})]})),o.push(new Et({text:""}));const h=this.getCorrectAnswerForDisplay(d,!1);o.push(new Et({children:[new Tt({text:`p n ng: ${h}`,bold:!0,size:22,color:"006400"})]})),o.push(new Et({text:""})),o.push(new Et({children:[new Tt({text:`Li gii: ${d.explanation}`,size:22,italics:!0})]})),o.push(new Et({text:""})),o.push(new Et({text:""})),c++}))}const l=new bL({sections:[{properties:{},children:o}]});return await BL.toBlob(l)}static async exportToXlsx(e,t){const n=e.questions,a=this.organizeQuestionsBySections(n),s=Qc.book_new(),o=[];let l=1;const u=this.generateExamCode(e.examNumber),c={STT:"STT","M ":` ${u}`};o.push(c),a.mcq.length>0&&(o.push({STT:"PHN I: TRC NGHIM"}),a.mcq.forEach(g=>{const m=this.getCorrectAnswerForDisplay(g,!1);o.push({STT:l,[` ${u}`]:m}),l++})),a.msq.length>0&&(o.push({STT:"PHN II: NG - SAI"}),a.msq.forEach(g=>{const m=this.getCorrectAnswerForDisplay(g,!1);o.push({STT:l,[` ${u}`]:m}),l++})),a.sa.length>0&&(o.push({STT:"PHN III: TR LI NGN"}),a.sa.forEach(g=>{const m=this.getCorrectAnswerForDisplay(g,!1);o.push({STT:l,[` ${u}`]:m}),l++}));const d=Qc.json_to_sheet(o,{skipHeader:!0});Qc.book_append_sheet(s,d,`DapAn_De${u}`);const h=by(s,{bookType:"xlsx",type:"array"});return new Blob([h],{type:"application/octet-stream"})}static async exportToTex(e,t){const n=e.questions;let a="";const s=this.organizeQuestionsBySections(n);return[...s.mcq,...s.msq,...s.sa].forEach((l,u)=>{const c=l,d=this.getCorrectAnswerForDisplay(c,!1);if(a+=`\\begin{ex}
`,a+=`${l.question}
`,l.type==="mcq"){const g=[l.option_a||"",l.option_b||"",l.option_c||"",l.option_d||""],m=["A","B","C","D"].indexOf(d.toUpperCase());m>=0&&m<4&&(g[m]=`\\True ${g[m]}`),a+=`\\choice{${g[0]}}{${g[1]}}{${g[2]}}{${g[3]}}
`}else if(l.type==="msq"){const g=[l.option_a||"",l.option_b||"",l.option_c||"",l.option_d||""],m=l.correct_option||"",v=[!1,!1,!1,!1];if(m.includes(",")){const x=m.split(",").map(b=>b.trim().toLowerCase());x.forEach(b=>{if(b==="a")v[0]=!0;else if(b==="b")v[1]=!0;else if(b==="c")v[2]=!0;else if(b==="d")v[3]=!0;else if(b===""||b==="d"){const y=x.indexOf(b);y>=0&&y<4&&(v[y]=!0)}else if(b==="true"){const y=x.indexOf(b);y>=0&&y<4&&(v[y]=!0)}})}else if(m.length>=4&&/^[Ss]+$/.test(m))for(let x=0;x<Math.min(4,m.length);x++){const b=m[x].toLowerCase();(b===""||b==="d")&&(v[x]=!0)}else m.toLowerCase().replace(/[^abcd]/g,"").split("").forEach(b=>{b==="a"?v[0]=!0:b==="b"?v[1]=!0:b==="c"?v[2]=!0:b==="d"&&(v[3]=!0)});for(let x=0;x<4;x++)v[x]&&(g[x]=`\\True ${g[x]}`);a+=`\\choiceTF{${g[0]}}{${g[1]}}{${g[2]}}{${g[3]}}
`}else l.type==="sa"&&(a+=`\\shortans[oly]{${d}}
`);const h=l.explanation||"";a+=`\\loigiai{${h}}
`,a+=`\\end{ex}

`}),a}static generateMainTex(e,t){const n=Array.from({length:e},(a,s)=>this.generateExamCode(s+1));return`\\documentclass[12pt,a4paper]{article}
\\usepackage[top=1.5cm, bottom=1.5cm, left=2.0cm, right=1.5cm]{geometry}
\\usepackage{amsmath,amssymb,fontawesome}
\\usepackage{tkz-euclide}
\\usepackage{setspace}
\\usepackage{lastpage}
\\usepackage{tikz,tkz-tab}
\\usepackage[dethi]{ex_test} % Ch hin th  thi
%  hin th li gii, thay bng: \\usepackage[loigiai]{ex_test}
%  khoanh p n, thay bng: \\usepackage[color]{ex_test}
\\usetikzlibrary{shapes.geometric,arrows,calc,intersections,angles,quotes,patterns,snakes,positioning}
\\everymath{\\displaystyle}

\\def\\colorEX{\\color{purple}}
\\renewtheorem{ex}{\\color{violet}Cu}
\\renewcommand{\\FalseEX}{\\stepcounter{dapan}{{\\bf \\textcolor{blue}{\\Alph{dapan}.}}}}
\\renewcommand{\\TrueEX}{\\stepcounter{dapan}{{\\bf \\textcolor{blue}{\\Alph{dapan}.}}}}

% Tiu 
\\newcommand{\\tenso}{${t.examTitle||"S GD \\& T"}}
\\newcommand{\\tentruong}{TRNG THPT}
\\newcommand{\\tenkythi}{${t.examTitle||" THI TON 12"}}
\\newcommand{\\tenmonthi}{${t.examSubtitle||"MN TON - KHI 12"}}
\\newcommand{\\tieude}[1]{
    \\centerline{\\textbf{\\fontsize{14}{0}\\selectfont \\tenkythi}}
}

\\newcommand{\\chantrang}[3]{\\lfoot{#3}\\rfoot{Trang \\thepage $-$ M  #2}}
\\pagestyle{fancy}
\\fancyhf{}
\\renewcommand{\\headrulewidth}{0pt}
\\renewcommand{\\footrulewidth}{0.2pt}
\\SAOPTN{kindSA=0}%

\\begin{document}
% To cc  thi
${n.map(a=>`
\\tieude{${a}}
\\chantrang{\\pageref{LastPage}}{${a}}{\\textit{Ngn hng cu hi}}
\\setcounter{page}{1}
\\Opensolutionfile{ans}[ans/ans-de-${a}]
\\input{De_${a}}
\\Closesolutionfile{ans}

\\begin{center}
-----HT-----
\\end{center}

\\newpage
\\begin{center} \\textbf{BNG P N  ${a}}\\end{center}
\\inputansbox[0]{3}{ans/ans-de-${a}}
\\newpage
`).join("")}
\\end{document}
`}static getHTMLHeader(e){return`<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e}</title>
    
    <!-- MathJax Configuration -->
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\\\(', '\\\\)']],
        displayMath: [['$$', '$$'], ['\\\\[', '\\\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
    <\/script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>
    
    <style>
        @media print {
            .page-break { page-break-before: always; }
            .no-print { display: none; }
            body { font-size: 12pt; }
        }
        
        body {
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm;
            background: #f5f5f5;
        }
        
        .exam-page {
            background: white;
            padding: 20mm;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
        }
        
        .header h1 {
            font-size: 24pt;
            margin: 10px 0;
            text-transform: uppercase;
        }
        
        .header h2 {
            font-size: 18pt;
            margin: 5px 0;
            font-weight: normal;
        }
        
        .exam-info {
            text-align: center;
            margin: 20px 0;
            font-style: italic;
        }
        
        .section-title {
            font-size: 14pt;
            font-weight: bold;
            margin: 20px 0 10px 0;
            text-transform: uppercase;
        }
        
        .question {
            margin: 15px 0;
            padding-left: 0;
        }
        
        .question-text {
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .options {
            margin-left: 30px;
        }
        
        .option {
            margin: 5px 0;
        }
        
        .solution {
            background-color: #f9f9f9;
            padding: 10px;
            margin: 10px 0;
            border-left: 3px solid #4CAF50;
        }
        
        .solution-title {
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 5px;
        }
        
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .print-button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <button class="print-button no-print" onclick="window.print()"> In PDF</button>
`}static async exportToHTMLExamOnly(e,t){let n=this.getHTMLHeader(t.examTitle||" thi Ton");return e.forEach((a,s)=>{const{title:o,subtitle:l}=this.generateExamTitle(a,t),u=a.questions,c=this.organizeQuestionsBySections(u);s>0&&(n+=`    <div class="page-break"></div>
`),n+=`
    <div class="exam-page">
        <div class="header">
            <h1>${o}</h1>
            ${l?`<h2>${l}</h2>`:""}
            ${t.examCount>1?`<h2>M : ${this.generateExamCode(a.examNumber)}</h2>`:""}
        </div>
        
        <div class="exam-info">
            <p>Thi gian lm bi: 90 pht | S cu hi: ${u.length}</p>
        </div>
`;let d=1;c.mcq.length>0&&(n+=`        <div class="section-title">Phn I: Cu trc nghim (${c.mcq.length} cu)</div>
`,c.mcq.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div class="options">
                <div class="option"><strong>A.</strong> ${h.option_a}</div>
                <div class="option"><strong>B.</strong> ${h.option_b}</div>
                <div class="option"><strong>C.</strong> ${h.option_c}</div>
                <div class="option"><strong>D.</strong> ${h.option_d}</div>
            </div>
        </div>
`,d++})),c.msq.length>0&&(n+=`        <div class="section-title">Phn II: Cu ng sai (${c.msq.length} cu)</div>
`,c.msq.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div class="options">
                <div class="option"><strong>a)</strong> ${h.option_a}</div>
                <div class="option"><strong>b)</strong> ${h.option_b}</div>
                <div class="option"><strong>c)</strong> ${h.option_c}</div>
                <div class="option"><strong>d)</strong> ${h.option_d}</div>
            </div>
        </div>
`,d++})),c.sa.length>0&&(n+=`        <div class="section-title">Phn III: Tr li ngn (${c.sa.length} cu)</div>
`,c.sa.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div style="margin-left: 30px; margin-top: 10px;">
                <strong>p n:</strong> ............................
            </div>
        </div>
`,d++})),n+=`    </div>
`}),n+=`</body>
</html>`,new Blob([n],{type:"text/html;charset=utf-8"})}static async exportToHTMLWithSolutions(e,t){let n=this.getHTMLHeader((t.examTitle||" thi Ton")+" - C li gii");return e.forEach((a,s)=>{const{title:o,subtitle:l}=this.generateExamTitle(a,t),u=a.questions;this.organizeQuestionsBySections(u),s>0&&(n+=`    <div class="page-break"></div>
`),n+=`
    <div class="exam-page">
        <div class="header">
            <h1>${o} - C LI GII</h1>
            ${l?`<h2>${l}</h2>`:""}
            ${t.examCount>1?`<h2>M : ${this.generateExamCode(a.examNumber)}</h2>`:""}
        </div>
`;let c=1;u.forEach(d=>{const h=this.getCorrectAnswerForDisplay(d,!1);if(n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${c}:</strong> ${d.question}</div>
`,d.type==="mcq"||d.type==="msq"){const g=d.type==="mcq"?["A","B","C","D"]:["a","b","c","d"];n+=`            <div class="options">
`,n+=`                <div class="option"><strong>${g[0]}.</strong> ${d.option_a}</div>
`,n+=`                <div class="option"><strong>${g[1]}.</strong> ${d.option_b}</div>
`,n+=`                <div class="option"><strong>${g[2]}.</strong> ${d.option_c}</div>
`,n+=`                <div class="option"><strong>${g[3]}.</strong> ${d.option_d}</div>
`,n+=`            </div>
`}n+=`
            <div class="solution">
                <div class="solution-title"> p n: ${h}</div>
                ${d.explanation?`<div><strong>Li gii:</strong> ${d.explanation}</div>`:""}
            </div>
        </div>
`,c++}),n+=`    </div>
`}),n+=`</body>
</html>`,new Blob([n],{type:"text/html;charset=utf-8"})}static async exportAnswerKeyToHTML(e,t){let n=this.getHTMLHeader("p n - "+(t.examTitle||" thi Ton"));return n+=`
    <style>
        .answer-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .answer-table th,
        .answer-table td {
            border: 1px solid #333;
            padding: 8px;
            text-align: center;
        }
        
        .answer-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        
        .answer-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .exam-separator {
            margin: 40px 0;
            border-top: 3px solid #333;
            padding-top: 20px;
        }
    </style>
`,e.forEach((a,s)=>{const o=a.questions,l=this.generateExamCode(a.examNumber);s>0&&(n+=`    <div class="exam-separator page-break"></div>
`),n+=`
    <div class="exam-page">
        <div class="header">
            <h1>P N</h1>
            ${t.examCount>1?`<h2>M : ${l}</h2>`:""}
            <p style="font-size: 14pt; margin: 10px 0;">Tng s cu: ${o.length}</p>
        </div>
        
        <table class="answer-table">
            <thead>
                <tr>
                    <th style="width: 10%;">Cu</th>
                    <th style="width: 15%;">p n</th>
                    <th style="width: 20%;">Loi cu hi</th>
                    <th style="width: 10%;">Cu</th>
                    <th style="width: 15%;">p n</th>
                    <th style="width: 20%;">Loi cu hi</th>
                </tr>
            </thead>
            <tbody>
`;for(let u=0;u<o.length;u+=2){n+=`                <tr>
`;const c=o[u],d=this.getCorrectAnswerForDisplay(c,!1),h=c.type==="mcq"?"Trc nghim":c.type==="msq"?"ng/Sai":"Tr li ngn";if(n+=`                    <td><strong>${u+1}</strong></td>
`,n+=`                    <td><strong>${d}</strong></td>
`,n+=`                    <td>${h}</td>
`,u+1<o.length){const g=o[u+1],m=this.getCorrectAnswerForDisplay(g,!1),v=g.type==="mcq"?"Trc nghim":g.type==="msq"?"ng/Sai":"Tr li ngn";n+=`                    <td><strong>${u+2}</strong></td>
`,n+=`                    <td><strong>${m}</strong></td>
`,n+=`                    <td>${v}</td>
`}else n+=`                    <td></td><td></td><td></td>
`;n+=`                </tr>
`}n+=`
            </tbody>
        </table>
    </div>
`}),n+=`</body>
</html>`,new Blob([n],{type:"text/html;charset=utf-8"})}static async exportToHTML(e,t){let n=`<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t.examTitle||" thi Ton"}</title>
    
    <!-- MathJax for LaTeX rendering -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"><\/script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"><\/script>
    
    <style>
        @media print {
            .page-break { page-break-before: always; }
            .no-print { display: none; }
            body { font-size: 12pt; }
        }
        
        body {
            font-family: 'Times New Roman', serif;
            line-height: 1.6;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20mm;
            background: #f5f5f5;
        }
        
        .exam-page {
            background: white;
            padding: 20mm;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
        }
        
        .header h1 {
            font-size: 24pt;
            margin: 10px 0;
            text-transform: uppercase;
        }
        
        .header h2 {
            font-size: 18pt;
            margin: 5px 0;
            font-weight: normal;
        }
        
        .exam-info {
            text-align: center;
            margin: 20px 0;
            font-style: italic;
        }
        
        .section-title {
            font-size: 14pt;
            font-weight: bold;
            margin: 20px 0 10px 0;
            text-transform: uppercase;
        }
        
        .question {
            margin: 15px 0;
            padding-left: 0;
        }
        
        .question-text {
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .options {
            margin-left: 30px;
        }
        
        .option {
            margin: 5px 0;
        }
        
        .answer-key {
            margin-top: 30px;
        }
        
        .answer-key table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .answer-key th, .answer-key td {
            border: 1px solid #333;
            padding: 8px;
            text-align: center;
        }
        
        .answer-key th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        
        .solution {
            background-color: #f9f9f9;
            padding: 10px;
            margin: 10px 0;
            border-left: 3px solid #4CAF50;
        }
        
        .solution-title {
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 5px;
        }
        
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .print-button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <button class="print-button no-print" onclick="window.print()"> In PDF</button>
`;return e.forEach((a,s)=>{const{title:o,subtitle:l}=this.generateExamTitle(a,t),u=a.questions,c=this.organizeQuestionsBySections(u);n+=`
    <div class="exam-page">
        <div class="header">
            <h1>${o}</h1>
            ${l?`<h2>${l}</h2>`:""}
            ${t.examCount>1?`<h2>M : ${this.generateExamCode(a.examNumber)}</h2>`:""}
        </div>
        
        <div class="exam-info">
            <p>Thi gian lm bi: 90 pht | S cu hi: ${u.length}</p>
        </div>
`;let d=1;if(c.mcq.length>0&&(n+=`
        <div class="section-title">Phn I: Cu trc nghim (${c.mcq.length} cu)</div>
`,c.mcq.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div class="options">
                <div class="option"><strong>A.</strong> ${h.option_a}</div>
                <div class="option"><strong>B.</strong> ${h.option_b}</div>
                <div class="option"><strong>C.</strong> ${h.option_c}</div>
                <div class="option"><strong>D.</strong> ${h.option_d}</div>
            </div>
        </div>
`,d++})),c.msq.length>0&&(n+=`
        <div class="section-title">Phn II: Cu ng sai (${c.msq.length} cu)</div>
`,c.msq.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div class="options">
                <div class="option"><strong>a)</strong> ${h.option_a}</div>
                <div class="option"><strong>b)</strong> ${h.option_b}</div>
                <div class="option"><strong>c)</strong> ${h.option_c}</div>
                <div class="option"><strong>d)</strong> ${h.option_d}</div>
            </div>
        </div>
`,d++})),c.sa.length>0&&(n+=`
        <div class="section-title">Phn III: Tr li ngn (${c.sa.length} cu)</div>
`,c.sa.forEach(h=>{n+=`
        <div class="question">
            <div class="question-text"><strong>Cu ${d}:</strong> ${h.question}</div>
            <div style="margin-left: 30px; margin-top: 10px;">
                <strong>p n:</strong> ............................
            </div>
        </div>
`,d++})),n+=`
    </div>
`,t.includeAnswerKey){n+=`
    <div class="exam-page page-break">
        <div class="header">
            <h1>P N</h1>
            ${t.examCount>1?`<h2>M : ${this.generateExamCode(a.examNumber)}</h2>`:""}
        </div>
        
        <div class="answer-key">
            <table>
                <thead>
                    <tr>
                        <th>Cu</th>
                        <th>p n</th>
                        <th>Cu</th>
                        <th>p n</th>
                        <th>Cu</th>
                        <th>p n</th>
                        <th>Cu</th>
                        <th>p n</th>
                    </tr>
                </thead>
                <tbody>
`;for(let h=0;h<u.length;h+=4){n+=`                    <tr>
`;for(let g=0;g<4;g++){const m=h+g;if(m<u.length){const v=u[m],x=this.getCorrectAnswerForDisplay(v,!1);n+=`                        <td>${m+1}</td><td><strong>${x}</strong></td>
`}else n+=`                        <td></td><td></td>
`}n+=`                    </tr>
`}n+=`
                </tbody>
            </table>
        </div>
    </div>
`}n+=`
    <div class="exam-page page-break">
        <div class="header">
            <h1>LI GII CHI TIT</h1>
            ${t.examCount>1?`<h2>M : ${this.generateExamCode(a.examNumber)}</h2>`:""}
        </div>
`,d=1,u.forEach(h=>{const g=this.getCorrectAnswerForDisplay(h,!1);n+=`
        <div class="solution">
            <div class="solution-title">Cu ${d}: p n ${g}</div>
            <div><strong>Cu hi:</strong> ${h.question}</div>
            ${h.explanation?`<div><strong>Li gii:</strong> ${h.explanation}</div>`:""}
        </div>
`,d++}),n+=`
    </div>
`}),n+=`
</body>
</html>`,new Blob([n],{type:"text/html;charset=utf-8"})}static async exportExams(e,t){if(e.length===0)throw new Error("Khng c cu hi no  xut");try{if(t.format==="tex"){const n=new C0;for(let u=1;u<=t.examCount;u++){const c=JSON.parse(JSON.stringify(e)),h={questions:this.processQuestions(c,t),examNumber:u,title:t.examTitle||" THI TRC NGHIM TON",subtitle:t.examSubtitle},g=await this.exportToTex(h,t),m=this.generateExamCode(u);n.file(`De_${m}.tex`,g)}const a=await fetch("/docs/ex_test.sty").then(u=>u.text()).catch(()=>(console.warn("Could not load ex_test.sty, using placeholder"),"% ex_test.sty - Please replace with actual file from docs/ex_test.sty"));n.file("ex_test.sty",a);const s=this.generateMainTex(t.examCount,t);n.file("main.tex",s),n.folder("ans");const o=await n.generateAsync({type:"blob"}),l=t.examCount>1?`de-thi-toan-${t.examCount}-de.zip`:"de-thi-toan.zip";y0.saveAs(o,l);return}if(t.format==="html"){const n=new C0,a=[];for(let d=1;d<=t.examCount;d++){const h=JSON.parse(JSON.stringify(e)),m={questions:this.processQuestions(h,t),examNumber:d,title:t.examTitle||" THI TRC NGHIM TON",subtitle:t.examSubtitle};a.push(m)}const s=await this.exportToHTMLExamOnly(a,t);n.file("de-thi.html",s);const o=await this.exportToHTMLWithSolutions(a,t);n.file("de-thi-co-loi-giai.html",o);const l=await this.createConsolidatedAnswerKey(a,t);n.file("dap-an.xlsx",l);const u=await n.generateAsync({type:"blob"}),c=t.examCount>1?`de-thi-toan-${t.examCount}-de.zip`:"de-thi-toan.zip";y0.saveAs(u,c);return}if(t.format==="docx"){const n=new C0,a=[];for(let u=1;u<=t.examCount;u++){const c=JSON.parse(JSON.stringify(e)),h={questions:this.processQuestions(c,t),examNumber:u,title:t.examTitle||" THI TRC NGHIM TON",subtitle:t.examSubtitle};a.push(h);const g=await this.exportToDocx(h,t),m=this.generateExamCode(u),v=t.examCount>1?`de-thi-toan-${m}.docx`:"de-thi-toan.docx";n.file(v,g),u<t.examCount&&await new Promise(x=>setTimeout(x,100))}const s=await this.createConsolidatedAnswerKey(a,t);n.file("dap-an.xlsx",s);const o=await n.generateAsync({type:"blob"}),l=(t.examCount>1,"de-thi-toan.zip");y0.saveAs(o,l);return}if(t.format==="xlsx"){const n=new C0,a=[];for(let u=1;u<=t.examCount;u++){const c=JSON.parse(JSON.stringify(e)),h={questions:this.processQuestions(c,t),examNumber:u,title:t.examTitle||" THI TRC NGHIM TON",subtitle:t.examSubtitle};a.push(h),u<t.examCount&&await new Promise(g=>setTimeout(g,100))}const s=await this.createConsolidatedAnswerKey(a,t);n.file("dap-an.xlsx",s);const o=await n.generateAsync({type:"blob"}),l=(t.examCount>1,"dap-an.zip");y0.saveAs(o,l)}}catch(n){throw console.error("Error exporting exams:",n),new Error("C li xy ra khi xut  thi. Vui lng th li.")}}static async createConsolidatedAnswerKey(e,t){const n=Qc.book_new(),a=Math.max(...e.map(c=>c.questions.length)),s=[],o={STT:"STT"};if(e.forEach(c=>{const d=this.generateExamCode(c.examNumber);o[` ${d}`]=` ${d}`}),s.push(o),t.organizeBySections){const c=["mcq","msq","sa"];let d=1;for(const h of c){h==="mcq"&&s.push({STT:"PHN I: TRC NGHIM"}),h==="msq"&&s.push({STT:"PHN II: NG - SAI"}),h==="sa"&&s.push({STT:"PHN III: TR LI NGN"});const g=Math.max(...e.map(m=>this.organizeQuestionsBySections(m.questions)[h].length));for(let m=0;m<g;m++){const v={STT:d};e.forEach(x=>{const b=this.generateExamCode(x.examNumber),y=this.organizeQuestionsBySections(x.questions);if(m<y[h].length){const S=y[h][m],_=this.getCorrectAnswerForDisplay(S,!1);v[` ${b}`]=_}else v[` ${b}`]=""}),s.push(v),d++}}}else for(let c=0;c<a;c++){const d={STT:c+1};e.forEach(h=>{const g=this.generateExamCode(h.examNumber);if(c<h.questions.length){const m=h.questions[c];try{const v=this.getCorrectAnswerForDisplay(m,!1);d[` ${g}`]=v}catch{d[` ${g}`]=""}}else d[` ${g}`]=""}),s.push(d)}const l=Qc.json_to_sheet(s,{skipHeader:!0});Qc.book_append_sheet(n,l,"DapAn");const u=by(n,{bookType:"xlsx",type:"array"});return new Blob([u],{type:"application/octet-stream"})}static getExportPreview(e,t){const n=this.organizeQuestionsBySections(e),a=e.length,l=a*(200+400)*t.examCount,u=Math.ceil(l/1024),d=Math.max(1,Math.ceil(a/50))*t.examCount;let h="Khng o";return t.shuffleQuestions&&t.shuffleMcqOptions?h="o cu hi v p n":t.shuffleQuestions?h="o cu hi":t.shuffleMcqOptions&&(h="o p n"),{totalQuestions:a,questionsByType:{mcq:n.mcq.length,msq:n.msq.length,sa:n.sa.length},estimatedFileSize:u>1024?`${(u/1024).toFixed(1)}MB`:`${u}KB`,estimatedTime:d>60?`${Math.ceil(d/60)} pht`:`${d} giy`,shuffleInfo:h}}}function cs(r){return!r||typeof r!="string"?"":r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\$/g,"&#36;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n+/g," ").replace(/\s+/g," ").replace(//g,"dong").replace(/\|/g,"&#124;").replace(/\\/g,"&#92;").replace(/`/g,"&#96;").trim()}function I5(r){return r?cs(r).replace(//g,"&times;").replace(//g,"&divide;").replace(//g,"&plusmn;").replace(//g,"&le;").replace(//g,"&ge;").replace(//g,"&ne;").replace(//g,"&infin;").replace(//g,"&pi;").replace(//g,"&radic;").replace(//g,"&sum;").replace(//g,"&int;").replace(//g,"&deg;").replace(//g,"&frac12;").replace(//g,"&frac13;").replace(//g,"&frac14;").replace(//g,"&frac34;").replace(//g,"&sup2;").replace(//g,"&sup3;").replace(//g,"&sup1;"):""}function ay(r,e){const t=I5(r.question),n=I5(r.explanation||"");switch(r.type){case"mcq":return`[quiz_question question="Cu ${e}: ${t}" option_a="${cs(r.option_a||"")}" option_b="${cs(r.option_b||"")}" option_c="${cs(r.option_c||"")}" option_d="${cs(r.option_d||"")}" correct="${r.correct_option}" explanation="${n}"]`;case"msq":return`[quiz_question_T_F question="Cu ${e}: ${t}" option_a="${cs(r.option_a||"")}" option_b="${cs(r.option_b||"")}" option_c="${cs(r.option_c||"")}" option_d="${cs(r.option_d||"")}" correct="${r.correct_option}" explanation="${n}"]`;case"sa":return`[quiz_question_TLN question="Cu ${e}: ${t}" correct="${cs(r.correct_option||"")}" explanation="${n}"]`;default:return""}}function nge(r){if(!r||r.length===0)return"";const e=r.filter(o=>o.type==="mcq"),t=r.filter(o=>o.type==="msq"),n=r.filter(o=>o.type==="sa"),a=[];let s=1;return a.push(`<!-- Quiz Generated: ${new Date().toLocaleString("vi-VN")} -->`),a.push(`<!-- Total Questions: ${r.length} (MCQ: ${e.length}, MSQ: ${t.length}, SA: ${n.length}) -->`),a.push(""),a.push('[quiz_set type="exam" time="15"]'),a.push(""),e.length>0&&(a.push("<!-- PHN I: TRC NGHIM -->"),a.push('[q_group title="Phn I: Trc nghim" single_choice_tron="y,y"]'),a.push(""),e.forEach(o=>{a.push(ay(o,s)),s++}),a.push(""),a.push("[/q_group]"),a.push("")),t.length>0&&(a.push("<!-- PHN II: NG - SAI -->"),a.push('[q_group title="Phn II: ng/Sai" true_false_tron="y,n"]'),a.push(""),t.forEach(o=>{a.push(ay(o,s)),s++}),a.push(""),a.push("[/q_group]"),a.push("")),n.length>0&&(a.push("<!-- PHN III: TR LI NGN -->"),a.push('[q_group title="Phn III: Tr li ngn" short_answer_tron="y" short_answer_socau="1"]'),a.push(""),n.forEach(o=>{a.push(ay(o,s)),s++}),a.push(""),a.push("[/q_group]"),a.push("")),a.push("[/quiz_set]"),a.join(`
`)}const ige=({showPrintDialog:r,setShowPrintDialog:e,getTotalSelectedCount:t,printCount:n,setPrintCount:a,shuffleQuestions:s,setShuffleQuestions:o,shuffleMcqOptions:l,setShuffleMcqOptions:u,exportFormat:c,setExportFormat:d,handlePrintConfirm:h})=>r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Ty chn in "}),i.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-gray-700 font-medium",children:["Tng s cu hi: ",i.jsx("span",{className:"font-bold text-indigo-600",children:t()})]}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Ngun: Ngn hng Ton Thy "})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block font-medium mb-1",children:"S  cn in:"}),i.jsx("input",{type:"number",min:1,max:20,value:n,onChange:g=>a(Number(g.target.value)),className:"w-full border rounded px-2 py-1"})]}),i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shuffleQuestions",checked:s,onChange:g=>o(g.target.checked)}),i.jsx("label",{htmlFor:"shuffleQuestions",children:"Trn cu hi"})]}),i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shuffleMcqOptions",checked:l,onChange:g=>u(g.target.checked)}),i.jsx("label",{htmlFor:"shuffleMcqOptions",children:"Trn p n trc nghim"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block font-medium mb-2",children:"nh dng file:"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"radio",name:"exportFormat",value:"docx",checked:c==="docx",onChange:g=>d(g.target.value)}),i.jsx("span",{children:"File .docx ( thi + p n)"})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"radio",name:"exportFormat",value:"tex",checked:c==="tex",onChange:g=>d(g.target.value)}),i.jsx("span",{children:"File .tex ( thi LaTeX)"})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"radio",name:"exportFormat",value:"html",checked:c==="html",onChange:g=>d(g.target.value)}),i.jsx("span",{children:"File .html ( thi + p n + Li gii - In PDF)"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:h,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:["Ti ",c==="docx"?"DOCX":c==="xlsx"?"XLSX":c==="html"?"HTML":"TEX"]}),i.jsx("button",{onClick:()=>e(!1),className:"px-4 py-2 border border-gray-300 rounded hover:bg-gray-50",children:"Hy"})]})]})}):null,age=({getTotalSelectedCount:r,globalSelectedCounts:e})=>r()===0?null:i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-blue-800 font-medium",children:["Bn  chn c"," ",i.jsxs("span",{className:"font-bold",children:[e.mcq," cu trc nghim"]}),";"," ",i.jsxs("span",{className:"font-bold",children:[e.msq," cu ng sai"]}),";"," ",i.jsxs("span",{className:"font-bold",children:[e.sa," cu TLN"]}),e.tl>0&&i.jsxs(i.Fragment,{children:[";"," ",i.jsxs("span",{className:"font-bold",children:[e.tl," cu t lun"]})]})]})}),sge=({counts:r,globalSelectedCounts:e,activeTab:t,setActiveTab:n,filteredQuestions:a,selectedQuestionIds:s,handleSelectAll:o,handleDeselectAll:l})=>i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"Tt c",count:r.all,selectedCount:e.all},{key:"mcq",label:"Trc nghim",count:r.mcq,selectedCount:e.mcq},{key:"msq",label:"ng/Sai",count:r.msq,selectedCount:e.msq},{key:"sa",label:"Tr li ngn",count:r.sa,selectedCount:e.sa},{key:"tl",label:"T lun",count:r.tl,selectedCount:e.tl}].map(({key:u,label:c,count:d,selectedCount:h})=>i.jsxs("button",{onClick:()=>n(u),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t===u?"bg-indigo-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:[c," (",h,"/",d,")"]},u))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:o,disabled:a.length===0||a.every(u=>s.some(c=>String(c)===String(u.id))),className:"px-3 py-1.5 text-sm font-medium text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:" Chn tt c"}),i.jsx("button",{onClick:l,disabled:s.length===0,className:"px-3 py-1.5 text-sm font-medium text-red-600 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:" B chn tt c"})]})]}),ir=({content:r,className:e="",inline:t=!1})=>{const n=he.useRef(null);he.useEffect(()=>{if(n.current){n.current.innerHTML=r;try{window.renderMathInElement&&window.renderMathInElement(n.current,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1,strict:!1,trust:!1})}catch(o){console.error("KaTeX auto-render error:",o)}}},[r]);const a=t?"span":"div",s=t?`inline-math ${e}`.trim():`math-content ${e}`.trim();return i.jsx(a,{ref:n,className:s})},Uy=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("path",{d:"m12 3-1.9 5.8-5.8 1.9 5.8 1.9 1.9 5.8 1.9-5.8 5.8-1.9-5.8-1.9z"}),i.jsx("path",{d:"M5 3v4"}),i.jsx("path",{d:"M19 17v4"}),i.jsx("path",{d:"M3 5h4"}),i.jsx("path",{d:"M17 19h4"})]}),uM=({question:r,index:e,onSelect:t,isSelected:n,showAnswer:a,onToggleAnswer:s})=>{const[o,l]=he.useState(!1),[u,c]=he.useState(null),d=a!==void 0?a:o,h=he.useMemo(()=>new Uo,[]),g=he.useMemo(()=>h.isDynamicQuestion(r),[h,r]);Na.useEffect(()=>{if(g&&!u)try{const E=h.processQuestion(r);c(E)}catch(E){console.error("Error processing dynamic question:",E)}},[r,g,h,u]);const m=he.useMemo(()=>g&&u?u:r,[g,u,r]),v=he.useMemo(()=>m.type==="sa"?[]:(m.type==="msq"?[{key:"a",value:m.option_a||""},{key:"b",value:m.option_b||""},{key:"c",value:m.option_c||""},{key:"d",value:m.option_d||""}]:[{key:"A",value:m.option_a||""},{key:"B",value:m.option_b||""},{key:"C",value:m.option_c||""},{key:"D",value:m.option_d||""}]).filter(T=>T.value),[m]),x=he.useCallback(E=>d?m.correct_option.split(",").map(F=>F.trim().toLowerCase()).includes(E.toLowerCase())?"border-green-300 bg-green-100 ring-2 ring-green-200":"border-gray-200 bg-gray-50":"border-gray-200 bg-gray-50 hover:bg-gray-100",[d,m.correct_option]),b=he.useCallback(()=>{const E="text-xs font-semibold px-2.5 py-1 rounded-full";switch(m.type){case"mcq":return i.jsx("span",{className:`${E} bg-blue-100 text-blue-800`,children:"Trc nghim"});case"msq":return i.jsx("span",{className:`${E} bg-purple-100 text-purple-800`,children:"ng - Sai"});case"sa":return i.jsx("span",{className:`${E} bg-amber-100 text-amber-800`,children:"Tr li ngn"});case"tl":return i.jsx("span",{className:`${E} bg-green-100 text-green-800`,children:"T lun"});default:return null}},[m.type]),y=he.useCallback(()=>{if(g)try{const E=h.processQuestion(r);c(E)}catch(E){console.error("Error regenerating dynamic question:",E)}},[g,h,r]),S=he.useCallback(E=>{E.stopPropagation(),t(r.id)},[t,r.id]),_=he.useCallback(E=>{E.preventDefault(),E.stopPropagation(),s?s(r.id):l(!d)},[s,r.id,d]),N=he.useCallback(E=>{const T=E.target;T.closest("input")||T.closest("button")||T.closest("a")||T.closest('[role="button"]')||t(r.id)},[t,r.id]),j=he.useCallback(E=>{(E.key===" "||E.key==="Enter")&&(E.preventDefault(),t(r.id))},[t,r.id]);return i.jsxs("div",{onClick:N,className:`bg-white p-5 rounded-xl border-2 transition-all duration-200 cursor-pointer ${n?"border-indigo-500 shadow-lg ring-2 ring-indigo-200 bg-indigo-50/30":"border-transparent hover:border-indigo-300 shadow-sm"}`,role:"button",tabIndex:0,onKeyDown:j,"aria-label":`Cu hi ${e+1}`,"aria-pressed":n,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("input",{type:"checkbox",checked:n,onChange:S,className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 accent-indigo-600","aria-label":`Chn cu hi ${e+1}`,onClick:E=>E.stopPropagation()})}),i.jsx("div",{className:"flex-grow",children:i.jsxs("p",{className:"font-semibold text-gray-900",children:[i.jsx("span",{className:"text-indigo-600 mr-2",children:`Cu ${e+1}:`}),i.jsx(ir,{content:m.question,inline:!0}),g&&i.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-full inline-flex items-center gap-1",children:[i.jsx(Uy,{className:"w-3 h-3"}),"ng"]}),n&&i.jsx("span",{className:"ml-2 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-bold rounded-full",children:"  chn"})]})})]}),i.jsx("div",{className:"ml-4 flex-shrink-0",children:b()})]}),i.jsxs("div",{className:"pl-9 space-y-4",children:[r.type!=="sa"&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:v.map(E=>i.jsxs("div",{className:`p-3 border rounded-lg text-gray-800 transition-all ${x(E.key)} flex items-start gap-2`,children:[i.jsx("strong",{className:"font-semibold flex-shrink-0",children:m.type==="msq"?`${E.key})`:`${E.key}.`}),i.jsx(ir,{content:E.value,inline:!0,className:"flex-1"})]},E.key))}),d&&i.jsxs("div",{className:"mt-6 p-4 bg-gray-50/70 border-t border-gray-200 rounded-b-lg -m-5 mt-5 pt-5",children:[m.type==="sa"&&i.jsxs("div",{className:"mb-4",children:[i.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"p n ng:"}),i.jsx("div",{className:"p-3 bg-white rounded-md border border-gray-200 text-green-700 font-bold",children:i.jsx(ir,{content:m.correct_option,inline:!0})})]}),g&&u&&i.jsxs("div",{className:"mb-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-purple-700 mb-2 flex items-center gap-2",children:[i.jsx(Uy,{className:"w-4 h-4"}),"Bin s  sinh:"]}),i.jsx("div",{className:"text-sm text-purple-600",children:Object.entries(u.variables).map(([E,T])=>i.jsxs("span",{className:"inline-block mr-3 mb-1",children:[E," = ",String(T)]},E))}),i.jsx("button",{onClick:y,className:"mt-2 px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors",children:"To li bin s"})]}),i.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Li gii chi tit:"}),i.jsx("div",{className:"text-gray-600 leading-relaxed prose prose-sm max-w-none",children:i.jsx(ir,{content:m.explanation})})]})]}),i.jsx("div",{className:`flex justify-end ${d?"mt-0":"mt-4"}`,children:i.jsx("button",{onClick:_,className:"px-4 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-lg hover:bg-indigo-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500",children:d?"n p n & Li gii":"Xem p n & Li gii"})})]})},oge=({filteredQuestions:r,handleQuestionToggle:e,selectedQuestionIds:t})=>i.jsx("div",{className:"grid gap-6",children:r.map((n,a)=>i.jsx(uM,{question:n,index:a,onSelect:e,isSelected:t.some(s=>String(s)===String(n.id))},n.id))}),lge=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),i.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),i.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),dm=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]}),cge=({getTotalSelectedCount:r,handleOfflineExam:e,handleOnlineExam:t,setShowWordPressModal:n})=>r()===0?null:i.jsxs("div",{className:"fixed bottom-6 right-6 flex gap-3",children:[i.jsxs("button",{onClick:()=>n(!0),className:"flex items-center gap-2 px-4 py-3 text-sm font-semibold text-white bg-orange-600 rounded-lg hover:bg-orange-700 shadow-lg",children:[i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M21.469 6.825c.84 1.537 1.318 3.3 1.318 5.175 0 3.979-2.156 7.456-5.363 9.325l3.295-9.527c.615-1.54.82-2.771.82-3.864 0-.405-.026-.78-.07-1.11m-7.981.105c.647-.03 1.232-.105 1.232-.105.582-.075.514-.93-.067-.899 0 0-1.755.135-2.88.135-1.064 0-2.85-.135-2.85-.135-.584-.031-.661.854-.082.899 0 0 .541.075 1.115.105l1.65 4.53-2.31 6.92-3.85-11.45c.645-.03 1.231-.105 1.231-.105.582-.075.516-.93-.065-.899 0 0-1.755.135-2.88.135-.202 0-.438-.008-.69-.015C4.911 2.015 8.235 0 12.001 0c2.756 0 5.27 1.055 7.13 2.78-.045-.003-.087-.008-.125-.008-.202 0-.438-.008-.69-.015-.647.03-1.232.105-1.232.105-.582.075-.514.93.067.899 0 0 .541-.075 1.115-.105l1.65-4.53 2.31-6.92 3.85 11.45z"})}),i.jsx("span",{className:"hidden sm:inline",children:"To shortcode WP"}),i.jsx("span",{className:"sm:hidden",children:"WP"})]}),i.jsxs("button",{onClick:e,disabled:r()===0,className:"flex items-center gap-2 px-4 py-3 text-sm font-semibold text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed shadow-lg",children:[i.jsx(lge,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Ti "}),i.jsx("span",{className:"sm:hidden",children:"Ti"}),i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-green-200 text-green-700 rounded text-[10px] font-bold",children:r()})]}),i.jsxs("button",{onClick:t,disabled:r()===0,className:"flex items-center gap-2 px-4 py-3 text-sm font-semibold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:bg-indigo-300 disabled:cursor-not-allowed shadow-lg",children:[i.jsx(dm,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Thi online"}),i.jsx("span",{className:"sm:hidden",children:"Thi"}),i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-indigo-200 text-indigo-700 rounded text-[10px] font-bold",children:r()})]})]}),uge=()=>{const r=Vn(),{user:e}=Yr(),[t,n]=he.useState(!1),[a,s]=he.useState(1),[o,l]=he.useState(!1),[u,c]=he.useState(!1),[d,h]=he.useState("docx"),[g,m]=he.useState(0),[v,x]=he.useState(""),[b,y]=he.useState(""),[S,_]=he.useState([]),[N,j]=he.useState([]),[E,T]=he.useState(!1),[F,A]=he.useState(null),[R,I]=he.useState({}),[O,U]=he.useState("all"),[D,H]=he.useState(!1),[P,G]=he.useState(!1),[ue,le]=he.useState(!1),pe=he.useCallback(async(k,B,Q)=>{g&&N.length>0&&I(J=>({...J,[g]:N})),T(!0),A(null),m(k),x(B),y(Q||B);const Z=setTimeout(()=>{console.warn(" fetchDatabaseQuestions timeout, clearing loading state"),T(!1),A("Yu cu vt qu thi gian ch. Vui lng th li.")},1e4);try{const J=await Bt.getQuestionsByType(k,{approvedOnly:!0,limit:1e4});clearTimeout(Z);const K=J.map(me=>({id:me.id,type:me.type,question:me.question_text,option_a:me.option_a||"",option_b:me.option_b||"",option_c:me.option_c||"",option_d:me.option_d||"",correct_option:me.correct_option,explanation:me.explanation,difficulty:me.difficulty_level,tags:me.tags||[],isDynamic:me.is_dynamic||!1}));_(K);const te=R[k]||[];j(te)}catch(J){clearTimeout(Z),J instanceof Error?A(J.message):A(" xy ra li khi ti cu hi t database."),_([])}finally{T(!1)}},[g,N,R]),de=he.useMemo(()=>{if(!S.length)return[];switch(O){case"mcq":return S.filter(k=>k.type==="mcq");case"msq":return S.filter(k=>k.type==="msq");case"sa":return S.filter(k=>k.type==="sa");case"tl":return S.filter(k=>k.type==="tl");case"all":default:return S}},[S,O]),L=he.useMemo(()=>S.length?{all:S.length,mcq:S.filter(k=>k.type==="mcq").length,msq:S.filter(k=>k.type==="msq").length,sa:S.filter(k=>k.type==="sa").length,tl:S.filter(k=>k.type==="tl").length}:{all:0,mcq:0,msq:0,sa:0,tl:0},[S]);he.useMemo(()=>{let k=0,B=0,Q=0,Z=0;const J=S.filter(K=>N.includes(K.id));return k+=J.filter(K=>K.type==="mcq").length,B+=J.filter(K=>K.type==="msq").length,Q+=J.filter(K=>K.type==="sa").length,Z+=J.filter(K=>K.type==="tl").length,Object.entries(R).forEach(([K,te])=>{String(K)!==String(g)&&te.length>0}),{all:k+B+Q+Z,mcq:k,msq:B,sa:Q,tl:Z}},[S,N,R,g]);const[X,V]=he.useState({all:0,mcq:0,msq:0,sa:0,tl:0}),se=he.useRef(!1);he.useEffect(()=>{if(se.current)return;const B=setTimeout(async()=>{se.current=!0;try{let Q=0,Z=0,J=0,K=0;const te=S.filter(fe=>N.includes(fe.id));Q+=te.filter(fe=>fe.type==="mcq").length,Z+=te.filter(fe=>fe.type==="msq").length,J+=te.filter(fe=>fe.type==="sa").length,K+=te.filter(fe=>fe.type==="tl").length;const me=Object.entries(R).filter(([fe,xe])=>String(fe)!==String(g)&&xe.length>0);for(const[fe,xe]of me.slice(0,5))try{const je=(await Bt.getQuestionsByType(Number(fe),{approvedOnly:!0,limit:1e4})).filter(Be=>xe.includes(Be.id));Q+=je.filter(Be=>Be.type==="mcq").length,Z+=je.filter(Be=>Be.type==="msq").length,J+=je.filter(Be=>Be.type==="sa").length,K+=je.filter(Be=>Be.type==="tl").length}catch(_e){console.error(`Error loading questions for type ${fe}:`,_e)}V({all:Q+Z+J+K,mcq:Q,msq:Z,sa:J,tl:K})}finally{se.current=!1}},100);return()=>clearTimeout(B)},[S,N,R,g]);const ae=he.useCallback(k=>{j(B=>B.includes(k)?B.filter(Q=>Q!==k):[...B,k])},[]),W=he.useCallback(()=>{const k=de.map(B=>B.id);j(B=>{const Q=[...B];return k.forEach(Z=>{Q.includes(Z)||Q.push(Z)}),Q})},[de]),z=he.useCallback(()=>{const k=de.map(B=>B.id);j(B=>B.filter(Q=>!k.includes(Q)))},[de]),re=he.useCallback(()=>{const k=N.length,B=Object.values(R).reduce((Q,Z)=>Q+Z.length,0);return k+B},[N.length,R]),ne=he.useCallback(async()=>{const k=[];console.log(" getSelectedQuestionsForQuiz - Debug info:",{selectedQuestionIds:N,databaseQuestions:S.length,questionTypeSelections:R,activeQuestionTypeId:g});const B=S.filter(Q=>N.includes(Q.id));console.log(" Current selections:",B.length,B.map(Q=>({id:Q.id,question:Q.question.substring(0,50)}))),k.push(...B);for(const[Q,Z]of Object.entries(R))if(Number(Q)!==g&&Z.length>0)try{console.log(` Loading questions for type ${Q}, selections:`,Z);const K=(await Bt.getQuestionsByType(Number(Q),{approvedOnly:!0,limit:1e4})).filter(te=>Z.includes(te.id)).map(te=>({id:te.id,type:te.type,question:te.question_text,option_a:te.option_a||"",option_b:te.option_b||"",option_c:te.option_c||"",option_d:te.option_d||"",correct_option:te.correct_option,explanation:te.explanation,difficulty:te.difficulty_level,tags:te.tags||[],isDynamic:te.is_dynamic||!1}));console.log(` Converted ${K.length} questions for type ${Q}`),k.push(...K)}catch(J){console.error(` Error loading questions for type ${Q}:`,J)}return console.log(" Total selected questions for quiz:",k.length),k},[N,S,R,g]),ie=he.useCallback(()=>{re()!==0&&n(!0)},[re]),oe=he.useCallback(()=>{re()!==0&&G(!0)},[re]),ye=he.useCallback(async()=>{const k=await ne();if(k.length===0){alert("Vui lng chn t nht mt cu hi  to  thi");return}try{const B={format:d,examCount:a,shuffleQuestions:o,shuffleMcqOptions:u,includeAnswerKey:!0,organizeBySections:!0};await rge.exportExams(k,B),n(!1)}catch(B){console.error("Li khi to file:",B),alert("C li xy ra khi to file. Vui lng th li.")}},[ne,a,o,u,d]),M=he.useCallback(async(k,B,Q,Z,J,K,te,me)=>{if(re()===0)return;const xe=await ne();if(console.log(" Questions for exam:",xe.length,xe.map(_e=>({id:_e.id,type:_e.type,question:_e.question.substring(0,50)}))),xe.length===0){alert(" Khng c cu hi no c chn. Vui lng chn cu hi trc khi to  thi.");return}try{if(!e){console.error("User not authenticated"),alert("Bn cn ng nhp  to  thi online.");return}if(e.role!=="teacher"&&e.role!=="admin"){console.error("User does not have permission to create quiz. Role:",e.role),alert(` Bn cn c quyn Gio vin hoc Admin  to  thi online.

Role hin ti: `+e.role);return}const _e={title:k,description:"",max_attempts:B,time_limit_minutes:Q,shuffle_questions:Z,shuffle_options:J,show_results_after_submission:K==="immediate",show_correct_answers:te,password:me||void 0,questions:xe.map((Be,Re)=>({question_id:Number(Be.id),type:Be.type||"mcq",question:Be.question||Be.question_text||"",option_a:Be.option_a||"",option_b:Be.option_b||"",option_c:Be.option_c||"",option_d:Be.option_d||"",correct_option:Be.correct_option||"",explanation:Be.explanation||"",order_index:Re+1,points:1})),status:"published"};console.log(" Creating quiz with data:",JSON.stringify(_e,null,2));const je=await Va.createQuiz(_e);console.log(" Quiz created successfully:",je),G(!1),alert("  to  thi thnh cng!"),r(`/exam/${je.slug}`)}catch(_e){console.error(" Error creating quiz:",_e),console.error("Error details:",{message:_e?.message,status:_e?.status,errors:_e?.errors,stack:_e?.stack});let je="Unknown error";if(_e?.message&&(je=_e.message),_e?.errors){const Be=Object.entries(_e.errors).map(([Re,ze])=>`${Re}: ${ze.join(", ")}`).join(`
`);je+=`
`+Be}alert(` C li xy ra khi to quiz:
`+je)}},[e,re,ne,r]),ge=he.useCallback(async()=>{const k=await ne();return k.length===0?(alert("Vui lng chn t nht mt cu hi  to shortcode."),""):nge(k)},[ne]),ee=()=>E?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"})}):F?i.jsx("div",{className:"text-center text-red-600 bg-red-100 p-4 rounded-lg border border-red-200",children:F}):g?S.length===0?i.jsxs("div",{className:"text-center text-gray-500 py-16",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cha c cu hi"}),i.jsx("p",{children:"Dng cu hi ny cha c cu hi no."}),i.jsx("p",{className:"text-sm mt-2",children:"Hy thm cu hi trong Admin Panel."})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3",children:b||"Chn dng ton t menu bn tri"}),i.jsx(age,{getTotalSelectedCount:re,globalSelectedCounts:X})]}),i.jsx(sge,{counts:L,globalSelectedCounts:X,activeTab:O,setActiveTab:U,filteredQuestions:de,selectedQuestionIds:N,handleSelectAll:W,handleDeselectAll:z}),i.jsx(oge,{filteredQuestions:de,handleQuestionToggle:ae,selectedQuestionIds:N})]}):i.jsxs("div",{className:"text-center text-gray-500 py-16",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Chn dng cu hi"}),i.jsx("p",{children:"Hy chn mt dng cu hi t menu bn tri  bt u."})]});return i.jsxs("div",{className:"flex h-full bg-gray-50 relative",children:[i.jsx("div",{className:"hidden md:block md:fixed md:inset-y-0 md:left-0 md:w-[300px] md:z-10 bg-white border-r border-gray-200",children:i.jsx(sS,{onSelectQuestionType:pe,activeQuestionTypePath:v})}),i.jsxs("div",{className:"flex-1 md:pl-[300px]",children:[i.jsx(ige,{showPrintDialog:t,setShowPrintDialog:n,getTotalSelectedCount:re,printCount:a,setPrintCount:s,shuffleQuestions:o,setShuffleQuestions:l,shuffleMcqOptions:u,setShuffleMcqOptions:c,exportFormat:d,setExportFormat:h,handlePrintConfirm:ye}),P&&i.jsx(tO,{isOpen:P,onClose:()=>G(!1),onConfirm:M,questionCount:re()}),ue&&i.jsx(rO,{onClose:()=>le(!1),generateShortcodes:ge}),D&&i.jsxs("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-40 flex md:hidden",children:[i.jsxs("div",{className:"w-[300px] bg-white border-r border-gray-200 p-0 h-full overflow-y-auto relative pt-4",children:[i.jsx("button",{onClick:()=>H(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-xl font-bold z-10","aria-label":"ng menu",children:""}),i.jsx(sS,{onSelectQuestionType:(k,B,Q)=>{pe(k,B,Q),H(!1)},activeQuestionTypePath:v})]}),i.jsx("div",{className:"flex-1",onClick:()=>H(!1)})]}),i.jsxs("main",{className:"flex-1 p-4 sm:p-8 lg:p-10 overflow-y-auto pt-4",children:[i.jsxs("button",{onClick:()=>H(!0),className:"md:hidden mb-4 bg-red-500 text-white border border-red-600 rounded-lg px-4 py-2 shadow-md hover:bg-red-600 flex items-center gap-2","aria-label":"M menu",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-sm font-medium",children:"Menu dng ton"})]}),ee(),i.jsx(cge,{getTotalSelectedCount:re,handleOfflineExam:ie,handleOnlineExam:oe,setShowWordPressModal:le})]})]})]})},dge=()=>i.jsx(uge,{}),fge="modulepreload",hge=function(r,e){return new URL(r,e).href},z5={},gw=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=c(t.map(d=>{if(d=hge(d,n),d in z5)return;z5[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(n)for(let v=o.length-1;v>=0;v--){const x=o[v];if(x.href===d&&(!h||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":fge,h||(m.as="script"),m.crossOrigin="",m.href=d,u&&m.setAttribute("nonce",u),document.head.appendChild(m),h)return new Promise((v,x)=>{m.addEventListener("load",v),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},mge=()=>{const[r,e]=he.useState(!1),[t,n]=he.useState(""),a=async()=>{e(!0),n("");try{console.log(" Testing API health...");const s=await fetch(`${st.getBaseURL()}/health`);if(!s.ok)throw new Error(`Health check failed: ${s.status}`);const o=await s.json();let l="Not logged in";if(st.getToken())try{const c=await st.getCurrentUser();l=`Logged in as: ${c.email} (${c.role})`}catch(c){l=`Auth failed: ${c.message}`}n(` API Connection Successful!

 Health Check:
- Status: ${o.status}
- PHP Version: ${o.php_version}
- Timestamp: ${o.timestamp}

 Authentication:
- ${l}

 API Configuration:
- Base URL: ${st.getBaseURL()}
- Environment: production
- VITE_API_URL: https://hoc.io.vn/api
`)}catch(s){console.error(" API test failed:",s),n(` API Connection Failed!

Error: ${s.message}

 Configuration:
- Base URL: ${st.getBaseURL()}
- Environment: production
- VITE_API_URL: https://hoc.io.vn/api

 Troubleshooting:
1. Check if the API server is running
2. Verify the API URL is correct
3. Check network connectivity
4. Look at browser console for more details
`)}finally{e(!1)}};return i.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:" API Connection Test"}),i.jsxs("button",{onClick:a,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[r&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r?"Testing...":"Test API Connection"]}),t&&i.jsx("div",{className:"mt-4 p-3 bg-white border rounded-lg",children:i.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono",children:t})})]})},pge=()=>{const{user:r}=Yr(),[e,t]=he.useState(!1),n=[{title:"1. Kim tra kt ni mng",description:"m bo bn c kt ni internet n nh",action:"Th truy cp https://hoc.io.vn  kim tra"},{title:"2. Kim tra quyn ti khon",description:"Ti khon cn c quyn gio vin hoc admin  to  thi trn server",action:r?`Ti khon hin ti: ${r.email} (${r.role})`:"Cha ng nhp"},{title:"3. S dng Local Storage",description:"Nu khng th lu trn server,  thi s c lu trong trnh duyt",action:" thi ch c th truy cp trn my tnh ny"},{title:"4. Lin h h tr",description:"Nu vn gp li, hy lin h admin",action:"Email: admin@hoc.io.vn hoc bo li qua h thng"}];return i.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[i.jsxs("button",{onClick:()=>t(!e),className:"flex items-center justify-between w-full text-left",children:[i.jsx("h3",{className:"font-semibold text-orange-900",children:' Hng dn khc phc li "Khng th kt ni n server"'}),i.jsx("span",{className:"text-orange-600",children:e?"":""})]}),e&&i.jsxs("div",{className:"mt-4 space-y-4",children:[n.map((a,s)=>i.jsxs("div",{className:"bg-white p-3 rounded border border-orange-200",children:[i.jsx("h4",{className:"font-medium text-orange-900 mb-1",children:a.title}),i.jsx("p",{className:"text-sm text-orange-700 mb-2",children:a.description}),i.jsxs("p",{className:"text-xs text-orange-600 bg-orange-100 p-2 rounded",children:[" ",a.action]})]},s)),i.jsxs("div",{className:"bg-blue-100 p-3 rounded border border-blue-200",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:" Thng tin h thng"}),i.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[i.jsxs("p",{children:[" API URL: ","https://hoc.io.vn/api"]}),i.jsxs("p",{children:[" Environment: ","production"]}),i.jsxs("p",{children:[" User Agent: ",navigator.userAgent.substring(0,50),"..."]}),i.jsxs("p",{children:[" Timestamp: ",new Date().toLocaleString()]})]})]})]})]})},tp=class tp{static getStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e)}catch(e){console.error("Error reading storage:",e)}return{geminiKeys:[],version:3}}static saveStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(t){console.error("Error saving storage:",t)}}static addKey(e,t){const n=this.getStorage();if(n.geminiKeys.some(o=>o.key===e))throw new Error("Key ny  tn ti!");const s={key:e,name:t||`Key ${n.geminiKeys.length+1}`,addedAt:new Date().toISOString()};n.geminiKeys.push(s),this.saveStorage(n),console.log(`  thm key: ${s.name} (sn sng s dng)`)}static resetKeyFailure(e){this.clearKeyFailure(e)}static resetAllKeyFailures(){const e=this.getStorage();let t=0;return e.geminiKeys.forEach(n=>{n.failedAt&&(n.failedAt=void 0,t++)}),t>0&&(this.saveStorage(e),console.log(`  reset ${t} keys v trng thi sn sng`)),t}static getNextKey(){const e=this.getStorage(),t=Date.now(),n=this.COOLDOWN_MINUTES*60*1e3,a=e.geminiKeys.filter(o=>{if(!o.failedAt)return!0;const l=new Date(o.failedAt).getTime();return t-l>n});if(a.length===0)return null;a.sort((o,l)=>{const u=!o.lastUsed,c=!l.lastUsed;if(u&&!c)return-1;if(!u&&c)return 1;const d=!o.failedAt,h=!l.failedAt;if(d&&!h)return-1;if(!d&&h)return 1;const g=o.lastUsed?new Date(o.lastUsed).getTime():0,m=l.lastUsed?new Date(l.lastUsed).getTime():0;return g-m});const s=a[0];return s.failedAt&&this.clearKeyFailure(s.key),s.key}static markKeySuccess(e){this.markKeyUsed(e)}static getTimeUntilNextKeyAvailable(){const e=this.getStorage();if(e.geminiKeys.length===0)return 0;const t=Date.now(),n=this.COOLDOWN_MINUTES*60*1e3;if(e.geminiKeys.some(o=>{if(!o.failedAt)return!0;const l=new Date(o.failedAt).getTime();return t-l>n}))return 0;let s=1/0;for(const o of e.geminiKeys)if(o.failedAt){const l=new Date(o.failedAt).getTime(),u=n-(t-l);u>0&&u<s&&(s=u)}return s===1/0?0:s}static markKeyUsed(e){const t=this.getStorage(),n=t.geminiKeys.find(a=>a.key===e);n&&(n.lastUsed=new Date().toISOString(),this.saveStorage(t))}static markKeyFailed(e){const t=this.getStorage(),n=t.geminiKeys.find(a=>a.key===e);n&&(n.failedAt=new Date().toISOString(),this.saveStorage(t),console.log(` Key "${n.name}" b rate limit, ngh ${this.COOLDOWN_MINUTES} pht`))}static clearKeyFailure(e){const t=this.getStorage(),n=t.geminiKeys.find(a=>a.key===e);n&&(n.failedAt=void 0,this.saveStorage(t),console.log(` Key "${n.name}"  sn sng li`))}static getAllKeys(){return this.getStorage().geminiKeys}static removeKey(e){const t=this.getStorage();t.geminiKeys=t.geminiKeys.filter(n=>n.key!==e),this.saveStorage(t),console.log("  xa key")}static clearAll(){localStorage.removeItem(this.STORAGE_KEY),console.log("  xa tt c keys")}static hasKeys(){return this.getStorage().geminiKeys.length>0}static maskKey(e){return e.length<12?"***":e.substring(0,6)+"..."+e.substring(e.length-4)}static validateKeyFormat(e){return typeof e=="string"&&e.trim().length>=20}static getStats(){const e=this.getStorage(),t=Date.now(),n=this.COOLDOWN_MINUTES*60*1e3;let a=0,s=0;for(const o of e.geminiKeys)if(!o.failedAt)a++;else{const l=new Date(o.failedAt).getTime();t-l>n?a++:s++}return{total:e.geminiKeys.length,available:a,cooldown:s}}};tp.STORAGE_KEY="gemini_keys_v3",tp.COOLDOWN_MINUTES=2;let Cn=tp;const gge=["gemini-2.0-flash-exp","gemini-1.5-flash","gemini-1.5-flash-8b","gemini-1.5-pro"],xge=`Bn l gio vin Ton THPT chuyn nghip  Vit Nam. To cu hi Ton hc cht lng cao bng ting Vit vi 3 dng:

- MCQ (trc nghim 1 p n): correct_option l 'A', 'B', 'C', hoc 'D'
- MSQ (ng/sai nhiu p n): correct_option l 'A,C' (cch nhau du phy)
- SA (tr li ngn): khng c option_a/b/c/d, correct_option l p n dng s hoc chui

**YU CU QUAN TRNG V HNH NH V  TH:**
- Cng thc ton phi dng LaTeX: $y = x^2$ hoc $\\int_0^1 x\\,dx$
- **HNH HC**: V hnh hc (tam gic, t gic, ng trn, khi hnh,...) bng code TikZ trong LaTeX
- ** TH HM S**: V  th hm s (parabol, hyperbol, ng thng,...) bng code TikZ
- **BNG BIN THIN**: V bng bin thin, bng xt du bng code TikZ hoc tabular LaTeX

V d code TikZ cho hnh hc:
\\begin{tikzpicture}
  \\draw (0,0) -- (2,0) -- (1,1.732) -- cycle;
  \\node at (0,-0.3) {A};
  \\node at (2,-0.3) {B};
  \\node at (1,2) {C};
\\end{tikzpicture}

V d code TikZ cho  th:
\\begin{tikzpicture}
  \\draw[->] (-2,0) -- (2,0) node[right] {\\$x\\$};
  \\draw[->] (0,-1) -- (0,3) node[above] {\\$y\\$};
  \\draw[domain=-1.5:1.5,smooth,variable=\\x,blue] plot ({\\x},{\\x*\\x});
\\end{tikzpicture}

Tr v JSON:
{
  "title": "Tiu ",
  "questions": [
    {
      "id": "mcq1",
      "type": "mcq",
      "question": "Cu hi...",
      "option_a": "A",
      "option_b": "B",
      "option_c": "C",
      "option_d": "D",
      "correct_option": "A",
      "explanation": "Li gii..."
    }
  ]
}`;async function vge(r,e,t){console.log(` [Model Try] ang gi model: ${e}...`);const n=`https://generativelanguage.googleapis.com/v1beta/models/${e}:generateContent`;try{const a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":r},body:JSON.stringify({contents:[{parts:[{text:xge+`

`+t}]}],generationConfig:{temperature:.7,maxOutputTokens:8192,responseMimeType:"application/json"}})}),s=a.status;if(!a.ok){const c=(await a.json().catch(()=>({error:{message:a.statusText}}))).error?.message||a.statusText;console.log(` Model ${e} li [Status: ${s}]: ${c.substring(0,150)}`);const d=new Error(c);throw d.status=s,d}const o=await a.json(),l=o.candidates?.[0]?.content?.parts?.[0]?.text?.trim();return l?(JSON.parse(l),console.log(` [Model Success] ${e} tr v kt qu.`),l):(console.log(` [Model Empty] ${e} tr v kt qu trng (c th b Safety Filter).`),o.candidates?.[0]?.finishReason&&console.log(` [Safety Info] L do dng: ${o.candidates[0].finishReason}`),null)}catch(a){const s=a instanceof Error?a.message:String(a),o=a?.status;throw console.log(` Model ${e} li [Status: ${o}]: ${s.substring(0,150)}`),a}}function eu(r){return new Promise(e=>setTimeout(e,r))}async function yge(r,e){let t=!1;const n=[];console.log(` [Key Start] ang s dng key: ${r.substring(0,8)}...`);for(const s of gge)try{const o=await vge(r,s,e);if(o)return Cn.markKeySuccess(r),o;const l=` [Model Skip] ${s}: Tr v kt qu rng (Safety?)`;console.log(l),n.push(l)}catch(o){const l=o instanceof Error?o.message:String(o),u=o?.status,c=l.length>100?l.substring(0,100)+"...":l,d=`[${s}] Status: ${u}, Error: ${c}`;if(console.log(` ${d}`),n.push(d),u===401||u===403||l.toLowerCase().includes("invalid")||l.toLowerCase().includes("api_key_invalid"))throw new Error("INVALID_KEY");if(u===429||l.toLowerCase().includes("quota")||l.toLowerCase().includes("limit")||l.toLowerCase().includes("resource has been exhausted")){t=!0;continue}continue}if(t){const s=JSON.stringify(n,null,2);throw new Error(`RATE_LIMIT_DETAILS::${s}`)}const a=JSON.stringify(n,null,2);throw new Error(`ALL_MODELS_FAILED::${a}`)}async function P5(r){try{if(!Cn.hasKeys())return JSON.stringify({error:"Cha c API key",details:"Vui lng thm t nht 1 API key Gemini trong Ci t AI"},null,2);const e=10;let t=0,n=!1;const a=new Set;for(;t<e;){const s=Cn.getNextKey();if(!s){const l=Cn.getTimeUntilNextKeyAvailable();if(l>0&&l<=3e4&&!n){console.log(` Ch ${Math.ceil(l/1e3)} giy  key sn sng...`),await eu(l+500),n=!0,a.clear();continue}const u=Cn.getStats(),c=Math.ceil(l/1e3);return JSON.stringify({error:"Tt c keys u b rate limit",details:`C ${u.total} keys, ${u.cooldown} keys ang ngh. Vui lng th li sau ${c>0?c:120} giy hoc thm key mi.`},null,2)}if(a.has(s)){console.log(` Key ${s.substring(0,8)}...  th, b qua`),t++;continue}a.add(s);const o=s.substring(0,8)+"...";console.log(` Th key ${o} (ln ${t+1}/${e})...`),t>0&&await eu(500);try{const l=await yge(s,r);if(l)return console.log(` To cu hi thnh cng vi key ${o}`),JSON.stringify(JSON.parse(l),null,2);console.log(" Key ny khng hot ng vi bt k model no, th key khc..."),t++,await eu(100)}catch(l){const u=l instanceof Error?l.message:"";if(console.log(` Li vi key ${o}: ${u}`),u==="RATE_LIMIT"||u.startsWith("RATE_LIMIT_DETAILS::")){const c=u.startsWith("RATE_LIMIT_DETAILS::")?u.split("RATE_LIMIT_DETAILS::")[1]:null;c&&console.log(" [Fail Report] Chi tit li tng model:",c),Cn.markKeyFailed(s),t++,await eu(200);continue}if(u==="INVALID_KEY"){if(console.log(" Key khng hp l. Th key tip theo..."),t++,t<e){await eu(100);continue}return JSON.stringify({error:"API Key khng hp l",details:"Cc API key  th u khng hp l. Vui lng kim tra li trong Ci t AI."},null,2)}console.log(` Li khc vi key ${o}, th key tip theo...`),t++,await eu(100);continue}}return JSON.stringify({error:"Khng th to cu hi",details:` th ${e} keys nhng khng thnh cng. Vui lng kim tra li keys hoc th li sau.`},null,2)}catch(e){console.error("Li generate:",e);const t=e instanceof Error?e.message.toLowerCase():"";return t.includes("network")||t.includes("fetch")?JSON.stringify({error:"Li kt ni",details:"Khng th kt ni n Gemini API. Vui lng kim tra internet."},null,2):JSON.stringify({error:"Li khng xc nh",details:e instanceof Error?e.message:"Vui lng th li"},null,2)}}const bge=()=>{const{user:r}=Yr(),e=Vn(),[t,n]=he.useState("prompts"),[a,s]=he.useState(""),[o,l]=he.useState(""),[u,c]=he.useState(!1),[d,h]=he.useState(!1),[g,m]=he.useState(""),[v,x]=he.useState(""),[b,y]=he.useState(""),[S,_]=he.useState(!1),[N,j]=he.useState(""),[E,T]=he.useState(""),[F,A]=he.useState([]),[R,I]=he.useState(!1),[O,U]=he.useState(""),D=`To  thi (kim tra) mn Ton THPT vi 22 cu hi ton din.

Yu cu chuyn mn:
- Bao gm tt c ch : Hm s, M-Logarit, Lng gic, Tch phn, S phc, Hnh hc khng gian
- S dng k hiu LaTeX chnh xc cho cng thc ton hc
- Hnh v  th, bng bin thin, hnh hc khng gian phi s dng TikZ code
- Kin thc phi chnh xc, ph hp chng trnh THPT
-  kh: 40% d, 30% trung bnh, 30% kh

Cu trc cu hi:
- 12 cu MCQ (trc nghim 1 p n)
- 4 cu MSQ (trc nghim nhiu p n)
- 6 cu SA (cu hi thc t)

nh dng JSON:
{
  "title": " thi hc k - Ton THPT",
  "description": " thi hc k mn Ton THPT - Tng hp kin thc",
  "time_limit_minutes": 90,
  "questions": [
    {
      "type": "mcq",
      "question": "y l cu hi mu s 1 $x^2-x-2=0$",
      "option_a": "p n A",
      "option_b": "p n B",
      "option_c": "p n C",
      "option_d": "p n D",
      "correct_option": "A",
      "explanation": "Gii thch cho cu tr li ng",
      "difficulty_level": "easy",
      "is_dynamic": false
    },
    {
      "type": "mcq",
      "question": "y l cu hi mu s 2 ng a=!a! = $!a!x^2+!b!x-!c!=0$",
      "option_a": "p n A",
      "option_b": "p n B",
      "option_c": "p n C",
      "option_d": "p n D",
      "correct_option": "D",
      "explanation": "Gii thch cho cu tr li ng",
      "difficulty_level": "medium",
      "is_dynamic": true
    },
    {
      "type": "msq",
      "question": "y l cu hi mu s 1 true false",
      "option_a": "p n A",
      "option_b": "p n B",
      "option_c": "p n C",
      "option_d": "p n D",
      "correct_option": "A,C",
      "explanation": "Gii thch cho cu tr li ng",
      "difficulty_level": "medium",
      "is_dynamic": false
    },
    {
      "type": "sa",
      "question": "y l cu hi tr li ngn mu",
      "correct_option": "p n ng",
      "explanation": "Gii thch cho cu tr li ng",
      "difficulty_level": "hard",
      "is_dynamic": false
    }
  ]
}

Gii thch cu hi ng:
- Nu yu cu cu hi ng th cc s dng bin !a! l sinh s ngu nhin t -10 n 10
- !a:1:23! l sinh s nguyn t 1 n 23
- !a#0! sinh s nguyn khc 0
- Tnh ton: {tinh: biu_thc} - V d: {tinh: !a! + !b!} l tnh a+b
- Chn phn t trong nhm l !b(2,4,6)! l b ly phn t ngu nhin 2 hoc 4 hoc 6
- iu kin: nu !a! >0 th dng, m l iff(!a!>0, dng,m)`,H=[{id:"unified-exam",title:" thi tng hp",icon:"",color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-500",prompt:D}],P=()=>({mcq_biet:0,mcq_hieu:0,mcq_vd:0,msq_biet:0,msq_hieu:0,msq_vd:0,sa_biet:0,sa_hieu:0,sa_vd:0}),G=async()=>{I(!0),U("");try{const ae=await Bt.getFullHierarchy(),z=ae.subjects.map(re=>{const ne=ae.chapters.filter(ie=>ie.subject_id===re.id);return{id:re.id.toString(),name:re.name,chapters:ne.map(ie=>{const oe=ae.lessons.filter(ye=>ye.chapter_id===ie.id);return{id:ie.id.toString(),name:ie.name,lessons:oe.map(ye=>({id:ye.id.toString(),name:ye.name,matrix:P()}))}})}}).sort((re,ne)=>{const ie=M=>{const ge=M.match(/(\d+)/);return ge?parseInt(ge[1]):0},oe=ie(re.name);return ie(ne.name)-oe});A(z)}catch(ae){console.error("Error loading hierarchy for matrix:",ae),U("Khng th ti cu trc mn hc. Vui lng th li sau."),A([{id:"toan-12",name:"Ton 12 (Fallback)",chapters:[]}])}finally{I(!1)}};he.useEffect(()=>{!b&&D&&y(D),G()},[]);const ue=ae=>{s(ae),y(ae),navigator.clipboard.writeText(ae).then(()=>{alert("  copy prompt vo clipboard! Bn c th dn vo Gemini.")})},le=(ae,W,z,re,ne)=>{A(ie=>ie.map(oe=>oe.id!==ae?oe:{...oe,chapters:oe.chapters.map(ye=>ye.id!==W?ye:{...ye,lessons:ye.lessons.map(M=>M.id!==z?M:{...M,matrix:{...M.matrix,[re]:Math.max(0,ne)}})})}))},pe=()=>{let ae=0;const W={mcq:{biet:0,hieu:0,vd:0,total:0},msq:{biet:0,hieu:0,vd:0,total:0},sa:{biet:0,hieu:0,vd:0,total:0}};return F.forEach(z=>{z.chapters.forEach(re=>{re.lessons.forEach(ne=>{const ie=ne.matrix;W.mcq.biet+=ie.mcq_biet,W.mcq.hieu+=ie.mcq_hieu,W.mcq.vd+=ie.mcq_vd,W.msq.biet+=ie.msq_biet,W.msq.hieu+=ie.msq_hieu,W.msq.vd+=ie.msq_vd,W.sa.biet+=ie.sa_biet,W.sa.hieu+=ie.sa_hieu,W.sa.vd+=ie.sa_vd})})}),W.mcq.total=W.mcq.biet+W.mcq.hieu+W.mcq.vd,W.msq.total=W.msq.biet+W.msq.hieu+W.msq.vd,W.sa.total=W.sa.biet+W.sa.hieu+W.sa.vd,ae=W.mcq.total+W.msq.total+W.sa.total,{total:ae,breakdown:W}},de=()=>{const{total:ae,breakdown:W}=pe();if(ae===0)return"";let z=`To  thi (kim tra) mn Ton THPT vi ${ae} cu hi theo ma trn  thi sau:

`;return z+=`**MA TRN  THI:**

`,F.forEach(re=>{z+=`**${re.name}:**
`,re.chapters.forEach(ne=>{z+=`  ${ne.name}:
`,ne.lessons.forEach(ie=>{const oe=ie.matrix;oe.mcq_biet+oe.mcq_hieu+oe.mcq_vd+oe.msq_biet+oe.msq_hieu+oe.msq_vd+oe.sa_biet+oe.sa_hieu+oe.sa_vd>0&&(z+=`    - ${ie.name}:
`,oe.mcq_biet+oe.mcq_hieu+oe.mcq_vd>0&&(z+=`      + MCQ (Nhiu la chn): ${oe.mcq_biet} cu Bit, ${oe.mcq_hieu} cu Hiu, ${oe.mcq_vd} cu Vn dng
`),oe.msq_biet+oe.msq_hieu+oe.msq_vd>0&&(z+=`      + MSQ (ng-Sai nhiu p n): ${oe.msq_biet} cu Bit, ${oe.msq_hieu} cu Hiu, ${oe.msq_vd} cu Vn dng
`),oe.sa_biet+oe.sa_hieu+oe.sa_vd>0&&(z+=`      + SA (Tr li ngn): ${oe.sa_biet} cu Bit, ${oe.sa_hieu} cu Hiu, ${oe.sa_vd} cu Vn dng
`))})})}),z+=`
**TNG KT:**
`,z+=`- MCQ (Nhiu la chn): ${W.mcq.total} cu (${W.mcq.biet} Bit, ${W.mcq.hieu} Hiu, ${W.mcq.vd} Vn dng)
`,z+=`- MSQ (ng-Sai nhiu p n): ${W.msq.total} cu (${W.msq.biet} Bit, ${W.msq.hieu} Hiu, ${W.msq.vd} Vn dng)
`,z+=`- SA (Tr li ngn): ${W.sa.total} cu (${W.sa.biet} Bit, ${W.sa.hieu} Hiu, ${W.sa.vd} Vn dng)
`,z+=`- Tng: ${ae} cu hi

`,z+=`**YU CU CHUYN MN:**
`,z+=`- S dng k hiu LaTeX chnh xc cho cng thc ton hc
`,z+=`- Hnh v  th, bng bin thin, hnh hc khng gian phi s dng TikZ code
`,z+=`- Kin thc phi chnh xc, ph hp chng trnh THPT
`,z+=`- Mc  Bit: cu hi nhn bit, ghi nh kin thc c bn
`,z+=`- Mc  Hiu: cu hi yu cu gii thch, so snh, phn tch
`,z+=`- Mc  Vn dng: cu hi yu cu p dng kin thc vo tnh hung mi, gii quyt vn  thc t

`,z+=`**NH DNG JSON:**
`,z+=D.split("nh dng JSON:")[1],z},L=async()=>{const{total:ae}=pe();if(ae===0){m(" Vui lng nhp t nht 1 cu hi vo ma trn");return}const W="AIzaSyDiQFsdG81OrOaNas8q5Bspm8YoD2Ukon0";I(!0),m(""),x("");try{const z=de();let re=!1;if(!Cn.getAllKeys().some(ye=>ye.key===W))try{Cn.addKey(W,"Env Key (Temporary)"),re=!0}catch{}const oe=await P5(z);if(x(oe),re&&W)try{Cn.removeKey(W)}catch{}try{const ye=JSON.parse(oe);if(ye.error){const M=ye.details||ye.error;m(M);const ge=M.toLowerCase();(ge.includes("quota")||ge.includes("token")||ge.includes("exceeded")||ge.includes("ht")||ge.includes("limit"))&&_(!0)}else m("")}catch{m(" Kt qu khng phi JSON hp l. Vui lng kim tra li.")}}catch(z){console.error(" Li generate:",z);const re=z.message||"C li xy ra khi to  thi. Vui lng th li.";m(re);const ne=re.toLowerCase();(ne.includes("quota")||ne.includes("token")||ne.includes("exceeded")||ne.includes("ht"))&&_(!0)}finally{I(!1)}},X=()=>{if(!N.trim()){T(" Vui lng nhp API key");return}if(!Cn.validateKeyFormat(N.trim())){T(" API key khng ng nh dng. Key phi c t nht 20 k t.");return}try{Cn.getAllKeys().some(z=>z.key===N.trim())?(Cn.resetKeyFailure(N.trim()),console.log(" Key  tn ti,  reset trng thi")):(Cn.addKey(N.trim(),"Key c nhn"),console.log("  thm key mi, key ny s c u tin s dng")),_(!1),j(""),T(""),b.trim()?V():t==="matrix"&&L()}catch(ae){T(ae.message||" Khng th lu API key. Vui lng th li.")}},V=async()=>{if(!b.trim()){m(" Vui lng nhp hoc chn prompt  to  thi");return}const ae="AIzaSyDiQFsdG81OrOaNas8q5Bspm8YoD2Ukon0";h(!0),m(""),x("");try{let W=!1;if(!Cn.getAllKeys().some(ie=>ie.key===ae))try{Cn.addKey(ae,"Env Key (Temporary)"),W=!0}catch{}const ne=await P5(b);if(x(ne),W&&ae)try{Cn.removeKey(ae)}catch{}try{const ie=JSON.parse(ne);if(ie.error){const oe=ie.details||ie.error;m(oe);const ye=oe.toLowerCase();(ye.includes("quota")||ye.includes("token")||ye.includes("exceeded")||ye.includes("ht")||ye.includes("limit"))&&_(!0)}else m("")}catch{m(" Kt qu khng phi JSON hp l. Vui lng kim tra li.")}}catch(W){console.error(" Li generate:",W);const z=W.message||"C li xy ra khi to  thi. Vui lng th li.";m(z);const re=z.toLowerCase();(re.includes("quota")||re.includes("token")||re.includes("exceeded")||re.includes("ht"))&&_(!0)}finally{h(!1)}},se=async()=>{if(!o.trim()){m(" Vui lng nhp JSON t Gemini");return}if(!r){m(" Vui lng ng nhp  to  thi");return}h(!0),m("");try{const ae=JSON.parse(o);if(!ae.title||!ae.questions||!Array.isArray(ae.questions))throw new Error('JSON khng ng nh dng. Cn c "title" v "questions"');if(ae.questions.length===0)throw new Error("Cn c t nht 1 cu hi");const W=[];for(let oe=0;oe<ae.questions.length;oe++){const ye=ae.questions[oe];if(!ye.type||!ye.question||!ye.correct_option)throw new Error(`Cu hi ${oe+1} thiu thng tin bt buc (type, question, correct_option)`);if((ye.type==="mcq"||ye.type==="msq")&&(!ye.option_a||!ye.option_b||!ye.option_c||!ye.option_d))throw new Error(`Cu hi ${oe+1} (${ye.type.toUpperCase()}) thiu cc p n A, B, C, D`);const M={id:`import_${Date.now()}_${oe}_${Math.random().toString(36).substr(2,9)}`,type:ye.type,question:ye.question,option_a:ye.option_a||"",option_b:ye.option_b||"",option_c:ye.option_c||"",option_d:ye.option_d||"",correct_option:ye.correct_option,explanation:ye.explanation||"",difficulty:ye.difficulty_level||"medium",isDynamic:ye.is_dynamic||!1,dynamic_variables:ye.is_dynamic?{}:void 0,created_at:new Date().toISOString()};W.push(M)}console.log(" To  thi vi QuizManagementService...",{title:ae.title,questionCount:W.length,userId:r.id,userRole:r.role,userEmail:r.email}),console.log(" Creating quiz via MySQL API...",{userRole:r.role,title:ae.title,questionCount:W.length});const{apiService:z}=await gw(async()=>{const{apiService:oe}=await Promise.resolve().then(()=>BF);return{apiService:oe}},void 0,import.meta.url),re=await z.createQuiz({title:ae.title,questions:W.map(oe=>({type:oe.type,question:oe.question,option_a:oe.option_a,option_b:oe.option_b,option_c:oe.option_c,option_d:oe.option_d,correct_option:oe.correct_option,explanation:oe.explanation,difficulty_level:oe.difficulty,is_dynamic:oe.isDynamic||!1})),time_limit_minutes:ae.time_limit_minutes||0,status:"published"});if(!re)throw new Error("MySQL API returned empty result");const ne={success:!0,data:{...re,slug:re.slug||re.title.toLowerCase().replace(/[^a-z0-9]+/g,"-")}};console.log(" Quiz created successfully in MySQL:",ne.data);const ie=`  to thnh cng  thi: "${ae.title}" vi ${W.length} cu hi!

  lu vo MySQL database
 Link  thi: ${window.location.origin}/#/online-exam/${ne.data.slug}`;alert(ie),l(""),c(!1),e(`/online-exam/${ne.data.slug}`)}catch(ae){console.error(" Li to  thi:",ae);let W=" Li: ";ae.message?.includes("Khng th kt ni n server")?(W+="Khng th kt ni n server. ",W+="Vui lng kim tra kt ni mng v th li."):ae.message?.includes("403")||ae.message?.includes("Forbidden")?(W+="Bn khng c quyn to  thi trn server. ",W+=" thi s c lu trong Local Storage."):ae.message?.includes("teacher")?(W+="Cn c quyn gio vin hoc admin  to  thi trn server. ",W+=" thi s c lu trong Local Storage."):W+=ae.message||ae,r&&(W+=`

Thng tin debug:`,W+=`
- User: ${r.email}`,W+=`
- Role: ${r.role}`,W+=`
- API URL: https://hoc.io.vn/api`),m(W)}finally{h(!1)}};return i.jsx("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-screen",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"To  thi vi Gemini AI"}),i.jsx("p",{className:"text-lg text-gray-600 max-w-4xl mx-auto",children:"Chn ch  to  thi: T ng vi API hoc Th cng vi Gemini"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-2 mb-8 flex gap-2",children:[i.jsx("button",{onClick:()=>n("prompts"),className:`flex-1 py-3 px-4 rounded-lg font-semibold transition-all ${t==="prompts"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" AI Prompts"}),i.jsx("button",{onClick:()=>n("matrix"),className:`flex-1 py-3 px-4 rounded-lg font-semibold transition-all ${t==="matrix"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" AI Ma Trn"}),i.jsx("button",{onClick:()=>n("manual"),className:`flex-1 py-3 px-4 rounded-lg font-semibold transition-all ${t==="manual"?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Th cng"})]}),t==="prompts"&&i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" To  thi t ng vi API"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:" Chn mu prompt hoc nhp ty chnh:"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:H.map(ae=>i.jsx("div",{onClick:()=>{y(ae.prompt),s(ae.prompt)},className:`bg-white rounded-lg p-4 border-2 cursor-pointer transition-all ${a===ae.prompt?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${ae.color} rounded-full flex items-center justify-center mx-auto mb-2`,children:i.jsx("span",{className:"text-2xl text-white",children:ae.icon})}),i.jsx("h4",{className:"text-sm font-bold text-gray-900",children:ae.title})]})},ae.id))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prompt ty chnh (c th chnh sa):"}),i.jsx("textarea",{value:b,onChange:ae=>y(ae.target.value),placeholder:"Nhp hoc chn prompt t mu bn trn...",className:"w-full h-64 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),g&&i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:[i.jsx("p",{className:"font-semibold",children:g}),(g.toLowerCase().includes("quota")||g.toLowerCase().includes("token")||g.toLowerCase().includes("exceeded")||g.toLowerCase().includes("ht")||g.toLowerCase().includes("api key"))&&b&&i.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-300 rounded-lg",children:[i.jsx("p",{className:"font-semibold text-yellow-800 mb-2",children:" Gii php thay th:"}),i.jsxs("p",{className:"text-yellow-700 text-xs mb-3",children:["Copy prompt bn di, dn vo ",i.jsx("a",{href:"https://gemini.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Gemini"}),', ly JSON kt qu v dn vo tab " Th cng"  to  thi.']}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{readOnly:!0,value:b,className:"w-full h-48 px-3 py-2 border border-yellow-300 rounded-lg font-mono text-xs bg-white"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b),alert("  copy prompt vo clipboard!")},className:"absolute top-2 right-2 px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors",children:" Copy Prompt"})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("a",{href:"https://gemini.google.com",target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-blue-600 text-white text-center rounded-lg font-semibold hover:bg-blue-700 transition-colors text-xs",children:" M Gemini"}),i.jsx("button",{onClick:()=>n("manual"),className:"flex-1 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors text-xs",children:" Chuyn sang tab Th cng"})]})]})]})}),i.jsxs("button",{onClick:V,disabled:d||!b.trim()||!1,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[d&&i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"ang to  thi...":" To  thi t ng"]}),v&&!g&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"  to JSON thnh cng!"}),i.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Xem li JSON bn di, sau  nhn nt  to  thi online."}),i.jsxs("details",{className:"text-sm mb-4",children:[i.jsx("summary",{className:"cursor-pointer text-green-800 mb-2 font-semibold",children:" Xem JSON kt qu"}),i.jsx("pre",{className:"mt-2 p-3 bg-white rounded border overflow-auto max-h-64 text-xs",children:v})]}),i.jsxs("button",{onClick:async()=>{l(v),await se()},disabled:d,className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[d&&i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"ang to  thi...":" To  thi online t JSON ny"]})]})]}),t==="matrix"&&i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" To  thi t Ma Trn"}),R?i.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti cu trc mn hc..."})]}):O?i.jsxs("div",{className:"p-4 mb-6 bg-red-50 border border-red-200 rounded-lg text-red-600",children:[i.jsx("p",{children:O}),i.jsx("button",{onClick:G,className:"mt-2 text-sm font-semibold underline",children:"Th li"})]}):i.jsx("div",{className:"mb-6 overflow-x-auto",children:i.jsx("div",{className:"min-w-full",children:i.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-sm",children:[i.jsxs("thead",{children:[i.jsxs("tr",{className:"bg-gray-100",children:[i.jsx("th",{className:"border border-gray-300 p-2 text-left font-semibold sticky left-0 bg-gray-100 z-10 min-w-[250px]",children:"Chng/Bi hc"}),i.jsx("th",{colSpan:3,className:"border border-gray-300 p-2 text-center font-semibold bg-blue-50",children:"MCQ (Nhiu la chn)"}),i.jsx("th",{colSpan:3,className:"border border-gray-300 p-2 text-center font-semibold bg-green-50",children:"MSQ (ng-Sai)"}),i.jsx("th",{colSpan:3,className:"border border-gray-300 p-2 text-center font-semibold bg-yellow-50",children:"SA (Tr li ngn)"})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("th",{className:"border border-gray-300 p-2 sticky left-0 bg-gray-50 z-10"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-blue-50",children:"Bit"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-blue-50",children:"Hiu"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-blue-50",children:"VD"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-green-50",children:"Bit"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-green-50",children:"Hiu"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-green-50",children:"VD"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-yellow-50",children:"Bit"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-yellow-50",children:"Hiu"}),i.jsx("th",{className:"border border-gray-300 p-1 text-xs bg-yellow-50",children:"VD"})]})]}),i.jsxs("tbody",{children:[F.map(ae=>i.jsxs(Na.Fragment,{children:[i.jsx("tr",{className:"bg-red-50 font-bold text-red-700 text-base",children:i.jsx("td",{colSpan:10,className:"border border-red-200 p-3",children:ae.name})}),ae.chapters.map(W=>i.jsxs(Na.Fragment,{children:[i.jsx("tr",{className:"bg-blue-50/50 font-semibold text-blue-700",children:i.jsx("td",{colSpan:10,className:"border border-blue-100 p-2 pl-6",children:W.name})}),W.lessons.map(z=>i.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[i.jsx("td",{className:"border border-gray-200 p-2 pl-10 sticky left-0 bg-white z-5 font-medium text-green-700",children:z.name}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.mcq_biet,onChange:re=>le(ae.id,W.id,z.id,"mcq_biet",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-blue-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.mcq_hieu,onChange:re=>le(ae.id,W.id,z.id,"mcq_hieu",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-blue-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.mcq_vd,onChange:re=>le(ae.id,W.id,z.id,"mcq_vd",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-blue-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.msq_biet,onChange:re=>le(ae.id,W.id,z.id,"msq_biet",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-green-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.msq_hieu,onChange:re=>le(ae.id,W.id,z.id,"msq_hieu",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-green-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.msq_vd,onChange:re=>le(ae.id,W.id,z.id,"msq_vd",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-green-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.sa_biet,onChange:re=>le(ae.id,W.id,z.id,"sa_biet",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-yellow-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.sa_hieu,onChange:re=>le(ae.id,W.id,z.id,"sa_hieu",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-yellow-500"})}),i.jsx("td",{className:"border border-gray-300 p-1",children:i.jsx("input",{type:"number",min:"0",value:z.matrix.sa_vd,onChange:re=>le(ae.id,W.id,z.id,"sa_vd",parseInt(re.target.value)||0),className:"w-12 text-center border-0 focus:ring-1 focus:ring-yellow-500"})})]},z.id))]},W.id))]},ae.id)),i.jsxs("tr",{className:"bg-blue-100 font-bold",children:[i.jsx("td",{className:"border border-gray-300 p-2 sticky left-0 bg-blue-100 z-10",children:"TNG"}),(()=>{const{breakdown:ae}=pe();return i.jsxs(i.Fragment,{children:[i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.mcq.biet}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.mcq.hieu}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.mcq.vd}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.msq.biet}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.msq.hieu}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.msq.vd}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.sa.biet}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.sa.hieu}),i.jsx("td",{className:"border border-gray-300 p-2 text-center",children:ae.sa.vd})]})})()]})]})]})})}),(()=>{const{total:ae,breakdown:W}=pe();return i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Tng kt:"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:["MCQ: ",W.mcq.total," cu"]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["(",W.mcq.biet," Bit, ",W.mcq.hieu," Hiu, ",W.mcq.vd," VD)"]})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:["MSQ: ",W.msq.total," cu"]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["(",W.msq.biet," Bit, ",W.msq.hieu," Hiu, ",W.msq.vd," VD)"]})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:["SA: ",W.sa.total," cu"]}),i.jsxs("p",{className:"text-xs text-gray-600",children:["(",W.sa.biet," Bit, ",W.sa.hieu," Hiu, ",W.sa.vd," VD)"]})]}),i.jsx("div",{children:i.jsxs("p",{className:"font-semibold text-lg",children:["Tng: ",ae," cu"]})})]})]})})(),g&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:[i.jsx("p",{className:"font-semibold",children:g.split("::")[0].replace("RATE_LIMIT_DETAILS","Ht Quota (Rate Limit)").replace("ALL_MODELS_FAILED","Li tt c models")}),(g.toLowerCase().includes("quota")||g.toLowerCase().includes("token")||g.toLowerCase().includes("exceeded")||g.toLowerCase().includes("ht")||g.toLowerCase().includes("api key"))&&i.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-300 rounded-lg",children:[i.jsx("p",{className:"font-semibold text-yellow-800 mb-2",children:" Gii php thay th:"}),i.jsxs("p",{className:"text-yellow-700 text-xs mb-3",children:["Copy prompt bn di, dn vo ",i.jsx("a",{href:"https://gemini.google.com",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold",children:"Gemini"}),', ly JSON kt qu v dn vo tab " Th cng"  to  thi.']}),i.jsxs("div",{className:"relative",children:[i.jsx("textarea",{readOnly:!0,value:de(),className:"w-full h-48 px-3 py-2 border border-yellow-300 rounded-lg font-mono text-xs bg-white"}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(de()),alert("  copy prompt vo clipboard!")},className:"absolute top-2 right-2 px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors",children:" Copy Prompt"})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx("a",{href:"https://gemini.google.com",target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-blue-600 text-white text-center rounded-lg font-semibold hover:bg-blue-700 transition-colors text-xs",children:" M Gemini"}),i.jsx("button",{onClick:()=>n("manual"),className:"flex-1 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors text-xs",children:" Chuyn sang tab Th cng"})]})]}),g.includes("::")&&(()=>{try{const ae=JSON.parse(g.split("::")[1]);return i.jsxs("details",{className:"mt-2 text-xs",children:[i.jsx("summary",{className:"cursor-pointer font-semibold text-red-700 hover:text-red-800",children:" Xem chi tit li k thut"}),i.jsx("div",{className:"mt-1 pl-2 border-l-2 border-red-300 space-y-1 bg-white p-2 rounded",children:ae.map((W,z)=>i.jsx("div",{className:"font-mono text-gray-600 break-words",children:W},z))})]})}catch{return null}})()]}),(g.includes("ngh")||g.includes("limit")||g.includes("Quota"))&&i.jsx("button",{onClick:()=>{Cn.resetAllKeyFailures(),L()},className:"mt-2 text-xs font-semibold text-blue-600 hover:underline flex items-center gap-1",children:" Khi phc keys v th li ngay"})]}),i.jsxs("button",{onClick:L,disabled:R||pe().total===0,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[R&&i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),R?"ang to  thi...":" To  thi t Ma Trn"]}),v&&!g&&i.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"  to JSON thnh cng!"}),i.jsx("p",{className:"text-sm text-green-800 mb-3",children:"Xem li JSON bn di, sau  nhn nt  to  thi online."}),i.jsxs("details",{className:"text-sm mb-4",children:[i.jsx("summary",{className:"cursor-pointer text-green-800 mb-2 font-semibold",children:" Xem JSON kt qu"}),i.jsx("pre",{className:"mt-2 p-3 bg-white rounded border overflow-auto max-h-64 text-xs",children:v})]}),i.jsxs("button",{onClick:async()=>{l(v),await se()},disabled:d,className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[d&&i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"ang to  thi...":" To  thi online t JSON ny"]})]})]}),t==="manual"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" To  thi th cng"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Chn loi  thi, copy prompt vo Gemini c nhn, sau  dn JSON kt qu  to  thi online"}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" Hng dn s dng:"}),i.jsxs("div",{className:"text-sm text-blue-800 text-left",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Bc 1:"})," Chn loi  thi bn di  Prompt s c copy vo clipboard"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Bc 2:"})," M Gemini AI c nhn, dn prompt v chnh sa ch  c th"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Bc 3:"})," Copy JSON kt qu t Gemini"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Bc 4:"}),' Nhn "Import JSON t Gemini" v dn JSON  to  thi online']})]})]}),i.jsx("button",{onClick:()=>c(!0),className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:" Import JSON t Gemini"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:H.map(ae=>i.jsx("div",{onClick:()=>ue(ae.prompt),className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer border-2 border-transparent hover:border-gray-300 group",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${ae.color} rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform`,children:i.jsx("span",{className:"text-3xl text-white",children:ae.icon})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:ae.title}),i.jsx("div",{className:`text-sm font-semibold bg-gradient-to-r ${ae.color} bg-clip-text text-transparent`,children:"Click  copy prompt "})]})},ae.id))}),a&&i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg mb-8",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:" Prompt  chn ( copy vo clipboard)"}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:i.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono",children:a})}),i.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",i.jsx("strong",{children:"Lu :"})," Hy thay th [Nhp ch  c th] bng ch  bn mun khi dn vo Gemini"]})})]})]}),S&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Nhp API Key c nhn"}),i.jsx("button",{onClick:()=>{_(!1),j(""),T("")},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),i.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",i.jsx("strong",{children:"API key t .env  ht token/quota."})," Vui lng nhp API key Gemini c nhn ca bn  tip tc s dng."]})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key Gemini ca bn:"}),i.jsx("input",{type:"password",value:N,onChange:ae=>{j(ae.target.value),T("")},placeholder:"Nhp API key (dng AIza...)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),E&&i.jsx("p",{className:"mt-2 text-sm text-red-600",children:E})]}),i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Hng dn ly API Key:"}),i.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[i.jsxs("li",{children:["Truy cp ",i.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google AI Studio"})]}),i.jsx("li",{children:"ng nhp vi ti khon Google ca bn"}),i.jsx("li",{children:'Click "Create API Key"  "Create API key in new project"'}),i.jsx("li",{children:"Copy API key (dng AIza...)"}),i.jsx("li",{children:'Dn vo  trn v nhn "Lu"'})]}),i.jsx("p",{className:"mt-2 text-xs text-blue-700",children:" API key s c lu trong localStorage ca trnh duyt, ch bn mi c th thy."})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:X,disabled:!N.trim(),className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:" Lu v tip tc"}),i.jsx("button",{onClick:()=>{_(!1),j(""),T("")},className:"px-6 py-3 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:"Hy"})]})]})}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:" Import JSON t Gemini"}),i.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dn JSON t Gemini vo y:"}),i.jsx("textarea",{value:o,onChange:ae=>l(ae.target.value),placeholder:`Dn JSON t Gemini vo y. V d:
{
  "title": " kim tra 15 pht - Hm s",
  "description": " kim tra 15 pht mn Ton THPT",
  "time_limit_minutes": 15,
  "questions": [
    {
      "type": "mcq",
      "question": "Cho hm s $f(x) = x^3 - 3x + 1$. Hm s ng bin trn khong no?",
      "option_a": "$(-\\\\infty; -1) \\\\cup (1; +\\\\infty)$",
      "option_b": "$(-1; 1)$",
      "option_c": "$(-\\\\infty; 1)$",
      "option_d": "$(1; +\\\\infty)$",
      "correct_option": "A",
      "explanation": "Ta c $f'(x) = 3x^2 - 3$...",
      "difficulty_level": "medium",
      "is_dynamic": false
    },
    {
      "type": "msq",
      "question": "Nhng khng nh no ng?",
      "option_a": "Khng nh A",
      "option_b": "Khng nh B", 
      "option_c": "Khng nh C",
      "option_d": "Khng nh D",
      "correct_option": "A,B,C",
      "explanation": "Li gii...",
      "difficulty_level": "hard",
      "is_dynamic": false
    },
    {
      "type": "sa",
      "question": "Tnh f'(1) vi f(x) = !a!x^2 + !b!x",
      "correct_option": "{tinh: 2*!a! + !b!}",
      "explanation": "f'(x) = {tinh: 2*!a!}x + !b!",
      "difficulty_level": "easy",
      "is_dynamic": true
    }
  ]
}`,className:"w-full h-64 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"})]}),g&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:g}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:se,disabled:d||!o.trim(),className:"flex-1 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[d&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"ang to  thi...":" To  thi online"]}),i.jsx("button",{onClick:()=>{c(!1),m(""),l("")},className:"px-6 py-3 bg-gray-500 text-white rounded-lg font-semibold hover:bg-gray-600 transition-colors",children:"Hy"})]}),i.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" nh dng JSON yu cu:"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[i.jsxs("li",{children:[" ",i.jsx("code",{children:"title"}),": Tiu   thi"]}),i.jsxs("li",{children:[" ",i.jsx("code",{children:"description"}),": M t  thi"]}),i.jsxs("li",{children:[" ",i.jsx("code",{children:"time_limit_minutes"}),": Thi gian lm bi (pht)"]}),i.jsxs("li",{children:[" ",i.jsx("code",{children:"questions"}),": Mng cc cu hi"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"3 loi cu hi:"})]}),i.jsxs("li",{children:["- ",i.jsx("code",{children:"MCQ"}),": Trc nghim 1 p n (A/B/C/D)"]}),i.jsxs("li",{children:["- ",i.jsx("code",{children:"MSQ"}),": Trc nghim nhiu p n (A,B,C,D)"]}),i.jsxs("li",{children:["- ",i.jsx("code",{children:"SA"}),": Cu hi ng vi bin s (!a!, !b!, ","{"," tinh: ","}",")"]}),i.jsxs("li",{children:[" S dng LaTeX cho cng thc ton: ",i.jsx("code",{children:"$f(x) = x^2$"})]}),i.jsxs("li",{children:[" Escape k t c bit: ",i.jsx("code",{children:"\\\\\\\\"})," thay v ",i.jsx("code",{children:"\\"})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(mge,{})}),i.jsx("div",{className:"mt-4",children:i.jsx(pge,{})})]})})]})})},X0="saved_quizzes";class Y0{static getAllQuizzes(){try{const e=localStorage.getItem(X0);return e?JSON.parse(e):[]}catch{return[]}}static saveQuiz(e,t){const n=this.getAllQuizzes(),a=this.generateSlug(e),s=t.filter(c=>c.type==="mcq").length,o=t.filter(c=>c.type==="msq").length,l=t.filter(c=>c.type==="sa").length,u={id:this.generateId(),title:e,slug:a,questions:t,createdAt:new Date().toISOString(),questionCount:t.length,mcqCount:s,msqCount:o,saCount:l};return n.unshift(u),n.length>50&&n.splice(50),localStorage.setItem(X0,JSON.stringify(n)),u}static getQuizById(e){return this.getAllQuizzes().find(n=>n.id===e)||null}static deleteQuiz(e){const t=this.getAllQuizzes(),n=t.findIndex(a=>a.id===e);return n!==-1?(t.splice(n,1),localStorage.setItem(X0,JSON.stringify(t)),!0):!1}static clearAllQuizzes(){localStorage.removeItem(X0)}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}static generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim().substring(0,50)}}const wge=()=>{const r=Vn(),{user:e}=Yr(),[t,n]=he.useState([]),[a,s]=he.useState([]),[o,l]=he.useState(!0),[u,c]=he.useState(!1),[d,h]=he.useState(null);he.useEffect(()=>{let b=!0;const y=async()=>{if(!u)try{h(null);const _=Y0.getAllQuizzes();b&&n(_);try{const N=await st.get("/quizzes?status=published&per_page=100");if(console.log(" OnlineExamLandingPage - API response:",N),N.success&&b){let j=[];N.data&&Array.isArray(N.data)?j=N.data:N.data&&N.data.data&&Array.isArray(N.data.data)&&(j=N.data.data),console.log(" OnlineExamLandingPage - Parsed quizzes:",j),s(j)}else console.warn(" OnlineExamLandingPage - Invalid response format:",N),b&&s([])}catch(N){console.error(" Failed to load MySQL quizzes:",N),b&&s([])}}catch(_){console.error("Error loading quizzes:",_),b&&h("C li khi ti d liu. Vui lng th li.")}finally{b&&(l(!1),c(!0))}},S=setTimeout(()=>{b&&y()},50);return()=>{b=!1,clearTimeout(S)}},[]);const g=b=>{r("/exam",{state:{questions:b.questions,title:b.title,quizId:b.id}})},m=b=>{r(`/exam/${b.slug}`,{state:{title:b.title,quizId:b.id,mysqlQuizId:b.id,teacherName:b.created_by_name,password:b.password,time_limit:b.time_limit_minutes}})},v=(b,y)=>{y.stopPropagation(),window.confirm("Bn c chc chn mun xa  thi ny?")&&(Y0.deleteQuiz(b),n(Y0.getAllQuizzes()))},x=()=>{l(!0),h(null),c(!1),window.location.reload()};return o?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"ang ti d liu..."}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["MySQL Quizzes: ",a.length," | Saved Quizzes: ",t.length]}),i.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors text-sm",children:"Th li"})]})}):d?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[i.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[i.jsx("strong",{className:"font-bold",children:"Li!"}),i.jsx("p",{className:"block sm:inline mt-2",children:d})]}),i.jsx("button",{onClick:x,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:"Th li"})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-100",children:[i.jsx("section",{className:"py-10",children:i.jsx("div",{className:"container mx-auto px-4 text-center",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"mb-4",children:i.jsx(dm,{className:"w-16 h-16 text-green-600 mx-auto mb-4"})}),i.jsxs("h2",{className:"text-4xl sm:text-5xl font-bold text-gray-900 mb-4",children:["Thi Online ",i.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600",children:" Ton THPT "})]}),i.jsxs("p",{className:"text-lg text-gray-500 mb-5 leading-relaxed",children:["H thng thi trc tuyn hin i vi cng ngh chm im t ng",i.jsx("br",{}),i.jsx("span",{className:"text-green-500 font-semibold",children:"Nhanh chng  Chnh xc  Tin li"})]})]})})}),a.length>0&&i.jsx("section",{className:"py-16 bg-white/30 backdrop-blur-sm",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:[" thi t h thng (",a.length,")"]}),i.jsx("span",{className:"text-sm text-gray-500",children:"Qun l bi gio vin"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(b=>i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 cursor-pointer group",onClick:()=>m(b),children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-indigo-600 transition-colors line-clamp-2",children:b.title}),i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[" ",b.created_by_name||"Gio vin"]})}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:new Date(b.created_at).toLocaleString("vi-VN")}),i.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"H thng"})]})}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Tng s cu:"}),i.jsx("span",{className:"font-semibold text-gray-900",children:b.question_count})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[b.time_limit_minutes&&b.time_limit_minutes>0&&i.jsxs("div",{className:"flex items-center gap-1 bg-red-50 text-red-700 px-2 py-1 rounded-full text-xs font-medium border border-red-200",children:[i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{children:[b.time_limit_minutes," pht"]})]}),b.password&&b.password.trim()&&i.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 text-yellow-700 px-2 py-1 rounded-full text-xs font-medium border border-yellow-200",children:[i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),i.jsx("span",{children:"C mt khu"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[b.mcq_count>0&&i.jsxs("div",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-center",children:["TN: ",b.mcq_count]}),b.msq_count>0&&i.jsxs("div",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded text-center",children:["-S: ",b.msq_count]}),b.sa_count>0&&i.jsxs("div",{className:"bg-amber-50 text-amber-700 px-2 py-1 rounded text-center",children:["TLN: ",b.sa_count]}),b.tl_count>0&&i.jsxs("div",{className:"bg-green-50 text-green-700 px-2 py-1 rounded text-center",children:["TL: ",b.tl_count]})]})]}),i.jsx("div",{className:"flex items-center justify-center pt-4 border-t border-gray-100",children:i.jsxs("div",{className:"flex items-center text-indigo-600 font-semibold group-hover:text-indigo-700",children:[i.jsx(dm,{className:"w-5 h-5 mr-2"}),i.jsx("span",{children:"Bt u thi"})]})})]},b.id))})]})})}),!o&&a.length===0&&i.jsx("section",{className:"py-16 bg-white/30 backdrop-blur-sm",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsx("div",{className:"max-w-6xl mx-auto text-center",children:i.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:" Cha c  thi t h thng"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Hin ti cha c  thi no c xut bn t MySQL database."}),i.jsx("p",{className:"text-sm text-gray-500",children:"Gio vin c th to v xut bn  thi t trang qun l."})]})})})}),t.length>0&&i.jsx("section",{className:"py-16 bg-white/30 backdrop-blur-sm",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:[" thi c nhn (",t.length,")"]}),i.jsx("button",{onClick:()=>{window.confirm("Bn c chc chn mun xa tt c  thi  lu?")&&(Y0.clearAllQuizzes(),n([]))},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Xa tt c"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(b=>i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 cursor-pointer group",onClick:()=>g(b),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-indigo-600 transition-colors line-clamp-2",children:b.title}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:new Date(b.createdAt).toLocaleString("vi-VN")}),i.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"C nhn"})]}),i.jsx("button",{onClick:y=>v(b.id,y),className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"Xa  thi",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:"Tng s cu:"}),i.jsx("span",{className:"font-semibold text-gray-900",children:b.questionCount})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[b.mcqCount>0&&i.jsxs("div",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-center",children:["TN: ",b.mcqCount]}),b.msqCount>0&&i.jsxs("div",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded text-center",children:["-S: ",b.msqCount]}),b.saCount>0&&i.jsxs("div",{className:"bg-amber-50 text-amber-700 px-2 py-1 rounded text-center",children:["TLN: ",b.saCount]})]})]}),i.jsx("div",{className:"flex items-center justify-center pt-4 border-t border-gray-100",children:i.jsxs("div",{className:"flex items-center text-indigo-600 font-semibold group-hover:text-indigo-700",children:[i.jsx(dm,{className:"w-5 h-5 mr-2"}),i.jsx("span",{children:"Bt u thi"})]})})]},b.id))})]})})})]})};class q5{static async submitQuizResult(e){try{const t=await this.getNextAttemptNumber(e.student_id,e.quiz_title),n=await this.getClientIP(),a=navigator.userAgent,s={student_id:e.student_id,student_name:e.student_name||"Anonymous",student_email:e.student_email||"anonymous@example.com",student_class:e.student_class||null,quiz_title:e.quiz_title,quiz_id:e.quiz_id||null,quiz_creator_id:e.quiz_creator_id||null,score:Number(e.score),total_questions:Number(e.total_questions),attempt_number:t,answers:e.answers||{},ip_address:n,user_agent:a,submitted_at:new Date().toISOString()};console.log("Submitting quiz data:",s);const{data:o,error:l}=await supabase.from("quiz_submissions").insert([s]).select().single();return l?(console.error("Error submitting quiz:",l),console.error("Submission data that failed:",s),l.message.includes("row-level security policy")?{success:!1,error:"Khng th np bi. Vui lng th li hoc lin h admin nu vn  tip tc xy ra."}:{success:!1,error:l.message}):(console.log("Quiz submitted successfully:",o),{success:!0,data:o})}catch(t){return console.error("Exception submitting quiz:",t),{success:!1,error:t.message||"Unknown error occurred"}}}static async getQuizSubmissions(e){try{const{data:t,error:n}=await supabase.from("quiz_submissions").select(`
          id,
          student_name,
          student_email,
          student_class,
          quiz_title,
          score,
          total_questions,
          attempt_number,
          submitted_at
        `).eq("quiz_title",e).order("submitted_at",{ascending:!1});return n?(console.error("Error fetching submissions:",n),{success:!1,error:n.message}):{success:!0,data:(t||[]).map(s=>({...s,quiz_title:s.quiz_title||e,attempt_number:s.attempt_number||1,percentage:Math.round(s.score/s.total_questions*100)}))}}catch(t){return console.error("Exception fetching submissions:",t),{success:!1,error:t.message||"Unknown error occurred"}}}static async getStudentQuizSubmissions(e,t=50){try{if(e===null)return{success:!0,data:[]};const{data:n,error:a}=await supabase.from("quiz_submissions").select(`
          id,
          student_name,
          student_email,
          student_class,
          quiz_title,
          score,
          total_questions,
          attempt_number,
          submitted_at
        `).eq("student_id",e).order("submitted_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching student submissions:",a),{success:!1,error:a.message}):{success:!0,data:(n||[]).map(o=>({...o,percentage:Math.round(o.score/o.total_questions*100)}))}}catch(n){return console.error("Exception fetching student submissions:",n),{success:!1,error:n.message||"Unknown error occurred"}}}static async getTeacherQuizSubmissions(e,t=100){try{const{data:n,error:a}=await supabase.from("quiz_submissions").select(`
          id,
          student_name,
          student_email,
          student_class,
          quiz_title,
          score,
          total_questions,
          attempt_number,
          submitted_at
        `).eq("quiz_creator_id",e).order("submitted_at",{ascending:!1}).limit(t);return a?(console.error("Error fetching teacher submissions:",a),{success:!1,error:a.message}):{success:!0,data:(n||[]).map(o=>({...o,percentage:Math.round(o.score/o.total_questions*100)}))}}catch(n){return console.error("Exception fetching teacher submissions:",n),{success:!1,error:n.message||"Unknown error occurred"}}}static async getAllQuizSubmissions(e=100){try{const{data:t,error:n}=await supabase.from("quiz_submissions").select(`
          id,
          student_name,
          student_email,
          student_class,
          quiz_title,
          score,
          total_questions,
          attempt_number,
          submitted_at
        `).order("submitted_at",{ascending:!1}).limit(e);return n?(console.error("Error fetching all submissions:",n),{success:!1,error:n.message}):{success:!0,data:(t||[]).map(s=>({...s,percentage:Math.round(s.score/s.total_questions*100)}))}}catch(t){return console.error("Exception fetching all submissions:",t),{success:!1,error:t.message||"Unknown error occurred"}}}static async getSubmissionStats(){try{const{data:e,error:t}=await supabase.from("quiz_submissions").select(`
          id,
          score,
          total_questions,
          quiz_title,
          submitted_at
        `);return t?(console.error("Error fetching submission stats:",t),{success:!1,error:t.message}):{success:!0,data:{totalSubmissions:e?.length||0,averageScore:e?.length?Math.round(e.reduce((a,s)=>a+s.score/s.total_questions,0)/e.length*100):0,uniqueQuizzes:[...new Set(e?.map(a=>a.quiz_title)||[])].length,recentSubmissions:e?.slice(0,10)||[]}}}catch(e){return console.error("Exception fetching submission stats:",e),{success:!1,error:e.message||"Unknown error occurred"}}}static async deleteSubmission(e){try{const{error:t}=await supabase.from("quiz_submissions").delete().eq("id",e);return t?(console.error("Error deleting submission:",t),{success:!1,error:t.message}):{success:!0}}catch(t){return console.error("Exception deleting submission:",t),{success:!1,error:t.message||"Unknown error occurred"}}}static async getNextAttemptNumber(e,t){try{if(e===null)return 1;const{data:n,error:a}=await supabase.from("quiz_submissions").select("attempt_number").eq("student_id",e).eq("quiz_title",t).order("attempt_number",{ascending:!1}).limit(1);return a?(console.error("Error getting attempt number:",a),1):n&&n.length>0?(n[0].attempt_number||0)+1:1}catch(n){return console.error("Exception getting attempt number:",n),1}}static async canStudentTakeQuiz(e,t,n=1){try{if(e===null)return{canTake:!0,currentAttempts:0};const{data:a,error:s}=await supabase.from("quiz_submissions").select("id").eq("student_id",e).eq("quiz_title",t);return s?(console.error("Error checking attempt limit:",s),{canTake:!1,currentAttempts:0,error:s.message}):{canTake:!0,currentAttempts:a?.length||0}}catch(a){return console.error("Exception checking attempt limit:",a),{canTake:!1,currentAttempts:0,error:a.message}}}static async getStudentAttempts(e,t){try{if(e===null)return{success:!0,data:[]};const{data:n,error:a}=await supabase.from("quiz_submissions").select(`
          id,
          student_name,
          student_email,
          student_class,
          quiz_title,
          score,
          total_questions,
          attempt_number,
          submitted_at
        `).eq("student_id",e).eq("quiz_title",t).order("attempt_number",{ascending:!1});return a?(console.error("Error fetching student attempts:",a),{success:!1,error:a.message}):{success:!0,data:(n||[]).map(o=>({...o,percentage:Math.round(o.score/o.total_questions*100)}))}}catch(n){return console.error("Exception fetching student attempts:",n),{success:!1,error:n.message||"Unknown error occurred"}}}static async getClientIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown"}catch(e){return console.warn("Could not get client IP:",e),"unknown"}}static async hasStudentSubmitted(e,t){try{if(e===null)return{hasSubmitted:!1};const{data:n,error:a}=await supabase.from("quiz_submissions").select("*").eq("student_id",e).eq("quiz_title",t).single();return a&&a.code!=="PGRST116"?(console.error("Error checking submission:",a),{hasSubmitted:!1}):{hasSubmitted:!!n,submissionData:n}}catch(n){return console.error("Exception checking submission:",n),{hasSubmitted:!1}}}}const _ge=({error:r,onRetry:e,showDiagnostics:t=!1})=>{const[n,a]=he.useState(""),[s,o]=he.useState(!1),[l,u]=he.useState(!1),c=r?.includes("row-level security policy")||r?.includes("RLS")||r?.includes("policy"),d=async()=>{o(!0);try{a(` RLS diagnostics khng cn cn thit vi MySQL API.

H thng  chuyn sang s dng MySQL thay v Supabase.`),u(!0)}catch(g){console.error("Error running diagnostics:",g)}finally{o(!1)}},h=()=>{navigator.clipboard.writeText(n),alert(" copy bo co vo clipboard")};return!c&&!t?null:i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Li bo mt c s d liu (RLS Policy)"}),i.jsxs("div",{className:"mt-2 text-sm text-red-700",children:[i.jsx("p",{className:"mb-3",children:"H thng khng th np bi do cu hnh bo mt. y l li k thut cn admin x l."}),r&&i.jsx("div",{className:"bg-red-100 border border-red-300 rounded p-3 mb-3",children:i.jsx("p",{className:"font-mono text-xs",children:r})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nguyn nhn:"})," Row Level Security (RLS) policies cha c cu hnh ng cho bng quiz_submissions."]}),i.jsx("p",{children:i.jsx("strong",{children:"Gii php cho Admin:"})}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-4",children:[i.jsx("li",{children:"M Supabase Dashboard  SQL Editor"}),i.jsxs("li",{children:["Chy file ",i.jsx("code",{className:"bg-red-200 px-1 rounded",children:"supabase/fix_quiz_submissions_rls.sql"})]}),i.jsx("li",{children:"Kim tra li bng cch test np bi"})]}),i.jsx("p",{children:i.jsx("strong",{children:"Gii php tm thi:"})}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[i.jsx("li",{children:"Th np bi li sau vi pht"}),i.jsx("li",{children:"ng nhp/ng xut v th li"}),i.jsx("li",{children:"Lin h admin nu vn  tip tc"})]})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e&&i.jsx("button",{onClick:e,className:"bg-red-100 hover:bg-red-200 text-red-800 px-3 py-1 rounded text-sm font-medium",children:"Th li"}),i.jsx("button",{onClick:d,disabled:s,className:"bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-1 rounded text-sm font-medium disabled:opacity-50",children:s?"ang kim tra...":"Chy chn on"}),l&&i.jsx("button",{onClick:h,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 px-3 py-1 rounded text-sm font-medium",children:"Copy bo co"})]}),l&&n&&i.jsx("div",{className:"mt-4",children:i.jsxs("details",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[i.jsx("summary",{className:"cursor-pointer font-medium text-gray-700 mb-2",children:"Bo co chn on chi tit"}),i.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-x-auto",children:n})]})})]})]})})},Z0=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Jd=r=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),i.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),sy=()=>{const r=V5(),e=Vn(),{slug:t}=Cf(),[n,a]=he.useState([]),[s,o]=he.useState(" thi Online"),[l,u]=he.useState({}),[c,d]=he.useState(!1),[h,g]=he.useState(""),[m,v]=he.useState(""),[x,b]=he.useState(!0),[y,S]=he.useState(!1),[_,N]=he.useState(null),[j,E]=he.useState(null),[T,F]=he.useState(null),[A,R]=he.useState(!0),[I,O]=he.useState({current:0,max:1}),[U,D]=he.useState({show:!1,type:"success",message:""}),[H,P]=he.useState(""),[G,ue]=he.useState(null),[le,pe]=he.useState(!1),[de,L]=he.useState(""),[X,V]=he.useState(""),[se,ae]=he.useState(!1),[W,z]=he.useState(!1),[re,ne]=he.useState(null),[ie,oe]=he.useState(0),[ye,M]=he.useState(!1);he.useEffect(()=>{let fe=!0;const xe=setTimeout(()=>{fe&&console.warn(" getCurrentUser timeout")},1e4);return(async()=>{try{const{useAuth:je}=await gw(async()=>{const{useAuth:Be}=await Promise.resolve().then(()=>IF);return{useAuth:Be}},void 0,import.meta.url);console.log("Skipping user data load - use AuthContext at component level")}catch(je){console.error("Error loading user data:",je)}finally{clearTimeout(xe)}})(),()=>{fe=!1,clearTimeout(xe)}},[]),he.useEffect(()=>{let fe=!0;const xe=setTimeout(()=>{fe&&(console.warn(" checkQuizAttempts timeout, clearing loading"),b(!1))},15e3);return(async()=>{if(!_){console.log("Anonymous user - skipping attempt check"),clearTimeout(xe);return}let je=1,Be=" thi Online",Re=null;if(r.state?.title)Be=r.state.title,je=r.state?.maxAttempts||1,Re=r.state?.quizCreatorId;else if(t&&fe)try{const ze=await Va.getQuizBySlug(t);ze&&fe&&(Be=ze.title,je=ze.max_attempts||1,Re=ze.created_by,ze.password&&ze.password.trim()?(L(ze.password),z(!0),ae(!1)):ae(!0),ze.time_limit_minutes&&ze.time_limit_minutes>0&&(ue(ze.time_limit_minutes*60),pe(!0)))}catch(ze){console.error("Error fetching quiz metadata:",ze),fe&&b(!1),clearTimeout(xe);return}try{if(!fe){clearTimeout(xe);return}console.log("Checking quiz attempts for:",{studentId:_.id,quizTitle:Be,maxAttempts:je}),E({maxAttempts:je,quizCreatorId:Re,title:Be});const ze=await q5.canStudentTakeQuiz(_.id,Be,je);console.log("Attempt check result:",ze),fe&&(O({current:ze.currentAttempts,max:je}),R(ze.canTake),ze.canTake||(console.warn("Attempt check returned false, but allowing unlimited attempts"),R(!0)))}catch(ze){console.error("Error checking quiz attempts:",ze)}finally{clearTimeout(xe)}})(),()=>{fe=!1,clearTimeout(xe)}},[_,r.state,t]),he.useEffect(()=>{if(!le||G===null||G<=0||c)return;const fe=setInterval(()=>{ue(xe=>xe===null||xe<=0?(clearInterval(fe),0):xe-1)},1e3);return()=>clearInterval(fe)},[le,G,c]);const ge=he.useRef(!1);he.useEffect(()=>{G===0&&!c&&le&&!ge.current&&(ge.current=!0,alert(" Ht gi! Bi thi s c np t ng."),K())},[G,c,le]),he.useEffect(()=>{if(c||n.length===0)return;const fe=()=>{document.hidden&&(oe(_e=>{const je=_e+1;return console.warn(` Tab switch detected! Count: ${je}`),je}),M(!0),setTimeout(()=>{M(!1)},3e3))},xe=()=>{document.hidden||(oe(_e=>{const je=_e+1;return console.warn(` Window blur detected! Count: ${je}`),je}),M(!0),setTimeout(()=>{M(!1)},3e3))};return document.addEventListener("visibilitychange",fe),window.addEventListener("blur",xe),()=>{document.removeEventListener("visibilitychange",fe),window.removeEventListener("blur",xe)}},[c,n.length]);function ee(fe){const xe=[...fe];for(let _e=xe.length-1;_e>0;_e--){const je=Math.floor(Math.random()*(_e+1));[xe[_e],xe[je]]=[xe[je],xe[_e]]}return xe}const k=(fe,xe,_e)=>`${xe}_${fe}_${_e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,B=he.useCallback(async()=>{try{let fe=null;if(r.state&&r.state.questions&&r.state.title)fe={questions:r.state.questions,title:r.state.title};else if(t){const Le=await Va.getQuizBySlug(t);Le&&(fe={questions:typeof Le.questions=="string"?JSON.parse(Le.questions):Le.questions,title:Le.title})}if(!fe){console.error("No quiz data available for regeneration");return}const xe=new Uo,_e=fe.questions.map(Le=>{if(Le.isDynamic||xe.isDynamicQuestion(Le))try{console.log("Regenerating dynamic question for retake:",Le.id);const ht=xe.processQuestion(Le);return{...Le,...ht,isDynamic:!0}}catch(ht){return console.error("Error regenerating dynamic question:",Le.id,ht),Le}return Le});let je=_e.filter(Le=>Le.type==="mcq"),Be=_e.filter(Le=>Le.type==="msq"),Re=_e.filter(Le=>Le.type==="sa"),ze=_e.filter(Le=>Le.type==="tl");je=ee(je),Be=ee(Be),Re=ee(Re),ze=ee(ze),je=je.map((Le,it)=>{const ht=[{key:"A",value:Le.option_a},{key:"B",value:Le.option_b},{key:"C",value:Le.option_c},{key:"D",value:Le.option_d}].filter(be=>be.value),ce=ee(ht);return{...Le,option_a:ce[0]?.value||"",option_b:ce[1]?.value||"",option_c:ce[2]?.value||"",option_d:ce[3]?.value||"",optionMapping:{A:ce[0]?.key,B:ce[1]?.key,C:ce[2]?.key,D:ce[3]?.key},uniqueId:k(Le.id,"mcq",it),originalId:Le.id}}),Be=Be.map((Le,it)=>({...Le,uniqueId:k(Le.id,"msq",it),originalId:Le.id})),Re=Re.map((Le,it)=>({...Le,uniqueId:k(Le.id,"sa",it),originalId:Le.id})),ze=ze.map((Le,it)=>({...Le,uniqueId:k(Le.id,"tl",it),originalId:Le.id}));const Ye=[...je,...Be,...Re,...ze];a(Ye),console.log("Questions regenerated for retake, including",_e.filter(Le=>Le.isDynamic).length,"dynamic questions")}catch(fe){console.error("Error regenerating questions for retake:",fe)}},[r.state,t,k]),Q=he.useCallback(async()=>{if(!y)try{b(!0);let fe=null;if(r.state&&r.state.questions&&r.state.title){if(fe={questions:r.state.questions,title:r.state.title,quizId:r.state.quizId,supabaseQuizId:r.state.supabaseQuizId,teacherName:r.state.teacherName},F(r.state.mysqlQuizId||r.state.quizId),r.state.password&&r.state.password.trim()){L(r.state.password),z(!0),ae(!1),b(!1),S(!0);return}else ae(!0);if(r.state.time_limit&&r.state.time_limit>0){const xe=r.state.time_limit*60;ue(xe),pe(!0)}else ue(null),pe(!1)}else if(t){console.log("Loading quiz from slug:",t);const xe=await Va.getQuizBySlug(t);if(xe){let _e=typeof xe.questions=="string"?JSON.parse(xe.questions):xe.questions;if(console.log(" Raw questions from API:",_e),_e=_e.map(je=>({...je,id:je.question_id||je.id,question:je.question_text||je.question||"",type:je.type||"mcq"})),console.log(" Mapped questions:",_e.length,_e.map(je=>({id:je.id,type:je.type,question:je.question.substring(0,50)}))),fe={questions:_e,title:xe.title,quizId:xe.id,supabaseQuizId:xe.id,teacherName:xe.created_by_name},F(xe.id),console.log("Quiz metadata:",{hasPassword:!!xe.password,time_limit_minutes:xe.time_limit_minutes}),xe.password&&xe.password.trim()?(L(xe.password),z(!0),ae(!1),console.log(" Password required - will show password prompt after loading questions")):ae(!0),xe.time_limit_minutes&&xe.time_limit_minutes>0){const je=xe.time_limit_minutes*60;console.log("Setting time limit:",je,"seconds"),ue(je),pe(!0)}else ue(null),pe(!1)}else{console.warn("Quiz not found for slug:",t),e("/online-exam");return}}else{console.warn("No quiz data found, redirecting to online-exam"),e("/online-exam");return}if(fe){const xe=new Uo,_e=fe.questions.map(Le=>{if(Le.isDynamic||xe.isDynamicQuestion(Le))try{console.log("Processing dynamic question:",Le.id,Le.question.substring(0,50)+"...");const ht=xe.processQuestion(Le);return console.log("Processed result:",ht.question.substring(0,50)+"..."),{...Le,...ht,isDynamic:!0}}catch(ht){return console.error("Error processing dynamic question:",Le.id,ht),Le}return Le});let je=_e.filter(Le=>Le.type==="mcq"),Be=_e.filter(Le=>Le.type==="msq"),Re=_e.filter(Le=>Le.type==="sa"),ze=_e.filter(Le=>Le.type==="tl");je=ee(je),Be=ee(Be),Re=ee(Re),ze=ee(ze),je=je.map((Le,it)=>{const ht=[{key:"A",value:Le.option_a},{key:"B",value:Le.option_b},{key:"C",value:Le.option_c},{key:"D",value:Le.option_d}].filter(be=>be.value),ce=ee(ht);return{...Le,option_a:ce[0]?.value||"",option_b:ce[1]?.value||"",option_c:ce[2]?.value||"",option_d:ce[3]?.value||"",optionMapping:{A:ce[0]?.key,B:ce[1]?.key,C:ce[2]?.key,D:ce[3]?.key},uniqueId:k(Le.id,"mcq",it),originalId:Le.id}}),Be=Be.map((Le,it)=>({...Le,uniqueId:k(Le.id,"msq",it),originalId:Le.id})),Re=Re.map((Le,it)=>({...Le,uniqueId:k(Le.id,"sa",it),originalId:Le.id})),ze=ze.map((Le,it)=>({...Le,uniqueId:k(Le.id,"tl",it),originalId:Le.id}));const Ye=[...je,...Be,...Re,...ze];a(Ye),o(fe.title),u({}),d(!1),g(""),v(""),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)}else{console.warn("No quiz data found, redirecting to home"),e("/");return}}catch(fe){console.error("Error initializing exam:",fe),e("/");return}finally{b(!1),S(!0)}},[r.state,e,t,y]);he.useEffect(()=>{const fe=setTimeout(()=>{Q()},50);return()=>clearTimeout(fe)},[]);const Z=()=>{X.trim()===de.trim()?(console.log(" Password verified successfully"),ae(!0),z(!1),n.length===0&&(console.log(" Re-initializing to load questions after password verification"),S(!1))):(alert(" Mt khu khng ng. Vui lng th li."),V(""))};if(W&&!se)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full border-2 border-indigo-200 animate-in",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg animate-bounce",children:i.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:"  thi c bo v"}),i.jsx("p",{className:"text-gray-600 text-lg",children:"Vui lng nhp mt khu  truy cp  thi"})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:["Mt khu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"password",value:X,onChange:fe=>V(fe.target.value),onKeyPress:fe=>fe.key==="Enter"&&Z(),className:"w-full px-5 py-4 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-indigo-500/50 focus:border-indigo-500 text-lg transition-all",placeholder:"Nhp mt khu...",autoFocus:!0})]}),i.jsx("button",{onClick:Z,className:"w-full px-6 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:" Xc nhn"}),i.jsx("button",{onClick:()=>e(-1),className:"w-full px-6 py-4 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all font-bold transform hover:scale-[1.02]",children:" Quay li"})]})]})});if(x||!y)return i.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang chun b  thi..."})]})});if(n.length===0)return console.log(" No questions found - showing empty state"),i.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Khng c cu hi no c tm thy."}),i.jsx("button",{onClick:()=>e("/online-exam"),className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:"Quay li"})]})});const J=(fe,xe,_e)=>{if(!c)if(_e==="msq"){const je=l[fe]||"",Be={};je&&je.split(",").forEach(Le=>{const[it,ht]=Le.split(":");it&&ht&&(Be[it]=ht)});const[Re,ze]=xe.split(":");Be[Re]=ze;const Ye=Object.keys(Be).sort().map(Le=>`${Le}:${Be[Le]}`).join(",");u(Le=>({...Le,[fe]:Ye}))}else u(je=>({...je,[fe]:xe}))},K=async()=>{if(!h.trim()){D({show:!0,type:"error",message:"Vui lng nhp h v tn ca bn."}),setTimeout(()=>{D(fe=>({...fe,show:!1}))},5e3);return}if(!m.trim()){D({show:!0,type:"error",message:"Vui lng nhp lp ca bn."}),setTimeout(()=>{D(fe=>({...fe,show:!1}))},5e3);return}b(!0);try{const fe={},xe={};n.forEach(ht=>{const ce=l[ht.uniqueId];if(ce!==void 0){let be=ce;if(ht.type==="mcq"&&ht.optionMapping&&ce){const Fe=ht.optionMapping;be=Fe[ce]||ce,console.log(` MCQ mapping: User selected ${ce} (shuffled)  ${be} (original)`,Fe)}fe[ht.originalId||ht.id]=be}ht.variables&&(xe[ht.originalId||ht.id]=ht.variables,console.log(` Question ${ht.originalId||ht.id} variables:`,ht.variables))}),console.log(" Sending answers to backend:",{quiz_id:T,answers:fe,variables:xe,total_questions:n.length});const je=await fetch("https://hoc.io.vn/api/quizzes/grade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quiz_id:T,answers:fe,variables:xe})});if(!je.ok)throw new Error("Failed to grade quiz");const Be=await je.json();console.log(" Grading results from server:",Be);const Re=Be.data.score,ze=Be.data.total_points,Ye=Be.data.percentage,Le=n.length;if(ne(Be.data),t||r.state?.mysqlQuizId){const ht={quiz_id:T,student_name:h.trim(),student_email:_?.email||`anonymous_${h.trim().toLowerCase().replace(/\s+/g,"")}@temp.local`,student_class:m.trim(),score:Re,total_points:ze,total_questions:Le,percentage:Math.round(Re/ze*100),answers:JSON.stringify(l),time_spent_seconds:G?j?.time_limit_minutes*60-G:null,tab_switch_count:ie};console.log(" Submitting to MySQL API:",ht);try{const ce=await st.submitQuizResult(ht);console.log(" MySQL submission successful:",ce)}catch(ce){console.error(" MySQL API error:",ce)}D({show:!0,type:"success",message:`Np bi thnh cng! im s: ${Re.toFixed(2)}/${ze.toFixed(2)} (${(Re/ze*100).toFixed(1)}%)`}),d(!0),O(ce=>({...ce,current:ce.current+1})),setTimeout(()=>{D(ce=>({...ce,show:!1}))},5e3)}else console.log("  thi c nhn - khng lu im vo database"),D({show:!0,type:"success",message:`Hon thnh bi thi luyn tp! im s: ${Re.toFixed(2)}/${ze.toFixed(2)} (${(Re/ze*100).toFixed(1)}%)`}),d(!0),O(ht=>({...ht,current:ht.current+1})),setTimeout(()=>{D(ht=>({...ht,show:!1}))},5e3)}catch(fe){console.error("Error submitting quiz:",fe),D({show:!0,type:"error",message:"C li xy ra khi np bi. Vui lng th li!"}),setTimeout(()=>{D(xe=>({...xe,show:!1}))},7e3)}finally{b(!1),window.scrollTo({top:0,behavior:"smooth"})}},te=(fe,xe)=>{if(xe)return"bg-gradient-to-br from-white to-gray-50 border-gray-300";switch(fe){case"mcq":return"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-300";case"msq":return"bg-gradient-to-br from-purple-50 to-pink-50 border-purple-300";case"sa":return"bg-gradient-to-br from-amber-50 to-orange-50 border-amber-300";case"tl":return"bg-gradient-to-br from-green-50 to-teal-50 border-green-300";default:return"bg-white border-gray-200"}},me=fe=>!re||!re.results?null:re.results.find(xe=>String(xe.question_id)===String(fe));return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[G!==null&&!c&&i.jsx("div",{className:`sticky top-0 z-50 shadow-lg transition-all duration-300 ${G<=300?"bg-gradient-to-r from-red-500 to-red-600":G<=600?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-blue-500 to-indigo-600"}`,children:i.jsxs("div",{className:"container mx-auto px-4 py-3",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 text-white",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 flex-1",children:[i.jsx("svg",{className:`w-6 h-6 ${G<=300?"animate-pulse":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{className:"text-2xl font-bold tracking-wider",children:[Math.floor(G/60),":",(G%60).toString().padStart(2,"0")]}),i.jsx("span",{className:"text-sm font-medium",children:G<=300?" SP HT GI!":G<=600?" Cn t thi gian":" Thi gian cn li"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2 border border-white/20",children:[i.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:"Gim st"}),i.jsx("div",{className:`text-xs ${ie>0?"text-red-200 font-bold":"text-white/80"}`,children:ie>0?` ${ie} vi phm`:"Khng vi phm"})]})]})]}),i.jsx("div",{className:"mt-3 flex items-center justify-center gap-2 flex-wrap",children:n.map((fe,xe)=>{const _e=l[fe.uniqueId]!==void 0&&l[fe.uniqueId]!=="";return i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-200 ${_e?"bg-green-400 text-white shadow-md":"bg-white text-gray-700"}`,title:_e?`Cu ${xe+1}:  lm`:`Cu ${xe+1}: Cha lm`,children:xe+1},fe.uniqueId)})})]})}),ye&&i.jsx("div",{className:"fixed top-20 right-4 z-50 bg-red-500 text-white px-6 py-4 rounded-lg shadow-2xl animate-bounce border-2 border-red-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-lg",children:" CNH BO!"}),i.jsx("div",{className:"text-sm",children:"Pht hin chuyn tab/ng dng khc!"}),i.jsx("div",{className:"text-xs mt-1",children:"Hnh vi ny  c ghi nhn."})]})]})}),i.jsx("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-6 sm:p-8 mb-6 border border-indigo-100",children:i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full mb-4 shadow-lg",children:i.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3",children:s}),de&&de.trim()!==""&&i.jsx("div",{className:"flex justify-center mb-3",children:i.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-full text-sm font-bold shadow-lg",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})," RING T (im c lu vo h thng)"]})}),i.jsxs("div",{className:"flex items-center justify-center gap-4 text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("span",{className:"font-semibold",children:(()=>{const fe=n.filter(_e=>_e.type!=="tl").length,xe=n.filter(_e=>_e.type==="tl").length;return xe>0?`${fe} cu trc nghim + ${xe} cu t lun`:`${n.length} cu hi`})()})]}),G!==null&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"font-semibold",children:"C gii hn thi gian"})]})]})]})}),i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-md p-4 mb-6 border border-blue-200",children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm border border-blue-100",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium mb-1",children:"TN"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.filter(fe=>fe.type==="mcq").length})]}),i.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm border border-green-100",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium mb-1",children:"-S"}),i.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.filter(fe=>fe.type==="msq").length})]}),i.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm border border-purple-100",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium mb-1",children:"TLN"}),i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.filter(fe=>fe.type==="sa").length})]}),i.jsxs("div",{className:"bg-white rounded-lg p-3 text-center shadow-sm border border-orange-100",children:[i.jsx("div",{className:"text-xs text-gray-500 font-medium mb-1",children:"TL"}),i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:n.filter(fe=>fe.type==="tl").length})]})]})}),H&&i.jsx(_ge,{error:H,onRetry:()=>{P(""),K()}}),U.show&&i.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-md p-4 rounded-lg border-l-4 shadow-lg transition-all duration-300 ${U.type==="success"?"bg-green-50 border-green-500 text-green-800":"bg-red-50 border-red-500 text-red-800"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:U.type==="success"?i.jsx(Z0,{className:"w-5 h-5 text-green-600"}):i.jsx(Jd,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("p",{className:"font-semibold text-sm",children:U.type==="success"?"Thnh cng!":"C li xy ra!"}),i.jsx("p",{className:"text-xs mt-1",children:U.message})]}),i.jsx("button",{onClick:()=>D(fe=>({...fe,show:!1})),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:i.jsx(Jd,{className:"w-4 h-4"})})]})}),!c&&i.jsxs("div",{className:"mb-8 p-6 sm:p-8 rounded-2xl bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 shadow-lg",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-md",children:i.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),i.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:["Thng tin hc sinh ",i.jsx("span",{className:"text-red-500",children:"*"}),i.jsx("span",{className:"text-sm font-normal text-blue-600 ml-2",children:"(Bt buc)"})]})]}),I.current>0&&i.jsxs("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"font-semibold",children:"Thng tin lt thi"})]}),i.jsxs("p",{className:"text-blue-600 text-sm mt-1",children:["Ln thi: ",i.jsx("strong",{children:I.current+1})," (Khng gii hn s ln)",I.current>0&&i.jsxs("span",{className:"ml-2 text-blue-500",children:["(Bn  thi ",I.current," ln)"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["H v tn ",i.jsx("span",{className:"text-red-500",children:"*"}),":"]}),i.jsx("input",{type:"text",value:h,onChange:fe=>g(fe.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Nhp h v tn"}),!h.trim()&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Vui lng nhp h v tn"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lp ",i.jsx("span",{className:"text-red-500",children:"*"}),":"]}),i.jsx("input",{type:"text",value:m,onChange:fe=>v(fe.target.value),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Nhp lp"}),!m.trim()&&i.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Vui lng nhp lp"})]})]})]}),c&&re&&i.jsxs("div",{className:"mb-10 p-8 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 border-2 border-indigo-300 text-center shadow-2xl",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-full mb-6 shadow-lg",children:re.percentage>=80?i.jsx("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):re.percentage>=50?i.jsx("svg",{className:"w-12 h-12 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):i.jsx("svg",{className:"w-12 h-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:" KT QU BI LM"}),(h||m)&&i.jsxs("div",{className:"mb-6 bg-white/10 backdrop-blur-sm rounded-xl p-4 text-white",children:[h&&i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"H tn:"})," ",h]}),m&&i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Lp:"})," ",m]})]}),ie>0&&i.jsxs("div",{className:"mb-4 bg-red-500/20 backdrop-blur-sm border-2 border-red-300 rounded-xl p-4 text-white",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),i.jsxs("p",{className:"font-bold",children:[" Cnh bo: ",ie," ln chuyn tab/ng dng"]})]}),i.jsx("p",{className:"text-sm mt-1 opacity-90",children:"Hnh vi ny  c ghi nhn v bo co cho gio vin"})]}),i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-6 mb-4",children:[i.jsxs("p",{className:"text-6xl font-black text-white mb-2",children:[re.score.toFixed(2)," ",i.jsx("span",{className:"text-3xl",children:"/"})," ",re.total_points.toFixed(2)]}),i.jsxs("p",{className:"text-2xl font-bold text-white/90",children:[re.percentage.toFixed(1),"% chnh xc"]})]}),i.jsx("div",{className:`inline-block px-6 py-3 rounded-full font-bold text-lg ${re.percentage>=80?"bg-green-500 text-white":re.percentage>=50?"bg-yellow-500 text-gray-900":"bg-red-500 text-white"}`,children:re.percentage>=80?" Xut sc!":re.percentage>=50?" Kh tt!":" C gng hn!"})]}),(()=>{const fe=n.filter(Re=>Re.type==="mcq"),xe=n.filter(Re=>Re.type==="msq"),_e=n.filter(Re=>Re.type==="sa"),je=n.filter(Re=>Re.type==="tl");let Be=1;return i.jsxs(i.Fragment,{children:[fe.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-white font-bold text-lg",children:"I"})}),i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Phn I: Trc nghim (0.25 im/cu)"})]}),fe.map(Re=>{const ze=l[Re.uniqueId]||"",Ye=Be++;if(Re.type==="mcq"){const Le=me(Re.originalId||Re.id),it=Le?.is_correct||!1,ht=Le?.correct_answer;let ce=ht;if(ht&&Re.optionMapping){const be=Re.optionMapping,Fe={};Object.entries(be).forEach(([$e,vt])=>{Fe[vt]=$e}),ce=Fe[ht]||ht}return i.jsxs("div",{className:`p-6 sm:p-8 rounded-2xl border-2 transition-all duration-300 shadow-lg hover:shadow-xl mb-6 ${te(Re.type,c)}`,children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-full flex items-center justify-center shadow-md",children:i.jsx("span",{className:"text-white font-bold",children:Ye})}),i.jsx("div",{className:"flex-grow pt-2 text-gray-800 text-lg",children:i.jsx(ir,{content:Re.question,inline:!0})}),c&&(it?i.jsx(Z0,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):i.jsx(Jd,{className:"w-8 h-8 text-red-500 flex-shrink-0"}))]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-6",children:["A","B","C","D"].map(be=>{const Fe=`option_${be.toLowerCase()}`;if(!Re[Fe])return null;let $e="bg-white hover:bg-gray-50";return!c&&ze===be&&($e="bg-gradient-to-r from-indigo-100 to-purple-100 border-indigo-500 shadow-md"),c&&ce&&be===ce&&($e="bg-gradient-to-r from-green-100 to-emerald-100 border-green-500 ring-2 ring-green-400 shadow-lg"),c&&ze===be&&ce&&be!==ce&&($e="bg-gradient-to-r from-red-100 to-pink-100 border-red-500 ring-2 ring-red-400"),i.jsxs("label",{className:`flex items-start p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer ${$e} ${!c&&"hover:scale-[1.02]"}`,children:[i.jsx("input",{type:"radio",name:Re.uniqueId,value:be,onChange:vt=>J(Re.uniqueId,vt.target.value,"mcq"),disabled:c,checked:ze===be,className:"mt-1 h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 accent-indigo-600"}),i.jsxs("span",{className:"ml-3 flex-1 text-gray-700",children:[i.jsxs("span",{className:"font-bold text-indigo-600 text-lg",children:[be,"."]}),i.jsx("span",{className:"ml-2",children:i.jsx(ir,{content:Re[Fe],inline:!0})})]})]},`${Re.uniqueId}_${be}`)})}),c&&ce&&i.jsxs("div",{className:"mt-5 p-4 bg-gray-50 border-t border-gray-200 rounded-b-lg -m-5 mt-5 pt-5",children:[i.jsxs("div",{className:"font-semibold text-gray-700 mb-2",children:["p n ng:",i.jsx("span",{className:"ml-2 font-mono text-indigo-700 text-base",children:ce})]}),Re.explanation&&i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Li gii chi tit:"}),i.jsx("div",{className:"text-gray-600 leading-relaxed prose prose-sm max-w-none",children:i.jsx(ir,{content:Re.explanation,inline:!1})})]})]})]},Re.uniqueId)}return null})]}),xe.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-white font-bold text-lg",children:"II"})}),i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Phn II: ng - Sai (1 : 0.1 | 2 : 0.25 | 3 : 0.5 | 4 : 1)"})]}),xe.map(Re=>{const ze=l[Re.uniqueId]||"",Ye=Be++,Le=me(Re.originalId||Re.id),it=Le?.points_earned||0,ht=Le?.max_points||1,ce=Le?.correct_answer,be={};ze&&ze.split(",").forEach($e=>{const[vt,Nt]=$e.split(":");vt&&Nt&&(be[vt.trim().toLowerCase()]=Nt)});const Fe=[];return ce&&ce.split(",").forEach($e=>{Fe.push($e.trim().toLowerCase())}),i.jsxs("div",{className:`p-6 sm:p-8 rounded-2xl border-2 transition-all duration-300 shadow-lg hover:shadow-xl mb-6 ${te(Re.type,c)}`,children:[i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center shadow-md",children:i.jsx("span",{className:"text-white font-bold",children:Ye})}),i.jsx("div",{className:"flex-grow pt-2 text-gray-800 text-lg",children:i.jsx(ir,{content:Re.question,inline:!0})}),c&&i.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold",style:{color:it===ht?"#10B981":it>0?"#F59E0B":"#EF4444"},children:[it.toFixed(2),"/",ht.toFixed(2)]}),it===ht?i.jsx(Z0,{className:"w-7 h-7 text-green-500"}):i.jsx(Jd,{className:"w-7 h-7 text-red-500"})]})]}),i.jsx("div",{className:"mt-5 pl-10 space-y-4",children:["a","b","c","d"].map($e=>{const vt=`option_${$e}`;if(!Re[vt])return null;const Nt=be[$e]==="true",Qt=be[$e]==="false",Vr=Fe.includes($e);return i.jsx("div",{className:"border rounded-xl p-4 bg-white hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-bold text-purple-600 text-lg",children:[$e,")"]}),i.jsx("span",{className:"ml-2 text-gray-800",children:i.jsx(ir,{content:Re[vt],inline:!0})})]}),i.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[i.jsxs("label",{className:`inline-flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${!c&&Nt?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-500 shadow-md":c&&Vr&&Nt?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-500 ring-2 ring-green-400":c&&!Vr&&Nt?"bg-gradient-to-r from-red-100 to-pink-100 border-red-500 ring-2 ring-red-400":"bg-white hover:bg-gray-50 border-gray-300"}`,children:[i.jsx("input",{type:"radio",name:`${Re.uniqueId}_${$e}`,value:"true",checked:Nt,onChange:()=>J(Re.uniqueId,`${$e}:true`,"msq"),disabled:c,className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"font-semibold text-green-700",children:"ng"})]}),i.jsxs("label",{className:`inline-flex items-center justify-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${!c&&Qt?"bg-gradient-to-r from-red-100 to-pink-100 border-red-500 shadow-md":c&&!Vr&&Qt?"bg-gradient-to-r from-green-100 to-emerald-100 border-green-500 ring-2 ring-green-400":c&&Vr&&Qt?"bg-gradient-to-r from-red-100 to-pink-100 border-red-500 ring-2 ring-red-400":"bg-white hover:bg-gray-50 border-gray-300"}`,children:[i.jsx("input",{type:"radio",name:`${Re.uniqueId}_${$e}`,value:"false",checked:Qt,onChange:()=>J(Re.uniqueId,`${$e}:false`,"msq"),disabled:c,className:"h-4 w-4 text-red-600"}),i.jsx("span",{className:"font-semibold text-red-700",children:"Sai"})]})]})]})},`${Re.uniqueId}_${$e}`)})}),c&&ce&&i.jsxs("div",{className:"mt-5 p-4 bg-yellow-50 border-t border-yellow-200 rounded-b-lg -m-5 mt-5 pt-5",children:[i.jsxs("div",{className:"font-semibold text-gray-700 mb-2",children:["p n ng: ",i.jsx("span",{className:"text-green-600 font-mono",children:ce.toUpperCase()})]}),Re.explanation&&i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"font-semibold text-gray-700 mb-2 mt-3",children:"Li gii chi tit:"}),i.jsx("div",{className:"text-gray-600 leading-relaxed prose prose-sm max-w-none",children:i.jsx(ir,{content:Re.explanation,inline:!1})})]})]})]},Re.uniqueId)})]}),_e.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-white font-bold text-lg",children:"III"})}),i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"Phn III: Tr li ngn (0.5 im/cu)"})]}),_e.map(Re=>{const ze=l[Re.uniqueId]||"",Ye=Be++,Le=me(Re.originalId||Re.id),it=Le?.is_correct||!1,ht=Le?.correct_answer;let ce="border-gray-300 focus:border-amber-500 focus:ring-amber-500 bg-white";return!c&&ze&&(ce="bg-gradient-to-r from-amber-100 to-orange-100 border-amber-500 shadow-md"),c&&it&&(ce="border-green-500 ring-2 ring-green-400 bg-gradient-to-r from-green-100 to-emerald-100 shadow-lg"),c&&ze&&!it&&(ce="border-red-500 ring-2 ring-red-400 bg-gradient-to-r from-red-100 to-pink-100"),i.jsxs("div",{className:`p-6 sm:p-8 rounded-2xl border-2 transition-all duration-300 shadow-lg hover:shadow-xl mb-6 ${te(Re.type,c)}`,children:[i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full flex items-center justify-center shadow-md",children:i.jsx("span",{className:"text-white font-bold",children:Ye})}),i.jsx("div",{className:"flex-grow pt-2 text-gray-800 text-lg",children:i.jsx(ir,{content:Re.question,inline:!0})}),c&&(it?i.jsx(Z0,{className:"w-8 h-8 text-green-500 flex-shrink-0"}):i.jsx(Jd,{className:"w-8 h-8 text-red-500 flex-shrink-0"}))]}),i.jsx("div",{className:"mt-5",children:i.jsx("input",{type:"text",value:ze,onChange:be=>J(Re.uniqueId,be.target.value,"sa"),disabled:c,className:`w-full px-5 py-4 rounded-xl border-2 transition-all duration-300 text-lg font-semibold ${ce}`,placeholder:"Nhp cu tr li ca bn..."})}),c&&ht&&i.jsxs("div",{className:"mt-5 p-4 bg-gray-50 border-t border-gray-200 rounded-b-lg -m-5 mt-5 pt-5",children:[i.jsxs("div",{className:"font-semibold text-gray-700 mb-2",children:["p n ng: ",i.jsx("span",{className:"text-green-600 font-mono",children:ht})]}),Re.explanation&&i.jsxs(i.Fragment,{children:[i.jsx("h4",{className:"font-semibold text-gray-700 mb-2 mt-3",children:"Li gii chi tit:"}),i.jsx("div",{className:"text-gray-600 leading-relaxed prose prose-sm max-w-none",children:i.jsx(ir,{content:Re.explanation,inline:!1})})]})]})]},Re.uniqueId)})]}),je.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-white font-bold text-lg",children:"IV"})}),i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Phn IV: T lun (Khng tnh im)"})]}),je.map(Re=>{const ze=Be++;return i.jsx("div",{className:"p-6 sm:p-8 rounded-2xl border-2 transition-all duration-300 shadow-lg hover:shadow-xl mb-6 bg-gradient-to-br from-green-50 to-teal-50 border-green-300",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center shadow-md",children:i.jsx("span",{className:"text-white font-bold",children:ze})}),i.jsx("div",{className:"flex-grow pt-2 text-gray-800 text-lg",children:i.jsx(ir,{content:Re.question,inline:!0})})]})},Re.uniqueId)})]})]})})(),i.jsx("div",{className:"mt-10 flex flex-col sm:flex-row justify-center items-center gap-4",children:c?i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:async()=>{try{if(!_)O(fe=>({...fe,current:fe.current+1}));else{const fe=await q5.canStudentTakeQuiz(_.id,s,I.max);O({current:fe.currentAttempts,max:I.max})}d(!1),u({}),R(!0),await B(),window.scrollTo({top:0,behavior:"smooth"}),D({show:!0,type:"success",message:`Bt u ln thi th ${_?I.current+1:I.current}`}),setTimeout(()=>{D(fe=>({...fe,show:!1}))},3e3)}catch(fe){console.error("Error setting up retake:",fe),D({show:!0,type:"error",message:"C li xy ra khi chun b thi li. Vui lng th li."}),setTimeout(()=>{D(xe=>({...xe,show:!1}))},5e3)}},className:"w-full sm:w-auto px-8 py-4 text-base font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl transform hover:scale-[1.02]",children:[" Thi li (Ln ",I.current+1,")"]})}):i.jsxs("button",{onClick:K,disabled:x||!h.trim()||!m.trim(),className:"w-full sm:w-auto px-10 py-4 text-lg font-bold text-white bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl hover:from-indigo-700 hover:to-purple-700 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center gap-3",children:[x&&i.jsx("div",{className:"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"}),x?" ang np bi...":" Np bi thi"]})})]})})]})};class Nge{async createSubject(e){return(await st.post("/subjects",e)).data}async updateSubject(e,t){return(await st.put(`/subjects/${e}`,t)).data}async deleteSubject(e){await st.delete(`/subjects/${e}`)}async createChapter(e){return(await st.post("/chapters",e)).data}async updateChapter(e,t){return(await st.put(`/chapters/${e}`,t)).data}async deleteChapter(e){await st.delete(`/chapters/${e}`)}async createLesson(e){return(await st.post("/lessons",e)).data}async updateLesson(e,t){return(await st.put(`/lessons/${e}`,t)).data}async deleteLesson(e){await st.delete(`/lessons/${e}`)}async createQuestionType(e){return(await st.post("/question-types",e)).data}async updateQuestionType(e,t){return(await st.put(`/question-types/${e}`,t)).data}async deleteQuestionType(e){await st.delete(`/question-types/${e}`)}async createQuestion(e){return(await st.post("/questions",e)).data}async updateQuestion(e,t){return(await st.put(`/questions/${e}`,t)).data}async deleteQuestion(e){await st.delete(`/questions/${e}`)}async bulkCreateQuestions(e){const t=e.map(a=>({question_type_id:a.question_type_id,type:a.type||"mcq",question_text:a.question_text,option_a:a.option_a||"",option_b:a.option_b||"",option_c:a.option_c||"",option_d:a.option_d||"",correct_option:a.correct_option,explanation:a.explanation||"",difficulty:a.difficulty||"medium",is_dynamic:a.is_dynamic||!1,dynamic_config:a.dynamic_variables,tags:a.tags||[]}));return(await st.post("/questions/bulk",{questions:t})).data}async getUserStats(){return(await st.get("/users/stats")).data}async getQuestionStats(){return(await st.get("/questions/stats")).data}async getQuizStats(){return(await st.get("/quizzes/stats")).data}async getUsers(){return(await st.get("/users")).data}async getUser(e){return(await st.get(`/users/${e}`)).data.user}async updateUser(e,t){return(await st.put(`/users/${e}`,t)).data.user}async deleteUser(e){await st.delete(`/users/${e}`)}async toggleUserActive(e){return(await st.put(`/users/${e}/toggle-active`,{})).data.user}async resetUserPassword(e,t){await st.put(`/users/${e}/password`,{new_password:t})}}const dM=new Nge;function Sge({onSave:r,onCancel:e}){const[t,n]=he.useState({id:`dyn_${Date.now()}`,type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",isDynamic:!0}),[a,s]=he.useState({grade_level:"12",chapter:"1",lesson:"1",type_category:"1"}),[o,l]=he.useState(""),[u,c]=he.useState(!1),[d,h]=he.useState([]),[g,m]=he.useState(!1),[v,x]=he.useState(3),b=new Uo,y=he.useCallback((j,E)=>{n(T=>({...T,[j]:E}))},[]);he.useCallback((j,E)=>{s(T=>({...T,[j]:E}))},[]);const S=he.useCallback(()=>{try{const j=JSON.parse(o);if(!j.question||!j.type||!j.correct_option){alert("JSON khng hp l! Cn c t nht: question, type, correct_option");return}const E=D=>D&&D.replace(/!(\w+):([-]?\d*\.?\d+):([-]?\d*\.?\d+)!/g,"!$1#$2#$3#integer!"),T=E(j.question),F=E(j.option_a||""),A=E(j.option_b||""),R=E(j.option_c||""),I=E(j.option_d||""),O=E(j.correct_option),U=E(j.explanation||"");n({id:j.id||`dyn_${Date.now()}`,type:j.type,question:T,option_a:F,option_b:A,option_c:R,option_d:I,correct_option:O,explanation:U,isDynamic:!0}),l(""),c(!1),alert("  import thnh cng t JSON! C php bin  c chuyn i t ng.")}catch{alert(" Li nh dng JSON! Vui lng kim tra li.")}},[o]),_=he.useCallback(()=>{try{const j=b.generateVariations(t,v);h(j),m(!0)}catch(j){console.error("Error generating preview:",j),alert("Li khi to xem trc. Vui lng kim tra li nh dng cu hi.")}},[t,v,b]),N=he.useCallback(()=>{if(!t.question.trim()){alert("Vui lng nhp ni dung cu hi");return}if(!t.correct_option.trim()){alert("Vui lng nhp p n ng");return}if(!b.isDynamicQuestion(t)&&!confirm("Cu hi ny khng cha yu t ng. Bn c mun lu nh cu hi thng khng?"))return;const j={...t,metadata:a};r(j)},[t,a,b,r]);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[i.jsx(Uy,{className:"w-6 h-6 text-purple-600"}),"To cu hi ng"]}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[i.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Hng dn s dng:"}),i.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Bin s:"})," ",i.jsx("code",{children:"!tn!"}),i.jsx("br",{}),"V d: ",i.jsx("code",{children:"!a!;!a#0!"})," (s nguyn t -10 n 10 v a#0)",i.jsx("br",{}),i.jsx("code",{children:"!b:1:5! (s b t 1 n 5); !b#!a!!(s b khc a ); iff(!a!=0,Dng,m) (nu th )"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Tnh ton:"})," ",i.jsx("code",{children:"{tinh: biu_thc}"}),i.jsx("br",{}),"V d: ",i.jsxs("code",{children:["{tinh: !a! + !b!}"," (php ton tnh dng math.js)"]})]})]})]}),i.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-semibold text-green-900",children:"Import t JSON"}),i.jsxs("button",{onClick:()=>c(!u),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",children:[u?"n":"Hin th"," JSON Import"]})]}),u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dn JSON cu hi (theo nh dng toan-12-chuong-1-bai-1-dang-1.json)"}),i.jsx("textarea",{value:o,onChange:j=>l(j.target.value),placeholder:`V d:
{
  "id": "mcq1-12-1-1-2",
  "type": "mcq",
  "question": "Cho hm s $y = !a#0!x^2 + !b:5:15!x + !c!$. Tnh {tinh: !a! + !b!} =",
  "option_a": "{tinh: !a! + !b! + 1}",
  "option_b": "{tinh: !a! + !b!}",
  "option_c": "{tinh: !a! + !b! - 1}",
  "option_d": "{tinh: !a! + !b! + 2}",
  "correct_option": "B",
  "explanation": "Ta c !a! + !b! = {tinh: !a! + !b!}"
}`,className:"w-full p-3 border border-gray-300 rounded-md text-sm font-mono focus:ring-green-500 focus:border-green-500",rows:8})]}),i.jsx("button",{onClick:S,disabled:!o.trim(),className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Import JSON"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Son cu hi"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi cu hi"}),i.jsxs("select",{value:t.type,onChange:j=>y("type",j.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"mcq",children:"Trc nghim"}),i.jsx("option",{value:"msq",children:"ng - Sai"}),i.jsx("option",{value:"sa",children:"Tr li ngn"}),i.jsx("option",{value:"tl",children:"T lun"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cu hi *"}),i.jsx("textarea",{value:t.question,onChange:j=>y("question",j.target.value),placeholder:"V d: Cho hm s $y=!a#0!x^2+!b:-5:5!x+!c!$, tnh {tinh: !a!+!b!} = ?",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),(t.type==="mcq"||t.type==="msq")&&i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n A"}),i.jsx("input",{type:"text",value:t.option_a,onChange:j=>y("option_a",j.target.value),placeholder:"V d: {tinh: !a! + !b! + 1}",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n B"}),i.jsx("input",{type:"text",value:t.option_b,onChange:j=>y("option_b",j.target.value),placeholder:"V d: {tinh: !a! + !b! - 1}",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n C"}),i.jsx("input",{type:"text",value:t.option_c,onChange:j=>y("option_c",j.target.value),placeholder:"V d: {tinh: !a! + !b!}",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n D"}),i.jsx("input",{type:"text",value:t.option_d,onChange:j=>y("option_d",j.target.value),placeholder:"V d: {tinh: !a! + !b! + 2}",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n ng *"}),i.jsx("input",{type:"text",value:t.correct_option,onChange:j=>y("correct_option",j.target.value),placeholder:t.type==="sa"?"V d: {tinh: !a! + !b!}":"V d: C hoc {tinh: !a! + !b!}",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gii thch"}),i.jsx("textarea",{value:t.explanation,onChange:j=>y("explanation",j.target.value),placeholder:"V d: Ta c !a! + !b! = {tinh: !a! + !b!}",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"S cu xem trc:"}),i.jsx("input",{type:"number",min:"1",max:"10",value:v,onChange:j=>x(parseInt(j.target.value)||3),className:"w-20 p-1 border border-gray-300 rounded text-center"})]}),i.jsx("button",{onClick:_,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Xem trc cu hi"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Xem trc"}),g&&d.length>0?i.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:d.map((j,E)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[i.jsxs("h4",{className:"font-medium text-sm text-gray-600 mb-2",children:["Bin th ",E+1]}),i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"font-medium text-gray-800",children:j.question})}),(t.type==="mcq"||t.type==="msq")&&i.jsxs("div",{className:"space-y-1 mb-3 text-sm",children:[j.option_a&&i.jsxs("div",{children:["A. ",j.option_a]}),j.option_b&&i.jsxs("div",{children:["B. ",j.option_b]}),j.option_c&&i.jsxs("div",{children:["C. ",j.option_c]}),j.option_d&&i.jsxs("div",{children:["D. ",j.option_d]})]}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"text-green-600 font-medium",children:["p n: ",j.correct_option]}),j.explanation&&i.jsxs("div",{className:"text-gray-600 mt-1",children:["Gii thch: ",j.explanation]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Bin: ",Object.entries(j.variables).map(([T,F])=>`${T}=${F}`).join(", ")]})]},E))}):i.jsx("div",{className:"text-center text-gray-500 py-8",children:'Nhn "Xem trc cu hi"  xem cc bin th'})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{onClick:N,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors font-medium",children:"Lu cu hi"})]})]})})})}const jge=({questionTypes:r,onQuestionAdded:e})=>{const[t,n]=he.useState({question_type_id:0,type:"mcq",question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"medium",tags:"",is_dynamic:!1}),[a,s]=he.useState(!1),[o,l]=he.useState(!1),[u,c]=he.useState(null),[d,h]=he.useState(!1),[g,m]=he.useState(""),[v,x]=he.useState([]),[b,y]=he.useState([]),[S,_]=he.useState([]),[N,j]=he.useState([]),[E,T]=he.useState(0),[F,A]=he.useState(0),[R,I]=he.useState(0);Na.useEffect(()=>{(async()=>{try{const V=await Bt.getSubjects();x(V)}catch(V){console.error("Error loading subjects:",V)}})()},[]),Na.useEffect(()=>{(async()=>{if(E===0){y([]),_([]),j([]);return}try{const V=await Bt.getChaptersBySubject(E);y(V),_([]),j([])}catch(V){console.error("Error loading chapters:",V)}})()},[E]),Na.useEffect(()=>{(async()=>{if(F===0){_([]),j([]);return}try{const V=await Bt.getLessonsByChapter(F);_(V),j([])}catch(V){console.error("Error loading lessons:",V)}})()},[F]),Na.useEffect(()=>{(async()=>{if(R===0){j([]);return}try{const V=await Bt.getQuestionTypesByLesson(R);j(V)}catch(V){console.error("Error loading question types:",V)}})()},[R]);const O=async X=>{X.preventDefault(),s(!0);try{const V={...t,tags:t.tags?t.tags.split(",").map(se=>se.trim()):[]};await Bt.createQuestion(V),alert("Thm cu hi thnh cng!"),n({question_type_id:0,type:"mcq",question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"easy",tags:"",is_dynamic:!1}),e&&e()}catch(V){console.error("Error creating question:",V),alert("C li xy ra: "+V)}finally{s(!1)}},U=X=>{X&&(n(V=>({...V,question_text:X.question||"",option_a:X.option_a||"",option_b:X.option_b||"",option_c:X.option_c||"",option_d:X.option_d||"",correct_option:X.correct_option||"",explanation:X.explanation||"",type:X.type||"mcq",is_dynamic:X.isDynamic||!1})),l(!1),alert(" to cu hi ng t AI!"))},[D,H]=he.useState([]),[P,G]=he.useState(""),ue=async()=>{if(!g.trim()){H(["Vui lng dn ni dung JSON vo khung text"]);return}H([]),G(""),h(!0),await pe(g)},le=async X=>{const V=X.target.files?.[0];if(V){H([]),G(""),c(V),h(!0);try{const se=await V.text();await pe(se)}catch{H(["Khng th c file. Vui lng kim tra file khng b hng."]),h(!1)}}},pe=async X=>{const V=[];try{let se;try{se=JSON.parse(X)}catch(z){const re=z.message?.match(/position (\d+)/);if(re){const ne=parseInt(re[1]),ie=X.substring(0,ne).split(`
`),oe=ie.length,ye=ie[ie.length-1].length+1;V.push(`Li c php JSON ti dng ${oe}, ct ${ye}`)}else V.push("Li c php JSON: "+(z.message||"Khng th phn tch file"));V.push('Gi : Kim tra du ngoc {}, [], du phy v du nhy kp ""'),H(V),h(!1);return}if(!se.questions){V.push('Thiu trng "questions" trong JSON'),V.push('JSON cn c cu trc: { "questions": [...] }'),H(V),h(!1);return}if(!Array.isArray(se.questions)){V.push('Trng "questions" phi l mt mng []'),H(V),h(!1);return}if(se.questions.length===0){V.push('Mng "questions" khng c cu hi no'),H(V),h(!1);return}const ae=[],W=[];if(se.questions.forEach((z,re)=>{const ne=re+1,ie=[],oe=z.question||z.question_text||"";oe.trim()||ie.push(`Cu ${ne}: Thiu ni dung cu hi (question hoc question_text)`);const ye=z.type||"mcq";if(ye==="mcq"||ye==="msq")if(z.option_a?.trim()||ie.push(`Cu ${ne}: Thiu p n A`),z.option_b?.trim()||ie.push(`Cu ${ne}: Thiu p n B`),!z.option_c?.trim()&&z.option_d?.trim(),!z.correct_option?.trim())ie.push(`Cu ${ne}: Thiu p n ng (correct_option)`);else{const ge=z.correct_option.toUpperCase();if(ye==="mcq")["A","B","C","D"].includes(ge)||ie.push(`Cu ${ne}: correct_option phi l A, B, C hoc D (hin ti: "${z.correct_option}")`);else if(ye==="msq"){const ee=ge.split(",").map(Q=>Q.trim()),k=["A","B","C","D"];ee.filter(Q=>!k.includes(Q)).length>0&&ie.push(`Cu ${ne}: correct_option cho MSQ ch chp nhn A, B, C, D (hin ti: "${z.correct_option}")`),ee.length<2&&ie.push(`Cu ${ne}: MSQ cn t nht 2 p n ng (hin ti: "${z.correct_option}")`)}}["mcq","msq","sa","tf","tl"].includes(ye)||ie.push(`Cu ${ne}: Loi cu hi khng hp l (type: "${ye}"). Chp nhn: mcq, msq, sa, tf, tl`),z.difficulty&&(["easy","medium","hard"].includes(z.difficulty)||ie.push(`Cu ${ne}: difficulty khng hp l ("${z.difficulty}"). Chp nhn: easy, medium, hard`)),ie.length>0?W.push(...ie):ae.push({question_type_id:t.question_type_id||se.question_type_id,type:ye,question_text:oe,option_a:z.option_a||"",option_b:z.option_b||"",option_c:z.option_c||"",option_d:z.option_d||"",correct_option:z.correct_option?.toUpperCase()||"",explanation:z.explanation||"",difficulty:z.difficulty||z.difficulty_level||"medium",tags:Array.isArray(z.tags)?z.tags:z.tags?[z.tags]:[],is_dynamic:z.is_dynamic||!1})}),W.length>0){V.push(`Pht hin ${W.length} li trong ${se.questions.length} cu hi:`),V.push(...W.slice(0,10)),W.length>10&&V.push(`... v ${W.length-10} li khc`),H(V),h(!1);return}if(!ae[0]?.question_type_id){V.push("Cha chn dng bi  import cu hi"),V.push("Vui lng chn Mn hc  Chng  Bi hc  Dng bi trc khi import"),V.push('Hoc thm "question_type_id" vo file JSON'),H(V),h(!1);return}try{await dM.bulkCreateQuestions(ae),G(` Import thnh cng ${ae.length} cu hi!`),m(""),e&&e()}catch(z){console.error("Bulk import error:",z),V.push("Li khi lu cu hi vo database"),V.push(z.message||"Vui lng th li"),H(V)}}catch(se){console.error("Error importing JSON:",se),V.push("C li khng xc nh: "+(se.message||se)),H(V)}finally{h(!1)}},de=()=>{const V="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({question_type_id:0,questions:[{type:"mcq",question:"2 + 2 bng bao nhiu?",question_text:"2 + 2 bng bao nhiu?",option_a:"3",option_b:"4",option_c:"5",option_d:"6",correct_option:"B",explanation:"2 + 2 = 4",difficulty:"easy"},{type:"mcq",question:"Th  ca Vit Nam l g?",question_text:"Th  ca Vit Nam l g?",option_a:"H Ch Minh",option_b:"H Ni",option_c:" Nng",option_d:"Hu",correct_option:"B",explanation:"H Ni l th  ca Vit Nam",difficulty:"easy"},{type:"mcq",question:"Nc no c din tch ln nht th gii?",question_text:"Nc no c din tch ln nht th gii?",option_a:"Trung Quc",option_b:"Canada",option_c:"Nga",option_d:"M",correct_option:"C",explanation:"Nga c din tch ln nht th gii",difficulty:"medium"},{type:"sa",question:"Vit tn ca hnh tinh th 3 tnh t Mt Tri?",question_text:"Vit tn ca hnh tinh th 3 tnh t Mt Tri?",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"Tri t",explanation:"Tri t l hnh tinh th 3 tnh t Mt Tri",difficulty:"easy"},{type:"msq",question:"Chn cc s chn (c th chn nhiu p n)?",question_text:"Chn cc s chn (c th chn nhiu p n)?",option_a:"2",option_b:"3",option_c:"4",option_d:"5",correct_option:"A,C",explanation:"S chn l s chia ht cho 2: 2 v 4",difficulty:"easy"}]},null,2)),se=document.createElement("a");se.setAttribute("href",V),se.setAttribute("download","sample_questions.json"),document.body.appendChild(se),se.click(),se.remove()},L=()=>t.type==="sa"||t.type==="tl"?null:i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:"Cc la chn"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"La chn A"}),i.jsx("input",{type:"text",value:t.option_a,onChange:X=>n(V=>({...V,option_a:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:t.type==="mcq"||t.type==="msq"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"La chn B"}),i.jsx("input",{type:"text",value:t.option_b,onChange:X=>n(V=>({...V,option_b:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:t.type==="mcq"||t.type==="msq"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"La chn C"}),i.jsx("input",{type:"text",value:t.option_c,onChange:X=>n(V=>({...V,option_c:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:t.type==="mcq"||t.type==="msq"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"La chn D"}),i.jsx("input",{type:"text",value:t.option_d,onChange:X=>n(V=>({...V,option_d:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:t.type==="mcq"||t.type==="msq"})]})]})]});return i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-6",children:" Thm cu hi mi"}),i.jsx("div",{className:"mb-6 flex justify-end",children:i.jsxs("button",{type:"button",onClick:()=>l(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 shadow-sm font-medium flex items-center gap-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"To cu hi ng"})]})}),i.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsx("h3",{className:"font-medium text-green-900 mb-3",children:" Import cu hi t file JSON"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"Chn file JSON"}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("label",{className:"flex-1",children:i.jsx("input",{type:"file",accept:".json",onChange:le,className:`w-full text-sm text-gray-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-md file:border-0
                  file:text-sm file:font-semibold
                  file:bg-green-50 file:text-green-700
                  hover:file:bg-green-100`,disabled:d})})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-green-800 mb-2",children:"Hoc dn JSON trc tip vo y"}),i.jsx("textarea",{value:g,onChange:X=>m(X.target.value),placeholder:'{"questions": [{"type": "mcq", "question": "...", "option_a": "...", ...}]}',rows:8,className:"w-full px-3 py-2 border border-green-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 font-mono text-sm",disabled:d}),i.jsx("button",{onClick:ue,disabled:d||!g.trim(),className:"mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 text-sm font-medium",children:d?"ang x l...":" Import t JSON text"})]}),d&&i.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"ang x l..."]}),P&&i.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg mb-3",children:i.jsx("p",{className:"text-green-700 font-medium",children:P})}),D.length>0&&i.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg space-y-2 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-semibold",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Li Import JSON"})]}),i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-600",children:D.map((X,V)=>i.jsx("li",{children:X},V))}),i.jsx("button",{type:"button",onClick:()=>H([]),className:"mt-2 text-xs text-red-500 hover:text-red-700 underline",children:"ng thng bo"})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{onClick:de,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Ti file mu"})}),i.jsx("p",{className:"mt-2 text-sm text-green-700",children:' File JSON cn c cu trc vi trng "questions" l mt mng cc cu hi. Bn c th ti file mu  tham kho.'})]}),i.jsxs("form",{onSubmit:O,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mn hc *"}),i.jsxs("select",{value:E,onChange:X=>{T(Number(X.target.value)||0),A(0),I(0),n(V=>({...V,question_type_id:0}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[i.jsx("option",{value:"0",children:"-- Chn mn hc --"}),v.map(X=>i.jsx("option",{value:X.id,children:X.name},X.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chng *"}),i.jsxs("select",{value:F,onChange:X=>{A(Number(X.target.value)||0),I(0),n(V=>({...V,question_type_id:0}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:E===0,required:!0,children:[i.jsx("option",{value:"0",children:"-- Chn chng --"}),b.map(X=>i.jsx("option",{value:X.id,children:X.name},X.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bi hc *"}),i.jsxs("select",{value:R,onChange:X=>{I(Number(X.target.value)||0),n(V=>({...V,question_type_id:0}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:F===0,required:!0,children:[i.jsx("option",{value:"0",children:"-- Chn bi hc --"}),S.map(X=>i.jsx("option",{value:X.id,children:X.name},X.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dng bi *"}),i.jsxs("select",{value:t.question_type_id,onChange:X=>n(V=>({...V,question_type_id:Number(X.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:R===0,required:!0,children:[i.jsx("option",{value:"0",children:"-- Chn dng bi --"}),N.map(X=>i.jsxs("option",{value:X.id,children:[X.name," ",X.code?`(${X.code})`:""]},X.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi cu hi"}),i.jsxs("select",{value:t.type,onChange:X=>n(V=>({...V,type:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"mcq",children:"Trc nghim (MCQ)"}),i.jsx("option",{value:"msq",children:"ng/Sai (MSQ)"}),i.jsx("option",{value:"sa",children:"Tr li ngn (SA)"}),i.jsx("option",{value:"tl",children:"T lun (TL)"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_dynamic",checked:t.is_dynamic,onChange:X=>n(V=>({...V,is_dynamic:X.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"is_dynamic",className:"ml-2 block text-sm text-gray-900",children:"Cu hi ng (s dng bin s)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung cu hi *"}),i.jsx("textarea",{value:t.question_text,onChange:X=>n(V=>({...V,question_text:X.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Nhp ni dung cu hi...",required:!0})]}),L(),t.type!=="sa"&&t.type!=="tl"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n ng *"}),t.type==="mcq"?i.jsx("input",{type:"text",value:t.correct_option,onChange:X=>n(V=>({...V,correct_option:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Nhp p n ng...",required:!0}):t.type==="mcq"?i.jsxs("select",{value:t.correct_option,onChange:X=>n(V=>({...V,correct_option:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:[i.jsx("option",{value:"",children:"-- Chn p n ng --"}),i.jsx("option",{value:"A",children:"A"}),i.jsx("option",{value:"B",children:"B"}),i.jsx("option",{value:"C",children:"C"}),i.jsx("option",{value:"D",children:"D"})]}):i.jsx("input",{type:"text",value:t.correct_option,onChange:X=>n(V=>({...V,correct_option:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"V d: A,C (cc p n ng cch nhau bi du phy)",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Li gii chi tit"}),i.jsx("textarea",{value:t.explanation,onChange:X=>n(V=>({...V,explanation:X.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Nhp li gii chi tit..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" kh"}),i.jsxs("select",{value:t.difficulty,onChange:X=>n(V=>({...V,difficulty:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (cch nhau bi du phy)"}),i.jsx("input",{type:"text",value:t.tags,onChange:X=>n(V=>({...V,tags:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"V d: phng trnh, i s, c bn"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 disabled:bg-gray-400",children:a?"ang thm...":" Thm cu hi"})})]}),o&&i.jsx(Sge,{onSave:U,onCancel:()=>l(!1)})]})},Ege=Na.lazy(()=>gw(()=>import("./BulkImport-BxAyBTOu.js"),__vite__mapDeps([0,1,2]),import.meta.url)),Age=()=>i.jsx(Na.Suspense,{fallback:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti Import TXT..."})]}),children:i.jsx(Ege,{})}),Tge=()=>{const[r,e]=he.useState([]),[t,n]=he.useState([]),[a,s]=he.useState(!1),[o,l]=he.useState(null),[u,c]=he.useState({}),[d,h]=he.useState([]),[g,m]=he.useState([]),[v,x]=he.useState([]),[b,y]=he.useState([]),[S,_]=he.useState(new Set),[N,j]=he.useState(!1),[E,T]=he.useState(!1),[F,A]=he.useState(0),[R,I]=he.useState(1),O=20,[U,D]=he.useState({subjectId:0,chapterId:0,lessonId:0,questionTypeId:0}),[H,P]=he.useState([]),[G,ue]=he.useState([]),[le,pe]=he.useState([]);he.useEffect(()=>{L()},[]),he.useEffect(()=>{U.subjectId>0&&de()},[U.subjectId,U.chapterId,U.lessonId,U.questionTypeId]),he.useEffect(()=>{X()},[r,U]),he.useEffect(()=>{if(U.subjectId>0){const J=g.filter(K=>K.subject_id===U.subjectId);P(J),D(K=>({...K,chapterId:0,lessonId:0,questionTypeId:0})),ue([]),pe([])}else P(g),ue(v),pe(b)},[U.subjectId,g,v,b]),he.useEffect(()=>{if(U.chapterId>0){const J=v.filter(K=>K.chapter_id===U.chapterId);ue(J),D(K=>({...K,lessonId:0,questionTypeId:0})),pe([])}else if(U.subjectId>0){const K=g.filter(me=>me.subject_id===U.subjectId).map(me=>me.id),te=v.filter(me=>K.includes(me.chapter_id));ue(te)}else ue(v)},[U.chapterId,U.subjectId,g,v]),he.useEffect(()=>{if(U.lessonId>0){const J=b.filter(K=>K.lesson_id===U.lessonId);pe(J),D(K=>({...K,questionTypeId:0}))}else if(U.chapterId>0){const J=b.filter(K=>K.lesson_id===U.lessonId);pe(J)}else if(U.subjectId>0){const K=g.filter(xe=>xe.subject_id===U.subjectId).map(xe=>xe.id),me=v.filter(xe=>K.includes(xe.chapter_id)).map(xe=>xe.id),fe=b.filter(xe=>me.includes(xe.lesson_id));pe(fe)}else pe(b)},[U.lessonId,U.chapterId,U.subjectId,g,v,b]);const de=async()=>{try{s(!0);const J=await Bt.getFullHierarchy();console.log(" Loaded hierarchy:",J);const K=[];let te=J.questionTypes;if(U.questionTypeId>0)te=te.filter(me=>me.id===U.questionTypeId);else if(U.lessonId>0)te=te.filter(me=>me.lesson_id===U.lessonId);else if(U.chapterId>0){const fe=J.lessons.filter(xe=>xe.chapter_id===U.chapterId).map(xe=>xe.id);te=te.filter(xe=>fe.includes(xe.lesson_id))}else if(U.subjectId>0){const fe=J.chapters.filter(je=>je.subject_id===U.subjectId).map(je=>je.id),_e=J.lessons.filter(je=>fe.includes(je.chapter_id)).map(je=>je.id);te=te.filter(je=>_e.includes(je.lesson_id))}for(const me of te)try{const fe=await Bt.getQuestionsByType(me.id,{limit:1e4}),xe=J.lessons.find(Be=>Be.id===me.lesson_id),_e=xe?J.chapters.find(Be=>Be.id===xe.chapter_id):void 0,je=_e?J.subjects.find(Be=>Be.id===_e.subject_id):void 0;fe.forEach(Be=>{K.push({...Be,subject:je,chapter:_e,lesson:xe,questionType:me})})}catch(fe){console.error(`Error loading questions for type ${me.id}:`,fe)}console.log(" Loaded questions:",K.length),e(K)}catch(J){console.error("Error loading questions:",J),alert("C li xy ra khi ti danh sch cu hi: "+J)}finally{s(!1)}},L=async()=>{try{const J=await Bt.getSubjects();h(J);const K=[],te=[],me=[];for(const fe of J){const xe=await Bt.getChaptersBySubject(fe.id);K.push(...xe);for(const _e of xe){const je=await Bt.getLessonsByChapter(_e.id);te.push(...je);for(const Be of je){const Re=await Bt.getQuestionTypesByLesson(Be.id);me.push(...Re)}}}m(K),x(te),y(me),P(K),ue(te),pe(me)}catch(J){console.error("Error loading hierarchy:",J)}},X=()=>{let J=[...r];U.subjectId>0&&(J=J.filter(K=>K.subject?.id===U.subjectId)),U.chapterId>0&&(J=J.filter(K=>K.chapter?.id===U.chapterId)),U.lessonId>0&&(J=J.filter(K=>K.lesson?.id===U.lessonId)),U.questionTypeId>0&&(J=J.filter(K=>K.questionType?.id===U.questionTypeId)),n(J),I(1)},V=(J,K)=>{D(te=>({...te,[J]:Number(K)||0}))},se=J=>{console.log("Editing question:",J);let K="";if(J.tags){if(Array.isArray(J.tags))K=J.tags.join(", ");else if(typeof J.tags=="string")try{const te=JSON.parse(J.tags);Array.isArray(te)?K=te.join(", "):K=J.tags}catch{K=J.tags}}l(J),c({question_type_id:J.question_type_id||"",type:J.type||"mcq",question_text:J.question_text||"",option_a:J.option_a||"",option_b:J.option_b||"",option_c:J.option_c||"",option_d:J.option_d||"",correct_option:J.correct_option||"",explanation:J.explanation||"",difficulty:J.difficulty||"medium",tags:K,is_dynamic:J.is_dynamic||!1})},ae=()=>{l(null),c({})},W=async()=>{if(o)try{const J={question_type_id:u.question_type_id,type:u.type,question_text:u.question_text,option_a:u.option_a||void 0,option_b:u.option_b||void 0,option_c:u.option_c||void 0,option_d:u.option_d||void 0,correct_option:u.correct_option,explanation:u.explanation,difficulty:u.difficulty,tags:u.tags?u.tags.split(",").map(K=>K.trim()).filter(K=>K.length>0):[],is_dynamic:u.is_dynamic};console.log("Updating question with data:",J),await Bt.updateQuestion(o.id,J),alert("Cp nht cu hi thnh cng!"),e(K=>K.map(te=>te.id===o.id?{...te,...J,tags:J.tags}:te)),ae()}catch(J){console.error("Error updating question:",J);let K="C li xy ra khi cp nht cu hi";if(J instanceof Error)K+=": "+J.message;else if(typeof J=="object"&&J!==null){const te=J;te.message?K+=": "+te.message:te.error?K+=": "+te.error:K+=": "+JSON.stringify(J)}else K+=": "+String(J);alert(K)}},z=async J=>{if(confirm("Bn c chc chn mun xa cu hi ny?"))try{await Bt.deleteQuestion(J),alert("Xa cu hi thnh cng!"),await de()}catch(K){console.error("Error deleting question:",K),alert("C li xy ra khi xa cu hi: "+K)}},re=J=>{const K=new Set(S);K.has(J)?K.delete(J):K.add(J),_(K)},ne=()=>{if(S.size===ee.length)_(new Set);else{const J=new Set(ee.map(K=>K.id));_(J)}},ie=async()=>{if(S.size===0){alert("Vui lng chn t nht mt cu hi");return}T(!0)},oe=async()=>{if(F===0){alert("Vui lng chn dng bi mun chuyn n");return}const J=b.find(K=>K.id===F);if(!J){alert("Khng tm thy dng bi vi ID ny");return}if(confirm(`Bn c chc mun chuyn ${S.size} cu hi sang dng "${J.name}"?`))try{s(!0);let K=0,te=0;for(const me of S)try{await Bt.updateQuestion(me,{question_type_id:F}),K++}catch(fe){console.error(`Error moving question ${me}:`,fe),te++}alert(` chuyn ${K} cu hi thnh cng${te>0?`, ${te} cu hi li`:""}`),_(new Set),j(!1),T(!1),A(0),await de()}catch(K){console.error("Error in bulk move:",K),alert("C li xy ra khi chuyn cu hi hng lot")}finally{s(!1)}},ye=async()=>{if(S.size===0){alert("Vui lng chn t nht mt cu hi");return}if(confirm(`Bn c chc chn mun xa ${S.size} cu hi  chn?`))try{s(!0);let J=0,K=0;for(const te of S)try{await Bt.deleteQuestion(te),J++}catch(me){console.error(`Error deleting question ${te}:`,me),K++}alert(` xa ${J} cu hi thnh cng${K>0?`, ${K} cu hi li`:""}`),_(new Set),j(!1),await de()}catch(J){console.error("Error in bulk delete:",J),alert("C li xy ra khi xa cu hi hng lot")}finally{s(!1)}},M=R*O,ge=M-O,ee=t.slice(ge,M),k=Math.ceil(t.length/O),B=J=>I(J),Q=()=>{if(k<=1)return null;const J=[],K=5;let te=Math.max(1,R-Math.floor(K/2)),me=Math.min(k,te+K-1);me-te+1<K&&(te=Math.max(1,me-K+1));for(let fe=te;fe<=me;fe++)J.push(fe);return i.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6",children:[i.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[i.jsx("button",{onClick:()=>B(R-1),disabled:R===1,className:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Trc"}),i.jsx("button",{onClick:()=>B(R+1),disabled:R===k,className:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"Sau"})]}),i.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["Hin th ",i.jsx("span",{className:"font-medium",children:ge+1})," n"," ",i.jsx("span",{className:"font-medium",children:Math.min(M,t.length)})," trong"," ",i.jsx("span",{className:"font-medium",children:t.length})," kt qu"]})}),i.jsx("div",{children:i.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[i.jsxs("button",{onClick:()=>B(R-1),disabled:R===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:"Previous"}),i.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"})})]}),J.map(fe=>i.jsx("button",{onClick:()=>B(fe),className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ${R===fe?"z-10 bg-indigo-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"}`,children:fe},fe)),i.jsxs("button",{onClick:()=>B(R+1),disabled:R===k,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50",children:[i.jsx("span",{className:"sr-only",children:"Next"}),i.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})})]})]})})]})]})},Z=J=>o?.id!==J.id?null:i.jsx("tr",{className:"bg-blue-50 border-l-4 border-blue-500",children:i.jsx("td",{colSpan:6,className:"px-6 py-6",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-blue-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-lg font-semibold text-blue-900 flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""}),"Chnh sa cu hi"]}),i.jsx("button",{onClick:ae,className:"text-gray-400 hover:text-gray-600 text-xl",title:"ng",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dng bi"}),i.jsxs("select",{value:u.question_type_id||"",onChange:K=>c({...u,question_type_id:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:"Chn dng bi"}),b.map(K=>i.jsx("option",{value:K.id,children:K.name},K.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi cu hi"}),i.jsxs("select",{value:u.type,onChange:K=>c({...u,type:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"mcq",children:"Trc nghim (MCQ)"}),i.jsx("option",{value:"msq",children:"ng/Sai (MSQ)"}),i.jsx("option",{value:"sa",children:"Tr li ngn (SA)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung cu hi"}),i.jsx("textarea",{value:u.question_text,onChange:K=>c({...u,question_text:K.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp ni dung cu hi..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["p n ng",i.jsx("span",{className:"text-xs text-gray-500 ml-2",children:u.type==="sa"?"(Nhp cu tr li)":u.type==="mcq"?"(Chn 1 p n)":"(Nhp cc p n ng, cch nhau bi du phy)"})]}),u.type==="sa"?i.jsx("input",{type:"text",value:u.correct_option,onChange:K=>c({...u,correct_option:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp p n ng cho cu tr li ngn..."}):u.type==="mcq"?i.jsxs("select",{value:u.correct_option,onChange:K=>c({...u,correct_option:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"",children:"-- Chn p n ng --"}),i.jsx("option",{value:"A",children:"A"}),i.jsx("option",{value:"B",children:"B"}),i.jsx("option",{value:"C",children:"C"}),i.jsx("option",{value:"D",children:"D"})]}):u.type==="msq"?i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",value:u.correct_option,onChange:K=>c({...u,correct_option:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"V d: A,C hoc B,D (cc p n ng cch nhau bi du phy)"}),i.jsx("div",{className:"text-xs text-gray-500",children:" i vi cu hi ng/sai: nhp cc la chn ng (A, B, C, D) cch nhau bi du phy"})]}):i.jsx("input",{type:"text",value:u.correct_option,onChange:K=>c({...u,correct_option:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp p n ng..."})]})]}),i.jsxs("div",{className:"space-y-4",children:[(u.type==="mcq"||u.type==="msq")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cc la chn"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"La chn A"}),i.jsx("input",{type:"text",value:u.option_a||"",onChange:K=>c({...u,option_a:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp la chn A..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"La chn B"}),i.jsx("input",{type:"text",value:u.option_b||"",onChange:K=>c({...u,option_b:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp la chn B..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"La chn C"}),i.jsx("input",{type:"text",value:u.option_c||"",onChange:K=>c({...u,option_c:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp la chn C..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"La chn D"}),i.jsx("input",{type:"text",value:u.option_d||"",onChange:K=>c({...u,option_d:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp la chn D..."})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Li gii chi tit"}),i.jsx("textarea",{value:u.explanation,onChange:K=>c({...u,explanation:K.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhp li gii chi tit..."})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" kh"}),i.jsxs("select",{value:u.difficulty,onChange:K=>c({...u,difficulty:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (cch nhau bi du phy)"}),i.jsx("input",{type:"text",value:u.tags||"",onChange:K=>c({...u,tags:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"V d: phng trnh, i s, c bn"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:ae,className:"px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 transition-colors",children:" Hy"}),i.jsxs("button",{onClick:W,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:""}),"Lu thay i"]})]})]})})});return a?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"B lc"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lp"}),i.jsxs("select",{value:U.subjectId,onChange:J=>V("subjectId",J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Chn lp  ti cu hi"}),d.map(J=>i.jsx("option",{value:J.id,children:J.name},J.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chng"}),i.jsxs("select",{value:U.chapterId,onChange:J=>V("chapterId",J.target.value),disabled:!U.subjectId,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:[i.jsx("option",{value:"",children:"Tt c cc chng"}),H.map(J=>i.jsx("option",{value:J.id,children:J.name},J.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bi"}),i.jsxs("select",{value:U.lessonId,onChange:J=>V("lessonId",J.target.value),disabled:!U.chapterId&&!U.subjectId,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:[i.jsx("option",{value:"",children:"Tt c cc bi"}),G.map(J=>i.jsx("option",{value:J.id,children:J.name},J.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dng ton"}),i.jsxs("select",{value:U.questionTypeId,onChange:J=>V("questionTypeId",J.target.value),disabled:!U.lessonId&&!U.chapterId&&!U.subjectId,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50",children:[i.jsx("option",{value:"",children:"Tt c cc dng ton"}),le.map(J=>i.jsx("option",{value:J.id,children:J.name},J.id))]})]})]})]}),S.size>0&&i.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg rounded-lg p-4 mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"font-semibold",children:["  chn ",S.size," cu hi"]}),i.jsx("button",{onClick:()=>_(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md text-sm transition-colors",children:"B chn tt c"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:ie,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md font-medium transition-colors flex items-center gap-2",children:[i.jsx("span",{children:""}),"Chuyn dng hng lot"]}),i.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-md font-medium transition-colors flex items-center gap-2",children:[i.jsx("span",{children:""}),"Xa hng lot"]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("h3",{className:"text-lg font-semibold",children:["Danh sch cu hi (",t.length,")"]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left",children:i.jsx("input",{type:"checkbox",checked:S.size===ee.length&&ee.length>0,onChange:ne,className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cu hi"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dng bi"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Loi"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" kh"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hnh ng"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(J=>((J.type==="msq"||J.type==="sa")&&console.log("Question data:",{id:J.id,type:J.type,question_text:J.question_text,correct_option:J.correct_option,options:{a:J.option_a,b:J.option_b,c:J.option_c,d:J.option_d}}),i.jsxs(Na.Fragment,{children:[i.jsxs("tr",{className:`${o?.id===J.id?"bg-blue-50":"hover:bg-gray-50"} transition-colors`,children:[i.jsx("td",{className:"px-6 py-4",children:i.jsx("input",{type:"checkbox",checked:S.has(J.id),onChange:()=>re(J.id),className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),i.jsx("td",{className:"px-6 py-4 whitespace-normal max-w-md",children:i.jsx("div",{className:"text-sm text-gray-900 line-clamp-2",children:J.question_text})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-gray-900 max-w-xs",title:`${J.subject?.name}  ${J.chapter?.name}  ${J.lesson?.name}`,children:J.questionType?.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:J.type==="mcq"?"Trc nghim":J.type==="msq"?"ng/Sai":"Tr li ngn"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${J.difficulty==="easy"?"bg-green-100 text-green-800":J.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:J.difficulty==="easy"?"D":J.difficulty==="medium"?"Trung bnh":"Kh"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>se(J),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${o?.id===J.id?"bg-blue-100 text-blue-700 border border-blue-300":"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50"}`,children:o?.id===J.id?" ang sa":" Sa"}),i.jsx("button",{onClick:()=>z(J.id),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-3 py-1 rounded-md text-sm font-medium transition-colors",children:" Xa"})]})})]}),Z(J)]},J.id)))})]})}),t.length===0&&!a&&i.jsx("div",{className:"text-center py-12",children:i.jsx("div",{className:"text-gray-500",children:U.subjectId===0?"Vui lng chn lp  ti cu hi":"Khng tm thy cu hi no ph hp vi b lc"})}),Q()]}),E&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-lg",children:[i.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx("span",{children:""}),"Chuyn cu hi sang dng khc"]}),i.jsxs("p",{className:"text-indigo-100 mt-2",children:[" chn ",S.size," cu hi"]})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn dng bi mun chuyn n"}),i.jsxs("select",{value:F,onChange:J=>A(Number(J.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:0,children:"-- Chn dng bi --"}),b.map(J=>{const K=v.find(fe=>fe.id===J.lesson_id),te=K?g.find(fe=>fe.id===K.chapter_id):void 0,me=te?d.find(fe=>fe.id===te.subject_id):void 0;return i.jsxs("option",{value:J.id,children:[J.name," (",me?.name,"  ",te?.name,"  ",K?.name,")"]},J.id)})]})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>{T(!1),A(0)},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsxs("button",{onClick:oe,disabled:F===0,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i.jsx("span",{children:""}),"Xc nhn chuyn"]})]})]})]})}),i.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }
          .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
          }
        `}})]})},Cge="https://hoc.io.vn/api";function Dge(){return localStorage.getItem("auth_token")}async function Kn(r,e={}){const t=Dge(),n={"Content-Type":"application/json",...e.headers};t&&(n.Authorization=`Bearer ${t}`);const a=await fetch(`${Cge}/admin/${r}`,{...e,headers:n});if(!a.ok){const s=await a.json().catch(()=>({error:"Request failed"}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}class mn{static extractVideoId(e,t){try{if(t==="youtube"){const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/^([a-zA-Z0-9_-]{11})$/];for(const a of n){const s=e.match(a);if(s)return s[1]}}else if(t==="vimeo"){const n=e.match(/vimeo\.com\/(\d+)/);if(n)return n[1]}}catch(n){console.error("Error extracting video ID:",n)}return null}static async createVideo(e){try{return!e.video_id&&e.video_url&&(e.video_id=this.extractVideoId(e.video_url,e.video_type)||void 0),(await Kn("lesson-content-api.php?path=videos",{method:"POST",body:JSON.stringify(e)})).data}catch(t){return console.error("Error creating video:",t),null}}static async getVideosForLesson(e){try{return(await Kn(`lesson-content-api.php?path=videos&lesson_id=${e}`)).data||[]}catch(t){return console.error("Error fetching videos:",t),[]}}static async updateVideo(e,t){try{return await Kn(`lesson-content-api.php?path=videos/${e}`,{method:"PUT",body:JSON.stringify(t)}),!0}catch(n){return console.error("Error updating video:",n),!1}}static async deleteVideo(e){try{return await Kn(`lesson-content-api.php?path=videos/${e}`,{method:"DELETE"}),!0}catch(t){return console.error("Error deleting video:",t),!1}}static async createDocument(e){try{return(await Kn("lesson-content-api.php?path=documents",{method:"POST",body:JSON.stringify(e)})).data}catch(t){return console.error("Error creating document:",t),null}}static async getDocumentsForLesson(e){try{return(await Kn(`lesson-content-api.php?path=documents&lesson_id=${e}`)).data||[]}catch(t){return console.error("Error fetching documents:",t),[]}}static async updateDocument(e,t){try{return await Kn(`lesson-content-api.php?path=documents/${e}`,{method:"PUT",body:JSON.stringify(t)}),!0}catch(n){return console.error("Error updating document:",n),!1}}static async deleteDocument(e){try{return await Kn(`lesson-content-api.php?path=documents/${e}`,{method:"DELETE"}),!0}catch(t){return console.error("Error deleting document:",t),!1}}static async incrementDownloadCount(e){try{console.log("Increment download count for:",e)}catch(t){console.error("Error incrementing download count:",t)}}static async createContent(e){try{return(await Kn("lesson-content-api.php?path=content",{method:"POST",body:JSON.stringify(e)})).data}catch(t){return console.error("Error creating content:",t),null}}static async getContentForLesson(e){try{return(await Kn(`lesson-content-api.php?path=content&lesson_id=${e}`)).data||[]}catch(t){return console.error("Error fetching content:",t),[]}}static async updateContent(e,t){try{return await Kn(`lesson-content-api.php?path=content/${e}`,{method:"PUT",body:JSON.stringify(t)}),!0}catch(n){return console.error("Error updating content:",n),!1}}static async deleteContent(e){try{return await Kn(`lesson-content-api.php?path=content/${e}`,{method:"DELETE"}),!0}catch(t){return console.error("Error deleting content:",t),!1}}static async createExercise(e){try{return(await Kn("lesson-content-api.php?path=exercises",{method:"POST",body:JSON.stringify(e)})).data}catch(t){return console.error("Error creating exercise:",t),null}}static async getExercisesForLesson(e){try{return(await Kn(`lesson-content-api.php?path=exercises&lesson_id=${e}`)).data||[]}catch(t){return console.error("Error fetching exercises:",t),[]}}static async updateExercise(e,t){try{return await Kn(`lesson-content-api.php?path=exercises/${e}`,{method:"PUT",body:JSON.stringify(t)}),!0}catch(n){return console.error("Error updating exercise:",n),!1}}static async deleteExercise(e){try{return await Kn(`lesson-content-api.php?path=exercises/${e}`,{method:"DELETE"}),!0}catch(t){return console.error("Error deleting exercise:",t),!1}}static async getLessonWithContent(e){try{const t=await Kn(`lesson-content-api.php?path=all&lesson_id=${e}`);return t.data?{id:e,chapter_id:"",name:"",code:"",order_index:0,is_published:!1,view_count:0,is_active:!0,created_at:new Date().toISOString(),videos:t.data.videos||[],documents:t.data.documents||[],content:t.data.content||[],exercises:t.data.exercises||[]}:null}catch(t){return console.error("Error getting lesson with content:",t),null}}static async getPublishedLessons(e){return console.warn("getPublishedLessons not implemented in MySQL API yet"),[]}static async getAdjacentLessons(e){return console.warn("getAdjacentLessons not implemented in MySQL API yet"),{previous:null,next:null}}static async getLessonsInSameChapter(e){return console.warn("getLessonsInSameChapter not implemented in MySQL API yet"),[]}static async getLessonBySlugOrId(e){return console.warn("getLessonBySlugOrId not implemented in MySQL API yet"),null}}class kge{constructor(){this.cache=new Map,this.defaultTTL=300*1e3}get(e){const t=this.cache.get(e);return t?Date.now()>t.expiresAt?(this.cache.delete(e),null):t.data:null}set(e,t,n){const a=Date.now(),s=a+(n||this.defaultTTL);this.cache.set(e,{data:t,timestamp:a,expiresAt:s})}invalidate(e){this.cache.delete(e)}invalidatePattern(e){const t=new RegExp(e);for(const n of this.cache.keys())t.test(n)&&this.cache.delete(n)}clear(){this.cache.clear()}stats(){const e=Date.now();let t=0,n=0;for(const a of this.cache.values())e>a.expiresAt?n++:t++;return{total:this.cache.size,valid:t,expired:n}}cleanup(){const e=Date.now();for(const[t,n]of this.cache.entries())e>n.expiresAt&&this.cache.delete(t)}async query(e,t,n){const a=this.get(e);if(a!==null)return console.log(`[QueryCache] HIT: ${e}`),a;console.log(`[QueryCache] MISS: ${e}`);const s=await t();return this.set(e,s,n),s}}const Zm=new kge;setInterval(()=>{Zm.cleanup(),console.log("[QueryCache] Cleanup completed",Zm.stats())},600*1e3);const $5={HIERARCHY:1800*1e3};class Jm{static async getQuestionHierarchy(e=!1){const t=`hierarchy:${e}`;return Zm.query(t,async()=>{try{return{subjects:((await st.get("/subjects")).data||[]).map(o=>({id:String(o.id),name:o.name,code:o.slug||o.name.toLowerCase().replace(/\s+/g,"-"),description:o.description||"",is_active:o.is_active!==!1,created_at:o.created_at||new Date().toISOString(),chapters:[]}))}}catch(n){throw console.error("Error fetching question hierarchy:",n),n}},$5.HIERARCHY)}static async getSubjects(){return Zm.query("subjects",async()=>{try{return((await st.get("/subjects")).data||[]).map(n=>({id:String(n.id),name:n.name,code:n.slug||n.name.toLowerCase().replace(/\s+/g,"-"),description:n.description||"",is_active:n.is_active!==!1,created_at:n.created_at||new Date().toISOString()}))}catch(e){throw console.error("Error fetching subjects:",e),e}},$5.HIERARCHY)}static async getChaptersBySubject(e){try{return((await st.get(`/subjects/${e}/chapters`)).data||[]).map(n=>({id:String(n.id),subject_id:String(n.subject_id),name:n.name,code:n.slug||n.name.toLowerCase().replace(/\s+/g,"-"),order_index:n.display_order||0,description:n.description||"",is_active:n.is_active!==!1,created_at:n.created_at||new Date().toISOString()}))}catch(t){throw console.error("Error fetching chapters:",t),t}}static async getLessonsByChapter(e){try{return((await st.get(`/chapters/${e}/lessons`)).data||[]).map(n=>({id:String(n.id),chapter_id:String(n.chapter_id),name:n.name,code:n.slug||n.name.toLowerCase().replace(/\s+/g,"-"),order_index:n.display_order||0,description:n.description||"",is_active:n.is_active!==!1,created_at:n.created_at||new Date().toISOString(),duration_minutes:n.duration_minutes,difficulty_level:n.difficulty_level,thumbnail_url:n.thumbnail_url,is_published:n.is_published,view_count:n.view_count||0}))}catch(t){throw console.error("Error fetching lessons:",t),t}}static async getLessonsBySubject(e){return console.warn("getLessonsBySubject not yet migrated to MySQL API"),[]}static async getLessons(e){return this.getLessonsByChapter(e)}static async getQuestionTypesByLesson(e){try{return((await st.get(`/lessons/${e}/question-types`)).data||[]).map(n=>({id:String(n.id),lesson_id:String(n.lesson_id),name:n.name,code:n.slug||n.name.toLowerCase().replace(/\s+/g,"-"),order_index:n.display_order||0,description:n.description||"",difficulty_level:n.difficulty_level||"medium",is_active:n.is_active!==!1,created_at:n.created_at||new Date().toISOString()}))}catch(t){throw console.error("Error fetching question types:",t),t}}static async getQuestionsByType(e,t={}){return console.warn("getQuestionsByType not yet migrated to MySQL API"),[]}static async searchQuestions(e,t={}){return console.warn("searchQuestions not yet migrated to MySQL API"),[]}static async createQuestion(e){throw console.warn("createQuestion not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async updateQuestion(e,t){throw console.warn("updateQuestion not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async deleteQuestion(e){throw console.warn("deleteQuestion not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async approveQuestion(e,t){throw console.warn("approveQuestion not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async createCollection(e){throw console.warn("createCollection not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async addQuestionsToCollection(e,t){throw console.warn("addQuestionsToCollection not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async getUserCollections(){return console.warn("getUserCollections not yet migrated to MySQL API"),[]}static async getCollectionWithQuestions(e){throw console.warn("getCollectionWithQuestions not yet migrated to MySQL API"),new Error("Method not implemented - needs MySQL API migration")}static async updateQuestionStats(e,t){console.warn("updateQuestionStats not yet migrated to MySQL API")}static async getQuestionStats(e){return console.warn("getQuestionStats not yet migrated to MySQL API"),null}static convertToAppQuestion(e){return{id:e.id,type:e.type,question:e.question_text,option_a:e.option_a,option_b:e.option_b,option_c:e.option_c,option_d:e.option_d,correct_option:e.correct_option,explanation:e.explanation,isDynamic:e.is_dynamic,variables:e.dynamic_variables}}static convertToDatabaseQuestion(e,t,n="medium"){return{question_type_id:t,type:e.type,question_text:e.question,option_a:e.option_a,option_b:e.option_b,option_c:e.option_c,option_d:e.option_d,correct_option:e.correct_option,explanation:e.explanation||"",difficulty_level:n,is_dynamic:e.isDynamic||!1,dynamic_variables:e.variables,tags:[]}}}const Mge=()=>{const[r,e]=he.useState([]),[t,n]=he.useState([]),[a,s]=he.useState([]),[o,l]=he.useState([]),[u,c]=he.useState([]),[d,h]=he.useState(""),[g,m]=he.useState(""),[v,x]=he.useState(""),[b,y]=he.useState(""),[S,_]=he.useState(!1),[N,j]=he.useState(!1),[E,T]=he.useState(null);he.useEffect(()=>{F()},[]),he.useEffect(()=>{d?A(d):(n([]),m(""))},[d]),he.useEffect(()=>{g?R(g):(s([]),x(""))},[g]),he.useEffect(()=>{v?I(v):(l([]),y(""))},[v]),he.useEffect(()=>{b?O(b):c([])},[b]);const F=async()=>{try{_(!0),T(null);const X=await Bt.getSubjects();e(X)}catch(X){T("Khng th ti danh sch mn hc"),console.error("Error loading subjects:",X)}finally{_(!1)}},A=async X=>{try{T(null);const V=await Bt.getChaptersBySubject(Number(X));n(V)}catch(V){T("Khng th ti danh sch chng"),console.error("Error loading chapters:",V)}},R=async X=>{try{T(null);const V=await Bt.getLessonsByChapter(Number(X));s(V)}catch(V){T("Khng th ti danh sch bi hc"),console.error("Error loading lessons:",V)}},I=async X=>{try{T(null);const V=await Bt.getQuestionTypesByLesson(Number(X));l(V)}catch(V){T("Khng th ti danh sch dng cu hi"),console.error("Error loading question types:",V)}},O=async X=>{try{j(!0),T(null);const V=await Bt.getQuestionsByType(Number(X));c(V)}catch(V){T("Khng th ti danh sch cu hi"),console.error("Error loading questions:",V)}finally{j(!1)}},U=he.useCallback(async(X,V={})=>{try{return T(null),await Bt.searchQuestions(X,V)}catch(se){return T("Khng th tm kim cu hi"),console.error("Error searching questions:",se),[]}},[]),D=he.useCallback(async(X,V=10)=>{try{return T(null),(await Bt.getQuestionsByType(Number(X))).slice(0,V).map(ae=>Bt.convertToAppQuestion(ae))}catch(se){return T("Khng th ti cu hi cho quiz"),console.error("Error getting questions for quiz:",se),[]}},[]),H=he.useCallback(async X=>{try{T(null);const V=await Bt.createQuestion(X);return b===String(X.question_type_id)&&O(b),V}catch(V){throw T("Khng th to cu hi"),console.error("Error creating question:",V),V}},[b]),P=he.useCallback(X=>X.map(V=>Jm.convertToAppQuestion(V)),[]),G=he.useCallback(async X=>{try{const V=o.find(se=>se.id===X);if(V){const se=a.find(ae=>ae.id===V.lesson_id);if(se){const ae=t.find(W=>W.id===se.chapter_id);if(ae){const W=r.find(z=>z.id===ae.subject_id);if(W)return`${W.name} > ${ae.name} > ${se.name} > ${V.name}`}}}return"Khng xc nh"}catch(V){return console.error("Error getting question path:",V),"Li"}},[r,t,a,o]),ue=he.useCallback(()=>{T(null)},[]),le=he.useCallback(X=>{h(X),m(""),x(""),y(""),n([]),s([]),l([]),c([])},[]),pe=he.useCallback(X=>{m(X),x(""),y(""),s([]),l([]),c([])},[]),de=he.useCallback(X=>{x(X),y(""),l([]),c([])},[]),L=he.useCallback(X=>{y(X),c([])},[]);return{subjects:r,chapters:t,lessons:a,questionTypes:o,questions:u,selectedSubject:d,selectedChapter:g,selectedLesson:v,selectedQuestionType:b,loading:S,loadingQuestions:N,setSelectedSubject:le,setSelectedChapter:pe,setSelectedLesson:de,setSelectedQuestionType:L,searchQuestions:U,getQuestionsForQuiz:D,createQuestion:H,convertToAppQuestions:P,getQuestionPath:G,error:E,clearError:ue}},Fge=({onQuestionsSelected:r,maxSelection:e=50,showSelectionControls:t=!0})=>{const{subjects:n,chapters:a,lessons:s,questionTypes:o,questions:l,selectedSubject:u,selectedChapter:c,selectedLesson:d,selectedQuestionType:h,loading:g,loadingQuestions:m,error:v,setSelectedSubject:x,setSelectedChapter:b,setSelectedLesson:y,setSelectedQuestionType:S,convertToAppQuestions:_,clearError:N}=Mge(),[j,E]=he.useState(new Set),[T,F]=he.useState(""),R=_(l).filter(P=>T===""||P.question.toLowerCase().includes(T.toLowerCase())||P.explanation.toLowerCase().includes(T.toLowerCase())),I=P=>{const G=new Set(j);if(G.has(P))G.delete(P);else if(G.size<e)G.add(P);else{alert(`Ch c th chn ti a ${e} cu hi`);return}E(G)},O=()=>{if(j.size===R.length)E(new Set);else{const P=R.slice(0,e);E(new Set(P.map(G=>G.id)))}},U=()=>{const P=R.filter(G=>j.has(G.id));r&&r(P)},H=(()=>{const P=R.filter(pe=>j.has(pe.id)),G=P.filter(pe=>pe.type==="mcq").length,ue=P.filter(pe=>pe.type==="msq").length,le=P.filter(pe=>pe.type==="sa").length;return{total:P.length,mcqCount:G,msqCount:ue,saCount:le}})();return i.jsxs("div",{className:"space-y-6",children:[v&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("p",{className:"text-red-800",role:"alert",children:v}),i.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-800","aria-label":"ng thng bo li",children:""})]})}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chn ngun cu hi"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",htmlFor:"subject-select",children:"Mn hc"}),i.jsxs("select",{id:"subject-select",value:u,onChange:P=>x(P.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",disabled:g,"aria-describedby":g?"loading-message":void 0,children:[i.jsx("option",{value:"",children:"Chn mn hc"}),n.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",htmlFor:"chapter-select",children:"Chng"}),i.jsxs("select",{id:"chapter-select",value:c,onChange:P=>b(P.target.value),disabled:!u||g,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100","aria-describedby":g?"loading-message":void 0,children:[i.jsx("option",{value:"",children:"Chn chng"}),a.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",htmlFor:"lesson-select",children:"Bi hc"}),i.jsxs("select",{id:"lesson-select",value:d,onChange:P=>y(P.target.value),disabled:!c||g,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100","aria-describedby":g?"loading-message":void 0,children:[i.jsx("option",{value:"",children:"Chn bi hc"}),s.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",htmlFor:"question-type-select",children:"Dng cu hi"}),i.jsxs("select",{id:"question-type-select",value:h,onChange:P=>S(P.target.value),disabled:!d||g,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100","aria-describedby":g?"loading-message":void 0,children:[i.jsx("option",{value:"",children:"Chn dng"}),o.map(P=>i.jsx("option",{value:P.id,children:P.name},P.id))]})]})]})]}),h&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{htmlFor:"question-search",className:"sr-only",children:"Tm kim cu hi"}),i.jsx("input",{id:"question-search",type:"text",placeholder:"Tm kim cu hi...",value:T,onChange:P=>F(P.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500","aria-label":"Tm kim cu hi"})]}),t&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:O,className:"px-4 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 rounded-md hover:bg-indigo-200",disabled:R.length===0,"aria-label":j.size===R.length?"B chn tt c":"Chn tt c",children:j.size===R.length?"B chn tt c":"Chn tt c"}),H.total>0&&i.jsxs("button",{onClick:U,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700","aria-label":`S dng ${H.total} cu hi  chn`,children:["S dng (",H.total,")"]})]})]}),t&&H.total>0&&i.jsx("div",{className:"mt-3 p-3 bg-indigo-50 rounded-md",children:i.jsxs("p",{className:"text-sm text-indigo-800",children:[" chn: ",i.jsx("strong",{children:H.total})," cu hi",H.mcqCount>0&&` (${H.mcqCount} trc nghim)`,H.msqCount>0&&` (${H.msqCount} ng/sai)`,H.saCount>0&&` (${H.saCount} tr li ngn)`]})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Danh sch cu hi (",R.length,")"]}),m&&i.jsxs("div",{className:"flex items-center gap-2 text-gray-600",id:"loading-message",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-indigo-600"}),i.jsx("span",{className:"text-sm",children:"ang ti..."})]})]}),m?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti cu hi..."})]}):R.length===0?i.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:i.jsx("p",{className:"text-gray-500",children:T?"Khng tm thy cu hi ph hp":"Cha c cu hi no trong dng ny"})}):i.jsx("div",{className:"space-y-4",children:R.map((P,G)=>i.jsx(uM,{question:P,index:G,onSelect:t?I:()=>{},isSelected:j.has(P.id)},P.id))})]})]}),g&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti d liu..."})]})]})},Oge=({exercise:r,onSave:e,onCancel:t,lessonId:n})=>{const[a,s]=he.useState(r.title||""),[o,l]=he.useState(r.description||""),[u,c]=he.useState(r.exercise_type||"quiz"),[d,h]=he.useState(()=>r.questions&&Array.isArray(r.questions)?r.questions.map((I,O)=>({id:I.id||`q_${O}`,type:I.type||"mcq",question:I.question_text||I.question||"",option_a:I.option_a||"",option_b:I.option_b||"",option_c:I.option_c||"",option_d:I.option_d||"",correct_option:I.correct_option||"",explanation:I.explanation||"",difficulty:I.difficulty||I.difficulty_level||"medium",isDynamic:I.is_dynamic||!1})):[]),[g,m]=he.useState(!1),[v,x]=he.useState(!1),[b,y]=he.useState(null),[S,_]=he.useState({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"medium"}),N=I=>{const O=[...d,...I];h(O),m(!1)},j=()=>{_({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"medium"}),y(null),x(!0)},E=I=>{_(d[I]),y(I),x(!0)},T=()=>{if(!S.question?.trim()){alert("Vui lng nhp ni dung cu hi!");return}if((S.type==="mcq"||S.type==="msq")&&(!S.option_a?.trim()||!S.option_b?.trim())){alert("Vui lng nhp t nht 2 p n (A v B)!");return}const I={id:S.id||`q_${Date.now()}`,type:S.type||"mcq",question:S.question||"",option_a:S.option_a||"",option_b:S.option_b||"",option_c:S.option_c||"",option_d:S.option_d||"",correct_option:S.correct_option||"",explanation:S.explanation||"",difficulty:S.difficulty||"medium",isDynamic:S.isDynamic||!1},O=[...d];b!==null?O[b]=I:O.push(I),h(O),x(!1),y(null)},F=I=>{if(confirm("Bn c chc chn mun xa cu hi ny?")){const O=d.filter((U,D)=>D!==I);h(O)}},A=(I,O)=>{const U=[...d];O==="up"&&I>0?[U[I-1],U[I]]=[U[I],U[I-1]]:O==="down"&&I<U.length-1&&([U[I],U[I+1]]=[U[I+1],U[I]]),h(U)},R=()=>{if(!a.trim()){alert("Vui lng nhp tiu  bi tp!");return}const I=d.map(O=>({type:O.type,question_text:O.question,option_a:O.option_a,option_b:O.option_b,option_c:O.option_c,option_d:O.option_d,correct_option:O.correct_option,explanation:O.explanation,difficulty_level:O.difficulty,is_dynamic:O.isDynamic||!1}));e({...r,title:a,description:o,exercise_type:u,questions:I,order_index:r.order_index||0})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.id?"Sa bi tp":"Thm bi tp mi"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu"}),i.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  *"}),i.jsx("input",{type:"text",value:a,onChange:I=>s(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Nhp tiu  bi tp",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:o,onChange:I=>l(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3,placeholder:"Nhp m t bi tp (ty chn)"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bi tp trc nghim h tr 3 loi: MCQ (1 p n), MSQ (nhiu p n), SA (tr li ngn)"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h4",{className:"text-md font-semibold text-gray-900",children:["Cu hi (",d.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-database"}),"Chn t ngn hng"]}),i.jsxs("button",{onClick:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Thm cu hi mi"]})]})]}),g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Chn cu hi t ngn hng"}),i.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700",children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsx("div",{className:"p-4",children:i.jsx(Fge,{onQuestionsSelected:N,maxSelection:100,showSelectionControls:!0})})]})}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold",children:b!==null?"Sa cu hi":"Thm cu hi mi"}),i.jsx("button",{onClick:()=>{x(!1),y(null)},className:"text-gray-500 hover:text-gray-700",children:i.jsx("i",{className:"fas fa-times"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi cu hi *"}),i.jsxs("select",{value:S.type||"mcq",onChange:I=>_({...S,type:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"mcq",children:"Trc nghim (1 p n)"}),i.jsx("option",{value:"msq",children:"Nhiu p n"}),i.jsx("option",{value:"sa",children:"Tr li ngn"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung cu hi *"}),i.jsx("textarea",{value:S.question||"",onChange:I=>_({...S,question:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"Nhp ni dung cu hi (h tr LaTeX: $x^2 + y^2 = 1$)"})]}),(S.type==="mcq"||S.type==="msq")&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n A *"}),i.jsx("input",{type:"text",value:S.option_a||"",onChange:I=>_({...S,option_a:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n B *"}),i.jsx("input",{type:"text",value:S.option_b||"",onChange:I=>_({...S,option_b:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n C"}),i.jsx("input",{type:"text",value:S.option_c||"",onChange:I=>_({...S,option_c:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n D"}),i.jsx("input",{type:"text",value:S.option_d||"",onChange:I=>_({...S,option_d:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n ng *"}),i.jsx("input",{type:"text",value:S.correct_option||"",onChange:I=>_({...S,correct_option:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:S.type==="mcq"?"A, B, C, hoc D":S.type==="msq"?"A,C hoc B,D (cch nhau bi du phy)":"p n chnh xc"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Li gii chi tit *"}),i.jsx("textarea",{value:S.explanation||"",onChange:I=>_({...S,explanation:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:4,placeholder:"Nhp li gii chi tit (h tr LaTeX)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" kh"}),i.jsxs("select",{value:S.difficulty||"medium",onChange:I=>_({...S,difficulty:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{x(!1),y(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Hy"}),i.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Lu cu hi"})]})]})]})}),d.length===0?i.jsx("div",{className:"text-center py-8 text-gray-500",children:'Cha c cu hi no. Nhn "Chn t ngn hng" hoc "Thm cu hi mi"  bt u.'}):i.jsx("div",{className:"space-y-3",children:d.map((I,O)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-semibold text-sm",children:O+1}),i.jsx("div",{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:I.type==="mcq"?"Trc nghim":I.type==="msq"?"Nhiu p n":"Tr li ngn"}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${I.difficulty==="easy"?"bg-green-100 text-green-800":I.difficulty==="hard"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:I.difficulty==="easy"?"D":I.difficulty==="hard"?"Kh":"Trung bnh"})]})})]}),i.jsxs("div",{className:"flex gap-2",children:[O>0&&i.jsx("button",{onClick:()=>A(O,"up"),className:"text-gray-500 hover:text-gray-700",title:"Di chuyn ln",children:i.jsx("i",{className:"fas fa-arrow-up"})}),O<d.length-1&&i.jsx("button",{onClick:()=>A(O,"down"),className:"text-gray-500 hover:text-gray-700",title:"Di chuyn xung",children:i.jsx("i",{className:"fas fa-arrow-down"})}),i.jsx("button",{onClick:()=>E(O),className:"text-blue-500 hover:text-blue-700",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>F(O),className:"text-red-500 hover:text-red-700",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx(ir,{content:I.question})}),(I.type==="mcq"||I.type==="msq")&&i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[I.option_a&&i.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[i.jsx("strong",{children:"A."})," ",i.jsx(ir,{content:I.option_a})]}),I.option_b&&i.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[i.jsx("strong",{children:"B."})," ",i.jsx(ir,{content:I.option_b})]}),I.option_c&&i.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[i.jsx("strong",{children:"C."})," ",i.jsx(ir,{content:I.option_c})]}),I.option_d&&i.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[i.jsx("strong",{children:"D."})," ",i.jsx(ir,{content:I.option_d})]})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("strong",{children:"p n:"})," ",I.correct_option]}),I.explanation&&i.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[i.jsx("strong",{children:"Gii thch:"})," ",i.jsx(ir,{content:I.explanation})]})]})]},I.id||O))})]})]})},ef="https://hoc.io.vn/api",Bge=()=>{const[r,e]=he.useState([]),[t,n]=he.useState([]),[a,s]=he.useState(!0),[o,l]=he.useState(null),[u,c]=he.useState(null),[d,h]=he.useState(""),[g,m]=he.useState(1),[v,x]=he.useState(1),[b,y]=he.useState(0),S=20,[_,N]=he.useState(!1),[j,E]=he.useState(!1),[T,F]=he.useState(null),[A,R]=he.useState(!1),[I,O]=he.useState("basic"),[U,D]=he.useState({videos:[],documents:[],content:[],exercises:[]}),[H,P]=he.useState(!1),[G,ue]=he.useState(!1),[le,pe]=he.useState(!1),[de,L]=he.useState(!1),[X,V]=he.useState(!1),[se,ae]=he.useState(null),[W,z]=he.useState(null),[re,ne]=he.useState(null),[ie,oe]=he.useState(null),[ye,M]=he.useState({title:"",description:"",video_url:"",video_type:"youtube",video_id:"",duration_seconds:0,order_index:0}),[ge,ee]=he.useState({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),[k,B]=he.useState({title:"",content_type:"html",content:"",order_index:0}),[Q,Z]=he.useState({title:"",description:"",exercise_type:"quiz",questions:[],order_index:0}),{user:J}=Yr(),[K,te]=he.useState({chapter_id:0,name:"",slug:"",description:"",duration_minutes:null,difficulty_level:"",thumbnail_url:"",is_published:!1,display_order:0}),me=(Te,Qe)=>{if(!Te)return null;try{if(Qe==="youtube"){const At=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/watch\?.*v=([a-zA-Z0-9_-]{11})/];for(const fr of At){const rn=Te.match(fr);if(rn&&rn[1])return rn[1]}}else if(Qe==="vimeo"){const At=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const fr of At){const rn=Te.match(fr);if(rn&&rn[1])return rn[1]}}}catch(At){console.error("Error extracting video ID:",At)}return null};he.useEffect(()=>{fe()},[]),he.useEffect(()=>{xe()},[g,u,d]);const fe=async()=>{try{const Te=localStorage.getItem("auth_token"),Qe=await fetch(`${ef}/admin/lessons-api.php?path=chapters`,{headers:{Authorization:`Bearer ${Te}`}});if(!Qe.ok)throw new Error("Failed to load chapters");const At=await Qe.json();n(At.data)}catch(Te){console.error("Error loading chapters:",Te),l("Khng th ti danh sch chng")}},xe=async()=>{try{s(!0);const Te=localStorage.getItem("auth_token"),Qe=new URLSearchParams({page:g.toString(),limit:S.toString()});u&&Qe.append("chapter_id",u.toString()),d&&Qe.append("search",d);const At=await fetch(`${ef}/admin/lessons-api.php?path=list&${Qe}`,{headers:{Authorization:`Bearer ${Te}`}});if(!At.ok)throw new Error("Failed to load lessons");const fr=await At.json();e(fr.data),x(fr.pagination.pages),y(fr.pagination.total),l(null)}catch(Te){console.error("Error loading lessons:",Te),l("Khng th ti danh sch bi hc")}finally{s(!1)}},_e=async Te=>{if(Te.preventDefault(),!K.chapter_id||K.chapter_id===0){alert("Vui lng chn chng");return}if(!K.name||K.name.trim()===""){alert("Vui lng nhp tn bi hc");return}try{const Qe=localStorage.getItem("auth_token"),At=await fetch(`${ef}/admin/lessons-api.php?path=create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Qe}`},body:JSON.stringify(K)});if(!At.ok){const fr=await At.json();throw new Error(fr.error||"Failed to create lesson")}N(!1),Da(),xe()}catch(Qe){console.error("Error creating lesson:",Qe),alert(Qe instanceof Error?Qe.message:"Khng th to bi hc")}},je=async Te=>{if(Te.preventDefault(),!!T)try{const Qe=localStorage.getItem("auth_token"),At=await fetch(`${ef}/admin/lessons-api.php?path=${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Qe}`},body:JSON.stringify(K)});if(!At.ok){const fr=await At.json();throw new Error(fr.error||"Failed to update lesson")}E(!1),F(null),Da(),xe()}catch(Qe){console.error("Error updating lesson:",Qe),alert(Qe instanceof Error?Qe.message:"Khng th cp nht bi hc")}},Be=async Te=>{if(confirm(`Bn c chc mun xa bi hc "${Te.name}"?`))try{const Qe=localStorage.getItem("auth_token"),At=await fetch(`${ef}/admin/lessons-api.php?path=${Te.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${Qe}`}});if(!At.ok){const fr=await At.json();throw new Error(fr.error||"Failed to delete lesson")}xe()}catch(Qe){console.error("Error deleting lesson:",Qe),alert(Qe instanceof Error?Qe.message:"Khng th xa bi hc")}},Re=()=>{Da(),N(!0)},ze=Te=>{Te.is_published?Ye(Te):(F(Te),te({chapter_id:Te.chapter_id,name:Te.name,slug:Te.slug,description:Te.description||"",duration_minutes:Te.duration_minutes,difficulty_level:Te.difficulty_level||"",thumbnail_url:Te.thumbnail_url||"",is_published:Te.is_published,display_order:Te.display_order}),E(!0))},Ye=async Te=>{F(Te),te({chapter_id:Te.chapter_id,name:Te.name,slug:Te.slug,description:Te.description||"",duration_minutes:Te.duration_minutes,difficulty_level:Te.difficulty_level||"",thumbnail_url:Te.thumbnail_url||"",is_published:Te.is_published,display_order:Te.display_order}),O("basic"),R(!0),await Le(Te.id.toString())},Le=async Te=>{try{P(!0);const Qe=await mn.getLessonWithContent(Te);Qe&&D({videos:Qe.videos||[],documents:Qe.documents||[],content:Qe.content||[],exercises:Qe.exercises||[]})}catch(Qe){console.error("Error loading lesson content:",Qe)}finally{P(!1)}},it=async Te=>{if(Te.preventDefault(),!(!J||!T))try{se&&se.id?(await mn.updateVideo(se.id.toString(),{...ye,is_active:!0}),alert("Cp nht video thnh cng!")):(await mn.createVideo({lesson_id:T.id.toString(),...ye,is_active:!0,created_by:J.id}),alert("Thm video thnh cng!")),M({title:"",description:"",video_url:"",video_type:"youtube",video_id:"",duration_seconds:0,order_index:0}),ae(null),ue(!1),await Le(T.id.toString())}catch(Qe){console.error("Error saving video:",Qe),alert("C li khi lu video")}},ht=Te=>{ae(Te),M({title:Te.title,description:Te.description||"",video_url:Te.video_url,video_type:Te.video_type,video_id:Te.video_id||"",duration_seconds:Te.duration_seconds||0,order_index:Te.order_index}),ue(!0)},ce=async Te=>{if(confirm("Bn c chc chn mun xa video ny?"))try{await mn.deleteVideo(Te),alert("Xa video thnh cng!"),await Le(T.id.toString())}catch(Qe){console.error("Error deleting video:",Qe),alert("C li khi xa video")}},be=async Te=>{if(Te.preventDefault(),!(!J||!T))try{W&&W.id?(await mn.updateDocument(W.id.toString(),{...ge,is_active:!0}),alert("Cp nht ti liu thnh cng!")):(await mn.createDocument({lesson_id:T.id.toString(),...ge,is_active:!0,created_by:J.id,download_count:0}),alert("Thm ti liu thnh cng!")),ee({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),z(null),pe(!1),await Le(T.id.toString())}catch(Qe){console.error("Error saving document:",Qe),alert("C li khi lu ti liu")}},Fe=Te=>{z(Te),ee({title:Te.title,description:Te.description||"",document_type:Te.document_type,file_url:Te.file_url||"",file_size_kb:Te.file_size_kb||0,order_index:Te.order_index}),pe(!0)},$e=async Te=>{if(confirm("Bn c chc chn mun xa ti liu ny?"))try{await mn.deleteDocument(Te),alert("Xa ti liu thnh cng!"),await Le(T.id.toString())}catch(Qe){console.error("Error deleting document:",Qe),alert("C li khi xa ti liu")}},vt=async Te=>{if(Te.preventDefault(),!(!J||!T))try{re&&re.id?(await mn.updateContent(re.id.toString(),{...k,is_active:!0}),alert("Cp nht ni dung thnh cng!")):(await mn.createContent({lesson_id:T.id.toString(),...k,is_active:!0,created_by:J.id}),alert("Thm ni dung thnh cng!")),B({title:"",content_type:"html",content:"",order_index:0}),ne(null),L(!1),await Le(T.id.toString())}catch(Qe){console.error("Error saving content:",Qe),alert("C li khi lu ni dung")}},Nt=Te=>{ne(Te),B({title:Te.title,content_type:Te.content_type,content:Te.content,order_index:Te.order_index}),L(!0)},Qt=async Te=>{if(confirm("Bn c chc chn mun xa ni dung ny?"))try{await mn.deleteContent(Te),alert("Xa ni dung thnh cng!"),await Le(T.id.toString())}catch(Qe){console.error("Error deleting content:",Qe),alert("C li khi xa ni dung")}},Vr=async Te=>{if(!(!J||!T))try{ie&&ie.id?(await mn.updateExercise(ie.id.toString(),{...Te,is_active:!0}),alert("Cp nht bi tp thnh cng!")):(await mn.createExercise({lesson_id:T.id.toString(),...Te,is_active:!0,created_by:J.id}),alert("Thm bi tp thnh cng!")),oe(null),V(!1),await Le(T.id.toString())}catch(Qe){console.error("Error saving exercise:",Qe),alert("C li khi lu bi tp")}},io=Te=>{oe(Te),V(!0)},ao=async Te=>{if(confirm("Bn c chc chn mun xa bi tp ny?"))try{await mn.deleteExercise(Te),alert("Xa bi tp thnh cng!"),await Le(T.id.toString())}catch(Qe){console.error("Error deleting exercise:",Qe),alert("C li khi xa bi tp")}},Da=()=>{te({chapter_id:u||0,name:"",slug:"",description:"",duration_minutes:null,difficulty_level:"",thumbnail_url:"",is_published:!1,display_order:0})},Ns=Te=>{const Qe=Te.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");te(At=>({...At,slug:Qe}))},so=Te=>{switch(Te){case"easy":return i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"D"});case"medium":return i.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Trung bnh"});case"hard":return i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Kh"});default:return null}},cl=Te=>{if(!Te)return"";if(Te<60)return`${Te} pht`;const Qe=Math.floor(Te/60),At=Te%60;return At===0?`${Qe} gi`:`${Qe}g ${At}p`};return a&&r.length===0?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Qun l Bi hc"}),i.jsxs("p",{className:"text-gray-600",children:["Tng: ",b," bi hc"]})]}),i.jsxs("button",{onClick:Re,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx("i",{className:"fas fa-plus mr-2"}),"Thm Bi hc"]})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chng"}),i.jsxs("select",{value:u||"",onChange:Te=>{c(Te.target.value?parseInt(Te.target.value):null),m(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Tt c chng"}),t.map(Te=>i.jsxs("option",{value:Te.id,children:[Te.subject_name," - ",Te.name]},Te.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm kim"}),i.jsx("input",{type:"text",value:d,onChange:Te=>{h(Te.target.value),m(1)},placeholder:"Tm theo tn bi hc...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})}),o&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:o}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bi hc"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chng / Mn"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ni dung"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"Khng c bi hc no"})}):r.map(Te=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[Te.thumbnail_url?i.jsx("img",{src:Te.thumbnail_url,alt:Te.name,className:"w-16 h-12 object-cover rounded"}):i.jsx("div",{className:"w-16 h-12 bg-gray-200 rounded flex items-center justify-center",children:i.jsx("i",{className:"fas fa-book text-gray-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:Te.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["slug: ",Te.slug]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[Te.duration_minutes&&i.jsxs("span",{className:"inline-flex items-center text-xs text-blue-600",children:[i.jsx("i",{className:"fas fa-clock mr-1"}),cl(Te.duration_minutes)]}),so(Te.difficulty_level)]})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-gray-900",children:Te.chapter_name}),i.jsx("p",{className:"text-indigo-600",children:Te.subject_name})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-1",children:[Te.video_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[i.jsx("i",{className:"fas fa-video mr-1"}),Te.video_count," video"]}),Te.document_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[i.jsx("i",{className:"fas fa-file-pdf mr-1"}),Te.document_count," ti liu"]}),Te.content_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[i.jsx("i",{className:"fas fa-file-text mr-1"}),Te.content_count," ni dung"]}),Te.exercise_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[i.jsx("i",{className:"fas fa-dumbbell mr-1"}),Te.exercise_count," bi tp"]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[Te.question_count," cu hi"]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${Te.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Te.is_active?"Hot ng":"n"}),i.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${Te.is_published?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:Te.is_published?" xut bn":"Bn nhp"})]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>ze(Te),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>Be(Te),className:"text-red-600 hover:text-red-900 p-1",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})})]},Te.id))})]})})}),v>1&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Trang ",g," / ",v]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>m(Te=>Math.max(1,Te-1)),disabled:g===1,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:i.jsx("i",{className:"fas fa-chevron-left"})}),i.jsx("button",{onClick:()=>m(Te=>Math.min(v,Te+1)),disabled:g===v,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:i.jsx("i",{className:"fas fa-chevron-right"})})]})]}),_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"Thm Bi hc"})}),i.jsxs("form",{onSubmit:_e,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chng *"}),i.jsxs("select",{value:K.chapter_id,onChange:Te=>te(Qe=>({...Qe,chapter_id:parseInt(Te.target.value)})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:0,children:"-- Chn chng --"}),t.map(Te=>i.jsxs("option",{value:Te.id,children:[Te.subject_name," - ",Te.name]},Te.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi lng (pht)"}),i.jsx("input",{type:"number",value:K.duration_minutes||"",onChange:Te=>te(Qe=>({...Qe,duration_minutes:Te.target.value?parseInt(Te.target.value):null})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn bi hc *"}),i.jsx("input",{type:"text",value:K.name,onChange:Te=>{te(Qe=>({...Qe,name:Te.target.value})),K.slug||Ns(Te.target.value)},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),i.jsx("input",{type:"text",value:K.slug,onChange:Te=>te(Qe=>({...Qe,slug:Te.target.value})),pattern:"[a-z0-9-]+",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" trng  t ng to t tn bi hc"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),i.jsx("textarea",{value:K.description,onChange:Te=>te(Qe=>({...Qe,description:Te.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" kh"}),i.jsxs("select",{value:K.difficulty_level,onChange:Te=>te(Qe=>({...Qe,difficulty_level:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"-- Chn  kh --"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th t"}),i.jsx("input",{type:"number",value:K.display_order,onChange:Te=>te(Qe=>({...Qe,display_order:parseInt(Te.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Thumbnail"}),i.jsx("input",{type:"url",value:K.thumbnail_url,onChange:Te=>te(Qe=>({...Qe,thumbnail_url:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_published",checked:K.is_published,onChange:Te=>te(Qe=>({...Qe,is_published:Te.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"is_published",className:"ml-2 text-sm font-medium text-gray-700",children:" Xut bn bi hc (hin th cho hc sinh)"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"To"})]})]})]})}),j&&T&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"Sa Bi hc"})}),i.jsxs("form",{onSubmit:je,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi lng (pht)"}),i.jsx("input",{type:"number",value:K.duration_minutes||"",onChange:Te=>te(Qe=>({...Qe,duration_minutes:Te.target.value?parseInt(Te.target.value):null})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" kh"}),i.jsxs("select",{value:K.difficulty_level,onChange:Te=>te(Qe=>({...Qe,difficulty_level:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"-- Chn  kh --"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn bi hc *"}),i.jsx("input",{type:"text",value:K.name,onChange:Te=>te(Qe=>({...Qe,name:Te.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),i.jsx("textarea",{value:K.description,onChange:Te=>te(Qe=>({...Qe,description:Te.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Thumbnail"}),i.jsx("input",{type:"url",value:K.thumbnail_url,onChange:Te=>te(Qe=>({...Qe,thumbnail_url:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th t"}),i.jsx("input",{type:"number",value:K.display_order,onChange:Te=>te(Qe=>({...Qe,display_order:parseInt(Te.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"edit_is_published",checked:K.is_published,onChange:Te=>te(Qe=>({...Qe,is_published:Te.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"edit_is_published",className:"ml-2 text-sm font-medium text-gray-700",children:" Xut bn bi hc (hin th cho hc sinh)"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{E(!1),F(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Cp nht"})]})]})]})}),A&&T&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-lg flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Son bi hc"}),i.jsx("p",{className:"text-indigo-100 mt-1",children:T.name})]}),i.jsx("button",{onClick:()=>{R(!1),F(null),O("basic"),xe()},className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"border-b border-gray-200 bg-gray-50 flex-shrink-0",children:i.jsxs("div",{className:"flex overflow-x-auto",children:[i.jsxs("button",{onClick:()=>O("basic"),className:`px-6 py-3 font-medium whitespace-nowrap ${I==="basic"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx("i",{className:"fas fa-info-circle mr-2"}),"Thng tin c bn"]}),i.jsxs("button",{onClick:()=>O("videos"),className:`px-6 py-3 font-medium whitespace-nowrap ${I==="videos"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx("i",{className:"fas fa-video mr-2"}),"Video (",U.videos.length,")"]}),i.jsxs("button",{onClick:()=>O("documents"),className:`px-6 py-3 font-medium whitespace-nowrap ${I==="documents"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Ti liu (",U.documents.length,")"]}),i.jsxs("button",{onClick:()=>O("content"),className:`px-6 py-3 font-medium whitespace-nowrap ${I==="content"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx("i",{className:"fas fa-file-text mr-2"}),"Ni dung (",U.content.length,")"]}),i.jsxs("button",{onClick:()=>O("exercises"),className:`px-6 py-3 font-medium whitespace-nowrap ${I==="exercises"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:[i.jsx("i",{className:"fas fa-dumbbell mr-2"}),"Bi tp (",U.exercises.length,")"]})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:H?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):i.jsxs(i.Fragment,{children:[I==="basic"&&i.jsxs("form",{onSubmit:je,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi lng (pht)"}),i.jsx("input",{type:"number",value:K.duration_minutes||"",onChange:Te=>te(Qe=>({...Qe,duration_minutes:Te.target.value?parseInt(Te.target.value):null})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" kh"}),i.jsxs("select",{value:K.difficulty_level,onChange:Te=>te(Qe=>({...Qe,difficulty_level:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"-- Chn  kh --"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn bi hc *"}),i.jsx("input",{type:"text",value:K.name,onChange:Te=>te(Qe=>({...Qe,name:Te.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),i.jsx("textarea",{value:K.description,onChange:Te=>te(Qe=>({...Qe,description:Te.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Thumbnail"}),i.jsx("input",{type:"url",value:K.thumbnail_url,onChange:Te=>te(Qe=>({...Qe,thumbnail_url:Te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th t"}),i.jsx("input",{type:"number",value:K.display_order,onChange:Te=>te(Qe=>({...Qe,display_order:parseInt(Te.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"comprehensive_is_published",checked:K.is_published,onChange:Te=>te(Qe=>({...Qe,is_published:Te.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"comprehensive_is_published",className:"ml-2 text-sm font-medium text-gray-700",children:" Xut bn bi hc (hin th cho hc sinh)"})]}),i.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:i.jsxs("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[i.jsx("i",{className:"fas fa-save mr-2"}),"Lu thng tin"]})})]}),I==="videos"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Video bi ging"}),i.jsxs("button",{onClick:()=>{ae(null),M({title:"",description:"",video_url:"",video_type:"youtube",video_id:"",duration_seconds:0,order_index:0}),ue(!G)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Thm video"]})]}),G&&i.jsxs("form",{onSubmit:it,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:se?"Sa video":"Thm video mi"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  video *"}),i.jsx("input",{type:"text",value:ye.title,onChange:Te=>M({...ye,title:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:ye.description,onChange:Te=>M({...ye,description:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi video *"}),i.jsxs("select",{value:ye.video_type,onChange:Te=>M({...ye,video_type:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"youtube",children:"YouTube"}),i.jsx("option",{value:"vimeo",children:"Vimeo"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Video *"}),i.jsx("input",{type:"text",value:ye.video_url,onChange:Te=>{const Qe=Te.target.value;M({...ye,video_url:Qe});const At=me(Qe,ye.video_type);At&&M(fr=>({...fr,video_url:Qe,video_id:At}))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://www.youtube.com/watch?v=... hoc https://youtu.be/...",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dn link YouTube hoc Vimeo. Thi lng s c ly t video thc t khi pht."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu video"}),i.jsx("button",{type:"button",onClick:()=>{ue(!1),ae(null)},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[U.videos.map((Te,Qe)=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold",children:Qe+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:Te.title}),Te.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Te.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"capitalize",children:Te.video_type}),Te.duration_seconds&&i.jsxs("span",{children:[Math.floor(Te.duration_seconds/60)," pht"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ht(Te),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>ce(Te.id.toString()),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})]})},Te.id)),U.videos.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c video no. Nhn "Thm video"  bt u.'})]})]}),I==="documents"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ti liu hc tp"}),i.jsxs("button",{onClick:()=>{z(null),ee({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),pe(!le)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Thm ti liu"]})]}),le&&i.jsxs("form",{onSubmit:be,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:W?"Sa ti liu":"Thm ti liu mi"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  ti liu *"}),i.jsx("input",{type:"text",value:ge.title,onChange:Te=>ee({...ge,title:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:ge.description,onChange:Te=>ee({...ge,description:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi ti liu *"}),i.jsxs("select",{value:ge.document_type,onChange:Te=>ee({...ge,document_type:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"pdf",children:"PDF"}),i.jsx("option",{value:"docx",children:"DOCX"}),i.jsx("option",{value:"xlsx",children:"XLSX"}),i.jsx("option",{value:"pptx",children:"PPTX"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Ti liu *"}),i.jsx("input",{type:"text",value:ge.file_url,onChange:Te=>ee({...ge,file_url:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://drive.google.com/file/d/... hoc link ti liu khc",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dn link Google Drive, Dropbox, hoc link ti liu trc tip"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu ti liu"}),i.jsx("button",{type:"button",onClick:()=>{pe(!1),z(null)},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[U.documents.map((Te,Qe)=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold",children:Qe+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:Te.title}),Te.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Te.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"uppercase",children:Te.document_type}),Te.file_size_kb&&i.jsxs("span",{children:[(Te.file_size_kb/1024).toFixed(1)," MB"]}),i.jsxs("span",{children:[Te.download_count," lt ti"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Fe(Te),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>$e(Te.id.toString()),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})]})},Te.id)),U.documents.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c ti liu no. Nhn "Thm ti liu"  bt u.'})]})]}),I==="content"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ni dung bi hc"}),i.jsxs("button",{onClick:()=>{ne(null),B({title:"",content_type:"html",content:"",order_index:0}),L(!de)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Thm ni dung"]})]}),de&&i.jsxs("form",{onSubmit:vt,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:re?"Sa ni dung":"Thm ni dung mi"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  *"}),i.jsx("input",{type:"text",value:k.title,onChange:Te=>B({...k,title:Te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung *"}),i.jsxs("div",{className:"flex gap-2 mb-2 p-2 bg-gray-100 rounded-t-lg border border-gray-300 border-b-0",children:[i.jsx("button",{type:"button",onClick:()=>{const Te=document.getElementById("content-editor"),Qe=Te.selectionStart,At=Te.selectionEnd,fr=k.content.substring(Qe,At),rn=k.content.substring(0,Qe)+`<b>${fr}</b>`+k.content.substring(At);B({...k,content:rn})},className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 font-bold",title:"In m",children:"B"}),i.jsx("button",{type:"button",onClick:()=>{const Te=document.getElementById("content-editor"),Qe=Te.selectionStart,At=Te.selectionEnd,fr=k.content.substring(Qe,At),rn=k.content.substring(0,Qe)+`<i>${fr}</i>`+k.content.substring(At);B({...k,content:rn})},className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 italic",title:"In nghing",children:"I"}),i.jsx("button",{type:"button",onClick:()=>{const Te=document.getElementById("content-editor"),Qe=Te.selectionStart,At=Te.selectionEnd,fr=k.content.substring(Qe,At),rn=k.content.substring(0,Qe)+`<u>${fr}</u>`+k.content.substring(At);B({...k,content:rn})},className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 underline",title:"Gch chn",children:"U"}),i.jsx("div",{className:"w-px bg-gray-300"}),i.jsx("button",{type:"button",onClick:()=>{const Te=prompt("Nhp URL hnh nh:");if(Te){const At=document.getElementById("content-editor").selectionStart,fr=k.content.substring(0,At)+`<img src="${Te}" alt="Hnh nh" style="max-width: 100%; height: auto;" />`+k.content.substring(At);B({...k,content:fr})}},className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",title:"Chn hnh nh",children:" nh"}),i.jsx("button",{type:"button",onClick:()=>{const Qe=document.getElementById("content-editor").selectionStart,At=k.content.substring(0,Qe)+"<p></p>"+k.content.substring(Qe);B({...k,content:At})},className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50 text-sm",title:"Thm on vn",children:"<p>"})]}),i.jsx("textarea",{id:"content-editor",value:k.content,onChange:Te=>B({...k,content:Te.target.value}),onKeyDown:Te=>{if(Te.key==="Enter"&&!Te.shiftKey){Te.preventDefault();const Qe=Te.target,At=Qe.selectionStart,fr=Qe.selectionEnd,rn=k.content.substring(0,At)+`<br>
`+k.content.substring(fr);B({...k,content:rn}),setTimeout(()=>{Qe.selectionStart=Qe.selectionEnd=At+5},0)}},className:"w-full px-4 py-2 border border-gray-300 rounded-b-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",rows:12,placeholder:`Nhp ni dung bi hc...
Nhn Enter  xung dng (t ng thm <br>)
Bi en text v nhn B/I/U  nh dng`,required:!0}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Nhn Enter  xung dng. S dng cc nt B, I, U  nh dng text. H tr LaTeX: ",i.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"$x^2 + y^2 = 1$"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu ni dung"}),i.jsx("button",{type:"button",onClick:()=>{L(!1),ne(null)},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[U.content.map((Te,Qe)=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-semibold",children:Qe+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:Te.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:Te.content_type}),i.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded text-sm text-gray-700 line-clamp-3",children:Te.content})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Nt(Te),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>Qt(Te.id.toString()),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})]})},Te.id)),U.content.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c ni dung no. Nhn "Thm ni dung"  bt u.'})]})]}),I==="exercises"&&i.jsx("div",{className:"space-y-4",children:X?i.jsx(Oge,{exercise:ie||{title:"",description:"",exercise_type:"quiz",questions:[],order_index:0},onSave:Vr,onCancel:()=>{V(!1),oe(null)},lessonId:T?.id.toString()}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bi tp & Trc nghim"}),i.jsxs("button",{onClick:()=>{oe(null),V(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Thm bi tp"]})]}),i.jsxs("div",{className:"space-y-3",children:[U.exercises.map((Te,Qe)=>{const At=Te.questions&&Array.isArray(Te.questions)?Te.questions.length:0;return i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold",children:Qe+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:Te.title}),Te.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Te.description}),i.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[i.jsx("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:Te.exercise_type==="quiz"?"Trc nghim":Te.exercise_type==="practice"?"Thc hnh":"Th thch"}),At>0&&i.jsxs("span",{className:"text-sm text-gray-600",children:[i.jsx("i",{className:"fas fa-question-circle mr-1"}),At," cu hi"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>io(Te),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>ao(Te.id.toString()),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})]})},Te.id)}),U.exercises.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c bi tp no. Nhn "Thm bi tp"  bt u.'})]})]})})]})})]})})]})};class Rge{async getAssignments(e){try{const t=e?`/admin/practice-assignments?grade=${e}`:"/admin/practice-assignments";return(await st.get(t)).data||[]}catch(t){return console.error("Error getting assignments:",t),[]}}async createAssignment(e){return(await st.post("/admin/practice-assignments",e)).data}async updateAssignment(e,t){await st.put(`/admin/practice-assignments/${e}`,t)}async deleteAssignment(e){await st.delete(`/admin/practice-assignments/${e}`)}async getActiveAssignments(e){try{const t=e?`/practice/assignments?grade=${e}`:"/practice/assignments";return(await st.get(t)).data||[]}catch(t){return console.error("Error getting active assignments:",t),[]}}async startSession(e){const a=((await st.get("/practice/assignments")).data||[]).find(u=>u.id===e);if(!a)throw new Error("Assignment not found");let s=[];typeof a.question_type_ids=="string"?s=a.question_type_ids.split(",").map(u=>parseInt(u.trim())).filter(u=>!isNaN(u)):Array.isArray(a.question_type_ids)&&(s=a.question_type_ids);const l=(await st.post("/practice/sessions",{assignment_id:e,question_type_ids:s,question_count:a.question_count,difficulty:a.difficulty_level})).data;return{session_id:l.session?.id||l.id,assignment:{title:a.title,question_count:a.question_count,time_limit_minutes:a.time_limit_minutes,passing_score:a.passing_score},questions:l.questions||l.session?.questions||[]}}async getSession(e){const n=(await st.get(`/practice/sessions/${e}`)).data,a=n.data||n;return{id:a.id,user_id:a.user_id,assignment_id:a.assignment_id,started_at:a.started_at,ended_at:a.ended_at,time_spent_seconds:a.time_spent_seconds||0,status:a.status,score:a.correct_count&&a.question_count?a.correct_count/a.question_count*100:0,correct_count:a.correct_count||0,total_questions:a.question_count||0,assignment_title:a.assignment_title,passing_score:a.passing_score||70,time_limit_minutes:a.time_limit_minutes,questions:a.questions||[]}}async submitSession(e,t,n){const a=await st.post(`/practice/sessions/${e}/submit`,{answers:t,time_spent_seconds:n}),s=a.data.data||a.data;return{score:s.total_questions>0?s.correct_count/s.total_questions*100:0,correct_count:s.correct_count||0,total_questions:s.total_questions||0,time_spent_seconds:s.time_spent_seconds||n}}async getHistory(e=10){try{return(await st.get(`/practice/history?per_page=${e}`)).data||[]}catch(t){return console.error("Error getting history:",t),[]}}}const fs=new Rge;/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lge=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ige=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),U5=r=>{const e=Ige(r);return e.charAt(0).toUpperCase()+e.slice(1)},fM=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),zge=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qge=he.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},u)=>he.createElement("svg",{ref:u,...Pge,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:fM("lucide",a),...!s&&!zge(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,d])=>he.createElement(c,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=(r,e)=>{const t=he.forwardRef(({className:n,...a},s)=>he.createElement(qge,{ref:s,iconNode:e,className:fM(`lucide-${Lge(U5(r))}`,`lucide-${r}`,n),...a}));return t.displayName=U5(r),t};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ge=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zl=Di("book-open",$ge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uge=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Hge=Di("chevron-left",Uge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vge=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hM=Di("chevron-right",Vge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gge=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qge=Di("circle-check-big",Gge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wge=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xw=Di("clock",Wge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kge=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Xge=Di("lock-open",Kge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yge=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Zge=Di("lock",Yge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jge=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],exe=Di("play",Jge);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const txe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rxe=Di("plus",txe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nxe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ixe=Di("send",nxe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const axe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sxe=Di("square-pen",axe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oxe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Hy=Di("target",oxe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lxe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cxe=Di("trash-2",lxe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uxe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dxe=Di("trending-up",uxe);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fxe=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],hxe=Di("trophy",fxe),mxe=()=>{const[r,e]=he.useState(!0),[t,n]=he.useState([]),[a,s]=he.useState(10),[o,l]=he.useState(!1),[u,c]=he.useState(null),[d,h]=he.useState({grade:10,title:"",description:"",question_type_ids:[],question_count:10,difficulty_level:"medium",time_limit_minutes:null,passing_score:70,is_active:!0,order_index:0}),[g,m]=he.useState([]),[v,x]=he.useState(null),[b,y]=he.useState([]),[S,_]=he.useState(null),[N,j]=he.useState([]),[E,T]=he.useState(null),[F,A]=he.useState([]),[R,I]=he.useState([]),[O,U]=he.useState(""),[D,H]=he.useState(!1),[P,G]=he.useState([]),[ue,le]=he.useState(""),[pe,de]=he.useState(!1);he.useEffect(()=>{L(),X()},[a]);const L=async()=>{try{e(!0);const M=await fs.getAssignments(a);n(M)}catch(M){console.error("Error loading assignments:",M)}finally{e(!1)}},X=async()=>{try{const ge=(await Bt.getSubjects()).filter(ee=>ee.name.includes(`Ton ${a}`)||ee.name.includes(`Lp ${a}`));m(ge)}catch(M){console.error("Error loading subjects:",M)}},V=async M=>{x(M),_(null),T(null),I([]);const ge=await Bt.getChaptersBySubject(M.id);y(ge)},se=async M=>{_(M),T(null),I([]);const ge=await Bt.getLessonsByChapter(M.id);j(ge)},ae=async M=>{T(M),I([]);const ge=await Bt.getQuestionTypesByLesson(M.id);A(ge)},W=async()=>{try{const M={...d,question_type_ids:R.length>0?R:d.question_type_ids,grade:a};u?await fs.updateAssignment(u,M):await fs.createAssignment(M),l(!1),ie(),L()}catch(M){alert("Li: "+(M.message||"Khng th lu bi tp"))}},z=async M=>{if(confirm("Bn c chc mun xa bi tp ny?"))try{await fs.deleteAssignment(M),L()}catch(ge){alert("Li: "+(ge.message||"Khng th xa"))}},re=async M=>{try{await fs.updateAssignment(M.id,{is_active:!M.is_active}),L()}catch(ge){alert("Li: "+(ge.message||"Khng th cp nht"))}},ne=M=>{c(M.id),h({grade:M.grade,title:M.title,description:M.description||"",question_type_ids:M.question_type_ids,question_count:M.question_count,difficulty_level:M.difficulty_level,time_limit_minutes:M.time_limit_minutes||null,passing_score:M.passing_score,is_active:M.is_active,order_index:M.order_index}),l(!0)},ie=()=>{h({grade:a,title:"",description:"",question_type_ids:[],question_count:10,difficulty_level:"medium",time_limit_minutes:null,passing_score:70,is_active:!0,order_index:0}),c(null),x(null),_(null),T(null),I([]),U(""),G([]),le("")},oe=async()=>{if(!O.trim()){G(["Vui lng dn ni dung JSON vo khung text"]);return}G([]),le(""),H(!0);const M=[];try{let ge;try{ge=JSON.parse(O)}catch(B){const Q=B.message?.match(/position (\d+)/);if(Q){const Z=parseInt(Q[1]),J=O.substring(0,Z).split(`
`),K=J.length,te=J[J.length-1].length+1;M.push(`Li c php JSON ti dng ${K}, ct ${te}`)}else M.push("Li c php JSON: "+(B.message||"Khng th phn tch file"));M.push('Gi : Kim tra du ngoc {}, [], du phy v du nhy kp ""'),G(M),H(!1);return}if(!ge.questions){M.push('Thiu trng "questions" trong JSON'),M.push('JSON cn c cu trc: { "questions": [...] }'),G(M),H(!1);return}if(!Array.isArray(ge.questions)){M.push('Trng "questions" phi l mt mng []'),G(M),H(!1);return}if(ge.questions.length===0){M.push('Mng "questions" khng c cu hi no'),G(M),H(!1);return}if(R.length===0){M.push("Vui lng chn t nht mt dng bi trc khi import cu hi"),G(M),H(!1);return}const ee=[],k=[];if(ge.questions.forEach((B,Q)=>{const Z=Q+1,J=[],K=B.question||B.question_text||"";K.trim()||J.push(`Cu ${Z}: Thiu ni dung cu hi`);const te=B.type||"mcq";["mcq","msq","sa","tf","tl"].includes(te)||J.push(`Cu ${Z}: Loi cu hi khng hp l (type: "${te}")`),J.length>0?k.push(...J):ee.push({question_type_id:R[0],type:te,question_text:K,option_a:B.option_a||"",option_b:B.option_b||"",option_c:B.option_c||"",option_d:B.option_d||"",correct_option:B.correct_option?.toUpperCase()||"",explanation:B.explanation||"",difficulty:B.difficulty||B.difficulty_level||"medium",tags:Array.isArray(B.tags)?B.tags:B.tags?[B.tags]:[],is_dynamic:B.is_dynamic||!1})}),k.length>0){M.push(`Pht hin ${k.length} li trong ${ge.questions.length} cu hi:`),M.push(...k.slice(0,10)),k.length>10&&M.push(`... v ${k.length-10} li khc`),G(M),H(!1);return}try{await dM.bulkCreateQuestions(ee),le(` Import thnh cng ${ee.length} cu hi vo dng bi  chn!`),U("")}catch(B){console.error("Bulk import error:",B),M.push("Li khi lu cu hi vo database"),M.push(B.message||"Vui lng th li"),G(M)}}catch(ge){console.error("Error importing JSON:",ge),M.push("C li khng xc nh: "+(ge.message||ge)),G(M)}finally{H(!1)}},ye=async()=>{if(R.length===0){alert("Vui lng chn t nht mt dng bi  export cu hi");return}try{de(!0);const M=[];for(const ee of R){const k=await Bt.getQuestionsByType(ee,{limit:1e4});M.push(...k)}if(M.length===0){alert("Khng c cu hi no trong cc dng bi  chn");return}const ge={questions:M.map(ee=>({type:ee.type,question:ee.question_text,question_text:ee.question_text,option_a:ee.option_a||"",option_b:ee.option_b||"",option_c:ee.option_c||"",option_d:ee.option_d||"",correct_option:ee.correct_option,explanation:ee.explanation,difficulty:ee.difficulty,tags:ee.tags,is_dynamic:ee.is_dynamic}))};U(JSON.stringify(ge,null,2)),le(`  export ${M.length} cu hi. Bn c th chnh sa v import li!`)}catch(M){console.error("Error exporting questions:",M),alert("C li khi export cu hi: "+(M.message||M))}finally{de(!1)}};return r?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-teal-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti d liu..."})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Qun l bi tp luyn tp"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"To v qun l bi tp cho hc sinh"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("select",{value:a,onChange:M=>s(Number(M.target.value)),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:10,children:"Lp 10"}),i.jsx("option",{value:11,children:"Lp 11"}),i.jsx("option",{value:12,children:"Lp 12"})]}),i.jsxs("button",{onClick:()=>{ie(),l(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold flex items-center gap-2",children:[i.jsx(rxe,{className:"w-5 h-5"}),"To bi tp mi"]})]})]}),i.jsx("div",{className:"space-y-4",children:t.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[i.jsx(zl,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsxs("p",{className:"text-gray-600 mb-2",children:["Cha c bi tp no cho lp ",a]}),i.jsx("button",{onClick:()=>{ie(),l(!0)},className:"mt-4 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"To bi tp u tin"})]}):t.map(M=>i.jsx("div",{className:`bg-white rounded-lg shadow p-6 border-2 ${M.is_active?"border-green-200":"border-gray-200 opacity-60"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:M.title}),!M.is_active&&i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs font-semibold rounded",children:" n"})]}),M.description&&i.jsx("p",{className:"text-gray-600 mb-3",children:M.description}),i.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[i.jsxs("span",{children:[" ",M.question_count," cu"]}),i.jsxs("span",{children:[" ",M.time_limit_minutes||"Khng gii hn"," pht"]}),i.jsxs("span",{children:[" t: ",M.passing_score,"%"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>re(M),className:"p-2 rounded-lg hover:bg-gray-100",title:M.is_active?"n bi tp":"Hin bi tp",children:M.is_active?i.jsx(Xge,{className:"w-5 h-5 text-green-600"}):i.jsx(Zge,{className:"w-5 h-5 text-gray-400"})}),i.jsx("button",{onClick:()=>ne(M),className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600",children:i.jsx(sxe,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>z(M.id),className:"p-2 rounded-lg hover:bg-red-100 text-red-600",children:i.jsx(cxe,{className:"w-5 h-5"})})]})]})},M.id))}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:u?"Chnh sa bi tp":"To bi tp mi"})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tn bi tp *"}),i.jsx("input",{type:"text",value:d.title,onChange:M=>h({...d,title:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"V d: Bi 1 - Cn bc hai",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:d.description,onChange:M=>h({...d,description:M.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"M t v bi tp ny..."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:"Chn cu hi t Quiz Bank"}),g.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mn hc"}),i.jsxs("select",{value:v?.id||"",onChange:M=>{const ge=g.find(ee=>ee.id===Number(M.target.value));ge&&V(ge)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"",children:"Chn mn hc"}),g.map(M=>i.jsx("option",{value:M.id,children:M.name},M.id))]})]}),v&&b.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chng"}),i.jsxs("select",{value:S?.id||"",onChange:M=>{const ge=b.find(ee=>ee.id===Number(M.target.value));ge&&se(ge)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"",children:"Chn chng"}),b.map(M=>i.jsx("option",{value:M.id,children:M.name},M.id))]})]}),S&&N.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bi hc"}),i.jsxs("select",{value:E?.id||"",onChange:M=>{const ge=N.find(ee=>ee.id===Number(M.target.value));ge&&ae(ge)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"",children:"Chn bi hc"}),N.map(M=>i.jsx("option",{value:M.id,children:M.name},M.id))]})]}),E&&F.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dng bi"}),i.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2",children:F.map(M=>i.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded",children:[i.jsx("input",{type:"checkbox",checked:R.includes(M.id),onChange:ge=>{ge.target.checked?I([...R,M.id]):I(R.filter(ee=>ee!==M.id))},className:"rounded"}),i.jsx("span",{className:"text-sm",children:M.name})]},M.id))}),R.length>0&&i.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[" chn ",R.length," dng bi"]})]})]}),i.jsxs("div",{className:"border border-green-200 rounded-lg p-4 space-y-4 bg-green-50",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:" Hoc import cu hi t JSON"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:ye,disabled:pe||R.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 text-sm font-medium",children:pe?"ang ti...":" Export cu hi ra JSON"}),i.jsx("span",{className:"text-xs text-gray-600",children:"(Ly tt c cu hi t dng bi  chn)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dn JSON vo y"}),i.jsx("textarea",{value:O,onChange:M=>U(M.target.value),placeholder:'{"questions": [{"type": "mcq", "question": "...", "option_a": "...", ...}]}',rows:6,className:"w-full px-3 py-2 border border-green-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 font-mono text-sm",disabled:D}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:" Cu hi s c lu vo dng bi  chn bn trn"})]}),i.jsx("button",{onClick:oe,disabled:D||!O.trim()||R.length===0,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 text-sm font-medium",children:D?"ang x l...":" Import JSON vo MySQL"}),D&&i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600 mr-2"}),"ang x l..."]}),ue&&i.jsx("div",{className:"p-3 bg-green-100 border border-green-300 rounded-lg",children:i.jsx("p",{className:"text-green-700 font-medium",children:ue})}),P.length>0&&i.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-semibold",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{children:"Li Import JSON"})]}),i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-600",children:P.map((M,ge)=>i.jsx("li",{children:M},ge))}),i.jsx("button",{type:"button",onClick:()=>G([]),className:"mt-2 text-xs text-red-500 hover:text-red-700 underline",children:"ng thng bo"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S cu hi"}),i.jsx("input",{type:"number",value:d.question_count,onChange:M=>h({...d,question_count:Number(M.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",min:"1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thi gian (pht)"}),i.jsx("input",{type:"number",value:d.time_limit_minutes||"",onChange:M=>h({...d,time_limit_minutes:M.target.value?Number(M.target.value):null}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",min:"1",placeholder:"Khng gii hn"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"im t (%)"}),i.jsx("input",{type:"number",value:d.passing_score,onChange:M=>h({...d,passing_score:Number(M.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",min:"0",max:"100",required:!0})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:d.is_active,onChange:M=>h({...d,is_active:M.target.checked}),className:"rounded"}),i.jsx("span",{className:"text-sm",children:"Hot ng"})]})})]}),i.jsxs("div",{className:"p-6 border-t border-gray-200 flex justify-end gap-4",children:[i.jsx("button",{onClick:()=>{l(!1),ie()},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Hy"}),i.jsx("button",{onClick:W,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:u?"Cp nht":"To bi tp"})]})]})})]})},pxe=()=>{const[r,e]=he.useState("question-list"),[t,n]=he.useState(!1),a=V5();he.useEffect(()=>{a.state?.message&&(n(!0),setTimeout(()=>n(!1),5e3))},[a.state]);const s=[{key:"question-list",label:"Danh sch cu hi",icon:"",desc:"Xem v chnh sa cu hi",color:"from-green-500 to-emerald-600",bgColor:"bg-green-50",borderColor:"border-green-500",textColor:"text-green-600"},{key:"add-question",label:"Thm cu hi",icon:"",desc:"Thm cu hi vo dng bi c sn",color:"from-orange-500 to-red-600",bgColor:"bg-orange-50",borderColor:"border-orange-500",textColor:"text-orange-600"},{key:"import",label:"Import TXT",icon:"",desc:"Import hng lot t file TXT",color:"from-blue-500 to-cyan-600",bgColor:"bg-blue-50",borderColor:"border-blue-500",textColor:"text-blue-600"},{key:"lessons",label:"Bi hc",icon:"",desc:"Qun l bi hc v video",color:"from-purple-500 to-violet-600",bgColor:"bg-purple-50",borderColor:"border-purple-500",textColor:"text-purple-600"},{key:"practice",label:"Luyn tp",icon:"",desc:"Qun l luyn tp hc sinh",color:"from-teal-500 to-green-600",bgColor:"bg-teal-50",borderColor:"border-teal-500",textColor:"text-teal-600"}],o=s.find(l=>l.key===r);return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 shadow-lg",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-3",children:[i.jsx("div",{className:"text-white",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-2xl",children:""}),i.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"})]})}),i.jsxs("a",{href:"https://hoc.io.vn/api/admin/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white/20 backdrop-blur rounded text-white text-sm font-medium hover:bg-white/30 transition-all",children:[i.jsx("span",{children:" PHP Admin"}),i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[t&&i.jsx("div",{className:"mb-6 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Cho mng Admin!"}),i.jsx("p",{className:"text-blue-100 mb-3",children:"Bn  truy cp t trang luyn tp. y l khu vc qun l dnh cho admin."}),i.jsx("button",{onClick:()=>e("practice"),className:"px-4 py-2 bg-white/20 backdrop-blur rounded-lg hover:bg-white/30 transition-all font-medium",children:" Qun l luyn tp"})]})]})}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mb-4",children:s.map(l=>i.jsx("button",{onClick:()=>e(l.key),className:`relative group transition-all duration-300 ${r===l.key?"transform scale-105":"hover:scale-102"}`,children:i.jsxs("div",{className:`rounded-lg shadow-md overflow-hidden border-2 ${r===l.key?`${l.borderColor} shadow-lg`:"border-transparent hover:border-gray-300"}`,children:[i.jsx("div",{className:`bg-gradient-to-r ${l.color} p-2 text-white`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-2xl",children:l.icon}),i.jsx("div",{className:"font-bold text-xs",children:l.label})]})}),r===l.key&&i.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${l.color}`})]})},l.key))}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 border border-gray-200",children:[o&&i.jsx("div",{className:`mb-4 pb-2 border-b-2 ${o.borderColor}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`text-2xl p-2 rounded-lg bg-gradient-to-r ${o.color} text-white`,children:o.icon}),i.jsx("div",{children:i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:o.label})})]})}),i.jsxs("div",{children:[r==="question-list"&&i.jsx("div",{className:"animate-fadeIn",children:i.jsx(Tge,{})}),r==="add-question"&&i.jsx("div",{className:"animate-fadeIn",children:i.jsx(jge,{})}),r==="import"&&i.jsx("div",{className:"animate-fadeIn",children:i.jsx(Age,{})}),r==="lessons"&&i.jsx("div",{className:"animate-fadeIn",children:i.jsx(Bge,{})}),r==="practice"&&i.jsx("div",{className:"animate-fadeIn",children:i.jsx(mxe,{})})]})]})]}),i.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-in-out;
        }
      `})]})};class J0{static async getSettings(){const{data:e,error:t}=await supabase.from("practice_settings").select("setting_key, setting_value");if(t)throw t;const n={};return e?.forEach(a=>{n[a.setting_key]=a.setting_value}),n}static async updateSetting(e,t){const{error:n}=await supabase.from("practice_settings").update({setting_value:t,updated_at:new Date().toISOString()}).eq("setting_key",e);if(n)throw n}static async getTopicProgress(e,t){const{data:n,error:a}=await supabase.from("student_topic_progress").select("*").eq("student_id",e).eq("question_type_id",t).single();if(a&&a.code!=="PGRST116")throw a;return n}static async getAllProgress(e){const{data:t,error:n}=await supabase.from("student_topic_progress").select("*").eq("student_id",e).order("last_practiced_at",{ascending:!1});if(n)throw n;return t||[]}static async updateProgress(e,t,n,a){const s=await this.getTopicProgress(e,t);if(s){const o=s.total_attempts+a,l=s.correct_answers+n,{error:u}=await supabase.from("student_topic_progress").update({total_attempts:o,correct_answers:l,last_practiced_at:new Date().toISOString()}).eq("id",s.id);if(u)throw u}else{const{error:o}=await supabase.from("student_topic_progress").insert({student_id:e,question_type_id:t,total_attempts:a,correct_answers:n,last_practiced_at:new Date().toISOString()});if(o)throw o}}static async getNextUnpassedTopic(e,t){const{data:n}=await supabase.from("question_types").select("id").eq("lesson_id",t).eq("is_active",!0).order("order_index");if(!n||n.length===0)return null;const{data:a}=await supabase.from("student_topic_progress").select("question_type_id, is_passed").eq("student_id",e).in("question_type_id",n.map(o=>o.id)),s=new Set(a?.filter(o=>o.is_passed).map(o=>o.question_type_id)||[]);for(const o of n)if(!s.has(o.id))return o.id;return null}static async getLessonProgress(e,t){const{data:n}=await supabase.from("question_types").select("id").eq("lesson_id",t).eq("is_active",!0),a=n?.length||0;if(a===0)return{totalTopics:0,passedTopics:0,percentage:0};const{data:s}=await supabase.from("student_topic_progress").select("question_type_id, is_passed").eq("student_id",e).in("question_type_id",n.map(u=>u.id)).eq("is_passed",!0),o=s?.length||0,l=o/a*100;return{totalTopics:a,passedTopics:o,percentage:l}}}const gxe=()=>{const{user:r}=Yr(),[e,t]=he.useState(!0),[n,a]=he.useState(!1),[s,o]=he.useState(10),[l,u]=he.useState(5),[c,d]=he.useState(50),[h,g]=he.useState(50),[m,v]=he.useState("sequential");he.useEffect(()=>{x()},[]);const x=async()=>{try{t(!0);const S=await J0.getSettings();S.questions_per_topic&&(o(S.questions_per_topic.default||10),u(S.questions_per_topic.min||5),d(S.questions_per_topic.max||50)),S.pass_threshold&&g(S.pass_threshold.percentage||50),S.practice_mode&&v(S.practice_mode.mode||"sequential")}catch(S){console.error("Error loading settings:",S),alert("C li khi ti ci t")}finally{t(!1)}},b=async()=>{if(l>s||s>c){alert("S cu hi khng hp l! Min  Default  Max");return}if(h<0||h>100){alert("Ngng t phi t 0-100%");return}try{a(!0),await J0.updateSetting("questions_per_topic",{default:s,min:l,max:c}),await J0.updateSetting("pass_threshold",{percentage:h}),await J0.updateSetting("practice_mode",{mode:m}),alert("  lu ci t thnh cng!")}catch(S){console.error("Error saving settings:",S),alert(" C li khi lu ci t")}finally{a(!1)}},y=()=>{confirm("Bn c chc mun t li v mc nh?")&&(o(10),u(5),d(50),g(50),v("sequential"))};return e?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti ci t..."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Ci t h thng luyn tp"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Cu hnh cc thng s cho h thng luyn tp ca hc sinh"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 space-y-8",children:[i.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" S cu hi mi dng ton"}),i.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Cu hnh s lng cu hi cho mi ln hc sinh luyn tp mt dng ton"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ti thiu"}),i.jsx("input",{type:"number",value:l,onChange:S=>u(parseInt(S.target.value)||5),min:"1",max:"100",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"t nht 1 cu"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mc nh "}),i.jsx("input",{type:"number",value:s,onChange:S=>o(parseInt(S.target.value)||10),min:"1",max:"100",className:"w-full px-4 py-3 border-2 border-indigo-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-indigo-50"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"S cu mc nh"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ti a"}),i.jsx("input",{type:"number",value:c,onChange:S=>d(parseInt(S.target.value)||50),min:"1",max:"100",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ti a 100 cu"})]})]}),i.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:i.jsxs("p",{className:"text-sm text-blue-900",children:[i.jsx("span",{className:"font-semibold",children:" Lu :"})," Min  Default  Max"]})})]}),i.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Ngng hon thnh"}),i.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Phn trm im ti thiu  hc sinh c coi l hon thnh mt dng ton"}),i.jsxs("div",{className:"max-w-md",children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"im t (%)"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"range",value:h,onChange:S=>g(parseInt(S.target.value)),min:"0",max:"100",step:"5",className:"flex-1 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #4f46e5 0%, #4f46e5 ${h}%, #e5e7eb ${h}%, #e5e7eb 100%)`}}),i.jsxs("div",{className:"w-20 px-4 py-3 bg-indigo-100 border-2 border-indigo-300 rounded-lg text-center font-bold text-indigo-900",children:[h,"%"]})]}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[i.jsx("span",{children:"0%"}),i.jsx("span",{children:"50%"}),i.jsx("span",{children:"100%"})]})]}),i.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:i.jsxs("p",{className:"text-sm text-green-900",children:[i.jsx("span",{className:"font-semibold",children:" Hin ti:"})," Hc sinh cn t ",h,"%  hon thnh dng ton"]})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:" Ch  luyn tp"}),i.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Cch thc hc sinh luyn tp cc dng ton trong bi hc"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>v("sequential"),className:`p-6 rounded-lg border-2 text-left transition-all ${m==="sequential"?"border-indigo-600 bg-indigo-50":"border-gray-300 hover:border-indigo-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${m==="sequential"?"border-indigo-600 bg-indigo-600":"border-gray-300"}`,children:m==="sequential"&&i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsx("span",{className:"text-lg font-bold text-gray-900",children:" Tun t"})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Hc sinh phi hon thnh dng ton theo th t t u n cui bi hc"})]}),i.jsxs("button",{onClick:()=>v("random"),className:`p-6 rounded-lg border-2 text-left transition-all ${m==="random"?"border-indigo-600 bg-indigo-50":"border-gray-300 hover:border-indigo-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${m==="random"?"border-indigo-600 bg-indigo-600":"border-gray-300"}`,children:m==="random"&&i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsx("span",{className:"text-lg font-bold text-gray-900",children:" Ngu nhin"})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Hc sinh c th chn bt k dng ton no  luyn tp"})]})]})]})]}),i.jsxs("div",{className:"mt-8 flex gap-4",children:[i.jsx("button",{onClick:b,disabled:n,className:"flex-1 px-8 py-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold text-lg disabled:bg-gray-400 disabled:cursor-not-allowed",children:n?"ang lu...":" Lu ci t"}),i.jsx("button",{onClick:y,disabled:n,className:"px-8 py-4 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:" t li mc nh"})]}),i.jsxs("div",{className:"mt-8 p-6 bg-yellow-50 border-2 border-yellow-200 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-yellow-900 mb-2",children:" Lu  quan trng"}),i.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[i.jsx("li",{children:" Cc thay i s p dng cho tt c hc sinh"}),i.jsx("li",{children:" Tin  hin ti ca hc sinh khng b nh hng"}),i.jsx("li",{children:" Ch cc bi luyn tp mi s s dng ci t mi"}),i.jsx("li",{children:" Nn thng bo cho hc sinh trc khi thay i ci t quan trng"})]})]})]})})},xxe=({isOpen:r,onClose:e,onSuccess:t,userId:n})=>{const a=Vn(),[s,o]=he.useState("manual"),[l,u]=he.useState([]),[c,d]=he.useState(!1),[h,g]=he.useState(""),[m,v]=he.useState(""),[x,b]=he.useState(0),[y,S]=he.useState(1),[_,N]=he.useState(""),[j,E]=he.useState(!1),[T,F]=he.useState(!1),[A,R]=he.useState({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:""}),[I,O]=he.useState("");he.useEffect(()=>{if(r){const G=new Date;v(` thi - ${G.toLocaleDateString("vi-VN")} ${G.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}`),u([]),g(""),O(""),R({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:""})}},[r]);const U=()=>{if(!A.question?.trim()){g("Vui lng nhp ni dung cu hi");return}if(!A.correct_option?.trim()){g("Vui lng nhp p n ng");return}const G={id:`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:A.type,question:A.question.trim(),option_a:A.option_a||"",option_b:A.option_b||"",option_c:A.option_c||"",option_d:A.option_d||"",correct_option:A.correct_option.trim(),explanation:A.explanation||""};u([...l,G]),R({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:""}),g("")},D=()=>{try{const G=JSON.parse(I),ue=[],le=Array.isArray(G)?G:G.questions||[];for(const pe of le)ue.push({id:`import_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:pe.type||"mcq",question:pe.question||pe.question_text||"",option_a:pe.option_a||pe.options?.[0]||"",option_b:pe.option_b||pe.options?.[1]||"",option_c:pe.option_c||pe.options?.[2]||"",option_d:pe.option_d||pe.options?.[3]||"",correct_option:pe.correct_option||pe.answer||"",explanation:pe.explanation||""});if(ue.length===0){g("Khng tm thy cu hi trong JSON");return}u([...l,...ue]),O(""),g(""),alert(` import ${ue.length} cu hi!`)}catch{g("JSON khng hp l. Vui lng kim tra li nh dng.")}},H=G=>{u(l.filter((ue,le)=>le!==G))},P=async()=>{if(!m.trim()){g("Vui lng nhp tiu   thi");return}if(l.length===0){g("Vui lng thm t nht 1 cu hi");return}d(!0),g("");try{console.log(" Creating quiz with data:",{title:m.trim(),questionCount:l.length,timeLimit:x,maxAttempts:y});const G=await Va.createQuiz({title:m.trim(),questions:l,time_limit_minutes:x||void 0,max_attempts:y,shuffle_questions:j,shuffle_options:T,show_results_after_submission:!0,show_correct_answers:!0,password:_||void 0,status:"published",is_public:!_});console.log(" Quiz created successfully:",G),alert("  to  thi thnh cng v lu vo MySQL!"),t(),e(),a(`/online-exam/${G.slug}`)}catch(G){console.error(" Error creating quiz:",G);const ue=G.response?.data?.message||G.message||"C li xy ra khi to  thi",le=G.response?.data?.error||"";alert(` LI TO  THI:
${ue}
${le?`
Chi tit: `+le:""}`),g(ue)}finally{d(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"To  thi online"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),i.jsxs("div",{className:"flex border-b border-gray-200",children:[i.jsx("button",{onClick:()=>o("manual"),className:`flex-1 py-3 px-4 text-sm font-medium ${s==="manual"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-500 hover:text-gray-700"}`,children:" To tng cu"}),i.jsx("button",{onClick:()=>o("import"),className:`flex-1 py-3 px-4 text-sm font-medium ${s==="import"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50":"text-gray-500 hover:text-gray-700"}`,children:" Import JSON"}),i.jsx("button",{onClick:()=>{a("/quiz-bank"),e()},className:"flex-1 py-3 px-4 text-sm font-medium text-gray-500 hover:text-gray-700",children:" Chn t ngn hng "})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiu   thi *"}),i.jsx("input",{type:"text",value:m,onChange:G=>v(G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Nhp tiu   thi"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi gian (pht)"}),i.jsxs("select",{value:x,onChange:G=>b(parseInt(G.target.value)),className:"w-full p-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:0,children:"Khng gii hn"}),i.jsx("option",{value:15,children:"15 pht"}),i.jsx("option",{value:30,children:"30 pht"}),i.jsx("option",{value:45,children:"45 pht"}),i.jsx("option",{value:60,children:"60 pht"}),i.jsx("option",{value:90,children:"90 pht"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S ln thi"}),i.jsx("select",{value:y,onChange:G=>S(parseInt(G.target.value)),className:"w-full p-2 border border-gray-300 rounded-lg",children:[1,2,3,4,5].map(G=>i.jsxs("option",{value:G,children:[G," ln"]},G))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mt khu (ty chn)"}),i.jsx("input",{type:"text",value:_,onChange:G=>N(G.target.value),className:"w-full p-2 border border-gray-300 rounded-lg",placeholder:" trng = khng c"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:j,onChange:G=>E(G.target.checked),className:"rounded"}),"Xo trn cu hi"]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:T,onChange:G=>F(G.target.checked),className:"rounded"}),"Xo trn p n"]})]})]})}),s==="manual"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Thm cu hi mi"}),i.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi cu hi"}),i.jsxs("select",{value:A.type,onChange:G=>R({...A,type:G.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg",children:[i.jsx("option",{value:"mcq",children:"Trc nghim (MCQ)"}),i.jsx("option",{value:"msq",children:"ng/Sai (MSQ)"}),i.jsx("option",{value:"sa",children:"Tr li ngn (SA)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ni dung cu hi *"}),i.jsx("textarea",{value:A.question,onChange:G=>R({...A,question:G.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg",rows:2,placeholder:"Nhp ni dung cu hi..."})]}),(A.type==="mcq"||A.type==="msq")&&i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["A","B","C","D"].map(G=>i.jsx("input",{type:"text",value:A[`option_${G.toLowerCase()}`]||"",onChange:ue=>R({...A,[`option_${G.toLowerCase()}`]:ue.target.value}),className:"p-2 border border-gray-300 rounded-lg",placeholder:`p n ${G}`},G))}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n ng *"}),i.jsx("input",{type:"text",value:A.correct_option,onChange:G=>R({...A,correct_option:G.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg",placeholder:A.type==="mcq"?"A, B, C hoc D":"p n"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Li gii"}),i.jsx("input",{type:"text",value:A.explanation,onChange:G=>R({...A,explanation:G.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg",placeholder:"Li gii (ty chn)"})]})]}),i.jsx("button",{onClick:U,className:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"+ Thm cu hi"})]})]}),s==="import"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Import t JSON"}),i.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg space-y-3",children:[i.jsx("textarea",{value:I,onChange:G=>O(G.target.value),className:"w-full p-3 border border-gray-300 rounded-lg font-mono text-sm",rows:8,placeholder:`[
  {
    "question": "Cu hi 1?",
    "option_a": "p n A",
    "option_b": "p n B", 
    "option_c": "p n C",
    "option_d": "p n D",
    "correct_option": "A",
    "explanation": "Li gii"
  }
]`}),i.jsx("button",{onClick:D,disabled:!I.trim(),className:"w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300",children:" Import JSON"})]})]}),l.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-3",children:["Danh sch cu hi (",l.length," cu)"]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map((G,ue)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[i.jsxs("span",{className:"font-medium text-gray-500 w-8",children:["#",ue+1]}),i.jsxs("div",{className:"flex-1 text-sm",children:[i.jsx("p",{className:"text-gray-900 line-clamp-2",children:G.question}),i.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["p n: ",G.correct_option," | Loi: ",G.type.toUpperCase()]})]}),i.jsx("button",{onClick:()=>H(ue),className:"text-red-500 hover:text-red-700",children:""})]},G.id))})]}),h&&i.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:h})]}),i.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Hy"}),i.jsxs("button",{onClick:P,disabled:c||l.length===0,className:"flex-1 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[c&&i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c?"ang to...":`To  thi (${l.length} cu)`]})]})]})}):null},vxe=()=>{const[r,e]=he.useState([]),[t,n]=he.useState(0),[a,s]=he.useState(!1),[o,l]=he.useState(!1),[u,c]=he.useState(""),[d,h]=he.useState("bank"),[g,m]=he.useState(!1),[v,x]=he.useState(null),[b,y]=he.useState(!1),[S,_]=he.useState({}),[N,j]=he.useState(""),[E,T]=he.useState([]),[F,A]=he.useState([]),[R,I]=he.useState([]),[O,U]=he.useState([]),[D,H]=he.useState(null),[P,G]=he.useState(null),[ue,le]=he.useState(null),[pe,de]=he.useState(null);he.useEffect(()=>{L()},[]);const L=async()=>{try{const k=await Bt.getSubjects();T(k.filter(B=>B.is_active))}catch(k){console.error("Error loading subjects:",k)}};he.useEffect(()=>{D?X(D):(A([]),G(null))},[D]);const X=async k=>{try{const B=await Bt.getChaptersBySubject(k);A(B.filter(Q=>Q.is_active))}catch(B){console.error("Error loading chapters:",B)}};he.useEffect(()=>{P?V(P):(I([]),le(null))},[P]);const V=async k=>{try{const B=await Bt.getLessonsByChapter(k);I(B.filter(Q=>Q.is_active))}catch(B){console.error("Error loading lessons:",B)}};he.useEffect(()=>{ue?se(ue):(U([]),de(null))},[ue]);const se=async k=>{try{const B=await Bt.getQuestionTypesByLesson(k);U(B.filter(Q=>Q.is_active))}catch(B){console.error("Error loading question types:",B)}},ae=()=>{try{const k=JSON.parse(u),B=Array.isArray(k)?k:k.questions||[],Q=new Uo,Z=B.map((K,te)=>{const me=K.question||K.question_text||"";if(K.is_dynamic||K.isDynamic||Q.isDynamicQuestion({question:me}))try{const xe=Q.processQuestion({question:me,option_a:K.option_a||"",option_b:K.option_b||"",option_c:K.option_c||"",option_d:K.option_d||"",correct_option:K.correct_option||"",explanation:K.explanation||""});return{id:te+1,question_type_id:0,type:K.type||"mcq",question_text:xe.question,option_a:xe.option_a||"",option_b:xe.option_b||"",option_c:xe.option_c||"",option_d:xe.option_d||"",correct_option:xe.correct_option,explanation:xe.explanation,difficulty:K.difficulty||"medium",is_dynamic:!0,dynamic_variables:{original_question:me,original_option_a:K.option_a||"",original_option_b:K.option_b||"",original_option_c:K.option_c||"",original_option_d:K.option_d||"",original_correct_option:K.correct_option||"",original_explanation:K.explanation||""},tags:[],approval_status:"approved",is_active:!0,created_at:new Date().toISOString()}}catch(xe){console.error("Error processing dynamic question from JSON:",xe)}return{id:te+1,question_type_id:0,type:K.type||"mcq",question_text:me,option_a:K.option_a||"",option_b:K.option_b||"",option_c:K.option_c||"",option_d:K.option_d||"",correct_option:K.correct_option||"",explanation:K.explanation||"",difficulty:K.difficulty||"medium",is_dynamic:!1,tags:[],approval_status:"approved",is_active:!0,created_at:new Date().toISOString()}});e(Z),n(0),l(!1);const J=Z.filter(K=>K.is_dynamic).length;alert(` ti ${Z.length} cu hi t JSON! (${J} cu ng)`)}catch(k){alert("Li: JSON khng hp l. Vui lng kim tra li."),console.error("JSON parse error:",k)}},W=async()=>{if(!pe){alert("Vui lng chn dng ton!");return}try{m(!0);let k=await Bt.getQuestionsByType(pe,{limit:50});const B=new Uo,Q=k.map(Z=>{if(Z.is_dynamic||B.isDynamicQuestion({question:Z.question_text||""}))try{console.log("Processing dynamic question:",Z.id,Z.question_text?.substring(0,50)+"...");const K=B.processQuestion({question:Z.question_text||"",option_a:Z.option_a||"",option_b:Z.option_b||"",option_c:Z.option_c||"",option_d:Z.option_d||"",correct_option:Z.correct_option||"",explanation:Z.explanation||""});return console.log("Processed result:",K.question?.substring(0,50)+"..."),{...Z,question_text:K.question,option_a:K.option_a||"",option_b:K.option_b||"",option_c:K.option_c||"",option_d:K.option_d||"",correct_option:K.correct_option,explanation:K.explanation,is_dynamic:!0,dynamic_variables:{...Z.dynamic_variables||{},original_question:Z.question_text,original_option_a:Z.option_a,original_option_b:Z.option_b,original_option_c:Z.option_c,original_option_d:Z.option_d,original_correct_option:Z.correct_option,original_explanation:Z.explanation}}}catch(K){return console.error("Error processing dynamic question:",K),Z}return Z});e(Q),n(0),l(!1),alert(` ti ${Q.length} cu hi t ngn hng!`)}catch(k){alert("Li khi ti cu hi: "+k)}finally{m(!1)}},z=r[t],re=t>0,ne=t<r.length-1,ie=()=>{re&&(n(t-1),l(!1),x(null),y(!1),_({}),j(""))},oe=()=>{ne&&(n(t+1),l(!1),x(null),y(!1),_({}),j(""))},ye=()=>{const k=r[t];if(!k.is_dynamic||!k.dynamic_variables)return;const B=new Uo;try{console.log("Regenerating dynamic question:",k.id);const Q=B.processQuestion({question:k.dynamic_variables.original_question||k.question_text||"",option_a:k.dynamic_variables.original_option_a||k.option_a||"",option_b:k.dynamic_variables.original_option_b||k.option_b||"",option_c:k.dynamic_variables.original_option_c||k.option_c||"",option_d:k.dynamic_variables.original_option_d||k.option_d||"",correct_option:k.dynamic_variables.original_correct_option||k.correct_option||"",explanation:k.dynamic_variables.original_explanation||k.explanation||""});console.log("Regenerated result:",Q.question?.substring(0,50)+"...");let Z=Q;if(k.type==="mcq"&&Q.option_a){const me=[{key:"A",value:Q.option_a},{key:"B",value:Q.option_b},{key:"C",value:Q.option_c},{key:"D",value:Q.option_d}].filter(fe=>fe.value).sort(()=>Math.random()-.5);Z={...Q,option_a:me[0]?.value||"",option_b:me[1]?.value||"",option_c:me[2]?.value||"",option_d:me[3]?.value||"",correct_option:me.findIndex(fe=>fe.key===Q.correct_option)!==-1?String.fromCharCode(65+me.findIndex(fe=>fe.key===Q.correct_option)):Q.correct_option},console.log("Shuffled options - correct answer now at:",Z.correct_option)}const J={...k,question_text:Z.question,option_a:Z.option_a||"",option_b:Z.option_b||"",option_c:Z.option_c||"",option_d:Z.option_d||"",correct_option:Z.correct_option,explanation:Z.explanation},K=[...r];K[t]=J,e(K),l(!1),x(null),y(!1)}catch(Q){console.error("Error regenerating dynamic question:",Q),alert("Li khi to li cu hi: "+Q.message)}},M=k=>{const B=new(window.AudioContext||window.webkitAudioContext),Q=B.createOscillator(),Z=B.createGain();Q.connect(Z),Z.connect(B.destination),k?(Q.frequency.value=523.25,Q.type="sine",Z.gain.setValueAtTime(.3,B.currentTime),Z.gain.exponentialRampToValueAtTime(.01,B.currentTime+.5),Q.start(B.currentTime),Q.stop(B.currentTime+.5)):(Q.frequency.value=392,Q.type="square",Z.gain.setValueAtTime(.2,B.currentTime),Q.frequency.exponentialRampToValueAtTime(196,B.currentTime+.3),Z.gain.exponentialRampToValueAtTime(.01,B.currentTime+.3),Q.start(B.currentTime),Q.stop(B.currentTime+.3))},ge=k=>{if(b)return;x(k),y(!0);const B=z.correct_option.includes(k);M(B)},ee=()=>{if(a)document.exitFullscreen&&document.exitFullscreen();else{const k=document.documentElement;k.requestFullscreen&&k.requestFullscreen()}s(!a)};return he.useEffect(()=>{const k=()=>{s(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",k),()=>document.removeEventListener("fullscreenchange",k)},[]),he.useEffect(()=>{const k=B=>{document.activeElement?.tagName==="TEXTAREA"||document.activeElement?.tagName==="INPUT"||(B.key==="ArrowLeft"&&re&&ie(),B.key==="ArrowRight"&&ne&&oe(),B.key===" "&&(B.preventDefault(),l(!o)),(B.key==="f"||B.key==="F")&&(B.preventDefault(),ee()),(B.key==="r"||B.key==="R")&&z?.is_dynamic&&(B.preventDefault(),ye()))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[t,r.length,o,a,z]),r.length===0?i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Ti cu hi"}),i.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Chn ngun cu hi  trnh chiu:"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ngun cu hi"}),i.jsxs("select",{value:d,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"bank",children:"T ngn hng cu hi"}),i.jsx("option",{value:"json",children:"T file JSON"})]})]}),d==="json"?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dn JSON cu hi"}),i.jsx("textarea",{value:u,onChange:k=>c(k.target.value),placeholder:'{"questions": [{"type": "mcq", "question": "...", ...}]}',rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md font-mono text-sm"}),i.jsx("button",{onClick:ae,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Ti t JSON"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lp"}),i.jsxs("select",{value:D||"",onChange:k=>H(k.target.value?Number(k.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[i.jsx("option",{value:"",children:"Chn lp"}),E.map(k=>i.jsx("option",{value:k.id,children:k.name},k.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chng"}),i.jsxs("select",{value:P||"",onChange:k=>G(k.target.value?Number(k.target.value):null),disabled:!D,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"",children:"Chn chng"}),F.map(k=>i.jsx("option",{value:k.id,children:k.name},k.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bi"}),i.jsxs("select",{value:ue||"",onChange:k=>le(k.target.value?Number(k.target.value):null),disabled:!P,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"",children:"Chn bi"}),R.map(k=>i.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dng ton"}),i.jsxs("select",{value:pe||"",onChange:k=>de(k.target.value?Number(k.target.value):null),disabled:!ue,className:"w-full px-3 py-2 border border-gray-300 rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"",children:"Chn dng ton"}),O.map(k=>i.jsx("option",{value:k.id,children:k.name},k.id))]})]}),i.jsx("button",{onClick:W,disabled:g||!pe,className:"w-full mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:g?"ang ti...":"Ti t ngn hng"})]})]})]})}):i.jsx("div",{className:`${a?"fixed inset-0 bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 z-50":""}`,children:i.jsxs("div",{className:`${a?"h-full flex flex-col":"space-y-4"}`,children:[i.jsxs("div",{className:`${a?"bg-gradient-to-r from-indigo-900/90 to-purple-900/90 backdrop-blur-sm text-white p-4":"bg-gradient-to-r from-indigo-50 to-purple-50 p-3 rounded-lg shadow-md"} flex items-center justify-between flex-wrap gap-3`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:ie,disabled:!re,className:"px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg disabled:opacity-50 hover:from-blue-600 hover:to-blue-700 transition-all transform hover:scale-105 active:scale-95 shadow-lg disabled:hover:scale-100",children:" Trc"}),i.jsxs("span",{className:"font-bold text-lg px-4 py-2 bg-blue-600 text-white rounded-lg shadow-sm",children:["Cu ",t+1," / ",r.length]}),i.jsx("button",{onClick:oe,disabled:!ne,className:"px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg disabled:opacity-50 hover:from-blue-600 hover:to-blue-700 transition-all transform hover:scale-105 active:scale-95 shadow-lg disabled:hover:scale-100",children:"Sau "})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[z?.is_dynamic&&i.jsx("button",{onClick:ye,className:"px-4 py-2.5 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition-all transform hover:scale-105 active:scale-95 shadow-lg flex items-center gap-2",children:" Lm li"}),i.jsx("button",{onClick:()=>l(!o),className:`px-4 py-2.5 rounded-lg ${o?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-600 to-gray-700"} text-white hover:opacity-90 transition-all transform hover:scale-105 active:scale-95 shadow-lg`,children:o?" n p n":" Hin p n"}),i.jsx("button",{onClick:ee,className:"px-4 py-2.5 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all transform hover:scale-105 active:scale-95 shadow-lg",children:a?" Thot":" Ton mn hnh"}),i.jsx("button",{onClick:()=>{e([]),n(0),l(!1),x(null),y(!1)},className:"px-4 py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105 active:scale-95 shadow-lg",children:" ng"})]})]}),i.jsx("div",{className:`${a?"flex-1 flex items-center justify-center p-8":"bg-white rounded-lg p-6 shadow"} ${a?"text-white":""}`,children:z&&i.jsxs("div",{className:"max-w-4xl w-full space-y-6",children:[i.jsxs("div",{className:`text-3xl font-bold mb-8 p-6 rounded-2xl ${a?"text-white bg-white/10 backdrop-blur-sm":"text-gray-900 bg-gradient-to-r from-blue-50 to-purple-50"} shadow-lg`,children:[i.jsx(ir,{content:z.question_text}),z.is_dynamic&&i.jsx("div",{className:"mt-3 text-sm font-normal opacity-75 flex items-center gap-2",children:i.jsx("span",{className:"inline-block px-3 py-1 bg-yellow-500/20 text-yellow-700 rounded-full",children:" Cu hi ng"})})]}),z.type==="mcq"&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["A","B","C","D"].map(k=>{const B=z[`option_${k.toLowerCase()}`];if(!B)return null;const Q=z.correct_option.includes(k),Z=v===k,J=(o||b)&&Q,K=b&&Z&&!Q;return i.jsx("button",{onClick:()=>ge(k),disabled:b,className:`
                          p-6 rounded-2xl border-3 text-lg text-left transition-all duration-300 transform
                          ${J?"bg-gradient-to-r from-green-500 to-emerald-500 border-green-600 text-white shadow-2xl scale-105":K?"bg-gradient-to-r from-red-500 to-red-600 border-red-700 text-white shadow-2xl scale-105":Z?a?"bg-gradient-to-r from-yellow-400 to-yellow-500 border-yellow-600 text-gray-900 shadow-lg scale-105 font-semibold":"bg-gradient-to-r from-blue-100 to-purple-100 border-blue-500 text-gray-900 shadow-lg scale-105":a?"bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 hover:border-white/50 hover:shadow-lg hover:scale-102":"bg-gradient-to-r from-gray-50 to-gray-100 border-gray-300 text-gray-900 hover:border-blue-400 hover:shadow-lg hover:scale-102"}
                          ${!b&&"cursor-pointer active:scale-95"}
                          ${b&&"cursor-default"}
                          shadow-md
                        `,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:`
                            font-bold text-xl flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full
                            ${J||K?"bg-white/30 text-white":Z?a?"bg-gray-900/50 text-yellow-300":"bg-blue-500 text-white":a?"bg-white/20 text-yellow-300":"bg-gray-200 text-gray-700"}
                          `,children:k}),i.jsx("div",{className:"flex-1",children:i.jsx(ir,{content:B,inline:!0})}),J&&i.jsx("span",{className:"text-2xl flex-shrink-0 animate-bounce",children:""}),K&&i.jsx("span",{className:"text-2xl flex-shrink-0 animate-pulse",children:""})]})},k)})}),z.type==="msq"&&i.jsxs("div",{className:"space-y-4",children:[["A","B","C","D"].map(k=>{const B=z[`option_${k.toLowerCase()}`];if(!B)return null;const Q=z.correct_option.includes(k),Z=S[k],J=b&&Q,K=b&&Z!==void 0&&Z!==Q;return i.jsxs("div",{className:`p-4 rounded-2xl border-2 transition-all ${J?"bg-green-500/30 border-green-400":K?"bg-red-500/30 border-red-400":a?"bg-white/10 backdrop-blur-sm border-white/30":"bg-gray-50 border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsxs("span",{className:`font-bold text-lg ${a?"text-white":"text-gray-700"}`,children:[k,"."]}),i.jsx("div",{className:`flex-1 text-lg ${a?"text-white":"text-gray-900"}`,children:i.jsx(ir,{content:B,inline:!0})})]}),i.jsxs("div",{className:"flex items-center gap-3 ml-8",children:[i.jsx("button",{onClick:()=>_({...S,[k]:!0}),disabled:b,className:`px-6 py-2 rounded-lg font-semibold transition-all ${S[k]===!0?b&&Q?"bg-green-500 text-white":b&&!Q?"bg-red-500 text-white":a?"bg-yellow-400 text-gray-900":"bg-blue-500 text-white":a?"bg-white/20 border-2 border-white/40 text-white hover:bg-white/30":"bg-white border-2 border-gray-300 text-gray-700 hover:border-blue-500"} ${!b&&"cursor-pointer"}`,children:" ng"}),i.jsx("button",{onClick:()=>_({...S,[k]:!1}),disabled:b,className:`px-6 py-2 rounded-lg font-semibold transition-all ${S[k]===!1?b&&!Q?"bg-green-500 text-white":b&&Q?"bg-red-500 text-white":a?"bg-yellow-400 text-gray-900":"bg-blue-500 text-white":a?"bg-white/20 border-2 border-white/40 text-white hover:bg-white/30":"bg-white border-2 border-gray-300 text-gray-700 hover:border-blue-500"} ${!b&&"cursor-pointer"}`,children:" Sai"}),b&&i.jsx("span",{className:`ml-2 text-sm font-medium ${a?"text-white":"text-gray-900"}`,children:Q?" p n: ng":" p n: Sai"})]})]},k)}),!b&&i.jsx("button",{onClick:()=>y(!0),className:`w-full mt-4 px-6 py-3 rounded-lg font-semibold transition-all ${a?"bg-yellow-400 text-gray-900 hover:bg-yellow-500":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700"}`,children:" Kim tra p n"})]}),z.type==="sa"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:`p-6 rounded-2xl border-2 ${a?"bg-white/10 backdrop-blur-sm border-white/30":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"}`,children:[i.jsx("label",{className:`block text-lg font-semibold mb-3 ${a?"text-white":"text-gray-700"}`,children:"Nhp p n ca bn:"}),i.jsx("input",{type:"text",value:N,onChange:k=>j(k.target.value),disabled:b,className:`w-full px-4 py-3 text-lg border-2 rounded-lg transition-all ${a?"bg-white/20 border-white/40 text-white placeholder-white/50 focus:bg-white/30 focus:border-yellow-400":"bg-white border-blue-300 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"}`,placeholder:"Nhp p n..."})]}),!b&&i.jsx("button",{onClick:()=>y(!0),className:`w-full px-6 py-3 rounded-lg font-semibold transition-all ${a?"bg-yellow-400 text-gray-900 hover:bg-yellow-500":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700"}`,children:" Kim tra p n"}),b&&i.jsxs("div",{className:`p-6 rounded-2xl border-2 shadow-lg ${a?"bg-green-500/30 border-green-400":"bg-gradient-to-r from-green-100 to-emerald-100 border-green-500"}`,children:[i.jsxs("div",{className:`text-lg font-semibold flex items-center gap-2 ${a?"text-white":"text-green-900"}`,children:[i.jsx("span",{className:"text-2xl",children:""}),"p n ng: ",i.jsx(ir,{content:z.correct_option,inline:!0})]}),N.trim()&&i.jsxs("div",{className:`mt-2 text-md ${a?"text-white":"text-gray-700"}`,children:["Cu tr li ca bn: ",i.jsx("strong",{children:N})]})]})]}),o&&z.explanation&&i.jsxs("div",{className:`p-6 rounded-2xl ${a?"bg-white/20 backdrop-blur-sm border-white/30":"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"} border-2 shadow-lg animate-fadeIn max-h-96 overflow-y-auto`,children:[i.jsxs("div",{className:"font-bold text-lg mb-3 flex items-center gap-2 sticky top-0 bg-inherit pb-2 border-b border-current/20",children:[i.jsx("span",{className:"text-2xl",children:""}),"Gii thch:"]}),i.jsx("div",{className:`text-lg ${a?"text-white":"text-gray-700"}`,children:i.jsx(ir,{content:z.explanation})})]}),!a&&i.jsxs("div",{className:"text-sm text-gray-500 mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsx("div",{className:"font-semibold mb-2",children:" Phm tt:"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded shadow-sm",children:""}),i.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded shadow-sm",children:""}),"Chuyn cu"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded shadow-sm",children:"Space"}),"Hin/n p n"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded shadow-sm",children:"F"}),"Ton mn hnh"]}),z.is_dynamic&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("kbd",{className:"px-2 py-1 bg-white border border-gray-300 rounded shadow-sm",children:"R"}),"Lm li"]})]})]})]})})]})})};class yxe{async getMyQuestions(e={}){const t=new URLSearchParams;e.difficulty&&t.append("difficulty",e.difficulty),e.type&&t.append("type",e.type),e.is_dynamic!==void 0&&t.append("is_dynamic",e.is_dynamic.toString()),e.search&&t.append("search",e.search),e.tag&&t.append("tag",e.tag),e.page&&t.append("page",e.page.toString()),e.per_page&&t.append("per_page",e.per_page.toString());const n=t.toString(),a=`/my-questions${n?`?${n}`:""}`;return await st.get(a)}async getStats(){return await st.get("/my-questions/stats")}async createQuestion(e){return await st.post("/my-questions",e)}async updateQuestion(e,t){return await st.put(`/my-questions/${e}`,t)}async deleteQuestion(e){return await st.delete(`/my-questions/${e}`)}async getQuestionById(e){return await st.get(`/questions/${e}`)}}const tf=new yxe,bxe=({onSelectQuestions:r})=>{const[e,t]=he.useState([]),[n,a]=he.useState(null),[s,o]=he.useState(!0),[l,u]=he.useState(1),[c,d]=he.useState(0),[h,g]=he.useState({}),[m,v]=he.useState(!1),[x,b]=he.useState(null),[y,S]=he.useState({question_text:"",type:"mcq",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"medium",tags:[]}),_=async()=>{try{o(!0);const I=await tf.getMyQuestions({...h,page:l,per_page:20});t(I.data),d(I.total)}catch(I){console.error("Error loading questions:",I),alert("Li khi ti cu hi")}finally{o(!1)}},N=async()=>{try{const I=await tf.getStats();a(I)}catch(I){console.error("Error loading stats:",I)}};he.useEffect(()=>{_(),N()},[h,l]);const j=async I=>{I.preventDefault();try{x?(await tf.updateQuestion(x.id,y),alert("Cp nht cu hi thnh cng!")):(await tf.createQuestion(y),alert("To cu hi thnh cng!")),v(!1),b(null),F(),_(),N()}catch(O){alert("Li: "+(O.message||"Khng th lu cu hi"))}},E=async I=>{if(confirm("Bn c chc mun xa cu hi ny?"))try{await tf.deleteQuestion(I),alert("Xa thnh cng!"),_(),N()}catch{alert("Li khi xa cu hi")}},T=I=>{b(I),S({question_text:I.question_text,type:I.type||"mcq",option_a:I.option_a||"",option_b:I.option_b||"",option_c:I.option_c||"",option_d:I.option_d||"",correct_option:I.correct_option,explanation:I.explanation||"",difficulty:I.difficulty||"medium",tags:I.tags||[]}),v(!0)},F=()=>{S({question_text:"",type:"mcq",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:"",difficulty:"medium",tags:[]})},R=Math.ceil(c/20);return i.jsxs("div",{className:"space-y-6",children:[n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Tng cu hi"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.total_questions})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"D"}),i.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.by_difficulty?.easy||0})]}),i.jsx("div",{className:"w-12 h-12 bg-green-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-yellow-600 font-medium",children:"Trung bnh"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:n.by_difficulty?.medium||0})]}),i.jsx("div",{className:"w-12 h-12 bg-yellow-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Kh"}),i.jsx("p",{className:"text-2xl font-bold text-red-900",children:n.by_difficulty?.hard||0})]}),i.jsx("div",{className:"w-12 h-12 bg-red-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Danh sch cu hi ca bn"}),i.jsxs("button",{onClick:()=>{v(!0),b(null),F()},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"To cu hi mi"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[i.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg",value:h.difficulty||"",onChange:I=>g({...h,difficulty:I.target.value||void 0}),children:[i.jsx("option",{value:"",children:"Tt c  kh"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]}),i.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg",value:h.type||"",onChange:I=>g({...h,type:I.target.value||void 0}),children:[i.jsx("option",{value:"",children:"Tt c loi"}),i.jsx("option",{value:"mcq",children:"Trc nghim (1 p n)"}),i.jsx("option",{value:"msq",children:"Trc nghim (nhiu p n)"}),i.jsx("option",{value:"sa",children:"T lun ngn"})]}),i.jsx("input",{type:"text",placeholder:"Tm kim...",className:"px-4 py-2 border border-gray-300 rounded-lg flex-1",value:h.search||"",onChange:I=>g({...h,search:I.target.value||void 0})})]}),s?i.jsx("div",{className:"text-center py-12 text-gray-500",children:"ang ti..."}):e.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg",children:"Cha c cu hi no"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'Nhn "To cu hi mi"  bt u'})]}):i.jsx("div",{className:"space-y-4",children:e.map(I=>i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-purple-300 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${I.difficulty==="easy"?"bg-green-100 text-green-700":I.difficulty==="hard"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:I.difficulty==="easy"?"D":I.difficulty==="hard"?"Kh":"TB"}),i.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",children:I.type==="mcq"?"MCQ":I.type==="msq"?"MSQ":"SA"}),I.is_dynamic&&i.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-700",children:"ng"})]}),i.jsx("div",{className:"text-gray-900 font-medium mb-2",dangerouslySetInnerHTML:{__html:I.question_text.substring(0,200)+(I.question_text.length>200?"...":"")}}),i.jsxs("div",{className:"text-sm text-gray-600",children:["p n ng: ",i.jsx("span",{className:"font-medium text-green-600",children:I.correct_option})]})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[i.jsx("button",{onClick:()=>T(I),className:"px-3 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:"Sa"}),i.jsx("button",{onClick:()=>E(I.id),className:"px-3 py-1 text-red-600 hover:bg-red-50 rounded transition-colors",children:"Xa"})]})]})},I.id))}),R>1&&i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[i.jsx("button",{disabled:l===1,onClick:()=>u(l-1),className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Trc"}),i.jsxs("span",{className:"px-4 py-2",children:["Trang ",l," / ",R]}),i.jsx("button",{disabled:l===R,onClick:()=>u(l+1),className:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Sau"})]})]}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:x?"Chnh sa cu hi":"To cu hi mi"}),i.jsx("button",{onClick:()=>{v(!1),b(null)},className:"text-gray-400 hover:text-gray-600",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung cu hi"}),i.jsx("textarea",{required:!0,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.question_text,onChange:I=>S({...y,question_text:I.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi cu hi"}),i.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.type,onChange:I=>S({...y,type:I.target.value}),children:[i.jsx("option",{value:"mcq",children:"Trc nghim (1 p n)"}),i.jsx("option",{value:"msq",children:"Trc nghim (nhiu p n)"}),i.jsx("option",{value:"sa",children:"T lun ngn"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" kh"}),i.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.difficulty,onChange:I=>S({...y,difficulty:I.target.value}),children:[i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]})]}),(y.type==="mcq"||y.type==="msq")&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n A"}),i.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.option_a,onChange:I=>S({...y,option_a:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n B"}),i.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.option_b,onChange:I=>S({...y,option_b:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n C"}),i.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.option_c,onChange:I=>S({...y,option_c:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"p n D"}),i.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.option_d,onChange:I=>S({...y,option_d:I.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:y.type==="sa"?"p n (vn bn)":"p n ng (A, B, C, D)"}),i.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.correct_option,onChange:I=>S({...y,correct_option:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gii thch (ty chn)"}),i.jsx("textarea",{rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",value:y.explanation,onChange:I=>S({...y,explanation:I.target.value})})]}),i.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:()=>{v(!1),b(null)},className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:x?"Cp nht":"To cu hi"})]})]})]})})]})},wxe=({lessonId:r,lessonName:e,onClose:t})=>{const[n,a]=he.useState("videos"),[s,o]=he.useState(null),[l,u]=he.useState(!0),{user:c}=Yr(),[d,h]=he.useState({title:"",description:"",video_url:"",video_type:"youtube",duration_seconds:0,order_index:0}),[g,m]=he.useState({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),[v,x]=he.useState({title:"",content_type:"html",content:"",order_index:0}),[b,y]=he.useState({title:"",description:"",exercise_type:"quiz",questions:[],order_index:0}),[S,_]=he.useState(!1),[N,j]=he.useState(!1),[E,T]=he.useState(!1),[F,A]=he.useState(!1);he.useEffect(()=>{R()},[r]);const R=async()=>{try{u(!0);const H=await mn.getLessonWithContent(r);H&&o(H)}catch(H){console.error("Error loading lesson content:",H)}finally{u(!1)}},I=async H=>{if(H.preventDefault(),!!c)try{await mn.createVideo({lesson_id:r,...d,is_active:!0,created_by:c.id,download_count:0}),h({title:"",description:"",video_url:"",video_type:"youtube",duration_seconds:0,order_index:0}),_(!1),await R(),alert("Thm video thnh cng!")}catch(P){console.error("Error creating video:",P),alert("C li khi thm video")}},O=async H=>{if(H.preventDefault(),!!c)try{await mn.createDocument({lesson_id:r,...g,is_active:!0,created_by:c.id,download_count:0}),m({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),j(!1),await R(),alert("Thm ti liu thnh cng!")}catch(P){console.error("Error creating document:",P),alert("C li khi thm ti liu")}},U=async H=>{if(H.preventDefault(),!!c)try{await mn.createContent({lesson_id:r,...v,is_active:!0,created_by:c.id}),x({title:"",content_type:"html",content:"",order_index:0}),T(!1),await R(),alert("Thm ni dung thnh cng!")}catch(P){console.error("Error creating content:",P),alert("C li khi thm ni dung")}},D=async H=>{if(H.preventDefault(),!!c)try{await mn.createExercise({lesson_id:r,...b,is_active:!0,created_by:c.id}),y({title:"",description:"",exercise_type:"quiz",questions:[],order_index:0}),A(!1),await R(),alert("Thm bi tp thnh cng!")}catch(P){console.error("Error creating exercise:",P),alert("C li khi thm bi tp")}};return l?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:i.jsx("div",{className:"bg-white rounded-lg p-6",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mx-auto"})})}):i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 overflow-y-auto p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-t-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Qun l ni dung bi hc"}),i.jsx("p",{className:"text-indigo-100 mt-1",children:e})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:i.jsxs("div",{className:"flex overflow-x-auto",children:[i.jsxs("button",{onClick:()=>a("videos"),className:`px-6 py-3 font-medium whitespace-nowrap ${n==="videos"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:["Video (",s?.videos.length||0,")"]}),i.jsxs("button",{onClick:()=>a("documents"),className:`px-6 py-3 font-medium whitespace-nowrap ${n==="documents"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:["Ti liu (",s?.documents.length||0,")"]}),i.jsxs("button",{onClick:()=>a("content"),className:`px-6 py-3 font-medium whitespace-nowrap ${n==="content"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:["Ni dung (",s?.content.length||0,")"]}),i.jsxs("button",{onClick:()=>a("exercises"),className:`px-6 py-3 font-medium whitespace-nowrap ${n==="exercises"?"border-b-2 border-indigo-600 text-indigo-600 bg-white":"text-gray-600 hover:text-gray-900"}`,children:["Bi tp & Trc nghim (",s?.exercises.length||0,")"]})]})}),i.jsxs("div",{className:"p-6",children:[n==="videos"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Video bi ging"}),i.jsxs("button",{onClick:()=>_(!S),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm video"]})]}),S&&i.jsxs("form",{onSubmit:I,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  video *"}),i.jsx("input",{type:"text",value:d.title,onChange:H=>h({...d,title:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:d.description,onChange:H=>h({...d,description:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi video *"}),i.jsxs("select",{value:d.video_type,onChange:H=>h({...d,video_type:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"youtube",children:"YouTube"}),i.jsx("option",{value:"vimeo",children:"Vimeo"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thi lng (giy)"}),i.jsx("input",{type:"number",value:d.duration_seconds,onChange:H=>h({...d,duration_seconds:parseInt(H.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Video *"}),i.jsx("input",{type:"url",value:d.video_url,onChange:H=>h({...d,video_url:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://www.youtube.com/watch?v=...",required:!0}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"V d: https://www.youtube.com/watch?v=VIDEO_ID"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu video"}),i.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[s?.videos.map((H,P)=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold",children:P+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:H.title}),H.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"capitalize",children:H.video_type}),H.duration_seconds&&i.jsxs("span",{children:[Math.floor(H.duration_seconds/60)," pht"]})]})]})]},H.id)),(!s?.videos||s.videos.length===0)&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c video no. Nhn "Thm video"  bt u.'})]})]}),n==="documents"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ti liu hc tp"}),i.jsxs("button",{onClick:()=>j(!N),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm ti liu"]})]}),N&&i.jsxs("form",{onSubmit:O,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  ti liu *"}),i.jsx("input",{type:"text",value:g.title,onChange:H=>m({...g,title:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:g.description,onChange:H=>m({...g,description:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi ti liu *"}),i.jsxs("select",{value:g.document_type,onChange:H=>m({...g,document_type:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"pdf",children:"PDF"}),i.jsx("option",{value:"docx",children:"DOCX"}),i.jsx("option",{value:"xlsx",children:"XLSX"}),i.jsx("option",{value:"pptx",children:"PPTX"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kch thc (KB)"}),i.jsx("input",{type:"number",value:g.file_size_kb,onChange:H=>m({...g,file_size_kb:parseInt(H.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Ti liu *"}),i.jsx("input",{type:"url",value:g.file_url,onChange:H=>m({...g,file_url:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://...",required:!0})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu ti liu"}),i.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[s?.documents.map((H,P)=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-semibold",children:P+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:H.title}),H.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"uppercase",children:H.document_type}),H.file_size_kb&&i.jsxs("span",{children:[(H.file_size_kb/1024).toFixed(1)," MB"]}),i.jsxs("span",{children:[H.download_count," lt ti"]})]})]})]},H.id)),(!s?.documents||s.documents.length===0)&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c ti liu no. Nhn "Thm ti liu"  bt u.'})]})]}),n==="content"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Ni dung bi hc"}),i.jsxs("button",{onClick:()=>T(!E),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm ni dung"]})]}),E&&i.jsxs("form",{onSubmit:U,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  *"}),i.jsx("input",{type:"text",value:v.title,onChange:H=>x({...v,title:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ni dung (HTML) *"}),i.jsx("textarea",{value:v.content,onChange:H=>x({...v,content:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",rows:12,placeholder:`<p>nh ngha: Hm s bc nht...</p>
<p>V d: Cho hm s y = 2x + 3...</p>
<p>Ghi ch: Cn ch ...</p>`,required:!0}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["H tr HTML. S dng ",i.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"<p>"}),"  to on vn,",i.jsx("code",{className:"bg-gray-200 px-1 rounded mx-1",children:"<br>"}),"  xung dng,",i.jsx("code",{className:"bg-gray-200 px-1 rounded mx-1",children:"<b>"}),"  in m,",i.jsx("code",{className:"bg-gray-200 px-1 rounded mx-1",children:"<i>"}),'  in nghing. Thm "nh ngha:", "V d:", "Ghi ch:"  u on  to block ni bt.']})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu ni dung"}),i.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[s?.content.map((H,P)=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-semibold",children:P+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:H.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:H.content_type}),i.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded text-sm text-gray-700 line-clamp-3",children:H.content})]})]},H.id)),(!s?.content||s.content.length===0)&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c ni dung no. Nhn "Thm ni dung"  bt u.'})]})]}),n==="exercises"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Bi tp & Trc nghim"}),i.jsxs("button",{onClick:()=>A(!F),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm bi tp"]})]}),F&&i.jsxs("form",{onSubmit:D,className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiu  *"}),i.jsx("input",{type:"text",value:b.title,onChange:H=>y({...b,title:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M t"}),i.jsx("textarea",{value:b.description,onChange:H=>y({...b,description:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loi bi tp *"}),i.jsxs("select",{value:b.exercise_type,onChange:H=>y({...b,exercise_type:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"quiz",children:"Trc nghim"}),i.jsx("option",{value:"practice",children:"Thc hnh"}),i.jsx("option",{value:"challenge",children:"Th thch"})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-800",children:[i.jsx("strong",{children:"Lu :"})," Chc nng to cu hi trc nghim s c b sung trong phin bn sau. Hin ti bn c th to bi tp  nh du trong bi hc."]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Lu bi tp"}),i.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Hy"})]})]}),i.jsxs("div",{className:"space-y-3",children:[s?.exercises.map((H,P)=>i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-semibold",children:P+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:H.title}),H.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:H.description}),i.jsx("div",{className:"mt-2",children:i.jsx("span",{className:"inline-block px-3 py-1 bg-orange-100 text-orange-800 text-xs font-medium rounded-full",children:H.exercise_type==="quiz"?"Trc nghim":H.exercise_type==="practice"?"Thc hnh":"Th thch"})})]})]},H.id)),(!s?.exercises||s.exercises.length===0)&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:'Cha c bi tp no. Nhn "Thm bi tp"  bt u.'})]})]})]})]})})},rf="https://hoc.io.vn/api",_xe=()=>{const{user:r}=Yr(),[e,t]=he.useState([]),[n,a]=he.useState([]),[s,o]=he.useState(!0),[l,u]=he.useState(null),[c,d]=he.useState(null),[h,g]=he.useState(""),[m,v]=he.useState(1),[x,b]=he.useState(1),[y,S]=he.useState(0),_=20,[N,j]=he.useState(!1),[E,T]=he.useState(!1),[F,A]=he.useState(null),[R,I]=he.useState(!1),[O,U]=he.useState("basic"),[D,H]=he.useState({videos:[],documents:[],content:[],exercises:[]}),[P,G]=he.useState(!1),[ue,le]=he.useState(!1),[pe,de]=he.useState(!1),[L,X]=he.useState(!1),[V,se]=he.useState(!1),[ae,W]=he.useState(null),[z,re]=he.useState(null),[ne,ie]=he.useState(null),[oe,ye]=he.useState(null),[M,ge]=he.useState({title:"",description:"",video_url:"",video_type:"youtube",video_id:"",duration_seconds:0,order_index:0}),[ee,k]=he.useState({title:"",description:"",document_type:"pdf",file_url:"",file_size_kb:0,order_index:0}),[B,Q]=he.useState({title:"",content_type:"html",content:"",order_index:0}),[Z,J]=he.useState({title:"",description:"",exercise_type:"quiz",questions:[],order_index:0}),[K,te]=he.useState({chapter_id:0,name:"",slug:"",description:"",duration_minutes:null,difficulty_level:"",thumbnail_url:"",is_published:!1,display_order:0});he.useEffect(()=>{me()},[]),he.useEffect(()=>{r&&fe()},[m,c,h,r]);const me=async()=>{try{const be=localStorage.getItem("auth_token"),Fe=await fetch(`${rf}/admin/lessons-api.php?path=chapters`,{headers:{Authorization:`Bearer ${be}`}});if(!Fe.ok)throw new Error("Failed to load chapters");const $e=await Fe.json();a($e.data)}catch(be){console.error("Error loading chapters:",be),u("Khng th ti danh sch chng")}},fe=async()=>{if(r)try{o(!0);const be=localStorage.getItem("auth_token"),Fe=new URLSearchParams({page:m.toString(),limit:_.toString(),teacher_id:r.id.toString()});c&&Fe.append("chapter_id",c.toString()),h&&Fe.append("search",h);const $e=await fetch(`${rf}/admin/lessons-api.php?path=list&${Fe}`,{headers:{Authorization:`Bearer ${be}`}});if(!$e.ok)throw new Error("Failed to load lessons");const vt=await $e.json();t(vt.data),b(vt.pagination.pages),S(vt.pagination.total),u(null)}catch(be){console.error("Error loading lessons:",be),u("Khng th ti danh sch bi hc")}finally{o(!1)}},xe=async be=>{if(be.preventDefault(),!r){alert("Bn cn ng nhp  to bi hc");return}if(!K.chapter_id||K.chapter_id===0){alert("Vui lng chn chng");return}if(!K.name||K.name.trim()===""){alert("Vui lng nhp tn bi hc");return}let Fe=K.slug.trim();if(Fe||(Fe=K.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")),!Fe){alert("Vui lng nhp tn bi hc hp l (cha t nht mt k t ch hoc s)");return}try{const $e=localStorage.getItem("auth_token"),vt=await fetch(`${rf}/admin/lessons-api.php?path=create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$e}`},body:JSON.stringify({...K,slug:Fe,teacher_id:r.id})});if(!vt.ok){const Nt=await vt.json();throw new Error(Nt.error||"Failed to create lesson")}alert(" To bi hc thnh cng!"),j(!1),Le(),fe()}catch($e){console.error("Error creating lesson:",$e),alert($e instanceof Error?$e.message:"Khng th to bi hc")}},_e=async be=>{if(be.preventDefault(),!(!F||!r)){if(F.teacher_id&&F.teacher_id!==Number(r.id)){alert("Bn khng c quyn sa bi hc ny");return}try{const Fe=localStorage.getItem("auth_token"),$e=await fetch(`${rf}/admin/lessons-api.php?path=${F.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Fe}`},body:JSON.stringify(K)});if(!$e.ok){const vt=await $e.json();throw new Error(vt.error||"Failed to update lesson")}alert(" Cp nht bi hc thnh cng!"),T(!1),I(!1),A(null),Le(),fe()}catch(Fe){console.error("Error updating lesson:",Fe),alert(Fe instanceof Error?Fe.message:"Khng th cp nht bi hc")}}},je=async be=>{if(r){if(be.teacher_id&&be.teacher_id!==Number(r.id)){alert("Bn khng c quyn xa bi hc ny");return}if(confirm(`Bn c chc mun xa bi hc "${be.name}"?`))try{const Fe=localStorage.getItem("auth_token"),$e=await fetch(`${rf}/admin/lessons-api.php?path=${be.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${Fe}`}});if(!$e.ok){const vt=await $e.json();throw new Error(vt.error||"Failed to delete lesson")}alert(" Xa bi hc thnh cng!"),fe()}catch(Fe){console.error("Error deleting lesson:",Fe),alert(Fe instanceof Error?Fe.message:"Khng th xa bi hc")}}},Be=()=>{Le(),j(!0)},Re=be=>{if(r){if(be.teacher_id&&be.teacher_id!==Number(r.id)){alert("Bn khng c quyn sa bi hc ny");return}be.is_published?ze(be):(A(be),te({chapter_id:be.chapter_id,name:be.name,slug:be.slug,description:be.description||"",duration_minutes:be.duration_minutes,difficulty_level:be.difficulty_level||"",thumbnail_url:be.thumbnail_url||"",is_published:be.is_published,display_order:be.display_order}),T(!0))}},ze=async be=>{A(be),te({chapter_id:be.chapter_id,name:be.name,slug:be.slug,description:be.description||"",duration_minutes:be.duration_minutes,difficulty_level:be.difficulty_level||"",thumbnail_url:be.thumbnail_url||"",is_published:be.is_published,display_order:be.display_order}),U("basic"),I(!0),await Ye(be.id.toString())},Ye=async be=>{try{G(!0);const Fe=await mn.getLessonWithContent(be);Fe&&H({videos:Fe.videos||[],documents:Fe.documents||[],content:Fe.content||[],exercises:Fe.exercises||[]})}catch(Fe){console.error("Error loading lesson content:",Fe)}finally{G(!1)}},Le=()=>{te({chapter_id:c||0,name:"",slug:"",description:"",duration_minutes:null,difficulty_level:"",thumbnail_url:"",is_published:!1,display_order:0})},it=be=>{const Fe=be.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");te($e=>({...$e,slug:Fe}))},ht=be=>{switch(be){case"easy":return i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"D"});case"medium":return i.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Trung bnh"});case"hard":return i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Kh"});default:return null}},ce=be=>{if(!be)return"";if(be<60)return`${be} pht`;const Fe=Math.floor(be/60),$e=be%60;return $e===0?`${Fe} gi`:`${Fe}g ${$e}p`};return s&&e.length===0?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bi hc ca ti"}),i.jsxs("p",{className:"text-gray-600",children:["Tng: ",y," bi hc (ch hin th hc sinh c phn quyn)"]})]}),i.jsxs("button",{onClick:Be,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx("i",{className:"fas fa-plus mr-2"}),"To Bi hc mi"]})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chng"}),i.jsxs("select",{value:c||"",onChange:be=>{d(be.target.value?parseInt(be.target.value):null),v(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"Tt c chng"}),n.map(be=>i.jsxs("option",{value:be.id,children:[be.subject_name," - ",be.name]},be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tm kim"}),i.jsx("input",{type:"text",value:h,onChange:be=>{g(be.target.value),v(1)},placeholder:"Tm theo tn bi hc...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})}),l&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:l}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bi hc"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Chng / Mn"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ni dung"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thao tc"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg mb-2",children:"Bn cha to bi hc no"}),i.jsx("p",{className:"text-sm text-gray-400",children:'Nhn "To Bi hc mi"  bt u'})]})}):e.map(be=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[be.thumbnail_url?i.jsx("img",{src:be.thumbnail_url,alt:be.name,className:"w-16 h-12 object-cover rounded"}):i.jsx("div",{className:"w-16 h-12 bg-gray-200 rounded flex items-center justify-center",children:i.jsx("i",{className:"fas fa-book text-gray-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:be.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:["slug: ",be.slug]}),i.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[be.duration_minutes&&i.jsxs("span",{className:"inline-flex items-center text-xs text-blue-600",children:[i.jsx("i",{className:"fas fa-clock mr-1"}),ce(be.duration_minutes)]}),ht(be.difficulty_level)]})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-gray-900",children:be.chapter_name}),i.jsx("p",{className:"text-indigo-600",children:be.subject_name})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-1",children:[be.video_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-red-600",children:[i.jsx("i",{className:"fas fa-video mr-1"}),be.video_count," video"]}),be.document_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-blue-600",children:[i.jsx("i",{className:"fas fa-file-pdf mr-1"}),be.document_count," ti liu"]}),be.content_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-green-600",children:[i.jsx("i",{className:"fas fa-file-text mr-1"}),be.content_count," ni dung"]}),be.exercise_count>0&&i.jsxs("div",{className:"flex items-center text-xs text-purple-600",children:[i.jsx("i",{className:"fas fa-dumbbell mr-1"}),be.exercise_count," bi tp"]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[be.question_count," cu hi"]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${be.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:be.is_active?"Hot ng":"n"}),i.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full ${be.is_published?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:be.is_published?" xut bn":"Bn nhp"})]})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[i.jsx("button",{onClick:()=>Re(be),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"Sa",children:i.jsx("i",{className:"fas fa-edit"})}),i.jsx("button",{onClick:()=>je(be),className:"text-red-600 hover:text-red-900 p-1",title:"Xa",children:i.jsx("i",{className:"fas fa-trash"})})]})})]},be.id))})]})})}),x>1&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Trang ",m," / ",x]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>v(be=>Math.max(1,be-1)),disabled:m===1,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:i.jsx("i",{className:"fas fa-chevron-left"})}),i.jsx("button",{onClick:()=>v(be=>Math.min(x,be+1)),disabled:m===x,className:"px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:i.jsx("i",{className:"fas fa-chevron-right"})})]})]}),N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"To Bi hc mi"})}),i.jsxs("form",{onSubmit:xe,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chng *"}),i.jsxs("select",{value:K.chapter_id,onChange:be=>te(Fe=>({...Fe,chapter_id:parseInt(be.target.value)})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:0,children:"-- Chn chng --"}),n.map(be=>i.jsxs("option",{value:be.id,children:[be.subject_name," - ",be.name]},be.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi lng (pht)"}),i.jsx("input",{type:"number",value:K.duration_minutes||"",onChange:be=>te(Fe=>({...Fe,duration_minutes:be.target.value?parseInt(be.target.value):null})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn bi hc *"}),i.jsx("input",{type:"text",value:K.name,onChange:be=>{te(Fe=>({...Fe,name:be.target.value})),K.slug||it(be.target.value)},required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),i.jsx("input",{type:"text",value:K.slug,onChange:be=>te(Fe=>({...Fe,slug:be.target.value})),pattern:"^[a-z0-9]+(-[a-z0-9]+)*$",title:"Ch c dng ch thng, s v du gch ngang. V d: bai-hoc-1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" trng  t ng to t tn bi hc"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),i.jsx("textarea",{value:K.description,onChange:be=>te(Fe=>({...Fe,description:be.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" kh"}),i.jsxs("select",{value:K.difficulty_level,onChange:be=>te(Fe=>({...Fe,difficulty_level:be.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"-- Chn  kh --"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th t"}),i.jsx("input",{type:"number",value:K.display_order,onChange:be=>te(Fe=>({...Fe,display_order:parseInt(be.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Thumbnail"}),i.jsx("input",{type:"url",value:K.thumbnail_url,onChange:be=>te(Fe=>({...Fe,thumbnail_url:be.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"is_published",checked:K.is_published,onChange:be=>te(Fe=>({...Fe,is_published:be.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"is_published",className:"ml-2 text-sm font-medium text-gray-700",children:" Xut bn bi hc (hc sinh c phn quyn c th xem)"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"To"})]})]})]})}),E&&F&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"Sa Bi hc"})}),i.jsxs("form",{onSubmit:_e,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thi lng (pht)"}),i.jsx("input",{type:"number",value:K.duration_minutes||"",onChange:be=>te(Fe=>({...Fe,duration_minutes:be.target.value?parseInt(be.target.value):null})),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" kh"}),i.jsxs("select",{value:K.difficulty_level,onChange:be=>te(Fe=>({...Fe,difficulty_level:be.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"",children:"-- Chn  kh --"}),i.jsx("option",{value:"easy",children:"D"}),i.jsx("option",{value:"medium",children:"Trung bnh"}),i.jsx("option",{value:"hard",children:"Kh"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tn bi hc *"}),i.jsx("input",{type:"text",value:K.name,onChange:be=>te(Fe=>({...Fe,name:be.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M t"}),i.jsx("textarea",{value:K.description,onChange:be=>te(Fe=>({...Fe,description:be.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Thumbnail"}),i.jsx("input",{type:"url",value:K.thumbnail_url,onChange:be=>te(Fe=>({...Fe,thumbnail_url:be.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th t"}),i.jsx("input",{type:"number",value:K.display_order,onChange:be=>te(Fe=>({...Fe,display_order:parseInt(be.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"edit_is_published",checked:K.is_published,onChange:be=>te(Fe=>({...Fe,is_published:be.target.checked})),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"edit_is_published",className:"ml-2 text-sm font-medium text-gray-700",children:" Xut bn bi hc (hc sinh c phn quyn c th xem)"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{T(!1),A(null)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Cp nht"})]})]})]})}),R&&F&&i.jsx(wxe,{lessonId:F.id.toString(),lessonName:F.name,onClose:()=>{I(!1),A(null),fe()}})]})},Nxe=({quiz:r,onClose:e,onSave:t})=>{const n=b=>{const y=JSON.parse(JSON.stringify(b));if(typeof y.questions=="string")try{y.questions=JSON.parse(y.questions)}catch(S){console.error("Error parsing quiz questions:",S),y.questions=[]}return Array.isArray(y.questions)||(y.questions=[]),y},[a,s]=he.useState(n(r)),[o,l]=he.useState(!1),[u,c]=he.useState({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:""}),[d,h]=he.useState(!1),g=(b,y,S)=>{const _=[...a.questions];_[b]={..._[b],[y]:S},s({...a,questions:_})},m=b=>{if(window.confirm("Bn c chc chn mun xa cu hi ny?")){const y=a.questions.filter((S,_)=>_!==b);s({...a,questions:y})}},v=()=>{if(!u.question){alert("Vui lng in ni dung cu hi!");return}if(u.type!=="tl"&&!u.correct_option){alert("Vui lng in p n ng!");return}const b={id:`temp_${Date.now()}`,type:u.type,question:u.question,option_a:u.option_a||"",option_b:u.option_b||"",option_c:u.option_c||"",option_d:u.option_d||"",correct_option:u.correct_option,explanation:u.explanation||"",subject_id:a.questions[0]?.subject_id||"",chapter_id:a.questions[0]?.chapter_id||"",lesson_id:a.questions[0]?.lesson_id||"",question_type_id:a.questions[0]?.question_type_id||"",difficulty:"medium",created_by:r.created_by,created_at:new Date().toISOString(),is_approved:!0};s({...a,questions:[...a.questions,b]}),c({type:"mcq",question:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"",explanation:""}),h(!1)},x=async()=>{l(!0);try{await st.updateQuiz(a.id,{title:a.title,time_limit_minutes:a.time_limit_minutes,password:a.password,questions:a.questions}),alert("  lu thnh cng!"),t(),e()}catch(b){console.error(" Exception saving quiz:",b),alert(" C li khi lu  thi: "+b.message)}finally{l(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Chnh sa  thi"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tn  thi"}),i.jsx("input",{type:"text",value:a.title,onChange:b=>s({...a,title:b.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Thi gian (pht)"}),i.jsx("input",{type:"number",value:a.time_limit_minutes||0,onChange:b=>s({...a,time_limit_minutes:parseInt(b.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0 = khng gii hn"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mt khu"}),i.jsx("input",{type:"text",value:a.password||"",onChange:b=>s({...a,password:b.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:" trng = khng c mt khu"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Cu hi (",a.questions.length,")"]}),i.jsxs("button",{onClick:()=>h(!d),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Thm cu hi"]})]}),d&&i.jsxs("div",{className:"border-2 border-green-300 rounded-lg p-4 bg-green-50 mb-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Thm cu hi mi"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loi cu hi"}),i.jsxs("select",{value:u.type,onChange:b=>c({...u,type:b.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500",children:[i.jsx("option",{value:"mcq",children:"Trc nghim (MCQ)"}),i.jsx("option",{value:"msq",children:"ng/Sai (MSQ)"}),i.jsx("option",{value:"sa",children:"Tr li ngn (SA)"}),i.jsx("option",{value:"tl",children:"T lun (TL)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ni dung cu hi"}),i.jsx("textarea",{value:u.question,onChange:b=>c({...u,question:b.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500",rows:2,placeholder:"Nhp ni dung cu hi..."})]}),(u.type==="mcq"||u.type==="msq")&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cc p n"}),["option_a","option_b","option_c","option_d"].map(b=>i.jsx("input",{type:"text",value:u[b]||"",onChange:y=>c({...u,[b]:y.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500",placeholder:`p n ${b.split("_")[1].toUpperCase()}`},b))]}),u.type!=="tl"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n ng"}),i.jsx("input",{type:"text",value:u.correct_option,onChange:b=>c({...u,correct_option:b.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500",placeholder:u.type==="mcq"?"A, B, C, hoc D":u.type==="msq"?"a,b,c,d":"p n"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Li gii"}),i.jsx("textarea",{value:u.explanation,onChange:b=>c({...u,explanation:b.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-green-500",rows:2,placeholder:"Li gii chi tit..."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Thm cu hi"}),i.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Hy"})]})]})]}),i.jsx("div",{className:"space-y-6",children:a.questions.map((b,y)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("h4",{className:"font-semibold text-gray-900",children:["Cu ",y+1]}),i.jsxs("button",{onClick:()=>m(y),className:"text-red-500 hover:text-red-700 text-sm flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa cu"]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ni dung cu hi"}),i.jsx("textarea",{value:b.question,onChange:S=>g(y,"question",S.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:2})]}),(b.type==="mcq"||b.type==="msq")&&i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cc p n"}),["option_a","option_b","option_c","option_d"].map(S=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-600 w-8",children:[S.split("_")[1].toUpperCase(),":"]}),i.jsx("input",{type:"text",value:b[S]||"",onChange:_=>g(y,S,_.target.value),className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]},S))]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"p n ng"}),i.jsx("input",{type:"text",value:b.correct_option,onChange:S=>g(y,"correct_option",S.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:b.type==="mcq"?"A, B, C, hoc D":b.type==="msq"?"a,b,c,d":"p n"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Li gii"}),i.jsx("textarea",{value:b.explanation||"",onChange:S=>g(y,"explanation",S.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:2})]})]},y))})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 flex justify-end gap-3",children:[i.jsx("button",{onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Hy"}),i.jsx("button",{onClick:x,disabled:o,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-indigo-400 disabled:cursor-not-allowed",children:o?"ang lu...":"Lu thay i"})]})]})})},Sxe=()=>{const{user:r}=Yr(),[e,t]=he.useState([]),[n,a]=he.useState([]),[s,o]=he.useState([]),[l,u]=he.useState(!0),[c,d]=he.useState(""),[h,g]=he.useState(""),[m,v]=he.useState("all"),[x,b]=he.useState("quiz-list"),[y,S]=he.useState(null),[_,N]=he.useState(null),[j,E]=he.useState(!1),[T,F]=he.useState(!1),[A,R]=he.useState("overview");he.useEffect(()=>{(async()=>{if(!r||r.role!=="teacher"&&r.role!=="admin"){u(!1);return}u(!0);try{const ae=await st.getMyQuizzes({per_page:100});if(!ae||!ae.data||!Array.isArray(ae.data)){a([]),t([]),S({totalSubmissions:0,averageScore:0,uniqueQuizzes:0,totalQuizzes:0,recentSubmissions:[]}),u(!1);return}a(ae.data);const z=(await st.getMyQuizResults({per_page:500})).map(ne=>({...ne,student_name:ne.guest_name||ne.user_name||"n danh",student_email:ne.guest_email||ne.user_email||"anonymous@example.com",student_class:ne.guest_class||ne.user_class||""}));t(z);const re={totalSubmissions:z.length,averageScore:z.length?Math.round(z.reduce((ne,ie)=>ne+Number(ie.percentage||0),0)/z.length):0,uniqueQuizzes:ae.data.length,totalQuizzes:ae.data.length,recentSubmissions:z.slice(0,10),totalStudents:new Set(z.map(ne=>ne.student_email)).size};S(re);try{if(r.role==="admin"){const ne=await st.get("/users?role=student&per_page=100");ne&&ne.data&&o(ne.data)}else o([])}catch(ne){console.error("Error loading students:",ne),o([])}}catch(ae){console.error("Error loading data:",ae),d("C li xy ra khi ti d liu.")}finally{u(!1)}})()},[r?.id,r?.role]);const I=(se,ae)=>{ae.stopPropagation();let W={...se};if(typeof se.questions=="string")try{W.questions=JSON.parse(se.questions)}catch(z){console.error("Error parsing quiz questions:",z),W.questions=[]}N(W)},O=async(se,ae)=>{if(ae.stopPropagation(),window.confirm("Bn c chc chn mun xa  thi ny? Hnh ng ny khng th hon tc.")){if(!r){alert("Bn cn ng nhp  xa  thi.");return}try{await st.deleteQuiz(se);const W=await st.getMyQuizzes({per_page:100});a(W.data);const z=await st.getMyQuizResults({per_page:500});t(z),alert("  xa  thi thnh cng!")}catch(W){console.error("Error deleting quiz:",W),alert(" C li xy ra khi xa  thi. Vui lng th li.")}}},U=async()=>{if(r){const se=await st.getMyQuizzes({per_page:100});a(se.data);const ae=await st.getMyQuizResults({per_page:500});t(ae)}},D=[...new Set(e.map(se=>se.quiz_title))],H=(se,ae)=>{const W=["STT","H v tn","Email","Lp","im s","Tng cu","Phn trm (%)","Ln thi","Thi gian np"],z=ae.map((M,ge)=>[ge+1,M.student_name,M.student_email,M.student_class||"",Number(M.score).toFixed(1),M.total_questions,Number(M.percentage).toFixed(1),M.attempt_number||1,new Date(M.submitted_at).toLocaleString("vi-VN")]),re=[W.join(","),...z.map(M=>M.map(ge=>`"${ge}"`).join(","))].join(`
`),ne="\uFEFF",ie=new Blob([ne+re],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a"),ye=URL.createObjectURL(ie);oe.setAttribute("href",ye),oe.setAttribute("download",`${se.replace(/[^a-z0-9]/gi,"_")}_${new Date().toISOString().split("T")[0]}.csv`),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},P=()=>{const se=["STT","H v tn","Email","Lp"," thi","im s","Tng cu","Phn trm (%)","Ln thi","Thi gian np"],ae=ue.map((oe,ye)=>[ye+1,oe.student_name,oe.student_email,oe.student_class||"",oe.quiz_title,Number(oe.score).toFixed(1),oe.total_questions,Number(oe.percentage).toFixed(1),oe.attempt_number||1,new Date(oe.submitted_at).toLocaleString("vi-VN")]),W=[se.join(","),...ae.map(oe=>oe.map(ye=>`"${ye}"`).join(","))].join(`
`),z="\uFEFF",re=new Blob([z+W],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),ie=URL.createObjectURL(re);ne.setAttribute("href",ie),ne.setAttribute("download",`tat_ca_bai_nop_${new Date().toISOString().split("T")[0]}.csv`),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},G=n.map(se=>{const ae=e.filter(W=>W.quiz_title===se.title);return{quiz:se,submissions:ae,studentCount:new Set(ae.map(W=>W.student_email)).size,averageScore:ae.length?Math.round(ae.reduce((W,z)=>W+Number(z.percentage||0),0)/ae.length):0,totalAttempts:ae.length}}),ue=e.filter(se=>{const ae=se.student_name.toLowerCase().includes(h.toLowerCase())||se.student_email.toLowerCase().includes(h.toLowerCase())||se.quiz_title.toLowerCase().includes(h.toLowerCase())||se.student_class&&se.student_class.toLowerCase().includes(h.toLowerCase()),W=m==="all"||se.quiz_title===m;return ae&&W});if(c)return i.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-8",children:[i.jsx("div",{className:"text-red-600 text-lg mb-4",children:c}),i.jsx(jt,{to:"/",className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition-colors",children:"Quay v trang ch"})]})});if(l)return i.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti d liu..."})]})});const le=()=>i.jsxs("div",{className:"space-y-6",children:[y&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tng bi np"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalSubmissions})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"im trung bnh"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y.averageScore,"%"]})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"S  thi to"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalQuizzes})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:i.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Hc sinh tham gia"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalStudents||0})]})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Hot ng gn y"}),i.jsxs("div",{className:"space-y-3",children:[y?.recentSubmissions?.slice(0,5).map(se=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-indigo-600 font-semibold",children:se.student_name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900",children:se.student_name}),i.jsx("p",{className:"text-sm text-gray-600",children:se.quiz_title})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`font-semibold ${se.percentage>=80?"text-green-600":se.percentage>=60?"text-yellow-600":"text-red-600"}`,children:[se.percentage,"%"]}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(se.submitted_at).toLocaleDateString("vi-VN")})]})]},se.id)),(!y?.recentSubmissions||y.recentSubmissions.length===0)&&i.jsx("p",{className:"text-center text-gray-500 py-4",children:"Cha c hot ng no"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thao tc nhanh"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>E(!0),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("h4",{className:"font-semibold text-gray-900",children:"To  thi mi"}),i.jsx("p",{className:"text-sm text-gray-600",children:"To  thi online t ngn hng cu hi"})]}),i.jsxs(jt,{to:"/quiz-bank",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all text-left",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("h4",{className:"font-semibold text-gray-900",children:"Ngn hng cu hi"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Duyt v chn cu hi"})]}),i.jsxs(jt,{to:"/create",className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all text-left",children:[i.jsx("div",{className:"text-2xl mb-2",children:""}),i.jsx("h4",{className:"font-semibold text-gray-900",children:"To cu hi AI"}),i.jsx("p",{className:"text-sm text-gray-600",children:"S dng AI  to cu hi"})]})]})]})]}),pe=()=>i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[" thi ca bn (",n.length," )"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Qun l  thi online v xem kt qu"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>b("quiz-list"),className:`px-4 py-2 rounded-lg transition-colors ${x==="quiz-list"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Theo  thi"}),i.jsx("button",{onClick:()=>b("all-submissions"),className:`px-4 py-2 rounded-lg transition-colors ${x==="all-submissions"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Tt c bi np"}),i.jsxs("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"To  online"]})]})]}),x==="quiz-list"?n.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg mb-4",children:"Bn cha to  thi no."}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"To  thi online  hc sinh c th lm bi v xem kt qu ti y."}),i.jsxs(jt,{to:"/quiz-bank",className:"inline-flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"To  thi online"]})]}):i.jsx("div",{className:"grid gap-4",children:G.map(({quiz:se,submissions:ae,studentCount:W,averageScore:z,totalAttempts:re})=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:se.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["To ngy: ",new Date(se.created_at).toLocaleDateString("vi-VN")]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-sm text-gray-600 mr-2",children:[Array.isArray(se.questions)?se.questions.length:se.question_count||0," cu hi"]}),i.jsx("button",{onClick:ne=>I(se,ne),className:"text-blue-600 hover:text-blue-800 transition-colors p-2 rounded-lg hover:bg-blue-50",title:"Chnh sa  thi",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:ne=>O(se.id,ne),className:"text-red-600 hover:text-red-800 transition-colors p-2 rounded-lg hover:bg-red-50",title:"Xa  thi",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Hc sinh tham gia"}),i.jsx("div",{className:"text-xl font-bold text-blue-900",children:W})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm font-medium text-green-600",children:"Tng lt thi"}),i.jsx("div",{className:"text-xl font-bold text-green-900",children:re})]}),i.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm font-medium text-yellow-600",children:"im TB"}),i.jsxs("div",{className:"text-xl font-bold text-yellow-900",children:[z,"%"]})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[i.jsx("div",{className:"text-sm font-medium text-purple-600",children:"Trng thi"}),i.jsx("div",{className:"text-sm font-semibold text-purple-900",children:ae.length>0?"C bi np":"Cha c bi np"})]})]}),ae.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Bi np gn y:"}),i.jsxs("button",{onClick:()=>H(se.title,ae),className:"text-xs px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ti CSV"]})]}),i.jsxs("div",{className:"space-y-2",children:[ae.slice(0,3).map(ne=>i.jsxs("div",{className:"flex justify-between items-center bg-gray-50 rounded p-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-sm",children:ne.student_name}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(",ne.student_class||"Cha r lp",")"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[Number(ne.score).toFixed(1),"/",ne.total_questions]}),i.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded ${ne.percentage>=80?"bg-green-100 text-green-800":ne.percentage>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[ne.percentage,"%"]}),i.jsx("span",{className:"text-xs text-gray-500",children:new Date(ne.submitted_at).toLocaleDateString("vi-VN")})]})]},ne.id)),ae.length>3&&i.jsx("div",{className:"text-center",children:i.jsxs("button",{onClick:()=>b("all-submissions"),className:"text-sm text-indigo-600 hover:text-indigo-800",children:["Xem thm ",ae.length-3," bi np khc"]})})]})]})]},se.id))}):i.jsxs("div",{children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tm kim"}),i.jsx("input",{type:"text",value:h,onChange:se=>g(se.target.value),placeholder:"Tm theo tn, email, lp hoc tn  thi...",className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lc theo  thi"}),i.jsxs("select",{value:m,onChange:se=>v(se.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500",children:[i.jsx("option",{value:"all",children:"Tt c  thi"}),D.map(se=>i.jsx("option",{value:se,children:se},se))]})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Kt qu bi thi (",ue.length," kt qu)"]}),ue.length>0&&i.jsxs("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ti xung CSV"]})]}),ue.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:i.jsx("p",{children:"Khng tm thy kt qu no."})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hc sinh"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lp"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:" thi"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"im s"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ln thi"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thi gian np"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map((se,ae)=>i.jsxs("tr",{className:ae%2===0?"bg-white":"bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:se.student_name}),i.jsx("div",{className:"text-sm text-gray-500",children:se.student_email})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se.student_class||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se.quiz_title}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[Number(se.score).toFixed(1),"/",se.total_questions]}),i.jsxs("div",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${se.percentage>=80?"bg-green-100 text-green-800":se.percentage>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Number(se.percentage).toFixed(1),"%"]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["Ln ",se.attempt_number||1]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(se.submitted_at).toLocaleString("vi-VN")})]},se.id))})]})})]})]})]})}),de=()=>i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Qun l hc sinh"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Danh sch hc sinh v kt qu"})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h4",{className:"font-medium text-gray-900",children:["Hc sinh  tham gia (",y?.totalStudents||0,")"]}),e.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg",children:"Cha c hc sinh no tham gia"})]}):i.jsx("div",{className:"grid gap-4",children:Array.from(new Set(e.map(se=>se.student_email))).map(se=>{const ae=e.filter(re=>re.student_email===se),W=ae[0],z=Math.round(ae.reduce((re,ne)=>re+Number(ne.percentage),0)/ae.length);return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-indigo-600 font-semibold text-lg",children:W.student_name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-semibold text-gray-900",children:W.student_name}),i.jsx("p",{className:"text-sm text-gray-600",children:se}),W.student_class&&i.jsxs("p",{className:"text-sm text-gray-500",children:["Lp: ",W.student_class]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[" lm ",ae.length," bi"]}),i.jsxs("div",{className:`text-lg font-bold ${z>=80?"text-green-600":z>=60?"text-yellow-600":"text-red-600"}`,children:["im TB: ",z,"%"]})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Bi thi gn y:"}),i.jsx("div",{className:"space-y-2",children:ae.slice(0,3).map(re=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-gray-600",children:re.quiz_title}),i.jsxs("span",{className:`font-semibold ${re.percentage>=80?"text-green-600":re.percentage>=60?"text-yellow-600":"text-red-600"}`,children:[re.percentage,"%"]})]},re.id))})]})]},se)})})]})]})}),L=()=>i.jsx("div",{className:"space-y-6",children:i.jsx(bxe,{})}),X=()=>i.jsx("div",{className:"space-y-6",children:i.jsx(_xe,{})}),V=()=>i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Qun l Luyn tp"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Theo di tin  luyn tp ca hc sinh"})]}),i.jsxs("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"To lch luyn tp"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Phin luyn tp"}),i.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"0"})]}),i.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Hc sinh tham gia"}),i.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"0"})]}),i.jsx("div",{className:"w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"im TB"}),i.jsx("p",{className:"text-2xl font-bold text-green-900",children:"0%"})]}),i.jsx("div",{className:"w-12 h-12 bg-green-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})}),i.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Cn h tr"}),i.jsx("p",{className:"text-2xl font-bold text-red-900",children:"0"})]}),i.jsx("div",{className:"w-12 h-12 bg-red-200 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})})]})})]}),i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-lg mb-2",children:"Tnh nng Luyn tp ang pht trin"}),i.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Tnh nng ny s cho php bn to lch luyn tp, theo di tin  v phn tch im yu ca hc sinh"}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx(jt,{to:"/practice",className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Ch  luyn tp"}),i.jsx(jt,{to:"/quiz-bank",className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Ngn hng cu hi"})]})]})]})});return i.jsxs("div",{className:"bg-gray-50 min-h-screen py-8",children:[i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Gio vin"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"H thng qun l ging dy ton din"})]}),i.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:""}),"Trnh chiu"]})]}),i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[i.jsx("button",{onClick:()=>R("overview"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Tng quan"}),i.jsxs("button",{onClick:()=>R("quizzes"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="quizzes"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["  thi (",n.length,")"]}),i.jsx("button",{onClick:()=>R("lessons"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="lessons"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Bi hc"}),i.jsx("button",{onClick:()=>R("practice"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="practice"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Luyn tp"}),i.jsxs("button",{onClick:()=>R("students"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="students"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[" Hc sinh (",y?.totalStudents||0,")"]}),i.jsx("button",{onClick:()=>R("my-questions"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${A==="my-questions"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Cu hi ca ti"})]})})]}),i.jsxs("div",{className:"mt-6",children:[A==="overview"&&le(),A==="quizzes"&&pe(),A==="lessons"&&X(),A==="practice"&&V(),A==="students"&&de(),A==="my-questions"&&L()]})]})}),_&&i.jsx(Nxe,{quiz:_,onClose:()=>N(null),onSave:U}),j&&r&&i.jsx(xxe,{isOpen:j,onClose:()=>E(!1),onSuccess:async()=>{const se=await st.getMyQuizzes({per_page:100});a(se.data)},userId:r.id}),T&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Trnh chiu cu hi"}),i.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsx(vxe,{})})]})})]})},jxe=()=>{const{user:r}=Yr(),e=Vn(),[t,n]=he.useState(!0),[a,s]=he.useState([]),[o,l]=he.useState([]),[u,c]=he.useState(!1);he.useEffect(()=>{r&&d()},[r]);const d=async()=>{try{n(!0);const[g,m]=await Promise.all([fs.getActiveAssignments(r?.grade),fs.getHistory(5)]);s(g),l(m)}catch(g){console.error("Error loading data:",g)}finally{n(!1)}},h=async g=>{if(r){c(!0);try{const m=await fs.startSession(g.id);e(`/practice/session/${m.session_id}`)}catch(m){console.error("Failed to start session:",m),alert("Khng th bt u bi tp. Vui lng th li.")}finally{c(!1)}}};return r?t?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti..."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Luyn tp"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Chn bi tp  n luyn kin thc"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"lg:col-span-3",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg mr-2",children:i.jsx(zl,{className:"w-5 h-5"})}),"Bi tp rn luyn"]}),a.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[i.jsx(zl,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsxs("p",{className:"text-gray-600",children:["Cha c bi tp no cho lp ",r.grade]})]}):i.jsx("div",{className:"space-y-4",children:a.map((g,m)=>i.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6 border border-gray-100",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:["#",m+1]}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g.title})]}),g.description&&i.jsx("p",{className:"text-gray-600 mb-4",children:g.description}),i.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-600",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(zl,{className:"w-4 h-4"}),g.question_count," cu hi"]}),g.time_limit_minutes&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xw,{className:"w-4 h-4"}),g.time_limit_minutes," pht"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Hy,{className:"w-4 h-4"}),"t: ",g.passing_score,"%"]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${g.difficulty_level==="easy"?"bg-green-100 text-green-800":g.difficulty_level==="hard"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:g.difficulty_level==="easy"?" D":g.difficulty_level==="hard"?" Kh":" Trung bnh"})]})]}),i.jsx("button",{onClick:()=>h(g),disabled:u,className:"ml-4 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Bt u"})]})},g.id))})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 sticky top-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[i.jsx("span",{className:"bg-orange-100 text-orange-600 p-1.5 rounded-lg mr-2",children:i.jsx(dxe,{className:"w-5 h-5"})}),"Lch s gn y"]}),o.length===0?i.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"Cha c lch s lm bi"}):i.jsx("div",{className:"space-y-3",children:o.map(g=>{const m=Number(g.score)||0,v=Number(g.passing_score)||70;return i.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsx("p",{className:"font-semibold text-sm text-gray-900 mb-1 truncate",children:g.assignment_title}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[i.jsxs("span",{children:["im: ",m.toFixed(0),"%"]}),i.jsx("span",{className:`px-2 py-0.5 rounded ${m>=v?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m>=v?" t":" Cha t"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(g.ended_at).toLocaleDateString("vi-VN")})]},g.id)})}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100 text-center",children:i.jsx("button",{onClick:()=>e("/practice/history"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Xem tt c"})})]})})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl max-w-sm w-full text-center",children:[i.jsx("div",{className:"inline-block animate-spin w-10 h-10 border-4 border-blue-600 border-t-transparent rounded-full mb-4"}),i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ang chun b bi tp..."}),i.jsx("p",{className:"text-gray-500 mt-2",children:"H thng ang chn cu hi ph hp cho bn."})]})})]})}):null},Exe=()=>{const{sessionId:r}=Cf(),{user:e}=Yr(),t=Vn(),[n,a]=he.useState(!0),[s,o]=he.useState([]),[l,u]=he.useState(0),[c,d]=he.useState({}),[h,g]=he.useState(0),[m,v]=he.useState(!1),[x,b]=he.useState(!1),[y,S]=he.useState(null),[_,N]=he.useState(""),[j,E]=he.useState(70),[T,F]=he.useState(null);he.useEffect(()=>{r&&A()},[r]),he.useEffect(()=>{if(!x&&!n){const ue=setInterval(()=>{g(le=>le+1)},1e3);return()=>clearInterval(ue)}},[x,n]);const A=async()=>{try{a(!0);const ue=await fs.getSession(Number(r));if(!ue||!ue.questions){alert("Khng tm thy phin luyn tp"),t("/practice");return}o(ue.questions),N(ue.assignment_title||"Bi luyn tp"),E(ue.passing_score||70),F(ue.time_limit_minutes||null)}catch(ue){console.error("Error loading session:",ue),alert("C li xy ra khi ti bi luyn tp"),t("/practice")}finally{a(!1)}},R=ue=>{const le=s[l].id;d(pe=>({...pe,[le]:ue}))},I=()=>{l<s.length-1&&u(ue=>ue+1)},O=()=>{l>0&&u(ue=>ue-1)},U=async()=>{if(Object.keys(c).length<s.length){const ue=s.length-Object.keys(c).length;if(!confirm(`Bn cn ${ue} cu cha tr li. Bn c chc mun np bi?`))return}try{v(!0);const ue=Object.entries(c).map(([pe,de])=>({question_id:Number(pe),selected_answer:de})),le=await fs.submitSession(Number(r),ue,h);S(le),b(!0)}catch(ue){console.error("Error submitting session:",ue),alert("C li xy ra khi np bi")}finally{v(!1)}};if(n)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti bi luyn..."})]})});if(x&&y){const ue=y.score>=j;return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"text-6xl mb-4",children:ue?"":""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:ue?"Hon thnh bi luyn!":"Cha t yu cu"}),i.jsx("p",{className:`text-lg font-semibold ${ue?"text-green-600":"text-orange-600"}`,children:ue?" Bn  vt qua bi luyn ny!":` Cn luyn tp thm  t ${j}%`})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[y.score.toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"im s"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[y.correct_count,"/",y.total_questions]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Cu ng"})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[Math.floor(y.time_spent_seconds/60),":",(y.time_spent_seconds%60).toString().padStart(2,"0")]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Thi gian"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[y.total_questions>0?(y.time_spent_seconds/y.total_questions).toFixed(0):0,"s"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"TB/cu"})]})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900",children:"Xem li kt qu:"}),s.map((le,pe)=>{const de=c[le.id],L=le.correct_answer||le.correct_option,X=de?.toLowerCase()===L?.toLowerCase(),V=le.type||"mcq";return i.jsxs("div",{className:`border-2 rounded-lg p-4 ${X?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:X?"":""}),i.jsxs("span",{className:"font-semibold",children:["Cu ",pe+1]}),V==="msq"&&i.jsx("span",{className:"text-xs font-semibold px-2 py-0.5 rounded-full bg-purple-100 text-purple-800",children:"ng - Sai"}),V==="sa"&&i.jsx("span",{className:"text-xs font-semibold px-2 py-0.5 rounded-full bg-amber-100 text-amber-800",children:"Tr li ngn"})]}),i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsx("div",{className:"mb-2 font-medium",children:i.jsx(ir,{content:le.content})}),V==="sa"?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Cu tr li ca bn: ",i.jsx("strong",{children:de||"(Khng tr li)"})]}),!X&&i.jsxs("p",{className:"text-green-700 mt-1",children:["p n ng: ",i.jsx("strong",{children:i.jsx(ir,{content:L||"",inline:!0})})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Bn chn: ",i.jsx("strong",{children:de||"(Khng tr li)"})]}),!X&&i.jsxs("p",{className:"text-green-700 mt-1",children:["p n ng: ",i.jsx("strong",{children:L})]})]}),le.explanation&&i.jsxs("div",{className:"mt-2 text-gray-600 text-xs bg-white p-2 rounded border border-gray-200",children:[i.jsx("strong",{children:"Gii thch:"})," ",i.jsx(ir,{content:le.explanation})]})]})]},le.id)})]}),i.jsx("div",{className:"flex gap-4",children:i.jsx("button",{onClick:()=>t("/practice"),className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:" V trang luyn tp"})})]})})})}if(s.length===0)return null;const D=s[l],H=c[D.id],P=(l+1)/s.length*100,G=D.type||"mcq";return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Cu ",l+1,"/",s.length]}),i.jsx("div",{className:"flex items-center gap-4 text-sm",children:i.jsxs("span",{className:"text-gray-600 flex items-center",children:[i.jsx(xw,{className:"w-4 h-4 mr-1"}),Math.floor(h/60),":",(h%60).toString().padStart(2,"0")]})})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${P}%`}})})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Cu ",l+1,":"]}),G==="msq"&&i.jsx("span",{className:"text-xs font-semibold px-2.5 py-1 rounded-full bg-purple-100 text-purple-800",children:"ng - Sai"}),G==="sa"&&i.jsx("span",{className:"text-xs font-semibold px-2.5 py-1 rounded-full bg-amber-100 text-amber-800",children:"Tr li ngn"})]}),i.jsx("div",{className:"text-lg",children:i.jsx(ir,{content:D.content})})]}),G==="sa"?i.jsx("div",{className:"mb-8",children:i.jsx("input",{type:"text",value:H||"",onChange:ue=>R(ue.target.value),placeholder:"Nhp cu tr li ca bn...",className:"w-full p-4 border-2 border-gray-300 rounded-lg focus:border-indigo-600 focus:ring-2 focus:ring-indigo-200 transition-all text-lg"})}):i.jsx("div",{className:"space-y-3 mb-8",children:(G==="msq"?["a","b","c","d"]:["A","B","C","D"]).map(ue=>{const le=`option_${ue.toLowerCase()}`,pe=D[le];return pe?i.jsx("button",{onClick:()=>R(ue),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${H===ue?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${H===ue?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:G==="msq"?`${ue})`:`${ue}`}),i.jsx("div",{className:"flex-1",children:i.jsx(ir,{content:pe})})]})},ue):null})}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[i.jsxs("button",{onClick:O,disabled:l===0,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[i.jsx(Hge,{className:"w-4 h-4 mr-1"})," Cu trc"]}),l===s.length-1?i.jsxs("button",{onClick:U,disabled:m,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center shadow-lg shadow-green-200",children:[m?"ang np...":"Np bi"," ",i.jsx(ixe,{className:"w-4 h-4 ml-2"})]}):i.jsxs("button",{onClick:I,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center",children:["Cu tip ",i.jsx(hM,{className:"w-4 h-4 ml-1"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Danh sch cu hi"}),i.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:s.map((ue,le)=>{const pe=c[ue.id];return i.jsx("button",{onClick:()=>u(le),className:`w-full aspect-square rounded-lg font-semibold text-sm ${le===l?"bg-indigo-600 text-white":pe?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:le+1},ue.id)})})]})]})]})};class Axe{constructor(){this.baseUrl="https://hoc.io.vn/api"}async getAssignments(e){try{let t=`${this.baseUrl}/practice/assignments`;e&&(t+=`?grade=${e}`);const n=await fetch(t);if(!n.ok)throw new Error("Failed to fetch assignments");return await n.json()||[]}catch(t){return console.error("Error fetching assignments:",t),[]}}async createSession(e){try{const t=await fetch(`${this.baseUrl}/practice/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const n=await t.json().catch(()=>({}));throw new Error(n.message||`HTTP error! status: ${t.status}`)}return await t.json()}catch(t){throw console.error("Error creating practice session:",t),t}}async getSessionQuestions(e){try{const t=await fetch(`${this.baseUrl}/practice/sessions/${e}/questions`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).questions||[]}catch(t){throw console.error("Error fetching session questions:",t),t}}async submitAnswers(e,t){try{const n=await fetch(`${this.baseUrl}/practice/sessions/${e}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`)}catch(n){throw console.error("Error submitting answers:",n),n}}async completeSession(e,t){return console.warn("completeSession is deprecated. Use submitSession instead."),{}}async getSession(e){try{const t=await fetch(`${this.baseUrl}/practice/sessions/${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();return n.data||n.session||n}catch(t){throw console.error("Error fetching session:",t),t}}async getUserSessions(e,t){try{let n=`${this.baseUrl}/practice/history`;const a=new URLSearchParams;t?.limit&&a.append("per_page",t.limit.toString()),a.toString()&&(n+=`?${a.toString()}`);const s=await fetch(n);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()||[]}catch(n){return console.error("Error fetching user sessions:",n),[]}}async getQuestionsByType(e,t,n=10){try{const a=await fetch(`${this.baseUrl}/questions/by-type/${e}?difficulty=${t}&limit=${n}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return(await a.json()).questions||[]}catch(a){return console.error("Error fetching questions by type:",a),[]}}}const Vy=new Axe,Txe=()=>{const{user:r}=Yr(),e=Vn(),[t,n]=he.useState(!0),[a,s]=he.useState([]),[o,l]=he.useState(null),[u,c]=he.useState([]),[d,h]=he.useState(null),[g,m]=he.useState([]),[v,x]=he.useState(null),[b,y]=he.useState([]),[S,_]=he.useState(null),[N,j]=he.useState("medium"),[E,T]=he.useState(10),[F,A]=he.useState(!1);he.useEffect(()=>{R()},[r]);const R=async()=>{try{n(!0);const H=await Bt.getSubjects();s(H)}catch(H){console.error("Error loading subjects:",H),alert("C li xy ra khi ti danh sch mn hc!")}finally{n(!1)}},I=async H=>{l(H),h(null),x(null),_(null),c([]),m([]),y([]);try{const P=await Bt.getChaptersBySubject(H.id);c(P)}catch(P){console.error("Error loading chapters:",P)}},O=async H=>{h(H),x(null),_(null),m([]),y([]);try{const P=await Bt.getLessonsByChapter(H.id);m(P)}catch(P){console.error("Error loading lessons:",P)}},U=async H=>{x(H),_(null),y([]);try{const P=await Bt.getQuestionTypesByLesson(H.id);y(P)}catch(P){console.error("Error loading question types:",P)}},D=async()=>{if(!(!r||!S))try{A(!0);const H=await Vy.createSession({question_type_ids:[S.id],difficulty:N,question_count:E});e(`/practice/session/${H.session.id}`)}catch(H){console.error("Error starting practice:",H),alert("C li xy ra khi to phin luyn tp!")}finally{A(!1)}};return t?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-8",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("button",{onClick:()=>e("/practice"),className:"text-indigo-600 hover:text-indigo-700 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Quay li"]}),i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:" T chn bi luyn tp"}),i.jsx("p",{className:"text-gray-600",children:"Chn ch  v dng cu hi bn mun luyn tp"})]}),i.jsx("div",{className:"mb-8 flex items-center gap-2 overflow-x-auto pb-2",children:[{step:1,label:"Mn hc",active:!o},{step:2,label:"Chng",active:o&&!d},{step:3,label:"Bi hc",active:d&&!v},{step:4,label:"Dng cu hi",active:v&&!S},{step:5,label:"Ci t",active:!!S}].map((H,P)=>i.jsxs(Na.Fragment,{children:[i.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap ${H.active?"bg-indigo-600 text-white":H.step<5&&S?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:[i.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold ${H.active?"bg-white text-indigo-600":""}`,children:H.step<5&&S?"":H.step}),i.jsx("span",{className:"font-medium",children:H.label})]}),P<4&&i.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},H.step))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold",children:"1"}),"Chn mn hc"]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:a.length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Khng c mn hc no"}):a.map(H=>i.jsxs("button",{onClick:()=>I(H),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${o?.id===H.id?"bg-indigo-100 border-2 border-indigo-600 text-indigo-900 font-semibold":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[i.jsx("div",{className:"font-medium",children:H.name}),H.description&&i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:H.description})]},H.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold",children:"2"}),"Chn chng"]}),o?u.length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Khng c chng no"}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:u.map(H=>i.jsx("button",{onClick:()=>O(H),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${d?.id===H.id?"bg-indigo-100 border-2 border-indigo-600 text-indigo-900 font-semibold":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:H.name},H.id))}):i.jsx("p",{className:"text-gray-500 text-sm",children:" Vui lng chn mn hc trc"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold",children:"3"}),"Chn bi hc"]}),d?g.length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Khng c bi hc no"}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:g.map(H=>i.jsx("button",{onClick:()=>U(H),className:`w-full text-left px-4 py-3 rounded-lg transition-all ${v?.id===H.id?"bg-indigo-100 border-2 border-indigo-600 text-indigo-900 font-semibold":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:H.name},H.id))}):i.jsx("p",{className:"text-gray-500 text-sm",children:" Vui lng chn chng trc"})]})]}),v&&i.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold",children:"4"}),"Chn dng cu hi"]}),b.length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Khng c dng cu hi no"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(H=>i.jsxs("button",{onClick:()=>_(H),className:`text-left px-4 py-4 rounded-lg transition-all ${S?.id===H.id?"bg-indigo-100 border-2 border-indigo-600 text-indigo-900":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:[i.jsx("div",{className:"font-semibold",children:H.name}),i.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Code: ",H.code,H.difficulty_level&&`  ${H.difficulty_level}`]})]},H.id))})]}),S&&i.jsxs("div",{className:"mt-6 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-2xl p-8 text-white",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-white text-indigo-600 rounded-full flex items-center justify-center font-bold",children:"5"}),"Ci t & Bt u"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-3",children:" kh:"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"easy",label:"D",color:"bg-green-500"},{value:"medium",label:"Trung bnh",color:"bg-yellow-500"},{value:"hard",label:"Kh",color:"bg-red-500"}].map(H=>i.jsx("button",{onClick:()=>j(H.value),className:`px-4 py-3 rounded-lg font-semibold transition-all ${N===H.value?`${H.color} text-white scale-105 shadow-lg`:"bg-white/20 hover:bg-white/30"}`,children:H.label},H.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block font-semibold mb-3",children:"S cu hi:"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>T(Math.max(5,E-5)),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg font-bold",children:""}),i.jsxs("div",{className:"flex-1 bg-white/20 rounded-lg px-4 py-3 text-center",children:[i.jsx("div",{className:"text-3xl font-bold",children:E}),i.jsx("div",{className:"text-xs opacity-80",children:"cu"})]}),i.jsx("button",{onClick:()=>T(Math.min(50,E+5)),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg font-bold",children:"+"})]})]})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-6 backdrop-blur-sm",children:[i.jsx("h3",{className:"font-semibold mb-2",children:" Tm tt:"}),i.jsxs("ul",{className:"space-y-1 text-sm",children:[i.jsxs("li",{children:[" Mn: ",i.jsx("strong",{children:o?.name})]}),i.jsxs("li",{children:[" Chng: ",i.jsx("strong",{children:d?.name})]}),i.jsxs("li",{children:[" Bi: ",i.jsx("strong",{children:v?.name})]}),i.jsxs("li",{children:[" Dng: ",i.jsx("strong",{children:S.name})]}),i.jsxs("li",{children:["  kh: ",i.jsx("strong",{children:N==="easy"?"D":N==="medium"?"Trung bnh":"Kh"})]}),i.jsxs("li",{children:[" S cu: ",i.jsx("strong",{children:E})]})]})]}),i.jsx("button",{onClick:D,disabled:F,className:"w-full py-4 bg-white text-indigo-600 rounded-xl font-bold text-lg hover:bg-gray-100 transition-all disabled:bg-gray-300 disabled:cursor-not-allowed shadow-xl",children:F?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"w-5 h-5 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),"ang to..."]}):" Bt u luyn tp ngay!"})]})]})})};class oy{static async createSchedule(e){const{data:t,error:n}=await supabase.from("practice_schedules").insert({student_id:e.student_id,teacher_id:e.teacher_id,title:e.title,description:e.description,scheduled_date:e.scheduled_date,duration_minutes:e.duration_minutes||30,session_type:e.session_type||"custom",subject_id:e.subject_id,question_type_ids:e.question_type_ids||[],difficulty_level:e.difficulty_level||"medium",question_count:e.question_count||10,created_by:e.created_by,notes:e.notes}).select().single();if(n)throw n;return t}static async getStudentSchedules(e,t){let n=supabase.from("practice_schedules").select("*").eq("student_id",e);t?.includeCompleted||(n=n.eq("is_completed",!1)),t?.upcoming&&(n=n.gte("scheduled_date",new Date().toISOString())),n=n.order("scheduled_date",{ascending:!0}),t?.limit&&(n=n.limit(t.limit));const{data:a,error:s}=await n;if(s)throw s;return a||[]}static async getTeacherSchedules(e,t){let n=supabase.from("practice_schedules").select("*").eq("teacher_id",e);t?.includeCompleted||(n=n.eq("is_completed",!1)),n=n.order("scheduled_date",{ascending:!0}),t?.limit&&(n=n.limit(t.limit));const{data:a,error:s}=await n;if(s)throw s;return a||[]}static async getSchedule(e){const{data:t,error:n}=await supabase.from("practice_schedules").select("*").eq("id",e).single();return n?null:t}static async updateSchedule(e,t){const{data:n,error:a}=await supabase.from("practice_schedules").update(t).eq("id",e).select().single();if(a)throw a;return n}static async completeSchedule(e,t){const{error:n}=await supabase.from("practice_schedules").update({is_completed:!0,completed_at:new Date().toISOString(),practice_session_id:t}).eq("id",e);if(n)throw n}static async deleteSchedule(e){const{error:t}=await supabase.from("practice_schedules").delete().eq("id",e);if(t)throw t}static async getTodaySchedules(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(t);n.setDate(n.getDate()+1);const{data:a,error:s}=await supabase.from("practice_schedules").select("*").eq("student_id",e).eq("is_completed",!1).gte("scheduled_date",t.toISOString()).lt("scheduled_date",n.toISOString()).order("scheduled_date",{ascending:!0});if(s)throw s;return a||[]}static isScheduleReady(e){const t=new Date(e.scheduled_date).getTime(),n=Date.now(),a=900*1e3;return n>=t-a}static async getScheduleStats(e){const{data:t}=await supabase.from("practice_schedules").select("is_completed, scheduled_date").eq("student_id",e);if(!t)return{total:0,completed:0,upcoming:0,overdue:0};const n=new Date,a=t.filter(l=>l.is_completed).length,s=t.filter(l=>!l.is_completed&&new Date(l.scheduled_date)>n).length,o=t.filter(l=>!l.is_completed&&new Date(l.scheduled_date)<=n).length;return{total:t.length,completed:a,upcoming:s,overdue:o}}}class ly{static calculateMasteryLevel(e,t){return t<5?"beginner":e>=90&&t>=10?"mastered":e>=70?"advanced":e>=40?"intermediate":"beginner"}static calculatePriorityScore(e,t,n){let a=0;if(e){const o=(1-e.accuracy_rate/100)*40;a+=o}else a+=35;if(e?.last_practiced_at){const o=Math.floor((Date.now()-new Date(e.last_practiced_at).getTime())/864e5),l=Math.min(o/30,1)*30;a+=l}else a+=25;return t.filter(o=>o.is_active&&!o.is_achieved).length>0&&(a+=20),e?e.mastery_level==="mastered"?a+=5:e.mastery_level==="beginner"?a+=10:a+=7:a+=8,Math.min(Math.round(a),100)}static getRecommendedDifficulty(e){switch(e){case"beginner":return"easy";case"intermediate":return"medium";case"advanced":return"medium";case"mastered":return"hard";default:return"medium"}}static generateRecommendationReason(e,t){if(!e)return"Dng bi mi - Bn cha tng luyn tp dng ny";const n=[];if(e.accuracy_rate<60&&n.push(`T l ng thp (${e.accuracy_rate.toFixed(0)}%)`),e.last_practiced_at){const s=Math.floor((Date.now()-new Date(e.last_practiced_at).getTime())/864e5);s>7&&n.push(` ${s} ngy cha luyn`)}return t.filter(s=>s.is_active&&!s.is_achieved).length>0&&n.push("Lin quan n mc tiu ca bn"),(e.mastery_level==="beginner"||e.mastery_level==="intermediate")&&n.push("Cn ci thin k nng"),n.length>0?n.join("  "):"Tip tc rn luyn  thnh tho"}static async getStudentPerformance(e){const{data:t,error:n}=await supabase.from("student_performance").select("*").eq("student_id",e);if(n)throw n;return t||[]}static async getActiveLearningGoals(e){const{data:t,error:n}=await supabase.from("learning_goals").select("*").eq("student_id",e).eq("is_active",!0).eq("is_achieved",!1);if(n)throw n;return t||[]}static async generateRecommendations(e){const[t,n]=await Promise.all([this.getStudentPerformance(e),this.getActiveLearningGoals(e)]),{data:a}=await supabase.from("users").select("grade, role").eq("id",e).single();let s;if(a?.role==="student"&&a.grade){const{data:u}=await supabase.from("subjects").select("id").ilike("name",`%Ton ${a.grade}%`).eq("is_active",!0);if(!u||u.length===0)return;const c=u.map(g=>g.id),{data:d,error:h}=await supabase.from("question_types").select(`
          id,
          difficulty_level,
          lesson:lessons!inner (
            chapter:chapters!inner (
              subject:subjects!inner (id)
            )
          )
        `).in("lesson.chapter.subject.id",c).eq("is_active",!0);if(h)throw h;s=d}else{const{data:u,error:c}=await supabase.from("question_types").select("id, difficulty_level").eq("is_active",!0);if(c)throw c;s=u}await supabase.from("practice_recommendations").delete().eq("student_id",e).lt("expires_at",new Date().toISOString());const o=[];for(const u of s||[]){const c=t.find(h=>h.question_type_id===u.id),d=this.calculatePriorityScore(c||null,n,u.id);if(d>=30){const h=c?c.mastery_level:"beginner";o.push({student_id:e,question_type_id:u.id,reason:this.generateRecommendationReason(c||null,n),priority_score:d,recommended_difficulty:this.getRecommendedDifficulty(h),recommended_question_count:h==="beginner"?15:10})}}o.sort((u,c)=>c.priority_score-u.priority_score);const l=o.slice(0,10);if(l.length>0){const{error:u}=await supabase.from("practice_recommendations").insert(l);if(u)throw u}}static async getRecommendations(e){const{data:t}=await supabase.from("users").select("grade, role").eq("id",e).single(),{data:n,error:a}=await supabase.from("practice_recommendations").select(`
        *,
        question_type:question_types (
          id,
          name,
          code,
          difficulty_level,
          lesson:lessons (
            name,
            chapter:chapters (
              name,
              subject:subjects (
                name
              )
            )
          )
        )
      `).eq("student_id",e).eq("is_completed",!1).gt("expires_at",new Date().toISOString()).order("priority_score",{ascending:!1}).limit(10);if(a)throw a;if(t?.role==="student"&&t.grade&&n){const s=`Ton ${t.grade}`;return n.filter(o=>(o.question_type?.lesson?.chapter?.subject?.name||"").includes(s))}return n||[]}static async completeRecommendation(e){const{error:t}=await supabase.from("practice_recommendations").update({is_completed:!0,completed_at:new Date().toISOString()}).eq("id",e);if(t)throw t}static async updatePerformance(e,t,n,a){const{data:s}=await supabase.from("student_performance").select("*").eq("student_id",e).eq("question_type_id",t).single();if(s){const o=s.total_attempts+1,l=s.correct_answers+(n?1:0),u=l/o*100,c=Math.round((s.avg_time_spent*s.total_attempts+a)/o),d=this.calculateMasteryLevel(u,o);await supabase.from("student_performance").update({total_attempts:o,correct_answers:l,accuracy_rate:u,avg_time_spent:c,mastery_level:d,last_practiced_at:new Date().toISOString()}).eq("id",s.id)}else{const o=n?100:0,l=this.calculateMasteryLevel(o,1);await supabase.from("student_performance").insert({student_id:e,question_type_id:t,total_attempts:1,correct_answers:n?1:0,accuracy_rate:o,avg_time_spent:a,mastery_level:l,last_practiced_at:new Date().toISOString()})}}}class qo{static async createSession(e,t,n,a){const{data:s,error:o}=await supabase.from("practice_sessions").insert({student_id:e,recommendation_id:a?.recommendationId,session_type:n,subject_id:a?.subjectId,question_type_id:a?.questionTypeId,questions:t,total_questions:t.length,answers:{},is_completed:!1}).select().single();if(o)throw o;return s.id}static async submitSession(e,t,n){const{data:a,error:s}=await supabase.from("practice_sessions").select("*").eq("id",e).single();if(s)throw s;if(!a)throw new Error("Session not found");const o=a.questions||[];let l=0;const u=[];for(const h of o){const g=t[h.id],m=h.correct_answer||h.correctAnswer,v=g===m;v&&l++,u.push({questionId:h.id,isCorrect:v,studentAnswer:g||"",correctAnswer:m}),a.question_type_id&&await ly.updatePerformance(a.student_id,a.question_type_id,v,Math.round(n/o.length))}const c=o.length>0?l/o.length*100:0,{error:d}=await supabase.from("practice_sessions").update({answers:t,correct_answers:l,score:c,time_spent:n,is_completed:!0,completed_at:new Date().toISOString()}).eq("id",e);if(d)throw d;return a.recommendation_id&&await ly.completeRecommendation(a.recommendation_id),await ly.generateRecommendations(a.student_id),{sessionId:e,score:c,correctAnswers:l,totalQuestions:o.length,timeSpent:n,questionResults:u}}static async getSession(e){const{data:t,error:n}=await supabase.from("practice_sessions").select("*").eq("id",e).single();return n?null:t}static async getPracticeHistory(e,t=20){const{data:n,error:a}=await supabase.from("practice_sessions").select("*").eq("student_id",e).eq("is_completed",!0).order("completed_at",{ascending:!1}).limit(t);if(a)throw a;return n||[]}static async getQuestionsForPractice(e,t,n=10){const{data:a,error:s}=await supabase.from("questions").select("*").eq("question_type_id",e).eq("difficulty_level",t).eq("is_approved",!0).limit(n*2);if(s)throw s;return(a||[]).sort(()=>Math.random()-.5).slice(0,n)}static async getWrongAnswersForReview(e,t,n=20){let a=supabase.from("practice_sessions").select("questions, answers").eq("student_id",e).eq("is_completed",!0);t&&(a=a.eq("question_type_id",t));const{data:s,error:o}=await a.order("completed_at",{ascending:!1}).limit(10);if(o)throw o;const l=[];for(const c of s||[]){const d=c.questions||[],h=c.answers||{};for(const g of d){const m=h[g.id],v=g.correct_answer||g.correctAnswer;m!==v&&l.push({...g,previous_wrong_answer:m})}}return Array.from(new Map(l.map(c=>[c.id,c])).values()).slice(0,n)}static async getPracticeStats(e){const{data:t,error:n}=await supabase.from("practice_sessions").select("*").eq("student_id",e).eq("is_completed",!0).order("completed_at",{ascending:!1});if(n)throw n;const a=t?.length||0,s=t?.reduce((u,c)=>u+(c.total_questions||0),0)||0,o=t?.reduce((u,c)=>u+(c.time_spent||0),0)||0,l=a>0?t.reduce((u,c)=>u+(c.score||0),0)/a:0;return{totalSessions:a,totalQuestions:s,averageScore:l,totalTimeSpent:o,recentSessions:t?.slice(0,5)||[]}}}class xu{static async getStudentProfile(e){try{const[t,n,a,s]=await Promise.all([this.getOrCreateStudentLevel(e),this.getOrCreateStreak(e),this.getStudentAchievements(e),this.getRecentXPTransactions(e,10)]),o=new Date().toISOString().split("T")[0],l=a.filter(u=>u.is_completed&&u.completed_at?.startsWith(o));return{level:t,streak:n,achievements:a,recentXP:s,unlockedToday:l}}catch(t){return console.error("Error getting gamification profile:",t),null}}static async getOrCreateStudentLevel(e){const{data:t,error:n}=await supabase.from("student_levels").select("*").eq("student_id",e).single();if(n||!t){const{data:a,error:s}=await supabase.from("student_levels").insert({student_id:e,total_xp:0,current_level:1,xp_for_next_level:100}).select().single();if(s)throw s;return a}return t}static async getOrCreateStreak(e){const{data:t,error:n}=await supabase.from("practice_streaks").select("*").eq("student_id",e).single();if(n||!t){const a=new Date().toISOString().split("T")[0],{data:s,error:o}=await supabase.from("practice_streaks").insert({student_id:e,current_streak:0,longest_streak:0,weekly_goal:5,current_week_count:0,week_start_date:a}).select().single();if(o)throw o;return s}return t}static async awardXP(e,t,n,a,s){try{const o=await this.getOrCreateStudentLevel(e);await supabase.from("xp_transactions").insert({student_id:e,xp_amount:t,transaction_type:n,source_id:a,description:s});const l=o.total_xp+t,u=this.calculateLevelFromXP(l),c=this.calculateXPForLevel(u+1),d=u>o.current_level;return await supabase.from("student_levels").update({total_xp:l,current_level:u,xp_for_next_level:c}).eq("student_id",e),{newLevel:u,leveledUp:d,totalXP:l}}catch(o){throw console.error("Error awarding XP:",o),o}}static async updateStreak(e){try{const t=await this.getOrCreateStreak(e),n=new Date().toISOString().split("T")[0],a=t.last_practice_date;let s=t.current_streak,o=!1,l=0;if(a===n)return{currentStreak:s,isNewRecord:o,streakBonusXP:l};const u=new Date;u.setDate(u.getDate()-1);const c=u.toISOString().split("T")[0];return a===c?s+=1:s=1,s>t.longest_streak&&(o=!0),l=Math.min(s*5,50),await supabase.from("practice_streaks").update({current_streak:s,longest_streak:Math.max(s,t.longest_streak),last_practice_date:n}).eq("student_id",e),l>0&&await this.awardXP(e,l,"streak_bonus",void 0,`${s} ngy lin tc`),{currentStreak:s,isNewRecord:o,streakBonusXP:l}}catch(t){throw console.error("Error updating streak:",t),t}}static async checkAchievements(e){try{const{data:t}=await supabase.from("achievement_definitions").select("*").eq("is_active",!0);if(!t)return[];const[n,a,s]=await Promise.all([this.getOrCreateStudentLevel(e),this.getOrCreateStreak(e),this.getStudentPerformanceStats(e)]),o=[];for(const l of t){const u=await this.getStudentAchievement(e,l.id);if(u?.is_completed)continue;let c=0;switch(l.requirement_type){case"streak_days":c=a.current_streak;break;case"perfect_sessions":c=n.perfect_sessions_count;break;case"total_questions":c=s.totalQuestions;break;case"mastery_count":c=s.masteredCount;break;default:c=0}const d=c>=l.requirement_value;if(u){const{data:h}=await supabase.from("student_achievements").update({current_progress:c,is_completed:d,completed_at:d?new Date().toISOString():null}).eq("id",u.id).select().single();d&&!u.is_completed&&h&&(await this.onAchievementUnlocked(e,l),o.push(h))}else{const{data:h}=await supabase.from("student_achievements").insert({student_id:e,achievement_id:l.id,current_progress:c,required_progress:l.requirement_value,is_completed:d,completed_at:d?new Date().toISOString():null}).select().single();d&&h&&(await this.onAchievementUnlocked(e,l),o.push(h))}}return o}catch(t){return console.error("Error checking achievements:",t),[]}}static async onAchievementUnlocked(e,t){await this.awardXP(e,t.xp_reward,"achievement_unlocked",t.id,`M kha: ${t.name}`),await supabase.rpc("increment",{table_name:"student_levels",column_name:"achievements_unlocked",row_id:e}).catch(()=>{supabase.from("student_levels").select("achievements_unlocked").eq("student_id",e).single().then(({data:n})=>{n&&supabase.from("student_levels").update({achievements_unlocked:n.achievements_unlocked+1}).eq("student_id",e)})})}static async getStudentAchievements(e){const{data:t}=await supabase.from("student_achievements").select(`
        *,
        achievement_definitions (*)
      `).eq("student_id",e).order("is_completed",{ascending:!1}).order("current_progress",{ascending:!1});return t||[]}static async getStudentAchievement(e,t){const{data:n}=await supabase.from("student_achievements").select("*").eq("student_id",e).eq("achievement_id",t).single();return n}static async getRecentXPTransactions(e,t=10){const{data:n}=await supabase.from("xp_transactions").select("*").eq("student_id",e).order("created_at",{ascending:!1}).limit(t);return n||[]}static async getLeaderboard(e=50){const{data:t}=await supabase.from("student_levels").select(`
        student_id,
        total_xp,
        current_level,
        achievements_unlocked,
        users (student_name, email)
      `).order("total_xp",{ascending:!1}).limit(e);return t?t.map((n,a)=>({student_id:n.student_id,total_xp:n.total_xp,current_level:n.current_level,achievements_unlocked:n.achievements_unlocked,student_name:n.users?.student_name||n.users?.email?.split("@")[0]||"User",rank:a+1})):[]}static async getStudentPerformanceStats(e){const{data:t}=await supabase.from("practice_sessions").select("total_questions").eq("student_id",e).eq("is_completed",!0),n=t?.reduce((o,l)=>o+(l.total_questions||0),0)||0,{data:a}=await supabase.from("student_performance").select("mastery_level").eq("student_id",e).eq("mastery_level","mastered"),s=a?.length||0;return{totalQuestions:n,masteredCount:s}}static async awardPracticeXP(e,t,n,a,s){const o=Math.round(n/100*a*10);let l=0;if(s&&a>=5){l=50;const c=await this.getOrCreateStudentLevel(e);await supabase.from("student_levels").update({perfect_sessions_count:c.perfect_sessions_count+1}).eq("student_id",e)}const u=o+l;await this.awardXP(e,u,s?"perfect_score":"practice_completed",t,s?"Hon ho 100%!":`${n.toFixed(0)}% chnh xc`)}static calculateLevelFromXP(e){let t=1;for(;e>=this.calculateXPForLevel(t+1);)t++;return t}static calculateXPForLevel(e){return Math.floor(100*Math.pow(e,1.5))}static getXPProgressForLevel(e,t){const n=this.calculateXPForLevel(t),a=this.calculateXPForLevel(t+1),s=e-n,o=a-n,l=s/o*100;return{currentLevelXP:s,requiredXP:o,progressPercent:Math.min(l,100)}}}const Cxe=()=>{const{scheduleId:r}=Cf(),{user:e}=Yr(),t=Vn(),[n,a]=he.useState(!0),[s,o]=he.useState(null),[l,u]=he.useState(null),[c,d]=he.useState(0),[h,g]=he.useState({}),[m,v]=he.useState(0),[x,b]=he.useState(!1),[y,S]=he.useState(null),[_,N]=he.useState(null);he.useEffect(()=>{r&&j()},[r]),he.useEffect(()=>{if(_){const H=setInterval(()=>{v(P=>P+1)},1e3);return()=>clearInterval(H)}},[_]);const j=async()=>{try{a(!0);const H=await oy.getSchedule(r);if(!H){alert("Khng tm thy lch luyn tp"),t("/practice");return}if(!oy.isScheduleReady(H)){alert("Cha n gi lm bi. Vui lng quay li sau."),t("/practice");return}if(H.is_completed){alert("Bn  hon thnh lch luyn tp ny ri"),t("/practice");return}o(H)}catch(H){console.error("Error loading schedule:",H),alert("C li xy ra"),t("/practice")}finally{a(!1)}},E=async()=>{try{a(!0);const H=await qo.getQuestionsForPractice(s.question_type_ids[0],s.difficulty_level==="mixed"?"medium":s.difficulty_level,s.question_count);if(H.length===0){alert("Khng tm thy cu hi ph hp"),t("/practice");return}const P=await qo.createSession(e.id,H,s.session_type,{questionTypeId:s.question_type_ids[0],subjectId:s.subject_id}),G=await qo.getSession(P);u(G),N(new Date)}catch(H){console.error("Error starting practice:",H),alert("C li xy ra khi bt u luyn tp")}finally{a(!1)}},T=H=>{const P=l.questions[c];g(G=>({...G,[P.id]:H}))},F=()=>{c<l.questions.length-1&&d(H=>H+1)},A=()=>{c>0&&d(H=>H-1)},R=async()=>{if(Object.keys(h).length<l.questions.length){const H=l.questions.length-Object.keys(h).length;if(!confirm(`Bn cn ${H} cu cha tr li. Bn c chc mun np bi?`))return}try{const H=await qo.submitSession(l.id,h,m);if(S(H),b(!0),await oy.completeSchedule(r,l.id),e){const P=H.score===100;await xu.awardPracticeXP(e.id,l.id,H.score,H.totalQuestions,P),await xu.updateStreak(e.id),await xu.checkAchievements(e.id)}}catch(H){console.error("Error submitting session:",H),alert("C li xy ra khi np bi")}};if(n)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti..."})]})});if(!l&&s){const H=new Date(s.scheduled_date),P=s.created_by==="teacher";return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.title}),P&&i.jsx("span",{className:"inline-block px-3 py-1 bg-purple-100 text-purple-800 text-sm font-semibold rounded-full",children:" Bi tp t gio vin"})]}),s.description&&i.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-6",children:i.jsx("p",{className:"text-blue-900",children:s.description})}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Thi gian d kin"}),i.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.duration_minutes," pht"]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"S cu hi"}),i.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.question_count," cu"]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:" kh"}),i.jsx("div",{className:"text-lg font-semibold",children:i.jsx("span",{className:`px-3 py-1 rounded ${s.difficulty_level==="easy"?"bg-green-100 text-green-800":s.difficulty_level==="hard"?"bg-red-100 text-red-800":s.difficulty_level==="mixed"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"}`,children:s.difficulty_level==="easy"?"D":s.difficulty_level==="hard"?"Kh":s.difficulty_level==="mixed"?"Hn hp":"Trung bnh"})})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Thi gian"}),i.jsx("div",{className:"text-sm font-semibold text-gray-900",children:H.toLocaleString("vi-VN")})]})]}),s.notes&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("span",{className:"text-2xl mr-3",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-yellow-900 mb-1",children:"Ghi ch t gio vin:"}),i.jsx("p",{className:"text-yellow-800",children:s.notes})]})]})}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:" Hng dn:"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600 mb-6",children:[i.jsx("li",{children:" c k  bi trc khi tr li"}),i.jsx("li",{children:" Bn c th quay li cu trc  kim tra"}),i.jsx("li",{children:" Thi gian lm bi s c tnh t khi bt u"}),i.jsx("li",{children:' Nhn "Np bi" khi hon thnh'})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>t("/practice"),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold",children:" Quay li"}),i.jsx("button",{onClick:E,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"Bt u luyn tp "})]})]})]})})})}if(x&&y)return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"text-6xl mb-4",children:y.score>=80?"":y.score>=60?"":""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Hon thnh bi luyn!"}),i.jsx("p",{className:"text-gray-600",children:s.title})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[y.score.toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"im s"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[y.correctAnswers,"/",y.totalQuestions]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Cu ng"})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[Math.floor(y.timeSpent/60),":",(y.timeSpent%60).toString().padStart(2,"0")]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Thi gian"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[(y.timeSpent/y.totalQuestions).toFixed(0),"s"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"TB/cu"})]})]}),i.jsx("div",{className:"space-y-4 mb-8",children:y.questionResults.map((H,P)=>i.jsxs("div",{className:`border-2 rounded-lg p-4 ${H.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:H.isCorrect?"":""}),i.jsxs("span",{className:"font-semibold",children:["Cu ",P+1]})]}),i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsxs("p",{children:["Cu tr li ca bn: ",i.jsx("strong",{children:H.studentAnswer||"(Khng tr li)"})]}),!H.isCorrect&&i.jsxs("p",{className:"text-green-700 mt-1",children:["p n ng: ",i.jsx("strong",{children:H.correctAnswer})]})]})]},P))}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>t("/practice"),className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"V trang luyn tp"}),i.jsx("button",{onClick:()=>t("/progress"),className:"flex-1 px-6 py-3 border-2 border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 font-semibold",children:"Xem tin "})]})]})})});if(!l)return null;const I=l.questions[c],O=h[I.id],U=(c+1)/l.questions.length*100,D=Object.entries(h).filter(([H,P])=>{const G=l.questions.find(ue=>ue.id===H);return P===(G?.correct_answer||G?.correctAnswer)}).length;return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Cu ",c+1,"/",l.questions.length]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"text-gray-600",children:[" ",Math.floor(m/60),":",(m%60).toString().padStart(2,"0")]}),i.jsxs("span",{className:"text-green-600 font-semibold",children:[" ",D]})]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${U}%`}})})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Cu ",c+1,": ",I.question_text||I.questionText]}),I.question_latex&&i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:i.jsx(ir,{content:I.question_latex})})]}),i.jsx("div",{className:"space-y-3 mb-8",children:["A","B","C","D"].map(H=>{const P=I[`option_${H.toLowerCase()}`]||I[`option${H}`],G=I[`option_${H.toLowerCase()}_latex`];return!P&&!G?null:i.jsx("button",{onClick:()=>T(H),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${O===H?"border-indigo-600 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${O===H?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"}`,children:H}),i.jsx("div",{className:"flex-1",children:G?i.jsx(ir,{content:G}):i.jsx("span",{children:P})})]})},H)})}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:A,disabled:c===0,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:" Cu trc"}),c===l.questions.length-1?i.jsx("button",{onClick:R,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",children:"Np bi"}):i.jsx("button",{onClick:F,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Cu tip "})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Danh sch cu hi"}),i.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:l.questions.map((H,P)=>{const G=h[H.id];return i.jsx("button",{onClick:()=>d(P),className:`w-full aspect-square rounded-lg font-semibold text-sm ${P===c?"bg-indigo-600 text-white":G?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:P+1},H.id)})})]})]})]})},Dxe=()=>{const{user:r}=Yr(),e=Vn(),[t,n]=he.useState(!0),[a,s]=he.useState([]),[o,l]=he.useState(null),[u,c]=he.useState(0),[d,h]=he.useState({}),[g,m]=he.useState(0),[v,x]=he.useState(!1),[b,y]=he.useState(null),[S,_]=he.useState(null);he.useEffect(()=>{r&&N()},[r]),he.useEffect(()=>{if(S){const D=setInterval(()=>{m(H=>H+1)},1e3);return()=>clearInterval(D)}},[S]);const N=async()=>{try{n(!0);const D=await qo.getWrongAnswersForReview(r.id,void 0,20);s(D)}catch(D){console.error("Error loading wrong questions:",D),alert("C li xy ra khi ti cu hi")}finally{n(!1)}},j=async()=>{if(a.length===0){alert("Khng c cu hi no  n tp");return}try{n(!0);const D=await qo.createSession(r.id,a,"review_mistakes"),H=await qo.getSession(D);l(H),_(new Date)}catch(D){console.error("Error starting review:",D),alert("C li xy ra khi bt u n tp")}finally{n(!1)}},E=D=>{const H=o.questions[u];h(P=>({...P,[H.id]:D}))},T=()=>{u<o.questions.length-1&&c(D=>D+1)},F=()=>{u>0&&c(D=>D-1)},A=async()=>{if(Object.keys(d).length<o.questions.length){const D=o.questions.length-Object.keys(d).length;if(!confirm(`Bn cn ${D} cu cha tr li. Bn c chc mun np bi?`))return}try{const D=await qo.submitSession(o.id,d,g);if(y(D),x(!0),r){const H=D.score===100;await xu.awardPracticeXP(r.id,o.id,D.score,D.totalQuestions,H),await xu.updateStreak(r.id),await xu.checkAchievements(r.id)}}catch(D){console.error("Error submitting session:",D),alert("C li xy ra khi np bi")}};if(t)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti cu hi..."})]})});if(!o)return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("button",{onClick:()=>e("/practice"),className:"text-indigo-600 hover:text-indigo-700 mb-4 flex items-center gap-2",children:" Quay li"}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" n li cu sai"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Xem li v luyn tp cc cu  lm sai trc y"})]}),a.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tuyt vi!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Bn cha c cu no lm sai hoc  n tp ht ri"}),i.jsx("button",{onClick:()=>e("/practice"),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"V trang luyn tp"})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Tm thy ",a.length," cu  lm sai"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Hy th lm li  ci thin kt qu"})]}),i.jsx("button",{onClick:j,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"Bt u n tp"})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"space-y-4",children:[a.slice(0,10).map((D,H)=>i.jsx("div",{className:"border-2 border-red-200 rounded-lg p-4 bg-red-50",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold flex-shrink-0",children:H+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:D.question_text||D.questionText}),D.question_latex&&i.jsx("div",{className:"bg-white p-3 rounded mb-2",children:i.jsx(ir,{content:D.question_latex})}),D.previous_wrong_answer&&i.jsxs("div",{className:"text-sm text-red-700 mt-2",children:[" Ln trc bn chn: ",i.jsx("strong",{children:D.previous_wrong_answer})]})]})]})},D.id)),a.length>10&&i.jsxs("div",{className:"text-center text-gray-600 text-sm py-4",children:["... v ",a.length-10," cu khc"]})]}),i.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-blue-900 mb-1",children:"Mo hc tp:"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[i.jsx("li",{children:" c k  bi v phn tch li sai trc y"}),i.jsx("li",{children:" Tp trung vo phng php gii, khng ch p n"}),i.jsx("li",{children:" Lm li nhiu ln cho n khi thnh tho"})]})]})]})}),i.jsxs("div",{className:"mt-6 flex gap-4",children:[i.jsx("button",{onClick:()=>e("/practice"),className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold",children:"Quay li"}),i.jsx("button",{onClick:j,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"Bt u n tp "})]})]})]})]})});if(v&&b){const D=a.length>0?(b.correctAnswers/b.totalQuestions*100).toFixed(1):0;return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"text-6xl mb-4",children:b.score>=80?"":b.score>=60?"":""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Hon thnh n tp!"}),i.jsx("p",{className:"text-gray-600",children:"Kt qu n li cu sai"})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-indigo-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-indigo-600",children:[b.score.toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"im s"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[b.correctAnswers,"/",b.totalQuestions]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Cu ng"})]}),i.jsxs("div",{className:"bg-orange-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[Math.floor(b.timeSpent/60),":",(b.timeSpent%60).toString().padStart(2,"0")]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Thi gian"})]}),i.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:[D,"%"]}),i.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Ci thin"})]})]}),b.score>=80&&i.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-green-900",children:"Xut sc!"}),i.jsx("p",{className:"text-sm text-green-800",children:"Bn  ci thin rt nhiu. Tip tc pht huy nh!"})]})]})}),b.score<60&&i.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-yellow-900",children:"ng nn ch!"}),i.jsx("p",{className:"text-sm text-yellow-800",children:"Hy xem li l thuyt v th li ln na. Bn s tin b!"})]})]})}),i.jsx("div",{className:"space-y-4 mb-8",children:b.questionResults.map((H,P)=>{const G=o.questions[P];return i.jsxs("div",{className:`border-2 rounded-lg p-4 ${H.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:H.isCorrect?"":""}),i.jsxs("span",{className:"font-semibold",children:["Cu ",P+1]}),!H.isCorrect&&G.previous_wrong_answer&&i.jsx("span",{className:"text-xs bg-red-200 text-red-800 px-2 py-1 rounded",children:"Vn sai"})]}),i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsxs("p",{children:["Cu tr li ca bn: ",i.jsx("strong",{children:H.studentAnswer||"(Khng tr li)"})]}),!H.isCorrect&&i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-green-700 mt-1",children:["p n ng: ",i.jsx("strong",{children:H.correctAnswer})]}),G.previous_wrong_answer&&i.jsxs("p",{className:"text-red-600 mt-1 text-xs",children:["Ln trc bn chn: ",G.previous_wrong_answer]})]})]})]},P)})}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>e("/practice"),className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold",children:"V trang luyn tp"}),i.jsx("button",{onClick:()=>{l(null),x(!1),y(null),h({}),m(0),c(0),_(null),N()},className:"flex-1 px-6 py-3 border-2 border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 font-semibold",children:"n li ln na"})]})]})})})}if(!o)return null;const R=o.questions[u],I=d[R.id],O=(u+1)/o.questions.length*100,U=Object.entries(d).filter(([D,H])=>{const P=o.questions.find(G=>G.id===D);return H===(P?.correct_answer||P?.correctAnswer)}).length;return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Cu ",u+1,"/",o.questions.length]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsx("span",{className:"text-red-600 font-semibold",children:" n tp"}),i.jsxs("span",{className:"text-gray-600",children:[" ",Math.floor(g/60),":",(g%60).toString().padStart(2,"0")]}),i.jsxs("span",{className:"text-green-600 font-semibold",children:[" ",U]})]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-red-600 h-2 rounded-full transition-all",style:{width:`${O}%`}})})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[R.previous_wrong_answer&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"font-semibold text-red-900",children:"Ln trc bn chn: "}),i.jsx("span",{className:"text-red-700",children:R.previous_wrong_answer})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Cu ",u+1,": ",R.question_text||R.questionText]}),R.question_latex&&i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:i.jsx(ir,{content:R.question_latex})})]}),i.jsx("div",{className:"space-y-3 mb-8",children:["A","B","C","D"].map(D=>{const H=R[`option_${D.toLowerCase()}`]||R[`option${D}`],P=R[`option_${D.toLowerCase()}_latex`];if(!H&&!P)return null;const G=R.previous_wrong_answer===D;return i.jsx("button",{onClick:()=>E(D),className:`w-full text-left p-4 rounded-lg border-2 transition-all ${I===D?"border-indigo-600 bg-indigo-50":G?"border-red-300 bg-red-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${I===D?"bg-indigo-600 text-white":G?"bg-red-300 text-red-800":"bg-gray-200 text-gray-700"}`,children:D}),i.jsxs("div",{className:"flex-1",children:[P?i.jsx(ir,{content:P}):i.jsx("span",{children:H}),G&&i.jsx("span",{className:"ml-2 text-xs text-red-600",children:"(Ln trc)"})]})]})},D)})}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:F,disabled:u===0,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:" Cu trc"}),u===o.questions.length-1?i.jsx("button",{onClick:A,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",children:"Np bi"}):i.jsx("button",{onClick:T,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Cu tip "})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Danh sch cu hi"}),i.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:o.questions.map((D,H)=>{const P=d[D.id],G=D.previous_wrong_answer;return i.jsxs("button",{onClick:()=>c(H),className:`w-full aspect-square rounded-lg font-semibold text-sm relative ${H===u?"bg-indigo-600 text-white":P?"bg-green-100 text-green-700 border-2 border-green-300":G?"bg-red-100 text-red-700 border-2 border-red-300":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[H+1,G&&!P&&i.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]},D.id)})})]})]})]})},kxe=()=>{const{user:r}=Yr(),e=Vn(),[t,n]=he.useState(!0),[a,s]=he.useState([]),[o,l]=he.useState(null),[u,c]=he.useState([]),[d,h]=he.useState(null),[g,m]=he.useState([]),[v,x]=he.useState(null),[b,y]=he.useState([]),[S,_]=he.useState(null),[N,j]=he.useState("medium"),[E,T]=he.useState(10),[F,A]=he.useState(!1);he.useEffect(()=>{R()},[]);const R=async()=>{try{n(!0);const P=await Bt.getSubjects();s(P),P.length>0&&I(P[0])}catch(P){console.error("Error loading subjects:",P)}finally{n(!1)}},I=async P=>{l(P),h(null),x(null),_(null),c([]),m([]),y([]);try{const G=await Bt.getChaptersBySubject(P.id);c(G)}catch(G){console.error("Error loading chapters:",G)}},O=async P=>{h(P),x(null),_(null),m([]),y([]);try{const G=await Bt.getLessonsByChapter(P.id);m(G)}catch(G){console.error("Error loading lessons:",G)}},U=async P=>{x(P),_(null),y([]);try{const G=await Bt.getQuestionTypesByLesson(P.id);y(G)}catch(G){console.error("Error loading question types:",G)}},D=async()=>{if(S)try{A(!0);const P=await Vy.createSession({question_type_ids:[S.id],difficulty:N,question_count:E});e(`/practice/session/${P.session.id}`)}catch(P){console.error("Error creating practice session:",P),alert("C li xy ra khi to bi luyn tp. Vui lng th li.")}finally{A(!1)}},H=async P=>{try{const G=await Bt.getQuestionTypesByLesson(P.id);if(G.length>0){x(P),y(G),_(G[0]),A(!0);const ue=await Vy.createSession({question_type_ids:[G[0].id],difficulty:"medium",question_count:10});e(`/practice/session/${ue.session.id}`)}else alert("Bi hc ny cha c cu hi no.")}catch(G){console.error("Error starting lesson:",G)}};return t?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Luyn tp"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Chn ch  v bt u luyn tp  nng cao kin thc"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[i.jsxs("h2",{className:"font-semibold text-gray-800 mb-4 flex items-center",children:[i.jsx(zl,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Mn hc"]}),i.jsx("div",{className:"space-y-2",children:a.map(P=>i.jsxs("button",{onClick:()=>I(P),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${o?.id===P.id?"bg-indigo-50 text-indigo-700 font-medium":"hover:bg-gray-50 text-gray-700"}`,children:[i.jsx("span",{children:P.name}),o?.id===P.id&&i.jsx(hM,{className:"w-4 h-4"})]},P.id))})]}),o&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[i.jsx("h2",{className:"font-semibold text-gray-800 mb-4",children:"Chng"}),i.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:[u.map(P=>i.jsx("button",{onClick:()=>O(P),className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center justify-between ${d?.id===P.id?"bg-indigo-50 text-indigo-700 font-medium":"hover:bg-gray-50 text-gray-700"}`,children:i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-sm font-medium",children:P.name}),P.description&&i.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:P.description})]})},P.id)),u.length===0&&i.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Cha c chng no"})]})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-6 text-white text-center",children:[i.jsx(hxe,{className:"w-8 h-8 mx-auto mb-2 opacity-80"}),i.jsx("div",{className:"text-2xl font-bold",children:"--"}),i.jsx("div",{className:"text-sm opacity-90",children:"im trung bnh"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:[i.jsx(Hy,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"--"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Cu  lm"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 text-center",children:[i.jsx(xw,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"--"}),i.jsx("div",{className:"text-sm text-gray-500",children:"Gi luyn tp"})]})]}),d?i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[i.jsx("span",{className:"bg-indigo-100 p-2 rounded-lg mr-3",children:i.jsx(zl,{className:"w-6 h-6 text-indigo-600"})}),d.name]}),i.jsxs("div",{className:"space-y-6",children:[g.map(P=>i.jsxs("div",{className:`border rounded-xl p-4 transition-all ${v?.id===P.id?"border-indigo-200 bg-indigo-50/30":"border-gray-100 hover:border-indigo-100"}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>U(P),children:[i.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:P.name}),P.description&&i.jsx("p",{className:"text-gray-500 mt-1",children:P.description})]}),i.jsxs("button",{onClick:()=>H(P),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[i.jsx(exe,{className:"w-4 h-4 mr-2"}),"Luyn ngay"]})]}),v?.id===P.id&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-3",children:[b.map(G=>i.jsx("div",{onClick:()=>_(G),className:`cursor-pointer rounded-lg p-3 border transition-all ${S?.id===G.id?"border-indigo-500 bg-indigo-50 ring-1 ring-indigo-500":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("div",{className:"font-medium text-gray-800",children:G.name}),S?.id===G.id&&i.jsx(Qge,{className:"w-4 h-4 text-indigo-600"})]})},G.id)),b.length===0&&i.jsx("div",{className:"col-span-2 text-center text-gray-500 py-2 italic",children:"Khng c dng bi no"})]})]},P.id)),g.length===0&&i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cha c bi hc no trong chng ny"})]}),S&&i.jsxs("div",{className:"mt-8 bg-gray-50 rounded-xl p-6 border border-gray-200",children:[i.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center",children:[i.jsx(Hy,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Cu hnh luyn tp: ",S.name]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" kh"}),i.jsx("div",{className:"flex space-x-2",children:["easy","medium","hard"].map(P=>i.jsx("button",{onClick:()=>j(P),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium border transition-colors ${N===P?"bg-white border-indigo-600 text-indigo-600 shadow-sm":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:P==="easy"?"D":P==="medium"?"Trung bnh":"Kh"},P))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S lng cu hi"}),i.jsxs("select",{value:E,onChange:P=>T(Number(P.target.value)),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[i.jsx("option",{value:5,children:"5 cu"}),i.jsx("option",{value:10,children:"10 cu"}),i.jsx("option",{value:15,children:"15 cu"}),i.jsx("option",{value:20,children:"20 cu"})]})]})]}),i.jsx("button",{onClick:D,disabled:F,className:`w-full py-3 rounded-xl font-bold text-white shadow-lg shadow-indigo-200 transition-all transform hover:-translate-y-0.5 ${F?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"}`,children:F?"ang to bi...":"Bt u luyn tp"})]})]}):i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[i.jsx("div",{className:"bg-indigo-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zl,{className:"w-8 h-8 text-indigo-600"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Chn chng  bt u"}),i.jsx("p",{className:"text-gray-500",children:"Vui lng chn mt chng t danh sch bn tri  xem cc bi hc v bt u luyn tp."})]})]})]})]})};class Mxe{static async getProgressReport(e){const{data:t,error:n}=await supabase.from("student_performance").select(`
        *,
        question_type:question_types (
          id,
          name,
          code,
          lesson:lessons (
            id,
            name,
            chapter:chapters (
              id,
              name,
              subject:subjects (
                id,
                name
              )
            )
          )
        )
      `).eq("student_id",e);if(n)throw n;const a=t||[],s={totalQuestionTypes:a.length,masteredCount:a.filter(m=>m.mastery_level==="mastered").length,advancedCount:a.filter(m=>m.mastery_level==="advanced").length,intermediateCount:a.filter(m=>m.mastery_level==="intermediate").length,beginnerCount:a.filter(m=>m.mastery_level==="beginner").length,averageAccuracy:a.length>0?a.reduce((m,v)=>m+v.accuracy_rate,0)/a.length:0},o=new Map;for(const m of a){const v=m.question_type?.lesson?.chapter?.subject;v&&(o.has(v.id)||o.set(v.id,{subjectName:v.name,subjectId:v.id,performances:[]}),o.get(v.id).performances.push(m))}const l=Array.from(o.values()).map(m=>({subjectName:m.subjectName,subjectId:m.subjectId,totalTypes:m.performances.length,masteredTypes:m.performances.filter(v=>v.mastery_level==="mastered").length,averageAccuracy:m.performances.reduce((v,x)=>v+x.accuracy_rate,0)/m.performances.length,progressPercentage:m.performances.filter(v=>v.mastery_level==="mastered").length/m.performances.length*100})),u=a.filter(m=>m.accuracy_rate<60).sort((m,v)=>m.accuracy_rate-v.accuracy_rate).slice(0,10).map(m=>({questionTypeName:m.question_type?.name||"Unknown",accuracy:m.accuracy_rate,attempts:m.total_attempts,lastPracticed:m.last_practiced_at})),c=a.filter(m=>m.mastery_level==="mastered"||m.mastery_level==="advanced").sort((m,v)=>v.accuracy_rate-m.accuracy_rate).slice(0,10).map(m=>({questionTypeName:m.question_type?.name||"Unknown",accuracy:m.accuracy_rate,attempts:m.total_attempts,masteryLevel:m.mastery_level})),{data:d}=await supabase.from("practice_sessions").select("completed_at, score, total_questions").eq("student_id",e).eq("is_completed",!0).gte("completed_at",new Date(Date.now()-336*60*60*1e3).toISOString()).order("completed_at",{ascending:!0}),h=new Map;for(const m of d||[]){const v=m.completed_at.split("T")[0];h.has(v)||h.set(v,{totalScore:0,count:0,questions:0});const x=h.get(v);x.totalScore+=m.score,x.count+=1,x.questions+=m.total_questions}const g=Array.from(h.entries()).map(([m,v])=>({date:m,averageScore:v.totalScore/v.count,questionsAnswered:v.questions}));return{overview:s,bySubject:l,weakAreas:u,strongAreas:c,recentProgress:g}}static async getGoalProgress(e,t){const{data:n,error:a}=await supabase.from("learning_goals").select("*").eq("id",t).eq("student_id",e).single();if(a)throw a;let s=supabase.from("student_performance").select(`
        *,
        question_type:question_types!inner (
          id,
          name,
          lesson:lessons!inner (
            chapter:chapters!inner (
              subject_id
            )
          )
        )
      `).eq("student_id",e);const{data:o}=await s,l=(o||[]).filter(x=>x.question_type?.lesson?.chapter?.subject_id===n.subject_id),u=n.target_mastery_level,c={beginner:0,intermediate:33,advanced:66,mastered:100},d=c[u],h=l.length>0?l.reduce((x,b)=>x+c[b.mastery_level],0)/l.length:0,g=Math.min(h/d*100,100);let m=null,v=!0;if(n.target_date){const x=new Date(n.target_date),b=new Date;m=Math.ceil((x.getTime()-b.getTime())/(1e3*60*60*24));const y=Math.ceil((x.getTime()-new Date(n.created_at).getTime())/(1e3*60*60*24)),S=y>0?(y-m)/y*100:0;v=g>=S}return await supabase.from("learning_goals").update({current_progress:g}).eq("id",t),{goal:n,relatedPerformances:l,overallProgress:g,daysRemaining:m,onTrack:v}}static async getAllGoalsProgress(e){const{data:t,error:n}=await supabase.from("learning_goals").select("*").eq("student_id",e).eq("is_active",!0).order("target_date",{ascending:!0});if(n)throw n;return await Promise.all((t||[]).map(s=>this.getGoalProgress(e,s.id)))}static async createGoal(e,t){const{data:n,error:a}=await supabase.from("learning_goals").insert({student_id:e,title:t.title,description:t.description,subject_id:t.subjectId,chapter_id:t.chapterId,target_mastery_level:t.targetMasteryLevel,target_date:t.targetDate,is_active:!0}).select().single();if(a)throw a;return n.id}static async updateGoal(e,t){const{error:n}=await supabase.from("learning_goals").update(t).eq("id",e);if(n)throw n}static async achieveGoal(e){const{error:t}=await supabase.from("learning_goals").update({is_achieved:!0,achieved_at:new Date().toISOString(),is_active:!1}).eq("id",e);if(t)throw t}static async getMasteryDistribution(e){const{data:t,error:n}=await supabase.from("student_performance").select("mastery_level").eq("student_id",e);if(n)throw n;const a={beginner:0,intermediate:0,advanced:0,mastered:0};for(const s of t||[])a[s.mastery_level]++;return{labels:["Mi hc","Trung bnh","Kh","Thnh tho"],data:[a.beginner,a.intermediate,a.advanced,a.mastered]}}}const Fxe=()=>{const{user:r}=Yr(),[e,t]=he.useState(!0),[n,a]=he.useState(null);he.useEffect(()=>{r&&s()},[r]);const s=async()=>{if(r)try{t(!0);const o=await Mxe.getProgressReport(r.id);a(o)}catch(o){console.error("Error loading progress:",o)}finally{t(!1)}};return e?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang phn tch tin ..."})]})}):n?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:" Tin  hc tp"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Tng dng bi"}),i.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.overview.totalQuestionTypes})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg shadow p-6",children:[i.jsx("div",{className:"text-sm text-green-600 mb-1",children:" thnh tho"}),i.jsx("div",{className:"text-3xl font-bold text-green-600",children:n.overview.masteredCount})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg shadow p-6",children:[i.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Kh"}),i.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.overview.advancedCount})]}),i.jsxs("div",{className:"bg-yellow-50 rounded-lg shadow p-6",children:[i.jsx("div",{className:"text-sm text-yellow-600 mb-1",children:"Trung bnh"}),i.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:n.overview.intermediateCount})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg shadow p-6",children:[i.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Mi hc"}),i.jsx("div",{className:"text-3xl font-bold text-gray-600",children:n.overview.beginnerCount})]})]}),i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg shadow-lg p-8 mb-8 text-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm mb-2 opacity-90",children:"T l ng trung bnh"}),i.jsxs("div",{className:"text-6xl font-bold",children:[n.overview.averageAccuracy.toFixed(1),"%"]}),i.jsx("div",{className:"mt-4 text-sm opacity-90",children:n.overview.averageAccuracy>=80?" Xut sc!":n.overview.averageAccuracy>=60?" Kh tt!":" C gng thm nh!"})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Tin  theo mn hc"})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-6",children:[n.bySubject.map(o=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:o.subjectName}),i.jsxs("p",{className:"text-sm text-gray-600",children:[o.masteredTypes,"/",o.totalTypes," dng  thnh tho"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[o.averageAccuracy.toFixed(1),"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:" chnh xc"})]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:"bg-indigo-600 h-3 rounded-full transition-all",style:{width:`${o.progressPercentage}%`}})})]},o.subjectId)),n.bySubject.length===0&&i.jsx("div",{className:"text-center py-8 text-gray-500",children:"Cha c d liu luyn tp"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Cn ci thin"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cc dng bi cn luyn thm"})]}),i.jsx("div",{className:"p-6",children:n.weakAreas.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"Khng c dng bi yu!"})]}):i.jsx("div",{className:"space-y-4",children:n.weakAreas.map((o,l)=>i.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:o.questionTypeName}),i.jsxs("span",{className:"px-2 py-1 bg-red-200 text-red-800 rounded text-xs font-semibold",children:[o.accuracy.toFixed(0),"%"]})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[o.attempts," ln lm "," ",o.lastPracticed?`Ln cui: ${new Date(o.lastPracticed).toLocaleDateString("vi-VN")}`:"Cha luyn gn y"]})]},l))})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" im mnh"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Cc dng bi bn  thnh tho"})]}),i.jsx("div",{className:"p-6",children:n.strongAreas.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{children:"Hy luyn tp nhiu hn!"})]}):i.jsx("div",{className:"space-y-4",children:n.strongAreas.map((o,l)=>i.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:o.questionTypeName}),i.jsxs("span",{className:"px-2 py-1 bg-green-200 text-green-800 rounded text-xs font-semibold",children:[o.accuracy.toFixed(0),"%"]})]}),i.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[i.jsxs("span",{className:"text-gray-600",children:[o.attempts," ln lm"]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${o.masteryLevel==="mastered"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:o.masteryLevel==="mastered"?"Thnh tho":"Kh"})]})]},l))})})]})]}),n.recentProgress.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow mt-8",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Tin  14 ngy qua"})}),i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"space-y-3",children:n.recentProgress.map(o=>i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-24 text-sm text-gray-600",children:new Date(o.date).toLocaleDateString("vi-VN",{month:"short",day:"numeric"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-6 relative",children:i.jsx("div",{className:"bg-indigo-600 h-6 rounded-full flex items-center justify-end pr-2",style:{width:`${o.averageScore}%`},children:i.jsxs("span",{className:"text-xs text-white font-semibold",children:[o.averageScore.toFixed(0),"%"]})})}),i.jsxs("span",{className:"text-sm text-gray-600 w-20",children:[o.questionsAnswered," cu"]})]})})]},o.date))})})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:"Khng c d liu"})},Oxe=({video:r,onProgress:e,startPosition:t=0,autoplay:n=!1})=>{const[a,s]=he.useState(""),[o,l]=he.useState("");he.useEffect(()=>{const d=u(r);d?(s(d),l("")):l("URL video khng hp l")},[r]);const u=d=>{const h=d.video_id;if(!h)return"";switch(d.video_type){case"youtube":const g=new URLSearchParams({enablejsapi:"1",origin:window.location.origin,...t>0&&{start:Math.floor(t).toString()},...n&&{autoplay:"1"}});return`https://www.youtube.com/embed/${h}?${g.toString()}`;case"vimeo":const m=new URLSearchParams({...n&&{autoplay:"1"}}),v=t>0?`#t=${Math.floor(t)}s`:"";return`https://player.vimeo.com/video/${h}?${m.toString()}${v}`;default:return""}},c=d=>{if(!d)return"";const h=Math.floor(d/3600),g=Math.floor(d%3600/60),m=d%60;return h>0?`${h}:${g.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`:`${g}:${m.toString().padStart(2,"0")}`};return o?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsx("p",{className:"text-red-700 text-sm",children:o}),i.jsxs("p",{className:"text-gray-600 text-xs mt-1",children:["URL: ",r.video_url]})]}):a?i.jsxs("div",{className:"space-y-2",children:[r.title&&i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),r.duration_seconds&&i.jsx("span",{className:"text-sm text-gray-500 ml-2 flex-shrink-0",children:c(r.duration_seconds)})]}),r.description&&i.jsx("p",{className:"text-sm text-gray-600",children:r.description}),i.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-lg bg-black",style:{paddingBottom:"56.25%"},children:i.jsx("iframe",{src:a,title:r.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"absolute top-0 left-0 w-full h-full",style:{border:0}})}),i.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:i.jsxs("a",{href:r.video_url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-indigo-600 transition-colors flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Xem trn ",r.video_type==="youtube"?"YouTube":"Vimeo"]})})]}):i.jsx("div",{className:"bg-gray-100 rounded-lg aspect-video flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-600",children:"ang ti video..."})]})})},Bxe=({documents:r})=>{if(r.length===0)return null;const e=a=>{switch(a){case"pdf":return i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z"})});case"docx":return i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})});case"xlsx":return i.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})});case"pptx":return i.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})});default:return i.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}},t=a=>a?a<1024?`${a} KB`:`${(a/1024).toFixed(1)} MB`:"",n=async a=>{a.file_url&&(await mn.incrementDownloadCount(a.id),window.open(a.file_url,"_blank"))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ti liu hc tp"]}),i.jsx("div",{className:"grid gap-3",children:r.map(a=>i.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-indigo-300 hover:shadow-md transition-all",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:e(a.document_type)}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("h4",{className:"font-medium text-gray-900 truncate",children:a.title}),a.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:a.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"uppercase",children:a.document_type}),a.file_size_kb&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsx("span",{children:t(a.file_size_kb)})]}),a.download_count>0&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:""}),i.jsxs("span",{children:[a.download_count," lt ti"]})]})]})]}),a.file_url&&i.jsxs("button",{onClick:()=>n(a),className:"flex-shrink-0 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Ti xung"]})]})},a.id))})]})},Rxe=({content:r})=>{const e=he.useRef([]);he.useEffect(()=>{e.current.forEach(s=>{s&&(n(s),t(s))})},[r]);const t=s=>{try{window.renderMathInElement&&window.renderMathInElement(s,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1,strict:!1,trust:!1})}catch(o){console.error("KaTeX auto-render error:",o)}},n=s=>{s.querySelectorAll("p, h1, h2, h3, h4, h5, h6, div, blockquote").forEach(l=>{const u=l.textContent?.trim().toLowerCase()||"",c=l;c.classList.contains("special-block")||(u.startsWith("nh ngha")||u.startsWith("/n:")||u.startsWith("nh ngha:")?a(c,"definition"," nh ngha"):u.startsWith("nh l")||u.startsWith("/l:")||u.startsWith("nh l:")?a(c,"theorem"," nh l"):u.startsWith("v d")||u.startsWith("vd:")||u.startsWith("v d:")?a(c,"example"," V d"):u.startsWith("ghi ch")||u.startsWith("lu ")||u.startsWith("ch ")||u.startsWith("note:")?a(c,"note"," Ghi ch"):u.startsWith("tnh cht")||u.startsWith("t/c:")?a(c,"property"," Tnh cht"):(u.startsWith("h qu")||u.startsWith("h/q:"))&&a(c,"corollary"," H qu"))})},a=(s,o,l)=>{const u=document.createElement("div");u.className=`special-block special-block-${o} mb-6 rounded-xl border-l-4 overflow-hidden shadow-sm`;const c={definition:"border-blue-500 bg-blue-50",theorem:"border-purple-500 bg-purple-50",example:"border-green-500 bg-green-50",note:"border-yellow-500 bg-yellow-50",property:"border-indigo-500 bg-indigo-50",corollary:"border-pink-500 bg-pink-50"};u.className+=" "+c[o];const d=document.createElement("div");d.className="px-4 py-2 font-bold text-sm flex items-center gap-2";const h={definition:"bg-blue-100 text-blue-800",theorem:"bg-purple-100 text-purple-800",example:"bg-green-100 text-green-800",note:"bg-yellow-100 text-yellow-800",property:"bg-indigo-100 text-indigo-800",corollary:"bg-pink-100 text-pink-800"};d.className+=" "+h[o],d.textContent=l;const g=document.createElement("div");g.className="px-4 py-3";const m=s.cloneNode(!0),v=m.textContent||"",x=["nh ngha:","/n:","nh l:","/l:","v d:","vd:","ghi ch:","lu :","ch :","note:","tnh cht:","t/c:","h qu:","h/q:"];let b=m.innerHTML;x.forEach(y=>{const S=new RegExp(`^${y}\\s*`,"i");v.toLowerCase().startsWith(y)&&(b=b.replace(S,""))}),g.innerHTML=b,u.appendChild(d),u.appendChild(g),s.parentNode?.replaceChild(u,s)};return r.length===0?null:i.jsx("div",{className:"space-y-6",children:r.map((s,o)=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.title&&i.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-6 pb-3 border-b-2 border-red-200",children:s.title}),i.jsx("div",{ref:l=>e.current[o]=l,className:`content-body prose prose-lg max-w-none
              prose-headings:text-gray-900 prose-headings:font-bold prose-headings:mt-6 prose-headings:mb-4
              prose-h1:text-3xl prose-h1:mt-8 prose-h1:mb-6 prose-h1:text-red-600
              prose-h2:text-2xl prose-h2:mt-6 prose-h2:mb-4 prose-h2:text-red-600
              prose-h3:text-xl prose-h3:mt-5 prose-h3:mb-3 prose-h3:text-gray-800
              prose-h4:text-lg prose-h4:mt-4 prose-h4:mb-2 prose-h4:text-gray-800
              prose-h5:text-base prose-h5:mt-3 prose-h5:mb-2 prose-h5:text-gray-800 prose-h5:font-semibold
              prose-h6:text-sm prose-h6:mt-3 prose-h6:mb-2 prose-h6:text-gray-700 prose-h6:font-semibold
              prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-4 prose-p:text-base
              prose-a:text-indigo-600 prose-a:no-underline hover:prose-a:underline prose-a:transition-colors
              prose-strong:text-gray-900 prose-strong:font-bold
              prose-b:text-gray-900 prose-b:font-bold
              prose-em:text-gray-800 prose-em:italic
              prose-i:text-gray-800 prose-i:italic
              prose-u:underline
              prose-s:line-through
              prose-ul:list-disc prose-ul:pl-6 prose-ul:mb-4 prose-ul:space-y-2
              prose-ol:list-decimal prose-ol:pl-6 prose-ol:mb-4 prose-ol:space-y-2
              prose-li:text-gray-700 prose-li:leading-relaxed
              prose-blockquote:border-l-4 prose-blockquote:border-indigo-500 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:bg-gray-50 prose-blockquote:py-3 prose-blockquote:my-4 prose-blockquote:rounded-r
              prose-code:bg-gray-100 prose-code:px-2 prose-code:py-1 prose-code:rounded prose-code:text-sm prose-code:font-mono prose-code:text-gray-800
              prose-pre:bg-gray-900 prose-pre:text-gray-100 prose-pre:p-4 prose-pre:rounded-lg prose-pre:overflow-x-auto prose-pre:my-4
              prose-img:rounded-lg prose-img:shadow-md prose-img:my-6 prose-img:mx-auto
              prose-table:border-collapse prose-table:w-full prose-table:my-6 prose-table:border prose-table:border-gray-300
              prose-thead:bg-gray-100
              prose-th:bg-gray-100 prose-th:p-3 prose-th:text-left prose-th:font-bold prose-th:border prose-th:border-gray-300
              prose-td:p-3 prose-td:border prose-td:border-gray-200
              prose-tr:border-b prose-tr:border-gray-200
              prose-hr:my-8 prose-hr:border-gray-300
              [&_br]:block [&_br]:mb-2`,style:{wordBreak:"break-word",overflowWrap:"break-word"},dangerouslySetInnerHTML:{__html:s.content}})]},s.id))})},Lxe=({exercise:r})=>{const[e,t]=he.useState({}),[n,a]=he.useState(0),[s,o]=he.useState("");if(!r.questions||r.questions.length===0)return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),r.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r.description}),i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-4",children:i.jsx("p",{className:"text-yellow-800 text-sm",children:"Bi tp ny cha c cu hi no."})})]});const l=r.questions[n],u=e[n],c=l.type||"mcq",h=c==="sa"?[]:(c==="msq"?[{key:"a",value:l.option_a||""},{key:"b",value:l.option_b||""},{key:"c",value:l.option_c||""},{key:"d",value:l.option_d||""}]:[{key:"A",value:l.option_a||""},{key:"B",value:l.option_b||""},{key:"C",value:l.option_c||""},{key:"D",value:l.option_d||""}]).filter(I=>I.value),g=R=>{if(u)return;const I=(l.correct_option||"").trim().toUpperCase(),U=R.toUpperCase()===I;t({...e,[n]:{questionIndex:n,selectedOption:R,isCorrect:U}})},m=R=>{if(u)return;const I=e[n]?.selectedOptions||[];let O;I.includes(R)?O=I.filter(U=>U!==R):O=[...I,R],t({...e,[n]:{questionIndex:n,selectedOptions:O,isCorrect:!1}})},v=()=>{const R=e[n]?.selectedOptions||[],I=(l.correct_option||"").split(",").map(H=>H.trim().toLowerCase()),O=[...R].sort().join(","),U=[...I].sort().join(","),D=O===U;t({...e,[n]:{...e[n],isCorrect:D}})},x=()=>{if(!s.trim())return;const R=(l.correct_option||"").trim().toLowerCase(),O=s.trim().toLowerCase()===R;t({...e,[n]:{questionIndex:n,textAnswer:s,isCorrect:O}})},b=()=>{n<r.questions.length-1&&(a(n+1),o(e[n+1]?.textAnswer||""))},y=()=>{n>0&&(a(n-1),o(e[n-1]?.textAnswer||""))},S=R=>{if(!u)return c==="msq"?e[n]?.selectedOptions?.includes(R)?"border-indigo-400 bg-indigo-50 ring-2 ring-indigo-200":"border-gray-200 bg-white hover:bg-gray-50 hover:border-gray-300":"border-gray-200 bg-white hover:bg-indigo-50 hover:border-indigo-300 cursor-pointer";if(c==="msq"){const H=(l.correct_option||"").split(",").map(G=>G.trim().toLowerCase()).includes(R.toLowerCase()),P=u.selectedOptions?.includes(R);return P&&H?"border-green-400 bg-green-50 ring-2 ring-green-200":P&&!H?"border-red-400 bg-red-50 ring-2 ring-red-200":H?"border-green-400 bg-green-50 ring-2 ring-green-200":"border-gray-200 bg-gray-50"}const I=(l.correct_option||"").trim().toUpperCase(),O=R.toUpperCase()===I,U=R===u.selectedOption;return U&&u.isCorrect?"border-green-400 bg-green-50 ring-2 ring-green-200":U&&!u.isCorrect?"border-red-400 bg-red-50 ring-2 ring-red-200":O?"border-green-400 bg-green-50 ring-2 ring-green-200":"border-gray-200 bg-gray-50"},_=()=>{const R="px-4 py-2 rounded-full text-sm font-medium";switch(c){case"mcq":return i.jsx("span",{className:`${R} bg-blue-100 text-blue-800`,children:"Trc nghim"});case"msq":return i.jsx("span",{className:`${R} bg-purple-100 text-purple-800`,children:"ng - Sai"});case"sa":return i.jsx("span",{className:`${R} bg-amber-100 text-amber-800`,children:"Tr li ngn"});default:return i.jsx("span",{className:`${R} bg-indigo-100 text-indigo-800`,children:"Trc nghim"})}},N=r.questions.length,j=Object.keys(e).filter(R=>e[parseInt(R)].isCorrect!==void 0).length,E=Object.values(e).filter(R=>R.isCorrect).length,T=j/N*100,F=!u&&(e[n]?.selectedOptions?.length||0)>0,A=!u&&s.trim().length>0;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.title}),r.description&&i.jsx("p",{className:"text-gray-600",children:r.description})]}),_()]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[i.jsxs("span",{children:["Tin : ",j,"/",N," cu"]}),i.jsxs("span",{className:"text-green-600 font-medium",children:[E," ng"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${T}%`}})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border-2 border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-600 text-white font-bold rounded-full flex items-center justify-center text-lg",children:n+1}),i.jsxs("div",{className:"flex-grow",children:[i.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Cu hi ",n+1,"/",N]}),i.jsx("div",{className:"text-lg font-semibold text-gray-900",children:i.jsx(ir,{content:l.question_text||l.question})})]})]}),c!=="sa"&&i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-6",children:h.map(R=>i.jsx("button",{onClick:()=>c==="msq"?m(R.key):g(R.key),disabled:!!u,className:`p-4 border-2 rounded-lg transition-all text-left ${S(R.key)} ${u?"":"active:scale-[0.98]"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("strong",{className:"font-bold text-gray-700 flex-shrink-0",children:[R.key,c==="msq"?")":"."]}),i.jsx("div",{className:"flex-1 text-gray-800",children:i.jsx(ir,{content:R.value,inline:!0})}),u&&i.jsxs("div",{className:"flex-shrink-0",children:[c==="mcq"&&R.key===u.selectedOption&&u.isCorrect&&i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c==="mcq"&&R.key===u.selectedOption&&!u.isCorrect&&i.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),c==="mcq"&&R.key.toUpperCase()===(l.correct_option||"").trim().toUpperCase()&&R.key!==u.selectedOption&&i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c==="msq"&&i.jsxs(i.Fragment,{children:[(l.correct_option||"").split(",").map(I=>I.trim().toLowerCase()).includes(R.key.toLowerCase())&&i.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u.selectedOptions?.includes(R.key)&&!(l.correct_option||"").split(",").map(I=>I.trim().toLowerCase()).includes(R.key.toLowerCase())&&i.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]})},R.key))}),c==="msq"&&!u&&i.jsx("div",{className:"mb-6",children:i.jsx("button",{onClick:v,disabled:!F,className:"w-full px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Kim tra p n"})}),c==="sa"&&i.jsxs("div",{className:"mb-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cu tr li ca bn:"}),i.jsx("input",{type:"text",value:s,onChange:R=>o(R.target.value),disabled:!!u,placeholder:"Nhp cu tr li...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),!u&&i.jsx("button",{onClick:x,disabled:!A,className:"w-full px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Kim tra p n"}),u&&i.jsxs("div",{className:`p-4 rounded-lg border-2 ${u.isCorrect?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:[i.jsx("p",{className:`font-semibold mb-2 ${u.isCorrect?"text-green-900":"text-red-900"}`,children:u.isCorrect?" Chnh xc!":" Cha chnh xc"}),i.jsxs("p",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium",children:"Cu tr li ca bn:"})," ",u.textAnswer]}),!u.isCorrect&&i.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:[i.jsx("span",{className:"font-medium",children:"p n ng:"})," ",i.jsx(ir,{content:l.correct_option,inline:!0})]})]})]}),u&&l.explanation&&i.jsx("div",{className:`p-4 rounded-lg border-l-4 mb-6 ${u.isCorrect?"bg-green-50 border-green-500":"bg-blue-50 border-blue-500"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("svg",{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${u.isCorrect?"text-green-600":"text-blue-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`font-semibold mb-2 ${u.isCorrect?"text-green-900":"text-blue-900"}`,children:"Gii thch:"}),i.jsx("div",{className:u.isCorrect?"text-green-800":"text-blue-800",children:i.jsx(ir,{content:l.explanation})})]})]})}),i.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[i.jsxs("button",{onClick:y,disabled:n===0,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Cu trc"]}),i.jsxs("div",{className:"text-sm text-gray-500 font-medium",children:[n+1," / ",N]}),i.jsxs("button",{onClick:b,disabled:n===N-1,className:"flex items-center gap-2 px-4 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["Cu tip",i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Danh sch cu hi"}),i.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-10 gap-2",children:r.questions.map((R,I)=>{const O=e[I];return i.jsx("button",{onClick:()=>{a(I),o(e[I]?.textAnswer||"")},className:`aspect-square flex items-center justify-center rounded-lg font-semibold text-sm transition-all ${n===I?"bg-indigo-600 text-white ring-2 ring-indigo-300 scale-110":O?O.isCorrect?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:I+1},I)})})]}),j===N&&i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 rounded-xl shadow-lg p-8 text-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 rounded-full mb-4",children:i.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-3xl font-bold mb-2",children:"Hon thnh!"}),i.jsxs("p",{className:"text-indigo-100 mb-6",children:["Bn  hon thnh tt c ",N," cu hi"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto mb-6",children:[i.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold",children:N}),i.jsx("div",{className:"text-sm text-indigo-100",children:"Tng cu"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold text-green-300",children:E}),i.jsx("div",{className:"text-sm text-indigo-100",children:"ng"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur rounded-lg p-4",children:[i.jsx("div",{className:"text-3xl font-bold text-red-300",children:N-E}),i.jsx("div",{className:"text-sm text-indigo-100",children:"Sai"})]})]}),i.jsxs("div",{className:"text-6xl font-bold mb-2",children:[Math.round(E/N*100),"%"]}),i.jsx("div",{className:"text-indigo-100",children:"T l ng"})]})})]})},Ixe=({lessonId:r})=>{const[e,t]=he.useState(null),[n,a]=he.useState(!0),[s,o]=he.useState(""),[l,u]=he.useState({type:"video",index:0}),[c,d]=he.useState(typeof window<"u"&&window.innerWidth<1024),[h,g]=he.useState({previous:null,next:null}),[m,v]=he.useState([]),{user:x}=Yr(),b=Vn();he.useEffect(()=>{y()},[r]);const y=async()=>{try{a(!0),o("");const T=_n.parseLessonIdFromSlug(r)||r;let F=await _n.getLessonById(T);if(F||(F=await _n.getLessonBySlug(r)),!F){o("Khng tm thy bi hc");return}if(console.log("Loaded lesson data:",{name:F.name,videosCount:F.videos?.length||0,documentsCount:F.documents?.length||0,contentCount:F.content?.length||0,exercisesCount:F.exercises?.length||0}),t(F),F.videos&&F.videos.length>0?u({type:"video",index:0}):F.content&&F.content.length>0?u({type:"content",index:0}):F.documents&&F.documents.length>0?u({type:"document",index:0}):F.exercises&&F.exercises.length>0&&u({type:"exercise",index:0}),x&&x.role==="student")try{await _n.getOrCreateProgress(F.id)}catch(I){console.warn("Could not create progress (user may not be logged in):",I)}const A=await _n.getAdjacentLessons(F.id);g(A);const R=await _n.getLessonsInSameChapter(F.id);v(R)}catch(T){console.error("Error loading lesson:",T),o("C li khi ti bi hc")}finally{a(!1)}},S=()=>{if(!e)return null;switch(l.type){case"video":const T=e.videos?.[l.index];return T?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:i.jsx(Oxe,{video:T})}):i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Khng c video"});case"document":return i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:i.jsx(Bxe,{documents:e.documents})});case"content":const F=e.content?.[l.index];return F?i.jsx(Rxe,{content:[F]}):i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Khng c ni dung"});case"exercise":const A=e.exercises?.[l.index];return A?i.jsx(Lxe,{exercise:A}):i.jsx("div",{className:"text-center py-12 text-gray-500",children:"Khng c bi tp"});default:return null}};if(n)return i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti bi hc..."})]})});if(s||!e)return i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[i.jsx("svg",{className:"w-12 h-12 text-red-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("p",{className:"text-red-700 font-medium",children:s||"Khng th ti bi hc"})]});const _=e.videos&&e.videos.length>0,N=e.documents&&e.documents.length>0,j=e.content&&e.content.length>0,E=e.exercises&&e.exercises.length>0;return i.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[i.jsxs("div",{className:`flex-grow w-full ${c?"":"lg:w-[70%]"} transition-all duration-300`,children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.name}),e.description&&i.jsx("p",{className:"text-gray-600 mb-4",children:e.description}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[e.difficulty_level&&i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.difficulty_level==="easy"?"bg-green-100 text-green-800":e.difficulty_level==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.difficulty_level==="easy"?"D":e.difficulty_level==="medium"?"Trung bnh":"Kh"}),e.duration_minutes&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.duration_minutes," pht"]}),e.view_count>0&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.view_count," lt xem"]})]})]}),S(),c&&(h.previous||h.next)&&i.jsxs("div",{className:"mt-8 flex justify-between items-center border-t border-gray-200 pt-6",children:[h.previous?i.jsxs("button",{onClick:()=>{const T=_n.generateLessonSlug(h.previous.name,h.previous.id);b(`/hoc-online/${T}`)},className:"flex items-center gap-2 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Bi trc"}),i.jsx("div",{className:"text-sm font-medium line-clamp-1",children:h.previous.name})]})]}):i.jsx("div",{}),h.next?i.jsxs("button",{onClick:()=>{const T=_n.generateLessonSlug(h.next.name,h.next.id);b(`/hoc-online/${T}`)},className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-indigo-100",children:"Bi tip theo"}),i.jsx("div",{className:"text-sm font-medium line-clamp-1",children:h.next.name})]}),i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):i.jsx("div",{})]}),m.length>1&&i.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Cc bi hc cng chng"})]}),i.jsx("div",{className:"space-y-3",children:m.map((T,F)=>i.jsx("button",{onClick:()=>{if(!T.isCurrent){const A=_n.generateLessonSlug(T.name,T.id);b(`/hoc-online/${A}`)}},disabled:T.isCurrent,className:`w-full text-left p-4 rounded-lg border-2 transition-all ${T.isCurrent?"bg-indigo-50 border-indigo-500 cursor-default":"bg-white border-gray-200 hover:border-indigo-300 hover:shadow-md"}`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold ${T.isCurrent?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600"}`,children:F+1}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("div",{className:"flex items-start justify-between gap-2",children:i.jsxs("h4",{className:`font-semibold text-base line-clamp-2 ${T.isCurrent?"text-indigo-900":"text-gray-900"}`,children:[T.name,T.isCurrent&&i.jsx("span",{className:"ml-2 text-xs bg-indigo-600 text-white px-2 py-1 rounded-full",children:"ang hc"})]})}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[T.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{children:[T.duration_minutes," pht"]})]}),T.view_count>0&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),i.jsxs("span",{children:[T.view_count," lt xem"]})]})]})]}),!T.isCurrent&&i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},T.id))})]})]}),!c&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>d(!0)}),i.jsx("div",{className:`
            fixed lg:sticky top-0 right-0 h-screen lg:h-auto
            w-[85%] sm:w-[400px] lg:w-[30%]
            z-50 lg:z-auto
            lg:top-4 flex-shrink-0
            transform transition-transform duration-300
            ${c?"translate-x-full lg:translate-x-0":"translate-x-0"}
          `,children:i.jsxs("div",{className:"bg-white rounded-none lg:rounded-lg shadow-lg border-l lg:border border-gray-200 overflow-hidden h-full lg:h-auto",children:[i.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 p-4 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-lg",children:"Ni dung kha hc"}),i.jsx("button",{onClick:()=>d(!0),className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Thu gn",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsxs("div",{className:"h-[calc(100vh-4rem)] lg:max-h-[calc(100vh-12rem)] overflow-y-auto",children:[_&&i.jsxs("div",{className:"border-b border-gray-200",children:[i.jsxs("div",{className:"p-4 bg-gray-50 font-semibold text-red-700 flex items-center gap-2",children:[i.jsxs("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Video bi ging (",e.videos.length,")"]}),i.jsx("div",{className:"divide-y divide-gray-100",children:e.videos.map((T,F)=>i.jsx("button",{onClick:()=>{u({type:"video",index:F}),window.innerWidth<1024&&d(!0)},className:`w-full text-left p-4 hover:bg-indigo-50 transition-colors ${l.type==="video"&&l.index===F?"bg-indigo-50 border-l-4 border-indigo-600":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l.type==="video"&&l.index===F?"bg-indigo-600 text-white":"bg-gray-200 text-gray-600"}`,children:F+1})}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:T.title}),T.duration_seconds&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.floor(T.duration_seconds/60)," pht"]})]})]})},T.id))})]}),j&&i.jsxs("div",{className:"border-b border-gray-200",children:[i.jsxs("div",{className:"p-4 bg-gray-50 font-semibold text-red-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ni dung (",e.content.length,")"]}),i.jsx("div",{className:"divide-y divide-gray-100",children:e.content.map((T,F)=>i.jsx("button",{onClick:()=>{u({type:"content",index:F}),window.innerWidth<1024&&d(!0)},className:`w-full text-left p-4 hover:bg-purple-50 transition-colors ${l.type==="content"&&l.index===F?"bg-purple-50 border-l-4 border-purple-600":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l.type==="content"&&l.index===F?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:F+1})}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:T.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:T.content_type})]})]})},T.id))})]}),N&&i.jsxs("div",{className:"border-b border-gray-200",children:[i.jsxs("div",{className:"p-4 bg-gray-50 font-semibold text-red-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ti liu (",e.documents.length,")"]}),i.jsxs("button",{onClick:()=>{u({type:"document",index:0}),window.innerWidth<1024&&d(!0)},className:`w-full text-left p-4 hover:bg-green-50 transition-colors ${l.type==="document"?"bg-green-50 border-l-4 border-green-600":""}`,children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm",children:"Xem tt c ti liu"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.documents.length," ti liu"]})]})]}),E&&i.jsxs("div",{className:"border-b border-gray-200",children:[i.jsxs("div",{className:"p-4 bg-gray-50 font-semibold text-red-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Bi tp & Trc nghim (",e.exercises.length,")"]}),i.jsx("div",{className:"divide-y divide-gray-100",children:e.exercises.map((T,F)=>i.jsx("button",{onClick:()=>{u({type:"exercise",index:F}),window.innerWidth<1024&&d(!0)},className:`w-full text-left p-4 hover:bg-orange-50 transition-colors ${l.type==="exercise"&&l.index===F?"bg-orange-50 border-l-4 border-orange-600":""}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${l.type==="exercise"&&l.index===F?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:F+1})}),i.jsxs("div",{className:"flex-grow min-w-0",children:[i.jsx("p",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:T.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.exercise_type==="quiz"?"Trc nghim":T.exercise_type==="practice"?"Thc hnh":"Th thch"})]})]})},T.id))})]})]})]})})]}),c&&i.jsxs("button",{onClick:()=>d(!1),className:"fixed right-4 top-20 bg-red-600 text-white px-4 py-3 rounded-l-xl shadow-lg hover:bg-red-700 transition-all z-40 flex items-center gap-2",title:"Hin menu ni dung",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),i.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"Ni dung"})]})]})},H5=()=>{const{lessonId:r}=Cf(),e=Vn(),[t,n]=he.useState([]),[a,s]=he.useState([]),[o,l]=he.useState([]),[u,c]=he.useState([]),[d,h]=he.useState(""),[g,m]=he.useState(""),[v,x]=he.useState(r||""),[b,y]=he.useState(!0);he.useEffect(()=>{S(),_()},[]),he.useEffect(()=>{d?(N(d),j(d)):(s([]),l([]))},[d]),he.useEffect(()=>{g?E(g):d&&j(d)},[g]);const S=async()=>{const F=setTimeout(()=>{console.warn(" loadSubjects timeout, clearing loading state"),y(!1)},1e4);try{y(!0);const A=await Jm.getSubjects();n(A)}catch(A){console.error("Error loading subjects:",A)}finally{clearTimeout(F),y(!1)}},_=async()=>{const F=setTimeout(()=>{console.warn(" loadRecentLessons timeout")},1e4);try{const A=await _n.getRecentLessons(4);clearTimeout(F),c(A||[])}catch(A){clearTimeout(F),console.error("Error loading recent lessons:",A)}},N=async F=>{try{const A=await Jm.getChaptersBySubject(F);s(A)}catch(A){console.error("Error loading chapters:",A)}},j=async F=>{try{const A=await _n.getPublishedLessonsBySubject(F);l(A)}catch(A){console.error("Error loading lessons by subject:",A)}},E=async F=>{try{const A=await _n.getPublishedLessonsByChapter(F);l(A)}catch(A){console.error("Error loading lessons by chapter:",A)}},T=F=>{x(F.id);const A=_n.generateLessonSlug(F.name,F.id);e(`/hoc-online/${A}`)};return r&&v?i.jsx("div",{className:"py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("button",{onClick:()=>{x(""),e("/hoc-online")},className:"mb-6 flex items-center gap-2 text-indigo-600 hover:text-indigo-700 font-medium",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Quay li danh sch bi hc"]}),i.jsx(Ixe,{lessonId:r})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/50 py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl mb-6 shadow-lg",children:i.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),i.jsx("h1",{className:"text-5xl font-extrabold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:"Hc Ton Online"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Hc Ton THPT online y  nht vi video bi ging v ti liu cht lng cao"})]}),u.length>0&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-600 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bi hc mi nht"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(F=>i.jsxs("button",{onClick:()=>T(F),className:"group relative bg-white rounded-xl overflow-hidden shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-left border border-gray-100 hover:border-indigo-200",children:[i.jsxs("div",{className:"relative h-40 overflow-hidden bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:[F.thumbnail_url?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:F.thumbnail_url,alt:F.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{className:"w-16 h-16 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-3",children:i.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M8 5v14l11-7z"})})})}),i.jsx("div",{className:"absolute top-2 left-2",children:i.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-bold rounded-full",children:"MI"})})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-sm text-gray-900 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:F.name}),F.description&&i.jsx("div",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:i.jsx(ir,{content:F.description,inline:!0})}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:F.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{children:_n.formatDuration(F.duration_minutes)})]})})]}),i.jsx("div",{className:"absolute inset-0 rounded-xl ring-2 ring-transparent group-hover:ring-indigo-400 transition-all duration-300 pointer-events-none"})]},F.id))})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Chn kha hc"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"group",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Mn hc"]}),i.jsxs("select",{value:d,onChange:F=>{h(F.target.value),m(""),x("")},className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:bg-white transition-all appearance-none cursor-pointer hover:border-indigo-300",children:[i.jsx("option",{value:"",children:"-- Chn mn hc --"}),t.map(F=>i.jsx("option",{value:F.id,children:F.name},F.id))]})]}),i.jsxs("div",{className:"group",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Chng ",i.jsx("span",{className:"text-xs text-gray-500",children:"(ty chn)"})]}),i.jsxs("select",{value:g,onChange:F=>{m(F.target.value),x("")},disabled:!d,className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 focus:bg-white transition-all appearance-none cursor-pointer hover:border-purple-300 disabled:bg-gray-100 disabled:cursor-not-allowed disabled:hover:border-gray-200",children:[i.jsx("option",{value:"",children:"-- Tt c chng --"}),a.map(F=>i.jsx("option",{value:F.id,children:F.name},F.id))]})]}),i.jsxs("div",{className:"group",children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Chn nhanh bi hc"]}),i.jsxs("select",{value:v,onChange:F=>{const A=o.find(R=>R.id===F.target.value);A&&T(A)},disabled:o.length===0,className:"w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500 focus:border-pink-500 focus:bg-white transition-all appearance-none cursor-pointer hover:border-pink-300 disabled:bg-gray-100 disabled:cursor-not-allowed disabled:hover:border-gray-200",children:[i.jsx("option",{value:"",children:"-- Chn bi hc --"}),o.map(F=>i.jsx("option",{value:F.id,children:F.name},F.id))]})]})]})]}),d&&o.length>0&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Danh sch bi hc"}),g&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ang lc theo chng"})]})]}),g&&i.jsxs("button",{onClick:()=>m(""),className:"px-5 py-2.5 text-sm bg-gradient-to-r from-gray-100 to-gray-200 hover:from-gray-200 hover:to-gray-300 text-gray-700 rounded-xl transition-all flex items-center gap-2 font-medium shadow-sm hover:shadow",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"B lc chng"]})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(F=>i.jsxs("button",{onClick:()=>T(F),className:"group relative bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-left border border-gray-100 hover:border-indigo-200",children:[i.jsxs("div",{className:"relative h-48 overflow-hidden bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500",children:[F.thumbnail_url?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:F.thumbnail_url,alt:F.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsx("svg",{className:"w-20 h-20 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),F.difficulty_level&&i.jsx("div",{className:"absolute top-3 right-3",children:i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold backdrop-blur-sm ${_n.getDifficultyColor(F.difficulty_level)}`,children:_n.getDifficultyText(F.difficulty_level)})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:i.jsx("svg",{className:"w-12 h-12 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),i.jsxs("div",{className:"p-5",children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:F.name}),F.description&&i.jsx("div",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:i.jsx(ir,{content:F.description,inline:!0})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[F.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{children:_n.formatDuration(F.duration_minutes)})]}),F.view_count>0&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),i.jsxs("span",{children:[F.view_count," lt xem"]})]})]}),i.jsxs("div",{className:"mt-4 flex items-center text-indigo-600 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("span",{children:"Bt u hc"}),i.jsx("svg",{className:"w-4 h-4 ml-1 transform group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),i.jsx("div",{className:"absolute inset-0 rounded-2xl ring-2 ring-transparent group-hover:ring-indigo-400 transition-all duration-300 pointer-events-none"})]},F.id))})]}),d&&o.length===0&&i.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl shadow-inner p-16 text-center border-2 border-dashed border-gray-300",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-gray-300 to-gray-400 rounded-full mb-6",children:i.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Cha c bi hc no"}),i.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:g?"Chng ny cha c bi hc c cng b. Vui lng chn chng khc hoc b chn  xem tt c!":"Mn hc ny cha c bi hc c cng b. Vui lng quay li sau!"}),g&&i.jsx("button",{onClick:()=>m(""),className:"mt-6 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-medium shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5",children:"Xem tt c bi hc"})]})]})})},zxe=()=>{he.useEffect(()=>{window.scrollTo(0,0)},[]);const r=[{id:"free",title:"T Do (Khch vng lai)",icon:"",color:"blue",content:[{items:["Truy cp trang ch  xem tng quan v h thng.","Xem danh sch cc tnh nng cng khai.","Th lm cc bi thi mu m khng cn ng nhp (nu c).","c tin tc v thng bo mi nht.","Lin h vi ban qun tr qua trang Lin h."]}]},{id:"student",title:"Hc Sinh",icon:"",color:"green",content:[{items:["ng nhp  truy cp y  tnh nng.","Tham gia thi online vi b  phong ph.","Xem kt qu thi chi tit v lch s lm bi.","S dng tnh nng Luyn tp c nhn  ci thin im yu.","Tham gia cng ng hc tp tho lun v chia s.","Theo di tin  hc tp qua biu  thng k."]}]},{id:"teacher",title:"Gio Vin",icon:"",color:"purple",content:[{subtitle:"1. Ngn hng cu hi",items:['Truy cp "Ngn hng cu hi" t menu hoc trang ch.','Thm cu hi mi: Chn "To cu hi", nhp ni dung, p n v li gii chi tit.','Import cu hi: S dng tnh nng "Nhp t Word/Excel"  ti ln nhiu cu hi cng lc.',"Sa/Xa cu hi: Tm kim cu hi v thc hin chnh sa hoc xa nu cn.","Duyt cu hi: Kim tra li cc cu hi trc khi a vo  thi."]},{subtitle:"2. Lm  thi (To )",items:['Truy cp "To  thi" hoc s dng AI Generator.',"Chn ngun cu hi: T ngn hng c nhn hoc ngn hng cng khai.","Cu hnh  thi: t tn, thi gian lm bi, mt khu (nu c), s lng cu hi.","Ma trn : Chn s lng cu  cc mc  (Nhn bit, Thng hiu, Vn dng, Vn dng cao).","Xut bn: Lu  thi v chia s m  hoc link cho hc sinh."]},{subtitle:"3. im s hc sinh & Bo co",items:['Truy cp "Kt qu hc sinh"  xem danh sch bi thi  np.',"Xem chi tit: Nhp vo tn hc sinh  xem chi tit bi lm, cu ng/sai.","Ph im: Xem biu  phn b im s ca c lp/k thi.","Xut bo co: Ti xung file Excel kt qu  lu tr hoc np bo co."]}]},{id:"admin",title:"Admin (Qun tr vin)",icon:"",color:"orange",content:[{items:["Qun l ton b ngi dng (Gio vin, Hc sinh).","Cu hnh h thng v cc tham s chung.","Qun l tin tc, thng bo hin th trn trang ch.","Theo di thng k ton h thng.","Ph duyt v qun l ni dung ng gp.","H tr k thut v gii quyt cc vn  pht sinh."]}]}];return i.jsxs("div",{className:"container mx-auto px-6 py-12",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Hng Dn S Dng"}),i.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Cho mng bn n vi Ngn Hng Cu Hi Ton AI. Di y l hng dn chi tit cc tnh nng dnh cho tng nhm ngi dng."})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-6xl mx-auto",children:r.map(e=>i.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden border-t-4 border-${e.color}-500 hover:shadow-xl transition-shadow duration-300`,children:[i.jsxs("div",{className:`bg-${e.color}-50 p-6 flex items-center gap-4`,children:[i.jsx("div",{className:"text-4xl",children:e.icon}),i.jsx("h2",{className:`text-2xl font-bold text-${e.color}-700`,children:e.title})]}),i.jsx("div",{className:"p-6",children:e.content.map((t,n)=>i.jsxs("div",{className:"mb-6 last:mb-0",children:[t.subtitle&&i.jsx("h3",{className:`text-lg font-bold text-${e.color}-800 mb-3 border-b border-${e.color}-200 pb-1`,children:t.subtitle}),i.jsx("ul",{className:"space-y-3",children:t.items.map((a,s)=>i.jsxs("li",{className:"flex items-start text-gray-700",children:[i.jsx("svg",{className:`w-5 h-5 text-${e.color}-500 mr-3 mt-1 flex-shrink-0`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),i.jsx("span",{children:a})]},s))})]},n))})]},e.id))}),i.jsxs("div",{className:"mt-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white text-center shadow-lg",children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Bn cn h tr thm?"}),i.jsx("p",{className:"mb-6 opacity-90",children:"i ng h tr ca chng ti lun sn sng gii p mi thc mc ca bn 24/7."}),i.jsx(jt,{to:"/contact",className:"inline-block px-8 py-3 bg-white text-indigo-600 font-bold rounded-full hover:bg-gray-100 transition-colors shadow-md",children:"Lin h ngay"})]})]})},Pxe="https://hoc.io.vn/api";class qxe{getAuthToken(){return localStorage.getItem("auth_token")}async fetchAPI(e,t={}){const n=this.getAuthToken(),a=await fetch(`${Pxe}/lesson-enrollments.php?path=${e}`,{...t,headers:{"Content-Type":"application/json",Authorization:n?`Bearer ${n}`:"",...t.headers}});if(!a.ok){const s=await a.json().catch(()=>({error:"Network error"}));throw new Error(s.error||`HTTP ${a.status}`)}return a.json()}async getMyEnrollments(){return(await this.fetchAPI("my-enrollments")).data}async getAvailableLessons(){return(await this.fetchAPI("available-lessons")).data}async getLessonEnrollments(e){return(await this.fetchAPI(`lesson/${e}/enrollments`)).data}async enrollInLesson(e){return(await this.fetchAPI("enroll",{method:"POST",body:JSON.stringify({lesson_id:e})})).data}async enrollWithCode(e){return(await this.fetchAPI("enroll-with-code",{method:"POST",body:JSON.stringify({code:e})})).data}async createAccessCode(e){return(await this.fetchAPI("create-access-code",{method:"POST",body:JSON.stringify(e)})).data}async unenrollFromLesson(e){await this.fetchAPI(e.toString(),{method:"DELETE"})}async updateProgress(e,t){await this.fetchAPI(`${e}/progress`,{method:"PUT",body:JSON.stringify({progress:t})})}}const gf=new qxe,$xe=()=>{const{user:r}=Yr(),[e,t]=he.useState([]),[n,a]=he.useState(!0),[s,o]=he.useState(null),[l,u]=he.useState("all");he.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0);const v=await gf.getMyEnrollments();t(v),o(null)}catch(v){console.error("Error loading enrollments:",v),o("Khng th ti danh sch bi hc")}finally{a(!1)}},d=async(v,x)=>{if(confirm(`Bn c chc mun hy ng k bi hc "${x}"?`))try{await gf.unenrollFromLesson(v),alert("  hy ng k bi hc"),c()}catch(b){console.error("Error unenrolling:",b),alert("C li khi hy ng k")}},h=e.filter(v=>l==="all"?!0:v.status===l),g=v=>{switch(v){case"easy":return i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"D"});case"medium":return i.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"TB"});case"hard":return i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Kh"});default:return null}},m=v=>{switch(v){case"active":return i.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"ang hc"});case"completed":return i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"Hon thnh"});case"dropped":return i.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:" b"});default:return null}};return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bi hc ca ti"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Qun l cc bi hc bn  ng k"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 bg-blue-100 rounded-full p-3",children:i.jsx("i",{className:"fas fa-book text-blue-600 text-xl"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Tng bi hc"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 bg-green-100 rounded-full p-3",children:i.jsx("i",{className:"fas fa-play-circle text-green-600 text-xl"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"ang hc"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(v=>v.status==="active").length})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 bg-purple-100 rounded-full p-3",children:i.jsx("i",{className:"fas fa-check-circle text-purple-600 text-xl"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Hon thnh"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(v=>v.status==="completed").length})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 bg-yellow-100 rounded-full p-3",children:i.jsx("i",{className:"fas fa-chart-line text-yellow-600 text-xl"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Tin  TB"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[e.length>0?Math.round(e.reduce((v,x)=>v+x.progress,0)/e.length):0,"%"]})]})]})})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg transition-colors ${l==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tt c (",e.length,")"]}),i.jsxs("button",{onClick:()=>u("active"),className:`px-4 py-2 rounded-lg transition-colors ${l==="active"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["ang hc (",e.filter(v=>v.status==="active").length,")"]}),i.jsxs("button",{onClick:()=>u("completed"),className:`px-4 py-2 rounded-lg transition-colors ${l==="completed"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Hon thnh (",e.filter(v=>v.status==="completed").length,")"]})]}),i.jsxs(jt,{to:"/available-lessons",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-plus"}),"Tm bi hc mi"]})]})}),s&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:s}),h.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:l==="all"?"Cha c bi hc no":`Khng c bi hc ${l==="active"?"ang hc":"hon thnh"}`}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Khm ph v ng k cc bi hc  bt u hc"}),i.jsxs(jt,{to:"/available-lessons",className:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx("i",{className:"fas fa-search mr-2"}),"Tm bi hc"]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(v=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-indigo-500 to-purple-600",children:[v.thumbnail_url?i.jsx("img",{src:v.thumbnail_url,alt:v.lesson_name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"flex items-center justify-center h-full text-white text-6xl",children:""}),i.jsx("div",{className:"absolute top-4 right-4",children:m(v.status)})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:v.lesson_name}),g(v.difficulty_level)]}),i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[i.jsx("i",{className:"fas fa-book-open mr-1"}),v.subject_name," - ",v.chapter_name]}),v.teacher_name&&i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[i.jsx("i",{className:"fas fa-user-tie mr-1"}),"GV: ",v.teacher_name]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-600",children:"Tin "}),i.jsxs("span",{className:"font-semibold text-indigo-600",children:[v.progress,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${v.progress}%`}})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 mb-4",children:[v.video_count>0&&i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-video mr-1"}),v.video_count," video"]}),v.document_count>0&&i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-file-pdf mr-1"}),v.document_count," ti liu"]}),v.content_count>0&&i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-file-text mr-1"}),v.content_count," ni dung"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(jt,{to:`/lesson/${v.lesson_slug}`,className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-center rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx("i",{className:"fas fa-play mr-2"}),"Hc tip"]}),i.jsx("button",{onClick:()=>d(v.id,v.lesson_name),className:"px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",title:"Hy ng k",children:i.jsx("i",{className:"fas fa-times"})})]})]})]},v.id))})]})})},Uxe=()=>{const[r,e]=he.useState([]),[t,n]=he.useState(!0),[a,s]=he.useState(null),[o,l]=he.useState(""),[u,c]=he.useState(!1),[d,h]=he.useState(""),[g,m]=he.useState(null);he.useEffect(()=>{v()},[]);const v=async()=>{try{n(!0);const _=await gf.getAvailableLessons();e(_),s(null)}catch(_){console.error("Error loading lessons:",_),s("Khng th ti danh sch bi hc")}finally{n(!1)}},x=async(_,N)=>{if(confirm(`Bn c mun ng k bi hc "${N}"?`))try{m(_),await gf.enrollInLesson(_),alert(" ng k bi hc thnh cng!"),v()}catch(j){console.error("Error enrolling:",j),alert(j.message||"C li khi ng k bi hc")}finally{m(null)}},b=async _=>{if(_.preventDefault(),!d.trim()){alert("Vui lng nhp m truy cp");return}try{await gf.enrollWithCode(d.toUpperCase()),alert(" ng k bi hc thnh cng!"),c(!1),h(""),v()}catch(N){console.error("Error enrolling with code:",N),alert(N.message||"M truy cp khng hp l")}},y=r.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())||_.description?.toLowerCase().includes(o.toLowerCase())||_.subject_name?.toLowerCase().includes(o.toLowerCase())),S=_=>{switch(_){case"easy":return i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"D"});case"medium":return i.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Trung bnh"});case"hard":return i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Kh"});default:return null}};return t?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Khm ph bi hc"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Tm v ng k cc bi hc ph hp vi bn"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:o,onChange:_=>l(_.target.value),placeholder:"Tm kim bi hc...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),i.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(jt,{to:"/my-lessons",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-book"}),"Bi hc ca ti"]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[i.jsx("i",{className:"fas fa-key"}),"Nhp m"]})]})]})}),a&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:a}),i.jsxs("div",{className:"mb-6 text-sm text-gray-600",children:["Tm thy ",i.jsx("strong",{children:y.length})," bi hc"]}),y.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Khng tm thy bi hc"}),i.jsx("p",{className:"text-gray-600",children:"Th tm kim vi t kha khc"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(_=>i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-indigo-500 to-purple-600",children:[_.thumbnail_url?i.jsx("img",{src:_.thumbnail_url,alt:_.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"flex items-center justify-center h-full text-white text-6xl",children:""}),_.is_enrolled===1&&i.jsx("div",{className:"absolute top-4 right-4",children:i.jsxs("span",{className:"px-3 py-1 bg-green-500 text-white text-xs rounded-full",children:[i.jsx("i",{className:"fas fa-check mr-1"})," ng k"]})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:_.name}),S(_.difficulty_level)]}),i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[i.jsx("i",{className:"fas fa-book-open mr-1"}),_.subject_name," - ",_.chapter_name]}),_.teacher_name&&i.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[i.jsx("i",{className:"fas fa-user-tie mr-1"}),"GV: ",_.teacher_name]}),_.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:_.description}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 mb-4 pb-4 border-b",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-users mr-1"}),_.enrollment_count," hc sinh"]}),_.duration_minutes&&i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-clock mr-1"}),_.duration_minutes," pht"]})]}),_.is_enrolled===1?i.jsxs(jt,{to:"/my-lessons",className:"block w-full px-4 py-2 bg-gray-100 text-gray-700 text-center rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx("i",{className:"fas fa-arrow-right mr-2"}),"Vo hc"]}):i.jsx("button",{onClick:()=>x(_.id,_.name),disabled:g===_.id,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g===_.id?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"ang ng k..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-plus mr-2"}),"ng k hc"]})})]})]},_.id))})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"ng k bng m truy cp"}),i.jsx("button",{onClick:()=>{c(!1),h("")},className:"text-gray-400 hover:text-gray-600",children:i.jsx("i",{className:"fas fa-times"})})]})}),i.jsxs("form",{onSubmit:b,className:"p-6",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Nhp m truy cp m gio vin  cung cp  ng k vo bi hc ring t."}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M truy cp"}),i.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value.toUpperCase()),placeholder:"V d: MATH10A-2024",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 uppercase",autoFocus:!0})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{c(!1),h("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Hy"}),i.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[i.jsx("i",{className:"fas fa-check mr-2"}),"ng k"]})]})]})]})})]})},Hxe=()=>{const{slug:r}=Cf(),{user:e}=Yr(),t=Vn(),[n,a]=he.useState(null),[s,o]=he.useState(!0),[l,u]=he.useState(null),[c,d]=he.useState("videos"),[h,g]=he.useState(0);he.useEffect(()=>{r&&m()},[r]);const m=async()=>{try{o(!0);const _=await(await fetch(`https://hoc.io.vn/api/admin/lessons-api.php?path=list&search=${r}`)).json();if(!_.data||_.data.length===0){u("Khng tm thy bi hc");return}const N=_.data[0],j=await mn.getLessonWithContent(N.id.toString());j&&(a(j),j.videos.length>0?d("videos"):j.documents.length>0?d("documents"):j.content.length>0&&d("content")),u(null)}catch(S){console.error("Error loading lesson:",S),u("Khng th ti bi hc")}finally{o(!1)}},v=S=>S.video_id?`https://www.youtube.com/embed/${S.video_id}`:"",x=S=>S.video_id?`https://player.vimeo.com/video/${S.video_id}`:"",b=S=>{const _=S.replace(/nh ngha:/g,'<div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-4"><strong class="text-blue-900"> nh ngha:</strong>').replace(/V d:/g,'</div><div class="bg-green-50 border-l-4 border-green-500 p-4 my-4"><strong class="text-green-900"> V d:</strong>').replace(/Ghi ch:/g,'</div><div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 my-4"><strong class="text-yellow-900"> Ghi ch:</strong>').replace(/Lu :/g,'</div><div class="bg-red-50 border-l-4 border-red-500 p-4 my-4"><strong class="text-red-900"> Lu :</strong>');return i.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:_}})};if(s)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti bi hc..."})]})});if(l||!n)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 max-w-md text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:l||"Khng tm thy bi hc"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Bi hc khng tn ti hoc bn cha c quyn truy cp"}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsx(jt,{to:"/my-lessons",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Bi hc ca ti"}),i.jsx(jt,{to:"/available-lessons",className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Tm bi hc"})]})]})});const y=n.videos[h];return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>t(-1),className:"text-gray-600 hover:text-gray-900",children:i.jsx("i",{className:"fas fa-arrow-left text-xl"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900",children:n.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:[n.chapter_name," - ",n.subject_name]})]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs(jt,{to:"/my-lessons",className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx("i",{className:"fas fa-book mr-2"}),"Bi hc ca ti"]})})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("div",{className:"flex",children:[n.videos.length>0&&i.jsxs("button",{onClick:()=>d("videos"),className:`flex-1 px-6 py-3 font-medium ${c==="videos"?"border-b-2 border-indigo-600 text-indigo-600 bg-indigo-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[i.jsx("i",{className:"fas fa-video mr-2"}),"Video (",n.videos.length,")"]}),n.documents.length>0&&i.jsxs("button",{onClick:()=>d("documents"),className:`flex-1 px-6 py-3 font-medium ${c==="documents"?"border-b-2 border-indigo-600 text-indigo-600 bg-indigo-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[i.jsx("i",{className:"fas fa-file-pdf mr-2"}),"Ti liu (",n.documents.length,")"]}),n.content.length>0&&i.jsxs("button",{onClick:()=>d("content"),className:`flex-1 px-6 py-3 font-medium ${c==="content"?"border-b-2 border-indigo-600 text-indigo-600 bg-indigo-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[i.jsx("i",{className:"fas fa-file-text mr-2"}),"Ni dung (",n.content.length,")"]})]})}),c==="videos"&&i.jsx("div",{className:"p-6",children:y?i.jsxs("div",{children:[i.jsxs("div",{className:"aspect-video bg-black rounded-lg overflow-hidden mb-4",children:[y.video_type==="youtube"&&i.jsx("iframe",{src:v(y),className:"w-full h-full",allowFullScreen:!0,title:y.title}),y.video_type==="vimeo"&&i.jsx("iframe",{src:x(y),className:"w-full h-full",allowFullScreen:!0,title:y.title}),y.video_type==="other"&&i.jsx("video",{src:y.video_url,controls:!0,className:"w-full h-full"})]}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:y.title}),y.description&&i.jsx("p",{className:"text-gray-600 mb-4",children:y.description}),n.videos.length>1&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Danh sch video (",n.videos.length,")"]}),i.jsx("div",{className:"space-y-2",children:n.videos.map((S,_)=>i.jsxs("button",{onClick:()=>g(_),className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${_===h?"bg-indigo-50 border border-indigo-200":"bg-gray-50 hover:bg-gray-100"}`,children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold text-sm",children:_+1}),i.jsxs("div",{className:"flex-1 text-left",children:[i.jsx("p",{className:"font-medium text-gray-900",children:S.title}),S.duration_seconds>0&&i.jsxs("p",{className:"text-xs text-gray-500",children:[Math.floor(S.duration_seconds/60)," pht"]})]}),_===h&&i.jsx("i",{className:"fas fa-play text-indigo-600"})]},S.id))})]})]}):i.jsx("p",{className:"text-center text-gray-500 py-12",children:"Cha c video no"})}),c==="documents"&&i.jsx("div",{className:"p-6",children:n.documents.length>0?i.jsx("div",{className:"space-y-4",children:n.documents.map((S,_)=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:`fas ${S.document_type==="pdf"?"fa-file-pdf text-red-600":S.document_type==="docx"?"fa-file-word text-blue-600":S.document_type==="xlsx"?"fa-file-excel text-green-600":S.document_type==="pptx"?"fa-file-powerpoint text-orange-600":"fa-file text-gray-600"} text-2xl`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:S.title}),S.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[i.jsx("span",{className:"uppercase",children:S.document_type}),S.file_size_kb>0&&i.jsxs("span",{children:[(S.file_size_kb/1024).toFixed(1)," MB"]})]})]}),i.jsxs("a",{href:S.file_url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx("i",{className:"fas fa-download mr-2"}),"Ti v"]})]},S.id))}):i.jsx("p",{className:"text-center text-gray-500 py-12",children:"Cha c ti liu no"})}),c==="content"&&i.jsx("div",{className:"p-6",children:n.content.length>0?i.jsx("div",{className:"space-y-6",children:n.content.map((S,_)=>i.jsxs("div",{className:"bg-white",children:[i.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-semibold text-sm",children:_+1}),S.title]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:b(S.content)})]},S.id))}):i.jsx("p",{className:"text-center text-gray-500 py-12",children:"Cha c ni dung no"})})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Thng tin bi hc"}),n.description&&i.jsx("div",{className:"mb-4",children:i.jsx("p",{className:"text-sm text-gray-600",children:n.description})}),i.jsxs("div",{className:"space-y-3",children:[n.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("i",{className:"fas fa-clock text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:["Thi lng: ",n.duration_minutes," pht"]})]}),n.difficulty_level&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("i",{className:"fas fa-signal text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[" kh: ",n.difficulty_level==="easy"?"D":n.difficulty_level==="medium"?"Trung bnh":"Kh"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("i",{className:"fas fa-video text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[n.videos.length," video"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("i",{className:"fas fa-file-pdf text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[n.documents.length," ti liu"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("i",{className:"fas fa-file-text text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[n.content.length," ni dung"]})]})]})]}),n.exercises.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[i.jsxs("h3",{className:"font-semibold text-gray-900 mb-4",children:[i.jsx("i",{className:"fas fa-dumbbell mr-2 text-orange-600"}),"Bi tp (",n.exercises.length,")"]}),i.jsx("div",{className:"space-y-3",children:n.exercises.map((S,_)=>i.jsx("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-200 rounded-full flex items-center justify-center text-orange-800 font-semibold text-xs",children:_+1}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-gray-900",children:S.title}),S.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S.description}),i.jsx("button",{className:"mt-2 text-sm text-indigo-600 hover:text-indigo-700 font-medium",children:"Lm bi tp "})]})]})},S.id))})]})]})]})})]})},vw=class vw{static clearStaleCache(){try{["auth_stuck","force_refresh","emergency_cleared"].forEach(t=>{sessionStorage.removeItem(t)})}catch(e){console.error("Error clearing stale cache:",e)}}static clearNavigationCache(){try{window.location.hash&&(window.location.hash.includes("access_token")||window.location.hash.includes("refresh_token")||window.location.hash.includes("error"))&&window.history.replaceState(null,"",window.location.pathname)}catch(e){console.error("Error clearing navigation cache:",e)}}static clearTemporaryCache(){try{const e=Date.now(),t=[];for(let n=0;n<localStorage.length;n++){const a=localStorage.key(n);if(a&&a.startsWith(this.CACHE_KEYS.TEMP_PREFIX))try{const s=localStorage.getItem(a);if(s){const o=JSON.parse(s);o.timestamp&&e-o.timestamp>36e5&&t.push(a)}}catch{t.push(a)}}t.forEach(n=>localStorage.removeItem(n))}catch(e){console.error("Error clearing temporary cache:",e)}}static forceRefresh(){try{console.log("Performing force refresh: clearing caches and reloading page");try{sessionStorage.setItem("force_refresh","true")}catch{}this.clearTemporaryCache(),this.clearStaleCache(),this.clearNavigationCache();try{window.location.reload()}catch(e){console.warn("window.location.reload() failed during forceRefresh",e)}}catch(e){console.error("Error during forceRefresh:",e)}}static setupAutoCleanup(e=1e3*60*30){try{const t=setInterval(()=>{try{this.clearTemporaryCache()}catch{}},e);return()=>{clearInterval(t)}}catch(t){return console.error("Failed to setup auto cleanup:",t),()=>{}}}static emergencyClear(){try{console.warn("Performing emergency clear of storage");try{sessionStorage.setItem("emergency_cleared","true")}catch{}try{sessionStorage.clear()}catch{}try{localStorage.clear()}catch{}}catch(e){console.error("Error during emergencyClear:",e)}}};vw.CACHE_KEYS={TEMP_PREFIX:"temp_",APP_STATE:"app_state"};let ep=vw;const Vxe=he.createContext(null),Gxe=({children:r})=>{const[e,t]=he.useState({selections:{},questionsCache:{},counts:{all:0,mcq:0,msq:0,sa:0}}),n=he.useCallback((b,y)=>{let S=0,_=0,N=0;return Object.entries(b).forEach(([j,E])=>{const T=y[j];if(T&&E.length>0){const F=T.filter(A=>E.includes(A.id));S+=F.filter(A=>A.type==="mcq").length,_+=F.filter(A=>A.type==="msq").length,N+=F.filter(A=>A.type==="sa").length}}),{all:S+_+N,mcq:S,msq:_,sa:N}},[]),a=he.useCallback(()=>{t(b=>{const y=n(b.selections,b.questionsCache);return{...b,counts:y}})},[n]),s=he.useCallback((b,y)=>{t(S=>{const _=S.selections[b]||[],N=_.includes(y)?_.filter(T=>T!==y):[..._,y],j={...S.selections,[b]:N},E=n(j,S.questionsCache);return{...S,selections:j,counts:E}})},[n]),o=he.useCallback((b,y)=>{t(S=>{const _=S.selections[b]||[],N=y.map(F=>F.id),j=[..._];N.forEach(F=>{j.includes(F)||j.push(F)});const E={...S.selections,[b]:j},T=n(E,S.questionsCache);return{...S,selections:E,counts:T}})},[n]),l=he.useCallback((b,y)=>{t(S=>{const _=S.selections[b]||[],N=y.map(F=>F.id),j=_.filter(F=>!N.includes(F)),E={...S.selections,[b]:j},T=n(E,S.questionsCache);return{...S,selections:E,counts:T}})},[n]),u=he.useCallback(()=>{t(b=>({...b,selections:{},counts:{all:0,mcq:0,msq:0,sa:0}}))},[]),c=he.useCallback((b,y)=>{t(S=>{const _={...S.questionsCache,[b]:y},N=n(S.selections,_);return{...S,questionsCache:_,counts:N}})},[n]),d=he.useCallback(b=>e.questionsCache[b]||null,[e.questionsCache]),h=he.useCallback(b=>e.selections[b]||[],[e.selections]),g=he.useCallback(()=>e.counts.all,[e.counts.all]),m=he.useCallback(()=>e.counts,[e.counts]),v=he.useCallback(async()=>{const b=[];for(const[y,S]of Object.entries(e.selections)){if(S.length===0)continue;let _=e.questionsCache[y];if(!_)try{_=(await Jm.getQuestionsByType(y,{approvedOnly:!0})).map(E=>({id:E.id,type:E.type,question:E.question_text,option_a:E.option_a||"",option_b:E.option_b||"",option_c:E.option_c||"",option_d:E.option_d||"",correct_option:E.correct_option,explanation:E.explanation,difficulty:E.difficulty_level,tags:E.tags||[],isDynamic:E.is_dynamic||!1})),t(E=>({...E,questionsCache:{...E.questionsCache,[y]:_}}))}catch(j){console.error(`Error loading questions for type ${y}:`,j);continue}const N=_.filter(j=>S.includes(j.id));b.push(...N)}return b},[e.selections,e.questionsCache]),x={state:e,toggleQuestion:s,selectAllInType:o,deselectAllInType:l,clearAllSelections:u,getSelectionsForType:h,getTotalSelectedCount:g,getSelectedCounts:m,getAllSelectedQuestions:v,cacheQuestions:c,getCachedQuestions:d,updateCounts:a};return i.jsx(Vxe.Provider,{value:x,children:r})},Qxe=()=>{const[r,e]=he.useState(null),[t,n]=he.useState(!1),[a,s]=he.useState(null),o=async()=>{n(!0),s(null);try{const h=await Bt.getSubjects();e({type:"subjects",data:h}),console.log(" Subjects:",h)}catch(h){s(h.message||"Unknown error"),console.error(" Error:",h)}finally{n(!1)}},l=async()=>{n(!0),s(null);try{const h=await Bt.getChaptersBySubject(1);e({type:"chapters",data:h}),console.log(" Chapters:",h)}catch(h){s(h.message||"Unknown error"),console.error(" Error:",h)}finally{n(!1)}},u=async()=>{n(!0),s(null);try{const h=await Bt.getLessonsByChapter(1);e({type:"lessons",data:h}),console.log(" Lessons:",h)}catch(h){s(h.message||"Unknown error"),console.error(" Error:",h)}finally{n(!1)}},c=async()=>{n(!0),s(null);try{const h=await Bt.getQuestionTypesByLesson(1);e({type:"question_types",data:h}),console.log(" Question Types:",h)}catch(h){s(h.message||"Unknown error"),console.error(" Error:",h)}finally{n(!1)}},d=async()=>{n(!0),s(null);try{const h=await Bt.getQuestionsByType(1,{approvedOnly:!0});e({type:"questions",data:h}),console.log(" Questions:",h)}catch(h){s(h.message||"Unknown error"),console.error(" Error:",h)}finally{n(!1)}};return i.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:" Debug API Test"}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsx("button",{onClick:o,disabled:t,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-400 mr-2",children:"Test Subjects"}),i.jsx("button",{onClick:l,disabled:t,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-gray-400 mr-2",children:"Test Chapters"}),i.jsx("button",{onClick:u,disabled:t,className:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 disabled:bg-gray-400 mr-2",children:"Test Lessons"}),i.jsx("button",{onClick:c,disabled:t,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:bg-gray-400 mr-2",children:"Test Question Types"}),i.jsx("button",{onClick:d,disabled:t,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:bg-gray-400 mr-2",children:"Test Questions"})]}),t&&i.jsx("div",{className:"p-4 bg-blue-100 border border-blue-300 rounded",children:i.jsx("p",{className:"text-blue-800",children:" Loading..."})}),a&&i.jsxs("div",{className:"p-4 bg-red-100 border border-red-300 rounded",children:[i.jsx("p",{className:"text-red-800 font-bold",children:" Error:"}),i.jsx("p",{className:"text-red-700",children:a})]}),r&&!t&&i.jsxs("div",{className:"p-4 bg-green-100 border border-green-300 rounded",children:[i.jsxs("p",{className:"text-green-800 font-bold mb-2",children:[" Success - ",r.type]}),i.jsxs("p",{className:"text-green-700 mb-2",children:["Count: ",r.data?.length||0]}),i.jsxs("details",{className:"mt-2",children:[i.jsx("summary",{className:"cursor-pointer text-green-800 font-semibold",children:"View Data"}),i.jsx("pre",{className:"mt-2 p-2 bg-white rounded text-xs overflow-auto max-h-96",children:JSON.stringify(r.data,null,2)})]})]}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded",children:[i.jsx("h2",{className:"font-bold mb-2",children:" Instructions:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Click each button to test API endpoints"}),i.jsx("li",{children:"Check browser Console for detailed logs"}),i.jsx("li",{children:"Check Network tab to see actual API requests"}),i.jsx("li",{children:"If you see errors, check CORS and API server status"})]})]})]})},Wxe=()=>{he.useEffect(()=>{let e=null;try{if(performance.navigation?.type===1||performance.getEntriesByType?.("navigation")?.[0]?.type==="reload"){try{sessionStorage.removeItem("emergency_cleared"),sessionStorage.removeItem("force_refresh")}catch{}ep.clearNavigationCache()}e=ep.setupAutoCleanup(18e5)}catch(t){console.error("Cache init failed:",t)}return()=>{e&&e()}},[]);const r=()=>i.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"ang ti ng dng..."})]})});return i.jsx(bF,{children:i.jsx(he.Suspense,{fallback:i.jsx(r,{}),children:i.jsx(Q5,{children:i.jsxs(wF,{children:[i.jsx(Nr,{path:"/",element:i.jsx(VF,{})}),i.jsx(Nr,{path:"/about",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(GF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/contact",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(QF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/huong-dan",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(zxe,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/terms",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(WF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/sitemap",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(KF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/rss-generator",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(YF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/debug-rss",element:i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(ZF,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/debug-api",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Qxe,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/quiz-bank",element:i.jsx(Xi,{allowedRoles:["teacher","admin"],children:i.jsx(Gxe,{children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(dge,{})}),i.jsx(Qr,{})]})})})}),i.jsx(Nr,{path:"/create",element:i.jsx(Xi,{allowedRoles:["teacher","admin"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(bge,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/online-exam",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(wge,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/online-exam/:slug",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(sy,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/exam",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(sy,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/exam/:slug",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(sy,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/practice",element:i.jsx(Xi,{allowedRoles:["teacher","student","admin"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(jxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/practice/custom",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsx(Txe,{})})}),i.jsx(Nr,{path:"/practice/schedule/:scheduleId",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsx(Cxe,{})})}),i.jsx(Nr,{path:"/practice/mistakes",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Dxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/practice/learn",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(kxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/progress",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Fxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/practice/session/:sessionId",element:i.jsx(Xi,{allowedRoles:["student"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Exe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/teacher-results",element:i.jsx(Xi,{allowedRoles:["teacher","admin"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Sxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/my-lessons",element:i.jsx(Xi,{allowedRoles:["student","teacher","admin"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx($xe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/available-lessons",element:i.jsx(Xi,{allowedRoles:["student","teacher","admin"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(Uxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/lesson/:slug",element:i.jsx(Xi,{allowedRoles:["student","teacher","admin"],children:i.jsx(Hxe,{})})}),i.jsx(Nr,{path:"/hoc-online",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(H5,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/hoc-online/:lessonId",element:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(H5,{})}),i.jsx(Qr,{})]})}),i.jsx(Nr,{path:"/admin",element:i.jsx(nS,{allowedEmails:["lvdoqt@gmail.com"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(pxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"/admin/practice-settings",element:i.jsx(nS,{allowedEmails:["lvdoqt@gmail.com"],children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(Xr,{}),i.jsx("main",{className:"flex-grow",children:i.jsx(gxe,{})}),i.jsx(Qr,{})]})})}),i.jsx(Nr,{path:"*",element:i.jsx(JF,{})})]})})})})},mM=document.getElementById("root");if(!mM)throw new Error("Could not find root element to mount to");const Kxe=MF.createRoot(mM);Kxe.render(i.jsx(Na.StrictMode,{children:i.jsx(Wxe,{})}));export{dM as a,Va as b,i as j,Bt as q,Yr as u};
